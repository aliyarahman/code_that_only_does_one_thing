message_number,forum,subject,datetime,timezone,username,message_content
0,Commotion-dev, commOTIon git repo access,"Mon, 31 Jan 2011 23:47:38 -0600",-0600,Brian Duggan,"Hi All,

Welcome to the commOTIon dev list. Right now, the commOTIon source is
hosted in a git repo at git.chambana.net

We use gitosis to manage access, so everyone who needs it should send
(an) ssh public key(s) to me for the machines they want to use.

My mail is

bcduggan at ucimc.org

Let's get cracking!

Brian

-- 
Brian Duggan
Technical Projects Developer
UC Independent Media Center
http://www.ucimc.org | 631 223 8442

"
1,Commotion-dev, commOTIon git repo access,"Mon, 31 Jan 2011 23:49:21 -0600",-0600,Brian Duggan,"Right, and now how to access that repo once I've added you:

git clone git at git.chambana.net:commotion.git

Thanks,
Brian

On 1/31/11 11:47 PM, Brian Duggan wrote:
> Hi All,
> 
> Welcome to the commOTIon dev list. Right now, the commOTIon source is
> hosted in a git repo at git.chambana.net
> 
> We use gitosis to manage access, so everyone who needs it should send
> (an) ssh public key(s) to me for the machines they want to use.
> 
> My mail is
> 
> bcduggan at ucimc.org
> 
> Let's get cracking!
> 
> Brian
> 

"
2,Commotion-dev, Fwd: Re: Requesting you to help the middle-east,"Tue, 01 Feb 2011 00:50:13 -0500",-0500,Dan Meredith,"Heya all,

For the list archives.  This was an earlier conversation on a basic dev
plan.

In summary, two groups. One group working to update the olsr ports
(http://www.olsr.org/?q=download) for windows, os x, iphone and android.
 The second group to work on improving the OpenWRT commotion custom
build (http://wiki.ucimc.org/bin/view/Tech/WirelessDocs).  I suspect
more threads and conversations for each group to follow.

Cheers,
--
Dan

"
3,Commotion-dev, Thoughts on secondary apps,"Tue, 1 Feb 2011 00:51:40 -0600",-0600,Erich Heine,"Hi all,

I've been doing some thinking on this whole secondary apps thing. Basically,
the main idea is to have a few easy apps, and an openwrt distro that can be
put on lots of cheap boxes to create a decent mesh. If lucky, some few main
internet uplinks can be organized for information access to and from the
outside world.  Also extremely relevant: the whole point of these networks
is to subvert governments. All of this leads to some really crazy
constraints and considerations.

First of all, consider use cases, which seem to fall naturally into some
sort of priority scheme. Here is how i see it, which is by no means a
complete, or even accurate list, but we gotta start somewhere

1. Organizing the revolution (or resistance or protests or whatnot) -- this
will probably be the most important use case for those hosting the network.
They need to communicate and make sure things are properly organized. If i
were in this situation, I would consider this the utmost importance as there
are very serious consequences (prison, death, etc) attached. This needs to
happen.

2a. Keeping the world informed -- protests and such are messy affairs. Its
usually best to be very public about all happenings, particularly when your
opponent is the government. Public and international, as you want things to
remain somewhat tame, and the easiest way to do this has historically have
""the whole world is watching"" situations (well better than the alternative
:( ).

2b. Keeping up on the rest of the word: Is the UN sending in blue helmets?
Will we get help coming in and when? Are we getting the right message out
about our goals?

3. Tell my family I am alive. People will want to share this info with
family and friends abroad.

So on top of these use cases we have some weird constraints here:

* Limited Internet connectivity. It's like the olden days but worse -- fast
LAN super slow WAN. Further that WAN link is probably pretty sketchy and
down and up a lot.

* Honest to goodness hop-count issues, and other weirdnesses from running
lots of traffic through small boxes.

* Trust issues like woah -- social trust issues between/about various
groups, mesh networks seem tailor made for MiTM situations, canonical naming
and other issues go out the window.

* Infrastructure setup issues -- even if we get a packet network up and
running on meshed devices, there needs to be a bunch of local services set
up to deal with the fact that 1. no one can reach standard infrastructure
reasonable (see the limited connectivity issues) and 2. many of the local
language services are probably run on servers that can no longer talk to the
network, and probably can't reasonably be expected to jump on the mesh.

Ok so there is a weird situation here! Honestly a huge chunk of it sounds
like a job for freenet -- otherwise we just end up cobbling something
together out of git, ssh, pgp. Other things to consider too tho:

* Batching communications for low priority transmission. Email can work this
way. Or we could do something a bit more sophisticated.

* Key parties: seriously, this network and situation almost demands giving
everyone a key and good key ring apps. Otherwise this whole thing is fairly
easily subvertable. Key signing should be trivial, as should web-of-trust
stuff. smart-phones can really help here, a nice android app devoted to key
exchanges really makes the whole thing reasonable.

* user education -- everything above needs to be teachable to the users in
some form, quickly and with minimal effort, because really, there are bigger
things afoot and the easier it is to get people ready to go, the better.

Things that sound like good ideas to consider, but probably are just easier
to solve socially:

* deciding what gets out over the uplink: really this will come down to the
uplink operator anyway, so there is no point trying to enforce it...

* factional disputes, trust of leaders, who gets the best info out: this
problem has existed far longer than the internet, the real problem is that
social upheaval is pretty much by definition messy, and as such there is no
fix by tech.

Anyway... My little thought experiment turned into a total brain dump. Hope
there is enough here to start a good discussion on this topic, and maybe
consider setting an agenda on it.

Regards,
Erich
(sophacles in irc)
"
4,Commotion-dev," Agenda, priorities, collaboration,","Tue, 1 Feb 2011 00:58:26 -0600",-0600,Erich Heine,"Hi all,

Just want to get a discussion going on-list about stuff related to the
actual work at hand.  What is the agenda? What is done, and what needs
doing?

Im aware that getting the commotion distro up and working is part of it. As
is  getting the windows olsr client working. What in detail does this
entail? What other parts are needed?

Has anyone considered various language issues? So far everyone I've
encountered in this venture seems to be a native (or darn close) english
speaker, which is good for our work and coordination, but can we be sure to
get the appropriate level of understanding into Egypt on a proper timeline?

Speaking of timelines, what sort of timeline are we working on here? Any
thoughts/speculation on how long this may last before the gov't of egypt
backs down? I know there is negotiation for satellite bandwidth to be made
available... but that is out of (most of) our control. So should this just
be a sprint?

Hopefully this will get a discussion going!

Regards,
Erich
(sophacles on irc)
"
5,Commotion-dev, next steps,"Tue, 1 Feb 2011 12:39:49 +0200",+0200,Daniel Golle,"was just browsing through the git repo.
i got some questions/suggestions:
1) ubnt hardware only?
2) how aware are you about the easiness to flood/crash olsrd? any
plans on security? (node authentication via certs is implemented in
olsrd, but currently needs manual setup and key-generation is probably
not really safe/predictable on systems not even having a RTC...)
3) what about freeswitch and having a couple of ATAs attached? this
could give you voip easily...
4) batman-adv and IPv6 seem like a good plan to me, but as i see it,
the current mission is more about rapid deployment of what we already
got, is it?

how can i help?
"
6,Commotion-dev," Agenda, priorities, collaboration,","Tue, 1 Feb 2011 06:57:28 -0600",-0600,Chris Ritzo,"Hey all, just wanted to say first how awesome it is to have some new
folks interested in hacking about on mesh wifi.
Thanks to Brian I have the reading group time on my calendar, so I'll
plan to talk more with you all there, but here are some initial
thoughts to some of the recent discussion.

First things first, in addition to the git repo, we have some online
docs that we'd like you to have access to, read, and eventually edit.
To give you group access to the wiki, please create an account on
http://plexus.chambana.net - It's the frontend for requesting an LDAP
account on chambana.net servers. More info on that later.

On Tue, Feb 1, 2011 at 12:58 AM, Erich Heine <sophacles at gmail.com> wrote:
> Hi all,
> Just want to get a discussion going on-list about stuff related to the
> actual work at hand. ?What is the agenda? What is done, and what needs
> doing?

These are not in any sort of priority order...
- *finish* a commotion image with the basic services running and
deploy a test bed mesh within the IMC. Thanks to Brian's work this is
almost done. The test bed will be our internal testing ground for
whatever needs tested: bandwidth tests, distributed services,
whatever. We also have access to outdoor hardware and could then
expand that test mesh into downtown Urbana.
- new WRT theme. write a new frontend theme (programmed in Lua/Luci
http://luci.subsignal.org/ ) and application hooks for openwrt,
customized for commotion firmware. This isn't a huge priority, but
ties into the next item.
- write a 1-2-3 setup Lua/Luci based init script that allows easy
setup. one of the big goals that we have is a GUI frontend for the
init scripts that Josh has worked on. This would need to be simple,
allow a series of choices for a person with no technical knowledge to
fill in some details (perhaps given to them by us or someone else
technical who is deploying a mesh) that configs their device to joint
the mesh, share bandwidth, etc.
- Some talk on the list about Batman, Batman Advanced, and OpenMesh.
These are great technologies and we could certainly use them. In fact,
OTi would like to roll all of them into commotion so that the user or
group deploying a mesh could choose which protocol they want to use.
The OpenMesh dashboard is nice, and Josh has planed to roll it into
the commotion firmware.
- Why not just go with OpenMesh? I dunno, you tell me. What I've been
told is that OLSR is simply a better routing protocol, just doesn't
have the non-techie frontend yet. We're on the bleeding edge here
folks, so any direction is fine. I could see us putting together a
small OpenMesh test bed and do comparison tests with the OLSR test
bed.
- Windows OLSR client. There are old binaries on the olsr site, so we
need to build an updated one from source. this involves installing
cygwin, bison, flex, and any other dependencies, building the source
and then putting together a gui wrapper for it. The build should be
straightforward. Putting a GUI together is another. This needs to be
done.

> Im aware that getting the commotion distro up and working is part of it. As
> is ?getting the windows olsr client working. What in detail does this
> entail? What other parts are needed?

- Language support as a user preference would be great. It's supported
in OpenWRT I believe. Remember that config script idea? Language
option as a choice. There's also translation to think about for any
new interface pages we write.

That's enough for now. Hope to see you all Thursday evening.

Chris Ritzo

> Has anyone considered various language issues? So far everyone I've
> encountered in this venture seems to be a native (or darn close) english
> speaker, which is good for our work and coordination, but can we be sure to
> get the appropriate level of understanding into Egypt on a proper timeline?
> Speaking of timelines, what sort of timeline are we working on here? Any
> thoughts/speculation on how long this may last before the gov't of egypt
> backs down? I know there is negotiation for satellite bandwidth to be made
> available... but that is out of (most of) our control. So should this just
> be a sprint?
> Hopefully this will get a discussion going!
> Regards,
> Erich
> (sophacles on irc)
> _______________________________________________
> Commotion-dev mailing list
> Commotion-dev at lists.chambana.net
> http://lists.chambana.net/mailman/listinfo/commotion-dev
>
>
"
7,Commotion-dev, Critical services,"Tue, 01 Feb 2011 08:48:52 -0600",-0600,Peter Folk,"I think that this type of project would have the most effect if it
included special-case optimizations for four critical services, in order
of importance:

   1. One-to-many updates (RSS including twitter and facebook; inbound)
   2. One-to-many updates (updating twitter, facebook, etc; outbound)
   3. Short one-to-one messages (IM, SMS)
   4. Medium-length one-to-one messages (email)

The first item could be implemented as follows:

*Caching Client-Server RSS Proxy* (CSSRSSP)
In net-accessible areas, servers run a daemon that accepts incoming SSH
connections (for compression as much as security), over which the
following protocol is run:

    * client sends monitor<space>N<cr><lf> (for int N) to indicate that
      it is monitoring N feeds.  N should be 10 digits, 0-padded on the
      left.
    * client sends N monitor notifications, consisting of
      A<space>B<space>C<space>D<cr><lf>, where A is the number of users
      monitoring the feed, B is the 64-bit UTC timestamp of the last
      update received for this feed, and C is the number of characters
      in the feed's URL, and D is that URL.  Numbers are 10, 20, and 5
      digits, respectively, 0-padded on the left, to make read() as easy
      as possible
    * server begins to monitor the feed urls, polling each feed (with
      higher frequency, down to the feeds minimum update time) in a
      round-robin fashion weighted by # of monitoring users
    * When a feed is updated, server sends A<space>B<space>C<cr><lf>,
      where A is the timestamp of the update (20 digits), B is 0 if this
      is the full feed, the length of the update (in bytes; 10 digits)
      otherwise, and C is the diff of the RSS feed from the timestamp
      last reported to be cached by this client
    * Client periodically updates server with new ""monitor N"" info.  A
      user count of 0 removes the feed from the client's list of
      monitored feeds.  Otherwise, an entry with an already-seen URL
      updates the timestamp and user count on record for that client
    * Server caches the most recent list of monitored feeds and metadata
      in a file, with name == MD5 checksum of the file
    * Client can resume a cached state (eg, after disconnection) by
      sending resume<space>A<cr><lf> with the A == the md5sum of a
      previous state, to which the server should reply either ok<cr><lf>
      if it has such a state or no<cr><lf> if it does not

On the client side, this general daemon can be used to implement a
caching twitter, facebook, and general RSS-feed proxy (each one would
require some custom code).


The second item could be implemented with custom code per updateable
service in the client-side interface to the proxy.  That might be
preferable to using standard HTTP interface because those short updates
could be prioritized above general HTTP traffic.


The third item is only hard if you actually need to proxy the sessions
to disallow or reprioritize file transfers (which should go via the same
priority as HTTP, for example).  That amount of prioritization might
come for free with classification by port with per-stream bandwidth
throttling.


The 4th item is basically a normal SMTP-hijacking mail server that is
configured to be pretty much an open relay, and deal well with being
disconnected (maybe have some batch-transfer mechanism like UUCP). 
Extra points for cacheing the login credentials and original target of
an SMTP request, so you can forward a message to its intended
destination and avoid relaying issues...

Some thoughts,
Peter


"
8,Commotion-dev, Critical services,"Tue, 01 Feb 2011 09:05:28 -0600",-0600,Peter Folk,"*Caching Client-Server RSS Proxy* (CSSRSSP)
> In net-accessible areas, servers run a daemon that accepts incoming
> SSH connections (for compression as much as security), over which the
> following protocol is run:
>
>     * client sends monitor<space>N<cr><lf> (for int N) to indicate
>       that it is monitoring N feeds.  N should be 10 digits, 0-padded
>       on the left.
>     * client sends N monitor notifications, consisting of
>       A<space>B<space>C<space>D<cr><lf>, where A is the number of
>       users monitoring the feed, B is the 64-bit UTC timestamp of the
>       last update received for this feed, and C is the number of
>       characters in the feed's URL, and D is that URL.  Numbers are
>       10, 20, and 5 digits, respectively, 0-padded on the left, to
>       make read() as easy as possible
>     * server begins to monitor the feed urls, polling each feed (with
>       higher frequency, down to the feeds minimum update time) in a
>       round-robin fashion weighted by # of monitoring users
>     * When a feed is updated, server sends A<space>B<space>C<cr><lf>,
>       where A is the timestamp of the update (20 digits), B is 0 if
>       this is the full feed or the length of the update diff (in
>       bytes; 10 digits) otherwise, and C is the diff of the RSS feed
>       from the timestamp last reported to be cached by this client
>     * Client periodically updates server with new ""monitor N"" info.  A
>       user count of 0 removes the feed from the client's list of
>       monitored feeds.  Otherwise, an entry with an already-seen URL
>       updates the timestamp and user count on record for that client
>     * Server caches the most recent list of monitored feeds and
>       metadata in a file, with name == MD5 checksum of the file
>     * Client can resume a cached state (eg, after disconnection) by
>       sending resume<space>A<cr><lf> with the A == the md5sum of a
>       previous state, to which the server should reply either
>       ok<cr><lf> if it has such a state or no<cr><lf> if it does not
>
Notes:

    * the client and server's caches of monitored URLs need to be sorted
      the same to get the same MD5sum.  I suggest sort by URL.
    * in the ""When a feed is updated"" step, you need to have a boolean B
      (0 if this is the full feed, 1 if sending a diff update), and a
      separate B1 for the length of the update in bytes (left-padded 10
      digit decimal)
    * padding could be zeros or spaces; zeros would normally indicate
      octal so maybe spaces are better
    * Probably need a ""nok"" response if a line was received that the
      server doesn't grok
    * Probably need an intro ""ccsrss v1.2 foo at bar.com"" message from the
      server to announce the server version and who to contact if it's
      broken
    * My acronym was wrong =P  Should be CCSRSSP (which to me means, it
      needs a new name)
    * I think that such a client+server could be written in an evening
      in perl (and probably Python, for someone who likes it)
    * this kind of proxy would be useful for any system that's
      periodically connected, wants to monitor multiple RSS feeds, and
      usually has a slow link (like a cell phone).

Peter

"
9,Commotion-dev," Agenda, priorities, collaboration,","Tue, 01 Feb 2011 09:28:26 -0500",-0500,Josh King,
10,Commotion-dev, Thoughts on secondary apps,"Tue, 01 Feb 2011 09:33:30 -0600",-0600,Peter Folk,"Much of what Erich wrote is along the lines of what I was thinking too. 
A few notes:

On 2/1/2011 12:51 AM, Erich Heine wrote:
> First of all, consider use cases, which seem to fall naturally into
> some sort of priority scheme. Here is how i see it, which is by no
> means a complete, or even accurate list, but we gotta start somewhere
See my list of critical services, which seem to mirror yours.  Feedback
on my thoughts on approaching those services would be good.

> So on top of these use cases we have some weird constraints here:
>
> * Limited Internet connectivity. It's like the olden days but worse --
> fast LAN super slow WAN. Further that WAN link is probably pretty
> sketchy and down and up a lot.
> * Honest to goodness hop-count issues, and other weirdnesses from
> running lots of traffic through small boxes.
> * Trust issues like woah -- social trust issues between/about various
> groups, mesh networks seem tailor made for MiTM situations, canonical
> naming and other issues go out the window.
> * Infrastructure setup issues -- even if we get a packet network up
> and running on meshed devices, there needs to be a bunch of local
> services set up to deal with the fact that 1. no one can reach
> standard infrastructure reasonable (see the limited connectivity
> issues) and 2. many of the local language services are probably run on
> servers that can no longer talk to the network, and probably can't
> reasonably be expected to jump on the mesh.
It seems to me likely that a person will usually know the person
providing their gateway (multiple small disconnected cells are more
likely than a full mesh) or at least someone who knows that person (no
need for a party, which is operationally dangerous; you can have a chain
of trust).

With that in mind, you need each user to exchange a key with their
gateway host, in the form of the fingerprint for a self-signed SSL cert,
and get the direct URL of that gateway so that it can (via whatever
routing mechanism) use a secure HTTP proxy and critical service
interfaces that run on the gateway.

The gateway owner needs to get fingerprints of trusted out-of-country
proxies, ccsrssp hosts, etc.  Since the gateway operator has 'net
access, that can be PKI-based.

> * deciding what gets out over the uplink: really this will come down
> to the uplink operator anyway, so there is no point trying to enforce
> it...

Yes, but reasonable defaults will make things work better:

    * On the gateway, identify uplink bandwidth with periodic
      observations and/or speed tests
    * Prioritize critical-service traffic, DNS, and known chat
      protocols, over bulk traffic
    * If the gateway only communicates with an out-of-country proxy
      (through an SSH tunnel, for example), that proxy can similarly
      prioritize gateway-bound traffic

Peter

"
11,Commotion-dev," Agenda, priorities, collaboration,","Tue, 1 Feb 2011 10:58:02 -0500",-0500,Outback Dingo,"On Tue, Feb 1, 2011 at 7:57 AM, Chris Ritzo <chris.ritzo at gmail.com> wrote:

> Hey all, just wanted to say first how awesome it is to have some new
> folks interested in hacking about on mesh wifi.
> Thanks to Brian I have the reading group time on my calendar, so I'll
> plan to talk more with you all there, but here are some initial
> thoughts to some of the recent discussion.
>
> First things first, in addition to the git repo, we have some online
> docs that we'd like you to have access to, read, and eventually edit.
> To give you group access to the wiki, please create an account on
> http://plexus.chambana.net - It's the frontend for requesting an LDAP
> account on chambana.net servers. More info on that later.
>
> On Tue, Feb 1, 2011 at 12:58 AM, Erich Heine <sophacles at gmail.com> wrote:
> > Hi all,
> > Just want to get a discussion going on-list about stuff related to the
> > actual work at hand.  What is the agenda? What is done, and what needs
> > doing?
>
> These are not in any sort of priority order...
> - *finish* a commotion image with the basic services running and
> deploy a test bed mesh within the IMC. Thanks to Brian's work this is
> almost done. The test bed will be our internal testing ground for
> whatever needs tested: bandwidth tests, distributed services,
> whatever. We also have access to outdoor hardware and could then
> expand that test mesh into downtown Urbana.
> - new WRT theme. write a new frontend theme (programmed in Lua/Luci
> http://luci.subsignal.org/ ) and application hooks for openwrt,
> customized for commotion firmware. This isn't a huge priority, but
> ties into the next item.
> - write a 1-2-3 setup Lua/Luci based init script that allows easy
> setup. one of the big goals that we have is a GUI frontend for the
> init scripts that Josh has worked on. This would need to be simple,
> allow a series of choices for a person with no technical knowledge to
> fill in some details (perhaps given to them by us or someone else
> technical who is deploying a mesh) that configs their device to joint
> the mesh, share bandwidth, etc.
> - Some talk on the list about Batman, Batman Advanced, and OpenMesh.
> These are great technologies and we could certainly use them. In fact,
> OTi would like to roll all of them into commotion so that the user or
> group deploying a mesh could choose which protocol they want to use.
> The OpenMesh dashboard is nice, and Josh has planed to roll it into
> the commotion firmware.bhead-11n-ampdurx-only
"
12,Commotion-dev," Agenda, priorities, collaboration,","Tue, 1 Feb 2011 10:05:58 -0600",-0600,Tim Yardley,"Agreed that there are a lot of options out there, but for now... let's
go with what we know works.

On Tue, Feb 1, 2011 at 9:58 AM, Outback Dingo <outbackdingo at gmail.com> wrote:
>
>
> On Tue, Feb 1, 2011 at 7:57 AM, Chris Ritzo <chris.ritzo at gmail.com> wrote:
"
13,Commotion-dev, Critical services,"Tue, 1 Feb 2011 10:12:35 -0600",-0600,Tim Yardley,"Inline.

On Tue, Feb 1, 2011 at 8:48 AM, Peter Folk <peter at volo.net> wrote:
> I think that this type of project would have the most effect if it included
> special-case optimizations for four critical services, in order of
> importance:
>
> One-to-many updates (RSS including twitter and facebook; inbound)
> One-to-many updates (updating twitter, facebook, etc; outbound)
> Short one-to-one messages (IM, SMS)
> Medium-length one-to-one messages (email)
"
14,Commotion-dev, Thoughts on secondary apps,"Tue, 1 Feb 2011 10:18:21 -0600",-0600,Tim Yardley,"I'd suggest the standard KISS approach initially.  Everything Erich
says here is valid though.

To toss out this idea for priorities...

1) Get standard oslr mesh and tor running on the firmware.
2) Get default mesh params so that these devices are turned on and ready to go.
3) Get dashboard interface working that shows you the status of the
devices (how many mesh nodes are connected? Do I have an uplink?)
4) Get easily-reconfigured mesh param interface up.
5) Get custom caching services up.
6) Get some security (certificates perhaps) for mesh nodes and work
that into the interface for approval.

On Tue, Feb 1, 2011 at 12:51 AM, Erich Heine <sophacles at gmail.com> wrote:
> Hi all,
> I've been doing some thinking on this whole secondary apps thing. Basically,
> the main idea is to have a few easy apps, and an openwrt distro that can be
> put on lots of cheap boxes to create a decent mesh. If lucky, some few main
> internet uplinks can be organized for information access to and from the
> outside world. ?Also extremely relevant: the whole point of these networks
> is to subvert governments. All of this leads to some really crazy
> constraints and considerations.
> First of all, consider use cases, which seem to fall naturally into some
> sort of priority scheme. Here is how i see it, which is by no means a
> complete, or even accurate list, but we gotta start somewhere
> 1. Organizing the revolution (or resistance or protests or whatnot) -- this
> will probably be the most important use case for those hosting the network.
> They need to communicate and make sure things are properly organized. If i
> were in this situation, I would consider this the utmost importance as there
> are very serious consequences (prison, death, etc) attached. This needs to
> happen.
> 2a. Keeping the world informed -- protests and such are messy affairs. Its
> usually best to be very public about all happenings, particularly when your
> opponent is the government. Public and international, as you want things to
> remain somewhat tame, and the easiest way to do this has historically have
> ""the whole world is watching"" situations (well better than the alternative
> :( ).
> 2b. Keeping up on the rest of the word: Is the UN sending in blue helmets?
> Will we get help coming in and when? Are we getting the right message out
> about our goals?
> 3. Tell my family I am alive. People will want to share this info with
> family and friends abroad.
> So on top of these use cases we have some weird constraints here:
> * Limited Internet connectivity. It's like the olden days but worse -- fast
> LAN super slow WAN. Further that WAN link is probably pretty sketchy and
> down and up a lot.
> * Honest to goodness hop-count issues, and other weirdnesses from running
> lots of traffic through small boxes.
> * Trust issues like woah -- social trust issues between/about various
> groups, mesh networks seem tailor made for MiTM situations, canonical naming
> and other issues go out the window.
> * Infrastructure setup issues -- even if we get a packet network up and
> running on meshed devices, there needs to be a bunch of local services set
> up to deal with the fact that 1. no one can reach standard infrastructure
> reasonable (see the limited connectivity issues) and 2. many of the local
> language services are probably run on servers that can no longer talk to the
> network, and probably can't reasonably be expected to jump on the mesh.
> Ok so there is a weird situation here! Honestly a huge chunk of it sounds
> like a job for freenet -- otherwise we just end up cobbling something
> together out of git, ssh, pgp. Other things to consider too tho:
> * Batching communications for low priority transmission. Email can work this
> way. Or we could do something a bit more sophisticated.
> * Key parties: seriously, this network and situation almost demands giving
> everyone a key and good key ring apps. Otherwise this whole thing is fairly
> easily subvertable. Key signing should be trivial, as should web-of-trust
> stuff. smart-phones can really help here, a nice android app devoted to key
> exchanges really makes the whole thing reasonable.
> * user education -- everything above needs to be teachable to the users in
> some form, quickly and with minimal effort, because really, there are bigger
> things afoot and the easier it is to get people ready to go, the better.
> Things that sound like good ideas to consider, but probably are just easier
> to solve socially:
> * deciding what gets out over the uplink: really this will come down to the
> uplink operator anyway, so there is no point trying to enforce it...
> * factional disputes, trust of leaders, who gets the best info out: this
> problem has existed far longer than the internet, the real problem is that
> social upheaval is pretty much by definition messy, and as such there is no
> fix by tech.
> Anyway... My little thought experiment turned into a total brain dump. Hope
> there is enough here to start a good discussion on this topic, and maybe
> consider setting an agenda on it.
> Regards,
> Erich
> (sophacles in irc)
> _______________________________________________
> Commotion-dev mailing list
> Commotion-dev at lists.chambana.net
> http://lists.chambana.net/mailman/listinfo/commotion-dev
>
>
"
15,Commotion-dev, Critical services,"Tue, 01 Feb 2011 10:21:46 -0600",-0600,Peter Folk,"
> All of these sound like a good start.  The key is that localized
> ""caching"" is limited by the hardware that we have (storage, etc).
> With a flaky uplink, you want to be able to take an update and get it
> where it needs to go whenever you have connectivity to do so.
My guess is that the uplink from the gateway will be one of the most
stable components of this whole system; just very slow.  That said the
proxy I described is designed to help with flaky uplinks.

RE storage caching, it seems to me that even with relatively old
hardware you can cache a lot: 10M would hold 10k compressed smtp
messages or a similar number of RSS feeds.  I'm not talking about
caching video, or even images, for the critical services.  That might be
a reason to have the critical services proxy run on some gateways and
the general http proxy run on others (so that it can use the max
resources for caching).

Peter


"
16,Commotion-dev, Critical services,"Tue, 1 Feb 2011 10:39:52 -0600",-0600,Tim Yardley,"Agreed if we get x86 hardware or equiv, but we might be limited to flash on COTS routers.

/tmy

On Feb 1, 2011, at 10:21 AM, Peter Folk <peter at volo.net> wrote:

> 
"
17,Commotion-dev, Critical services,"Tue, 1 Feb 2011 11:39:38 -0500",-0500,Outback Dingo,"Well some decent COTS stuff like RouterStation/RouterStation Pro, Wili,
Soekris, etc... are cheap and solid

On Tue, Feb 1, 2011 at 11:39 AM, Tim Yardley <yardley at gmail.com> wrote:

> Agreed if we get x86 hardware or equiv, but we might be limited to flash on
> COTS routers.
>
> /tmy
>
> On Feb 1, 2011, at 10:21 AM, Peter Folk <peter at volo.net> wrote:
>
> >
> "
18,Commotion-dev," Agenda, priorities, collaboration,","Tue, 01 Feb 2011 11:29:37 -0600",-0600,Brian Duggan,"Chris mentioned a reading group that I think it'd be good for
Chambananites to be aware of:

Makerspace Urbana in the Independent Media Center just started a reading
group for Wireless Networking in the Developing World (wndw.net) last
week. That goes at 7:00pm on Thursday nights.

Most of the people in the reading group are new to mesh, olsrd, and
OpenWrt, but they are dedicated and passionate individuals. I've asked
if they would be interested in helping with this project.

It would be great if other folks in the Chambana area could drop by. We
could meet each other in person and have a chance to discuss the project
and engage the other members of the reading group.

So if you're in Chambana and you're free at 7 this Thursday, stop by 202
S Broadway in Urbana (old Post Office), next to Lincoln Square Mall.
Head downstairs to the Makerspace.

Thanks!
Brian

On 2/1/11 10:05 AM, Tim Yardley wrote:
> Agreed that there are a lot of options out there, but for now... let's
> go with what we know works.
> 
> On Tue, Feb 1, 2011 at 9:58 AM, Outback Dingo <outbackdingo at gmail.com> wrote:
"
19,Commotion-dev, Critical services,"Tue, 1 Feb 2011 20:34:37 +0200",+0200,Daniel Golle,"On Tue, Feb 1, 2011 at 6:39 PM, Outback Dingo <outbackdingo at gmail.com> wrote:
> Well some decent COTS stuff like RouterStation/RouterStation Pro, Wili,
> Soekris, etc... are cheap and solid
some cheap routers even come with an usb port. (also, one might
manually solder an sd-card to the gpio pins to get storage beyong a
few megs to many without usb port)
lately i saw lots of those portable 3g routers, they come with small
battery pack and got ethernet, usb and wifi and are intended to be
used with 3g usb dongles -- but u could just plug a usb pen drive and
have the ideal building block for an emergency caching network... i
guess the best part is that they can survive power outages for at
least 1 or 2 hours...
all the ones i saw are based on ralink rt3052f, and coincidently,
ramips usb support was added to openwrt trunk today.
"
20,Commotion-dev, Commotion Dev Site is Live,"Tue, 01 Feb 2011 15:13:40 -0500",-0500,Josh King,"Hey everyone,

We have a new development site up for the Commotion firmware, you can
access it at http://tech.chambana.net/projects/commotion

When you register, there's space for wikis, documents, tickets, forums,
etc (it is a redmine installation, so all of the features you would
expect from that). You can also upload your ssh keys which will give you
access to the commotion repo. To check out commotion for read-only
access, do the following:

git clone http://git.chambana.net/commotion.git

Once you're registered on the site and have committer access, you can
access the source tree via:

git clone git at git.chambana.net:commotion.git

I'm working on adding in milestones, tickets, documentation, build
instructions, etc. Please let me or the list know if you have any
questions. Thanks, and happy hacking!

-- 
Josh King
Technologist
Open Technology Initiative
New America Foundation

"
21,Commotion-dev, Uplinks,"Wed, 02 Feb 2011 01:36:00 +0100",+0100,Stephane,"Hi everyone,

Not sure where this would fit in the roadmap so I didn't attempt to 
update anything on the website.

Couple thoughts:


- There's mention of GSM and LPFM on the frontpage as backbone / links 
to the rest of the Internet. Since I've been working over the past few 
days on modem access (including ""modem callback"") it would be 
interesting to envision (landline) modem access as a third [...] option.

Refs on this topic (I haven't been involved directly with these folks, 
I'm working this as an FDN project):

http://cryptoanarchy.org/wiki/Dialup_For_Egypt
http://cryptoanarchy.org/wiki/SIP_Software_Modem

The post that started our thinking on that topic:

http://blog.fdn.fr/post/2011/01/28/Censure-de-l-internet-en-%C3%89gypte-%3A-une-humble-action-de-FDN


- I think I had mentioned villagetelco[1] to Dan & Peter. The folks at 
villagetelco have produced a nice piece of _open_ hardware[2] with WAN, 
LAN, FXS port, low power, rugged...

Note: To connect to a residential line for modem access an FXO port 
would be needed instead of an FXS port. But the changes for that 
shouldn't be extremely extensive.

[1] http://www.villagetelco.org/
[2] http://www.villagetelco.org/products/


- An uplink doesn't have to be IP -- UUCP or BBS-type connections might 
be better suited to ""most of the time offline"" uplinks. (I don't have 
much insight here, though.)


That's it for now.
St?phane
"
22,Commotion-dev, Uplinks,"Tue, 1 Feb 2011 19:58:22 -0500",-0500,Outback Dingo,"On Tue, Feb 1, 2011 at 7:36 PM, Stephane <stephane at shimaore.net> wrote:

> Hi everyone,
>
> Not sure where this would fit in the roadmap so I didn't attempt to update
> anything on the website.
>
> Couple thoughts:
>
>
> - There's mention of GSM and LPFM on the frontpage as backbone / links to
> the rest of the Internet. Since I've been working over the past few days on
> modem access (including ""modem callback"") it would be interesting to
> envision (landline) modem access as a third [...] option.
>
> Refs on this topic (I haven't been involved directly with these folks, I'm
> working this as an FDN project):
>
> http://cryptoanarchy.org/wiki/Dialup_For_Egypt
> http://cryptoanarchy.org/wiki/SIP_Software_Modem
>
> The post that started our thinking on that topic:
>
>
> http://blog.fdn.fr/post/2011/01/28/Censure-de-l-internet-en-%C3%89gypte-%3A-une-humble-action-de-FDN
>
>
> - I think I had mentioned villagetelco[1] to Dan & Peter. The folks at
> villagetelco have produced a nice piece of _open_ hardware[2] with WAN, LAN,
> FXS port, low power, rugged...
>
> Note: To connect to a residential line for modem access an FXO port would
> be needed instead of an FXS port. But the changes for that shouldn't be
> extremely extensive.
>
> [1] http://www.villagetelco.org/
> [2] http://www.villagetelco.org/products/
"
23,Commotion-dev, Uplinks,"Tue, 01 Feb 2011 20:43:07 -0500",-0500,Sascha Meinrath,"FYI, both Steve Song and Elektra (two of the key folks behind the Mesh Potato)
are old friends, so if we want to integrate their work, we may want to bring
them on board.

--Sascha

On 02/01/2011 07:36 PM, Stephane wrote:
> Hi everyone,
> 
> Not sure where this would fit in the roadmap so I didn't attempt to update
> anything on the website.
> 
> Couple thoughts:
> 
> - There's mention of GSM and LPFM on the frontpage as backbone / links to the
> rest of the Internet. Since I've been working over the past few days on modem
> access (including ""modem callback"") it would be interesting to envision
> (landline) modem access as a third [...] option.
> 
> Refs on this topic (I haven't been involved directly with these folks, I'm
> working this as an FDN project):
> 
> http://cryptoanarchy.org/wiki/Dialup_For_Egypt
> http://cryptoanarchy.org/wiki/SIP_Software_Modem
> 
> The post that started our thinking on that topic:
> 
> http://blog.fdn.fr/post/2011/01/28/Censure-de-l-internet-en-%C3%89gypte-%3A-une-humble-action-de-FDN
> 
> - I think I had mentioned villagetelco[1] to Dan & Peter. The folks at
> villagetelco have produced a nice piece of _open_ hardware[2] with WAN, LAN, FXS
> port, low power, rugged...
> 
> Note: To connect to a residential line for modem access an FXO port would be
> needed instead of an FXS port. But the changes for that shouldn't be extremely
> extensive.
> 
> [1] http://www.villagetelco.org/
> [2] http://www.villagetelco.org/products/
> 
> - An uplink doesn't have to be IP -- UUCP or BBS-type connections might be
> better suited to ""most of the time offline"" uplinks. (I don't have much insight
> here, though.)
> 
> 
> That's it for now.
> St?phane
> _______________________________________________
> Commotion-dev mailing list
> Commotion-dev at lists.chambana.net
> http://lists.chambana.net/mailman/listinfo/commotion-dev
"
24,Commotion-dev, Uplinks,"Tue, 01 Feb 2011 21:42:35 -0500",-0500,Dan Meredith,"Heya Stephane,

This is great information man.  Thanks for sharing.

On 02/01/2011 07:36 PM, Stephane wrote:
> Hi everyone,
> 
> Not sure where this would fit in the roadmap so I didn't attempt to
> update anything on the website.
> 
> Couple thoughts:
> 
> 
> - There's mention of GSM and LPFM on the frontpage as backbone / links
> to the rest of the Internet. Since I've been working over the past few
> days on modem access (including ""modem callback"") it would be
> interesting to envision (landline) modem access as a third [...] option.
> 
> Refs on this topic (I haven't been involved directly with these folks,
> I'm working this as an FDN project):
> 
> http://cryptoanarchy.org/wiki/Dialup_For_Egypt
> http://cryptoanarchy.org/wiki/SIP_Software_Modem
> 
> The post that started our thinking on that topic:
> 
> http://blog.fdn.fr/post/2011/01/28/Censure-de-l-internet-en-%C3%89gypte-%3A-une-humble-action-de-FDN
> 
> 
> 
> - I think I had mentioned villagetelco[1] to Dan & Peter. The folks at
> villagetelco have produced a nice piece of _open_ hardware[2] with WAN,
> LAN, FXS port, low power, rugged...
> 
> Note: To connect to a residential line for modem access an FXO port
> would be needed instead of an FXS port. But the changes for that
> shouldn't be extremely extensive.
> 
> [1] http://www.villagetelco.org/
> [2] http://www.villagetelco.org/products/
> 
> 
> - An uplink doesn't have to be IP -- UUCP or BBS-type connections might
> be better suited to ""most of the time offline"" uplinks. (I don't have
> much insight here, though.)
> 
> 
> That's it for now.
> St?phane
> _______________________________________________
> Commotion-dev mailing list
> Commotion-dev at lists.chambana.net
> http://lists.chambana.net/mailman/listinfo/commotion-dev
"
25,Commotion-dev, Combined update,"Thu, 03 Feb 2011 14:55:16 -0600",-0600,Brian Duggan,"1. For Chambananites: mesh wifi reading group tonight at Makerspace Urbana.

7:00pm

Makerspace Urbana is in the basement of the Independent Media Center
202 S Broadway
Urbana

2. olsrd 0.6.1 builds on WinXP with some modification. So does one chunk
of the gui, but it doesn't work yet. I'll push my branch back to
tech.chambana.net soon (after I learn more git).

I'm good on software and equipment, but if anyone knows of benevolent
Windows devs, please put them in touch with me.

Thanks!
Brian
"
26,Commotion-dev, Uplinks,"Wed, 9 Feb 2011 11:46:14 +0100",+0100,L. Aaron Kaplan,"I think , Egypt is online again :)

By-the-way...
:))

a.

--
Rule #1 of large networks: something is always broken somewhere

"
27,Commotion-dev, Uplinks,"Wed, 09 Feb 2011 12:48:15 -0500",-0500,Dan Meredith,"An their infrastructure is still centralized, btw ;)  We've still work
to do!

On 02/09/2011 05:46 AM, L. Aaron Kaplan wrote:
> I think , Egypt is online again :)
> 
> By-the-way...
> :))
> 
> a.
> 
> --
> Rule #1 of large networks: something is always broken somewhere
> 

-- 
Dan Meredith
Technologist
New America Foundation
Open Technology Initiative
"
28,Commotion-dev, Uplinks,"Wed, 9 Feb 2011 13:47:30 -0500",-0500,Preston Rhea,"We are working to prevent the battles of tomorrow, not simply fight those of
today.

Preston

On Wed, Feb 9, 2011 at 12:48 PM, Dan Meredith <meredith at newamerica.net>wrote:

> An their infrastructure is still centralized, btw ;)  We've still work
> to do!
>
> On 02/09/2011 05:46 AM, L. Aaron Kaplan wrote:
> > I think , Egypt is online again :)
> >
> > By-the-way...
> > :))
> >
> > a.
> >
> > --
> > Rule #1 of large networks: something is always broken somewhere
> >
>
> --
> Dan Meredith
> Technologist
> New America Foundation
> Open Technology Initiative
> _______________________________________________
> Commotion-dev mailing list
> Commotion-dev at lists.chambana.net
> http://lists.chambana.net/mailman/listinfo/commotion-dev
"
29,Commotion-dev, Uplinks,"Wed, 9 Feb 2011 22:04:58 +0100",+0100,L. Aaron Kaplan,"


On Feb 9, 2011, at 7:47 PM, Preston Rhea wrote:

> We are working to prevent the battles of tomorrow, not simply fight those of today.
> 

Good ;-)))

My statement was intended to be slightly provocative :)

Good that you intend to continue!

Nice,
Aaron.




--
Rule #1 of large networks: something is always broken somewhere
(Paul Vixie)
"
30,Commotion-dev, Uplinks,"Wed, 09 Feb 2011 16:08:23 -0500",-0500,Dan Meredith,"On 02/09/2011 04:04 PM, L. Aaron Kaplan wrote:
> 
> 
> 
> On Feb 9, 2011, at 7:47 PM, Preston Rhea wrote:
> 
"
31,Commotion-dev, Uplinks,"Wed, 9 Feb 2011 22:10:18 +0100",+0100,L. Aaron Kaplan,
32,Commotion-dev, Uplinks,"Wed, 9 Feb 2011 13:42:07 -0500",-0500,Preston Rhea,"We are working to prevent the battles of tomorrow, not simply fight those of
today.

Preston

On Wed, Feb 9, 2011 at 12:48 PM, Dan Meredith <meredith at newamerica.net>wrote:

> An their infrastructure is still centralized, btw ;)  We've still work
> to do!
>
> On 02/09/2011 05:46 AM, L. Aaron Kaplan wrote:
> > I think , Egypt is online again :)
> >
> > By-the-way...
> > :))
> >
> > a.
> >
> > --
> > Rule #1 of large networks: something is always broken somewhere
> >
>
> --
> Dan Meredith
> Technologist
> New America Foundation
> Open Technology Initiative
> _______________________________________________
> Commotion-dev mailing list
> Commotion-dev at lists.chambana.net
> http://lists.chambana.net/mailman/listinfo/commotion-dev
"
33,Commotion-dev, commOTIon git repo access,"Mon, 31 Jan 2011 23:47:38 -0600",-0600,Brian Duggan,"Hi All,

Welcome to the commOTIon dev list. Right now, the commOTIon source is
hosted in a git repo at git.chambana.net

We use gitosis to manage access, so everyone who needs it should send
(an) ssh public key(s) to me for the machines they want to use.

My mail is

bcduggan at ucimc.org

Let's get cracking!

Brian

-- 
Brian Duggan
Technical Projects Developer
UC Independent Media Center
http://www.ucimc.org | 631 223 8442


"
34,Commotion-dev, commOTIon git repo access,"Mon, 31 Jan 2011 23:49:21 -0600",-0600,Brian Duggan,"Right, and now how to access that repo once I've added you:

git clone git at git.chambana.net:commotion.git

Thanks,
Brian

On 1/31/11 11:47 PM, Brian Duggan wrote:
> Hi All,
> 
> Welcome to the commOTIon dev list. Right now, the commOTIon source is
> hosted in a git repo at git.chambana.net
> 
> We use gitosis to manage access, so everyone who needs it should send
> (an) ssh public key(s) to me for the machines they want to use.
> 
> My mail is
> 
> bcduggan at ucimc.org
> 
> Let's get cracking!
> 
> Brian
> 


"
35,Commotion-dev, Fwd: Re: Requesting you to help the middle-east,"Tue, 01 Feb 2011 00:50:13 -0500",-0500,Dan Meredith,"Heya all,

For the list archives.  This was an earlier conversation on a basic dev
plan.

In summary, two groups. One group working to update the olsr ports
(http://www.olsr.org/?q=download) for windows, os x, iphone and android.
 The second group to work on improving the OpenWRT commotion custom
build (http://wiki.ucimc.org/bin/view/Tech/WirelessDocs).  I suspect
more threads and conversations for each group to follow.

Cheers,
--
Dan

"
36,Commotion-dev, Thoughts on secondary apps,"Tue, 1 Feb 2011 00:51:40 -0600",-0600,Erich Heine,"Hi all,

I've been doing some thinking on this whole secondary apps thing. Basically,
the main idea is to have a few easy apps, and an openwrt distro that can be
put on lots of cheap boxes to create a decent mesh. If lucky, some few main
internet uplinks can be organized for information access to and from the
outside world.  Also extremely relevant: the whole point of these networks
is to subvert governments. All of this leads to some really crazy
constraints and considerations.

First of all, consider use cases, which seem to fall naturally into some
sort of priority scheme. Here is how i see it, which is by no means a
complete, or even accurate list, but we gotta start somewhere

1. Organizing the revolution (or resistance or protests or whatnot) -- this
will probably be the most important use case for those hosting the network.
They need to communicate and make sure things are properly organized. If i
were in this situation, I would consider this the utmost importance as there
are very serious consequences (prison, death, etc) attached. This needs to
happen.

2a. Keeping the world informed -- protests and such are messy affairs. Its
usually best to be very public about all happenings, particularly when your
opponent is the government. Public and international, as you want things to
remain somewhat tame, and the easiest way to do this has historically have
""the whole world is watching"" situations (well better than the alternative
:( ).

2b. Keeping up on the rest of the word: Is the UN sending in blue helmets?
Will we get help coming in and when? Are we getting the right message out
about our goals?

3. Tell my family I am alive. People will want to share this info with
family and friends abroad.

So on top of these use cases we have some weird constraints here:

* Limited Internet connectivity. It's like the olden days but worse -- fast
LAN super slow WAN. Further that WAN link is probably pretty sketchy and
down and up a lot.

* Honest to goodness hop-count issues, and other weirdnesses from running
lots of traffic through small boxes.

* Trust issues like woah -- social trust issues between/about various
groups, mesh networks seem tailor made for MiTM situations, canonical naming
and other issues go out the window.

* Infrastructure setup issues -- even if we get a packet network up and
running on meshed devices, there needs to be a bunch of local services set
up to deal with the fact that 1. no one can reach standard infrastructure
reasonable (see the limited connectivity issues) and 2. many of the local
language services are probably run on servers that can no longer talk to the
network, and probably can't reasonably be expected to jump on the mesh.

Ok so there is a weird situation here! Honestly a huge chunk of it sounds
like a job for freenet -- otherwise we just end up cobbling something
together out of git, ssh, pgp. Other things to consider too tho:

* Batching communications for low priority transmission. Email can work this
way. Or we could do something a bit more sophisticated.

* Key parties: seriously, this network and situation almost demands giving
everyone a key and good key ring apps. Otherwise this whole thing is fairly
easily subvertable. Key signing should be trivial, as should web-of-trust
stuff. smart-phones can really help here, a nice android app devoted to key
exchanges really makes the whole thing reasonable.

* user education -- everything above needs to be teachable to the users in
some form, quickly and with minimal effort, because really, there are bigger
things afoot and the easier it is to get people ready to go, the better.

Things that sound like good ideas to consider, but probably are just easier
to solve socially:

* deciding what gets out over the uplink: really this will come down to the
uplink operator anyway, so there is no point trying to enforce it...

* factional disputes, trust of leaders, who gets the best info out: this
problem has existed far longer than the internet, the real problem is that
social upheaval is pretty much by definition messy, and as such there is no
fix by tech.

Anyway... My little thought experiment turned into a total brain dump. Hope
there is enough here to start a good discussion on this topic, and maybe
consider setting an agenda on it.

Regards,
Erich
(sophacles in irc)
"
37,Commotion-dev," Agenda, priorities, collaboration,","Tue, 1 Feb 2011 00:58:26 -0600",-0600,Erich Heine,"Hi all,

Just want to get a discussion going on-list about stuff related to the
actual work at hand.  What is the agenda? What is done, and what needs
doing?

Im aware that getting the commotion distro up and working is part of it. As
is  getting the windows olsr client working. What in detail does this
entail? What other parts are needed?

Has anyone considered various language issues? So far everyone I've
encountered in this venture seems to be a native (or darn close) english
speaker, which is good for our work and coordination, but can we be sure to
get the appropriate level of understanding into Egypt on a proper timeline?

Speaking of timelines, what sort of timeline are we working on here? Any
thoughts/speculation on how long this may last before the gov't of egypt
backs down? I know there is negotiation for satellite bandwidth to be made
available... but that is out of (most of) our control. So should this just
be a sprint?

Hopefully this will get a discussion going!

Regards,
Erich
(sophacles on irc)
"
38,Commotion-dev, next steps,"Tue, 1 Feb 2011 12:39:49 +0200",+0200,Daniel Golle,"was just browsing through the git repo.
i got some questions/suggestions:
1) ubnt hardware only?
2) how aware are you about the easiness to flood/crash olsrd? any
plans on security? (node authentication via certs is implemented in
olsrd, but currently needs manual setup and key-generation is probably
not really safe/predictable on systems not even having a RTC...)
3) what about freeswitch and having a couple of ATAs attached? this
could give you voip easily...
4) batman-adv and IPv6 seem like a good plan to me, but as i see it,
the current mission is more about rapid deployment of what we already
got, is it?

how can i help?

"
39,Commotion-dev," Agenda, priorities, collaboration,","Tue, 1 Feb 2011 06:57:28 -0600",-0600,Chris Ritzo,"Hey all, just wanted to say first how awesome it is to have some new
folks interested in hacking about on mesh wifi.
Thanks to Brian I have the reading group time on my calendar, so I'll
plan to talk more with you all there, but here are some initial
thoughts to some of the recent discussion.

First things first, in addition to the git repo, we have some online
docs that we'd like you to have access to, read, and eventually edit.
To give you group access to the wiki, please create an account on
http://plexus.chambana.net - It's the frontend for requesting an LDAP
account on chambana.net servers. More info on that later.

On Tue, Feb 1, 2011 at 12:58 AM, Erich Heine <sophacles at gmail.com> wrote:
> Hi all,
> Just want to get a discussion going on-list about stuff related to the
> actual work at hand. ?What is the agenda? What is done, and what needs
> doing?

These are not in any sort of priority order...
- *finish* a commotion image with the basic services running and
deploy a test bed mesh within the IMC. Thanks to Brian's work this is
almost done. The test bed will be our internal testing ground for
whatever needs tested: bandwidth tests, distributed services,
whatever. We also have access to outdoor hardware and could then
expand that test mesh into downtown Urbana.
- new WRT theme. write a new frontend theme (programmed in Lua/Luci
http://luci.subsignal.org/ ) and application hooks for openwrt,
customized for commotion firmware. This isn't a huge priority, but
ties into the next item.
- write a 1-2-3 setup Lua/Luci based init script that allows easy
setup. one of the big goals that we have is a GUI frontend for the
init scripts that Josh has worked on. This would need to be simple,
allow a series of choices for a person with no technical knowledge to
fill in some details (perhaps given to them by us or someone else
technical who is deploying a mesh) that configs their device to joint
the mesh, share bandwidth, etc.
- Some talk on the list about Batman, Batman Advanced, and OpenMesh.
These are great technologies and we could certainly use them. In fact,
OTi would like to roll all of them into commotion so that the user or
group deploying a mesh could choose which protocol they want to use.
The OpenMesh dashboard is nice, and Josh has planed to roll it into
the commotion firmware.
- Why not just go with OpenMesh? I dunno, you tell me. What I've been
told is that OLSR is simply a better routing protocol, just doesn't
have the non-techie frontend yet. We're on the bleeding edge here
folks, so any direction is fine. I could see us putting together a
small OpenMesh test bed and do comparison tests with the OLSR test
bed.
- Windows OLSR client. There are old binaries on the olsr site, so we
need to build an updated one from source. this involves installing
cygwin, bison, flex, and any other dependencies, building the source
and then putting together a gui wrapper for it. The build should be
straightforward. Putting a GUI together is another. This needs to be
done.

> Im aware that getting the commotion distro up and working is part of it. As
> is ?getting the windows olsr client working. What in detail does this
> entail? What other parts are needed?

- Language support as a user preference would be great. It's supported
in OpenWRT I believe. Remember that config script idea? Language
option as a choice. There's also translation to think about for any
new interface pages we write.

That's enough for now. Hope to see you all Thursday evening.

Chris Ritzo

> Has anyone considered various language issues? So far everyone I've
> encountered in this venture seems to be a native (or darn close) english
> speaker, which is good for our work and coordination, but can we be sure to
> get the appropriate level of understanding into Egypt on a proper timeline?
> Speaking of timelines, what sort of timeline are we working on here? Any
> thoughts/speculation on how long this may last before the gov't of egypt
> backs down? I know there is negotiation for satellite bandwidth to be made
> available... but that is out of (most of) our control. So should this just
> be a sprint?
> Hopefully this will get a discussion going!
> Regards,
> Erich
> (sophacles on irc)
> _______________________________________________
> Commotion-dev mailing list
> Commotion-dev at lists.chambana.net
> http://lists.chambana.net/mailman/listinfo/commotion-dev
>
"
40,Commotion-dev, Critical services,"Tue, 01 Feb 2011 08:48:52 -0600",-0600,Peter Folk,"I think that this type of project would have the most effect if it
included special-case optimizations for four critical services, in order
of importance:

   1. One-to-many updates (RSS including twitter and facebook; inbound)
   2. One-to-many updates (updating twitter, facebook, etc; outbound)
   3. Short one-to-one messages (IM, SMS)
   4. Medium-length one-to-one messages (email)

The first item could be implemented as follows:

*Caching Client-Server RSS Proxy* (CSSRSSP)
In net-accessible areas, servers run a daemon that accepts incoming SSH
connections (for compression as much as security), over which the
following protocol is run:

    * client sends monitor<space>N<cr><lf> (for int N) to indicate that
      it is monitoring N feeds.  N should be 10 digits, 0-padded on the
      left.
    * client sends N monitor notifications, consisting of
      A<space>B<space>C<space>D<cr><lf>, where A is the number of users
      monitoring the feed, B is the 64-bit UTC timestamp of the last
      update received for this feed, and C is the number of characters
      in the feed's URL, and D is that URL.  Numbers are 10, 20, and 5
      digits, respectively, 0-padded on the left, to make read() as easy
      as possible
    * server begins to monitor the feed urls, polling each feed (with
      higher frequency, down to the feeds minimum update time) in a
      round-robin fashion weighted by # of monitoring users
    * When a feed is updated, server sends A<space>B<space>C<cr><lf>,
      where A is the timestamp of the update (20 digits), B is 0 if this
      is the full feed, the length of the update (in bytes; 10 digits)
      otherwise, and C is the diff of the RSS feed from the timestamp
      last reported to be cached by this client
    * Client periodically updates server with new ""monitor N"" info.  A
      user count of 0 removes the feed from the client's list of
      monitored feeds.  Otherwise, an entry with an already-seen URL
      updates the timestamp and user count on record for that client
    * Server caches the most recent list of monitored feeds and metadata
      in a file, with name == MD5 checksum of the file
    * Client can resume a cached state (eg, after disconnection) by
      sending resume<space>A<cr><lf> with the A == the md5sum of a
      previous state, to which the server should reply either ok<cr><lf>
      if it has such a state or no<cr><lf> if it does not

On the client side, this general daemon can be used to implement a
caching twitter, facebook, and general RSS-feed proxy (each one would
require some custom code).


The second item could be implemented with custom code per updateable
service in the client-side interface to the proxy.  That might be
preferable to using standard HTTP interface because those short updates
could be prioritized above general HTTP traffic.


The third item is only hard if you actually need to proxy the sessions
to disallow or reprioritize file transfers (which should go via the same
priority as HTTP, for example).  That amount of prioritization might
come for free with classification by port with per-stream bandwidth
throttling.


The 4th item is basically a normal SMTP-hijacking mail server that is
configured to be pretty much an open relay, and deal well with being
disconnected (maybe have some batch-transfer mechanism like UUCP). 
Extra points for cacheing the login credentials and original target of
an SMTP request, so you can forward a message to its intended
destination and avoid relaying issues...

Some thoughts,
Peter


"
41,Commotion-dev, Critical services,"Tue, 01 Feb 2011 09:05:28 -0600",-0600,Peter Folk,"*Caching Client-Server RSS Proxy* (CSSRSSP)
> In net-accessible areas, servers run a daemon that accepts incoming
> SSH connections (for compression as much as security), over which the
> following protocol is run:
>
>     * client sends monitor<space>N<cr><lf> (for int N) to indicate
>       that it is monitoring N feeds.  N should be 10 digits, 0-padded
>       on the left.
>     * client sends N monitor notifications, consisting of
>       A<space>B<space>C<space>D<cr><lf>, where A is the number of
>       users monitoring the feed, B is the 64-bit UTC timestamp of the
>       last update received for this feed, and C is the number of
>       characters in the feed's URL, and D is that URL.  Numbers are
>       10, 20, and 5 digits, respectively, 0-padded on the left, to
>       make read() as easy as possible
>     * server begins to monitor the feed urls, polling each feed (with
>       higher frequency, down to the feeds minimum update time) in a
>       round-robin fashion weighted by # of monitoring users
>     * When a feed is updated, server sends A<space>B<space>C<cr><lf>,
>       where A is the timestamp of the update (20 digits), B is 0 if
>       this is the full feed or the length of the update diff (in
>       bytes; 10 digits) otherwise, and C is the diff of the RSS feed
>       from the timestamp last reported to be cached by this client
>     * Client periodically updates server with new ""monitor N"" info.  A
>       user count of 0 removes the feed from the client's list of
>       monitored feeds.  Otherwise, an entry with an already-seen URL
>       updates the timestamp and user count on record for that client
>     * Server caches the most recent list of monitored feeds and
>       metadata in a file, with name == MD5 checksum of the file
>     * Client can resume a cached state (eg, after disconnection) by
>       sending resume<space>A<cr><lf> with the A == the md5sum of a
>       previous state, to which the server should reply either
>       ok<cr><lf> if it has such a state or no<cr><lf> if it does not
>
Notes:

    * the client and server's caches of monitored URLs need to be sorted
      the same to get the same MD5sum.  I suggest sort by URL.
    * in the ""When a feed is updated"" step, you need to have a boolean B
      (0 if this is the full feed, 1 if sending a diff update), and a
      separate B1 for the length of the update in bytes (left-padded 10
      digit decimal)
    * padding could be zeros or spaces; zeros would normally indicate
      octal so maybe spaces are better
    * Probably need a ""nok"" response if a line was received that the
      server doesn't grok
    * Probably need an intro ""ccsrss v1.2 foo at bar.com"" message from the
      server to announce the server version and who to contact if it's
      broken
    * My acronym was wrong =P  Should be CCSRSSP (which to me means, it
      needs a new name)
    * I think that such a client+server could be written in an evening
      in perl (and probably Python, for someone who likes it)
    * this kind of proxy would be useful for any system that's
      periodically connected, wants to monitor multiple RSS feeds, and
      usually has a slow link (like a cell phone).

Peter

"
42,Commotion-dev," Agenda, priorities, collaboration,","Tue, 01 Feb 2011 09:28:26 -0500",-0500,Josh King,
43,Commotion-dev, Thoughts on secondary apps,"Tue, 01 Feb 2011 09:33:30 -0600",-0600,Peter Folk,"Much of what Erich wrote is along the lines of what I was thinking too. 
A few notes:

On 2/1/2011 12:51 AM, Erich Heine wrote:
> First of all, consider use cases, which seem to fall naturally into
> some sort of priority scheme. Here is how i see it, which is by no
> means a complete, or even accurate list, but we gotta start somewhere
See my list of critical services, which seem to mirror yours.  Feedback
on my thoughts on approaching those services would be good.

> So on top of these use cases we have some weird constraints here:
>
> * Limited Internet connectivity. It's like the olden days but worse --
> fast LAN super slow WAN. Further that WAN link is probably pretty
> sketchy and down and up a lot.
> * Honest to goodness hop-count issues, and other weirdnesses from
> running lots of traffic through small boxes.
> * Trust issues like woah -- social trust issues between/about various
> groups, mesh networks seem tailor made for MiTM situations, canonical
> naming and other issues go out the window.
> * Infrastructure setup issues -- even if we get a packet network up
> and running on meshed devices, there needs to be a bunch of local
> services set up to deal with the fact that 1. no one can reach
> standard infrastructure reasonable (see the limited connectivity
> issues) and 2. many of the local language services are probably run on
> servers that can no longer talk to the network, and probably can't
> reasonably be expected to jump on the mesh.
It seems to me likely that a person will usually know the person
providing their gateway (multiple small disconnected cells are more
likely than a full mesh) or at least someone who knows that person (no
need for a party, which is operationally dangerous; you can have a chain
of trust).

With that in mind, you need each user to exchange a key with their
gateway host, in the form of the fingerprint for a self-signed SSL cert,
and get the direct URL of that gateway so that it can (via whatever
routing mechanism) use a secure HTTP proxy and critical service
interfaces that run on the gateway.

The gateway owner needs to get fingerprints of trusted out-of-country
proxies, ccsrssp hosts, etc.  Since the gateway operator has 'net
access, that can be PKI-based.

> * deciding what gets out over the uplink: really this will come down
> to the uplink operator anyway, so there is no point trying to enforce
> it...

Yes, but reasonable defaults will make things work better:

    * On the gateway, identify uplink bandwidth with periodic
      observations and/or speed tests
    * Prioritize critical-service traffic, DNS, and known chat
      protocols, over bulk traffic
    * If the gateway only communicates with an out-of-country proxy
      (through an SSH tunnel, for example), that proxy can similarly
      prioritize gateway-bound traffic

Peter

"
44,Commotion-dev," Agenda, priorities, collaboration,","Tue, 1 Feb 2011 10:58:02 -0500",-0500,Outback Dingo,"On Tue, Feb 1, 2011 at 7:57 AM, Chris Ritzo <chris.ritzo at gmail.com> wrote:

> Hey all, just wanted to say first how awesome it is to have some new
> folks interested in hacking about on mesh wifi.
> Thanks to Brian I have the reading group time on my calendar, so I'll
> plan to talk more with you all there, but here are some initial
> thoughts to some of the recent discussion.
>
> First things first, in addition to the git repo, we have some online
> docs that we'd like you to have access to, read, and eventually edit.
> To give you group access to the wiki, please create an account on
> http://plexus.chambana.net - It's the frontend for requesting an LDAP
> account on chambana.net servers. More info on that later.
>
> On Tue, Feb 1, 2011 at 12:58 AM, Erich Heine <sophacles at gmail.com> wrote:
> > Hi all,
> > Just want to get a discussion going on-list about stuff related to the
> > actual work at hand.  What is the agenda? What is done, and what needs
> > doing?
>
> These are not in any sort of priority order...
> - *finish* a commotion image with the basic services running and
> deploy a test bed mesh within the IMC. Thanks to Brian's work this is
> almost done. The test bed will be our internal testing ground for
> whatever needs tested: bandwidth tests, distributed services,
> whatever. We also have access to outdoor hardware and could then
> expand that test mesh into downtown Urbana.
> - new WRT theme. write a new frontend theme (programmed in Lua/Luci
> http://luci.subsignal.org/ ) and application hooks for openwrt,
> customized for commotion firmware. This isn't a huge priority, but
> ties into the next item.
> - write a 1-2-3 setup Lua/Luci based init script that allows easy
> setup. one of the big goals that we have is a GUI frontend for the
> init scripts that Josh has worked on. This would need to be simple,
> allow a series of choices for a person with no technical knowledge to
> fill in some details (perhaps given to them by us or someone else
> technical who is deploying a mesh) that configs their device to joint
> the mesh, share bandwidth, etc.
> - Some talk on the list about Batman, Batman Advanced, and OpenMesh.
> These are great technologies and we could certainly use them. In fact,
> OTi would like to roll all of them into commotion so that the user or
> group deploying a mesh could choose which protocol they want to use.
> The OpenMesh dashboard is nice, and Josh has planed to roll it into
> the commotion firmware.bhead-11n-ampdurx-only
"
45,Commotion-dev," Agenda, priorities, collaboration,","Tue, 1 Feb 2011 10:05:58 -0600",-0600,Tim Yardley,"Agreed that there are a lot of options out there, but for now... let's
go with what we know works.

On Tue, Feb 1, 2011 at 9:58 AM, Outback Dingo <outbackdingo at gmail.com> wrote:
>
>
> On Tue, Feb 1, 2011 at 7:57 AM, Chris Ritzo <chris.ritzo at gmail.com> wrote:
"
46,Commotion-dev, Critical services,"Tue, 1 Feb 2011 10:12:35 -0600",-0600,Tim Yardley,"Inline.

On Tue, Feb 1, 2011 at 8:48 AM, Peter Folk <peter at volo.net> wrote:
> I think that this type of project would have the most effect if it included
> special-case optimizations for four critical services, in order of
> importance:
>
> One-to-many updates (RSS including twitter and facebook; inbound)
> One-to-many updates (updating twitter, facebook, etc; outbound)
> Short one-to-one messages (IM, SMS)
> Medium-length one-to-one messages (email)
"
47,Commotion-dev, Thoughts on secondary apps,"Tue, 1 Feb 2011 10:18:21 -0600",-0600,Tim Yardley,"I'd suggest the standard KISS approach initially.  Everything Erich
says here is valid though.

To toss out this idea for priorities...

1) Get standard oslr mesh and tor running on the firmware.
2) Get default mesh params so that these devices are turned on and ready to go.
3) Get dashboard interface working that shows you the status of the
devices (how many mesh nodes are connected? Do I have an uplink?)
4) Get easily-reconfigured mesh param interface up.
5) Get custom caching services up.
6) Get some security (certificates perhaps) for mesh nodes and work
that into the interface for approval.

On Tue, Feb 1, 2011 at 12:51 AM, Erich Heine <sophacles at gmail.com> wrote:
> Hi all,
> I've been doing some thinking on this whole secondary apps thing. Basically,
> the main idea is to have a few easy apps, and an openwrt distro that can be
> put on lots of cheap boxes to create a decent mesh. If lucky, some few main
> internet uplinks can be organized for information access to and from the
> outside world. ?Also extremely relevant: the whole point of these networks
> is to subvert governments. All of this leads to some really crazy
> constraints and considerations.
> First of all, consider use cases, which seem to fall naturally into some
> sort of priority scheme. Here is how i see it, which is by no means a
> complete, or even accurate list, but we gotta start somewhere
> 1. Organizing the revolution (or resistance or protests or whatnot) -- this
> will probably be the most important use case for those hosting the network.
> They need to communicate and make sure things are properly organized. If i
> were in this situation, I would consider this the utmost importance as there
> are very serious consequences (prison, death, etc) attached. This needs to
> happen.
> 2a. Keeping the world informed -- protests and such are messy affairs. Its
> usually best to be very public about all happenings, particularly when your
> opponent is the government. Public and international, as you want things to
> remain somewhat tame, and the easiest way to do this has historically have
> ""the whole world is watching"" situations (well better than the alternative
> :( ).
> 2b. Keeping up on the rest of the word: Is the UN sending in blue helmets?
> Will we get help coming in and when? Are we getting the right message out
> about our goals?
> 3. Tell my family I am alive. People will want to share this info with
> family and friends abroad.
> So on top of these use cases we have some weird constraints here:
> * Limited Internet connectivity. It's like the olden days but worse -- fast
> LAN super slow WAN. Further that WAN link is probably pretty sketchy and
> down and up a lot.
> * Honest to goodness hop-count issues, and other weirdnesses from running
> lots of traffic through small boxes.
> * Trust issues like woah -- social trust issues between/about various
> groups, mesh networks seem tailor made for MiTM situations, canonical naming
> and other issues go out the window.
> * Infrastructure setup issues -- even if we get a packet network up and
> running on meshed devices, there needs to be a bunch of local services set
> up to deal with the fact that 1. no one can reach standard infrastructure
> reasonable (see the limited connectivity issues) and 2. many of the local
> language services are probably run on servers that can no longer talk to the
> network, and probably can't reasonably be expected to jump on the mesh.
> Ok so there is a weird situation here! Honestly a huge chunk of it sounds
> like a job for freenet -- otherwise we just end up cobbling something
> together out of git, ssh, pgp. Other things to consider too tho:
> * Batching communications for low priority transmission. Email can work this
> way. Or we could do something a bit more sophisticated.
> * Key parties: seriously, this network and situation almost demands giving
> everyone a key and good key ring apps. Otherwise this whole thing is fairly
> easily subvertable. Key signing should be trivial, as should web-of-trust
> stuff. smart-phones can really help here, a nice android app devoted to key
> exchanges really makes the whole thing reasonable.
> * user education -- everything above needs to be teachable to the users in
> some form, quickly and with minimal effort, because really, there are bigger
> things afoot and the easier it is to get people ready to go, the better.
> Things that sound like good ideas to consider, but probably are just easier
> to solve socially:
> * deciding what gets out over the uplink: really this will come down to the
> uplink operator anyway, so there is no point trying to enforce it...
> * factional disputes, trust of leaders, who gets the best info out: this
> problem has existed far longer than the internet, the real problem is that
> social upheaval is pretty much by definition messy, and as such there is no
> fix by tech.
> Anyway... My little thought experiment turned into a total brain dump. Hope
> there is enough here to start a good discussion on this topic, and maybe
> consider setting an agenda on it.
> Regards,
> Erich
> (sophacles in irc)
> _______________________________________________
> Commotion-dev mailing list
> Commotion-dev at lists.chambana.net
> http://lists.chambana.net/mailman/listinfo/commotion-dev
>
"
48,Commotion-dev, Critical services,"Tue, 01 Feb 2011 10:21:46 -0600",-0600,Peter Folk,"
> All of these sound like a good start.  The key is that localized
> ""caching"" is limited by the hardware that we have (storage, etc).
> With a flaky uplink, you want to be able to take an update and get it
> where it needs to go whenever you have connectivity to do so.
My guess is that the uplink from the gateway will be one of the most
stable components of this whole system; just very slow.  That said the
proxy I described is designed to help with flaky uplinks.

RE storage caching, it seems to me that even with relatively old
hardware you can cache a lot: 10M would hold 10k compressed smtp
messages or a similar number of RSS feeds.  I'm not talking about
caching video, or even images, for the critical services.  That might be
a reason to have the critical services proxy run on some gateways and
the general http proxy run on others (so that it can use the max
resources for caching).

Peter


"
49,Commotion-dev, Critical services,"Tue, 1 Feb 2011 10:39:52 -0600",-0600,Tim Yardley,"Agreed if we get x86 hardware or equiv, but we might be limited to flash on COTS routers.

/tmy

On Feb 1, 2011, at 10:21 AM, Peter Folk <peter at volo.net> wrote:

> 
"
50,Commotion-dev, Critical services,"Tue, 1 Feb 2011 11:39:38 -0500",-0500,Outback Dingo,"Well some decent COTS stuff like RouterStation/RouterStation Pro, Wili,
Soekris, etc... are cheap and solid

On Tue, Feb 1, 2011 at 11:39 AM, Tim Yardley <yardley at gmail.com> wrote:

> Agreed if we get x86 hardware or equiv, but we might be limited to flash on
> COTS routers.
>
> /tmy
>
> On Feb 1, 2011, at 10:21 AM, Peter Folk <peter at volo.net> wrote:
>
> >
> "
51,Commotion-dev," Agenda, priorities, collaboration,","Tue, 01 Feb 2011 11:29:37 -0600",-0600,Brian Duggan,"Chris mentioned a reading group that I think it'd be good for
Chambananites to be aware of:

Makerspace Urbana in the Independent Media Center just started a reading
group for Wireless Networking in the Developing World (wndw.net) last
week. That goes at 7:00pm on Thursday nights.

Most of the people in the reading group are new to mesh, olsrd, and
OpenWrt, but they are dedicated and passionate individuals. I've asked
if they would be interested in helping with this project.

It would be great if other folks in the Chambana area could drop by. We
could meet each other in person and have a chance to discuss the project
and engage the other members of the reading group.

So if you're in Chambana and you're free at 7 this Thursday, stop by 202
S Broadway in Urbana (old Post Office), next to Lincoln Square Mall.
Head downstairs to the Makerspace.

Thanks!
Brian

On 2/1/11 10:05 AM, Tim Yardley wrote:
> Agreed that there are a lot of options out there, but for now... let's
> go with what we know works.
> 
> On Tue, Feb 1, 2011 at 9:58 AM, Outback Dingo <outbackdingo at gmail.com> wrote:
"
52,Commotion-dev, Critical services,"Tue, 1 Feb 2011 20:34:37 +0200",+0200,Daniel Golle,"On Tue, Feb 1, 2011 at 6:39 PM, Outback Dingo <outbackdingo at gmail.com> wrote:
> Well some decent COTS stuff like RouterStation/RouterStation Pro, Wili,
> Soekris, etc... are cheap and solid
some cheap routers even come with an usb port. (also, one might
manually solder an sd-card to the gpio pins to get storage beyong a
few megs to many without usb port)
lately i saw lots of those portable 3g routers, they come with small
battery pack and got ethernet, usb and wifi and are intended to be
used with 3g usb dongles -- but u could just plug a usb pen drive and
have the ideal building block for an emergency caching network... i
guess the best part is that they can survive power outages for at
least 1 or 2 hours...
all the ones i saw are based on ralink rt3052f, and coincidently,
ramips usb support was added to openwrt trunk today.

"
53,Commotion-dev, Commotion Dev Site is Live,"Tue, 01 Feb 2011 15:13:40 -0500",-0500,Josh King,"Hey everyone,

We have a new development site up for the Commotion firmware, you can
access it at http://tech.chambana.net/projects/commotion

When you register, there's space for wikis, documents, tickets, forums,
etc (it is a redmine installation, so all of the features you would
expect from that). You can also upload your ssh keys which will give you
access to the commotion repo. To check out commotion for read-only
access, do the following:

git clone http://git.chambana.net/commotion.git

Once you're registered on the site and have committer access, you can
access the source tree via:

git clone git at git.chambana.net:commotion.git

I'm working on adding in milestones, tickets, documentation, build
instructions, etc. Please let me or the list know if you have any
questions. Thanks, and happy hacking!

-- 
Josh King
Technologist
Open Technology Initiative
New America Foundation

"
54,Commotion-dev, Uplinks,"Wed, 02 Feb 2011 01:36:00 +0100",+0100,Stephane,"Hi everyone,

Not sure where this would fit in the roadmap so I didn't attempt to 
update anything on the website.

Couple thoughts:


- There's mention of GSM and LPFM on the frontpage as backbone / links 
to the rest of the Internet. Since I've been working over the past few 
days on modem access (including ""modem callback"") it would be 
interesting to envision (landline) modem access as a third [...] option.

Refs on this topic (I haven't been involved directly with these folks, 
I'm working this as an FDN project):

http://cryptoanarchy.org/wiki/Dialup_For_Egypt
http://cryptoanarchy.org/wiki/SIP_Software_Modem

The post that started our thinking on that topic:

http://blog.fdn.fr/post/2011/01/28/Censure-de-l-internet-en-%C3%89gypte-%3A-une-humble-action-de-FDN


- I think I had mentioned villagetelco[1] to Dan & Peter. The folks at 
villagetelco have produced a nice piece of _open_ hardware[2] with WAN, 
LAN, FXS port, low power, rugged...

Note: To connect to a residential line for modem access an FXO port 
would be needed instead of an FXS port. But the changes for that 
shouldn't be extremely extensive.

[1] http://www.villagetelco.org/
[2] http://www.villagetelco.org/products/


- An uplink doesn't have to be IP -- UUCP or BBS-type connections might 
be better suited to ""most of the time offline"" uplinks. (I don't have 
much insight here, though.)


That's it for now.
St?phane

"
55,Commotion-dev, Uplinks,"Tue, 1 Feb 2011 19:58:22 -0500",-0500,Outback Dingo,"On Tue, Feb 1, 2011 at 7:36 PM, Stephane <stephane at shimaore.net> wrote:

> Hi everyone,
>
> Not sure where this would fit in the roadmap so I didn't attempt to update
> anything on the website.
>
> Couple thoughts:
>
>
> - There's mention of GSM and LPFM on the frontpage as backbone / links to
> the rest of the Internet. Since I've been working over the past few days on
> modem access (including ""modem callback"") it would be interesting to
> envision (landline) modem access as a third [...] option.
>
> Refs on this topic (I haven't been involved directly with these folks, I'm
> working this as an FDN project):
>
> http://cryptoanarchy.org/wiki/Dialup_For_Egypt
> http://cryptoanarchy.org/wiki/SIP_Software_Modem
>
> The post that started our thinking on that topic:
>
>
> http://blog.fdn.fr/post/2011/01/28/Censure-de-l-internet-en-%C3%89gypte-%3A-une-humble-action-de-FDN
>
>
> - I think I had mentioned villagetelco[1] to Dan & Peter. The folks at
> villagetelco have produced a nice piece of _open_ hardware[2] with WAN, LAN,
> FXS port, low power, rugged...
>
> Note: To connect to a residential line for modem access an FXO port would
> be needed instead of an FXS port. But the changes for that shouldn't be
> extremely extensive.
>
> [1] http://www.villagetelco.org/
> [2] http://www.villagetelco.org/products/
"
56,Commotion-dev, Uplinks,"Tue, 01 Feb 2011 20:43:07 -0500",-0500,Sascha Meinrath,"FYI, both Steve Song and Elektra (two of the key folks behind the Mesh Potato)
are old friends, so if we want to integrate their work, we may want to bring
them on board.

--Sascha

On 02/01/2011 07:36 PM, Stephane wrote:
> Hi everyone,
> 
> Not sure where this would fit in the roadmap so I didn't attempt to update
> anything on the website.
> 
> Couple thoughts:
> 
> - There's mention of GSM and LPFM on the frontpage as backbone / links to the
> rest of the Internet. Since I've been working over the past few days on modem
> access (including ""modem callback"") it would be interesting to envision
> (landline) modem access as a third [...] option.
> 
> Refs on this topic (I haven't been involved directly with these folks, I'm
> working this as an FDN project):
> 
> http://cryptoanarchy.org/wiki/Dialup_For_Egypt
> http://cryptoanarchy.org/wiki/SIP_Software_Modem
> 
> The post that started our thinking on that topic:
> 
> http://blog.fdn.fr/post/2011/01/28/Censure-de-l-internet-en-%C3%89gypte-%3A-une-humble-action-de-FDN
> 
> - I think I had mentioned villagetelco[1] to Dan & Peter. The folks at
> villagetelco have produced a nice piece of _open_ hardware[2] with WAN, LAN, FXS
> port, low power, rugged...
> 
> Note: To connect to a residential line for modem access an FXO port would be
> needed instead of an FXS port. But the changes for that shouldn't be extremely
> extensive.
> 
> [1] http://www.villagetelco.org/
> [2] http://www.villagetelco.org/products/
> 
> - An uplink doesn't have to be IP -- UUCP or BBS-type connections might be
> better suited to ""most of the time offline"" uplinks. (I don't have much insight
> here, though.)
> 
> 
> That's it for now.
> St?phane
> _______________________________________________
> Commotion-dev mailing list
> Commotion-dev at lists.chambana.net
> http://lists.chambana.net/mailman/listinfo/commotion-dev

"
57,Commotion-dev, Uplinks,"Tue, 01 Feb 2011 21:42:35 -0500",-0500,Dan Meredith,"Heya Stephane,

This is great information man.  Thanks for sharing.

On 02/01/2011 07:36 PM, Stephane wrote:
> Hi everyone,
> 
> Not sure where this would fit in the roadmap so I didn't attempt to
> update anything on the website.
> 
> Couple thoughts:
> 
> 
> - There's mention of GSM and LPFM on the frontpage as backbone / links
> to the rest of the Internet. Since I've been working over the past few
> days on modem access (including ""modem callback"") it would be
> interesting to envision (landline) modem access as a third [...] option.
> 
> Refs on this topic (I haven't been involved directly with these folks,
> I'm working this as an FDN project):
> 
> http://cryptoanarchy.org/wiki/Dialup_For_Egypt
> http://cryptoanarchy.org/wiki/SIP_Software_Modem
> 
> The post that started our thinking on that topic:
> 
> http://blog.fdn.fr/post/2011/01/28/Censure-de-l-internet-en-%C3%89gypte-%3A-une-humble-action-de-FDN
> 
> 
> 
> - I think I had mentioned villagetelco[1] to Dan & Peter. The folks at
> villagetelco have produced a nice piece of _open_ hardware[2] with WAN,
> LAN, FXS port, low power, rugged...
> 
> Note: To connect to a residential line for modem access an FXO port
> would be needed instead of an FXS port. But the changes for that
> shouldn't be extremely extensive.
> 
> [1] http://www.villagetelco.org/
> [2] http://www.villagetelco.org/products/
> 
> 
> - An uplink doesn't have to be IP -- UUCP or BBS-type connections might
> be better suited to ""most of the time offline"" uplinks. (I don't have
> much insight here, though.)
> 
> 
> That's it for now.
> St?phane
> _______________________________________________
> Commotion-dev mailing list
> Commotion-dev at lists.chambana.net
> http://lists.chambana.net/mailman/listinfo/commotion-dev

"
58,Commotion-dev, Combined update,"Thu, 03 Feb 2011 14:55:16 -0600",-0600,Brian Duggan,"1. For Chambananites: mesh wifi reading group tonight at Makerspace Urbana.

7:00pm

Makerspace Urbana is in the basement of the Independent Media Center
202 S Broadway
Urbana

2. olsrd 0.6.1 builds on WinXP with some modification. So does one chunk
of the gui, but it doesn't work yet. I'll push my branch back to
tech.chambana.net soon (after I learn more git).

I'm good on software and equipment, but if anyone knows of benevolent
Windows devs, please put them in touch with me.

Thanks!
Brian

"
59,Commotion-dev, Uplinks,"Wed, 9 Feb 2011 11:46:14 +0100",+0100,L. Aaron Kaplan,"I think , Egypt is online again :)

By-the-way...
:))

a.

--
Rule #1 of large networks: something is always broken somewhere

"
60,Commotion-dev, Uplinks,"Wed, 09 Feb 2011 12:48:15 -0500",-0500,Dan Meredith,"An their infrastructure is still centralized, btw ;)  We've still work
to do!

On 02/09/2011 05:46 AM, L. Aaron Kaplan wrote:
> I think , Egypt is online again :)
> 
> By-the-way...
> :))
> 
> a.
> 
> --
> Rule #1 of large networks: something is always broken somewhere
> 

-- 
Dan Meredith
Technologist
New America Foundation
Open Technology Initiative

"
61,Commotion-dev, Uplinks,"Wed, 9 Feb 2011 13:47:30 -0500",-0500,Preston Rhea,"We are working to prevent the battles of tomorrow, not simply fight those of
today.

Preston

On Wed, Feb 9, 2011 at 12:48 PM, Dan Meredith <meredith at newamerica.net>wrote:

> An their infrastructure is still centralized, btw ;)  We've still work
> to do!
>
> On 02/09/2011 05:46 AM, L. Aaron Kaplan wrote:
> > I think , Egypt is online again :)
> >
> > By-the-way...
> > :))
> >
> > a.
> >
> > --
> > Rule #1 of large networks: something is always broken somewhere
> >
>
> --
> Dan Meredith
> Technologist
> New America Foundation
> Open Technology Initiative
> _______________________________________________
> Commotion-dev mailing list
> Commotion-dev at lists.chambana.net
> http://lists.chambana.net/mailman/listinfo/commotion-dev
"
62,Commotion-dev, Uplinks,"Wed, 9 Feb 2011 22:04:58 +0100",+0100,L. Aaron Kaplan,"


On Feb 9, 2011, at 7:47 PM, Preston Rhea wrote:

> We are working to prevent the battles of tomorrow, not simply fight those of today.
> 

Good ;-)))

My statement was intended to be slightly provocative :)

Good that you intend to continue!

Nice,
Aaron.




--
Rule #1 of large networks: something is always broken somewhere
(Paul Vixie)
"
63,Commotion-dev, Uplinks,"Wed, 09 Feb 2011 16:08:23 -0500",-0500,Dan Meredith,"On 02/09/2011 04:04 PM, L. Aaron Kaplan wrote:
> 
> 
> 
> On Feb 9, 2011, at 7:47 PM, Preston Rhea wrote:
> 
"
64,Commotion-dev, Uplinks,"Wed, 9 Feb 2011 22:10:18 +0100",+0100,L. Aaron Kaplan,
65,Commotion-dev, Uplinks,"Wed, 9 Feb 2011 13:42:07 -0500",-0500,Preston Rhea,"We are working to prevent the battles of tomorrow, not simply fight those of
today.

Preston

On Wed, Feb 9, 2011 at 12:48 PM, Dan Meredith <meredith at newamerica.net>wrote:

> An their infrastructure is still centralized, btw ;)  We've still work
> to do!
>
> On 02/09/2011 05:46 AM, L. Aaron Kaplan wrote:
> > I think , Egypt is online again :)
> >
> > By-the-way...
> > :))
> >
> > a.
> >
> > --
> > Rule #1 of large networks: something is always broken somewhere
> >
>
> --
> Dan Meredith
> Technologist
> New America Foundation
> Open Technology Initiative
> _______________________________________________
> Commotion-dev mailing list
> Commotion-dev at lists.chambana.net
> http://lists.chambana.net/mailman/listinfo/commotion-dev
"
66,Commotion-dev, From the Freedombox discuss list: Store-and-forward,"Tue, 01 Mar 2011 08:38:22 -0500",-0500,Dan Meredith,"http://lists.alioth.debian.org/pipermail/freedombox-discuss/2011-March/000766.html#
-- 
Dan Meredith
Technologist
New America Foundation
Open Technology Initiative
http://oti.newamerica.net
"
67,Commotion-dev, From the Freedombox discuss list:,"Tue, 1 Mar 2011 14:59:42 +0100",+0100,L. Aaron Kaplan,"Dan or anyone on the list ( I am not at the meoment, sorry): could you point people 
at the current toy of Vint Cerf: Delay Tolerant Networks (DTNs)?

http://en.wikipedia.org/wiki/Delay-tolerant_networking

IMHO DTNs would suite such a purpose brilliantly....

a.


On Mar 1, 2011, at 2:38 PM, Dan Meredith wrote:

> http://lists.alioth.debian.org/pipermail/freedombox-discuss/2011-March/000766.html#
> -- 
> Dan Meredith
> Technologist
> New America Foundation
> Open Technology Initiative
> http://oti.newamerica.net
> _______________________________________________
> Commotion-dev mailing list
> Commotion-dev at lists.chambana.net
> http://lists.chambana.net/mailman/listinfo/commotion-dev

"
68,Commotion-dev, From the Freedombox discuss list:,"Tue, 01 Mar 2011 12:04:05 -0500",-0500,Dan Meredith,"More info (this is inline with you're early conversation right Pete?)

http://tools.ietf.org/html/rfc4838
http://tools.ietf.org/html/rfc5050
http://en.wikipedia.org/wiki/Delay-tolerant_networking
http://www.youtube.com/watch?v=-QgdKd1eWuM&feature=related#

On 03/01/2011 08:59 AM, L. Aaron Kaplan wrote:
> Dan or anyone on the list ( I am not at the meoment, sorry): could you point people 
> at the current toy of Vint Cerf: Delay Tolerant Networks (DTNs)?
> 
> http://en.wikipedia.org/wiki/Delay-tolerant_networking
> 
> IMHO DTNs would suite such a purpose brilliantly....
> 
> a.
> 
> 
> On Mar 1, 2011, at 2:38 PM, Dan Meredith wrote:
> 
"
69,Commotion-dev, From the Freedombox discuss list: Store-and-forward,"Tue, 01 Mar 2011 08:38:22 -0500",-0500,Dan Meredith,"http://lists.alioth.debian.org/pipermail/freedombox-discuss/2011-March/000766.html#
-- 
Dan Meredith
Technologist
New America Foundation
Open Technology Initiative
http://oti.newamerica.net

"
70,Commotion-dev, From the Freedombox discuss list:,"Tue, 1 Mar 2011 14:59:42 +0100",+0100,L. Aaron Kaplan,"Dan or anyone on the list ( I am not at the meoment, sorry): could you point people 
at the current toy of Vint Cerf: Delay Tolerant Networks (DTNs)?

http://en.wikipedia.org/wiki/Delay-tolerant_networking

IMHO DTNs would suite such a purpose brilliantly....

a.


On Mar 1, 2011, at 2:38 PM, Dan Meredith wrote:

> http://lists.alioth.debian.org/pipermail/freedombox-discuss/2011-March/000766.html#
> -- 
> Dan Meredith
> Technologist
> New America Foundation
> Open Technology Initiative
> http://oti.newamerica.net
> _______________________________________________
> Commotion-dev mailing list
> Commotion-dev at lists.chambana.net
> http://lists.chambana.net/mailman/listinfo/commotion-dev

"
71,Commotion-dev, From the Freedombox discuss list:,"Tue, 01 Mar 2011 12:04:05 -0500",-0500,Dan Meredith,"More info (this is inline with you're early conversation right Pete?)

http://tools.ietf.org/html/rfc4838
http://tools.ietf.org/html/rfc5050
http://en.wikipedia.org/wiki/Delay-tolerant_networking
http://www.youtube.com/watch?v=-QgdKd1eWuM&feature=related#

On 03/01/2011 08:59 AM, L. Aaron Kaplan wrote:
> Dan or anyone on the list ( I am not at the meoment, sorry): could you point people 
> at the current toy of Vint Cerf: Delay Tolerant Networks (DTNs)?
> 
> http://en.wikipedia.org/wiki/Delay-tolerant_networking
> 
> IMHO DTNs would suite such a purpose brilliantly....
> 
> a.
> 
> 
> On Mar 1, 2011, at 2:38 PM, Dan Meredith wrote:
> 
"
72,Commotion-dev, Quick Update,"Wed, 06 Apr 2011 12:54:25 -0400",-0400,Dan Meredith,"Heya all,

Quickly, folks over at OTI have been working to drum up resource support
for this awesome project. I've updated
https://tech.chambana.net/projects/commotion with a bunch of broad high
level text.

With that, we hope to begin working quickly on the below:

Create 	a virtual organizing and development space for programmers and
the community coalition
* Define the coalition?s goals
* Define and expand the coalition?s partners	
* Define and announce coalition projects and partners

Solidify a Collaborative Development Strategy
* Create common development plans
** Establish common development plan for Wi-Fi/GSM infrastructure
integration		
** Establish common development plan for Wi-Fi/GSM VOIP and SMS
application integration

Deploy testbeds for collaborative development
* Implement a neighborhood/community-scale Wi-Fi/GSM infrastructure testbed	
* Create a Wi-Fi/GSM VOIP/SMS application testbed

I'd love thoughts, questions, comments, criticisms, and/or general fud
from folks

Cheers,
-- 
Dan Meredith
Technologist
New America Foundation
Open Technology Initiative
pgp 0x9C1BDFB4
"
73,Commotion-dev, Quick Update,"Wed, 6 Apr 2011 12:01:54 -0500",-0500,Ben West,"Hi Dan,

Great news!

I would recommend checking out some of the recent threads on the olsr-users
listserv re: options for encryption in an ad-hoc mesh, since they are
limited, and/or present paths of diminishing returns.

That is, although schemes like WPA-NONE have been mentioned, the general
problem is that the volume of packets moving over modem meshes quickly
reduce the time needed for an interloper to snoop packets and crack the key.

Other suggested options include layer-2 encryption, although I'm uncertain
to what extent the current OpenWRT/Atheros platform may support this, or
using tools like tinc to simply forward VPN tunnels thru the mesh.

On Wed, Apr 6, 2011 at 11:54 AM, Dan Meredith <meredith at newamerica.net>wrote:

> Heya all,
>
> Quickly, folks over at OTI have been working to drum up resource support
> for this awesome project. I've updated
> https://tech.chambana.net/projects/commotion with a bunch of broad high
> level text.
>
> With that, we hope to begin working quickly on the below:
>
> Create  a virtual organizing and development space for programmers and
> the community coalition
> * Define the coalition?s goals
> * Define and expand the coalition?s partners
> * Define and announce coalition projects and partners
>
> Solidify a Collaborative Development Strategy
> * Create common development plans
> ** Establish common development plan for Wi-Fi/GSM infrastructure
> integration
> ** Establish common development plan for Wi-Fi/GSM VOIP and SMS
> application integration
>
> Deploy testbeds for collaborative development
> * Implement a neighborhood/community-scale Wi-Fi/GSM infrastructure testbed
> * Create a Wi-Fi/GSM VOIP/SMS application testbed
>
> I'd love thoughts, questions, comments, criticisms, and/or general fud
> from folks
>
> Cheers,
> --
> Dan Meredith
> Technologist
> New America Foundation
> Open Technology Initiative
> pgp 0x9C1BDFB4
> _______________________________________________
> Commotion-dev mailing list
> Commotion-dev at lists.chambana.net
> http://lists.chambana.net/mailman/listinfo/commotion-dev
"
74,Commotion-dev, Quick Update,"Wed, 06 Apr 2011 12:29:35 -0500",-0500,Charles N Wyble,"On 04/06/2011 11:54 AM, Dan Meredith wrote:
> Heya all,
>
Hey there. Glad to see some traffic on the list! :)

> Quickly, folks over at OTI have been working to drum up resource support
> for this awesome project. I've updated
> https://tech.chambana.net/projects/commotion with a bunch of broad high
> level text.

Cool stuff.

> With that, we hope to begin working quickly on the below:
>
> Create 	a virtual organizing and development space for programmers and
> the community coalition

Nice. That's useful.

> * Define the coalition?s goals
> * Define and expand the coalition?s partners	
> * Define and announce coalition projects and partners

Will this be an open process? I understand some boot strapping usually 
needs to happen behind closed doors, such that an initial proposal can 
be floated out to the wider community. Just curious as to the nature of 
the process.


> Solidify a Collaborative Development Strategy
> * Create common development plans
> ** Establish common development plan for Wi-Fi/GSM infrastructure
> integration		
> ** Establish common development plan for Wi-Fi/GSM VOIP and SMS
> application integration

I'm very interested in the above items.

> Deploy testbeds for collaborative development
> * Implement a neighborhood/community-scale Wi-Fi/GSM infrastructure testbed	
> * Create a Wi-Fi/GSM VOIP/SMS application testbed

Nice!! I live in Austin TX, and am very close to the local hacker space. 
I run a small mesh network (4 nodes) and have been involved with the 
VillageTelco project for some time. So I'm well versed in mesh network 
deployment/optimization etc. I'm happy to test out firmware images, 
tweaks, hacks etc. My last engagement was building a mesh network to 
support voip applications. It was challenging but a lot of fun. We made 
it work.


"
75,Commotion-dev, Quick Update,"Wed, 6 Apr 2011 23:38:56 +0200",+0200,L. Aaron Kaplan,"
On Apr 6, 2011, at 7:01 PM, Ben West wrote:

> Hi Dan,
> 
> Great news!

Agreed, congrats! :)

> 
> I would recommend checking out some of the recent threads on the olsr-users listserv re: options for encryption in an ad-hoc mesh, since they are limited, and/or present paths of diminishing returns.
> 

Ben, I have the feeling you are mixing different types of ""encryption""  in the sentence above and then you say it is ""limited"". I don't quite agree. See below for what I mean :)

> That is, although schemes like WPA-NONE have been mentioned, the general problem is that the volume of packets moving over modem meshes quickly reduce the time needed for an interloper to snoop packets and crack the key.
> 
with WEP, yes. But not so much with WPA2.

> Other suggested options include layer-2 encryption, although I'm uncertain to what extent the current OpenWRT/Atheros platform may support this, or using tools like tinc to simply forward VPN tunnels thru the mesh.
> 
The main problem with ad-hoc mode is that there is no good WPA2 support for it (i.e. no good layer 2 security in ad-hoc mode).
Please note, that however is a shortcoming of the wireless drivers (layer 2) and not of OLSR (which is on layer 3). 

It would be *great* if the commotion project could make WPA2 work in ad-hoc but even if it can not, we still
have a) a way to secure routing messages (i.e. protect the routing layer against malicious insiders) by signing the routing messages [1] 
or b) we can use Tor , OpenVPN, IPSec,...or any other end-to-end encryption scheme to protect the data layer.


So, I see no problem with that. We can do that. We can build that. We don't need to rely on layer 2 WPA2 in ad-hoc mode.
Sure, any encryption will cost CPU power. But that is a trade off that you might want to make when you want to send data securely.


However, I do believe that securing the actual hardware (mobile phones) on its own is more of a challenge.
Especially nowadays when can see an emerging trend of malware coming to smartphones.
That is going to be a real challenge.


[1] Take a look at the SIDR working group at the IETF: https://datatracker.ietf.org/wg/sidr/charter/ for some inspirations
(though, I don't believe in the central PKI for signing routing messages)

> On Wed, Apr 6, 2011 at 11:54 AM, Dan Meredith <meredith at newamerica.net> wrote:
> Heya all,
> 
> Quickly, folks over at OTI have been working to drum up resource support
> for this awesome project. I've updated
> https://tech.chambana.net/projects/commotion with a bunch of broad high
> level text.
> 
> With that, we hope to begin working quickly on the below:
> 
> Create  a virtual organizing and development space for programmers and
> the community coalition
> * Define the coalition?s goals
> * Define and expand the coalition?s partners
> * Define and announce coalition projects and partners
> 
> Solidify a Collaborative Development Strategy
> * Create common development plans
> ** Establish common development plan for Wi-Fi/GSM infrastructure
> integration
> ** Establish common development plan for Wi-Fi/GSM VOIP and SMS
> application integration
> 
> Deploy testbeds for collaborative development
> * Implement a neighborhood/community-scale Wi-Fi/GSM infrastructure testbed
> * Create a Wi-Fi/GSM VOIP/SMS application testbed
> 
> I'd love thoughts, questions, comments, criticisms, and/or general fud
> from folks
> 
> Cheers,
> --
> Dan Meredith
> Technologist
> New America Foundation
> Open Technology Initiative
> pgp 0x9C1BDFB4
> _______________________________________________
> Commotion-dev mailing list
> Commotion-dev at lists.chambana.net
> http://lists.chambana.net/mailman/listinfo/commotion-dev
> 
> 
> 
> -- 
> Ben West
> me at benwest.name
> 
> _______________________________________________
> Commotion-dev mailing list
> Commotion-dev at lists.chambana.net
> http://lists.chambana.net/mailman/listinfo/commotion-dev

"
76,Commotion-dev, Quick Update,"Thu, 07 Apr 2011 09:18:38 +0100",+0100,Michael Rogers,"Hi all,

On 06/04/11 22:38, L. Aaron Kaplan wrote:
> It would be *great* if the commotion project could make WPA2 work in
> ad-hoc but even if it can not, we still have a) a way to secure
> routing messages (i.e. protect the routing layer against malicious
> insiders) by signing the routing messages [1] or b) we can use Tor ,
> OpenVPN, IPSec,...or any other end-to-end encryption scheme to
> protect the data layer.
[snip]
> [1] Take a look at the SIDR working group at the IETF:
> https://datatracker.ietf.org/wg/sidr/charter/ for some inspirations 
> (though, I don't believe in the central PKI for signing routing
> messages)

I have to say I'm skeptical about whether it's possible to secure the
routing layer against malicious insiders in a mesh scenario.

The fundamental problem is that in the absence of a trusted identity
infrastructure, such as a centralised PKI, there's nothing to stop an
attacker from using an arbitrary number of identities (at layer 2, layer
3, or both), which makes it very hard to do things like rate-limiting,
fault detection, etc. And I agree that a centralised PKI isn't suitable
for a mesh scenario.

In the past I've run some simulations of DoS attacks against ad hoc
routing protocols by malicious insiders. I didn't look at OLSR, but the
results for on-demand protocols like AODV are extremely bad: a single
attacker can disable a network of a thousand nodes just by flooding the
network with route requests. Clearly that specific attack wouldn't apply
to OLSR, but I'm pretty confident that a malicious insider who can
change identities at will can mess with the protocol in some way.

While end-to-end encryption at a higher layer is certainly a good idea,
it won't protect against attacks that prevent data from getting through.
So I guess there are two possible approaches to this problem.

The first approach would be to try to fix the problem, which could mean
spending years developing a routing protocol that's robust to malicious
insiders in the absence of a trusted identity infrastructure. (Maybe a
solution already exists - but I spent a while researching this topic and
never found one.)

The second approach would be to note that there may be a vulnerability
in the design and carry on.

Personally I think the second approach is better, because a network that
doesn't resist this particular class of attacks is still way more
valuable than a pile of research papers and no network. But maybe I'm
over-compensating for spending too much time on research in the last few
years and not enough time on implementation. :-)

Cheers,
Michael
"
77,Commotion-dev, Quick Update,"Thu, 7 Apr 2011 11:19:07 +0200",+0200,L. Aaron Kaplan,"

Michael, 

your mail inspired me to think more about this topic.

On Apr 7, 2011, at 10:18 AM, Michael Rogers wrote:

> Hi all,
> 
> On 06/04/11 22:38, L. Aaron Kaplan wrote:
"
78,Commotion-dev, Quick Update,"Thu, 07 Apr 2011 10:41:24 +0100",+0100,Michael Rogers,"Hi Aaron,

Thanks for the quick reply.

On 07/04/11 10:19, L. Aaron Kaplan wrote:
> Yes, you have two choices:
> a) make it distributed. In this case you need 3*N+1 nodes to detect N ""byzantine-liars""
> (see http://en.wikipedia.org/wiki/Byzantine_fault_tolerance)
> In other words: yes, if it is distributed, you can be corrupted by on third of the 
> nodes. Or another way to say it: voting helps in such cases ;-)

Unfortunately, without some control over the creation of identities,
voting doesn't help - the attacker can just create an arbitrary number
of identities that out-vote the non-corrupt nodes (the Sybil attack).

> Right now, if you don't protect the routing plane, even in OLSR you can 
> screw up the whole routing in the network pretty badly. There is an
> initial secure plugin in OLSR which signs routing messages. However, I 
> am sure it could use some maintainer ;-)

;-) I'm not sure that signatures provide much benefit without an
identity infrastructure. Yes, they prevent forgery, but ""This message
was signed by Bob"" doesn't mean much if you don't know who Bob is... or
if Bob might be the same person as Alice, etc.

> Well, DOSing communication is generally pretty easy on Wi-Fi: just jam 
> it. Take a microwave oven, connect it to a strong reflector (Sat dish?) and 
> direct it at the mesh crowd ;-) Zap!
> Very low tech. The obvious counter strategy is to simply be very close together.
> Then the jammers signal is weaker than yours. A jammer always has to invest lots of 
> energy to jam a large area (signal strength_at_receiver = initial_strength * 1/distance^2)

Wow, I hadn't even thought about attacks against the physical layer! But
jamming a large mesh would require a lot of resources, as you say,
whereas by attacking the routing protocol you could potentially disable
the whole mesh from a single point.

> Well, you can improve minor things:
> a) use all encryption layers available (Wi-Fi), secure plugin, VPN for data
> b) re-work the secure plugin to make it tolerant to byzantine liars (malicious 
> insiders). 
> c) give people tools to check if something wrong happened with the routing layer
> d) create an IDS (intrusion detection system) for the routing layer and trigger automatic alarms 
> e) create a filter system similar to the filters in BGP. You might want to just simply 
>  block the announcements of a specific node.

Good point, security isn't all-or-nothing. These defences are definitely
worth considering, but I suspect that (b) will be vulnerable to an
attacker who can maintain multiple identities (Sybil attack) and (e)
will be vulnerable to an attacker who can change identities at will
(whitewashing). Still, implementing such defences would at least force
the attacker to be more sophisticated.

> Thanks for your inspiring mail!

Likewise! Sorry I don't have something more positive to offer. ;-)

Cheers,
Michael
"
79,Commotion-dev, Quick Update,"Tue, 12 Apr 2011 19:56:25 -0500",-0500,Ben West,"On Thu, Apr 7, 2011 at 4:41 AM, Michael Rogers <m-- at gmx.com> wrote:

>
> > Well, DOSing communication is generally pretty easy on Wi-Fi: just jam
> > it. Take a microwave oven, connect it to a strong reflector (Sat dish?)
> and
> > direct it at the mesh crowd ;-) Zap!
> > Very low tech. The obvious counter strategy is to simply be very close
> together.
> > Then the jammers signal is weaker than yours. A jammer always has to
> invest lots of
> > energy to jam a large area (signal strength_at_receiver =
> initial_strength * 1/distance^2)
>
> Wow, I hadn't even thought about attacks against the physical layer! But
> jamming a large mesh would require a lot of resources, as you say,
> whereas by attacking the routing protocol you could potentially disable
> the whole mesh from a single point.
>
>
Besides the microwave oven augmented with an aerial, XKCD also points out
this fundamental flaw in any security scheme requiring human memory:
http://xkcd.com/538/

On a more serious note, I am curious if folks on the list have experience
using tinc for secure tunnels thru production meshes (= being used by folks
not on a OLSR/OpenWRT/Commotion/etc listserv ;).  I understand the routing
plane will continue to be vulnerable to outages brought on by brute force
DOS of some variety.

-- 
Ben West
me at benwest.name
"
80,Commotion-dev, Quick Update,"Tue, 12 Apr 2011 21:00:55 -0400",-0400,Outback Dingo,"On Tue, Apr 12, 2011 at 8:56 PM, Ben West <me at benwest.name> wrote:

>
>
> On Thu, Apr 7, 2011 at 4:41 AM, Michael Rogers <m-- at gmx.com> wrote:
>
"
81,Commotion-dev, Quick Update,"Tue, 12 Apr 2011 19:58:35 -0500",-0500,Charles N Wyble,"On 4/12/2011 8:00 PM, Outback Dingo wrote:
>
>
> On Tue, Apr 12, 2011 at 8:56 PM, Ben West <me at benwest.name 
> <mailto:me at benwest.name"
82,Commotion-dev, Quick Update,"Tue, 12 Apr 2011 21:21:39 -0400",-0400,Outback Dingo,"On Tue, Apr 12, 2011 at 8:58 PM, Charles N Wyble
<charles at knownelement.com>wrote:

>  On 4/12/2011 8:00 PM, Outback Dingo wrote:
>
>
>
> On Tue, Apr 12, 2011 at 8:56 PM, Ben West <me at benwest.name> wrote:
>
"
83,Commotion-dev, Quick Update,"Tue, 12 Apr 2011 20:43:24 -0500",-0500,Ben West,"Cool that N2N is in OpenWRT:
https://dev.openwrt.org/browser/packages/net/n2n
http://wiki.freifunk.net/N2n

Does N2N have a mechanism to limit latency?

On Tue, Apr 12, 2011 at 7:58 PM, Charles N Wyble
<charles at knownelement.com>wrote:

>  On 4/12/2011 8:00 PM, Outback Dingo wrote:
>
>
>
> On Tue, Apr 12, 2011 at 8:56 PM, Ben West <me at benwest.name> wrote:
>
"
84,Commotion-dev, Quick Update,"Tue, 12 Apr 2011 21:29:43 -0500",-0500,Charles N Wyble,"On 4/12/2011 8:21 PM, Outback Dingo wrote:
> On Tue,
>
>     Beat me to the punch on this. I agree N2N seems to have the
>     absolute lowest overhead of the vpn systems out there today.
>
>
> well... :P LOL

Curious as to what your response means? Do you have a system with lower 
overhead? Please share! (of course there is gre tunnels which
is probably the lowest).


"
85,Commotion-dev, Quick Update,"Tue, 12 Apr 2011 21:30:28 -0500",-0500,Charles N Wyble,"> Cool that N2N is in OpenWRT:
> https://dev.openwrt.org/browser/packages/net/n2n
> http://wiki.freifunk.net/N2n
>
> Does N2N have a mechanism to limit latency?

Can you expand on what you mean by this? Latency is the product of many 
different variables. :)
"
86,Commotion-dev, Quick Update,"Wed, 13 Apr 2011 09:20:59 +0200",+0200,L. Aaron Kaplan,"
On Apr 13, 2011, at 3:00 AM, Outback Dingo wrote:

> 
> 
> On Tue, Apr 12, 2011 at 8:56 PM, Ben West <me at benwest.name> wrote:
> 
> 
> On Thu, Apr 7, 2011 at 4:41 AM, Michael Rogers <m-- at gmx.com> wrote:
> 
> > Well, DOSing communication is generally pretty easy on Wi-Fi: just jam
> > it. Take a microwave oven, connect it to a strong reflector (Sat dish?) and
> > direct it at the mesh crowd ;-) Zap!
> > Very low tech. The obvious counter strategy is to simply be very close together.
> > Then the jammers signal is weaker than yours. A jammer always has to invest lots of
> > energy to jam a large area (signal strength_at_receiver = initial_strength * 1/distance^2)
> 
> Wow, I hadn't even thought about attacks against the physical layer! But
> jamming a large mesh would require a lot of resources, as you say,
> whereas by attacking the routing protocol you could potentially disable
> the whole mesh from a single point.
> 
> 
> Besides the microwave oven augmented with an aerial, XKCD also points out this fundamental flaw in any security scheme requiring human memory:
> http://xkcd.com/538/
> 
> On a more serious note, I am curious if folks on the list have experience using tinc for secure tunnels thru production meshes (= being used by folks not on a OLSR/OpenWRT/Commotion/etc listserv ;).

Ben, as you know at least some of the people here actually have production meshes!
Strange, I thought you were at the wireless summit and thus knew that actually our networks are production.

Anyway, to answer your question: yes, tinc was used for some time in some of the Freifunk networks in Germany. I don't know if they still use it and if not why they stopped.

a.

"
87,Commotion-dev," Commotion-dev Digest, Vol 3, Issue 5","Wed, 13 Apr 2011 12:11:21 -0500",-0500,Colten Jackson,"> RE:
> Anyway, to answer your question: yes, tinc was used for some time in some
> of the Freifunk networks in Germany. I don't know if they still use it and
> if not why they stopped.
>
> a.
>
>
I'd be very interested to hear more about this if you still have a contact,
how effective it was and how much effort it would take to replicate.
"
88,Commotion-dev, Quick Update,"Fri, 15 Apr 2011 01:54:28 -0500",-0500,Ben West,"Hi Aaron,

My apologies for the disparaging remark about production meshes.  Yes, I see
that the IS4CWN conference, this listserv (among others) means people are
actually using such networks for broadband access.

Also, yes, I did manage to get WPA-NONE working myself in IBSS mode under
OpenWRT + ath9k, although unfortunately not with 802.11n HT modes.  I
remember some confusion both on olsr-users listserv and OpenWRT forums about
whether WPA-NONE did actually work.
https://forum.openwrt.org/viewtopic.php?pid=133076#p133076

(Eating a heaping dish of crow right now ...)

On Wed, Apr 13, 2011 at 2:20 AM, L. Aaron Kaplan <aaron at lo-res.org> wrote:

>
> On Apr 13, 2011, at 3:00 AM, Outback Dingo wrote:
>
>
>
> On Tue, Apr 12, 2011 at 8:56 PM, Ben West <me at benwest.name> wrote:
>
"
89,Commotion-dev, Quick Update,"Wed, 06 Apr 2011 12:54:25 -0400",-0400,Dan Meredith,"Heya all,

Quickly, folks over at OTI have been working to drum up resource support
for this awesome project. I've updated
https://tech.chambana.net/projects/commotion with a bunch of broad high
level text.

With that, we hope to begin working quickly on the below:

Create 	a virtual organizing and development space for programmers and
the community coalition
* Define the coalition?s goals
* Define and expand the coalition?s partners	
* Define and announce coalition projects and partners

Solidify a Collaborative Development Strategy
* Create common development plans
** Establish common development plan for Wi-Fi/GSM infrastructure
integration		
** Establish common development plan for Wi-Fi/GSM VOIP and SMS
application integration

Deploy testbeds for collaborative development
* Implement a neighborhood/community-scale Wi-Fi/GSM infrastructure testbed	
* Create a Wi-Fi/GSM VOIP/SMS application testbed

I'd love thoughts, questions, comments, criticisms, and/or general fud
from folks

Cheers,
-- 
Dan Meredith
Technologist
New America Foundation
Open Technology Initiative
pgp 0x9C1BDFB4

"
90,Commotion-dev, Quick Update,"Wed, 6 Apr 2011 12:01:54 -0500",-0500,Ben West,"Hi Dan,

Great news!

I would recommend checking out some of the recent threads on the olsr-users
listserv re: options for encryption in an ad-hoc mesh, since they are
limited, and/or present paths of diminishing returns.

That is, although schemes like WPA-NONE have been mentioned, the general
problem is that the volume of packets moving over modem meshes quickly
reduce the time needed for an interloper to snoop packets and crack the key.

Other suggested options include layer-2 encryption, although I'm uncertain
to what extent the current OpenWRT/Atheros platform may support this, or
using tools like tinc to simply forward VPN tunnels thru the mesh.

On Wed, Apr 6, 2011 at 11:54 AM, Dan Meredith <meredith at newamerica.net>wrote:

> Heya all,
>
> Quickly, folks over at OTI have been working to drum up resource support
> for this awesome project. I've updated
> https://tech.chambana.net/projects/commotion with a bunch of broad high
> level text.
>
> With that, we hope to begin working quickly on the below:
>
> Create  a virtual organizing and development space for programmers and
> the community coalition
> * Define the coalition?s goals
> * Define and expand the coalition?s partners
> * Define and announce coalition projects and partners
>
> Solidify a Collaborative Development Strategy
> * Create common development plans
> ** Establish common development plan for Wi-Fi/GSM infrastructure
> integration
> ** Establish common development plan for Wi-Fi/GSM VOIP and SMS
> application integration
>
> Deploy testbeds for collaborative development
> * Implement a neighborhood/community-scale Wi-Fi/GSM infrastructure testbed
> * Create a Wi-Fi/GSM VOIP/SMS application testbed
>
> I'd love thoughts, questions, comments, criticisms, and/or general fud
> from folks
>
> Cheers,
> --
> Dan Meredith
> Technologist
> New America Foundation
> Open Technology Initiative
> pgp 0x9C1BDFB4
> _______________________________________________
> Commotion-dev mailing list
> Commotion-dev at lists.chambana.net
> http://lists.chambana.net/mailman/listinfo/commotion-dev
"
91,Commotion-dev, Quick Update,"Wed, 06 Apr 2011 12:29:35 -0500",-0500,Charles N Wyble,"On 04/06/2011 11:54 AM, Dan Meredith wrote:
> Heya all,
>
Hey there. Glad to see some traffic on the list! :)

> Quickly, folks over at OTI have been working to drum up resource support
> for this awesome project. I've updated
> https://tech.chambana.net/projects/commotion with a bunch of broad high
> level text.

Cool stuff.

> With that, we hope to begin working quickly on the below:
>
> Create 	a virtual organizing and development space for programmers and
> the community coalition

Nice. That's useful.

> * Define the coalition?s goals
> * Define and expand the coalition?s partners	
> * Define and announce coalition projects and partners

Will this be an open process? I understand some boot strapping usually 
needs to happen behind closed doors, such that an initial proposal can 
be floated out to the wider community. Just curious as to the nature of 
the process.


> Solidify a Collaborative Development Strategy
> * Create common development plans
> ** Establish common development plan for Wi-Fi/GSM infrastructure
> integration		
> ** Establish common development plan for Wi-Fi/GSM VOIP and SMS
> application integration

I'm very interested in the above items.

> Deploy testbeds for collaborative development
> * Implement a neighborhood/community-scale Wi-Fi/GSM infrastructure testbed	
> * Create a Wi-Fi/GSM VOIP/SMS application testbed

Nice!! I live in Austin TX, and am very close to the local hacker space. 
I run a small mesh network (4 nodes) and have been involved with the 
VillageTelco project for some time. So I'm well versed in mesh network 
deployment/optimization etc. I'm happy to test out firmware images, 
tweaks, hacks etc. My last engagement was building a mesh network to 
support voip applications. It was challenging but a lot of fun. We made 
it work.



"
92,Commotion-dev, Quick Update,"Wed, 6 Apr 2011 23:38:56 +0200",+0200,L. Aaron Kaplan,"
On Apr 6, 2011, at 7:01 PM, Ben West wrote:

> Hi Dan,
> 
> Great news!

Agreed, congrats! :)

> 
> I would recommend checking out some of the recent threads on the olsr-users listserv re: options for encryption in an ad-hoc mesh, since they are limited, and/or present paths of diminishing returns.
> 

Ben, I have the feeling you are mixing different types of ""encryption""  in the sentence above and then you say it is ""limited"". I don't quite agree. See below for what I mean :)

> That is, although schemes like WPA-NONE have been mentioned, the general problem is that the volume of packets moving over modem meshes quickly reduce the time needed for an interloper to snoop packets and crack the key.
> 
with WEP, yes. But not so much with WPA2.

> Other suggested options include layer-2 encryption, although I'm uncertain to what extent the current OpenWRT/Atheros platform may support this, or using tools like tinc to simply forward VPN tunnels thru the mesh.
> 
The main problem with ad-hoc mode is that there is no good WPA2 support for it (i.e. no good layer 2 security in ad-hoc mode).
Please note, that however is a shortcoming of the wireless drivers (layer 2) and not of OLSR (which is on layer 3). 

It would be *great* if the commotion project could make WPA2 work in ad-hoc but even if it can not, we still
have a) a way to secure routing messages (i.e. protect the routing layer against malicious insiders) by signing the routing messages [1] 
or b) we can use Tor , OpenVPN, IPSec,...or any other end-to-end encryption scheme to protect the data layer.


So, I see no problem with that. We can do that. We can build that. We don't need to rely on layer 2 WPA2 in ad-hoc mode.
Sure, any encryption will cost CPU power. But that is a trade off that you might want to make when you want to send data securely.


However, I do believe that securing the actual hardware (mobile phones) on its own is more of a challenge.
Especially nowadays when can see an emerging trend of malware coming to smartphones.
That is going to be a real challenge.


[1] Take a look at the SIDR working group at the IETF: https://datatracker.ietf.org/wg/sidr/charter/ for some inspirations
(though, I don't believe in the central PKI for signing routing messages)

> On Wed, Apr 6, 2011 at 11:54 AM, Dan Meredith <meredith at newamerica.net> wrote:
> Heya all,
> 
> Quickly, folks over at OTI have been working to drum up resource support
> for this awesome project. I've updated
> https://tech.chambana.net/projects/commotion with a bunch of broad high
> level text.
> 
> With that, we hope to begin working quickly on the below:
> 
> Create  a virtual organizing and development space for programmers and
> the community coalition
> * Define the coalition?s goals
> * Define and expand the coalition?s partners
> * Define and announce coalition projects and partners
> 
> Solidify a Collaborative Development Strategy
> * Create common development plans
> ** Establish common development plan for Wi-Fi/GSM infrastructure
> integration
> ** Establish common development plan for Wi-Fi/GSM VOIP and SMS
> application integration
> 
> Deploy testbeds for collaborative development
> * Implement a neighborhood/community-scale Wi-Fi/GSM infrastructure testbed
> * Create a Wi-Fi/GSM VOIP/SMS application testbed
> 
> I'd love thoughts, questions, comments, criticisms, and/or general fud
> from folks
> 
> Cheers,
> --
> Dan Meredith
> Technologist
> New America Foundation
> Open Technology Initiative
> pgp 0x9C1BDFB4
> _______________________________________________
> Commotion-dev mailing list
> Commotion-dev at lists.chambana.net
> http://lists.chambana.net/mailman/listinfo/commotion-dev
> 
> 
> 
> -- 
> Ben West
> me at benwest.name
> 
> _______________________________________________
> Commotion-dev mailing list
> Commotion-dev at lists.chambana.net
> http://lists.chambana.net/mailman/listinfo/commotion-dev

"
93,Commotion-dev, Quick Update,"Thu, 07 Apr 2011 09:18:38 +0100",+0100,Michael Rogers,"Hi all,

On 06/04/11 22:38, L. Aaron Kaplan wrote:
> It would be *great* if the commotion project could make WPA2 work in
> ad-hoc but even if it can not, we still have a) a way to secure
> routing messages (i.e. protect the routing layer against malicious
> insiders) by signing the routing messages [1] or b) we can use Tor ,
> OpenVPN, IPSec,...or any other end-to-end encryption scheme to
> protect the data layer.
[snip]
> [1] Take a look at the SIDR working group at the IETF:
> https://datatracker.ietf.org/wg/sidr/charter/ for some inspirations 
> (though, I don't believe in the central PKI for signing routing
> messages)

I have to say I'm skeptical about whether it's possible to secure the
routing layer against malicious insiders in a mesh scenario.

The fundamental problem is that in the absence of a trusted identity
infrastructure, such as a centralised PKI, there's nothing to stop an
attacker from using an arbitrary number of identities (at layer 2, layer
3, or both), which makes it very hard to do things like rate-limiting,
fault detection, etc. And I agree that a centralised PKI isn't suitable
for a mesh scenario.

In the past I've run some simulations of DoS attacks against ad hoc
routing protocols by malicious insiders. I didn't look at OLSR, but the
results for on-demand protocols like AODV are extremely bad: a single
attacker can disable a network of a thousand nodes just by flooding the
network with route requests. Clearly that specific attack wouldn't apply
to OLSR, but I'm pretty confident that a malicious insider who can
change identities at will can mess with the protocol in some way.

While end-to-end encryption at a higher layer is certainly a good idea,
it won't protect against attacks that prevent data from getting through.
So I guess there are two possible approaches to this problem.

The first approach would be to try to fix the problem, which could mean
spending years developing a routing protocol that's robust to malicious
insiders in the absence of a trusted identity infrastructure. (Maybe a
solution already exists - but I spent a while researching this topic and
never found one.)

The second approach would be to note that there may be a vulnerability
in the design and carry on.

Personally I think the second approach is better, because a network that
doesn't resist this particular class of attacks is still way more
valuable than a pile of research papers and no network. But maybe I'm
over-compensating for spending too much time on research in the last few
years and not enough time on implementation. :-)

Cheers,
Michael

"
94,Commotion-dev, Quick Update,"Thu, 7 Apr 2011 11:19:07 +0200",+0200,L. Aaron Kaplan,"

Michael, 

your mail inspired me to think more about this topic.

On Apr 7, 2011, at 10:18 AM, Michael Rogers wrote:

> Hi all,
> 
> On 06/04/11 22:38, L. Aaron Kaplan wrote:
"
95,Commotion-dev, Quick Update,"Thu, 07 Apr 2011 10:41:24 +0100",+0100,Michael Rogers,"Hi Aaron,

Thanks for the quick reply.

On 07/04/11 10:19, L. Aaron Kaplan wrote:
> Yes, you have two choices:
> a) make it distributed. In this case you need 3*N+1 nodes to detect N ""byzantine-liars""
> (see http://en.wikipedia.org/wiki/Byzantine_fault_tolerance)
> In other words: yes, if it is distributed, you can be corrupted by on third of the 
> nodes. Or another way to say it: voting helps in such cases ;-)

Unfortunately, without some control over the creation of identities,
voting doesn't help - the attacker can just create an arbitrary number
of identities that out-vote the non-corrupt nodes (the Sybil attack).

> Right now, if you don't protect the routing plane, even in OLSR you can 
> screw up the whole routing in the network pretty badly. There is an
> initial secure plugin in OLSR which signs routing messages. However, I 
> am sure it could use some maintainer ;-)

;-) I'm not sure that signatures provide much benefit without an
identity infrastructure. Yes, they prevent forgery, but ""This message
was signed by Bob"" doesn't mean much if you don't know who Bob is... or
if Bob might be the same person as Alice, etc.

> Well, DOSing communication is generally pretty easy on Wi-Fi: just jam 
> it. Take a microwave oven, connect it to a strong reflector (Sat dish?) and 
> direct it at the mesh crowd ;-) Zap!
> Very low tech. The obvious counter strategy is to simply be very close together.
> Then the jammers signal is weaker than yours. A jammer always has to invest lots of 
> energy to jam a large area (signal strength_at_receiver = initial_strength * 1/distance^2)

Wow, I hadn't even thought about attacks against the physical layer! But
jamming a large mesh would require a lot of resources, as you say,
whereas by attacking the routing protocol you could potentially disable
the whole mesh from a single point.

> Well, you can improve minor things:
> a) use all encryption layers available (Wi-Fi), secure plugin, VPN for data
> b) re-work the secure plugin to make it tolerant to byzantine liars (malicious 
> insiders). 
> c) give people tools to check if something wrong happened with the routing layer
> d) create an IDS (intrusion detection system) for the routing layer and trigger automatic alarms 
> e) create a filter system similar to the filters in BGP. You might want to just simply 
>  block the announcements of a specific node.

Good point, security isn't all-or-nothing. These defences are definitely
worth considering, but I suspect that (b) will be vulnerable to an
attacker who can maintain multiple identities (Sybil attack) and (e)
will be vulnerable to an attacker who can change identities at will
(whitewashing). Still, implementing such defences would at least force
the attacker to be more sophisticated.

> Thanks for your inspiring mail!

Likewise! Sorry I don't have something more positive to offer. ;-)

Cheers,
Michael

"
96,Commotion-dev, Quick Update,"Tue, 12 Apr 2011 19:56:25 -0500",-0500,Ben West,"On Thu, Apr 7, 2011 at 4:41 AM, Michael Rogers <m-- at gmx.com> wrote:

>
> > Well, DOSing communication is generally pretty easy on Wi-Fi: just jam
> > it. Take a microwave oven, connect it to a strong reflector (Sat dish?)
> and
> > direct it at the mesh crowd ;-) Zap!
> > Very low tech. The obvious counter strategy is to simply be very close
> together.
> > Then the jammers signal is weaker than yours. A jammer always has to
> invest lots of
> > energy to jam a large area (signal strength_at_receiver =
> initial_strength * 1/distance^2)
>
> Wow, I hadn't even thought about attacks against the physical layer! But
> jamming a large mesh would require a lot of resources, as you say,
> whereas by attacking the routing protocol you could potentially disable
> the whole mesh from a single point.
>
>
Besides the microwave oven augmented with an aerial, XKCD also points out
this fundamental flaw in any security scheme requiring human memory:
http://xkcd.com/538/

On a more serious note, I am curious if folks on the list have experience
using tinc for secure tunnels thru production meshes (= being used by folks
not on a OLSR/OpenWRT/Commotion/etc listserv ;).  I understand the routing
plane will continue to be vulnerable to outages brought on by brute force
DOS of some variety.

-- 
Ben West
me at benwest.name
"
97,Commotion-dev, Quick Update,"Tue, 12 Apr 2011 21:00:55 -0400",-0400,Outback Dingo,"On Tue, Apr 12, 2011 at 8:56 PM, Ben West <me at benwest.name> wrote:

>
>
> On Thu, Apr 7, 2011 at 4:41 AM, Michael Rogers <m-- at gmx.com> wrote:
>
"
98,Commotion-dev, Quick Update,"Tue, 12 Apr 2011 19:58:35 -0500",-0500,Charles N Wyble,"On 4/12/2011 8:00 PM, Outback Dingo wrote:
>
>
> On Tue, Apr 12, 2011 at 8:56 PM, Ben West <me at benwest.name 
> <mailto:me at benwest.name"
99,Commotion-dev, Quick Update,"Tue, 12 Apr 2011 21:21:39 -0400",-0400,Outback Dingo,"On Tue, Apr 12, 2011 at 8:58 PM, Charles N Wyble
<charles at knownelement.com>wrote:

>  On 4/12/2011 8:00 PM, Outback Dingo wrote:
>
>
>
> On Tue, Apr 12, 2011 at 8:56 PM, Ben West <me at benwest.name> wrote:
>
"
100,Commotion-dev, Quick Update,"Tue, 12 Apr 2011 20:43:24 -0500",-0500,Ben West,"Cool that N2N is in OpenWRT:
https://dev.openwrt.org/browser/packages/net/n2n
http://wiki.freifunk.net/N2n

Does N2N have a mechanism to limit latency?

On Tue, Apr 12, 2011 at 7:58 PM, Charles N Wyble
<charles at knownelement.com>wrote:

>  On 4/12/2011 8:00 PM, Outback Dingo wrote:
>
>
>
> On Tue, Apr 12, 2011 at 8:56 PM, Ben West <me at benwest.name> wrote:
>
"
101,Commotion-dev, Quick Update,"Tue, 12 Apr 2011 21:29:43 -0500",-0500,Charles N Wyble,"On 4/12/2011 8:21 PM, Outback Dingo wrote:
> On Tue,
>
>     Beat me to the punch on this. I agree N2N seems to have the
>     absolute lowest overhead of the vpn systems out there today.
>
>
> well... :P LOL

Curious as to what your response means? Do you have a system with lower 
overhead? Please share! (of course there is gre tunnels which
is probably the lowest).


"
102,Commotion-dev, Quick Update,"Tue, 12 Apr 2011 21:30:28 -0500",-0500,Charles N Wyble,"> Cool that N2N is in OpenWRT:
> https://dev.openwrt.org/browser/packages/net/n2n
> http://wiki.freifunk.net/N2n
>
> Does N2N have a mechanism to limit latency?

Can you expand on what you mean by this? Latency is the product of many 
different variables. :)

"
103,Commotion-dev, Quick Update,"Wed, 13 Apr 2011 09:20:59 +0200",+0200,L. Aaron Kaplan,"
On Apr 13, 2011, at 3:00 AM, Outback Dingo wrote:

> 
> 
> On Tue, Apr 12, 2011 at 8:56 PM, Ben West <me at benwest.name> wrote:
> 
> 
> On Thu, Apr 7, 2011 at 4:41 AM, Michael Rogers <m-- at gmx.com> wrote:
> 
> > Well, DOSing communication is generally pretty easy on Wi-Fi: just jam
> > it. Take a microwave oven, connect it to a strong reflector (Sat dish?) and
> > direct it at the mesh crowd ;-) Zap!
> > Very low tech. The obvious counter strategy is to simply be very close together.
> > Then the jammers signal is weaker than yours. A jammer always has to invest lots of
> > energy to jam a large area (signal strength_at_receiver = initial_strength * 1/distance^2)
> 
> Wow, I hadn't even thought about attacks against the physical layer! But
> jamming a large mesh would require a lot of resources, as you say,
> whereas by attacking the routing protocol you could potentially disable
> the whole mesh from a single point.
> 
> 
> Besides the microwave oven augmented with an aerial, XKCD also points out this fundamental flaw in any security scheme requiring human memory:
> http://xkcd.com/538/
> 
> On a more serious note, I am curious if folks on the list have experience using tinc for secure tunnels thru production meshes (= being used by folks not on a OLSR/OpenWRT/Commotion/etc listserv ;).

Ben, as you know at least some of the people here actually have production meshes!
Strange, I thought you were at the wireless summit and thus knew that actually our networks are production.

Anyway, to answer your question: yes, tinc was used for some time in some of the Freifunk networks in Germany. I don't know if they still use it and if not why they stopped.

a.

"
104,Commotion-dev," Commotion-dev Digest, Vol 3, Issue 5","Wed, 13 Apr 2011 12:11:21 -0500",-0500,Colten Jackson,"> RE:
> Anyway, to answer your question: yes, tinc was used for some time in some
> of the Freifunk networks in Germany. I don't know if they still use it and
> if not why they stopped.
>
> a.
>
>
I'd be very interested to hear more about this if you still have a contact,
how effective it was and how much effort it would take to replicate.
"
105,Commotion-dev, Quick Update,"Fri, 15 Apr 2011 01:54:28 -0500",-0500,Ben West,"Hi Aaron,

My apologies for the disparaging remark about production meshes.  Yes, I see
that the IS4CWN conference, this listserv (among others) means people are
actually using such networks for broadband access.

Also, yes, I did manage to get WPA-NONE working myself in IBSS mode under
OpenWRT + ath9k, although unfortunately not with 802.11n HT modes.  I
remember some confusion both on olsr-users listserv and OpenWRT forums about
whether WPA-NONE did actually work.
https://forum.openwrt.org/viewtopic.php?pid=133076#p133076

(Eating a heaping dish of crow right now ...)

On Wed, Apr 13, 2011 at 2:20 AM, L. Aaron Kaplan <aaron at lo-res.org> wrote:

>
> On Apr 13, 2011, at 3:00 AM, Outback Dingo wrote:
>
>
>
> On Tue, Apr 12, 2011 at 8:56 PM, Ben West <me at benwest.name> wrote:
>
"
106,Commotion-dev, Working Openwrt build for Buffalo,"Mon, 6 Jun 2011 22:09:31 +0000",+0000,Daniel Bryg,"Hi everyone,

Here are the promised details of the successful build i made on Friday
during the meeting in DC.

- I used Openwrt trunk r26910. It won't boot with the current trunk
code or the snapshots - r27096 doesn't work either despite being
reported by the router as a result of code merging.

- flashed following the usual tftp steps for Bufallo:
http://wiki.openwrt.org/toh/buffalo/wzr-hp-g300h

- you need the wzr-hp-g300nh image the for the older ""A0 D0"" model and
wzr-hp-g301nh for ""A2 F0B""

I'll be continuing these efforts later this week, maybe i'll set up a
code repo. Let me know if you need a link to binaries and whatnot.

It was great to meet some of you last week.

Cheers,
Daniel
"
107,Commotion-dev, Working Openwrt build for Buffalo,"Mon, 6 Jun 2011 22:09:31 +0000",+0000,Daniel Bryg,"Hi everyone,

Here are the promised details of the successful build i made on Friday
during the meeting in DC.

- I used Openwrt trunk r26910. It won't boot with the current trunk
code or the snapshots - r27096 doesn't work either despite being
reported by the router as a result of code merging.

- flashed following the usual tftp steps for Bufallo:
http://wiki.openwrt.org/toh/buffalo/wzr-hp-g300h

- you need the wzr-hp-g300nh image the for the older ""A0 D0"" model and
wzr-hp-g301nh for ""A2 F0B""

I'll be continuing these efforts later this week, maybe i'll set up a
code repo. Let me know if you need a link to binaries and whatnot.

It was great to meet some of you last week.

Cheers,
Daniel





"
108,Commotion-dev, commotion news,"Fri, 01 Jul 2011 15:53:09 -0400",-0400,Josh King,"Hey all,

I just wanted to update you on some of the things that have been going
on in Commotion-land, and get some discussion and development going
again on this list after a bit of an absence. Entirely my fault, I've
been travelling for work over much of the past month, and when not doing
that, things have been pretty crazy (as you may have seen in the media ;-)).

* We had a very successful codesprint at the beginning of June to more
officially kick-off the project, and had developers from a number of
different projects around the globe in attendence, including Guardian
Project, Funkfeuer, OpenBTS, Serval, several community networks, and
more (you can see the complete list on the project site). Myself and
Preston at OTI are still working on turning all of the notes from that
into wiki pages and milestones; let me know if you want to lend a hand.
Among other things, codesprinters managed to make what we think is the
first ever OpenBTS to Serval phonecall over mesh wireless!

* You may have seen all of the press fallout from the New York Times
article; we knew that the Times was publishing an article, but not when
or what it would say exactly. The whole idea of an Internet in a
Suitcase (a total misnomer) seems to have caught on, with everyone from
Al-Jazeera to BBC to NBC and more being interested. This has also
created waves of misinformation about the project which I've been doing
my best to dispell; it's not a black-ops project by secret government
agents creating surveillance hardware, it's an open-source software
integration effort to create a platform for free speech and
communication on the Internet.

* Incidentally, I did register commotionwireless.net, .org, and .com, as
well as internetinasuitcase.net and .org (someone else picked up .com).
I'll be pointing those domains at the project site for now.

* A team from OTI in cooperation with the Detroit Digital Justice
Coalition and Allied Media Projects deployed a test network running the
Commotion firmware in Detroit during the Allied Media Conference. It's
pretty barebones but functional and sharing Internet through part of the
Cass Corridor neighborhood.

* Finally, the new Iranian Minister of Intelligence has apparently
predicted the Commotion project and ""devised proper ways to combat
them."" I hope you find this as interesting and worrying and oddly
hilarious as I do ;-)

I'm continuing to touch base with people individually as we work on
documentation, and I'm planning on sending out a doodle to schedule a
skype call sometime with in the next week or so soon to discuss progress
and next steps. Please let me know if anyone is having any trouble
accessing the project site, or if you have any questions. For the people
in Champaign-Urbana, IL US, I will be out there in the middle of July
partly to do some server and wireless work so hopefully we can meet up!

-- 
Josh King
Technologist
Open Technology Initiative
New America Foundation

"
109,Commotion-dev, Working Openwrt build for Buffalo,"Sat, 2 Jul 2011 22:43:17 -0500",-0500,Ben West,"Hi All,

I just finally got a working instance of OpenWRT r26910 on the Buffalo
NFiniti, including the 802.11n radio.

Do note that Daniel is referring to the ""trunk"" branch of OpenWRT and not
the ""backfire"" branch.  The latter branch is apparently still missing
support for the newer g301nh chipset.

In particular, this is what I did to checkout / compile the revision of
OpenWRT mentioned, with luci and some other stuff enabled.

I'm also attaching my config for make menuconfig. (I.e unzip this file and
name it .config in the root of the OpenWRT repo, before running make world.)

svn co -r 26910 svn://svn.openwrt.org/openwrt/trunk/ ./trunk-r29610
cd trunk-r29610
cp feeds.conf.default feeds.conf
./scripts/feeds update -a
./scripts/feeds install -a -p luci
./scripts/feeds install -a -p luci-ssl
./scripts/feeds install bmon
#copy in .config file
make world V=99
#wait for several hours

I used the tftp method described in the wiki to flash the router. You may
have luck using the upgrade page provided with the stock DD-WRT firmware.

Finally, do note this version of OpenWRT appears to have everything at /
mounted read-only.  The writeable overlay is located at /overlay,
specifically at /overlay/etc.  If you have to copy a file from /etc over to
/overlay/etc, e.g. opkg.conf, you may need to have to reboot to get the
writeable file recognized.

On Mon, Jun 6, 2011 at 5:09 PM, Daniel Bryg <fermenthor at gmail.com> wrote:

> Hi everyone,
>
> Here are the promised details of the successful build i made on Friday
> during the meeting in DC.
>
> - I used Openwrt trunk r26910. It won't boot with the current trunk
> code or the snapshots - r27096 doesn't work either despite being
> reported by the router as a result of code merging.
>
> - flashed following the usual tftp steps for Bufallo:
> http://wiki.openwrt.org/toh/buffalo/wzr-hp-g300h
>
> - you need the wzr-hp-g300nh image the for the older ""A0 D0"" model and
> wzr-hp-g301nh for ""A2 F0B""
>
> I'll be continuing these efforts later this week, maybe i'll set up a
> code repo. Let me know if you need a link to binaries and whatnot.
>
> It was great to meet some of you last week.
>
> Cheers,
> Daniel
> _______________________________________________
> Commotion-dev mailing list
> Commotion-dev at lists.chambana.net
> http://lists.chambana.net/mailman/listinfo/commotion-dev
"
110,Commotion-dev, Working Openwrt build for Buffalo,"Sun, 3 Jul 2011 10:01:14 -0400",-0400,pablito,"Wow this is helpful!  For people not building their own, I also had luck
with a pre-built image as I mentioned on the riseup/crabgrass group:

    I managed to leave DC without the recipe for flashing the
    Buffalo router, so after some experimentation and reading,
    came to find that TFTPing a nightly build from the openwrt
    trunk(http://downloads.openwrt.org/snapshots/) worked. I
    used openwrt-ar71xx-generic-wzr-hp-g301nh-jffs2-tftp.bin as
    openwrt-ar71xx-generic-wzr-hp-g300nh-jffs2-tftp.bin didn?t work
    for me.

I'm not sure what the .config is for pre-built images, so very happy
Ben figured out something which works!

	-p

On Sat, Jul 02, 2011 at 10:43:17PM -0500, Ben West wrote:
> Hi All,
> 
> I just finally got a working instance of OpenWRT r26910 on the Buffalo
> NFiniti, including the 802.11n radio.
> 
> Do note that Daniel is referring to the ""trunk"" branch of OpenWRT and not
> the ""backfire"" branch.  The latter branch is apparently still missing
> support for the newer g301nh chipset.
> 
> In particular, this is what I did to checkout / compile the revision of
> OpenWRT mentioned, with luci and some other stuff enabled.
> 
> I'm also attaching my config for make menuconfig. (I.e unzip this file and
> name it .config in the root of the OpenWRT repo, before running make world.)
> 
> svn co -r 26910 svn://svn.openwrt.org/openwrt/trunk/ ./trunk-r29610
> cd trunk-r29610
> cp feeds.conf.default feeds.conf
> ./scripts/feeds update -a
> ./scripts/feeds install -a -p luci
> ./scripts/feeds install -a -p luci-ssl
> ./scripts/feeds install bmon
> #copy in .config file
> make world V=99
> #wait for several hours
> 
> I used the tftp method described in the wiki to flash the router. You may
> have luck using the upgrade page provided with the stock DD-WRT firmware.
> 
> Finally, do note this version of OpenWRT appears to have everything at /
> mounted read-only.  The writeable overlay is located at /overlay,
> specifically at /overlay/etc.  If you have to copy a file from /etc over to
> /overlay/etc, e.g. opkg.conf, you may need to have to reboot to get the
> writeable file recognized.
> 
> On Mon, Jun 6, 2011 at 5:09 PM, Daniel Bryg <fermenthor at gmail.com> wrote:
> 
> > Hi everyone,
> >
> > Here are the promised details of the successful build i made on Friday
> > during the meeting in DC.
> >
> > - I used Openwrt trunk r26910. It won't boot with the current trunk
> > code or the snapshots - r27096 doesn't work either despite being
> > reported by the router as a result of code merging.
> >
> > - flashed following the usual tftp steps for Bufallo:
> > http://wiki.openwrt.org/toh/buffalo/wzr-hp-g300h
> >
> > - you need the wzr-hp-g300nh image the for the older ""A0 D0"" model and
> > wzr-hp-g301nh for ""A2 F0B""
> >
> > I'll be continuing these efforts later this week, maybe i'll set up a
> > code repo. Let me know if you need a link to binaries and whatnot.
> >
> > It was great to meet some of you last week.
> >
> > Cheers,
> > Daniel
> > _______________________________________________
> > Commotion-dev mailing list
> > Commotion-dev at lists.chambana.net
> > http://lists.chambana.net/mailman/listinfo/commotion-dev
> >
> 
> 
> 
> -- 
> Ben West
> me at benwest.name


> _______________________________________________
> Commotion-dev mailing list
> Commotion-dev at lists.chambana.net
> http://lists.chambana.net/mailman/listinfo/commotion-dev


-- 
			-Paul Bame bame at riverrock.org
"
111,Commotion-dev, Working Openwrt build for Buffalo,"Tue, 05 Jul 2011 12:30:27 -0500",-0500,Brian Duggan,"Support for this router might be stabilizing. OpenWRT trunk r27437
worked for me this weekend, too.

Brian

On 7/3/11 9:01 AM, pablito wrote:
> Wow this is helpful!  For people not building their own, I also had
> luck with a pre-built image as I mentioned on the riseup/crabgrass
> group:
> 
> I managed to leave DC without the recipe for flashing the Buffalo
> router, so after some experimentation and reading, came to find that
> TFTPing a nightly build from the openwrt 
> trunk(http://downloads.openwrt.org/snapshots/) worked. I used
> openwrt-ar71xx-generic-wzr-hp-g301nh-jffs2-tftp.bin as 
> openwrt-ar71xx-generic-wzr-hp-g300nh-jffs2-tftp.bin didn?t work for
> me.
> 
> I'm not sure what the .config is for pre-built images, so very happy 
> Ben figured out something which works!
> 
> -p
> 
> On Sat, Jul 02, 2011 at 10:43:17PM -0500, Ben West wrote:
"
112,Commotion-dev, Working Openwrt build for Buffalo,"Wed, 6 Jul 2011 06:58:59 -0500",-0500,Ben West,"I just tried out the Buffalo router running r26910 on a Charter cable uplink
for WasabiNet, and sadly it wouldn't take a DHCP lease from the cable modem
(which I connected to eth1, aka blue WAN port).  Oddly enough, eth1 does get
its DHCP address fine if I attach it to a port on a DD-WRT router I have
sitting around, but not the cable modem.

Has anyone else had similar difficulties using their NFiniti with a wired
broadband connection that issues DHCP leases?  I don't have this problem
with the Mikrotik rb532a boards running Backfire rc4, when connected to a
Charter cable modem.

On Tue, Jul 5, 2011 at 12:30 PM, Brian Duggan <bcdugga at gmail.com> wrote:

> Support for this router might be stabilizing. OpenWRT trunk r27437
> worked for me this weekend, too.
>
> Brian
>
> On 7/3/11 9:01 AM, pablito wrote:
> > Wow this is helpful!  For people not building their own, I also had
> > luck with a pre-built image as I mentioned on the riseup/crabgrass
> > group:
> >
> > I managed to leave DC without the recipe for flashing the Buffalo
> > router, so after some experimentation and reading, came to find that
> > TFTPing a nightly build from the openwrt
> > trunk(http://downloads.openwrt.org/snapshots/) worked. I used
> > openwrt-ar71xx-generic-wzr-hp-g301nh-jffs2-tftp.bin as
> > openwrt-ar71xx-generic-wzr-hp-g300nh-jffs2-tftp.bin didn?t work for
> > me.
> >
> > I'm not sure what the .config is for pre-built images, so very happy
> > Ben figured out something which works!
> >
> > -p
> >
> > On Sat, Jul 02, 2011 at 10:43:17PM -0500, Ben West wrote:
> "
113,Commotion-dev, Working Openwrt build for Buffalo,"Wed, 06 Jul 2011 08:38:02 -0400",-0400,Josh King,"Hey Ben,

If you log-in to the router and manually run udhcpc on that port with a longer timeout (currently 3 tries/5 seconds, I believe), does it then get a lease? I'm not experienced with that particular modem, but I have had issues with DHCP leases on OpenWRT with other, similar hardware.
-- 
Josh King

""I am an Anarchist not because I believe Anarchism is the final goal, but because there is no such thing as a final goal."" -Rudolf Rocker

Ben West <me at benwest.name> wrote:

I just tried out the Buffalo router running r26910 on a Charter cable uplink for WasabiNet, and sadly it wouldn't take a DHCP lease from the cable modem (which I connected to eth1, aka blue WAN port).  Oddly enough, eth1 does get its DHCP address fine if I attach it to a port on a DD-WRT router I have sitting around, but not the cable modem.


Has anyone else had similar difficulties using their NFiniti with a wired broadband connection that issues DHCP leases?  I don't have this problem with the Mikrotik rb532a boards running Backfire rc4, when connected to a Charter cable modem.


On Tue, Jul 5, 2011 at 12:30 PM, Brian Duggan <bcdugga at gmail.com> wrote:

Support for this router might be stabilizing. OpenWRT trunk r27437
worked for me this weekend, too.

Brian


On 7/3/11 9:01 AM, pablito wrote:
> Wow this is helpful!  For people not building their own, I also had
> luck with a pre-built image as I mentioned on the riseup/crabgrass
> group:
>
> I managed to leave DC without the recipe for flashing the Buffalo
> router, so after some experimentation and reading, came to find that
> TFTPing a nightly build from the openwrt
> trunk(http://downloads.openwrt.org/snapshots/) worked. I used
> openwrt-ar71xx-generic-wzr-hp-g301nh-jffs2-tftp.bin as
> openwrt-ar71xx-generic-wzr-hp-g300nh-jffs2-tftp.bin didn?t work for
> me.
>
> I'm not sure what the .config is for pre-built images, so very happy
> Ben figured out something which works!
>
> -p
>
> On Sat, Jul 02, 2011 at 10:43:17PM -0500, Ben West wrote:
"
114,Commotion-dev, Working Openwrt build for Buffalo,"Wed, 06 Jul 2011 16:53:04 -0400",-0400,Daniel Bryg,"I don't if you've tried, but most of the time i have to power cycle
cable modems before connecting a device with a new MAC address.

Is this also a problem when you reboot the buffalo or have you only
tried plugging the network cable while the router is already on? We
could debug it with tcpdump.

Daniel


On 7/6/2011 7:58 AM, Ben West wrote:
> I just tried out the Buffalo router running r26910 on a Charter cable uplink
> for WasabiNet, and sadly it wouldn't take a DHCP lease from the cable modem
> (which I connected to eth1, aka blue WAN port).  Oddly enough, eth1 does get
> its DHCP address fine if I attach it to a port on a DD-WRT router I have
> sitting around, but not the cable modem.
> 
> Has anyone else had similar difficulties using their NFiniti with a wired
> broadband connection that issues DHCP leases?  I don't have this problem
> with the Mikrotik rb532a boards running Backfire rc4, when connected to a
> Charter cable modem.
> 
> On Tue, Jul 5, 2011 at 12:30 PM, Brian Duggan <bcdugga at gmail.com> wrote:
> 
"
115,Commotion-dev, Working Openwrt build for Buffalo,"Wed, 6 Jul 2011 15:55:21 -0500",-0500,Ben West,"Hi Daniel,

Yes, I did learn (the hard way, naturally) that the cable modem wants to be
power cycled when I plug a different box into it.  I will try the other
suggestion to increase DHCP timeout.

On Wed, Jul 6, 2011 at 3:53 PM, Daniel Bryg <daniel at accessnow.org> wrote:

> I don't if you've tried, but most of the time i have to power cycle
> cable modems before connecting a device with a new MAC address.
>
> Is this also a problem when you reboot the buffalo or have you only
> tried plugging the network cable while the router is already on? We
> could debug it with tcpdump.
>
> Daniel
>
>
> On 7/6/2011 7:58 AM, Ben West wrote:
> > I just tried out the Buffalo router running r26910 on a Charter cable
> uplink
> > for WasabiNet, and sadly it wouldn't take a DHCP lease from the cable
> modem
> > (which I connected to eth1, aka blue WAN port).  Oddly enough, eth1 does
> get
> > its DHCP address fine if I attach it to a port on a DD-WRT router I have
> > sitting around, but not the cable modem.
> >
> > Has anyone else had similar difficulties using their NFiniti with a wired
> > broadband connection that issues DHCP leases?  I don't have this problem
> > with the Mikrotik rb532a boards running Backfire rc4, when connected to a
> > Charter cable modem.
> >
> > On Tue, Jul 5, 2011 at 12:30 PM, Brian Duggan <bcdugga at gmail.com> wrote:
> >
> "
116,Commotion-dev, Working Openwrt build for Buffalo,"Wed, 06 Jul 2011 16:59:57 -0400",-0400,Daniel Bryg,"I'm also confirming that r27467 works with the older A0D0 version
Bufallo, too.
D

On 7/5/2011 1:30 PM, Brian Duggan wrote:
> Support for this router might be stabilizing. OpenWRT trunk r27437
> worked for me this weekend, too.
> 
> Brian
> 
> On 7/3/11 9:01 AM, pablito wrote:
"
117,Commotion-dev, Working Openwrt build for Buffalo,"Mon, 18 Jul 2011 11:15:56 -0500",-0500,Ben West,"It looks like you can achieve the same results, tho without having to run
udhcpc manually, by editng this set up file:

/lib/config/config.sh:

setup_interface() {

...

                        $DEBUG eval udhcpc -t 0 -i ""$iface"" \

                                ${ipaddr:+-r $ipaddr} \

                                ${hostname:+-H $hostname} \

                                ${clientid:+-c $clientid} \

                                ${vendorid:+-V $vendorid} \

                                -b -p ""$pidfile"" $broadcast \

                                ${dhcpopts:- -O rootpath -R &}

Here you see OpenWRT giving hard-coded options to udhcpc for a 3second
timeout and 0 retry packets.  I'm curious why these are hard-coded.

root at openwrt:# udhcpc -h
udhcpc: option requires an argument -- h
BusyBox v1.15.3 (2010-04-06 05:58:52 CEST) multi-call binary

Usage: udhcpc [-Cfbnqtvo] [-c CID] [-V VCLS] [-H HOSTNAME] [-i INTERFACE]
[-p pidfile] [-r IP] [-s script] [-O dhcp-option]...

-V,--vendorclass=CLASSID Vendor class identifier
-i,--interface=INTERFACE Interface to use (default eth0)
-H,-h,--hostname=HOSTNAME Client hostname
-c,--clientid=CLIENTID Client identifier
-C,--clientid-none Suppress default client identifier
-p,--pidfile=file Create pidfile
-r,--request=IP IP address to request
-s,--script=file Run file at DHCP events (default
/usr/share/udhcpc/default.script)
-t,--retries=N Send up to N request packets
-T,--timeout=N Try to get a lease for N seconds (default 3)
-A,--tryagain=N Wait N seconds (default 20) after failure
-O,--request-option=OPT Request DHCP option OPT (cumulative)
-o,--no-default-options Do not request any options (unless -O is also given)
-f,--foreground Run in foreground
-b,--background Background if lease is not immediately obtained
-S,--syslog Log to syslog too
-n,--now Exit with failure if lease is not immediately obtained
-q,--quit Quit after obtaining lease
-R,--release Release IP on quit


On Wed, Jul 6, 2011 at 7:38 AM, Josh King <joshuaheretic at gmail.com> wrote:

> ** Hey Ben,
>
> If you log-in to the router and manually run udhcpc on that port with a
> longer timeout (currently 3 tries/5 seconds, I believe), does it then get a
> lease? I'm not experienced with that particular modem, but I have had issues
> with DHCP leases on OpenWRT with other, similar hardware.
> --
> Josh King
>
> ""I am an Anarchist not because I believe Anarchism is the final goal, but
> because there is no such thing as a final goal."" -Rudolf Rocker
>
>
> Ben West <me at benwest.name> wrote:
"
118,Commotion-dev, New domains,"Wed, 27 Jul 2011 09:07:16 -0400",-0400,Josh King,"Hey all,

Just another quick note, I registered commotionwireless.{net,com,org}
and internetinasuitcase.{net,org} (.com was taken already). They are
currently set up to redirect to the Commotion project page.
-- 
Josh King
Technologist
Open Technology Initiative
New America Foundation

"
119,Commotion-dev, Draft Roadmap,"Wed, 27 Jul 2011 09:07:48 -0400",-0400,Josh King,"Hey everyone,

I have published a draft roadmap for the project at:

http://tech.chambana.net/projects/commotion/wiki/roadmap

This is rough so far (and software focused, still working on adding in
more documentation and outreach tasks), but I think serves to give an
overall view of how the project is laid out and where it's heading.
Recognizing that the project is made up of a large number of different
pieces on different platforms, I've made a few structural decisions as
far as the roadmap (and a coincident refactoring of the website):

* The project has been re-structured into a number of subprojects, as it
didn't make sense to me to put a large number of projects with
substantially different codebases into one git repository. I realize
that if we end up having a large shared codebase at the end then we may
want to re-integrate, or create a shared repository drawn on by all
sub-projects. Other people may have other takes on this. In any event,
there are subprojects ""Commotion-Openwrt"", ""Commotion-Android"",
""Commotion-Windows"", etc. I hope that this will also help to clarify
confusion between Commotion the overarching project and Commotion the
OpenWRT embedded firmware (now Commotion-OpenWRT). All issues from
subprojects are visible in the existing ""Commotion"" superproject.

* The roadmap is structured into a number of 'releases.' The first one
is a pre-release at the end of October, which will serve simply to pull
together all of the disparate software elements in their current form,
as well as give me some time to work on some features for the
Commotion-OpenWRT firmware to bring it up to feature parity with some
other firmwares out there in order to make it more useful to the
community networks we're working with to deploy and test it. Past that,
there are 4 ""Developer Releases"" which are split up in roughly 2-month
increments through the year, with a ""Finished Release"" next summer. I
structure it in this way to recognize that we need some general
milestones to hit, but that each piece of component software has its own
versioning and there's no need to try and change that, and the DR1-4
naming scheme is not likely to strongly conflict with any other
versioning scheme in use. Feedback around this is welcome, and the
timeline is likely to change slightly as the release date as required by
OTI's Internet Freedom grant award is predicated on when we actually get
the check from the US State Department, which is not yet.

I'm currently still putting items from the roadmap into the issue
tracker as it makes sense, and adding users from the existing project
into the subprojects (Redmine doesn't automatically migrate them).
People should feel free to add to the roadmap for now, just ping the
list when you do so to help me keep track of what's changed.

-- 
Josh King
Technologist
Open Technology Initiative
New America Foundation

"
120,Commotion-dev, Your Chambana.net Tech Projects password,"Wed, 20 Jul 2011 07:22:36 -0400",-0400,Kusay Rukieh,"Good Day:
My name is kusay rukieh I work in academia.  I am originally from the middle
east (syria).  I stumbled upon your projects when I was searching
for wireless sensor network.  The reason I am looking for a technology
to circumvent  the shutting down of wireless network access by oppressive
regimes.  I would like to lend my help an expertise.  can you please let me
know how can I help.  One of the brutal tactics that is used by these
regimes before attacking a city is to cutoff all type of communication.  I
would like to find another solution that is easy to deploy and based
on wireless meshed networks.  I would like to expose the atrocious crimes
which are committed against unarmed civilians.
thanks,
Kusay

On Wed, Jul 20, 2011 at 6:40 AM, <commotion-dev at lists.chambana.net> wrote:
>
> Login: *krukieh at my.fit.edu*
> "
121,Commotion-dev, Draft Roadmap,"Fri, 29 Jul 2011 17:01:05 -0500",-0500,Charles N Wyble,"

On 07/27/2011 08:07 AM, Josh King wrote:
> Hey everyone,
>
> I have published a draft roadmap for the project at:
>
> http://tech.chambana.net/projects/commotion/wiki/roadmap
>
>
>
> * The roadmap is structured into a number of 'releases.' The first one
> is a pre-release at the end of October, which will serve simply to pull
> together all of the disparate software elements in their current form,
> as well as give me some time to work on some features for the
> Commotion-OpenWRT firmware to bring it up to feature parity with some
> other firmwares out there in order to make it more useful to the
> community networks we're working with to deploy and test it. Past that,
> there are 4 ""Developer Releases"" which are split up in roughly 2-month
> increments through the year, with a ""Finished Release"" next summer. I
> structure it in this way to recognize that we need some general
> milestones to hit, but that each piece of component software has its own
> versioning and there's no need to try and change that, and the DR1-4
> naming scheme is not likely to strongly conflict with any other
> versioning scheme in use. Feedback around this is welcome, and the
> timeline is likely to change slightly as the release date as required by
> OTI's Internet Freedom grant award is predicated on when we actually get
> the check from the US State Department, which is not yet.


Why don't you guys just work with the villagetelco project? The SCEN
firmware. They are light years
ahead of everyone else in mesh. They have numerous production
deployments. I think it's better to
utilize the VT SCEN firmware and modify to suit, as opposed to starting
from scratch.

This is the approach being taken by the Free Network Foundation (of
which I'm a founder). We are moving
very close to shipping FreedomNode, which is a combination of the ideals
of FreedomBox/Byzantium/Commotion.

We are hoping to have our full reference implementation completed this
weekend and shipping a completed package
by end of August.

Everyone else seems light years away from shipping. *shrugs* We will all
see who delivers first I guess. :)



"
122,Commotion-dev, Draft Roadmap,"Fri, 29 Jul 2011 20:40:34 -0400",-0400,Hans-Christoph Steiner,"
On Jul 29, 2011, at 6:01 PM, Charles N Wyble wrote:

>
>
> On 07/27/2011 08:07 AM, Josh King wrote:
"
123,Commotion-dev, Draft Roadmap,"Fri, 29 Jul 2011 20:37:07 -0400",-0400,Hans-Christoph Steiner,"
On Jul 27, 2011, at 9:07 AM, Josh King wrote:

> Hey everyone,
>
> I have published a draft roadmap for the project at:
>
> http://tech.chambana.net/projects/commotion/wiki/roadmap
>
> This is rough so far (and software focused, still working on adding in
> more documentation and outreach tasks), but I think serves to give an
> overall view of how the project is laid out and where it's heading.
> Recognizing that the project is made up of a large number of different
> pieces on different platforms, I've made a few structural decisions as
> far as the roadmap (and a coincident refactoring of the website):

Its good to see a overview of the time and the chunks.  I just noticed  
that you have listed ""native mesh network configuration GUI"" for  
Windows and Mac.  That sounds like the best plan in the long run, but  
perhaps it makes sense to have a cross-platform Java or something GUI  
to get the ball rolling.  I'm not sure yet which approach is best in  
the time frame.  Writing native apps for each platform will be more  
work, but I'm a big believer in having things feel seamlessly  
integrated, and often native apps are the most effective approach.

> * The project has been re-structured into a number of subprojects,  
> as it
> didn't make sense to me to put a large number of projects with
> substantially different codebases into one git repository. I realize
> that if we end up having a large shared codebase at the end then we  
> may
> want to re-integrate, or create a shared repository drawn on by all
> sub-projects. Other people may have other takes on this. In any event,
> there are subprojects ""Commotion-Openwrt"", ""Commotion-Android"",
> ""Commotion-Windows"", etc. I hope that this will also help to clarify
> confusion between Commotion the overarching project and Commotion the
> OpenWRT embedded firmware (now Commotion-OpenWRT). All issues from
> subprojects are visible in the existing ""Commotion"" superproject.

I agree it makes sense to split up into multiple git repos.  The most  
useful rule of thumb I've seen for where to make the dividing lines is  
thinking about it in terms build automation: any commit to a repo will  
trigger a build, is that build going to be relevant to the commit?   
One example we have is an app suite for J2ME, Blackberry and Android.   
All Java, all the same goals and features, currently all on git.  The  
J2ME and Blackberry code ends up being very much interwoven, while the  
Android code ended up being unrelated.  The next step might be to  
split out the common Java code into a library, then make separate git  
repos for J2ME, Blackberry, and Android.

The Android OS is also a good example, it is made up of many many git  
repos. That reminds me of another rule of thumb for where to set the  
dividing lines for git repos:  ideally, it should be possible to have  
the git commit messages make sense without having to add the context  
to the message itself.

.hc

> * The roadmap is structured into a number of 'releases.' The first one
> is a pre-release at the end of October, which will serve simply to  
> pull
> together all of the disparate software elements in their current form,
> as well as give me some time to work on some features for the
> Commotion-OpenWRT firmware to bring it up to feature parity with some
> other firmwares out there in order to make it more useful to the
> community networks we're working with to deploy and test it. Past  
> that,
> there are 4 ""Developer Releases"" which are split up in roughly 2-month
> increments through the year, with a ""Finished Release"" next summer. I
> structure it in this way to recognize that we need some general
> milestones to hit, but that each piece of component software has its  
> own
> versioning and there's no need to try and change that, and the DR1-4
> naming scheme is not likely to strongly conflict with any other
> versioning scheme in use. Feedback around this is welcome, and the
> timeline is likely to change slightly as the release date as  
> required by
> OTI's Internet Freedom grant award is predicated on when we actually  
> get
> the check from the US State Department, which is not yet.
>
> I'm currently still putting items from the roadmap into the issue
> tracker as it makes sense, and adding users from the existing project
> into the subprojects (Redmine doesn't automatically migrate them).
> People should feel free to add to the roadmap for now, just ping the
> list when you do so to help me keep track of what's changed.







"
124,Commotion-dev, Your Chambana.net Tech Projects password,"Fri, 29 Jul 2011 21:04:04 -0400",-0400,Hans-Christoph Steiner,"
Hey Kusay,

The Commotion project is just getting rolling with a big development  
push over the next year or two.  You can see a rough roadmap here:

http://tech.chambana.net/projects/commotion/wiki/roadmap

I'm also just getting started in the project. There are many ways to  
contribute, from coding to testing to getting the word out to places  
like Syria or anywhere this can be useful.  Its up to what your  
interests, skills, and availability are.

.hc

On Jul 20, 2011, at 7:22 AM, Kusay Rukieh wrote:

> Good Day:
> My name is kusay rukieh I work in academia.  I am originally from  
> the middle east (syria).  I stumbled upon your projects when I was  
> searching for wireless sensor network.  The reason I am looking for  
> a technology to circumvent  the shutting down of wireless network  
> access by oppressive regimes.  I would like to lend my help an  
> expertise.  can you please let me know how can I help.  One of the  
> brutal tactics that is used by these regimes before attacking a city  
> is to cutoff all type of communication.  I would like to find  
> another solution that is easy to deploy and based on wireless meshed  
> networks.  I would like to expose the atrocious crimes which are  
> committed against unarmed civilians.
> thanks,
> Kusay
>
> On Wed, Jul 20, 2011 at 6:40 AM, <commotion-dev at lists.chambana.net>  
> wrote:
> Login: krukieh at my.fit.edu
>
> You have received this notification because you have either  
> subscribed to it, or are involved in it.
> To change your notification preferences, please click here: http://tech.chambana.net/my/account
>
>
> _______________________________________________
> Commotion-dev mailing list
> Commotion-dev at lists.chambana.net
> http://lists.chambana.net/mailman/listinfo/commotion-dev





"
125,Commotion-dev, Your Chambana.net Tech Projects password,"Sat, 30 Jul 2011 17:21:54 -0400",-0400,Kusay Rukieh,"Good  Day Hans:
Thank you so much for your response.  My area is testing.  I would like to
get Beta-releases, so I can test these out, and report the bugs, and
enhancements.  Please let me know how to do so.  I would like to conduct a
sample deployment and see how successful it is.
Thanks,
Kusay

On Fri, Jul 29, 2011 at 9:04 PM, Hans-Christoph Steiner <hans at at.or.at>wrote:

>
> Hey Kusay,
>
> The Commotion project is just getting rolling with a big development push
> over the next year or two.  You can see a rough roadmap here:
>
> http://tech.chambana.net/projects/commotion/wiki/roadmap
>
> I'm also just getting started in the project. There are many ways to
> contribute, from coding to testing to getting the word out to places like
> Syria or anywhere this can be useful.  Its up to what your interests,
> skills, and availability are.
>
> .hc
>
> On Jul 20, 2011, at 7:22 AM, Kusay Rukieh wrote:
>
> Good Day:
> My name is kusay rukieh I work in academia.  I am originally from the
> middle east (syria).  I stumbled upon your projects when I was searching
> for wireless sensor network.  The reason I am looking for a technology
> to circumvent  the shutting down of wireless network access by oppressive
> regimes.  I would like to lend my help an expertise.  can you please let me
> know how can I help.  One of the brutal tactics that is used by these
> regimes before attacking a city is to cutoff all type of communication.  I
> would like to find another solution that is easy to deploy and based
> on wireless meshed networks.  I would like to expose the atrocious crimes
> which are committed against unarmed civilians.
> thanks,
> Kusay
>
> On Wed, Jul 20, 2011 at 6:40 AM, <commotion-dev at lists.chambana.net> wrote:
"
126,Commotion-dev, commotion news,"Fri, 01 Jul 2011 15:53:09 -0400",-0400,Josh King,"Hey all,

I just wanted to update you on some of the things that have been going
on in Commotion-land, and get some discussion and development going
again on this list after a bit of an absence. Entirely my fault, I've
been travelling for work over much of the past month, and when not doing
that, things have been pretty crazy (as you may have seen in the media ;-)).

* We had a very successful codesprint at the beginning of June to more
officially kick-off the project, and had developers from a number of
different projects around the globe in attendence, including Guardian
Project, Funkfeuer, OpenBTS, Serval, several community networks, and
more (you can see the complete list on the project site). Myself and
Preston at OTI are still working on turning all of the notes from that
into wiki pages and milestones; let me know if you want to lend a hand.
Among other things, codesprinters managed to make what we think is the
first ever OpenBTS to Serval phonecall over mesh wireless!

* You may have seen all of the press fallout from the New York Times
article; we knew that the Times was publishing an article, but not when
or what it would say exactly. The whole idea of an Internet in a
Suitcase (a total misnomer) seems to have caught on, with everyone from
Al-Jazeera to BBC to NBC and more being interested. This has also
created waves of misinformation about the project which I've been doing
my best to dispell; it's not a black-ops project by secret government
agents creating surveillance hardware, it's an open-source software
integration effort to create a platform for free speech and
communication on the Internet.

* Incidentally, I did register commotionwireless.net, .org, and .com, as
well as internetinasuitcase.net and .org (someone else picked up .com).
I'll be pointing those domains at the project site for now.

* A team from OTI in cooperation with the Detroit Digital Justice
Coalition and Allied Media Projects deployed a test network running the
Commotion firmware in Detroit during the Allied Media Conference. It's
pretty barebones but functional and sharing Internet through part of the
Cass Corridor neighborhood.

* Finally, the new Iranian Minister of Intelligence has apparently
predicted the Commotion project and ""devised proper ways to combat
them."" I hope you find this as interesting and worrying and oddly
hilarious as I do ;-)

I'm continuing to touch base with people individually as we work on
documentation, and I'm planning on sending out a doodle to schedule a
skype call sometime with in the next week or so soon to discuss progress
and next steps. Please let me know if anyone is having any trouble
accessing the project site, or if you have any questions. For the people
in Champaign-Urbana, IL US, I will be out there in the middle of July
partly to do some server and wireless work so hopefully we can meet up!

-- 
Josh King
Technologist
Open Technology Initiative
New America Foundation

"
127,Commotion-dev, Working Openwrt build for Buffalo,"Sat, 2 Jul 2011 22:43:17 -0500",-0500,Ben West,"Hi All,

I just finally got a working instance of OpenWRT r26910 on the Buffalo
NFiniti, including the 802.11n radio.

Do note that Daniel is referring to the ""trunk"" branch of OpenWRT and not
the ""backfire"" branch.  The latter branch is apparently still missing
support for the newer g301nh chipset.

In particular, this is what I did to checkout / compile the revision of
OpenWRT mentioned, with luci and some other stuff enabled.

I'm also attaching my config for make menuconfig. (I.e unzip this file and
name it .config in the root of the OpenWRT repo, before running make world.)

svn co -r 26910 svn://svn.openwrt.org/openwrt/trunk/ ./trunk-r29610
cd trunk-r29610
cp feeds.conf.default feeds.conf
./scripts/feeds update -a
./scripts/feeds install -a -p luci
./scripts/feeds install -a -p luci-ssl
./scripts/feeds install bmon
#copy in .config file
make world V=99
#wait for several hours

I used the tftp method described in the wiki to flash the router. You may
have luck using the upgrade page provided with the stock DD-WRT firmware.

Finally, do note this version of OpenWRT appears to have everything at /
mounted read-only.  The writeable overlay is located at /overlay,
specifically at /overlay/etc.  If you have to copy a file from /etc over to
/overlay/etc, e.g. opkg.conf, you may need to have to reboot to get the
writeable file recognized.

On Mon, Jun 6, 2011 at 5:09 PM, Daniel Bryg <fermenthor at gmail.com> wrote:

> Hi everyone,
>
> Here are the promised details of the successful build i made on Friday
> during the meeting in DC.
>
> - I used Openwrt trunk r26910. It won't boot with the current trunk
> code or the snapshots - r27096 doesn't work either despite being
> reported by the router as a result of code merging.
>
> - flashed following the usual tftp steps for Bufallo:
> http://wiki.openwrt.org/toh/buffalo/wzr-hp-g300h
>
> - you need the wzr-hp-g300nh image the for the older ""A0 D0"" model and
> wzr-hp-g301nh for ""A2 F0B""
>
> I'll be continuing these efforts later this week, maybe i'll set up a
> code repo. Let me know if you need a link to binaries and whatnot.
>
> It was great to meet some of you last week.
>
> Cheers,
> Daniel
> _______________________________________________
> Commotion-dev mailing list
> Commotion-dev at lists.chambana.net
> http://lists.chambana.net/mailman/listinfo/commotion-dev
"
128,Commotion-dev, Working Openwrt build for Buffalo,"Sun, 3 Jul 2011 10:01:14 -0400",-0400,pablito,"Wow this is helpful!  For people not building their own, I also had luck
with a pre-built image as I mentioned on the riseup/crabgrass group:

    I managed to leave DC without the recipe for flashing the
    Buffalo router, so after some experimentation and reading,
    came to find that TFTPing a nightly build from the openwrt
    trunk(http://downloads.openwrt.org/snapshots/) worked. I
    used openwrt-ar71xx-generic-wzr-hp-g301nh-jffs2-tftp.bin as
    openwrt-ar71xx-generic-wzr-hp-g300nh-jffs2-tftp.bin didn?t work
    for me.

I'm not sure what the .config is for pre-built images, so very happy
Ben figured out something which works!

	-p

On Sat, Jul 02, 2011 at 10:43:17PM -0500, Ben West wrote:
> Hi All,
> 
> I just finally got a working instance of OpenWRT r26910 on the Buffalo
> NFiniti, including the 802.11n radio.
> 
> Do note that Daniel is referring to the ""trunk"" branch of OpenWRT and not
> the ""backfire"" branch.  The latter branch is apparently still missing
> support for the newer g301nh chipset.
> 
> In particular, this is what I did to checkout / compile the revision of
> OpenWRT mentioned, with luci and some other stuff enabled.
> 
> I'm also attaching my config for make menuconfig. (I.e unzip this file and
> name it .config in the root of the OpenWRT repo, before running make world.)
> 
> svn co -r 26910 svn://svn.openwrt.org/openwrt/trunk/ ./trunk-r29610
> cd trunk-r29610
> cp feeds.conf.default feeds.conf
> ./scripts/feeds update -a
> ./scripts/feeds install -a -p luci
> ./scripts/feeds install -a -p luci-ssl
> ./scripts/feeds install bmon
> #copy in .config file
> make world V=99
> #wait for several hours
> 
> I used the tftp method described in the wiki to flash the router. You may
> have luck using the upgrade page provided with the stock DD-WRT firmware.
> 
> Finally, do note this version of OpenWRT appears to have everything at /
> mounted read-only.  The writeable overlay is located at /overlay,
> specifically at /overlay/etc.  If you have to copy a file from /etc over to
> /overlay/etc, e.g. opkg.conf, you may need to have to reboot to get the
> writeable file recognized.
> 
> On Mon, Jun 6, 2011 at 5:09 PM, Daniel Bryg <fermenthor at gmail.com> wrote:
> 
> > Hi everyone,
> >
> > Here are the promised details of the successful build i made on Friday
> > during the meeting in DC.
> >
> > - I used Openwrt trunk r26910. It won't boot with the current trunk
> > code or the snapshots - r27096 doesn't work either despite being
> > reported by the router as a result of code merging.
> >
> > - flashed following the usual tftp steps for Bufallo:
> > http://wiki.openwrt.org/toh/buffalo/wzr-hp-g300h
> >
> > - you need the wzr-hp-g300nh image the for the older ""A0 D0"" model and
> > wzr-hp-g301nh for ""A2 F0B""
> >
> > I'll be continuing these efforts later this week, maybe i'll set up a
> > code repo. Let me know if you need a link to binaries and whatnot.
> >
> > It was great to meet some of you last week.
> >
> > Cheers,
> > Daniel
> > _______________________________________________
> > Commotion-dev mailing list
> > Commotion-dev at lists.chambana.net
> > http://lists.chambana.net/mailman/listinfo/commotion-dev
> >
> 
> 
> 
> -- 
> Ben West
> me at benwest.name


> _______________________________________________
> Commotion-dev mailing list
> Commotion-dev at lists.chambana.net
> http://lists.chambana.net/mailman/listinfo/commotion-dev


-- 
			-Paul Bame bame at riverrock.org
"
129,Commotion-dev, Working Openwrt build for Buffalo,"Tue, 05 Jul 2011 12:30:27 -0500",-0500,Brian Duggan,"Support for this router might be stabilizing. OpenWRT trunk r27437
worked for me this weekend, too.

Brian

On 7/3/11 9:01 AM, pablito wrote:
> Wow this is helpful!  For people not building their own, I also had
> luck with a pre-built image as I mentioned on the riseup/crabgrass
> group:
> 
> I managed to leave DC without the recipe for flashing the Buffalo
> router, so after some experimentation and reading, came to find that
> TFTPing a nightly build from the openwrt 
> trunk(http://downloads.openwrt.org/snapshots/) worked. I used
> openwrt-ar71xx-generic-wzr-hp-g301nh-jffs2-tftp.bin as 
> openwrt-ar71xx-generic-wzr-hp-g300nh-jffs2-tftp.bin didn?t work for
> me.
> 
> I'm not sure what the .config is for pre-built images, so very happy 
> Ben figured out something which works!
> 
> -p
> 
> On Sat, Jul 02, 2011 at 10:43:17PM -0500, Ben West wrote:
"
130,Commotion-dev, Working Openwrt build for Buffalo,"Wed, 6 Jul 2011 06:58:59 -0500",-0500,Ben West,"I just tried out the Buffalo router running r26910 on a Charter cable uplink
for WasabiNet, and sadly it wouldn't take a DHCP lease from the cable modem
(which I connected to eth1, aka blue WAN port).  Oddly enough, eth1 does get
its DHCP address fine if I attach it to a port on a DD-WRT router I have
sitting around, but not the cable modem.

Has anyone else had similar difficulties using their NFiniti with a wired
broadband connection that issues DHCP leases?  I don't have this problem
with the Mikrotik rb532a boards running Backfire rc4, when connected to a
Charter cable modem.

On Tue, Jul 5, 2011 at 12:30 PM, Brian Duggan <bcdugga at gmail.com> wrote:

> Support for this router might be stabilizing. OpenWRT trunk r27437
> worked for me this weekend, too.
>
> Brian
>
> On 7/3/11 9:01 AM, pablito wrote:
> > Wow this is helpful!  For people not building their own, I also had
> > luck with a pre-built image as I mentioned on the riseup/crabgrass
> > group:
> >
> > I managed to leave DC without the recipe for flashing the Buffalo
> > router, so after some experimentation and reading, came to find that
> > TFTPing a nightly build from the openwrt
> > trunk(http://downloads.openwrt.org/snapshots/) worked. I used
> > openwrt-ar71xx-generic-wzr-hp-g301nh-jffs2-tftp.bin as
> > openwrt-ar71xx-generic-wzr-hp-g300nh-jffs2-tftp.bin didn?t work for
> > me.
> >
> > I'm not sure what the .config is for pre-built images, so very happy
> > Ben figured out something which works!
> >
> > -p
> >
> > On Sat, Jul 02, 2011 at 10:43:17PM -0500, Ben West wrote:
> "
131,Commotion-dev, Working Openwrt build for Buffalo,"Wed, 06 Jul 2011 08:38:02 -0400",-0400,Josh King,"Hey Ben,

If you log-in to the router and manually run udhcpc on that port with a longer timeout (currently 3 tries/5 seconds, I believe), does it then get a lease? I'm not experienced with that particular modem, but I have had issues with DHCP leases on OpenWRT with other, similar hardware.
-- 
Josh King

""I am an Anarchist not because I believe Anarchism is the final goal, but because there is no such thing as a final goal."" -Rudolf Rocker

Ben West <me at benwest.name> wrote:

I just tried out the Buffalo router running r26910 on a Charter cable uplink for WasabiNet, and sadly it wouldn't take a DHCP lease from the cable modem (which I connected to eth1, aka blue WAN port).  Oddly enough, eth1 does get its DHCP address fine if I attach it to a port on a DD-WRT router I have sitting around, but not the cable modem.


Has anyone else had similar difficulties using their NFiniti with a wired broadband connection that issues DHCP leases?  I don't have this problem with the Mikrotik rb532a boards running Backfire rc4, when connected to a Charter cable modem.


On Tue, Jul 5, 2011 at 12:30 PM, Brian Duggan <bcdugga at gmail.com> wrote:

Support for this router might be stabilizing. OpenWRT trunk r27437
worked for me this weekend, too.

Brian


On 7/3/11 9:01 AM, pablito wrote:
> Wow this is helpful!  For people not building their own, I also had
> luck with a pre-built image as I mentioned on the riseup/crabgrass
> group:
>
> I managed to leave DC without the recipe for flashing the Buffalo
> router, so after some experimentation and reading, came to find that
> TFTPing a nightly build from the openwrt
> trunk(http://downloads.openwrt.org/snapshots/) worked. I used
> openwrt-ar71xx-generic-wzr-hp-g301nh-jffs2-tftp.bin as
> openwrt-ar71xx-generic-wzr-hp-g300nh-jffs2-tftp.bin didn?t work for
> me.
>
> I'm not sure what the .config is for pre-built images, so very happy
> Ben figured out something which works!
>
> -p
>
> On Sat, Jul 02, 2011 at 10:43:17PM -0500, Ben West wrote:
"
132,Commotion-dev, Working Openwrt build for Buffalo,"Wed, 06 Jul 2011 16:53:04 -0400",-0400,Daniel Bryg,"I don't if you've tried, but most of the time i have to power cycle
cable modems before connecting a device with a new MAC address.

Is this also a problem when you reboot the buffalo or have you only
tried plugging the network cable while the router is already on? We
could debug it with tcpdump.

Daniel


On 7/6/2011 7:58 AM, Ben West wrote:
> I just tried out the Buffalo router running r26910 on a Charter cable uplink
> for WasabiNet, and sadly it wouldn't take a DHCP lease from the cable modem
> (which I connected to eth1, aka blue WAN port).  Oddly enough, eth1 does get
> its DHCP address fine if I attach it to a port on a DD-WRT router I have
> sitting around, but not the cable modem.
> 
> Has anyone else had similar difficulties using their NFiniti with a wired
> broadband connection that issues DHCP leases?  I don't have this problem
> with the Mikrotik rb532a boards running Backfire rc4, when connected to a
> Charter cable modem.
> 
> On Tue, Jul 5, 2011 at 12:30 PM, Brian Duggan <bcdugga at gmail.com> wrote:
> 
"
133,Commotion-dev, Working Openwrt build for Buffalo,"Wed, 6 Jul 2011 15:55:21 -0500",-0500,Ben West,"Hi Daniel,

Yes, I did learn (the hard way, naturally) that the cable modem wants to be
power cycled when I plug a different box into it.  I will try the other
suggestion to increase DHCP timeout.

On Wed, Jul 6, 2011 at 3:53 PM, Daniel Bryg <daniel at accessnow.org> wrote:

> I don't if you've tried, but most of the time i have to power cycle
> cable modems before connecting a device with a new MAC address.
>
> Is this also a problem when you reboot the buffalo or have you only
> tried plugging the network cable while the router is already on? We
> could debug it with tcpdump.
>
> Daniel
>
>
> On 7/6/2011 7:58 AM, Ben West wrote:
> > I just tried out the Buffalo router running r26910 on a Charter cable
> uplink
> > for WasabiNet, and sadly it wouldn't take a DHCP lease from the cable
> modem
> > (which I connected to eth1, aka blue WAN port).  Oddly enough, eth1 does
> get
> > its DHCP address fine if I attach it to a port on a DD-WRT router I have
> > sitting around, but not the cable modem.
> >
> > Has anyone else had similar difficulties using their NFiniti with a wired
> > broadband connection that issues DHCP leases?  I don't have this problem
> > with the Mikrotik rb532a boards running Backfire rc4, when connected to a
> > Charter cable modem.
> >
> > On Tue, Jul 5, 2011 at 12:30 PM, Brian Duggan <bcdugga at gmail.com> wrote:
> >
> "
134,Commotion-dev, Working Openwrt build for Buffalo,"Wed, 06 Jul 2011 16:59:57 -0400",-0400,Daniel Bryg,"I'm also confirming that r27467 works with the older A0D0 version
Bufallo, too.
D

On 7/5/2011 1:30 PM, Brian Duggan wrote:
> Support for this router might be stabilizing. OpenWRT trunk r27437
> worked for me this weekend, too.
> 
> Brian
> 
> On 7/3/11 9:01 AM, pablito wrote:
"
135,Commotion-dev, Working Openwrt build for Buffalo,"Mon, 18 Jul 2011 11:15:56 -0500",-0500,Ben West,"It looks like you can achieve the same results, tho without having to run
udhcpc manually, by editng this set up file:

/lib/config/config.sh:

setup_interface() {

...

                        $DEBUG eval udhcpc -t 0 -i ""$iface"" \

                                ${ipaddr:+-r $ipaddr} \

                                ${hostname:+-H $hostname} \

                                ${clientid:+-c $clientid} \

                                ${vendorid:+-V $vendorid} \

                                -b -p ""$pidfile"" $broadcast \

                                ${dhcpopts:- -O rootpath -R &}

Here you see OpenWRT giving hard-coded options to udhcpc for a 3second
timeout and 0 retry packets.  I'm curious why these are hard-coded.

root at openwrt:# udhcpc -h
udhcpc: option requires an argument -- h
BusyBox v1.15.3 (2010-04-06 05:58:52 CEST) multi-call binary

Usage: udhcpc [-Cfbnqtvo] [-c CID] [-V VCLS] [-H HOSTNAME] [-i INTERFACE]
[-p pidfile] [-r IP] [-s script] [-O dhcp-option]...

-V,--vendorclass=CLASSID Vendor class identifier
-i,--interface=INTERFACE Interface to use (default eth0)
-H,-h,--hostname=HOSTNAME Client hostname
-c,--clientid=CLIENTID Client identifier
-C,--clientid-none Suppress default client identifier
-p,--pidfile=file Create pidfile
-r,--request=IP IP address to request
-s,--script=file Run file at DHCP events (default
/usr/share/udhcpc/default.script)
-t,--retries=N Send up to N request packets
-T,--timeout=N Try to get a lease for N seconds (default 3)
-A,--tryagain=N Wait N seconds (default 20) after failure
-O,--request-option=OPT Request DHCP option OPT (cumulative)
-o,--no-default-options Do not request any options (unless -O is also given)
-f,--foreground Run in foreground
-b,--background Background if lease is not immediately obtained
-S,--syslog Log to syslog too
-n,--now Exit with failure if lease is not immediately obtained
-q,--quit Quit after obtaining lease
-R,--release Release IP on quit


On Wed, Jul 6, 2011 at 7:38 AM, Josh King <joshuaheretic at gmail.com> wrote:

> ** Hey Ben,
>
> If you log-in to the router and manually run udhcpc on that port with a
> longer timeout (currently 3 tries/5 seconds, I believe), does it then get a
> lease? I'm not experienced with that particular modem, but I have had issues
> with DHCP leases on OpenWRT with other, similar hardware.
> --
> Josh King
>
> ""I am an Anarchist not because I believe Anarchism is the final goal, but
> because there is no such thing as a final goal."" -Rudolf Rocker
>
>
> Ben West <me at benwest.name> wrote:
"
136,Commotion-dev, New domains,"Wed, 27 Jul 2011 09:07:16 -0400",-0400,Josh King,"Hey all,

Just another quick note, I registered commotionwireless.{net,com,org}
and internetinasuitcase.{net,org} (.com was taken already). They are
currently set up to redirect to the Commotion project page.
-- 
Josh King
Technologist
Open Technology Initiative
New America Foundation

"
137,Commotion-dev, Draft Roadmap,"Wed, 27 Jul 2011 09:07:48 -0400",-0400,Josh King,"Hey everyone,

I have published a draft roadmap for the project at:

http://tech.chambana.net/projects/commotion/wiki/roadmap

This is rough so far (and software focused, still working on adding in
more documentation and outreach tasks), but I think serves to give an
overall view of how the project is laid out and where it's heading.
Recognizing that the project is made up of a large number of different
pieces on different platforms, I've made a few structural decisions as
far as the roadmap (and a coincident refactoring of the website):

* The project has been re-structured into a number of subprojects, as it
didn't make sense to me to put a large number of projects with
substantially different codebases into one git repository. I realize
that if we end up having a large shared codebase at the end then we may
want to re-integrate, or create a shared repository drawn on by all
sub-projects. Other people may have other takes on this. In any event,
there are subprojects ""Commotion-Openwrt"", ""Commotion-Android"",
""Commotion-Windows"", etc. I hope that this will also help to clarify
confusion between Commotion the overarching project and Commotion the
OpenWRT embedded firmware (now Commotion-OpenWRT). All issues from
subprojects are visible in the existing ""Commotion"" superproject.

* The roadmap is structured into a number of 'releases.' The first one
is a pre-release at the end of October, which will serve simply to pull
together all of the disparate software elements in their current form,
as well as give me some time to work on some features for the
Commotion-OpenWRT firmware to bring it up to feature parity with some
other firmwares out there in order to make it more useful to the
community networks we're working with to deploy and test it. Past that,
there are 4 ""Developer Releases"" which are split up in roughly 2-month
increments through the year, with a ""Finished Release"" next summer. I
structure it in this way to recognize that we need some general
milestones to hit, but that each piece of component software has its own
versioning and there's no need to try and change that, and the DR1-4
naming scheme is not likely to strongly conflict with any other
versioning scheme in use. Feedback around this is welcome, and the
timeline is likely to change slightly as the release date as required by
OTI's Internet Freedom grant award is predicated on when we actually get
the check from the US State Department, which is not yet.

I'm currently still putting items from the roadmap into the issue
tracker as it makes sense, and adding users from the existing project
into the subprojects (Redmine doesn't automatically migrate them).
People should feel free to add to the roadmap for now, just ping the
list when you do so to help me keep track of what's changed.

-- 
Josh King
Technologist
Open Technology Initiative
New America Foundation

"
138,Commotion-dev, Your Chambana.net Tech Projects password,"Wed, 20 Jul 2011 07:22:36 -0400",-0400,Kusay Rukieh,"Good Day:
My name is kusay rukieh I work in academia.  I am originally from the middle
east (syria).  I stumbled upon your projects when I was searching
for wireless sensor network.  The reason I am looking for a technology
to circumvent  the shutting down of wireless network access by oppressive
regimes.  I would like to lend my help an expertise.  can you please let me
know how can I help.  One of the brutal tactics that is used by these
regimes before attacking a city is to cutoff all type of communication.  I
would like to find another solution that is easy to deploy and based
on wireless meshed networks.  I would like to expose the atrocious crimes
which are committed against unarmed civilians.
thanks,
Kusay

On Wed, Jul 20, 2011 at 6:40 AM, <commotion-dev at lists.chambana.net> wrote:
>
> Login: *krukieh at my.fit.edu*
> "
139,Commotion-dev, Draft Roadmap,"Fri, 29 Jul 2011 17:01:05 -0500",-0500,Charles N Wyble,"

On 07/27/2011 08:07 AM, Josh King wrote:
> Hey everyone,
>
> I have published a draft roadmap for the project at:
>
> http://tech.chambana.net/projects/commotion/wiki/roadmap
>
>
>
> * The roadmap is structured into a number of 'releases.' The first one
> is a pre-release at the end of October, which will serve simply to pull
> together all of the disparate software elements in their current form,
> as well as give me some time to work on some features for the
> Commotion-OpenWRT firmware to bring it up to feature parity with some
> other firmwares out there in order to make it more useful to the
> community networks we're working with to deploy and test it. Past that,
> there are 4 ""Developer Releases"" which are split up in roughly 2-month
> increments through the year, with a ""Finished Release"" next summer. I
> structure it in this way to recognize that we need some general
> milestones to hit, but that each piece of component software has its own
> versioning and there's no need to try and change that, and the DR1-4
> naming scheme is not likely to strongly conflict with any other
> versioning scheme in use. Feedback around this is welcome, and the
> timeline is likely to change slightly as the release date as required by
> OTI's Internet Freedom grant award is predicated on when we actually get
> the check from the US State Department, which is not yet.


Why don't you guys just work with the villagetelco project? The SCEN
firmware. They are light years
ahead of everyone else in mesh. They have numerous production
deployments. I think it's better to
utilize the VT SCEN firmware and modify to suit, as opposed to starting
from scratch.

This is the approach being taken by the Free Network Foundation (of
which I'm a founder). We are moving
very close to shipping FreedomNode, which is a combination of the ideals
of FreedomBox/Byzantium/Commotion.

We are hoping to have our full reference implementation completed this
weekend and shipping a completed package
by end of August.

Everyone else seems light years away from shipping. *shrugs* We will all
see who delivers first I guess. :)




"
140,Commotion-dev, Draft Roadmap,"Fri, 29 Jul 2011 20:40:34 -0400",-0400,Hans-Christoph Steiner,"
On Jul 29, 2011, at 6:01 PM, Charles N Wyble wrote:

>
>
> On 07/27/2011 08:07 AM, Josh King wrote:
"
141,Commotion-dev, Draft Roadmap,"Fri, 29 Jul 2011 20:37:07 -0400",-0400,Hans-Christoph Steiner,"
On Jul 27, 2011, at 9:07 AM, Josh King wrote:

> Hey everyone,
>
> I have published a draft roadmap for the project at:
>
> http://tech.chambana.net/projects/commotion/wiki/roadmap
>
> This is rough so far (and software focused, still working on adding in
> more documentation and outreach tasks), but I think serves to give an
> overall view of how the project is laid out and where it's heading.
> Recognizing that the project is made up of a large number of different
> pieces on different platforms, I've made a few structural decisions as
> far as the roadmap (and a coincident refactoring of the website):

Its good to see a overview of the time and the chunks.  I just noticed  
that you have listed ""native mesh network configuration GUI"" for  
Windows and Mac.  That sounds like the best plan in the long run, but  
perhaps it makes sense to have a cross-platform Java or something GUI  
to get the ball rolling.  I'm not sure yet which approach is best in  
the time frame.  Writing native apps for each platform will be more  
work, but I'm a big believer in having things feel seamlessly  
integrated, and often native apps are the most effective approach.

> * The project has been re-structured into a number of subprojects,  
> as it
> didn't make sense to me to put a large number of projects with
> substantially different codebases into one git repository. I realize
> that if we end up having a large shared codebase at the end then we  
> may
> want to re-integrate, or create a shared repository drawn on by all
> sub-projects. Other people may have other takes on this. In any event,
> there are subprojects ""Commotion-Openwrt"", ""Commotion-Android"",
> ""Commotion-Windows"", etc. I hope that this will also help to clarify
> confusion between Commotion the overarching project and Commotion the
> OpenWRT embedded firmware (now Commotion-OpenWRT). All issues from
> subprojects are visible in the existing ""Commotion"" superproject.

I agree it makes sense to split up into multiple git repos.  The most  
useful rule of thumb I've seen for where to make the dividing lines is  
thinking about it in terms build automation: any commit to a repo will  
trigger a build, is that build going to be relevant to the commit?   
One example we have is an app suite for J2ME, Blackberry and Android.   
All Java, all the same goals and features, currently all on git.  The  
J2ME and Blackberry code ends up being very much interwoven, while the  
Android code ended up being unrelated.  The next step might be to  
split out the common Java code into a library, then make separate git  
repos for J2ME, Blackberry, and Android.

The Android OS is also a good example, it is made up of many many git  
repos. That reminds me of another rule of thumb for where to set the  
dividing lines for git repos:  ideally, it should be possible to have  
the git commit messages make sense without having to add the context  
to the message itself.

.hc

> * The roadmap is structured into a number of 'releases.' The first one
> is a pre-release at the end of October, which will serve simply to  
> pull
> together all of the disparate software elements in their current form,
> as well as give me some time to work on some features for the
> Commotion-OpenWRT firmware to bring it up to feature parity with some
> other firmwares out there in order to make it more useful to the
> community networks we're working with to deploy and test it. Past  
> that,
> there are 4 ""Developer Releases"" which are split up in roughly 2-month
> increments through the year, with a ""Finished Release"" next summer. I
> structure it in this way to recognize that we need some general
> milestones to hit, but that each piece of component software has its  
> own
> versioning and there's no need to try and change that, and the DR1-4
> naming scheme is not likely to strongly conflict with any other
> versioning scheme in use. Feedback around this is welcome, and the
> timeline is likely to change slightly as the release date as  
> required by
> OTI's Internet Freedom grant award is predicated on when we actually  
> get
> the check from the US State Department, which is not yet.
>
> I'm currently still putting items from the roadmap into the issue
> tracker as it makes sense, and adding users from the existing project
> into the subprojects (Redmine doesn't automatically migrate them).
> People should feel free to add to the roadmap for now, just ping the
> list when you do so to help me keep track of what's changed.







"
142,Commotion-dev, Your Chambana.net Tech Projects password,"Fri, 29 Jul 2011 21:04:04 -0400",-0400,Hans-Christoph Steiner,"
Hey Kusay,

The Commotion project is just getting rolling with a big development  
push over the next year or two.  You can see a rough roadmap here:

http://tech.chambana.net/projects/commotion/wiki/roadmap

I'm also just getting started in the project. There are many ways to  
contribute, from coding to testing to getting the word out to places  
like Syria or anywhere this can be useful.  Its up to what your  
interests, skills, and availability are.

.hc

On Jul 20, 2011, at 7:22 AM, Kusay Rukieh wrote:

> Good Day:
> My name is kusay rukieh I work in academia.  I am originally from  
> the middle east (syria).  I stumbled upon your projects when I was  
> searching for wireless sensor network.  The reason I am looking for  
> a technology to circumvent  the shutting down of wireless network  
> access by oppressive regimes.  I would like to lend my help an  
> expertise.  can you please let me know how can I help.  One of the  
> brutal tactics that is used by these regimes before attacking a city  
> is to cutoff all type of communication.  I would like to find  
> another solution that is easy to deploy and based on wireless meshed  
> networks.  I would like to expose the atrocious crimes which are  
> committed against unarmed civilians.
> thanks,
> Kusay
>
> On Wed, Jul 20, 2011 at 6:40 AM, <commotion-dev at lists.chambana.net>  
> wrote:
> Login: krukieh at my.fit.edu
>
> You have received this notification because you have either  
> subscribed to it, or are involved in it.
> To change your notification preferences, please click here: http://tech.chambana.net/my/account
>
>
> _______________________________________________
> Commotion-dev mailing list
> Commotion-dev at lists.chambana.net
> http://lists.chambana.net/mailman/listinfo/commotion-dev





"
143,Commotion-dev, Your Chambana.net Tech Projects password,"Sat, 30 Jul 2011 17:21:54 -0400",-0400,Kusay Rukieh,"Good  Day Hans:
Thank you so much for your response.  My area is testing.  I would like to
get Beta-releases, so I can test these out, and report the bugs, and
enhancements.  Please let me know how to do so.  I would like to conduct a
sample deployment and see how successful it is.
Thanks,
Kusay

On Fri, Jul 29, 2011 at 9:04 PM, Hans-Christoph Steiner <hans at at.or.at>wrote:

>
> Hey Kusay,
>
> The Commotion project is just getting rolling with a big development push
> over the next year or two.  You can see a rough roadmap here:
>
> http://tech.chambana.net/projects/commotion/wiki/roadmap
>
> I'm also just getting started in the project. There are many ways to
> contribute, from coding to testing to getting the word out to places like
> Syria or anywhere this can be useful.  Its up to what your interests,
> skills, and availability are.
>
> .hc
>
> On Jul 20, 2011, at 7:22 AM, Kusay Rukieh wrote:
>
> Good Day:
> My name is kusay rukieh I work in academia.  I am originally from the
> middle east (syria).  I stumbled upon your projects when I was searching
> for wireless sensor network.  The reason I am looking for a technology
> to circumvent  the shutting down of wireless network access by oppressive
> regimes.  I would like to lend my help an expertise.  can you please let me
> know how can I help.  One of the brutal tactics that is used by these
> regimes before attacking a city is to cutoff all type of communication.  I
> would like to find another solution that is easy to deploy and based
> on wireless meshed networks.  I would like to expose the atrocious crimes
> which are committed against unarmed civilians.
> thanks,
> Kusay
>
> On Wed, Jul 20, 2011 at 6:40 AM, <commotion-dev at lists.chambana.net> wrote:
"
144,Commotion-dev, Working Openwrt build for Buffalo,"Mon, 01 Aug 2011 14:21:43 -0400",-0400,Josh King,"Hey Ben,

This is essentially what Commotion does, in the /lib/network/mesh.sh
file in the setup_interface_plugif() function. I'll put some hooks into
that function so that you can specify the timeout in the config for the
interface.

On 07/18/2011 12:15 PM, Ben West wrote:
> It looks like you can achieve the same results, tho without having to run
> udhcpc manually, by editng this set up file:
> 
> /lib/config/config.sh:
> 
> setup_interface() {
> 
> ...
> 
>                         $DEBUG eval udhcpc -t 0 -i ""$iface"" \
> 
>                                 ${ipaddr:+-r $ipaddr} \
> 
>                                 ${hostname:+-H $hostname} \
> 
>                                 ${clientid:+-c $clientid} \
> 
>                                 ${vendorid:+-V $vendorid} \
> 
>                                 -b -p ""$pidfile"" $broadcast \
> 
>                                 ${dhcpopts:- -O rootpath -R &}
> 
> Here you see OpenWRT giving hard-coded options to udhcpc for a 3second
> timeout and 0 retry packets.  I'm curious why these are hard-coded.
> 
> root at openwrt:# udhcpc -h
> udhcpc: option requires an argument -- h
> BusyBox v1.15.3 (2010-04-06 05:58:52 CEST) multi-call binary
> 
> Usage: udhcpc [-Cfbnqtvo] [-c CID] [-V VCLS] [-H HOSTNAME] [-i INTERFACE]
> [-p pidfile] [-r IP] [-s script] [-O dhcp-option]...
> 
> -V,--vendorclass=CLASSID Vendor class identifier
> -i,--interface=INTERFACE Interface to use (default eth0)
> -H,-h,--hostname=HOSTNAME Client hostname
> -c,--clientid=CLIENTID Client identifier
> -C,--clientid-none Suppress default client identifier
> -p,--pidfile=file Create pidfile
> -r,--request=IP IP address to request
> -s,--script=file Run file at DHCP events (default
> /usr/share/udhcpc/default.script)
> -t,--retries=N Send up to N request packets
> -T,--timeout=N Try to get a lease for N seconds (default 3)
> -A,--tryagain=N Wait N seconds (default 20) after failure
> -O,--request-option=OPT Request DHCP option OPT (cumulative)
> -o,--no-default-options Do not request any options (unless -O is also given)
> -f,--foreground Run in foreground
> -b,--background Background if lease is not immediately obtained
> -S,--syslog Log to syslog too
> -n,--now Exit with failure if lease is not immediately obtained
> -q,--quit Quit after obtaining lease
> -R,--release Release IP on quit
> 
> 
> On Wed, Jul 6, 2011 at 7:38 AM, Josh King <joshuaheretic at gmail.com> wrote:
> 
"
145,Commotion-dev, newbie question - routes not added,"Mon, 1 Aug 2011 16:57:25 -0400",-0400,Paul Bame,"I'm running commotion on a nanostation and compatibly hand-configuring a
debian laptop with olsrd etc.  Both boxes advertise HNA routes.  Neither
box actually inserts any routes into any route tables[1].  Debian box debug
shows it taking the code path which should probably insert the route:

    RIB: add prefix 101.162.75.0/24 from 5.20.162.75

strace[2] output does not show anything which looks to me like attempting
to add a route.

Otherwise the olsrds seem happy with each other -- the olsrd_dns plugin
is sharing data between boxes just fine.

The Debian testing box is Linux 2.6.380-2 with olsrd
0.6.1-2.  Nanostation is Linux 2.6.32.27 with olsrd
0.6.1-git_b9256ce-hash_bf1d618b6d6c23755adadfffcc41d59f with what may
be an older commotion build.

Can I buy a clue?  Thanks!

	-Paul (pablito)

[1] checked with 'ip route show table all'
[2] strace -f
"
146,Commotion-dev, Commotion FAQ,"Sun, 07 Aug 2011 10:22:26 -0400",-0400,Josh King,"Hi all,

Andrew Reynolds, a new Technologist at OTI, has helped put together and
post a new FAQ about the Commotion project. You can find it at the URL
below:

http://commotionwireless.net/faq

Any comments or edits are welcome!
-- 
Josh King
Technologist
Open Technology Initiative
New America Foundation

"
147,Commotion-dev, Draft Roadmap,"Sun, 07 Aug 2011 10:22:34 -0400",-0400,Josh King,"Hi Hans-Christoph,

My comments are below:

On 07/29/2011 08:37 PM, Hans-Christoph Steiner wrote:
> 
> On Jul 27, 2011, at 9:07 AM, Josh King wrote:
> 
"
148,Commotion-dev, Draft Roadmap,"Sun, 7 Aug 2011 10:52:00 -0400",-0400,Outback Dingo,"On Fri, Jul 29, 2011 at 6:01 PM, Charles N Wyble
<charles at knownelement.com>wrote:

>
>
> On 07/27/2011 08:07 AM, Josh King wrote:
> > Hey everyone,
> >
> > I have published a draft roadmap for the project at:
> >
> > http://tech.chambana.net/projects/commotion/wiki/roadmap
> >
> >
> >
> > * The roadmap is structured into a number of 'releases.' The first one
> > is a pre-release at the end of October, which will serve simply to pull
> > together all of the disparate software elements in their current form,
> > as well as give me some time to work on some features for the
> > Commotion-OpenWRT firmware to bring it up to feature parity with some
> > other firmwares out there in order to make it more useful to the
> > community networks we're working with to deploy and test it. Past that,
> > there are 4 ""Developer Releases"" which are split up in roughly 2-month
> > increments through the year, with a ""Finished Release"" next summer. I
> > structure it in this way to recognize that we need some general
> > milestones to hit, but that each piece of component software has its own
> > versioning and there's no need to try and change that, and the DR1-4
> > naming scheme is not likely to strongly conflict with any other
> > versioning scheme in use. Feedback around this is welcome, and the
> > timeline is likely to change slightly as the release date as required by
> > OTI's Internet Freedom grant award is predicated on when we actually get
> > the check from the US State Department, which is not yet.
>
>
> Why don't you guys just work with the villagetelco project? The SCEN
> firmware. They are light years
> ahead of everyone else in mesh. They have numerous production
> deployments. I think it's better to
> utilize the VT SCEN firmware and modify to suit, as opposed to starting
> from scratch.
"
149,Commotion-dev," Mudge, way to go!","Sun, 7 Aug 2011 13:28:51 -0700",-0700,L. Aaron Kaplan,"""Mudge"" (from L0phtcrack fame, http://en.wikipedia.org/wiki/Peiter_Zatko) is now working for the DARPA.
He started a program to support Hacker/Maker spaces. The ""unofficial"" announcement was given out at Blackhat 2011 a couple of days ago.
Now the mainstream press picked up on this:

http://it.slashdot.org/story/11/08/07/0051250/DARPA-Commits-To-Funding-Useful-Hacking-Projects

Nice!

a.


"
150,Commotion-dev, Draft Roadmap,"Tue, 9 Aug 2011 03:37:24 -0500",-0500,Ben West,"Hi All,

I am glad to read about progress for Commotion.

This was my proposal sent many moons ago to the OLSR listserv for a new
plugin to efficiently tweak TX power, and I am reposting here. Comments
encouraged ...

"
151,Commotion-dev, Draft Roadmap,"Thu, 11 Aug 2011 11:03:49 -0400",-0400,Paul Bame,"Seems like another benefit of lower TX power is that it reduces the
collsion range(s), allowing more regions of a large mesh to operate in
parallel.  In some (network use pattern and routing) cases could this
lead to more theoretical /composite/ intra-mesh network throughput even
while creating more slow multi-hop links?  Seems like a good PhD thesis
to try simulating it :-)

	-p
"
152,Commotion-dev, Draft Roadmap,"Thu, 11 Aug 2011 16:12:29 +0100",+0100,Michael Rogers,"This brings to mind some of the work on finding connected dominating
sets, cluster heads, etc, in MANETs - the goal being to reduce
collisions in areas of high node density by selecting a few nodes to act
as a sort of routing backbone for the rest.

Ben, would your proposal also leave a few nodes transmitting at full
power, or would everyone turn down their tx power? It seems like leaving
a few nodes at full power might help to keep the dense parts of the mesh
connected to each other as well as connected internally?

Cheers,
Michael

On 11/08/11 16:03, Paul Bame wrote:
> Seems like another benefit of lower TX power is that it reduces the
> collsion range(s), allowing more regions of a large mesh to operate in
> parallel.  In some (network use pattern and routing) cases could this
> lead to more theoretical /composite/ intra-mesh network throughput even
> while creating more slow multi-hop links?  Seems like a good PhD thesis
> to try simulating it :-)
> 
> 	-p
> _______________________________________________
> Commotion-dev mailing list
> Commotion-dev at lists.chambana.net
> http://lists.chambana.net/mailman/listinfo/commotion-dev

"
153,Commotion-dev, Draft Roadmap,"Thu, 11 Aug 2011 17:30:18 +0200",+0200,L. Aaron Kaplan,"
On Aug 11, 2011, at 5:03 PM, Paul Bame wrote:

> Seems like another benefit of lower TX power is that it reduces the
> collsion range(s), allowing more regions of a large mesh to operate in

absolutely!

> parallel.  In some (network use pattern and routing) cases could this
> lead to more theoretical /composite/ intra-mesh network throughput even
> while creating more slow multi-hop links?  Seems like a good PhD thesis
> to try simulating it :-)

:)

"
154,Commotion-dev, Draft Roadmap,"Thu, 11 Aug 2011 17:41:18 +0200",+0200,L. Aaron Kaplan,"
On Aug 11, 2011, at 5:12 PM, Michael Rogers wrote:

> This brings to mind some of the work on finding connected dominating
> sets, cluster heads, etc, in MANETs - the goal being to reduce
> collisions in areas of high node density by selecting a few nodes to act
> as a sort of routing backbone for the rest.
> 

In a sense this is the ""O"" (optimzied) in OLSR (however, it only applies
to the signaling traffic).

> Ben, would your proposal also leave a few nodes transmitting at full
> power, or would everyone turn down their tx power?

This depends very much on the topological (and geographic) setting that you 
are in. If these higher power nodes can be heard by everyone (also the more
quiet nodes) then you will gain little. The goal is to reduce interference.

There is a reason that RF engineering is quite complicated ;-)

My best experience with RF engineering is ) to really know what antennas you are using (gain, opening angles) and 2) see if there is an overlap with other antennas/nodes and 3) use buildings (or trees) as a blocking material between different nodes . Then you can re-use the channels
4) use as low txpower as possible. The whole network improves if everybody is as quiet as possible.

But as I said - RF engineering is an art in it's own.


> It seems like leaving
> a few nodes at full power might help to keep the dense parts of the mesh
> connected to each other as well as connected internally?
> 
> 

I recommend to take a look at ""Radio Mobile"" (first hit in google).

a.



"
155,Commotion-dev, Your Chambana.net Tech Projects password,"Thu, 18 Aug 2011 16:11:51 -0400",-0400,Hans-Christoph Steiner,"
Hey Kusay,

Things are pretty raw right now, definitely in development.  So if you  
want to get involved now, you'll need to roll up your sleeves and get  
your hands dirty with the technical details. :)  A good place to start  
is to get a Buffalo router and try your hand at flashing it.  Then  
you'll have a node to start testing.  Other things to test now are  
OLSR wifi mesh routing.

But watch this list, we'll be posting more progress as we make it.

.hc

On Jul 30, 2011, at 5:21 PM, Kusay Rukieh wrote:

> Good  Day Hans:
> Thank you so much for your response.  My area is testing.  I would  
> like to get Beta-releases, so I can test these out, and report the  
> bugs, and enhancements.  Please let me know how to do so.  I would  
> like to conduct a sample deployment and see how successful it is.
> Thanks,
> Kusay
>
> On Fri, Jul 29, 2011 at 9:04 PM, Hans-Christoph Steiner  
> <hans at at.or.at> wrote:
>
> Hey Kusay,
>
> The Commotion project is just getting rolling with a big development  
> push over the next year or two.  You can see a rough roadmap here:
>
> http://tech.chambana.net/projects/commotion/wiki/roadmap
>
> I'm also just getting started in the project. There are many ways to  
> contribute, from coding to testing to getting the word out to places  
> like Syria or anywhere this can be useful.  Its up to what your  
> interests, skills, and availability are.
>
> .hc
>
> On Jul 20, 2011, at 7:22 AM, Kusay Rukieh wrote:
>
"
156,Commotion-dev, Newbie how-it-works doc,"Fri, 19 Aug 2011 14:52:35 -0400",-0400,Paul Bame,"For new-to-Commotion folks as confused as I, I put a document on the wiki:
http://tech.chambana.net/projects/commotion/wiki/Newbie_How_It_Works

There should be enough information there to hand-make a Commotion-compatible
node on most routers which can run olsrd, or Linux for that matter.

Familiar-to-Commotion folks will probably spot misleading, wrong, or
missing bits which I welcome you to fix, or if you don't have a wiki
account, I will consider making fixes from email too.

	-p
"
157,Commotion-dev, Newbie how-it-works doc,"Mon, 22 Aug 2011 21:45:12 -0400",-0400,Josh King,"Hey Paul,

This is an awesome overview, thanks for putting so much work into it!
And good catch on the hostname thing, I used the same code for hostname
generation that I did for SSID generation, and just never noticed it.
I'll submit a fix against that.

Sorry about the dearth of replies from my end, recently found out that
New America's email servers started spontaneously and silently dropping
all messages from this list a while ago for no apparent reason, so I
switched my subscription over to my personal account.

On 08/19/2011 02:52 PM, Paul Bame wrote:
> For new-to-Commotion folks as confused as I, I put a document on the wiki:
> http://tech.chambana.net/projects/commotion/wiki/Newbie_How_It_Works
> 
> There should be enough information there to hand-make a Commotion-compatible
> node on most routers which can run olsrd, or Linux for that matter.
> 
> Familiar-to-Commotion folks will probably spot misleading, wrong, or
> missing bits which I welcome you to fix, or if you don't have a wiki
> account, I will consider making fixes from email too.
> 
> 	-p
> _______________________________________________
> Commotion-dev mailing list
> Commotion-dev at lists.chambana.net
> http://lists.chambana.net/mailman/listinfo/commotion-dev

-- 
Josh King

""I am an Anarchist not because I believe Anarchism is the final goal,
but because there is no such thing as a final goal."" -Rudolf Rocker

"
158,Commotion-dev, Working Openwrt build for Buffalo,"Mon, 01 Aug 2011 14:21:43 -0400",-0400,Josh King,"Hey Ben,

This is essentially what Commotion does, in the /lib/network/mesh.sh
file in the setup_interface_plugif() function. I'll put some hooks into
that function so that you can specify the timeout in the config for the
interface.

On 07/18/2011 12:15 PM, Ben West wrote:
> It looks like you can achieve the same results, tho without having to run
> udhcpc manually, by editng this set up file:
> 
> /lib/config/config.sh:
> 
> setup_interface() {
> 
> ...
> 
>                         $DEBUG eval udhcpc -t 0 -i ""$iface"" \
> 
>                                 ${ipaddr:+-r $ipaddr} \
> 
>                                 ${hostname:+-H $hostname} \
> 
>                                 ${clientid:+-c $clientid} \
> 
>                                 ${vendorid:+-V $vendorid} \
> 
>                                 -b -p ""$pidfile"" $broadcast \
> 
>                                 ${dhcpopts:- -O rootpath -R &}
> 
> Here you see OpenWRT giving hard-coded options to udhcpc for a 3second
> timeout and 0 retry packets.  I'm curious why these are hard-coded.
> 
> root at openwrt:# udhcpc -h
> udhcpc: option requires an argument -- h
> BusyBox v1.15.3 (2010-04-06 05:58:52 CEST) multi-call binary
> 
> Usage: udhcpc [-Cfbnqtvo] [-c CID] [-V VCLS] [-H HOSTNAME] [-i INTERFACE]
> [-p pidfile] [-r IP] [-s script] [-O dhcp-option]...
> 
> -V,--vendorclass=CLASSID Vendor class identifier
> -i,--interface=INTERFACE Interface to use (default eth0)
> -H,-h,--hostname=HOSTNAME Client hostname
> -c,--clientid=CLIENTID Client identifier
> -C,--clientid-none Suppress default client identifier
> -p,--pidfile=file Create pidfile
> -r,--request=IP IP address to request
> -s,--script=file Run file at DHCP events (default
> /usr/share/udhcpc/default.script)
> -t,--retries=N Send up to N request packets
> -T,--timeout=N Try to get a lease for N seconds (default 3)
> -A,--tryagain=N Wait N seconds (default 20) after failure
> -O,--request-option=OPT Request DHCP option OPT (cumulative)
> -o,--no-default-options Do not request any options (unless -O is also given)
> -f,--foreground Run in foreground
> -b,--background Background if lease is not immediately obtained
> -S,--syslog Log to syslog too
> -n,--now Exit with failure if lease is not immediately obtained
> -q,--quit Quit after obtaining lease
> -R,--release Release IP on quit
> 
> 
> On Wed, Jul 6, 2011 at 7:38 AM, Josh King <joshuaheretic at gmail.com> wrote:
> 
"
159,Commotion-dev, newbie question - routes not added,"Mon, 1 Aug 2011 16:57:25 -0400",-0400,Paul Bame,"I'm running commotion on a nanostation and compatibly hand-configuring a
debian laptop with olsrd etc.  Both boxes advertise HNA routes.  Neither
box actually inserts any routes into any route tables[1].  Debian box debug
shows it taking the code path which should probably insert the route:

    RIB: add prefix 101.162.75.0/24 from 5.20.162.75

strace[2] output does not show anything which looks to me like attempting
to add a route.

Otherwise the olsrds seem happy with each other -- the olsrd_dns plugin
is sharing data between boxes just fine.

The Debian testing box is Linux 2.6.380-2 with olsrd
0.6.1-2.  Nanostation is Linux 2.6.32.27 with olsrd
0.6.1-git_b9256ce-hash_bf1d618b6d6c23755adadfffcc41d59f with what may
be an older commotion build.

Can I buy a clue?  Thanks!

	-Paul (pablito)

[1] checked with 'ip route show table all'
[2] strace -f

"
160,Commotion-dev, Commotion FAQ,"Sun, 07 Aug 2011 10:22:26 -0400",-0400,Josh King,"Hi all,

Andrew Reynolds, a new Technologist at OTI, has helped put together and
post a new FAQ about the Commotion project. You can find it at the URL
below:

http://commotionwireless.net/faq

Any comments or edits are welcome!
-- 
Josh King
Technologist
Open Technology Initiative
New America Foundation

"
161,Commotion-dev, Draft Roadmap,"Sun, 07 Aug 2011 10:22:34 -0400",-0400,Josh King,"Hi Hans-Christoph,

My comments are below:

On 07/29/2011 08:37 PM, Hans-Christoph Steiner wrote:
> 
> On Jul 27, 2011, at 9:07 AM, Josh King wrote:
> 
"
162,Commotion-dev, Draft Roadmap,"Sun, 7 Aug 2011 10:52:00 -0400",-0400,Outback Dingo,"On Fri, Jul 29, 2011 at 6:01 PM, Charles N Wyble
<charles at knownelement.com>wrote:

>
>
> On 07/27/2011 08:07 AM, Josh King wrote:
> > Hey everyone,
> >
> > I have published a draft roadmap for the project at:
> >
> > http://tech.chambana.net/projects/commotion/wiki/roadmap
> >
> >
> >
> > * The roadmap is structured into a number of 'releases.' The first one
> > is a pre-release at the end of October, which will serve simply to pull
> > together all of the disparate software elements in their current form,
> > as well as give me some time to work on some features for the
> > Commotion-OpenWRT firmware to bring it up to feature parity with some
> > other firmwares out there in order to make it more useful to the
> > community networks we're working with to deploy and test it. Past that,
> > there are 4 ""Developer Releases"" which are split up in roughly 2-month
> > increments through the year, with a ""Finished Release"" next summer. I
> > structure it in this way to recognize that we need some general
> > milestones to hit, but that each piece of component software has its own
> > versioning and there's no need to try and change that, and the DR1-4
> > naming scheme is not likely to strongly conflict with any other
> > versioning scheme in use. Feedback around this is welcome, and the
> > timeline is likely to change slightly as the release date as required by
> > OTI's Internet Freedom grant award is predicated on when we actually get
> > the check from the US State Department, which is not yet.
>
>
> Why don't you guys just work with the villagetelco project? The SCEN
> firmware. They are light years
> ahead of everyone else in mesh. They have numerous production
> deployments. I think it's better to
> utilize the VT SCEN firmware and modify to suit, as opposed to starting
> from scratch.
"
163,Commotion-dev," Mudge, way to go!","Sun, 7 Aug 2011 13:28:51 -0700",-0700,L. Aaron Kaplan,"""Mudge"" (from L0phtcrack fame, http://en.wikipedia.org/wiki/Peiter_Zatko) is now working for the DARPA.
He started a program to support Hacker/Maker spaces. The ""unofficial"" announcement was given out at Blackhat 2011 a couple of days ago.
Now the mainstream press picked up on this:

http://it.slashdot.org/story/11/08/07/0051250/DARPA-Commits-To-Funding-Useful-Hacking-Projects

Nice!

a.


"
164,Commotion-dev, Draft Roadmap,"Tue, 9 Aug 2011 03:37:24 -0500",-0500,Ben West,"Hi All,

I am glad to read about progress for Commotion.

This was my proposal sent many moons ago to the OLSR listserv for a new
plugin to efficiently tweak TX power, and I am reposting here. Comments
encouraged ...

"
165,Commotion-dev, Draft Roadmap,"Thu, 11 Aug 2011 11:03:49 -0400",-0400,Paul Bame,"Seems like another benefit of lower TX power is that it reduces the
collsion range(s), allowing more regions of a large mesh to operate in
parallel.  In some (network use pattern and routing) cases could this
lead to more theoretical /composite/ intra-mesh network throughput even
while creating more slow multi-hop links?  Seems like a good PhD thesis
to try simulating it :-)

	-p

"
166,Commotion-dev, Draft Roadmap,"Thu, 11 Aug 2011 16:12:29 +0100",+0100,Michael Rogers,"This brings to mind some of the work on finding connected dominating
sets, cluster heads, etc, in MANETs - the goal being to reduce
collisions in areas of high node density by selecting a few nodes to act
as a sort of routing backbone for the rest.

Ben, would your proposal also leave a few nodes transmitting at full
power, or would everyone turn down their tx power? It seems like leaving
a few nodes at full power might help to keep the dense parts of the mesh
connected to each other as well as connected internally?

Cheers,
Michael

On 11/08/11 16:03, Paul Bame wrote:
> Seems like another benefit of lower TX power is that it reduces the
> collsion range(s), allowing more regions of a large mesh to operate in
> parallel.  In some (network use pattern and routing) cases could this
> lead to more theoretical /composite/ intra-mesh network throughput even
> while creating more slow multi-hop links?  Seems like a good PhD thesis
> to try simulating it :-)
> 
> 	-p
> _______________________________________________
> Commotion-dev mailing list
> Commotion-dev at lists.chambana.net
> http://lists.chambana.net/mailman/listinfo/commotion-dev


"
167,Commotion-dev, Draft Roadmap,"Thu, 11 Aug 2011 17:30:18 +0200",+0200,L. Aaron Kaplan,"
On Aug 11, 2011, at 5:03 PM, Paul Bame wrote:

> Seems like another benefit of lower TX power is that it reduces the
> collsion range(s), allowing more regions of a large mesh to operate in

absolutely!

> parallel.  In some (network use pattern and routing) cases could this
> lead to more theoretical /composite/ intra-mesh network throughput even
> while creating more slow multi-hop links?  Seems like a good PhD thesis
> to try simulating it :-)

:)

"
168,Commotion-dev, Draft Roadmap,"Thu, 11 Aug 2011 17:41:18 +0200",+0200,L. Aaron Kaplan,"
On Aug 11, 2011, at 5:12 PM, Michael Rogers wrote:

> This brings to mind some of the work on finding connected dominating
> sets, cluster heads, etc, in MANETs - the goal being to reduce
> collisions in areas of high node density by selecting a few nodes to act
> as a sort of routing backbone for the rest.
> 

In a sense this is the ""O"" (optimzied) in OLSR (however, it only applies
to the signaling traffic).

> Ben, would your proposal also leave a few nodes transmitting at full
> power, or would everyone turn down their tx power?

This depends very much on the topological (and geographic) setting that you 
are in. If these higher power nodes can be heard by everyone (also the more
quiet nodes) then you will gain little. The goal is to reduce interference.

There is a reason that RF engineering is quite complicated ;-)

My best experience with RF engineering is ) to really know what antennas you are using (gain, opening angles) and 2) see if there is an overlap with other antennas/nodes and 3) use buildings (or trees) as a blocking material between different nodes . Then you can re-use the channels
4) use as low txpower as possible. The whole network improves if everybody is as quiet as possible.

But as I said - RF engineering is an art in it's own.


> It seems like leaving
> a few nodes at full power might help to keep the dense parts of the mesh
> connected to each other as well as connected internally?
> 
> 

I recommend to take a look at ""Radio Mobile"" (first hit in google).

a.



"
169,Commotion-dev, Your Chambana.net Tech Projects password,"Thu, 18 Aug 2011 16:11:51 -0400",-0400,Hans-Christoph Steiner,"
Hey Kusay,

Things are pretty raw right now, definitely in development.  So if you  
want to get involved now, you'll need to roll up your sleeves and get  
your hands dirty with the technical details. :)  A good place to start  
is to get a Buffalo router and try your hand at flashing it.  Then  
you'll have a node to start testing.  Other things to test now are  
OLSR wifi mesh routing.

But watch this list, we'll be posting more progress as we make it.

.hc

On Jul 30, 2011, at 5:21 PM, Kusay Rukieh wrote:

> Good  Day Hans:
> Thank you so much for your response.  My area is testing.  I would  
> like to get Beta-releases, so I can test these out, and report the  
> bugs, and enhancements.  Please let me know how to do so.  I would  
> like to conduct a sample deployment and see how successful it is.
> Thanks,
> Kusay
>
> On Fri, Jul 29, 2011 at 9:04 PM, Hans-Christoph Steiner  
> <hans at at.or.at> wrote:
>
> Hey Kusay,
>
> The Commotion project is just getting rolling with a big development  
> push over the next year or two.  You can see a rough roadmap here:
>
> http://tech.chambana.net/projects/commotion/wiki/roadmap
>
> I'm also just getting started in the project. There are many ways to  
> contribute, from coding to testing to getting the word out to places  
> like Syria or anywhere this can be useful.  Its up to what your  
> interests, skills, and availability are.
>
> .hc
>
> On Jul 20, 2011, at 7:22 AM, Kusay Rukieh wrote:
>
"
170,Commotion-dev, Newbie how-it-works doc,"Fri, 19 Aug 2011 14:52:35 -0400",-0400,Paul Bame,"For new-to-Commotion folks as confused as I, I put a document on the wiki:
http://tech.chambana.net/projects/commotion/wiki/Newbie_How_It_Works

There should be enough information there to hand-make a Commotion-compatible
node on most routers which can run olsrd, or Linux for that matter.

Familiar-to-Commotion folks will probably spot misleading, wrong, or
missing bits which I welcome you to fix, or if you don't have a wiki
account, I will consider making fixes from email too.

	-p

"
171,Commotion-dev, Newbie how-it-works doc,"Mon, 22 Aug 2011 21:45:12 -0400",-0400,Josh King,"Hey Paul,

This is an awesome overview, thanks for putting so much work into it!
And good catch on the hostname thing, I used the same code for hostname
generation that I did for SSID generation, and just never noticed it.
I'll submit a fix against that.

Sorry about the dearth of replies from my end, recently found out that
New America's email servers started spontaneously and silently dropping
all messages from this list a while ago for no apparent reason, so I
switched my subscription over to my personal account.

On 08/19/2011 02:52 PM, Paul Bame wrote:
> For new-to-Commotion folks as confused as I, I put a document on the wiki:
> http://tech.chambana.net/projects/commotion/wiki/Newbie_How_It_Works
> 
> There should be enough information there to hand-make a Commotion-compatible
> node on most routers which can run olsrd, or Linux for that matter.
> 
> Familiar-to-Commotion folks will probably spot misleading, wrong, or
> missing bits which I welcome you to fix, or if you don't have a wiki
> account, I will consider making fixes from email too.
> 
> 	-p
> _______________________________________________
> Commotion-dev mailing list
> Commotion-dev at lists.chambana.net
> http://lists.chambana.net/mailman/listinfo/commotion-dev

-- 
Josh King

""I am an Anarchist not because I believe Anarchism is the final goal,
but because there is no such thing as a final goal."" -Rudolf Rocker

"
172,Commotion-dev, Commotion source now available via git daemon,"Tue, 20 Sep 2011 11:42:19 -0400",-0400,Brian Duggan,
173,Commotion-dev, Commotion source now available via git daemon,"Thu, 29 Sep 2011 12:55:18 -0500",-0500,Ben West,"I'm behind some pretty sketchy wifi in Detroit right now, which may be the
cause, but I've so far been unable to check out the repo...

bash#~/commotion$ git clone git://git.chambana.net/commotion-openwrt
Initialized empty Git repository in
/blah/blah/blah/commotion/commotion-openwrt/.git/
fatal: The remote end hung up unexpectedly

Anyone else having the same problem?

On Tue, Sep 20, 2011 at 10:42 AM, Brian Duggan <duggan at newamerica.net>wrote:

> "
174,Commotion-dev, [Commotion-announce] Commotion source now,"Thu, 29 Sep 2011 13:05:12 -0500",-0500,Chris Ritzo,"Ben,
FYi Pulling a public clone worked for me a couple days ago.
-Chris

On Thu, Sep 29, 2011 at 12:56 PM, Josh King <joshking at newamerica.net> wrote:

> Hi Ben,
>
> We recently pushed a bunch of updates to the development site, and
> that's resulted in a few issues with the repository handling. Brian's
> working on it and should have it fixed in a bit.
>
> On Thu 29 Sep 2011 01:55:18 PM EDT, Ben West wrote:
> > I'm behind some pretty sketchy wifi in Detroit right now, which may be
> the
> > cause, but I've so far been unable to check out the repo...
> >
> > bash#~/commotion$ git clone git://git.chambana.net/commotion-openwrt
> > Initialized empty Git repository in
> > /blah/blah/blah/commotion/commotion-openwrt/.git/
> > fatal: The remote end hung up unexpectedly
> >
> > Anyone else having the same problem?
> >
> > On Tue, Sep 20, 2011 at 10:42 AM, Brian Duggan <duggan at newamerica.net
> >wrote:
> >
> "
175,Commotion-dev, [Commotion-announce] Commotion source now,"Thu, 29 Sep 2011 14:08:55 -0400",-0400,Andrew Reynolds,"Strange. I got the same error as Ben on commotion-openwrt, but I was
able to check out commotion.

-andrew

On 09/29/2011 02:07 PM, Brian Duggan wrote:
> Hi all,
> 
> Apologies for the confusion. Apparently, git-daemon had been working 
> until we upgraded to gitolite as our access control method. gitolite 
> decided it should have complete control over whether something was 
> served via git-daemon, so nothing is currently available publicly. I 
> should have it resolved in a few minutes.
> 
> Thanks,
> Brian
> 
> On Thu Sep 29 14:05:12 2011, Chris Ritzo wrote:
"
176,Commotion-dev, Commotion source now available via git daemon,"Thu, 29 Sep 2011 13:56:40 -0400",-0400,Josh King,"Hi Ben,

We recently pushed a bunch of updates to the development site, and 
that's resulted in a few issues with the repository handling. Brian's 
working on it and should have it fixed in a bit.

On Thu 29 Sep 2011 01:55:18 PM EDT, Ben West wrote:
> I'm behind some pretty sketchy wifi in Detroit right now, which may be the
> cause, but I've so far been unable to check out the repo...
>
> bash#~/commotion$ git clone git://git.chambana.net/commotion-openwrt
> Initialized empty Git repository in
> /blah/blah/blah/commotion/commotion-openwrt/.git/
> fatal: The remote end hung up unexpectedly
>
> Anyone else having the same problem?
>
> On Tue, Sep 20, 2011 at 10:42 AM, Brian Duggan <duggan at newamerica.net>wrote:
>
"
177,Commotion-dev, [Commotion-announce] Commotion source now,"Thu, 29 Sep 2011 14:07:05 -0400",-0400,Josh King,"Yeah, this was pretty recent. It was fixed, and then while we were 
trying to fix some other stuff and push general upgrades it broke again 
today. So it'll be working again soon. I'm also nearly finished setting 
up a completely new server that will be a lot more reliable and 
up-to-date.

On Thu 29 Sep 2011 02:05:12 PM EDT, Chris Ritzo wrote:
> Ben,
> FYi Pulling a public clone worked for me a couple days ago.
> -Chris
>
> On Thu, Sep 29, 2011 at 12:56 PM, Josh King <joshking at newamerica.net> wrote:
>
"
178,Commotion-dev, [Commotion-announce] Commotion source now,"Thu, 29 Sep 2011 14:07:44 -0400",-0400,Brian Duggan,"Hi all,

Apologies for the confusion. Apparently, git-daemon had been working 
until we upgraded to gitolite as our access control method. gitolite 
decided it should have complete control over whether something was 
served via git-daemon, so nothing is currently available publicly. I 
should have it resolved in a few minutes.

Thanks,
Brian

On Thu Sep 29 14:05:12 2011, Chris Ritzo wrote:
> Ben,
> FYi Pulling a public clone worked for me a couple days ago.
> -Chris
>
> On Thu, Sep 29, 2011 at 12:56 PM, Josh King <joshking at newamerica.net
> <mailto:joshking at newamerica.net"
179,Commotion-dev, [Commotion-announce] Commotion source now,"Thu, 29 Sep 2011 14:18:11 -0400",-0400,Brian Duggan,"commotion-openwrt is publicly available again. Sorry for the hiccup.

Brian

On Thu Sep 29 14:08:55 2011, Andrew Reynolds wrote:
> Strange. I got the same error as Ben on commotion-openwrt, but I was
> able to check out commotion.
>
> -andrew
>
> On 09/29/2011 02:07 PM, Brian Duggan wrote:
"
180,Commotion-dev, Commotion source now available via git daemon,"Tue, 20 Sep 2011 11:42:19 -0400",-0400,Brian Duggan,
181,Commotion-dev, Commotion source now available via git daemon,"Thu, 29 Sep 2011 12:55:18 -0500",-0500,Ben West,"I'm behind some pretty sketchy wifi in Detroit right now, which may be the
cause, but I've so far been unable to check out the repo...

bash#~/commotion$ git clone git://git.chambana.net/commotion-openwrt
Initialized empty Git repository in
/blah/blah/blah/commotion/commotion-openwrt/.git/
fatal: The remote end hung up unexpectedly

Anyone else having the same problem?

On Tue, Sep 20, 2011 at 10:42 AM, Brian Duggan <duggan at newamerica.net>wrote:

> "
182,Commotion-dev, [Commotion-announce] Commotion source now,"Thu, 29 Sep 2011 13:05:12 -0500",-0500,Chris Ritzo,"Ben,
FYi Pulling a public clone worked for me a couple days ago.
-Chris

On Thu, Sep 29, 2011 at 12:56 PM, Josh King <joshking at newamerica.net> wrote:

> Hi Ben,
>
> We recently pushed a bunch of updates to the development site, and
> that's resulted in a few issues with the repository handling. Brian's
> working on it and should have it fixed in a bit.
>
> On Thu 29 Sep 2011 01:55:18 PM EDT, Ben West wrote:
> > I'm behind some pretty sketchy wifi in Detroit right now, which may be
> the
> > cause, but I've so far been unable to check out the repo...
> >
> > bash#~/commotion$ git clone git://git.chambana.net/commotion-openwrt
> > Initialized empty Git repository in
> > /blah/blah/blah/commotion/commotion-openwrt/.git/
> > fatal: The remote end hung up unexpectedly
> >
> > Anyone else having the same problem?
> >
> > On Tue, Sep 20, 2011 at 10:42 AM, Brian Duggan <duggan at newamerica.net
> >wrote:
> >
> "
183,Commotion-dev, [Commotion-announce] Commotion source now,"Thu, 29 Sep 2011 14:08:55 -0400",-0400,Andrew Reynolds,"Strange. I got the same error as Ben on commotion-openwrt, but I was
able to check out commotion.

-andrew

On 09/29/2011 02:07 PM, Brian Duggan wrote:
> Hi all,
> 
> Apologies for the confusion. Apparently, git-daemon had been working 
> until we upgraded to gitolite as our access control method. gitolite 
> decided it should have complete control over whether something was 
> served via git-daemon, so nothing is currently available publicly. I 
> should have it resolved in a few minutes.
> 
> Thanks,
> Brian
> 
> On Thu Sep 29 14:05:12 2011, Chris Ritzo wrote:
"
184,Commotion-dev, Commotion source now available via git daemon,"Thu, 29 Sep 2011 13:56:40 -0400",-0400,Josh King,"Hi Ben,

We recently pushed a bunch of updates to the development site, and 
that's resulted in a few issues with the repository handling. Brian's 
working on it and should have it fixed in a bit.

On Thu 29 Sep 2011 01:55:18 PM EDT, Ben West wrote:
> I'm behind some pretty sketchy wifi in Detroit right now, which may be the
> cause, but I've so far been unable to check out the repo...
>
> bash#~/commotion$ git clone git://git.chambana.net/commotion-openwrt
> Initialized empty Git repository in
> /blah/blah/blah/commotion/commotion-openwrt/.git/
> fatal: The remote end hung up unexpectedly
>
> Anyone else having the same problem?
>
> On Tue, Sep 20, 2011 at 10:42 AM, Brian Duggan <duggan at newamerica.net>wrote:
>
"
185,Commotion-dev, [Commotion-announce] Commotion source now,"Thu, 29 Sep 2011 14:07:05 -0400",-0400,Josh King,"Yeah, this was pretty recent. It was fixed, and then while we were 
trying to fix some other stuff and push general upgrades it broke again 
today. So it'll be working again soon. I'm also nearly finished setting 
up a completely new server that will be a lot more reliable and 
up-to-date.

On Thu 29 Sep 2011 02:05:12 PM EDT, Chris Ritzo wrote:
> Ben,
> FYi Pulling a public clone worked for me a couple days ago.
> -Chris
>
> On Thu, Sep 29, 2011 at 12:56 PM, Josh King <joshking at newamerica.net> wrote:
>
"
186,Commotion-dev, [Commotion-announce] Commotion source now,"Thu, 29 Sep 2011 14:07:44 -0400",-0400,Brian Duggan,"Hi all,

Apologies for the confusion. Apparently, git-daemon had been working 
until we upgraded to gitolite as our access control method. gitolite 
decided it should have complete control over whether something was 
served via git-daemon, so nothing is currently available publicly. I 
should have it resolved in a few minutes.

Thanks,
Brian

On Thu Sep 29 14:05:12 2011, Chris Ritzo wrote:
> Ben,
> FYi Pulling a public clone worked for me a couple days ago.
> -Chris
>
> On Thu, Sep 29, 2011 at 12:56 PM, Josh King <joshking at newamerica.net
> <mailto:joshking at newamerica.net"
187,Commotion-dev, [Commotion-announce] Commotion source now,"Thu, 29 Sep 2011 14:18:11 -0400",-0400,Brian Duggan,"commotion-openwrt is publicly available again. Sorry for the hiccup.

Brian

On Thu Sep 29 14:08:55 2011, Andrew Reynolds wrote:
> Strange. I got the same error as Ben on commotion-openwrt, but I was
> able to check out commotion.
>
> -andrew
>
> On 09/29/2011 02:07 PM, Brian Duggan wrote:
"
188,Commotion-dev, interesting tech offer from IRC,"Thu, 15 Dec 2011 13:12:20 -0500",-0500,Paul Bame,"Guessing most folks missed this generous offer in IRC, but it may be worth
someone (probably not me) following up on:

(09:49:53 AM) runesadvice: Good morning.  Anyone awake?
(11:26:56 AM) runesadvice: Checking in again: anyone awake?
(11:28:41 AM) paulbame: runesadvice: maybe ask your question?  someone may answer, or may answer later (several folks run caching irc proxies I think)
(11:31:09 AM) runesadvice: All right.
(11:31:38 AM) runesadvice: Many moons ago I grew up on the fringes of the third world, and was driven by the environment ...
(11:32:12 AM) runesadvice: ... to examine how one might get bandwidth and access made available without ...
(11:32:24 AM) runesadvice: ... substantial exposure to network outages, or government interference.
(11:32:50 AM) runesadvice: I ended up developing a protocol which was self-organising, and failure resilient.
(11:33:20 AM) runesadvice: It explicitly eschewed centralised systems, and even human interaction insofar possible.
(11:33:35 AM) runesadvice: Now you guys may have all solved all these things for yourselves - I don't know.
(11:34:01 AM) runesadvice: But on the offchance that someone felt this might be an unsolved problem ...
(11:34:20 AM) runesadvice: ... whether owing to computational limits, coordination difficulties or whatever ...
(11:34:33 AM) runesadvice: ... I felt that I should make the offer, even though I'm in the first world now.
(11:39:31 AM) runesadvice: Component problems I solved, for the record:  Unique ID, MITM attacks ...
(11:40:21 AM) runesadvice: routing, spoofing, throttling, load balancing.
(11:40:32 AM) runesadvice: Oh, and naming.
(12:19:32 PM) runesadvice: So I guess the question is: do y'all care?  Or want to know more?
(12:59:04 PM) bcduggan [~bcduggan at 64.124.162.98] entered the room.
(01:07:30 PM) paulbame: runesadvice: I think the answer is that folks would like to know more, and this isn't a real good way to reach them unfortunately.  I'll paste your intro into an email to the list and cc you if you want to share your email address  ?
(01:11:04 PM) runesadvice: OK, sure.  advice at csmctmto.bizfu.net
"
189,Commotion-dev, interesting tech offer from IRC,"Thu, 15 Dec 2011 14:01:35 -0500",-0500,Josh King,"Hey Paul,

This is really interesting! Runesadvice, pleased to make your
acquaintance. My name is Josh King, I'm the Commotion project's
technical lead. Some of the issues mentioned are ones that we have
approaches for, but our project isn't tied to any one strategy. Could
you elaborate a bit on your protocol and how it approaches some of the
problems you mentioned? I'm sure we would be interested in hearing more,
and perhaps we could share some of our thoughts. Thanks!

On 12/15/2011 01:12 PM, Paul Bame wrote:
> Guessing most folks missed this generous offer in IRC, but it may be worth
> someone (probably not me) following up on:
> 
> (09:49:53 AM) runesadvice: Good morning.  Anyone awake?
> (11:26:56 AM) runesadvice: Checking in again: anyone awake?
> (11:28:41 AM) paulbame: runesadvice: maybe ask your question?  someone may answer, or may answer later (several folks run caching irc proxies I think)
> (11:31:09 AM) runesadvice: All right.
> (11:31:38 AM) runesadvice: Many moons ago I grew up on the fringes of the third world, and was driven by the environment ...
> (11:32:12 AM) runesadvice: ... to examine how one might get bandwidth and access made available without ...
> (11:32:24 AM) runesadvice: ... substantial exposure to network outages, or government interference.
> (11:32:50 AM) runesadvice: I ended up developing a protocol which was self-organising, and failure resilient.
> (11:33:20 AM) runesadvice: It explicitly eschewed centralised systems, and even human interaction insofar possible.
> (11:33:35 AM) runesadvice: Now you guys may have all solved all these things for yourselves - I don't know.
> (11:34:01 AM) runesadvice: But on the offchance that someone felt this might be an unsolved problem ...
> (11:34:20 AM) runesadvice: ... whether owing to computational limits, coordination difficulties or whatever ...
> (11:34:33 AM) runesadvice: ... I felt that I should make the offer, even though I'm in the first world now.
> (11:39:31 AM) runesadvice: Component problems I solved, for the record:  Unique ID, MITM attacks ...
> (11:40:21 AM) runesadvice: routing, spoofing, throttling, load balancing.
> (11:40:32 AM) runesadvice: Oh, and naming.
> (12:19:32 PM) runesadvice: So I guess the question is: do y'all care?  Or want to know more?
> (12:59:04 PM) bcduggan [~bcduggan at 64.124.162.98] entered the room.
> (01:07:30 PM) paulbame: runesadvice: I think the answer is that folks would like to know more, and this isn't a real good way to reach them unfortunately.  I'll paste your intro into an email to the list and cc you if you want to share your email address  ?
> (01:11:04 PM) runesadvice: OK, sure.  advice at csmctmto.bizfu.net
> _______________________________________________
> Commotion-dev mailing list
> Commotion-dev at lists.chambana.net
> http://lists.chambana.net/mailman/listinfo/commotion-dev

-- 
Josh King

""I am an Anarchist not because I believe Anarchism is the final goal,
but because there is no such thing as a final goal."" -Rudolf Rocker

"
190,Commotion-dev, interesting tech offer from IRC,"Thu, 15 Dec 2011 22:14:42 +0100",+0100,L. Aaron Kaplan,"Hi!

Was it tested in any larger network ? I.e. at least a couple of hundred nodes?

A.

"
191,Commotion-dev, interesting tech offer from IRC,"Thu, 15 Dec 2011 22:48:05 +0100",+0100,L. Aaron Kaplan,"
On Dec 15, 2011, at 10:24 PM, advice at csmctmto.bizfu.net wrote:

"
192,Commotion-dev, interesting tech offer from IRC,"Fri, 16 Dec 2011 08:14:40 +1030",+1030,Jeremy Lakeman,"This is also something that The Serval Project is working on. Though
we're only in the early stages and have some other higher priorities
ATM.
We're planning to solve unique ids, spoofing and MITM by using
elliptic curve cryptography at the network layer. And we have plans to
load balance and store and forward some traffic types to improve
reliability.

But we'd certainly welcome any other ideas you might wish to share. We
aren't naive enough to assume that there aren't going to be any better
approaches.

On Fri, Dec 16, 2011 at 5:31 AM, Josh King <josh at chambana.net> wrote:
> Hey Paul,
>
> This is really interesting! Runesadvice, pleased to make your
> acquaintance. My name is Josh King, I'm the Commotion project's
> technical lead. Some of the issues mentioned are ones that we have
> approaches for, but our project isn't tied to any one strategy. Could
> you elaborate a bit on your protocol and how it approaches some of the
> problems you mentioned? I'm sure we would be interested in hearing more,
> and perhaps we could share some of our thoughts. Thanks!
>
> On 12/15/2011 01:12 PM, Paul Bame wrote:
"
193,Commotion-dev, interesting tech offer from IRC,"Fri, 16 Dec 2011 09:10:15 +1030",+1030,Jeremy Lakeman,"Absolutely, I'd love to read it.

We've come to the same conclusions, that trying to assume that a
wireless network can be treated in the same way as a wired network is
a flawed model. It constrains the methods you can use to solve
problems. Also that using IP packets to sense network topology,
duplicates the work that is already going on at the wifi driver level.

I've been doing some almost pure R&D with a novel approach to link
state tracking and path selection. Though ATM I'm only trying to
determine the path back to one node, I eventually intend to try and
generalise some of the ideas.

But I've never simulated anything. I'm testing this in the real world,
with broken adhoc wifi implementations, primarily on android handsets.

On Fri, Dec 16, 2011 at 8:23 AM,  <advice at csmctmto.bizfu.net> wrote:
"
194,Commotion-dev, Congrats on Wired / Boing-Boing story!,"Fri, 16 Dec 2011 20:20:02 -0600",-0600,Ben West,"http://www.wired.com/threatlevel/2011/12/internet-suitcase-dc/all/1
http://boingboing.net/2011/12/15/us-funded-open-network-initiat.html


(P.S. Nice still life w/ WRT54Gs and a Picostation.)

-- 
Ben West
me at benwest.name
"
195,Commotion-dev, OT: SOPA legislation could outlaw Tor,"Thu, 22 Dec 2011 15:46:23 -0600",-0600,Ben West,"Sorry for this topic being askew of the listserv's purpose, but I wanted to
share due to Commotion's goal of incorporating Tor:

http://news.cnet.com/8301-31921_3-57346592-281/how-sopas-circumvention-ban-could-put-a-target-on-tor/

-- 
Ben West
me at benwest.name
"
196,Commotion-dev, interesting tech offer from IRC,"Thu, 15 Dec 2011 13:12:20 -0500",-0500,Paul Bame,"Guessing most folks missed this generous offer in IRC, but it may be worth
someone (probably not me) following up on:

(09:49:53 AM) runesadvice: Good morning.  Anyone awake?
(11:26:56 AM) runesadvice: Checking in again: anyone awake?
(11:28:41 AM) paulbame: runesadvice: maybe ask your question?  someone may answer, or may answer later (several folks run caching irc proxies I think)
(11:31:09 AM) runesadvice: All right.
(11:31:38 AM) runesadvice: Many moons ago I grew up on the fringes of the third world, and was driven by the environment ...
(11:32:12 AM) runesadvice: ... to examine how one might get bandwidth and access made available without ...
(11:32:24 AM) runesadvice: ... substantial exposure to network outages, or government interference.
(11:32:50 AM) runesadvice: I ended up developing a protocol which was self-organising, and failure resilient.
(11:33:20 AM) runesadvice: It explicitly eschewed centralised systems, and even human interaction insofar possible.
(11:33:35 AM) runesadvice: Now you guys may have all solved all these things for yourselves - I don't know.
(11:34:01 AM) runesadvice: But on the offchance that someone felt this might be an unsolved problem ...
(11:34:20 AM) runesadvice: ... whether owing to computational limits, coordination difficulties or whatever ...
(11:34:33 AM) runesadvice: ... I felt that I should make the offer, even though I'm in the first world now.
(11:39:31 AM) runesadvice: Component problems I solved, for the record:  Unique ID, MITM attacks ...
(11:40:21 AM) runesadvice: routing, spoofing, throttling, load balancing.
(11:40:32 AM) runesadvice: Oh, and naming.
(12:19:32 PM) runesadvice: So I guess the question is: do y'all care?  Or want to know more?
(12:59:04 PM) bcduggan [~bcduggan at 64.124.162.98] entered the room.
(01:07:30 PM) paulbame: runesadvice: I think the answer is that folks would like to know more, and this isn't a real good way to reach them unfortunately.  I'll paste your intro into an email to the list and cc you if you want to share your email address  ?
(01:11:04 PM) runesadvice: OK, sure.  advice at csmctmto.bizfu.net

"
197,Commotion-dev, interesting tech offer from IRC,"Thu, 15 Dec 2011 14:01:35 -0500",-0500,Josh King,"Hey Paul,

This is really interesting! Runesadvice, pleased to make your
acquaintance. My name is Josh King, I'm the Commotion project's
technical lead. Some of the issues mentioned are ones that we have
approaches for, but our project isn't tied to any one strategy. Could
you elaborate a bit on your protocol and how it approaches some of the
problems you mentioned? I'm sure we would be interested in hearing more,
and perhaps we could share some of our thoughts. Thanks!

On 12/15/2011 01:12 PM, Paul Bame wrote:
> Guessing most folks missed this generous offer in IRC, but it may be worth
> someone (probably not me) following up on:
> 
> (09:49:53 AM) runesadvice: Good morning.  Anyone awake?
> (11:26:56 AM) runesadvice: Checking in again: anyone awake?
> (11:28:41 AM) paulbame: runesadvice: maybe ask your question?  someone may answer, or may answer later (several folks run caching irc proxies I think)
> (11:31:09 AM) runesadvice: All right.
> (11:31:38 AM) runesadvice: Many moons ago I grew up on the fringes of the third world, and was driven by the environment ...
> (11:32:12 AM) runesadvice: ... to examine how one might get bandwidth and access made available without ...
> (11:32:24 AM) runesadvice: ... substantial exposure to network outages, or government interference.
> (11:32:50 AM) runesadvice: I ended up developing a protocol which was self-organising, and failure resilient.
> (11:33:20 AM) runesadvice: It explicitly eschewed centralised systems, and even human interaction insofar possible.
> (11:33:35 AM) runesadvice: Now you guys may have all solved all these things for yourselves - I don't know.
> (11:34:01 AM) runesadvice: But on the offchance that someone felt this might be an unsolved problem ...
> (11:34:20 AM) runesadvice: ... whether owing to computational limits, coordination difficulties or whatever ...
> (11:34:33 AM) runesadvice: ... I felt that I should make the offer, even though I'm in the first world now.
> (11:39:31 AM) runesadvice: Component problems I solved, for the record:  Unique ID, MITM attacks ...
> (11:40:21 AM) runesadvice: routing, spoofing, throttling, load balancing.
> (11:40:32 AM) runesadvice: Oh, and naming.
> (12:19:32 PM) runesadvice: So I guess the question is: do y'all care?  Or want to know more?
> (12:59:04 PM) bcduggan [~bcduggan at 64.124.162.98] entered the room.
> (01:07:30 PM) paulbame: runesadvice: I think the answer is that folks would like to know more, and this isn't a real good way to reach them unfortunately.  I'll paste your intro into an email to the list and cc you if you want to share your email address  ?
> (01:11:04 PM) runesadvice: OK, sure.  advice at csmctmto.bizfu.net
> _______________________________________________
> Commotion-dev mailing list
> Commotion-dev at lists.chambana.net
> http://lists.chambana.net/mailman/listinfo/commotion-dev

-- 
Josh King

""I am an Anarchist not because I believe Anarchism is the final goal,
but because there is no such thing as a final goal."" -Rudolf Rocker

"
198,Commotion-dev, interesting tech offer from IRC,"Thu, 15 Dec 2011 22:14:42 +0100",+0100,L. Aaron Kaplan,"Hi!

Was it tested in any larger network ? I.e. at least a couple of hundred nodes?

A.

"
199,Commotion-dev, interesting tech offer from IRC,"Thu, 15 Dec 2011 22:48:05 +0100",+0100,L. Aaron Kaplan,"
On Dec 15, 2011, at 10:24 PM, advice at csmctmto.bizfu.net wrote:

"
200,Commotion-dev, interesting tech offer from IRC,"Fri, 16 Dec 2011 08:14:40 +1030",+1030,Jeremy Lakeman,"This is also something that The Serval Project is working on. Though
we're only in the early stages and have some other higher priorities
ATM.
We're planning to solve unique ids, spoofing and MITM by using
elliptic curve cryptography at the network layer. And we have plans to
load balance and store and forward some traffic types to improve
reliability.

But we'd certainly welcome any other ideas you might wish to share. We
aren't naive enough to assume that there aren't going to be any better
approaches.

On Fri, Dec 16, 2011 at 5:31 AM, Josh King <josh at chambana.net> wrote:
> Hey Paul,
>
> This is really interesting! Runesadvice, pleased to make your
> acquaintance. My name is Josh King, I'm the Commotion project's
> technical lead. Some of the issues mentioned are ones that we have
> approaches for, but our project isn't tied to any one strategy. Could
> you elaborate a bit on your protocol and how it approaches some of the
> problems you mentioned? I'm sure we would be interested in hearing more,
> and perhaps we could share some of our thoughts. Thanks!
>
> On 12/15/2011 01:12 PM, Paul Bame wrote:
"
201,Commotion-dev, interesting tech offer from IRC,"Fri, 16 Dec 2011 09:10:15 +1030",+1030,Jeremy Lakeman,"Absolutely, I'd love to read it.

We've come to the same conclusions, that trying to assume that a
wireless network can be treated in the same way as a wired network is
a flawed model. It constrains the methods you can use to solve
problems. Also that using IP packets to sense network topology,
duplicates the work that is already going on at the wifi driver level.

I've been doing some almost pure R&D with a novel approach to link
state tracking and path selection. Though ATM I'm only trying to
determine the path back to one node, I eventually intend to try and
generalise some of the ideas.

But I've never simulated anything. I'm testing this in the real world,
with broken adhoc wifi implementations, primarily on android handsets.

On Fri, Dec 16, 2011 at 8:23 AM,  <advice at csmctmto.bizfu.net> wrote:
"
202,Commotion-dev, Congrats on Wired / Boing-Boing story!,"Fri, 16 Dec 2011 20:20:02 -0600",-0600,Ben West,"http://www.wired.com/threatlevel/2011/12/internet-suitcase-dc/all/1
http://boingboing.net/2011/12/15/us-funded-open-network-initiat.html


(P.S. Nice still life w/ WRT54Gs and a Picostation.)

-- 
Ben West
me at benwest.name
"
203,Commotion-dev, OT: SOPA legislation could outlaw Tor,"Thu, 22 Dec 2011 15:46:23 -0600",-0600,Ben West,"Sorry for this topic being askew of the listserv's purpose, but I wanted to
share due to Commotion's goal of incorporating Tor:

http://news.cnet.com/8301-31921_3-57346592-281/how-sopas-circumvention-ban-could-put-a-target-on-tor/

-- 
Ben West
me at benwest.name
"
204,Commotion-dev, Has anyone tried running Commotion with multiple,"Mon, 2 Jan 2012 19:23:29 -0600",-0600,Ben West,"I just cloned & compiled the most recent repo contents for Commotion, and I
am wandering thru its default config files.

I notice the functions setup_interface_meshif() and setup_interface_apif()
will operate on the hardware names of the mesh and AP interfaces,
respectively.
https://tech.chambana.net/documents/1

Has all testing/operation for Commotion to date been done on devices with
multiple physical radios (or just one radio and only the mesh interface)?
 Has anyone yet tried running mesh + AP on multiple virtual APs (VAPs) with
either ath5k or ath9k?

-- 
Ben West
me at benwest.name
"
205,Commotion-dev, Has anyone tried running Commotion with,"Tue, 03 Jan 2012 09:27:48 -0500",-0500,Josh King,"Hi Ben,

Actually most development on CommotionWRT has been done on quite the
opposite (devices w/ one radio, but multiple VAPs). There is some
configuration done w/ hardware interfaces, but those interface names are
retrieved as much as possible from the OpenWRT config files, and each
VAP when it's created has an actual interface name (like wlan0), so it's
all VAPs that it's operating on. I'm typing from my phone right now, but
as far as I recall boot-up order goes like this:

* OpenWRT by default starts without an /etc/config/wireless file. On
first boot, /etc/init.d/network checks for that file and if it doesn't
find it, detects the wireless cards and creates a default config (using
code in /lib/wifi/mac80211.sh), with the radios marked disabled. This is
hijacked by the /etc/init.d/meshconfig script, which runs first and does
the detection process to generate /etc/config/wireless. It then parses
/etc/config/network, and makes sure that for each network interface,
there's a VAP in /etc/config/wireless (it tries to distribute them
somewhat intelligently; if there are multiple physical radios, it puts
the ad-hoc mesh interface on the first one and then distributes the AP
interfaces across the other radios).

* Then the regular OpenWRT network initialization runs, which calls the
coldplug_* functions for each Commotion interface. These functions
configure the wireless VAPs created in the last step (setting SSIDs,
etc). The wireless is then brought up.

* Finally, the setup_interface_* functions are called, which configure
the IPs, firewall, etc for each interface. They also make a series of
hotplug calls, which run scripts in /etc/hotplug.d/ to configure various
services, like OLSRd.

There are definitely things that could be done better. For instance,
there are default interface names in /etc/config/network. This is done
to avoid complexity, as OpenWRT seems to assume that if you're building
a hardware-specific image you at least know what the hardware looks like
;-) However, this falls apart when building, say, an x86 iso. It's also
a bit of a problem in that it seems that most drivers want to have the
ad-hoc interface on the highest numbered interface (i.e., if you have an
AP on wlan0, and an ad-hoc on wlan1, and then you add another AP, the
ad-hoc becomes wlan2, and the second AP becomes wlan1, rather than just
incrementing interfaces like you'd expect). There's also the fact that
the whole IP address selection scheme from converting MAC addresses is
rather naive, and we should support several replacements as well.
Ideally, these would include hashing the MAC address to create the IP, a
la the IPv4LL or whatever it's called standard that gets you 169.254.*
addresses, along with the option of randomizing the MAC address, or
using just IPv6 addresses, or generating this all from a UUID that's
created at boot. I'm hoping to address all this for a forthcoming PR2.x
point release, but not all of it is solidified so patches, commits, and
suggestions welcome.



Ben West <me at benwest.name> wrote:

>I just cloned & compiled the most recent repo contents for Commotion,
>and I
>am wandering thru its default config files.
>
>I notice the functions setup_interface_meshif() and
>setup_interface_apif()
>will operate on the hardware names of the mesh and AP interfaces,
>respectively.
>https://tech.chambana.net/documents/1
>
>Has all testing/operation for Commotion to date been done on devices
>with
>multiple physical radios (or just one radio and only the mesh
>interface)?
>Has anyone yet tried running mesh + AP on multiple virtual APs (VAPs)
>with
>either ath5k or ath9k?
>
>-- 
>Ben West
>me at benwest.name
>_______________________________________________
>Commotion-dev mailing list
>Commotion-dev at lists.chambana.net
>http://lists.chambana.net/mailman/listinfo/commotion-dev

"
206,Commotion-dev, Has anyone tried running Commotion with,"Tue, 3 Jan 2012 17:04:16 -0600",-0600,Ben West,"Hi Josh,

Thanks for detailed response. I had posted the initial query specifically
about Commotion and multiple vAP's since I am looking for a platform to
migrate ~50 ath5k-based radios off of the current psuedo-stable ROBIN r3xxx
firmware.

Eliding over a long story: ROBIN works well present at present running OLSR
0.5.6-based  mesh on single-radio ath5k devices, but only on ath5k chipset
and with the madwifi driver packaged into OpenWRT Kamikaze.  It also has a
hard dependency on the ah-demo mode (as opposed to adhoc), and in
particular on running ah-demo + 2 other vAPs in managed mode.

There is an unstable version of ROBIN v2 based on Backfire (and thus with
ath9k support), but its developer community is tied up with other
priorities.

I'm presently looking at a couple options for migrating away from ROBIN
r3xxx:

1. Fix the broken stuff in ROBIN v2, so that it is suitable for production
use
2. Add ROBIN-like features to Commotion

Ideally, a combination of #1 and #2 would yield mutual benefits for both
user bases, especially since the current roadmap w/ ROBIN may end up
abandoning a large fraction of its user base.

The ""ROBIN-like"" features would be:

1. Centralized config mgmt via mesh dashboards like Cloudtrax, robin-dash,
wifi-mesh.
2. Related to #1, reporting of mesh health and live operational stats back
to dashboard (i.e. uptime, RSSI, # connected clients)
3. Support for CoovaChilli v1.2 captive portals
4. Auto-configuration of newly flashed nodes

ROBIN v2 does support all four, but it has stability problems with the
r28xxx generation Backfire it was last tested on in Sept. `11.

On Tue, Jan 3, 2012 at 8:27 AM, Josh King <josh at chambana.net> wrote:

> Hi Ben,
>
> Actually most development on CommotionWRT has been done on quite the
> opposite (devices w/ one radio, but multiple VAPs). There is some
> configuration done w/ hardware interfaces, but those interface names are
> retrieved as much as possible from the OpenWRT config files, and each
> VAP when it's created has an actual interface name (like wlan0), so it's
> all VAPs that it's operating on. I'm typing from my phone right now, but
> as far as I recall boot-up order goes like this:
>
> * OpenWRT by default starts without an /etc/config/wireless file. On
> first boot, /etc/init.d/network checks for that file and if it doesn't
> find it, detects the wireless cards and creates a default config (using
> code in /lib/wifi/mac80211.sh), with the radios marked disabled. This is
> hijacked by the /etc/init.d/meshconfig script, which runs first and does
> the detection process to generate /etc/config/wireless. It then parses
> /etc/config/network, and makes sure that for each network interface,
> there's a VAP in /etc/config/wireless (it tries to distribute them
> somewhat intelligently; if there are multiple physical radios, it puts
> the ad-hoc mesh interface on the first one and then distributes the AP
> interfaces across the other radios).
>
> * Then the regular OpenWRT network initialization runs, which calls the
> coldplug_* functions for each Commotion interface. These functions
> configure the wireless VAPs created in the last step (setting SSIDs,
> etc). The wireless is then brought up.
>
> * Finally, the setup_interface_* functions are called, which configure
> the IPs, firewall, etc for each interface. They also make a series of
> hotplug calls, which run scripts in /etc/hotplug.d/ to configure various
> services, like OLSRd.
>
> There are definitely things that could be done better. For instance,
> there are default interface names in /etc/config/network. This is done
> to avoid complexity, as OpenWRT seems to assume that if you're building
> a hardware-specific image you at least know what the hardware looks like
> ;-) However, this falls apart when building, say, an x86 iso. It's also
> a bit of a problem in that it seems that most drivers want to have the
> ad-hoc interface on the highest numbered interface (i.e., if you have an
> AP on wlan0, and an ad-hoc on wlan1, and then you add another AP, the
> ad-hoc becomes wlan2, and the second AP becomes wlan1, rather than just
> incrementing interfaces like you'd expect). There's also the fact that
> the whole IP address selection scheme from converting MAC addresses is
> rather naive, and we should support several replacements as well.
> Ideally, these would include hashing the MAC address to create the IP, a
> la the IPv4LL or whatever it's called standard that gets you 169.254.*
> addresses, along with the option of randomizing the MAC address, or
> using just IPv6 addresses, or generating this all from a UUID that's
> created at boot. I'm hoping to address all this for a forthcoming PR2.x
> point release, but not all of it is solidified so patches, commits, and
> suggestions welcome.
>
>
>
> Ben West <me at benwest.name> wrote:
>
> >I just cloned & compiled the most recent repo contents for Commotion,
> >and I
> >am wandering thru its default config files.
> >
> >I notice the functions setup_interface_meshif() and
> >setup_interface_apif()
> >will operate on the hardware names of the mesh and AP interfaces,
> >respectively.
> >https://tech.chambana.net/documents/1
> >
> >Has all testing/operation for Commotion to date been done on devices
> >with
> >multiple physical radios (or just one radio and only the mesh
> >interface)?
> >Has anyone yet tried running mesh + AP on multiple virtual APs (VAPs)
> >with
> >either ath5k or ath9k?
> >
> >--
> >Ben West
> >me at benwest.name
> >_______________________________________________
> >Commotion-dev mailing list
> >Commotion-dev at lists.chambana.net
> >http://lists.chambana.net/mailman/listinfo/commotion-dev
>
"
207,Commotion-dev, Commotion Messaging / Audit Survey,"Fri, 6 Jan 2012 12:43:03 -0500",-0500,Nina Bianchi,"Greetings!

We (the Work Department) are working on a range of Commotion project components and are kicking off the messaging development and design process.

We've created a short survey to audit and investigate the current messaging around Commotion with the goal of developing the most appropriate, sustainable and dynamic identity / branding.

Please take a little bit of time to fill this out by Wednesday, January 11, 5:00 PM EST. This is an essential step and we appreciate your time.
https://docs.google.com/spreadsheet/viewform?hl=en_US&formkey=dEx0OVlZV3BNaGVicFhLRGNDMDZvQWc6MQ#gid=0

Your input is greatly appreciated and will help guide the public facing visual framework for Commotion.

Thanks in advance,
Nina

"
208,Commotion-dev, Boilerplate Android code pushed,"Tue, 10 Jan 2012 14:47:41 -0500",-0500,Brian Duggan,
209,Commotion-dev, Boilerplate Android code pushed,"Tue, 10 Jan 2012 15:41:46 -0500",-0500,Hans-Christoph Steiner,"
Hey Brian,

I briefly checked out your code, I'll dig in more soon.  Did you get ad-hoc mode running after all?  I assume so since you said you got olsrd running.  Apparently, on some devices, you have to replace the wpa_supplicant binary in order to get ad-hoc mode working:
http://forum.xda-developers.com/showthread.php?t=929865

Cyanogenmod seems to include everything needed to run ad-hoc though.

I just found this, which looks like it should provide us with some useful code:
http://code.google.com/p/adhoc-on-android/

On approach that might work for us is to include our own custom wpa_supplicant in the app.

.hc

On Jan 10, 2012, at 2:47 PM, Brian Duggan wrote:

> "
210,Commotion-dev, Commotion Messaging / Audit Survey,"Tue, 10 Jan 2012 16:20:17 -0500",-0500,Nina Bianchi,"Hi Everyone,

Just a reminder, please save a time to fill out our Commotion Messaging Audit survey. 

The deadline is tomorrow, Wednesday, January 11, 5:00 PM EST.

https://docs.google.com/spreadsheet/viewform?hl=en_US&formkey=dEx0OVlZV3BNaGVicFhLRGNDMDZvQWc6MQ#gid=0

Your input is valuable, we hope that you're able to contribute to this first stage of the identity development process.

Looking forward,
Nina

On Jan 6, 2012, at 12:43 PM, Nina Bianchi wrote:

> Greetings!
> 
> We (the Work Department) are working on a range of Commotion project components and are kicking off the messaging development and design process.
> 
> We've created a short survey to audit and investigate the current messaging around Commotion with the goal of developing the most appropriate, sustainable and dynamic identity / branding.
> 
> Please take a little bit of time to fill this out by Wednesday, January 11, 5:00 PM EST. This is an essential step and we appreciate your time.
> https://docs.google.com/spreadsheet/viewform?hl=en_US&formkey=dEx0OVlZV3BNaGVicFhLRGNDMDZvQWc6MQ#gid=0
> 
> Your input is greatly appreciated and will help guide the public facing visual framework for Commotion.
> 
> Thanks in advance,
> Nina
> 
> _______________________________________________
> Commotion-dev mailing list
> Commotion-dev at lists.chambana.net
> http://lists.chambana.net/mailman/listinfo/commotion-dev

"
211,Commotion-dev, Boilerplate Android code pushed,"Wed, 11 Jan 2012 08:58:43 +1030",+1030,Jeremy Lakeman,"Getting Adhoc and olsrd running is something the Serval Mesh software
is already trying to do. We default to BATMAN but we have a setting to
run olsr instead.

We started with wifi tether's adhoc support and have tried to improve
on it. We've written a generic approach to discovering how to control
the wifi driver on each handset. For the handsets that need something
different, we've got a bunch of text files describing file names we
should be looking for, and a matching control script.

But if we don't have a specific script that matches this handset, we
look through the filesystem looking for *.ko. Then read through every
short script in /system looking for insmod commands and any arguments
that we need to pass through. And we've got a fallback method that
tries a load driver library call that may or may not work.

Hopefully one of these approaches will succeed.




On Wed, Jan 11, 2012 at 7:11 AM, Hans-Christoph Steiner <hans at at.or.at> wrote:
>
> Hey Brian,
>
> I briefly checked out your code, I'll dig in more soon. ?Did you get ad-hoc mode running after all? ?I assume so since you said you got olsrd running. ?Apparently, on some devices, you have to replace the wpa_supplicant binary in order to get ad-hoc mode working:
> http://forum.xda-developers.com/showthread.php?t=929865
>
> Cyanogenmod seems to include everything needed to run ad-hoc though.
>
> I just found this, which looks like it should provide us with some useful code:
> http://code.google.com/p/adhoc-on-android/
>
> On approach that might work for us is to include our own custom wpa_supplicant in the app.
>
> .hc
>
> On Jan 10, 2012, at 2:47 PM, Brian Duggan wrote:
>
"
212,Commotion-dev, Boilerplate Android code pushed,"Tue, 10 Jan 2012 18:15:24 -0500",-0500,Hans-Christoph Steiner,"
Wow, that sounds quite elaborate, I'd like to see it in action :)  Can you point us towards the code that is doing all this?

My guess is that the level of detail will be needed to handle a lot of cases, but I think we have a good chance of simplifying things in the long run by including our own binaries in the app for things that are not kernel mods.

I'd love to find a way to include kernel mods that work across kernel versions, but I have not found a way to do that.  It must be possible, since people like nvidia are shipping binary kernel mods that work across a number of kernel versions.

.hc

On Jan 10, 2012, at 5:28 PM, Jeremy Lakeman wrote:

> Getting Adhoc and olsrd running is something the Serval Mesh software
> is already trying to do. We default to BATMAN but we have a setting to
> run olsr instead.
> 
> We started with wifi tether's adhoc support and have tried to improve
> on it. We've written a generic approach to discovering how to control
> the wifi driver on each handset. For the handsets that need something
> different, we've got a bunch of text files describing file names we
> should be looking for, and a matching control script.
> 
> But if we don't have a specific script that matches this handset, we
> look through the filesystem looking for *.ko. Then read through every
> short script in /system looking for insmod commands and any arguments
> that we need to pass through. And we've got a fallback method that
> tries a load driver library call that may or may not work.
> 
> Hopefully one of these approaches will succeed.
> 
> 
> 
> 
> On Wed, Jan 11, 2012 at 7:11 AM, Hans-Christoph Steiner <hans at at.or.at> wrote:
"
213,Commotion-dev, Boilerplate Android code pushed,"Wed, 11 Jan 2012 10:13:04 +1030",+1030,Jeremy Lakeman,"Getting Adhoc and olsrd running is something the Serval Mesh software
is already trying to do. We default to BATMAN but we have a setting to
run olsr instead.

We started with wifi tether's adhoc support and have tried to improve
on it. We've written a generic approach to discovering how to control
the wifi driver on each handset. For the handsets that need something
different, we've got a bunch of text files describing file names we
should be looking for, and a matching control script.

But if we don't have a specific script that matches this handset, we
look through the filesystem looking for *.ko. Then read through every
short script in /system looking for insmod commands and any arguments
that we need to pass through. And we've got a fallback method that
tries a load driver library call that may or may not work.

Hopefully one of these approaches will succeed.




On Wed, Jan 11, 2012 at 7:11 AM, Hans-Christoph Steiner <hans at at.or.at> wrote:
>
> Hey Brian,
>
> I briefly checked out your code, I'll dig in more soon. ?Did you get ad-hoc mode running after all? ?I assume so since you said you got olsrd running. ?Apparently, on some devices, you have to replace the wpa_supplicant binary in order to get ad-hoc mode working:
> http://forum.xda-developers.com/showthread.php?t=929865
>
> Cyanogenmod seems to include everything needed to run ad-hoc though.
>
> I just found this, which looks like it should provide us with some useful code:
> http://code.google.com/p/adhoc-on-android/
>
> On approach that might work for us is to include our own custom wpa_supplicant in the app.
>
> .hc
>
> On Jan 10, 2012, at 2:47 PM, Brian Duggan wrote:
>
"
214,Commotion-dev, Boilerplate Android code pushed,"Wed, 11 Jan 2012 10:13:47 +1030",+1030,Jeremy Lakeman,"doh, had the saved draft show up on my laptop, thought I hadn't sent it...


On Wed, Jan 11, 2012 at 10:13 AM, Jeremy Lakeman
<Jeremy.Lakeman at gmail.com> wrote:
> Getting Adhoc and olsrd running is something the Serval Mesh software
> is already trying to do. We default to BATMAN but we have a setting to
> run olsr instead.
>
> We started with wifi tether's adhoc support and have tried to improve
> on it. We've written a generic approach to discovering how to control
> the wifi driver on each handset. For the handsets that need something
> different, we've got a bunch of text files describing file names we
> should be looking for, and a matching control script.
>
> But if we don't have a specific script that matches this handset, we
> look through the filesystem looking for *.ko. Then read through every
> short script in /system looking for insmod commands and any arguments
> that we need to pass through. And we've got a fallback method that
> tries a load driver library call that may or may not work.
>
> Hopefully one of these approaches will succeed.
>
>
>
>
> On Wed, Jan 11, 2012 at 7:11 AM, Hans-Christoph Steiner <hans at at.or.at> wrote:
"
215,Commotion-dev, Boilerplate Android code pushed,"Wed, 11 Jan 2012 10:24:29 +1030",+1030,Jeremy Lakeman,"Serval's software is available here https://github.com/servalproject/batphone
The specific pieces you might want to look at are;

data/conf/wifichipsets/
src/org/servalproject/system/ChipsetDetection.java
src/org/servalproject/system/WiFiRadio.java

and the edify scripts are interpreted by (including the call to
libhardware_legacy wifi_load_driver / wifi_unload_driver);
native/adhoc-edify/

(The data directory is zipped in the build process, and unzipped by
our first run process into /data/data/org.servalproject)

And the apk is available on the market;
https://market.android.com/details?id=org.servalproject

This approach works with a fair number of stock (but rooted) handsets.
We haven't gotten around to trying to using wifi supplicants that
already support adhoc mode.

On Wed, Jan 11, 2012 at 9:45 AM, Hans-Christoph Steiner <hans at at.or.at> wrote:
>
> Wow, that sounds quite elaborate, I'd like to see it in action :) ?Can you point us towards the code that is doing all this?
>
> My guess is that the level of detail will be needed to handle a lot of cases, but I think we have a good chance of simplifying things in the long run by including our own binaries in the app for things that are not kernel mods.
>
> I'd love to find a way to include kernel mods that work across kernel versions, but I have not found a way to do that. ?It must be possible, since people like nvidia are shipping binary kernel mods that work across a number of kernel versions.
>
> .hc
>
> On Jan 10, 2012, at 5:28 PM, Jeremy Lakeman wrote:
>
"
216,Commotion-dev, Boilerplate Android code pushed,"Tue, 10 Jan 2012 21:44:26 -0500",-0500,Hans-Christoph Steiner,"
A little bug report, in case you're interested:

I just downloaded Serval Mesh from the Marketplace on my Droid running CM7.1.  It gets thru ""Unpacking the stuff I need"", ""Checking for root access"", and ""I think I know how to control your wifi"", then says ""Skipped check for experimental support since we already support your handset."", and gets stuck on ""Test if WiFi control works"".  It just seems to try again and again.

.hc

On Jan 10, 2012, at 6:54 PM, Jeremy Lakeman wrote:

> Serval's software is available here https://github.com/servalproject/batphone
> The specific pieces you might want to look at are;
> 
> data/conf/wifichipsets/
> src/org/servalproject/system/ChipsetDetection.java
> src/org/servalproject/system/WiFiRadio.java
> 
> and the edify scripts are interpreted by (including the call to
> libhardware_legacy wifi_load_driver / wifi_unload_driver);
> native/adhoc-edify/
> 
> (The data directory is zipped in the build process, and unzipped by
> our first run process into /data/data/org.servalproject)
> 
> And the apk is available on the market;
> https://market.android.com/details?id=org.servalproject
> 
> This approach works with a fair number of stock (but rooted) handsets.
> We haven't gotten around to trying to using wifi supplicants that
> already support adhoc mode.
> 
> On Wed, Jan 11, 2012 at 9:45 AM, Hans-Christoph Steiner <hans at at.or.at> wrote:
"
217,Commotion-dev, Commotion Messaging / Audit Survey,"Wed, 18 Jan 2012 01:36:18 -0600",-0600,Ben West,"I was waylaid with cold and having recently moved (not a good
combination!).  I filled out a response to this survey, tho late.  Hope it
is still useful.

-- 
Ben West
http://gowasabi.net
ben at gowasabi.net
"
218,Commotion-dev, Has anyone tried running Commotion with multiple,"Mon, 2 Jan 2012 19:23:29 -0600",-0600,Ben West,"I just cloned & compiled the most recent repo contents for Commotion, and I
am wandering thru its default config files.

I notice the functions setup_interface_meshif() and setup_interface_apif()
will operate on the hardware names of the mesh and AP interfaces,
respectively.
https://tech.chambana.net/documents/1

Has all testing/operation for Commotion to date been done on devices with
multiple physical radios (or just one radio and only the mesh interface)?
 Has anyone yet tried running mesh + AP on multiple virtual APs (VAPs) with
either ath5k or ath9k?

-- 
Ben West
me at benwest.name
"
219,Commotion-dev, Has anyone tried running Commotion with,"Tue, 03 Jan 2012 09:27:48 -0500",-0500,Josh King,"Hi Ben,

Actually most development on CommotionWRT has been done on quite the
opposite (devices w/ one radio, but multiple VAPs). There is some
configuration done w/ hardware interfaces, but those interface names are
retrieved as much as possible from the OpenWRT config files, and each
VAP when it's created has an actual interface name (like wlan0), so it's
all VAPs that it's operating on. I'm typing from my phone right now, but
as far as I recall boot-up order goes like this:

* OpenWRT by default starts without an /etc/config/wireless file. On
first boot, /etc/init.d/network checks for that file and if it doesn't
find it, detects the wireless cards and creates a default config (using
code in /lib/wifi/mac80211.sh), with the radios marked disabled. This is
hijacked by the /etc/init.d/meshconfig script, which runs first and does
the detection process to generate /etc/config/wireless. It then parses
/etc/config/network, and makes sure that for each network interface,
there's a VAP in /etc/config/wireless (it tries to distribute them
somewhat intelligently; if there are multiple physical radios, it puts
the ad-hoc mesh interface on the first one and then distributes the AP
interfaces across the other radios).

* Then the regular OpenWRT network initialization runs, which calls the
coldplug_* functions for each Commotion interface. These functions
configure the wireless VAPs created in the last step (setting SSIDs,
etc). The wireless is then brought up.

* Finally, the setup_interface_* functions are called, which configure
the IPs, firewall, etc for each interface. They also make a series of
hotplug calls, which run scripts in /etc/hotplug.d/ to configure various
services, like OLSRd.

There are definitely things that could be done better. For instance,
there are default interface names in /etc/config/network. This is done
to avoid complexity, as OpenWRT seems to assume that if you're building
a hardware-specific image you at least know what the hardware looks like
;-) However, this falls apart when building, say, an x86 iso. It's also
a bit of a problem in that it seems that most drivers want to have the
ad-hoc interface on the highest numbered interface (i.e., if you have an
AP on wlan0, and an ad-hoc on wlan1, and then you add another AP, the
ad-hoc becomes wlan2, and the second AP becomes wlan1, rather than just
incrementing interfaces like you'd expect). There's also the fact that
the whole IP address selection scheme from converting MAC addresses is
rather naive, and we should support several replacements as well.
Ideally, these would include hashing the MAC address to create the IP, a
la the IPv4LL or whatever it's called standard that gets you 169.254.*
addresses, along with the option of randomizing the MAC address, or
using just IPv6 addresses, or generating this all from a UUID that's
created at boot. I'm hoping to address all this for a forthcoming PR2.x
point release, but not all of it is solidified so patches, commits, and
suggestions welcome.



Ben West <me at benwest.name> wrote:

>I just cloned & compiled the most recent repo contents for Commotion,
>and I
>am wandering thru its default config files.
>
>I notice the functions setup_interface_meshif() and
>setup_interface_apif()
>will operate on the hardware names of the mesh and AP interfaces,
>respectively.
>https://tech.chambana.net/documents/1
>
>Has all testing/operation for Commotion to date been done on devices
>with
>multiple physical radios (or just one radio and only the mesh
>interface)?
>Has anyone yet tried running mesh + AP on multiple virtual APs (VAPs)
>with
>either ath5k or ath9k?
>
>-- 
>Ben West
>me at benwest.name
>_______________________________________________
>Commotion-dev mailing list
>Commotion-dev at lists.chambana.net
>http://lists.chambana.net/mailman/listinfo/commotion-dev

"
220,Commotion-dev, Has anyone tried running Commotion with,"Tue, 3 Jan 2012 17:04:16 -0600",-0600,Ben West,"Hi Josh,

Thanks for detailed response. I had posted the initial query specifically
about Commotion and multiple vAP's since I am looking for a platform to
migrate ~50 ath5k-based radios off of the current psuedo-stable ROBIN r3xxx
firmware.

Eliding over a long story: ROBIN works well present at present running OLSR
0.5.6-based  mesh on single-radio ath5k devices, but only on ath5k chipset
and with the madwifi driver packaged into OpenWRT Kamikaze.  It also has a
hard dependency on the ah-demo mode (as opposed to adhoc), and in
particular on running ah-demo + 2 other vAPs in managed mode.

There is an unstable version of ROBIN v2 based on Backfire (and thus with
ath9k support), but its developer community is tied up with other
priorities.

I'm presently looking at a couple options for migrating away from ROBIN
r3xxx:

1. Fix the broken stuff in ROBIN v2, so that it is suitable for production
use
2. Add ROBIN-like features to Commotion

Ideally, a combination of #1 and #2 would yield mutual benefits for both
user bases, especially since the current roadmap w/ ROBIN may end up
abandoning a large fraction of its user base.

The ""ROBIN-like"" features would be:

1. Centralized config mgmt via mesh dashboards like Cloudtrax, robin-dash,
wifi-mesh.
2. Related to #1, reporting of mesh health and live operational stats back
to dashboard (i.e. uptime, RSSI, # connected clients)
3. Support for CoovaChilli v1.2 captive portals
4. Auto-configuration of newly flashed nodes

ROBIN v2 does support all four, but it has stability problems with the
r28xxx generation Backfire it was last tested on in Sept. `11.

On Tue, Jan 3, 2012 at 8:27 AM, Josh King <josh at chambana.net> wrote:

> Hi Ben,
>
> Actually most development on CommotionWRT has been done on quite the
> opposite (devices w/ one radio, but multiple VAPs). There is some
> configuration done w/ hardware interfaces, but those interface names are
> retrieved as much as possible from the OpenWRT config files, and each
> VAP when it's created has an actual interface name (like wlan0), so it's
> all VAPs that it's operating on. I'm typing from my phone right now, but
> as far as I recall boot-up order goes like this:
>
> * OpenWRT by default starts without an /etc/config/wireless file. On
> first boot, /etc/init.d/network checks for that file and if it doesn't
> find it, detects the wireless cards and creates a default config (using
> code in /lib/wifi/mac80211.sh), with the radios marked disabled. This is
> hijacked by the /etc/init.d/meshconfig script, which runs first and does
> the detection process to generate /etc/config/wireless. It then parses
> /etc/config/network, and makes sure that for each network interface,
> there's a VAP in /etc/config/wireless (it tries to distribute them
> somewhat intelligently; if there are multiple physical radios, it puts
> the ad-hoc mesh interface on the first one and then distributes the AP
> interfaces across the other radios).
>
> * Then the regular OpenWRT network initialization runs, which calls the
> coldplug_* functions for each Commotion interface. These functions
> configure the wireless VAPs created in the last step (setting SSIDs,
> etc). The wireless is then brought up.
>
> * Finally, the setup_interface_* functions are called, which configure
> the IPs, firewall, etc for each interface. They also make a series of
> hotplug calls, which run scripts in /etc/hotplug.d/ to configure various
> services, like OLSRd.
>
> There are definitely things that could be done better. For instance,
> there are default interface names in /etc/config/network. This is done
> to avoid complexity, as OpenWRT seems to assume that if you're building
> a hardware-specific image you at least know what the hardware looks like
> ;-) However, this falls apart when building, say, an x86 iso. It's also
> a bit of a problem in that it seems that most drivers want to have the
> ad-hoc interface on the highest numbered interface (i.e., if you have an
> AP on wlan0, and an ad-hoc on wlan1, and then you add another AP, the
> ad-hoc becomes wlan2, and the second AP becomes wlan1, rather than just
> incrementing interfaces like you'd expect). There's also the fact that
> the whole IP address selection scheme from converting MAC addresses is
> rather naive, and we should support several replacements as well.
> Ideally, these would include hashing the MAC address to create the IP, a
> la the IPv4LL or whatever it's called standard that gets you 169.254.*
> addresses, along with the option of randomizing the MAC address, or
> using just IPv6 addresses, or generating this all from a UUID that's
> created at boot. I'm hoping to address all this for a forthcoming PR2.x
> point release, but not all of it is solidified so patches, commits, and
> suggestions welcome.
>
>
>
> Ben West <me at benwest.name> wrote:
>
> >I just cloned & compiled the most recent repo contents for Commotion,
> >and I
> >am wandering thru its default config files.
> >
> >I notice the functions setup_interface_meshif() and
> >setup_interface_apif()
> >will operate on the hardware names of the mesh and AP interfaces,
> >respectively.
> >https://tech.chambana.net/documents/1
> >
> >Has all testing/operation for Commotion to date been done on devices
> >with
> >multiple physical radios (or just one radio and only the mesh
> >interface)?
> >Has anyone yet tried running mesh + AP on multiple virtual APs (VAPs)
> >with
> >either ath5k or ath9k?
> >
> >--
> >Ben West
> >me at benwest.name
> >_______________________________________________
> >Commotion-dev mailing list
> >Commotion-dev at lists.chambana.net
> >http://lists.chambana.net/mailman/listinfo/commotion-dev
>
"
221,Commotion-dev, Commotion Messaging / Audit Survey,"Fri, 6 Jan 2012 12:43:03 -0500",-0500,Nina Bianchi,"Greetings!

We (the Work Department) are working on a range of Commotion project components and are kicking off the messaging development and design process.

We've created a short survey to audit and investigate the current messaging around Commotion with the goal of developing the most appropriate, sustainable and dynamic identity / branding.

Please take a little bit of time to fill this out by Wednesday, January 11, 5:00 PM EST. This is an essential step and we appreciate your time.
https://docs.google.com/spreadsheet/viewform?hl=en_US&formkey=dEx0OVlZV3BNaGVicFhLRGNDMDZvQWc6MQ#gid=0

Your input is greatly appreciated and will help guide the public facing visual framework for Commotion.

Thanks in advance,
Nina

"
222,Commotion-dev, Boilerplate Android code pushed,"Tue, 10 Jan 2012 14:47:41 -0500",-0500,Brian Duggan,
223,Commotion-dev, Boilerplate Android code pushed,"Tue, 10 Jan 2012 15:41:46 -0500",-0500,Hans-Christoph Steiner,"
Hey Brian,

I briefly checked out your code, I'll dig in more soon.  Did you get ad-hoc mode running after all?  I assume so since you said you got olsrd running.  Apparently, on some devices, you have to replace the wpa_supplicant binary in order to get ad-hoc mode working:
http://forum.xda-developers.com/showthread.php?t=929865

Cyanogenmod seems to include everything needed to run ad-hoc though.

I just found this, which looks like it should provide us with some useful code:
http://code.google.com/p/adhoc-on-android/

On approach that might work for us is to include our own custom wpa_supplicant in the app.

.hc

On Jan 10, 2012, at 2:47 PM, Brian Duggan wrote:

> "
224,Commotion-dev, Commotion Messaging / Audit Survey,"Tue, 10 Jan 2012 16:20:17 -0500",-0500,Nina Bianchi,"Hi Everyone,

Just a reminder, please save a time to fill out our Commotion Messaging Audit survey. 

The deadline is tomorrow, Wednesday, January 11, 5:00 PM EST.

https://docs.google.com/spreadsheet/viewform?hl=en_US&formkey=dEx0OVlZV3BNaGVicFhLRGNDMDZvQWc6MQ#gid=0

Your input is valuable, we hope that you're able to contribute to this first stage of the identity development process.

Looking forward,
Nina

On Jan 6, 2012, at 12:43 PM, Nina Bianchi wrote:

> Greetings!
> 
> We (the Work Department) are working on a range of Commotion project components and are kicking off the messaging development and design process.
> 
> We've created a short survey to audit and investigate the current messaging around Commotion with the goal of developing the most appropriate, sustainable and dynamic identity / branding.
> 
> Please take a little bit of time to fill this out by Wednesday, January 11, 5:00 PM EST. This is an essential step and we appreciate your time.
> https://docs.google.com/spreadsheet/viewform?hl=en_US&formkey=dEx0OVlZV3BNaGVicFhLRGNDMDZvQWc6MQ#gid=0
> 
> Your input is greatly appreciated and will help guide the public facing visual framework for Commotion.
> 
> Thanks in advance,
> Nina
> 
> _______________________________________________
> Commotion-dev mailing list
> Commotion-dev at lists.chambana.net
> http://lists.chambana.net/mailman/listinfo/commotion-dev

"
225,Commotion-dev, Boilerplate Android code pushed,"Wed, 11 Jan 2012 08:58:43 +1030",+1030,Jeremy Lakeman,"Getting Adhoc and olsrd running is something the Serval Mesh software
is already trying to do. We default to BATMAN but we have a setting to
run olsr instead.

We started with wifi tether's adhoc support and have tried to improve
on it. We've written a generic approach to discovering how to control
the wifi driver on each handset. For the handsets that need something
different, we've got a bunch of text files describing file names we
should be looking for, and a matching control script.

But if we don't have a specific script that matches this handset, we
look through the filesystem looking for *.ko. Then read through every
short script in /system looking for insmod commands and any arguments
that we need to pass through. And we've got a fallback method that
tries a load driver library call that may or may not work.

Hopefully one of these approaches will succeed.




On Wed, Jan 11, 2012 at 7:11 AM, Hans-Christoph Steiner <hans at at.or.at> wrote:
>
> Hey Brian,
>
> I briefly checked out your code, I'll dig in more soon. ?Did you get ad-hoc mode running after all? ?I assume so since you said you got olsrd running. ?Apparently, on some devices, you have to replace the wpa_supplicant binary in order to get ad-hoc mode working:
> http://forum.xda-developers.com/showthread.php?t=929865
>
> Cyanogenmod seems to include everything needed to run ad-hoc though.
>
> I just found this, which looks like it should provide us with some useful code:
> http://code.google.com/p/adhoc-on-android/
>
> On approach that might work for us is to include our own custom wpa_supplicant in the app.
>
> .hc
>
> On Jan 10, 2012, at 2:47 PM, Brian Duggan wrote:
>
"
226,Commotion-dev, Boilerplate Android code pushed,"Tue, 10 Jan 2012 18:15:24 -0500",-0500,Hans-Christoph Steiner,"
Wow, that sounds quite elaborate, I'd like to see it in action :)  Can you point us towards the code that is doing all this?

My guess is that the level of detail will be needed to handle a lot of cases, but I think we have a good chance of simplifying things in the long run by including our own binaries in the app for things that are not kernel mods.

I'd love to find a way to include kernel mods that work across kernel versions, but I have not found a way to do that.  It must be possible, since people like nvidia are shipping binary kernel mods that work across a number of kernel versions.

.hc

On Jan 10, 2012, at 5:28 PM, Jeremy Lakeman wrote:

> Getting Adhoc and olsrd running is something the Serval Mesh software
> is already trying to do. We default to BATMAN but we have a setting to
> run olsr instead.
> 
> We started with wifi tether's adhoc support and have tried to improve
> on it. We've written a generic approach to discovering how to control
> the wifi driver on each handset. For the handsets that need something
> different, we've got a bunch of text files describing file names we
> should be looking for, and a matching control script.
> 
> But if we don't have a specific script that matches this handset, we
> look through the filesystem looking for *.ko. Then read through every
> short script in /system looking for insmod commands and any arguments
> that we need to pass through. And we've got a fallback method that
> tries a load driver library call that may or may not work.
> 
> Hopefully one of these approaches will succeed.
> 
> 
> 
> 
> On Wed, Jan 11, 2012 at 7:11 AM, Hans-Christoph Steiner <hans at at.or.at> wrote:
"
227,Commotion-dev, Boilerplate Android code pushed,"Wed, 11 Jan 2012 10:13:04 +1030",+1030,Jeremy Lakeman,"Getting Adhoc and olsrd running is something the Serval Mesh software
is already trying to do. We default to BATMAN but we have a setting to
run olsr instead.

We started with wifi tether's adhoc support and have tried to improve
on it. We've written a generic approach to discovering how to control
the wifi driver on each handset. For the handsets that need something
different, we've got a bunch of text files describing file names we
should be looking for, and a matching control script.

But if we don't have a specific script that matches this handset, we
look through the filesystem looking for *.ko. Then read through every
short script in /system looking for insmod commands and any arguments
that we need to pass through. And we've got a fallback method that
tries a load driver library call that may or may not work.

Hopefully one of these approaches will succeed.




On Wed, Jan 11, 2012 at 7:11 AM, Hans-Christoph Steiner <hans at at.or.at> wrote:
>
> Hey Brian,
>
> I briefly checked out your code, I'll dig in more soon. ?Did you get ad-hoc mode running after all? ?I assume so since you said you got olsrd running. ?Apparently, on some devices, you have to replace the wpa_supplicant binary in order to get ad-hoc mode working:
> http://forum.xda-developers.com/showthread.php?t=929865
>
> Cyanogenmod seems to include everything needed to run ad-hoc though.
>
> I just found this, which looks like it should provide us with some useful code:
> http://code.google.com/p/adhoc-on-android/
>
> On approach that might work for us is to include our own custom wpa_supplicant in the app.
>
> .hc
>
> On Jan 10, 2012, at 2:47 PM, Brian Duggan wrote:
>
"
228,Commotion-dev, Boilerplate Android code pushed,"Wed, 11 Jan 2012 10:13:47 +1030",+1030,Jeremy Lakeman,"doh, had the saved draft show up on my laptop, thought I hadn't sent it...


On Wed, Jan 11, 2012 at 10:13 AM, Jeremy Lakeman
<Jeremy.Lakeman at gmail.com> wrote:
> Getting Adhoc and olsrd running is something the Serval Mesh software
> is already trying to do. We default to BATMAN but we have a setting to
> run olsr instead.
>
> We started with wifi tether's adhoc support and have tried to improve
> on it. We've written a generic approach to discovering how to control
> the wifi driver on each handset. For the handsets that need something
> different, we've got a bunch of text files describing file names we
> should be looking for, and a matching control script.
>
> But if we don't have a specific script that matches this handset, we
> look through the filesystem looking for *.ko. Then read through every
> short script in /system looking for insmod commands and any arguments
> that we need to pass through. And we've got a fallback method that
> tries a load driver library call that may or may not work.
>
> Hopefully one of these approaches will succeed.
>
>
>
>
> On Wed, Jan 11, 2012 at 7:11 AM, Hans-Christoph Steiner <hans at at.or.at> wrote:
"
229,Commotion-dev, Boilerplate Android code pushed,"Wed, 11 Jan 2012 10:24:29 +1030",+1030,Jeremy Lakeman,"Serval's software is available here https://github.com/servalproject/batphone
The specific pieces you might want to look at are;

data/conf/wifichipsets/
src/org/servalproject/system/ChipsetDetection.java
src/org/servalproject/system/WiFiRadio.java

and the edify scripts are interpreted by (including the call to
libhardware_legacy wifi_load_driver / wifi_unload_driver);
native/adhoc-edify/

(The data directory is zipped in the build process, and unzipped by
our first run process into /data/data/org.servalproject)

And the apk is available on the market;
https://market.android.com/details?id=org.servalproject

This approach works with a fair number of stock (but rooted) handsets.
We haven't gotten around to trying to using wifi supplicants that
already support adhoc mode.

On Wed, Jan 11, 2012 at 9:45 AM, Hans-Christoph Steiner <hans at at.or.at> wrote:
>
> Wow, that sounds quite elaborate, I'd like to see it in action :) ?Can you point us towards the code that is doing all this?
>
> My guess is that the level of detail will be needed to handle a lot of cases, but I think we have a good chance of simplifying things in the long run by including our own binaries in the app for things that are not kernel mods.
>
> I'd love to find a way to include kernel mods that work across kernel versions, but I have not found a way to do that. ?It must be possible, since people like nvidia are shipping binary kernel mods that work across a number of kernel versions.
>
> .hc
>
> On Jan 10, 2012, at 5:28 PM, Jeremy Lakeman wrote:
>
"
230,Commotion-dev, Boilerplate Android code pushed,"Tue, 10 Jan 2012 21:44:26 -0500",-0500,Hans-Christoph Steiner,"
A little bug report, in case you're interested:

I just downloaded Serval Mesh from the Marketplace on my Droid running CM7.1.  It gets thru ""Unpacking the stuff I need"", ""Checking for root access"", and ""I think I know how to control your wifi"", then says ""Skipped check for experimental support since we already support your handset."", and gets stuck on ""Test if WiFi control works"".  It just seems to try again and again.

.hc

On Jan 10, 2012, at 6:54 PM, Jeremy Lakeman wrote:

> Serval's software is available here https://github.com/servalproject/batphone
> The specific pieces you might want to look at are;
> 
> data/conf/wifichipsets/
> src/org/servalproject/system/ChipsetDetection.java
> src/org/servalproject/system/WiFiRadio.java
> 
> and the edify scripts are interpreted by (including the call to
> libhardware_legacy wifi_load_driver / wifi_unload_driver);
> native/adhoc-edify/
> 
> (The data directory is zipped in the build process, and unzipped by
> our first run process into /data/data/org.servalproject)
> 
> And the apk is available on the market;
> https://market.android.com/details?id=org.servalproject
> 
> This approach works with a fair number of stock (but rooted) handsets.
> We haven't gotten around to trying to using wifi supplicants that
> already support adhoc mode.
> 
> On Wed, Jan 11, 2012 at 9:45 AM, Hans-Christoph Steiner <hans at at.or.at> wrote:
"
231,Commotion-dev, Commotion Messaging / Audit Survey,"Wed, 18 Jan 2012 01:36:18 -0600",-0600,Ben West,"I was waylaid with cold and having recently moved (not a good
combination!).  I filled out a response to this survey, tho late.  Hope it
is still useful.

-- 
Ben West
http://gowasabi.net
ben at gowasabi.net
"
232,Commotion-dev, Boilerplate Android code pushed,"Thu, 02 Feb 2012 12:18:18 -0500",-0500,Hans-Christoph Steiner,
233,Commotion-dev, Boilerplate Android code pushed,"Fri, 3 Feb 2012 08:28:41 +1030",+1030,Jeremy Lakeman,"Ah, we've had some strange reports like that from CM7 users.
No we don't write over any files in the system folder. At least not directly.
We'll probably end up trying to use our ""generic"" chipset profile
which will try to call /system/lib/libhardware_legacy.so
wifi_load_driver() / wifi_unload_driver().
CM7 seems to include this library, but using it might be the cause of
this issue. We haven't flashed CM7 onto any of our phones yet to test
what the root cause is.
You may need to boot into recovery mode and clear the cache, or worst
case do a factory reset.

On Fri, Feb 3, 2012 at 3:48 AM, Hans-Christoph Steiner
<hans at guardianproject.info> wrote:
> "
234,Commotion-dev, Boilerplate Android code pushed,"Fri, 3 Feb 2012 11:56:34 +1030",+1030,Jeremy Lakeman,"We've got a lot of cheap Huewai IDEOS phones, CPU and flash is quite
slow and they have ridiculously tiny screens.

Samsung galaxy's work quite well, at least with the stock firmware.
I've also seen them work with CM, so I assume those roms have the same
driver files in the same locations so we aren't hitting the same
issue.

If we can disable our ""generic"" profile for CM phones, we could work
towards supporting the built in modified wpa supplicant. We shouldn't
actually need to load the wifi driver ourselves since Cyanogen
supports joining adhoc networks anyway. Not sure if we can initiate a
network though.

I wonder if your phone is having trouble loading the (at a guess)
tiwlan_drv.ko module.

On stock Droids we do something like;
insmod /system/lib/modules/tiwlan_drv.ko
/system/bin/wlan_loader -f /system/etc/wifi/fw_wlan1271.bin -e
/proc/calibration -i [path]/tiwlan.ini
Then use ifconfig / iwconfig to get the network running

If you have firmware binaries in different places we wouldn't use this
script and would fall back to trying ""generic""

On Fri, Feb 3, 2012 at 11:25 AM, Hans-Christoph Steiner
<hans at guardianproject.info> wrote:
>
> I poked around a little bit, my /data/misc/wifi/wpa_supplicant.conf file
> seems intact. ?""netcfg tiwlan0 up"" and down no longer work, it tells me:
>
> # /system/bin/netcfg tiwlan0 up
> action 'up' failed (No such device)
>
> I rebooted and cleared the cache, no luck there. I'll try flashing CM7.1
> again. ?Do you have a phone you recommend for wifi hacking with Android?
> ?We have a good collection, so we probably have a better one than a
> Droid/Milestone running CM7.1.
>
> .hc
>
>
> On 02/02/2012 04:58 PM, Jeremy Lakeman wrote:
"
235,Commotion-dev, olsrd ubuntu packages,"Mon, 6 Feb 2012 16:39:22 -0500",-0500,Hans-Christoph Steiner,"
In the process of getting my dev setup ironed out, I made some updated Ubuntu packages, and am going to get olsrd into Debian/squeeze/backports since olsrd was dropped from the official squeeze release.

https://launchpad.net/~guardianproject/+archive/commotion/+packages

I've been talking with the Debian maintainer of the olsrd package about becoming co-maintainer and have submitted a few patches:
http://bugs.debian.org/cgi-bin/pkgreport.cgi?pkg=olsrd;dist=unstable

.hc


"
236,Commotion-dev, olsrd ubuntu packages,"Mon, 06 Feb 2012 16:49:53 -0500",-0500,Josh King,"This is awesome, Hans! I'm going to try these out as soon as possible.

On 02/06/2012 04:39 PM, Hans-Christoph Steiner wrote:
> 
> In the process of getting my dev setup ironed out, I made some updated Ubuntu packages, and am going to get olsrd into Debian/squeeze/backports since olsrd was dropped from the official squeeze release.
> 
> https://launchpad.net/~guardianproject/+archive/commotion/+packages
> 
> I've been talking with the Debian maintainer of the olsrd package about becoming co-maintainer and have submitted a few patches:
> http://bugs.debian.org/cgi-bin/pkgreport.cgi?pkg=olsrd;dist=unstable
> 
> .hc
> 
> 
> "
237,Commotion-dev, olsrd ubuntu packages,"Mon, 6 Feb 2012 18:57:47 -0500",-0500,Hans-Christoph Steiner,"
I also just checked in the olsrd package I did for Mac OS X Fink while at the Commotion kick-off weekend in DC.  It builds and runs, but I haven't figured out how to get the proper wifi settings working.

.hc

On Feb 6, 2012, at 4:49 PM, Josh King wrote:

> This is awesome, Hans! I'm going to try these out as soon as possible.
> 
> On 02/06/2012 04:39 PM, Hans-Christoph Steiner wrote:
"
238,Commotion-dev, open garden wifi tether,"Mon, 6 Feb 2012 20:42:11 -0500",-0500,Hans-Christoph Steiner,"
Anyone played with Open Garden Wifi Tether for Android?  Its an open source Android app that creates an Ad-hoc network to share the 3G internet connection.  While my Droid-CM7.1 is still not working for normal wifi after the Serval setup, Open Garden can still set up an Ad-hoc network, which my laptop can associate with and receive an IP via DHCP.

https://github.com/opengarden/android-tether

I'm going to dig in and try to figure out how they do it.

.hc

"
239,Commotion-dev, open garden wifi tether,"Mon, 6 Feb 2012 21:44:56 -0500",-0500,Hans-Christoph Steiner,"
It looks like we struck gold here! They have a complete implementation that includes its own ifconfig, iwconfig, insmod, etc.[1], and already has profiles for many devices![2]  It even has a config file to set how you want things to be setup [3].  And it seems to be all Apache 2.0 licensed.

[1] https://github.com/opengarden/android-tether/tree/master/native
[2] https://github.com/opengarden/android-tether/blob/master/res/raw/tether_edify
[3] https://github.com/opengarden/android-tether/blob/master/res/raw/tether_conf

.hc

On Feb 6, 2012, at 8:42 PM, Hans-Christoph Steiner wrote:

> 
> Anyone played with Open Garden Wifi Tether for Android?  Its an open source Android app that creates an Ad-hoc network to share the 3G internet connection.  While my Droid-CM7.1 is still not working for normal wifi after the Serval setup, Open Garden can still set up an Ad-hoc network, which my laptop can associate with and receive an IP via DHCP.
> 
> https://github.com/opengarden/android-tether
> 
> I'm going to dig in and try to figure out how they do it.
> 
> .hc
> 
> "
240,Commotion-dev, Boilerplate Android code pushed,"Mon, 6 Feb 2012 22:16:55 -0500",-0500,Hans-Christoph Steiner,"
I've tried now wiping the cache and doing a whole system update, and still no luck.  I haven't tried wiping the data yet.

- after a reboot, tiwlan0_drv is not loaded
- insmod /system/lib/modules/tiwlan_drv.ko works fine
- after insmod, ""Wireless & network settings"" says: Wi-Fi Error
- /system/bin/wlan_loader -f /system/etc/wifi/fw_wlan1271.bin -e /proc/calibration -i /system/etc/wifi/tiwlan.ini gives me:
   Set property wlan.driver.status = ok - Fail

If you want, I can hook this phone up to a computer where I can give you a shell, and you can hunt around. Its even got a Debian chroot on it, you can get a full Debian shell by running /data/local/bin/debian, thanks to LilDebi.apk.  :)

.hc

On Feb 2, 2012, at 8:26 PM, Jeremy Lakeman wrote:

> We've got a lot of cheap Huewai IDEOS phones, CPU and flash is quite
> slow and they have ridiculously tiny screens.
> 
> Samsung galaxy's work quite well, at least with the stock firmware.
> I've also seen them work with CM, so I assume those roms have the same
> driver files in the same locations so we aren't hitting the same
> issue.
> 
> If we can disable our ""generic"" profile for CM phones, we could work
> towards supporting the built in modified wpa supplicant. We shouldn't
> actually need to load the wifi driver ourselves since Cyanogen
> supports joining adhoc networks anyway. Not sure if we can initiate a
> network though.
> 
> I wonder if your phone is having trouble loading the (at a guess)
> tiwlan_drv.ko module.
> 
> On stock Droids we do something like;
> insmod /system/lib/modules/tiwlan_drv.ko
> /system/bin/wlan_loader -f /system/etc/wifi/fw_wlan1271.bin -e
> /proc/calibration -i [path]/tiwlan.ini
> Then use ifconfig / iwconfig to get the network running
> 
> If you have firmware binaries in different places we wouldn't use this
> script and would fall back to trying ""generic""
> 
> On Fri, Feb 3, 2012 at 11:25 AM, Hans-Christoph Steiner
> <hans at guardianproject.info> wrote:
"
241,Commotion-dev, Boilerplate Android code pushed,"Mon, 6 Feb 2012 22:17:50 -0500",-0500,Hans-Christoph Steiner,"
I forgot to mention: neither /proc/calibration nor /data/calibration exist now on this Droid-CM7.1. I don't know if either one was there before, but that file location does seem to be required.

.hc

On Feb 6, 2012, at 10:16 PM, Hans-Christoph Steiner wrote:

> 
> I've tried now wiping the cache and doing a whole system update, and still no luck.  I haven't tried wiping the data yet.
> 
> - after a reboot, tiwlan0_drv is not loaded
> - insmod /system/lib/modules/tiwlan_drv.ko works fine
> - after insmod, ""Wireless & network settings"" says: Wi-Fi Error
> - /system/bin/wlan_loader -f /system/etc/wifi/fw_wlan1271.bin -e /proc/calibration -i /system/etc/wifi/tiwlan.ini gives me:
>   Set property wlan.driver.status = ok - Fail
> 
> If you want, I can hook this phone up to a computer where I can give you a shell, and you can hunt around. Its even got a Debian chroot on it, you can get a full Debian shell by running /data/local/bin/debian, thanks to LilDebi.apk.  :)
> 
> .hc
> 
> On Feb 2, 2012, at 8:26 PM, Jeremy Lakeman wrote:
> 
"
242,Commotion-dev, open garden wifi tether,"Tue, 7 Feb 2012 16:44:29 +1030",+1030,Jeremy Lakeman,"Looks like they, like serval, are also based on the old wifi tether;
http://code.google.com/p/android-wifi-tether/

On Tue, Feb 7, 2012 at 1:14 PM, Hans-Christoph Steiner <hans at at.or.at> wrote:
>
> It looks like we struck gold here! They have a complete implementation that includes its own ifconfig, iwconfig, insmod, etc.[1], and already has profiles for many devices![2] ?It even has a config file to set how you want things to be setup [3]. ?And it seems to be all Apache 2.0 licensed.
>
> [1] https://github.com/opengarden/android-tether/tree/master/native
> [2] https://github.com/opengarden/android-tether/blob/master/res/raw/tether_edify
> [3] https://github.com/opengarden/android-tether/blob/master/res/raw/tether_conf
>
> .hc
>
> On Feb 6, 2012, at 8:42 PM, Hans-Christoph Steiner wrote:
>
"
243,Commotion-dev, Boilerplate Android code pushed,"Thu, 02 Feb 2012 19:55:15 -0500",-0500,Hans-Christoph Steiner,"
I poked around a little bit, my /data/misc/wifi/wpa_supplicant.conf file
seems intact.  ""netcfg tiwlan0 up"" and down no longer work, it tells me:

# /system/bin/netcfg tiwlan0 up
action 'up' failed (No such device)

I rebooted and cleared the cache, no luck there. I'll try flashing CM7.1
again.  Do you have a phone you recommend for wifi hacking with Android?
 We have a good collection, so we probably have a better one than a
Droid/Milestone running CM7.1.

.hc


On 02/02/2012 04:58 PM, Jeremy Lakeman wrote:
> Ah, we've had some strange reports like that from CM7 users.
> No we don't write over any files in the system folder. At least not directly.
> We'll probably end up trying to use our ""generic"" chipset profile
> which will try to call /system/lib/libhardware_legacy.so
> wifi_load_driver() / wifi_unload_driver().
> CM7 seems to include this library, but using it might be the cause of
> this issue. We haven't flashed CM7 onto any of our phones yet to test
> what the root cause is.
> You may need to boot into recovery mode and clear the cache, or worst
> case do a factory reset.
> 
> On Fri, Feb 3, 2012 at 3:48 AM, Hans-Christoph Steiner
> <hans at guardianproject.info> wrote:
> 
> I got it running on my Droid with CM7.1, but then I couldn't make it
> stop running ;)  Every time I turned on my wifi since setting up
> Serval, the Serval app would then show up and turn it back off.  I
> first clicked the ""Suspend"" button, and it turned to ""Start"".  I then
> clicked ""Reset"".  I then force closed it, and cleared the data.
> 
> Now I've removed it entirely, and my wifi isn't working any more.  It
> turns on, but never scans for any networks and it seems to have
> cleared all the saved networks in my phone.  I cannot manually add
> networks either.
> 
> Does this app mess with the wpa_supplicant.conf that comes with the
> phone, or any of the standard Android files?
> 
> .hc
> 
> On 01/10/2012 10:08 PM, Jeremy Lakeman wrote:
"
244,Commotion-dev, open garden wifi tether,"Tue, 7 Feb 2012 12:05:30 -0500",-0500,Hans-Christoph Steiner,"
Doh, oh well.  I see now: for serval, 'tether' was just renamed 'adhoc' and the ifconfig/ folder is stripped out.  I wonder if android-wifi-tether or OpenGarden would also nuke the wifi on my Droid-CM7.1, I'll try it out once I get it going again.  I had played with OpenGarden on that phone before, so I think not, but I'll try to confirm that.

So it looks like you split up the mega tether_edify script into per-device edify scripts.  That makes sense, it makes those scripts rational chunks.  Now I see the logging and all, but unfortunately, I already deleted batphone.  I reinstalled it and ran the setup again, the logs are attached.  I think it might be different than the initial attempt because detect.log is telling me this:

""Could not work out how to control your WiFi chipset. Relying on operating system, so no ad-hoc WiFi.""

Here's all the logs:

"
245,Commotion-dev, Barnacle Tether,"Tue, 7 Feb 2012 13:45:17 -0500",-0500,Hans-Christoph Steiner,"
Have people here seen or played with Barnacle Wifi Tether?  It seems that its a different code base from the android-wifi-tether app.  It seems to have been recently open sourced:

https://github.com/szym/barnacle

.hc

"
246,Commotion-dev, Barnacle Tether,"Tue, 07 Feb 2012 14:01:33 -0500",-0500,Brian Duggan,
247,Commotion-dev, open garden wifi tether,"Tue, 07 Feb 2012 15:12:55 -0500",-0500,Sascha Meinrath,"I've been using Open Garden on the OTI Dev phone for awhile now, in case anyone
wants to play around with it here at NAF.  It works really well, though I
haven't investigated the code itself.  I'd be curious what you find.

--Sascha

On 02/06/2012 08:42 PM, Hans-Christoph Steiner wrote:
> 
> Anyone played with Open Garden Wifi Tether for Android?  Its an open source Android app that creates an Ad-hoc network to share the 3G internet connection.  While my Droid-CM7.1 is still not working for normal wifi after the Serval setup, Open Garden can still set up an Ad-hoc network, which my laptop can associate with and receive an IP via DHCP.
> 
> https://github.com/opengarden/android-tether
> 
> I'm going to dig in and try to figure out how they do it.
> 
> .hc
> 
> "
248,Commotion-dev, Barnacle Tether,"Tue, 7 Feb 2012 15:16:38 -0500",-0500,Hans-Christoph Steiner,"
Yes, he does have some useful blog posts on his site, this will probably affect us to:

http://szym.net/2010/12/barnacle-and-ipad/#more-292
""...the wireless driver on many Android phones only beacons an ad-hoc network for a while, and then if no other client associates, it stops. The next time it tries, it uses a different BSSID. Unfortunately, AFAIK, there's nothing we can do to stop it. If you try providing a BSSID in the settings, it might simply fail to beacon at all (it would only associate with an existing network matching that BSSID).""

.hc

On Feb 7, 2012, at 2:01 PM, Brian Duggan wrote:

> "
249,Commotion-dev, open garden wifi tether,"Tue, 7 Feb 2012 15:17:25 -0500",-0500,Hans-Christoph Steiner,"
What kind of phone is the OTI Dev phone?  It seems the reliability of the adhoc mode varies a lot by device.

.hc

On Feb 7, 2012, at 3:12 PM, Sascha Meinrath wrote:

> I've been using Open Garden on the OTI Dev phone for awhile now, in case anyone
> wants to play around with it here at NAF.  It works really well, though I
> haven't investigated the code itself.  I'd be curious what you find.
> 
> --Sascha
> 
> On 02/06/2012 08:42 PM, Hans-Christoph Steiner wrote:
"
250,Commotion-dev, open garden wifi tether,"Tue, 07 Feb 2012 15:21:29 -0500",-0500,Sascha Meinrath,"It's a Ting HTC Sense.

--Sascha

On 02/07/2012 03:17 PM, Hans-Christoph Steiner wrote:
> 
> What kind of phone is the OTI Dev phone?  It seems the reliability of the adhoc mode varies a lot by device.
> 
> .hc
> 
> On Feb 7, 2012, at 3:12 PM, Sascha Meinrath wrote:
> 
"
251,Commotion-dev, open garden wifi tether,"Tue, 07 Feb 2012 15:23:07 -0500",-0500,Brian Duggan,
252,Commotion-dev, open garden wifi tether,"Tue, 07 Feb 2012 15:22:58 -0500",-0500,Sascha Meinrath,"Wait, they've rebranded now that they're out of Beta, it's the HTC Detail (with
HTC Sense): https://ting.com/devices/Detail

--Sascha

On 02/07/2012 03:17 PM, Hans-Christoph Steiner wrote:
> 
> What kind of phone is the OTI Dev phone?  It seems the reliability of the adhoc mode varies a lot by device.
> 
> .hc
> 
> On Feb 7, 2012, at 3:12 PM, Sascha Meinrath wrote:
> 
"
253,Commotion-dev, open garden wifi tether,"Tue, 07 Feb 2012 15:27:04 -0500",-0500,Brian Duggan,
254,Commotion-dev, open garden wifi tether,"Wed, 8 Feb 2012 08:03:41 +1030",+1030,Jeremy Lakeman,"We haven't had any issues with the SGS2's, but then with dhd.ko based
modules you need to pass the dhd_pkt_filter_enable=0 module parameter
or broadcast packets will be dropped when the screen turns off.
(eg https://github.com/servalproject/batphone/blob/master/data/conf/wifichipsets/sgs2.adhoc.edify)

HTC phones are fine in adhoc mode, but as a normal wifi client they
don't always receive UDP broadcast packets.


On Wed, Feb 8, 2012 at 6:53 AM, Brian Duggan <bcdugga at gmail.com> wrote:
> "
255,Commotion-dev, Barnacle Tether,"Wed, 8 Feb 2012 08:07:16 +1030",+1030,Jeremy Lakeman,"On Wed, Feb 8, 2012 at 5:31 AM, Brian Duggan <bcduggan.naf at gmail.com> wrote:
> Also, just so everyone knows, please star and comment on Android bug 82:
>
> http://code.google.com/p/android/issues/detail?id=82

I've heard a rumour that enough telco's don't like adhoc mode that it
will never be fixed in android.
"
256,Commotion-dev, Barnacle Tether,"Wed, 8 Feb 2012 10:12:27 -0500",-0500,Hans-Christoph Steiner,"
On Feb 7, 2012, at 4:37 PM, Jeremy Lakeman wrote:

> On Wed, Feb 8, 2012 at 5:31 AM, Brian Duggan <bcduggan.naf at gmail.com> wrote:
"
257,Commotion-dev, open garden wifi tether,"Wed, 08 Feb 2012 16:46:30 -0500",-0500,Hans-Christoph Steiner,"
I just did a completely successful trial of Serval batphone on two HTC
Wildfire phones running CM6.1.0.  Worked seamlessly, well done :)

.hc

On 02/07/2012 03:27 PM, Brian Duggan wrote:
> Which is more or less the same phone as the Sprint HTC Evo 4g
> Shift. I mean the Tink HTC Detail :)
> 
> Brian
> 
> On 02/07/2012 03:22 PM, Sascha Meinrath wrote:
"
258,Commotion-dev, latest openwrt/commotion builds for Fonera and,"Fri, 10 Feb 2012 18:17:50 -0500",-0500,Hans-Christoph Steiner,"
I'm working on getting a test network up and running, so I want to flash
the commotion onto the routers that I have: 5 Fonera 2100s and 1 Buffalo
WZR-HP-G300NH. Where do I get the latest builds?

This doesn't seem like its for the Fonera 2100 since it says ar71xx:
https://tech.chambana.net/projects/commotion/files

.hc
"
259,Commotion-dev, latest openwrt/commotion builds for Fonera and,"Fri, 10 Feb 2012 18:31:59 -0600",-0600,Ben West,"I had compiled ath5k version of Commotion at the beginning of the year
using OpenWRT r29607 but didn't get a chance to actually flash to a
fonera to test.  (Amazing what having a new daughter born does to your
freetime :)

I've uploaded the compiled images here:
http://info.gowasabi.net/commotion-openwrt

P.S. If your DNS doesn't resolve info.gowasabi.net yet, its IP is
74.207.229.189.

Do please give 'em a shot and report back!

On Fri, Feb 10, 2012 at 5:17 PM, Hans-Christoph Steiner
<hans at guardianproject.info> wrote:
>
> I'm working on getting a test network up and running, so I want to flash
> the commotion onto the routers that I have: 5 Fonera 2100s and 1 Buffalo
> WZR-HP-G300NH. Where do I get the latest builds?
>
> This doesn't seem like its for the Fonera 2100 since it says ar71xx:
> https://tech.chambana.net/projects/commotion/files
>
> .hc
> _______________________________________________
> Commotion-dev mailing list
> Commotion-dev at lists.chambana.net
> http://lists.chambana.net/mailman/listinfo/commotion-dev



-- 
Ben West
me at benwest.name
"
260,Commotion-dev, latest openwrt/commotion builds for Fonera and,"Mon, 13 Feb 2012 16:12:52 -0500",-0500,Hans-Christoph Steiner,"
I did:

sudo ./ap51-flash-1.0-42 eth1 openwrt-atheros-root.jffs2-64k \
    openwrt-atheros-vmlinux.lzma

And it flashed successfully, but I can't find a way to connect to it
now.  I've tried over their ethernet 192.168.1.1, 192.168.0.1,
169.254.1.1, 169.254.0.1.  No luck.  Also, it doesn't seem to showing
any wifi networks, and the wifi light is off.

Am I doing first contact right on this box?

.hc

On 02/10/2012 07:31 PM, Ben West wrote:
> I had compiled ath5k version of Commotion at the beginning of the year
> using OpenWRT r29607 but didn't get a chance to actually flash to a
> fonera to test.  (Amazing what having a new daughter born does to your
> freetime :)
> 
> I've uploaded the compiled images here:
> http://info.gowasabi.net/commotion-openwrt
> 
> P.S. If your DNS doesn't resolve info.gowasabi.net yet, its IP is
> 74.207.229.189.
> 
> Do please give 'em a shot and report back!
> 
> On Fri, Feb 10, 2012 at 5:17 PM, Hans-Christoph Steiner
> <hans at guardianproject.info> wrote:
"
261,Commotion-dev, latest openwrt/commotion builds for Fonera and,"Mon, 13 Feb 2012 15:24:53 -0600",-0600,Ben West,"Yep, that should be correct.  Unfortunately, looks like the same behavior I
got when I flashed a Fon 2100 in October 2011 with what was current
Commotion/OpenWRT at the time.  I.e. inability to telnet into the node ...

Thank you for your feedback re: ath5k testing.  Looks like next step is to
test with OpenWRT w/o the Commotion additions (i.e. verify problem isn't
with OpenWRT itself), and then serial console ...

On Mon, Feb 13, 2012 at 3:12 PM, Hans-Christoph Steiner <
hans at guardianproject.info> wrote:

>
> I did:
>
> sudo ./ap51-flash-1.0-42 eth1 openwrt-atheros-root.jffs2-64k \
>    openwrt-atheros-vmlinux.lzma
>
> And it flashed successfully, but I can't find a way to connect to it
> now.  I've tried over their ethernet 192.168.1.1, 192.168.0.1,
> 169.254.1.1, 169.254.0.1.  No luck.  Also, it doesn't seem to showing
> any wifi networks, and the wifi light is off.
>
> Am I doing first contact right on this box?
>
> .hc
>
> On 02/10/2012 07:31 PM, Ben West wrote:
> > I had compiled ath5k version of Commotion at the beginning of the year
> > using OpenWRT r29607 but didn't get a chance to actually flash to a
> > fonera to test.  (Amazing what having a new daughter born does to your
> > freetime :)
> >
> > I've uploaded the compiled images here:
> > http://info.gowasabi.net/commotion-openwrt
> >
> > P.S. If your DNS doesn't resolve info.gowasabi.net yet, its IP is
> > 74.207.229.189.
> >
> > Do please give 'em a shot and report back!
> >
> > On Fri, Feb 10, 2012 at 5:17 PM, Hans-Christoph Steiner
> > <hans at guardianproject.info> wrote:
> "
262,Commotion-dev, latest openwrt/commotion builds for Fonera and,"Thu, 16 Feb 2012 10:21:31 -0500",-0500,Hans-Christoph Steiner,"
I have openwrt kamikaze 8.09.2 on four of the Fonera 2100s that I have, they work fine.

By the way, if anyone has some Foneras they want to get rid of, I'll take them.  I like to build out a decent sized test mesh to test how much roaming around with the phone will work.

.hc

On Feb 13, 2012, at 4:24 PM, Ben West wrote:

> Yep, that should be correct.  Unfortunately, looks like the same behavior I got when I flashed a Fon 2100 in October 2011 with what was current Commotion/OpenWRT at the time.  I.e. inability to telnet into the node ...
> 
> Thank you for your feedback re: ath5k testing.  Looks like next step is to test with OpenWRT w/o the Commotion additions (i.e. verify problem isn't with OpenWRT itself), and then serial console ...
> 
> On Mon, Feb 13, 2012 at 3:12 PM, Hans-Christoph Steiner <hans at guardianproject.info> wrote:
> 
> I did:
> 
> sudo ./ap51-flash-1.0-42 eth1 openwrt-atheros-root.jffs2-64k \
>    openwrt-atheros-vmlinux.lzma
> 
> And it flashed successfully, but I can't find a way to connect to it
> now.  I've tried over their ethernet 192.168.1.1, 192.168.0.1,
> 169.254.1.1, 169.254.0.1.  No luck.  Also, it doesn't seem to showing
> any wifi networks, and the wifi light is off.
> 
> Am I doing first contact right on this box?
> 
> .hc
> 
> On 02/10/2012 07:31 PM, Ben West wrote:
> > I had compiled ath5k version of Commotion at the beginning of the year
> > using OpenWRT r29607 but didn't get a chance to actually flash to a
> > fonera to test.  (Amazing what having a new daughter born does to your
> > freetime :)
> >
> > I've uploaded the compiled images here:
> > http://info.gowasabi.net/commotion-openwrt
> >
> > P.S. If your DNS doesn't resolve info.gowasabi.net yet, its IP is
> > 74.207.229.189.
> >
> > Do please give 'em a shot and report back!
> >
> > On Fri, Feb 10, 2012 at 5:17 PM, Hans-Christoph Steiner
> > <hans at guardianproject.info> wrote:
> "
263,Commotion-dev, latest openwrt/commotion builds for Fonera and,"Thu, 16 Feb 2012 09:42:16 -0600",-0600,Chris Ritzo,"I'm not active in developing for Commotion, but have built a couple images
for Foneras with Commotion feeds included if folks want to try them. They
are running OpenWRT Backfire 10.03 rc 5 or 6.

The compiled binary image and kernel can be downloaded here:
http://wiki.ucimc.org/bin/view/MakerspaceUrbana/FlashingFonerasInstructions

I've found that the Fon does take a while to autoconfig, and that they
function best when running only one virtual AP. The Commotion setup script
also doesn't set the hostname of the device completely, so there is some
debugging that would be necessary for this platform.

Hope this is helpful for someone.

-CR

On Thu, Feb 16, 2012 at 9:21 AM, Hans-Christoph Steiner <
hans at guardianproject.info> wrote:

>
> I have openwrt kamikaze 8.09.2 on four of the Fonera 2100s that I have,
> they work fine.
>
> By the way, if anyone has some Foneras they want to get rid of, I'll take
> them.  I like to build out a decent sized test mesh to test how much
> roaming around with the phone will work.
>
> .hc
>
> On Feb 13, 2012, at 4:24 PM, Ben West wrote:
>
> Yep, that should be correct.  Unfortunately, looks like the same behavior
> I got when I flashed a Fon 2100 in October 2011 with what was current
> Commotion/OpenWRT at the time.  I.e. inability to telnet into the node ...
>
> Thank you for your feedback re: ath5k testing.  Looks like next step is to
> test with OpenWRT w/o the Commotion additions (i.e. verify problem isn't
> with OpenWRT itself), and then serial console ...
>
> On Mon, Feb 13, 2012 at 3:12 PM, Hans-Christoph Steiner <
> hans at guardianproject.info> wrote:
>
"
264,Commotion-dev, latest openwrt/commotion builds for Fonera and,"Thu, 16 Feb 2012 10:59:55 -0600",-0600,Ben West,"Hi Chris,

Thanks for sharing!

I can confirm OpenWRT Kamikaze works fine on Fonera 2100 and other ath5k
units from using ROBIN mesh firmware (which is still based on Kamikaze).

I see you are telnetting in to 192.168.1.20, rather than the 192.168.1.1
that I was accustomed to for newly flashed OpenWRT backfire units.  Is this
is change that you applied yourself before compiling?

Also, would you be willing to share the kernel config you used to compile
these images?  It could possibly help diagnose problems encountered
flashing ath5k units with Backfire 10.03.1+

On Thu, Feb 16, 2012 at 9:42 AM, Chris Ritzo <chris.ritzo at gmail.com> wrote:

> I'm not active in developing for Commotion, but have built a couple images
> for Foneras with Commotion feeds included if folks want to try them. They
> are running OpenWRT Backfire 10.03 rc 5 or 6.
>
> The compiled binary image and kernel can be downloaded here:
> http://wiki.ucimc.org/bin/view/MakerspaceUrbana/FlashingFonerasInstructions
>
>
> I've found that the Fon does take a while to autoconfig, and that they
> function best when running only one virtual AP. The Commotion setup script
> also doesn't set the hostname of the device completely, so there is some
> debugging that would be necessary for this platform.
>
> Hope this is helpful for someone.
>
> -CR
>
>
> On Thu, Feb 16, 2012 at 9:21 AM, Hans-Christoph Steiner <
> hans at guardianproject.info> wrote:
>
"
265,Commotion-dev, latest openwrt/commotion builds for Fonera and,"Thu, 16 Feb 2012 12:14:58 -0600",-0600,Chris Ritzo,"Ben,
Sure thing. I'll see about locating the menuconfig from the build.

Regarding the IP, this is a change that was applied prior to compiling. I
believe it's part of the init scripts that are included when you build
OpenWRT with the Commotion RC2 feeds. I'm guessing the default IP comes
from the defaults for Ubiquity devices which are probably in the init
scripts.

I'll see about getting more details from my buildroot.

Chris

On Thu, Feb 16, 2012 at 10:59 AM, Ben West <me at benwest.name> wrote:

> Hi Chris,
>
> Thanks for sharing!
>
> I can confirm OpenWRT Kamikaze works fine on Fonera 2100 and other ath5k
> units from using ROBIN mesh firmware (which is still based on Kamikaze).
>
> I see you are telnetting in to 192.168.1.20, rather than the 192.168.1.1
> that I was accustomed to for newly flashed OpenWRT backfire units.  Is this
> is change that you applied yourself before compiling?
>
> Also, would you be willing to share the kernel config you used to compile
> these images?  It could possibly help diagnose problems encountered
> flashing ath5k units with Backfire 10.03.1+
>
>
> On Thu, Feb 16, 2012 at 9:42 AM, Chris Ritzo <chris.ritzo at gmail.com>wrote:
>
"
266,Commotion-dev, Poor routed throughput eth1 -> eth0 on Bufallo,"Fri, 17 Feb 2012 02:00:52 -0600",-0600,Ben West,"Hi All,

I happen to still be running the OpenWrt trunk 26908 build for the Buffalo
WZR-HP-G301NH units doled out at last year's Commotion code sprint, and I
believe I may have just determined this is showing pretty poor routed
throughput (~10 to 15mbits) from its WAN port eth1 to the LAN ports eth0.

This unit is presently working as a gateway router for a bunch of UBNT M5
mesh nodes, and I was having a persistent problem with the nodes topping
out at around 6Mbit download speeds from the Internet (speedtest.net),
until I tried downloading a file stored locally on the Bullafo flash and
got 20-30Mbits throughput.

dmesg confirms that eth1 is negotiating at 100Mbit on boot up, and I've
confirmed I don't have a mis-configured qos script interfering with things.
 Hopefully this is just because I'm running an old-ish OpenWRT trunk.  Has
anyone else been able to confirm Buffalo Nfiniti will actually sustain
20Mbit+ from its WAN port to LAN ports, provided the WAN uplink is fast
enough?

-- 
Ben West
me at benwest.name
"
267,Commotion-dev, Poor routed throughput eth1 -> eth0 on Bufallo,"Sat, 18 Feb 2012 22:05:36 -0500",-0500,Daniel Bryg,"Hi Ben,

For what it's worth I'm on a recent trunk with 300NH, and the speeds
seem proper (got to about 40Mbit/s in a local setup). I hope to try with
a 301 within a few days.

Daniel.

On 2/17/2012 3:00 AM, Ben West wrote:
> Hi All,
> 
> I happen to still be running the OpenWrt trunk 26908 build for the Buffalo
> WZR-HP-G301NH units doled out at last year's Commotion code sprint, and I
> believe I may have just determined this is showing pretty poor routed
> throughput (~10 to 15mbits) from its WAN port eth1 to the LAN ports eth0.
> 
> This unit is presently working as a gateway router for a bunch of UBNT M5
> mesh nodes, and I was having a persistent problem with the nodes topping
> out at around 6Mbit download speeds from the Internet (speedtest.net),
> until I tried downloading a file stored locally on the Bullafo flash and
> got 20-30Mbits throughput.
> 
> dmesg confirms that eth1 is negotiating at 100Mbit on boot up, and I've
> confirmed I don't have a mis-configured qos script interfering with things.
>  Hopefully this is just because I'm running an old-ish OpenWRT trunk.  Has
> anyone else been able to confirm Buffalo Nfiniti will actually sustain
> 20Mbit+ from its WAN port to LAN ports, provided the WAN uplink is fast
> enough?
> 
> 
> 
> 
> _______________________________________________
> Commotion-dev mailing list
> Commotion-dev at lists.chambana.net
> http://lists.chambana.net/mailman/listinfo/commotion-dev
"
268,Commotion-dev, Poor routed throughput eth1 -> eth0 on Bufallo,"Sun, 19 Feb 2012 15:01:59 -0600",-0600,Ben West,"Hi Daniel,

Thanks for the response.

I just got a couple more 300NH's in the mail, so I will be trying out
recent trunk (and also Backfire 10.03.1, if it works) on them soon.  Was
the 40Mbit/s speed achieved w/o using the qos script, or anything else that
clutters iptables like freifunk-p2pblock?  Likewise, were you using the
'option type bridge' setting on any interface?

Could you share your /etc/config/network?

Here is my /etc/config/network on the 301NH in question.  The uplink is a
20Mbit cable connection.

config 'interface' 'loopback'
option 'ifname' 'lo'
option 'proto' 'static'
option 'ipaddr' '127.0.0.1'
option 'netmask' '255.0.0.0'

config 'interface' 'lan'
option 'ifname' 'eth0.1'
option 'type' 'bridge'
option 'proto' 'static'
option 'ipaddr' '192.168.10.1'
option 'netmask' '255.255.255.0'

config 'interface' 'wan'
option 'ifname' 'eth1'
option 'proto' 'static'
#option 'mtu' '1500'
        option 'defaultroute' '0'
        option 'peerdns' '0'
        option 'ipaddr' 'X.X.X.X'
        option 'netmask' '255.255.255.252'
        option 'gateway' 'X.X.X.X'
        option 'dns' '208.67.222.222 208.67.222.220'

config 'switch'
option 'name' 'rtl8366rb'
option 'reset' '1'
option 'enable_vlan' '1'

config 'switch_vlan'
option 'device' 'rtl8366rb'
option 'vlan' '1'
option 'ports' '0 1 2 3 5t'


Thanks!

On Sat, Feb 18, 2012 at 9:05 PM, Daniel Bryg <daniel at accessnow.org> wrote:

> Hi Ben,
>
> For what it's worth I'm on a recent trunk with 300NH, and the speeds
> seem proper (got to about 40Mbit/s in a local setup). I hope to try with
> a 301 within a few days.
>
> Daniel.
>
> On 2/17/2012 3:00 AM, Ben West wrote:
> > Hi All,
> >
> > I happen to still be running the OpenWrt trunk 26908 build for the
> Buffalo
> > WZR-HP-G301NH units doled out at last year's Commotion code sprint, and I
> > believe I may have just determined this is showing pretty poor routed
> > throughput (~10 to 15mbits) from its WAN port eth1 to the LAN ports eth0.
> >
> > This unit is presently working as a gateway router for a bunch of UBNT M5
> > mesh nodes, and I was having a persistent problem with the nodes topping
> > out at around 6Mbit download speeds from the Internet (speedtest.net),
> > until I tried downloading a file stored locally on the Bullafo flash and
> > got 20-30Mbits throughput.
> >
> > dmesg confirms that eth1 is negotiating at 100Mbit on boot up, and I've
> > confirmed I don't have a mis-configured qos script interfering with
> things.
> >  Hopefully this is just because I'm running an old-ish OpenWRT trunk.
>  Has
> > anyone else been able to confirm Buffalo Nfiniti will actually sustain
> > 20Mbit+ from its WAN port to LAN ports, provided the WAN uplink is fast
> > enough?
> >
> >
> >
> >
> > _______________________________________________
> > Commotion-dev mailing list
> > Commotion-dev at lists.chambana.net
> > http://lists.chambana.net/mailman/listinfo/commotion-dev
"
269,Commotion-dev, interesting...,"Tue, 21 Feb 2012 12:45:49 +0100",+0100,L. Aaron Kaplan,"http://news.techworld.com/mobile-wireless/3338760/mobile-users-easily-tracked-through-gsm-network-leaks/?olo=rss


"
270,Commotion-dev, interesting...,"Tue, 21 Feb 2012 17:28:18 +0100",+0100,L. Aaron Kaplan,"

""Our measurement system as displayed in figure 3 is based on the Osmocom baseband platform""
http://www-users.cs.umn.edu/~hopper/celluloc.pdf




On Feb 21, 2012, at 2:49 PM, Nathan of Guardian wrote:

> Anyone know what the ""open source software"" they are referring to is? I thought it would be Osmocom, but then they say it runs on a G1.
> 
> ""L. Aaron Kaplan"" <aaron at lo-res.org> wrote:
> 
"
271,Commotion-dev, Current state on handsets,"Fri, 24 Feb 2012 08:34:35 +0100",+0100,Paul Fuxjaeger,"hi all,

can someone in here shed some light on the current state of adhoc-mode 
and olsrd/batmand on smartphones (for android-platform mostly I guess?).

1) On how many models is it known to work at all currently?
2) How much effort is it to make it work?
3) Are there ways to enable it WITHOUT breaking any other 
functionalities on the smartphone if installed?


paul






PS: the reason for asking is:

We thought that the upcoming loooong series of street protests (because 
of acta and it's yet unborn siblings) here in europe/anywhereelse 
provide a nice testbed situation:

During protest there are:
1) lots of technically inclined people with latest gen rooted/jailbroken 
smartphones in close physical proximity.
2) the prospect of helping to test if adhoc nets can spontaneously 
emerge will probably spark interest
3) protest events typically last for 2-4 hours each, thus energy 
efficiency problems (battery runtime) can be largely ignored at this stage
4) those protests all have a general ""we want to keep our networks out 
of central control"" subtext - perfect fit for the occasion.

We think that it does not really matter yet if these ""networks"" (they 
probably cannot stabilize anyhow, routingtable-wise) can be used for 
something useful at all - it is more about the fun of 
observing/participating. Just seeing some small partitioned network 
graphs as they spontaneously emerge/breakdown is enough. Form our point 
of view, it would certainly add some entertainment-bonus while we walk 
these long protest walks.

Currently, what we typically do while being there in the streets (appart 
from chanting and chatting with friends face2face) is using centralized 
twitter/facebook APIs on top of cellular networks controlled by large 
corporations. Although these tools are working fine and seem to be 
passing along messages unfiltered, there are many reasons to start 
questioning if this will stay like that.




"
272,Commotion-dev, Current state on handsets,"Fri, 24 Feb 2012 21:08:44 +1030",+1030,Jeremy Lakeman,"Keep forgetting that this list doesn't change the ""reply to"" address...

On Fri, Feb 24, 2012 at 8:51 PM, Jeremy Lakeman
<Jeremy.Lakeman at gmail.com> wrote:
> (Shameless plug) I'd say Serval Mesh is on the forefront here....
> Simple install and config. Works on lots of phones, though known to
> *completely* and almost permanently screw up wifi on some Droid's.
> You can call between directly connected nodes, though we default to
> batman routing which takes ages to flip paths when you are wandering
> around.
> Our development branch has a store and forward file transfer system
> built in, that we're also using for delay tolerant text messaging, and
> collaborative mapping (still a work in progress).
> You can even install the software directly between phones via either
> blue tooth or a temporary hotspot.
> And everything we've done also works in wifi client / hotspot mode
> between devices connected to the same network. Useful if you can't get
> root on some devices.
>
> Note that there's basically no security at this point.
>
> On Fri, Feb 24, 2012 at 6:04 PM, Paul Fuxjaeger <fuxjaeger at ftw.at> wrote:
"
273,Commotion-dev, Current state on handsets,"Fri, 24 Feb 2012 13:42:24 +0100",+0100,Paul Fuxjaeger,"> On Fri, Feb 24, 2012 at 8:51 PM, Jeremy Lakeman
> <Jeremy.Lakeman at gmail.com>  wrote:
"
274,Commotion-dev, Current state on handsets,"Fri, 24 Feb 2012 15:22:43 -0500",-0500,Hans-Christoph Steiner,"

On 02/24/2012 07:42 AM, Paul Fuxjaeger wrote:
"
275,Commotion-dev, Current state on handsets,"Sat, 25 Feb 2012 10:29:54 +1030",+1030,Jeremy Lakeman,"On Sat, Feb 25, 2012 at 6:52 AM, Hans-Christoph Steiner
<hans at guardianproject.info> wrote:
>
>
"
276,Commotion-dev, Poor routed throughput eth1 -> eth0 on Bufallo,"Sun, 26 Feb 2012 00:17:11 -0500",-0500,Daniel Bryg,"Hey Ben, I redid the test with the A2 F0B model from last year's code
sprint, fresh trunk, and got speeds around 100Mbit/s with scp:
128M.bin     | 131072 kB | 11915 kB/s

There's nothing special in the iptables other than masquerading and this
is my network config:

cat /etc/config/network

config 'interface' 'loopback'
        option 'ifname' 'lo'
        option 'proto' 'static'
        option 'ipaddr' '127.0.0.1'
        option 'netmask' '255.0.0.0'

config 'interface' 'lan'
        option 'ifname' 'eth0.1'
        option 'type' 'bridge'
        option 'proto' 'static'
        option 'netmask' '255.255.255.0'
        option 'ipaddr' '192.168.31.1'

config 'interface' 'wan'
        option 'ifname' 'eth1'
        option 'proto' 'dhcp'

config 'switch'
        option 'name' 'switch0'
        option 'reset' '1'
        option 'enable_vlan' '1'

config 'switch_vlan'
        option 'device' 'switch0'
        option 'vlan' '1'
        option 'ports' '0 1 2 3 5t'

Regards,

D


On 02/19/2012 04:01 PM, Ben West wrote:
> Hi Daniel,
> 
> Thanks for the response.
> 
> I just got a couple more 300NH's in the mail, so I will be trying out
> recent trunk (and also Backfire 10.03.1, if it works) on them soon.  Was
> the 40Mbit/s speed achieved w/o using the qos script, or anything else that
> clutters iptables like freifunk-p2pblock?  Likewise, were you using the
> 'option type bridge' setting on any interface?
> 
> Could you share your /etc/config/network?
> 
> Here is my /etc/config/network on the 301NH in question.  The uplink is a
> 20Mbit cable connection.
> 
> config 'interface' 'loopback'
> option 'ifname' 'lo'
> option 'proto' 'static'
> option 'ipaddr' '127.0.0.1'
> option 'netmask' '255.0.0.0'
> 
> config 'interface' 'lan'
> option 'ifname' 'eth0.1'
> option 'type' 'bridge'
> option 'proto' 'static'
> option 'ipaddr' '192.168.10.1'
> option 'netmask' '255.255.255.0'
> 
> config 'interface' 'wan'
> option 'ifname' 'eth1'
> option 'proto' 'static'
> #option 'mtu' '1500'
>         option 'defaultroute' '0'
>         option 'peerdns' '0'
>         option 'ipaddr' 'X.X.X.X'
>         option 'netmask' '255.255.255.252'
>         option 'gateway' 'X.X.X.X'
>         option 'dns' '208.67.222.222 208.67.222.220'
> 
> config 'switch'
> option 'name' 'rtl8366rb'
> option 'reset' '1'
> option 'enable_vlan' '1'
> 
> config 'switch_vlan'
> option 'device' 'rtl8366rb'
> option 'vlan' '1'
> option 'ports' '0 1 2 3 5t'
> 
> 
> Thanks!
> 
> On Sat, Feb 18, 2012 at 9:05 PM, Daniel Bryg <daniel at accessnow.org> wrote:
> 
"
277,Commotion-dev, Boilerplate Android code pushed,"Thu, 02 Feb 2012 12:18:18 -0500",-0500,Hans-Christoph Steiner,
278,Commotion-dev, Boilerplate Android code pushed,"Fri, 3 Feb 2012 08:28:41 +1030",+1030,Jeremy Lakeman,"Ah, we've had some strange reports like that from CM7 users.
No we don't write over any files in the system folder. At least not directly.
We'll probably end up trying to use our ""generic"" chipset profile
which will try to call /system/lib/libhardware_legacy.so
wifi_load_driver() / wifi_unload_driver().
CM7 seems to include this library, but using it might be the cause of
this issue. We haven't flashed CM7 onto any of our phones yet to test
what the root cause is.
You may need to boot into recovery mode and clear the cache, or worst
case do a factory reset.

On Fri, Feb 3, 2012 at 3:48 AM, Hans-Christoph Steiner
<hans at guardianproject.info> wrote:
> "
279,Commotion-dev, Boilerplate Android code pushed,"Fri, 3 Feb 2012 11:56:34 +1030",+1030,Jeremy Lakeman,"We've got a lot of cheap Huewai IDEOS phones, CPU and flash is quite
slow and they have ridiculously tiny screens.

Samsung galaxy's work quite well, at least with the stock firmware.
I've also seen them work with CM, so I assume those roms have the same
driver files in the same locations so we aren't hitting the same
issue.

If we can disable our ""generic"" profile for CM phones, we could work
towards supporting the built in modified wpa supplicant. We shouldn't
actually need to load the wifi driver ourselves since Cyanogen
supports joining adhoc networks anyway. Not sure if we can initiate a
network though.

I wonder if your phone is having trouble loading the (at a guess)
tiwlan_drv.ko module.

On stock Droids we do something like;
insmod /system/lib/modules/tiwlan_drv.ko
/system/bin/wlan_loader -f /system/etc/wifi/fw_wlan1271.bin -e
/proc/calibration -i [path]/tiwlan.ini
Then use ifconfig / iwconfig to get the network running

If you have firmware binaries in different places we wouldn't use this
script and would fall back to trying ""generic""

On Fri, Feb 3, 2012 at 11:25 AM, Hans-Christoph Steiner
<hans at guardianproject.info> wrote:
>
> I poked around a little bit, my /data/misc/wifi/wpa_supplicant.conf file
> seems intact. ?""netcfg tiwlan0 up"" and down no longer work, it tells me:
>
> # /system/bin/netcfg tiwlan0 up
> action 'up' failed (No such device)
>
> I rebooted and cleared the cache, no luck there. I'll try flashing CM7.1
> again. ?Do you have a phone you recommend for wifi hacking with Android?
> ?We have a good collection, so we probably have a better one than a
> Droid/Milestone running CM7.1.
>
> .hc
>
>
> On 02/02/2012 04:58 PM, Jeremy Lakeman wrote:
"
280,Commotion-dev, olsrd ubuntu packages,"Mon, 6 Feb 2012 16:39:22 -0500",-0500,Hans-Christoph Steiner,"
In the process of getting my dev setup ironed out, I made some updated Ubuntu packages, and am going to get olsrd into Debian/squeeze/backports since olsrd was dropped from the official squeeze release.

https://launchpad.net/~guardianproject/+archive/commotion/+packages

I've been talking with the Debian maintainer of the olsrd package about becoming co-maintainer and have submitted a few patches:
http://bugs.debian.org/cgi-bin/pkgreport.cgi?pkg=olsrd;dist=unstable

.hc


"
281,Commotion-dev, olsrd ubuntu packages,"Mon, 06 Feb 2012 16:49:53 -0500",-0500,Josh King,"This is awesome, Hans! I'm going to try these out as soon as possible.

On 02/06/2012 04:39 PM, Hans-Christoph Steiner wrote:
> 
> In the process of getting my dev setup ironed out, I made some updated Ubuntu packages, and am going to get olsrd into Debian/squeeze/backports since olsrd was dropped from the official squeeze release.
> 
> https://launchpad.net/~guardianproject/+archive/commotion/+packages
> 
> I've been talking with the Debian maintainer of the olsrd package about becoming co-maintainer and have submitted a few patches:
> http://bugs.debian.org/cgi-bin/pkgreport.cgi?pkg=olsrd;dist=unstable
> 
> .hc
> 
> 
> "
282,Commotion-dev, olsrd ubuntu packages,"Mon, 6 Feb 2012 18:57:47 -0500",-0500,Hans-Christoph Steiner,"
I also just checked in the olsrd package I did for Mac OS X Fink while at the Commotion kick-off weekend in DC.  It builds and runs, but I haven't figured out how to get the proper wifi settings working.

.hc

On Feb 6, 2012, at 4:49 PM, Josh King wrote:

> This is awesome, Hans! I'm going to try these out as soon as possible.
> 
> On 02/06/2012 04:39 PM, Hans-Christoph Steiner wrote:
"
283,Commotion-dev, open garden wifi tether,"Mon, 6 Feb 2012 20:42:11 -0500",-0500,Hans-Christoph Steiner,"
Anyone played with Open Garden Wifi Tether for Android?  Its an open source Android app that creates an Ad-hoc network to share the 3G internet connection.  While my Droid-CM7.1 is still not working for normal wifi after the Serval setup, Open Garden can still set up an Ad-hoc network, which my laptop can associate with and receive an IP via DHCP.

https://github.com/opengarden/android-tether

I'm going to dig in and try to figure out how they do it.

.hc

"
284,Commotion-dev, open garden wifi tether,"Mon, 6 Feb 2012 21:44:56 -0500",-0500,Hans-Christoph Steiner,"
It looks like we struck gold here! They have a complete implementation that includes its own ifconfig, iwconfig, insmod, etc.[1], and already has profiles for many devices![2]  It even has a config file to set how you want things to be setup [3].  And it seems to be all Apache 2.0 licensed.

[1] https://github.com/opengarden/android-tether/tree/master/native
[2] https://github.com/opengarden/android-tether/blob/master/res/raw/tether_edify
[3] https://github.com/opengarden/android-tether/blob/master/res/raw/tether_conf

.hc

On Feb 6, 2012, at 8:42 PM, Hans-Christoph Steiner wrote:

> 
> Anyone played with Open Garden Wifi Tether for Android?  Its an open source Android app that creates an Ad-hoc network to share the 3G internet connection.  While my Droid-CM7.1 is still not working for normal wifi after the Serval setup, Open Garden can still set up an Ad-hoc network, which my laptop can associate with and receive an IP via DHCP.
> 
> https://github.com/opengarden/android-tether
> 
> I'm going to dig in and try to figure out how they do it.
> 
> .hc
> 
> "
285,Commotion-dev, Boilerplate Android code pushed,"Mon, 6 Feb 2012 22:16:55 -0500",-0500,Hans-Christoph Steiner,"
I've tried now wiping the cache and doing a whole system update, and still no luck.  I haven't tried wiping the data yet.

- after a reboot, tiwlan0_drv is not loaded
- insmod /system/lib/modules/tiwlan_drv.ko works fine
- after insmod, ""Wireless & network settings"" says: Wi-Fi Error
- /system/bin/wlan_loader -f /system/etc/wifi/fw_wlan1271.bin -e /proc/calibration -i /system/etc/wifi/tiwlan.ini gives me:
   Set property wlan.driver.status = ok - Fail

If you want, I can hook this phone up to a computer where I can give you a shell, and you can hunt around. Its even got a Debian chroot on it, you can get a full Debian shell by running /data/local/bin/debian, thanks to LilDebi.apk.  :)

.hc

On Feb 2, 2012, at 8:26 PM, Jeremy Lakeman wrote:

> We've got a lot of cheap Huewai IDEOS phones, CPU and flash is quite
> slow and they have ridiculously tiny screens.
> 
> Samsung galaxy's work quite well, at least with the stock firmware.
> I've also seen them work with CM, so I assume those roms have the same
> driver files in the same locations so we aren't hitting the same
> issue.
> 
> If we can disable our ""generic"" profile for CM phones, we could work
> towards supporting the built in modified wpa supplicant. We shouldn't
> actually need to load the wifi driver ourselves since Cyanogen
> supports joining adhoc networks anyway. Not sure if we can initiate a
> network though.
> 
> I wonder if your phone is having trouble loading the (at a guess)
> tiwlan_drv.ko module.
> 
> On stock Droids we do something like;
> insmod /system/lib/modules/tiwlan_drv.ko
> /system/bin/wlan_loader -f /system/etc/wifi/fw_wlan1271.bin -e
> /proc/calibration -i [path]/tiwlan.ini
> Then use ifconfig / iwconfig to get the network running
> 
> If you have firmware binaries in different places we wouldn't use this
> script and would fall back to trying ""generic""
> 
> On Fri, Feb 3, 2012 at 11:25 AM, Hans-Christoph Steiner
> <hans at guardianproject.info> wrote:
"
286,Commotion-dev, Boilerplate Android code pushed,"Mon, 6 Feb 2012 22:17:50 -0500",-0500,Hans-Christoph Steiner,"
I forgot to mention: neither /proc/calibration nor /data/calibration exist now on this Droid-CM7.1. I don't know if either one was there before, but that file location does seem to be required.

.hc

On Feb 6, 2012, at 10:16 PM, Hans-Christoph Steiner wrote:

> 
> I've tried now wiping the cache and doing a whole system update, and still no luck.  I haven't tried wiping the data yet.
> 
> - after a reboot, tiwlan0_drv is not loaded
> - insmod /system/lib/modules/tiwlan_drv.ko works fine
> - after insmod, ""Wireless & network settings"" says: Wi-Fi Error
> - /system/bin/wlan_loader -f /system/etc/wifi/fw_wlan1271.bin -e /proc/calibration -i /system/etc/wifi/tiwlan.ini gives me:
>   Set property wlan.driver.status = ok - Fail
> 
> If you want, I can hook this phone up to a computer where I can give you a shell, and you can hunt around. Its even got a Debian chroot on it, you can get a full Debian shell by running /data/local/bin/debian, thanks to LilDebi.apk.  :)
> 
> .hc
> 
> On Feb 2, 2012, at 8:26 PM, Jeremy Lakeman wrote:
> 
"
287,Commotion-dev, open garden wifi tether,"Tue, 7 Feb 2012 16:44:29 +1030",+1030,Jeremy Lakeman,"Looks like they, like serval, are also based on the old wifi tether;
http://code.google.com/p/android-wifi-tether/

On Tue, Feb 7, 2012 at 1:14 PM, Hans-Christoph Steiner <hans at at.or.at> wrote:
>
> It looks like we struck gold here! They have a complete implementation that includes its own ifconfig, iwconfig, insmod, etc.[1], and already has profiles for many devices![2] ?It even has a config file to set how you want things to be setup [3]. ?And it seems to be all Apache 2.0 licensed.
>
> [1] https://github.com/opengarden/android-tether/tree/master/native
> [2] https://github.com/opengarden/android-tether/blob/master/res/raw/tether_edify
> [3] https://github.com/opengarden/android-tether/blob/master/res/raw/tether_conf
>
> .hc
>
> On Feb 6, 2012, at 8:42 PM, Hans-Christoph Steiner wrote:
>
"
288,Commotion-dev, Boilerplate Android code pushed,"Thu, 02 Feb 2012 19:55:15 -0500",-0500,Hans-Christoph Steiner,"
I poked around a little bit, my /data/misc/wifi/wpa_supplicant.conf file
seems intact.  ""netcfg tiwlan0 up"" and down no longer work, it tells me:

# /system/bin/netcfg tiwlan0 up
action 'up' failed (No such device)

I rebooted and cleared the cache, no luck there. I'll try flashing CM7.1
again.  Do you have a phone you recommend for wifi hacking with Android?
 We have a good collection, so we probably have a better one than a
Droid/Milestone running CM7.1.

.hc


On 02/02/2012 04:58 PM, Jeremy Lakeman wrote:
> Ah, we've had some strange reports like that from CM7 users.
> No we don't write over any files in the system folder. At least not directly.
> We'll probably end up trying to use our ""generic"" chipset profile
> which will try to call /system/lib/libhardware_legacy.so
> wifi_load_driver() / wifi_unload_driver().
> CM7 seems to include this library, but using it might be the cause of
> this issue. We haven't flashed CM7 onto any of our phones yet to test
> what the root cause is.
> You may need to boot into recovery mode and clear the cache, or worst
> case do a factory reset.
> 
> On Fri, Feb 3, 2012 at 3:48 AM, Hans-Christoph Steiner
> <hans at guardianproject.info> wrote:
> 
> I got it running on my Droid with CM7.1, but then I couldn't make it
> stop running ;)  Every time I turned on my wifi since setting up
> Serval, the Serval app would then show up and turn it back off.  I
> first clicked the ""Suspend"" button, and it turned to ""Start"".  I then
> clicked ""Reset"".  I then force closed it, and cleared the data.
> 
> Now I've removed it entirely, and my wifi isn't working any more.  It
> turns on, but never scans for any networks and it seems to have
> cleared all the saved networks in my phone.  I cannot manually add
> networks either.
> 
> Does this app mess with the wpa_supplicant.conf that comes with the
> phone, or any of the standard Android files?
> 
> .hc
> 
> On 01/10/2012 10:08 PM, Jeremy Lakeman wrote:
"
289,Commotion-dev, open garden wifi tether,"Tue, 7 Feb 2012 12:05:30 -0500",-0500,Hans-Christoph Steiner,"
Doh, oh well.  I see now: for serval, 'tether' was just renamed 'adhoc' and the ifconfig/ folder is stripped out.  I wonder if android-wifi-tether or OpenGarden would also nuke the wifi on my Droid-CM7.1, I'll try it out once I get it going again.  I had played with OpenGarden on that phone before, so I think not, but I'll try to confirm that.

So it looks like you split up the mega tether_edify script into per-device edify scripts.  That makes sense, it makes those scripts rational chunks.  Now I see the logging and all, but unfortunately, I already deleted batphone.  I reinstalled it and ran the setup again, the logs are attached.  I think it might be different than the initial attempt because detect.log is telling me this:

""Could not work out how to control your WiFi chipset. Relying on operating system, so no ad-hoc WiFi.""

Here's all the logs:

"
290,Commotion-dev, Barnacle Tether,"Tue, 7 Feb 2012 13:45:17 -0500",-0500,Hans-Christoph Steiner,"
Have people here seen or played with Barnacle Wifi Tether?  It seems that its a different code base from the android-wifi-tether app.  It seems to have been recently open sourced:

https://github.com/szym/barnacle

.hc

"
291,Commotion-dev, Barnacle Tether,"Tue, 07 Feb 2012 14:01:33 -0500",-0500,Brian Duggan,
292,Commotion-dev, open garden wifi tether,"Tue, 07 Feb 2012 15:12:55 -0500",-0500,Sascha Meinrath,"I've been using Open Garden on the OTI Dev phone for awhile now, in case anyone
wants to play around with it here at NAF.  It works really well, though I
haven't investigated the code itself.  I'd be curious what you find.

--Sascha

On 02/06/2012 08:42 PM, Hans-Christoph Steiner wrote:
> 
> Anyone played with Open Garden Wifi Tether for Android?  Its an open source Android app that creates an Ad-hoc network to share the 3G internet connection.  While my Droid-CM7.1 is still not working for normal wifi after the Serval setup, Open Garden can still set up an Ad-hoc network, which my laptop can associate with and receive an IP via DHCP.
> 
> https://github.com/opengarden/android-tether
> 
> I'm going to dig in and try to figure out how they do it.
> 
> .hc
> 
> "
293,Commotion-dev, Barnacle Tether,"Tue, 7 Feb 2012 15:16:38 -0500",-0500,Hans-Christoph Steiner,"
Yes, he does have some useful blog posts on his site, this will probably affect us to:

http://szym.net/2010/12/barnacle-and-ipad/#more-292
""...the wireless driver on many Android phones only beacons an ad-hoc network for a while, and then if no other client associates, it stops. The next time it tries, it uses a different BSSID. Unfortunately, AFAIK, there's nothing we can do to stop it. If you try providing a BSSID in the settings, it might simply fail to beacon at all (it would only associate with an existing network matching that BSSID).""

.hc

On Feb 7, 2012, at 2:01 PM, Brian Duggan wrote:

> "
294,Commotion-dev, open garden wifi tether,"Tue, 7 Feb 2012 15:17:25 -0500",-0500,Hans-Christoph Steiner,"
What kind of phone is the OTI Dev phone?  It seems the reliability of the adhoc mode varies a lot by device.

.hc

On Feb 7, 2012, at 3:12 PM, Sascha Meinrath wrote:

> I've been using Open Garden on the OTI Dev phone for awhile now, in case anyone
> wants to play around with it here at NAF.  It works really well, though I
> haven't investigated the code itself.  I'd be curious what you find.
> 
> --Sascha
> 
> On 02/06/2012 08:42 PM, Hans-Christoph Steiner wrote:
"
295,Commotion-dev, open garden wifi tether,"Tue, 07 Feb 2012 15:21:29 -0500",-0500,Sascha Meinrath,"It's a Ting HTC Sense.

--Sascha

On 02/07/2012 03:17 PM, Hans-Christoph Steiner wrote:
> 
> What kind of phone is the OTI Dev phone?  It seems the reliability of the adhoc mode varies a lot by device.
> 
> .hc
> 
> On Feb 7, 2012, at 3:12 PM, Sascha Meinrath wrote:
> 
"
296,Commotion-dev, open garden wifi tether,"Tue, 07 Feb 2012 15:23:07 -0500",-0500,Brian Duggan,
297,Commotion-dev, open garden wifi tether,"Tue, 07 Feb 2012 15:22:58 -0500",-0500,Sascha Meinrath,"Wait, they've rebranded now that they're out of Beta, it's the HTC Detail (with
HTC Sense): https://ting.com/devices/Detail

--Sascha

On 02/07/2012 03:17 PM, Hans-Christoph Steiner wrote:
> 
> What kind of phone is the OTI Dev phone?  It seems the reliability of the adhoc mode varies a lot by device.
> 
> .hc
> 
> On Feb 7, 2012, at 3:12 PM, Sascha Meinrath wrote:
> 
"
298,Commotion-dev, open garden wifi tether,"Tue, 07 Feb 2012 15:27:04 -0500",-0500,Brian Duggan,
299,Commotion-dev, open garden wifi tether,"Wed, 8 Feb 2012 08:03:41 +1030",+1030,Jeremy Lakeman,"We haven't had any issues with the SGS2's, but then with dhd.ko based
modules you need to pass the dhd_pkt_filter_enable=0 module parameter
or broadcast packets will be dropped when the screen turns off.
(eg https://github.com/servalproject/batphone/blob/master/data/conf/wifichipsets/sgs2.adhoc.edify)

HTC phones are fine in adhoc mode, but as a normal wifi client they
don't always receive UDP broadcast packets.


On Wed, Feb 8, 2012 at 6:53 AM, Brian Duggan <bcdugga at gmail.com> wrote:
> "
300,Commotion-dev, Barnacle Tether,"Wed, 8 Feb 2012 08:07:16 +1030",+1030,Jeremy Lakeman,"On Wed, Feb 8, 2012 at 5:31 AM, Brian Duggan <bcduggan.naf at gmail.com> wrote:
> Also, just so everyone knows, please star and comment on Android bug 82:
>
> http://code.google.com/p/android/issues/detail?id=82

I've heard a rumour that enough telco's don't like adhoc mode that it
will never be fixed in android.

"
301,Commotion-dev, Barnacle Tether,"Wed, 8 Feb 2012 10:12:27 -0500",-0500,Hans-Christoph Steiner,"
On Feb 7, 2012, at 4:37 PM, Jeremy Lakeman wrote:

> On Wed, Feb 8, 2012 at 5:31 AM, Brian Duggan <bcduggan.naf at gmail.com> wrote:
"
302,Commotion-dev, open garden wifi tether,"Wed, 08 Feb 2012 16:46:30 -0500",-0500,Hans-Christoph Steiner,"
I just did a completely successful trial of Serval batphone on two HTC
Wildfire phones running CM6.1.0.  Worked seamlessly, well done :)

.hc

On 02/07/2012 03:27 PM, Brian Duggan wrote:
> Which is more or less the same phone as the Sprint HTC Evo 4g
> Shift. I mean the Tink HTC Detail :)
> 
> Brian
> 
> On 02/07/2012 03:22 PM, Sascha Meinrath wrote:
"
303,Commotion-dev, latest openwrt/commotion builds for Fonera and,"Fri, 10 Feb 2012 18:17:50 -0500",-0500,Hans-Christoph Steiner,"
I'm working on getting a test network up and running, so I want to flash
the commotion onto the routers that I have: 5 Fonera 2100s and 1 Buffalo
WZR-HP-G300NH. Where do I get the latest builds?

This doesn't seem like its for the Fonera 2100 since it says ar71xx:
https://tech.chambana.net/projects/commotion/files

.hc

"
304,Commotion-dev, latest openwrt/commotion builds for Fonera and,"Fri, 10 Feb 2012 18:31:59 -0600",-0600,Ben West,"I had compiled ath5k version of Commotion at the beginning of the year
using OpenWRT r29607 but didn't get a chance to actually flash to a
fonera to test.  (Amazing what having a new daughter born does to your
freetime :)

I've uploaded the compiled images here:
http://info.gowasabi.net/commotion-openwrt

P.S. If your DNS doesn't resolve info.gowasabi.net yet, its IP is
74.207.229.189.

Do please give 'em a shot and report back!

On Fri, Feb 10, 2012 at 5:17 PM, Hans-Christoph Steiner
<hans at guardianproject.info> wrote:
>
> I'm working on getting a test network up and running, so I want to flash
> the commotion onto the routers that I have: 5 Fonera 2100s and 1 Buffalo
> WZR-HP-G300NH. Where do I get the latest builds?
>
> This doesn't seem like its for the Fonera 2100 since it says ar71xx:
> https://tech.chambana.net/projects/commotion/files
>
> .hc
> _______________________________________________
> Commotion-dev mailing list
> Commotion-dev at lists.chambana.net
> http://lists.chambana.net/mailman/listinfo/commotion-dev



-- 
Ben West
me at benwest.name

"
305,Commotion-dev, latest openwrt/commotion builds for Fonera and,"Mon, 13 Feb 2012 16:12:52 -0500",-0500,Hans-Christoph Steiner,"
I did:

sudo ./ap51-flash-1.0-42 eth1 openwrt-atheros-root.jffs2-64k \
    openwrt-atheros-vmlinux.lzma

And it flashed successfully, but I can't find a way to connect to it
now.  I've tried over their ethernet 192.168.1.1, 192.168.0.1,
169.254.1.1, 169.254.0.1.  No luck.  Also, it doesn't seem to showing
any wifi networks, and the wifi light is off.

Am I doing first contact right on this box?

.hc

On 02/10/2012 07:31 PM, Ben West wrote:
> I had compiled ath5k version of Commotion at the beginning of the year
> using OpenWRT r29607 but didn't get a chance to actually flash to a
> fonera to test.  (Amazing what having a new daughter born does to your
> freetime :)
> 
> I've uploaded the compiled images here:
> http://info.gowasabi.net/commotion-openwrt
> 
> P.S. If your DNS doesn't resolve info.gowasabi.net yet, its IP is
> 74.207.229.189.
> 
> Do please give 'em a shot and report back!
> 
> On Fri, Feb 10, 2012 at 5:17 PM, Hans-Christoph Steiner
> <hans at guardianproject.info> wrote:
"
306,Commotion-dev, latest openwrt/commotion builds for Fonera and,"Mon, 13 Feb 2012 15:24:53 -0600",-0600,Ben West,"Yep, that should be correct.  Unfortunately, looks like the same behavior I
got when I flashed a Fon 2100 in October 2011 with what was current
Commotion/OpenWRT at the time.  I.e. inability to telnet into the node ...

Thank you for your feedback re: ath5k testing.  Looks like next step is to
test with OpenWRT w/o the Commotion additions (i.e. verify problem isn't
with OpenWRT itself), and then serial console ...

On Mon, Feb 13, 2012 at 3:12 PM, Hans-Christoph Steiner <
hans at guardianproject.info> wrote:

>
> I did:
>
> sudo ./ap51-flash-1.0-42 eth1 openwrt-atheros-root.jffs2-64k \
>    openwrt-atheros-vmlinux.lzma
>
> And it flashed successfully, but I can't find a way to connect to it
> now.  I've tried over their ethernet 192.168.1.1, 192.168.0.1,
> 169.254.1.1, 169.254.0.1.  No luck.  Also, it doesn't seem to showing
> any wifi networks, and the wifi light is off.
>
> Am I doing first contact right on this box?
>
> .hc
>
> On 02/10/2012 07:31 PM, Ben West wrote:
> > I had compiled ath5k version of Commotion at the beginning of the year
> > using OpenWRT r29607 but didn't get a chance to actually flash to a
> > fonera to test.  (Amazing what having a new daughter born does to your
> > freetime :)
> >
> > I've uploaded the compiled images here:
> > http://info.gowasabi.net/commotion-openwrt
> >
> > P.S. If your DNS doesn't resolve info.gowasabi.net yet, its IP is
> > 74.207.229.189.
> >
> > Do please give 'em a shot and report back!
> >
> > On Fri, Feb 10, 2012 at 5:17 PM, Hans-Christoph Steiner
> > <hans at guardianproject.info> wrote:
> "
307,Commotion-dev, latest openwrt/commotion builds for Fonera and,"Thu, 16 Feb 2012 10:21:31 -0500",-0500,Hans-Christoph Steiner,"
I have openwrt kamikaze 8.09.2 on four of the Fonera 2100s that I have, they work fine.

By the way, if anyone has some Foneras they want to get rid of, I'll take them.  I like to build out a decent sized test mesh to test how much roaming around with the phone will work.

.hc

On Feb 13, 2012, at 4:24 PM, Ben West wrote:

> Yep, that should be correct.  Unfortunately, looks like the same behavior I got when I flashed a Fon 2100 in October 2011 with what was current Commotion/OpenWRT at the time.  I.e. inability to telnet into the node ...
> 
> Thank you for your feedback re: ath5k testing.  Looks like next step is to test with OpenWRT w/o the Commotion additions (i.e. verify problem isn't with OpenWRT itself), and then serial console ...
> 
> On Mon, Feb 13, 2012 at 3:12 PM, Hans-Christoph Steiner <hans at guardianproject.info> wrote:
> 
> I did:
> 
> sudo ./ap51-flash-1.0-42 eth1 openwrt-atheros-root.jffs2-64k \
>    openwrt-atheros-vmlinux.lzma
> 
> And it flashed successfully, but I can't find a way to connect to it
> now.  I've tried over their ethernet 192.168.1.1, 192.168.0.1,
> 169.254.1.1, 169.254.0.1.  No luck.  Also, it doesn't seem to showing
> any wifi networks, and the wifi light is off.
> 
> Am I doing first contact right on this box?
> 
> .hc
> 
> On 02/10/2012 07:31 PM, Ben West wrote:
> > I had compiled ath5k version of Commotion at the beginning of the year
> > using OpenWRT r29607 but didn't get a chance to actually flash to a
> > fonera to test.  (Amazing what having a new daughter born does to your
> > freetime :)
> >
> > I've uploaded the compiled images here:
> > http://info.gowasabi.net/commotion-openwrt
> >
> > P.S. If your DNS doesn't resolve info.gowasabi.net yet, its IP is
> > 74.207.229.189.
> >
> > Do please give 'em a shot and report back!
> >
> > On Fri, Feb 10, 2012 at 5:17 PM, Hans-Christoph Steiner
> > <hans at guardianproject.info> wrote:
> "
308,Commotion-dev, latest openwrt/commotion builds for Fonera and,"Thu, 16 Feb 2012 09:42:16 -0600",-0600,Chris Ritzo,"I'm not active in developing for Commotion, but have built a couple images
for Foneras with Commotion feeds included if folks want to try them. They
are running OpenWRT Backfire 10.03 rc 5 or 6.

The compiled binary image and kernel can be downloaded here:
http://wiki.ucimc.org/bin/view/MakerspaceUrbana/FlashingFonerasInstructions

I've found that the Fon does take a while to autoconfig, and that they
function best when running only one virtual AP. The Commotion setup script
also doesn't set the hostname of the device completely, so there is some
debugging that would be necessary for this platform.

Hope this is helpful for someone.

-CR

On Thu, Feb 16, 2012 at 9:21 AM, Hans-Christoph Steiner <
hans at guardianproject.info> wrote:

>
> I have openwrt kamikaze 8.09.2 on four of the Fonera 2100s that I have,
> they work fine.
>
> By the way, if anyone has some Foneras they want to get rid of, I'll take
> them.  I like to build out a decent sized test mesh to test how much
> roaming around with the phone will work.
>
> .hc
>
> On Feb 13, 2012, at 4:24 PM, Ben West wrote:
>
> Yep, that should be correct.  Unfortunately, looks like the same behavior
> I got when I flashed a Fon 2100 in October 2011 with what was current
> Commotion/OpenWRT at the time.  I.e. inability to telnet into the node ...
>
> Thank you for your feedback re: ath5k testing.  Looks like next step is to
> test with OpenWRT w/o the Commotion additions (i.e. verify problem isn't
> with OpenWRT itself), and then serial console ...
>
> On Mon, Feb 13, 2012 at 3:12 PM, Hans-Christoph Steiner <
> hans at guardianproject.info> wrote:
>
"
309,Commotion-dev, latest openwrt/commotion builds for Fonera and,"Thu, 16 Feb 2012 10:59:55 -0600",-0600,Ben West,"Hi Chris,

Thanks for sharing!

I can confirm OpenWRT Kamikaze works fine on Fonera 2100 and other ath5k
units from using ROBIN mesh firmware (which is still based on Kamikaze).

I see you are telnetting in to 192.168.1.20, rather than the 192.168.1.1
that I was accustomed to for newly flashed OpenWRT backfire units.  Is this
is change that you applied yourself before compiling?

Also, would you be willing to share the kernel config you used to compile
these images?  It could possibly help diagnose problems encountered
flashing ath5k units with Backfire 10.03.1+

On Thu, Feb 16, 2012 at 9:42 AM, Chris Ritzo <chris.ritzo at gmail.com> wrote:

> I'm not active in developing for Commotion, but have built a couple images
> for Foneras with Commotion feeds included if folks want to try them. They
> are running OpenWRT Backfire 10.03 rc 5 or 6.
>
> The compiled binary image and kernel can be downloaded here:
> http://wiki.ucimc.org/bin/view/MakerspaceUrbana/FlashingFonerasInstructions
>
>
> I've found that the Fon does take a while to autoconfig, and that they
> function best when running only one virtual AP. The Commotion setup script
> also doesn't set the hostname of the device completely, so there is some
> debugging that would be necessary for this platform.
>
> Hope this is helpful for someone.
>
> -CR
>
>
> On Thu, Feb 16, 2012 at 9:21 AM, Hans-Christoph Steiner <
> hans at guardianproject.info> wrote:
>
"
310,Commotion-dev, latest openwrt/commotion builds for Fonera and,"Thu, 16 Feb 2012 12:14:58 -0600",-0600,Chris Ritzo,"Ben,
Sure thing. I'll see about locating the menuconfig from the build.

Regarding the IP, this is a change that was applied prior to compiling. I
believe it's part of the init scripts that are included when you build
OpenWRT with the Commotion RC2 feeds. I'm guessing the default IP comes
from the defaults for Ubiquity devices which are probably in the init
scripts.

I'll see about getting more details from my buildroot.

Chris

On Thu, Feb 16, 2012 at 10:59 AM, Ben West <me at benwest.name> wrote:

> Hi Chris,
>
> Thanks for sharing!
>
> I can confirm OpenWRT Kamikaze works fine on Fonera 2100 and other ath5k
> units from using ROBIN mesh firmware (which is still based on Kamikaze).
>
> I see you are telnetting in to 192.168.1.20, rather than the 192.168.1.1
> that I was accustomed to for newly flashed OpenWRT backfire units.  Is this
> is change that you applied yourself before compiling?
>
> Also, would you be willing to share the kernel config you used to compile
> these images?  It could possibly help diagnose problems encountered
> flashing ath5k units with Backfire 10.03.1+
>
>
> On Thu, Feb 16, 2012 at 9:42 AM, Chris Ritzo <chris.ritzo at gmail.com>wrote:
>
"
311,Commotion-dev, Poor routed throughput eth1 -> eth0 on Bufallo,"Fri, 17 Feb 2012 02:00:52 -0600",-0600,Ben West,"Hi All,

I happen to still be running the OpenWrt trunk 26908 build for the Buffalo
WZR-HP-G301NH units doled out at last year's Commotion code sprint, and I
believe I may have just determined this is showing pretty poor routed
throughput (~10 to 15mbits) from its WAN port eth1 to the LAN ports eth0.

This unit is presently working as a gateway router for a bunch of UBNT M5
mesh nodes, and I was having a persistent problem with the nodes topping
out at around 6Mbit download speeds from the Internet (speedtest.net),
until I tried downloading a file stored locally on the Bullafo flash and
got 20-30Mbits throughput.

dmesg confirms that eth1 is negotiating at 100Mbit on boot up, and I've
confirmed I don't have a mis-configured qos script interfering with things.
 Hopefully this is just because I'm running an old-ish OpenWRT trunk.  Has
anyone else been able to confirm Buffalo Nfiniti will actually sustain
20Mbit+ from its WAN port to LAN ports, provided the WAN uplink is fast
enough?

-- 
Ben West
me at benwest.name
"
312,Commotion-dev, Poor routed throughput eth1 -> eth0 on Bufallo,"Sat, 18 Feb 2012 22:05:36 -0500",-0500,Daniel Bryg,"Hi Ben,

For what it's worth I'm on a recent trunk with 300NH, and the speeds
seem proper (got to about 40Mbit/s in a local setup). I hope to try with
a 301 within a few days.

Daniel.

On 2/17/2012 3:00 AM, Ben West wrote:
> Hi All,
> 
> I happen to still be running the OpenWrt trunk 26908 build for the Buffalo
> WZR-HP-G301NH units doled out at last year's Commotion code sprint, and I
> believe I may have just determined this is showing pretty poor routed
> throughput (~10 to 15mbits) from its WAN port eth1 to the LAN ports eth0.
> 
> This unit is presently working as a gateway router for a bunch of UBNT M5
> mesh nodes, and I was having a persistent problem with the nodes topping
> out at around 6Mbit download speeds from the Internet (speedtest.net),
> until I tried downloading a file stored locally on the Bullafo flash and
> got 20-30Mbits throughput.
> 
> dmesg confirms that eth1 is negotiating at 100Mbit on boot up, and I've
> confirmed I don't have a mis-configured qos script interfering with things.
>  Hopefully this is just because I'm running an old-ish OpenWRT trunk.  Has
> anyone else been able to confirm Buffalo Nfiniti will actually sustain
> 20Mbit+ from its WAN port to LAN ports, provided the WAN uplink is fast
> enough?
> 
> 
> 
> 
> _______________________________________________
> Commotion-dev mailing list
> Commotion-dev at lists.chambana.net
> http://lists.chambana.net/mailman/listinfo/commotion-dev

"
313,Commotion-dev, Poor routed throughput eth1 -> eth0 on Bufallo,"Sun, 19 Feb 2012 15:01:59 -0600",-0600,Ben West,"Hi Daniel,

Thanks for the response.

I just got a couple more 300NH's in the mail, so I will be trying out
recent trunk (and also Backfire 10.03.1, if it works) on them soon.  Was
the 40Mbit/s speed achieved w/o using the qos script, or anything else that
clutters iptables like freifunk-p2pblock?  Likewise, were you using the
'option type bridge' setting on any interface?

Could you share your /etc/config/network?

Here is my /etc/config/network on the 301NH in question.  The uplink is a
20Mbit cable connection.

config 'interface' 'loopback'
option 'ifname' 'lo'
option 'proto' 'static'
option 'ipaddr' '127.0.0.1'
option 'netmask' '255.0.0.0'

config 'interface' 'lan'
option 'ifname' 'eth0.1'
option 'type' 'bridge'
option 'proto' 'static'
option 'ipaddr' '192.168.10.1'
option 'netmask' '255.255.255.0'

config 'interface' 'wan'
option 'ifname' 'eth1'
option 'proto' 'static'
#option 'mtu' '1500'
        option 'defaultroute' '0'
        option 'peerdns' '0'
        option 'ipaddr' 'X.X.X.X'
        option 'netmask' '255.255.255.252'
        option 'gateway' 'X.X.X.X'
        option 'dns' '208.67.222.222 208.67.222.220'

config 'switch'
option 'name' 'rtl8366rb'
option 'reset' '1'
option 'enable_vlan' '1'

config 'switch_vlan'
option 'device' 'rtl8366rb'
option 'vlan' '1'
option 'ports' '0 1 2 3 5t'


Thanks!

On Sat, Feb 18, 2012 at 9:05 PM, Daniel Bryg <daniel at accessnow.org> wrote:

> Hi Ben,
>
> For what it's worth I'm on a recent trunk with 300NH, and the speeds
> seem proper (got to about 40Mbit/s in a local setup). I hope to try with
> a 301 within a few days.
>
> Daniel.
>
> On 2/17/2012 3:00 AM, Ben West wrote:
> > Hi All,
> >
> > I happen to still be running the OpenWrt trunk 26908 build for the
> Buffalo
> > WZR-HP-G301NH units doled out at last year's Commotion code sprint, and I
> > believe I may have just determined this is showing pretty poor routed
> > throughput (~10 to 15mbits) from its WAN port eth1 to the LAN ports eth0.
> >
> > This unit is presently working as a gateway router for a bunch of UBNT M5
> > mesh nodes, and I was having a persistent problem with the nodes topping
> > out at around 6Mbit download speeds from the Internet (speedtest.net),
> > until I tried downloading a file stored locally on the Bullafo flash and
> > got 20-30Mbits throughput.
> >
> > dmesg confirms that eth1 is negotiating at 100Mbit on boot up, and I've
> > confirmed I don't have a mis-configured qos script interfering with
> things.
> >  Hopefully this is just because I'm running an old-ish OpenWRT trunk.
>  Has
> > anyone else been able to confirm Buffalo Nfiniti will actually sustain
> > 20Mbit+ from its WAN port to LAN ports, provided the WAN uplink is fast
> > enough?
> >
> >
> >
> >
> > _______________________________________________
> > Commotion-dev mailing list
> > Commotion-dev at lists.chambana.net
> > http://lists.chambana.net/mailman/listinfo/commotion-dev
"
314,Commotion-dev, interesting...,"Tue, 21 Feb 2012 12:45:49 +0100",+0100,L. Aaron Kaplan,"http://news.techworld.com/mobile-wireless/3338760/mobile-users-easily-tracked-through-gsm-network-leaks/?olo=rss



"
315,Commotion-dev, interesting...,"Tue, 21 Feb 2012 17:28:18 +0100",+0100,L. Aaron Kaplan,"

""Our measurement system as displayed in figure 3 is based on the Osmocom baseband platform""
http://www-users.cs.umn.edu/~hopper/celluloc.pdf




On Feb 21, 2012, at 2:49 PM, Nathan of Guardian wrote:

> Anyone know what the ""open source software"" they are referring to is? I thought it would be Osmocom, but then they say it runs on a G1.
> 
> ""L. Aaron Kaplan"" <aaron at lo-res.org> wrote:
> 
"
316,Commotion-dev, Current state on handsets,"Fri, 24 Feb 2012 08:34:35 +0100",+0100,Paul Fuxjaeger,"hi all,

can someone in here shed some light on the current state of adhoc-mode 
and olsrd/batmand on smartphones (for android-platform mostly I guess?).

1) On how many models is it known to work at all currently?
2) How much effort is it to make it work?
3) Are there ways to enable it WITHOUT breaking any other 
functionalities on the smartphone if installed?


paul






PS: the reason for asking is:

We thought that the upcoming loooong series of street protests (because 
of acta and it's yet unborn siblings) here in europe/anywhereelse 
provide a nice testbed situation:

During protest there are:
1) lots of technically inclined people with latest gen rooted/jailbroken 
smartphones in close physical proximity.
2) the prospect of helping to test if adhoc nets can spontaneously 
emerge will probably spark interest
3) protest events typically last for 2-4 hours each, thus energy 
efficiency problems (battery runtime) can be largely ignored at this stage
4) those protests all have a general ""we want to keep our networks out 
of central control"" subtext - perfect fit for the occasion.

We think that it does not really matter yet if these ""networks"" (they 
probably cannot stabilize anyhow, routingtable-wise) can be used for 
something useful at all - it is more about the fun of 
observing/participating. Just seeing some small partitioned network 
graphs as they spontaneously emerge/breakdown is enough. Form our point 
of view, it would certainly add some entertainment-bonus while we walk 
these long protest walks.

Currently, what we typically do while being there in the streets (appart 
from chanting and chatting with friends face2face) is using centralized 
twitter/facebook APIs on top of cellular networks controlled by large 
corporations. Although these tools are working fine and seem to be 
passing along messages unfiltered, there are many reasons to start 
questioning if this will stay like that.





"
317,Commotion-dev, Current state on handsets,"Fri, 24 Feb 2012 21:08:44 +1030",+1030,Jeremy Lakeman,"Keep forgetting that this list doesn't change the ""reply to"" address...

On Fri, Feb 24, 2012 at 8:51 PM, Jeremy Lakeman
<Jeremy.Lakeman at gmail.com> wrote:
> (Shameless plug) I'd say Serval Mesh is on the forefront here....
> Simple install and config. Works on lots of phones, though known to
> *completely* and almost permanently screw up wifi on some Droid's.
> You can call between directly connected nodes, though we default to
> batman routing which takes ages to flip paths when you are wandering
> around.
> Our development branch has a store and forward file transfer system
> built in, that we're also using for delay tolerant text messaging, and
> collaborative mapping (still a work in progress).
> You can even install the software directly between phones via either
> blue tooth or a temporary hotspot.
> And everything we've done also works in wifi client / hotspot mode
> between devices connected to the same network. Useful if you can't get
> root on some devices.
>
> Note that there's basically no security at this point.
>
> On Fri, Feb 24, 2012 at 6:04 PM, Paul Fuxjaeger <fuxjaeger at ftw.at> wrote:
"
318,Commotion-dev, Current state on handsets,"Fri, 24 Feb 2012 13:42:24 +0100",+0100,Paul Fuxjaeger,"> On Fri, Feb 24, 2012 at 8:51 PM, Jeremy Lakeman
> <Jeremy.Lakeman at gmail.com>  wrote:
"
319,Commotion-dev, Current state on handsets,"Fri, 24 Feb 2012 15:22:43 -0500",-0500,Hans-Christoph Steiner,"

On 02/24/2012 07:42 AM, Paul Fuxjaeger wrote:
"
320,Commotion-dev, Current state on handsets,"Sat, 25 Feb 2012 10:29:54 +1030",+1030,Jeremy Lakeman,"On Sat, Feb 25, 2012 at 6:52 AM, Hans-Christoph Steiner
<hans at guardianproject.info> wrote:
>
>
"
321,Commotion-dev, Poor routed throughput eth1 -> eth0 on Bufallo,"Sun, 26 Feb 2012 00:17:11 -0500",-0500,Daniel Bryg,"Hey Ben, I redid the test with the A2 F0B model from last year's code
sprint, fresh trunk, and got speeds around 100Mbit/s with scp:
128M.bin     | 131072 kB | 11915 kB/s

There's nothing special in the iptables other than masquerading and this
is my network config:

cat /etc/config/network

config 'interface' 'loopback'
        option 'ifname' 'lo'
        option 'proto' 'static'
        option 'ipaddr' '127.0.0.1'
        option 'netmask' '255.0.0.0'

config 'interface' 'lan'
        option 'ifname' 'eth0.1'
        option 'type' 'bridge'
        option 'proto' 'static'
        option 'netmask' '255.255.255.0'
        option 'ipaddr' '192.168.31.1'

config 'interface' 'wan'
        option 'ifname' 'eth1'
        option 'proto' 'dhcp'

config 'switch'
        option 'name' 'switch0'
        option 'reset' '1'
        option 'enable_vlan' '1'

config 'switch_vlan'
        option 'device' 'switch0'
        option 'vlan' '1'
        option 'ports' '0 1 2 3 5t'

Regards,

D


On 02/19/2012 04:01 PM, Ben West wrote:
> Hi Daniel,
> 
> Thanks for the response.
> 
> I just got a couple more 300NH's in the mail, so I will be trying out
> recent trunk (and also Backfire 10.03.1, if it works) on them soon.  Was
> the 40Mbit/s speed achieved w/o using the qos script, or anything else that
> clutters iptables like freifunk-p2pblock?  Likewise, were you using the
> 'option type bridge' setting on any interface?
> 
> Could you share your /etc/config/network?
> 
> Here is my /etc/config/network on the 301NH in question.  The uplink is a
> 20Mbit cable connection.
> 
> config 'interface' 'loopback'
> option 'ifname' 'lo'
> option 'proto' 'static'
> option 'ipaddr' '127.0.0.1'
> option 'netmask' '255.0.0.0'
> 
> config 'interface' 'lan'
> option 'ifname' 'eth0.1'
> option 'type' 'bridge'
> option 'proto' 'static'
> option 'ipaddr' '192.168.10.1'
> option 'netmask' '255.255.255.0'
> 
> config 'interface' 'wan'
> option 'ifname' 'eth1'
> option 'proto' 'static'
> #option 'mtu' '1500'
>         option 'defaultroute' '0'
>         option 'peerdns' '0'
>         option 'ipaddr' 'X.X.X.X'
>         option 'netmask' '255.255.255.252'
>         option 'gateway' 'X.X.X.X'
>         option 'dns' '208.67.222.222 208.67.222.220'
> 
> config 'switch'
> option 'name' 'rtl8366rb'
> option 'reset' '1'
> option 'enable_vlan' '1'
> 
> config 'switch_vlan'
> option 'device' 'rtl8366rb'
> option 'vlan' '1'
> option 'ports' '0 1 2 3 5t'
> 
> 
> Thanks!
> 
> On Sat, Feb 18, 2012 at 9:05 PM, Daniel Bryg <daniel at accessnow.org> wrote:
> 
"
322,Commotion-dev, batphone/olsr GUI dev sync,"Mon, 12 Mar 2012 15:56:22 -0400",-0400,Hans-Christoph Steiner,"
Hey Jeremy and all,

I would like to try to keep the OLSR Android GUI app that I'm working on
as in sync as possible with batphone, since all of the adhoc/edify/olsrd
infrastructure will be exactly the same.  So far I've been working with
batphone 0.0.7, which seems to be the head of master in git.  But there
is a lot of work in the 'development' branch, some of which looks
related.  Does it make sense for me to switch over to syncing with your
development branch?

Also, some feedback on the command line stuff: currently, in the setup
wizard in 0.0.7 asks for root permission on each step.  I generally do
not grant apps permanent root perms, so that means I have to confirm
granting root perms on each step of the wizard, and probably each step
of the app running.  I propose that this app instead launch a root
shell, then execute commands as root by sending them to this shell.

This way, batphone will only ever ask once for root permission when it
needs it.  We've done this in Lil' Debi and some other apps and it works
well.

.hc

"
323,Commotion-dev, batphone/olsr GUI dev sync,"Tue, 13 Mar 2012 08:07:13 +1030",+1030,Jeremy Lakeman,"Actually, I've just reworked the way batphone executes shell commands
pretty much exactly like that in the development branch, though I'm
not keeping the shell open. These changes also make it easier to tell
the different between su permission errors and errors from executing
other commands, simplifying a fair amount of code and giving better
error messages.

We've had one phone that was impossible to root permanently, so the
software would always check for root permission when it was started.
But some other phones are very aggressive at killing background
processes (eg samsung's), which would cause the root test to pop up
quite frequently.

So we now run a foreground service when the software is ""on"" which
prevents us being killed, and we remember if we had root permission in
a setting that is only cleared on boot. As well as tweaking a couple
of other places where running commands as root could be avoided.

0.08 is feature complete, and we've pretty much run out of blocking
issues. So you can expect to see a release candidate build soon.

On Tue, Mar 13, 2012 at 6:26 AM, Hans-Christoph Steiner
<hans at guardianproject.info> wrote:
>
> Hey Jeremy and all,
>
> I would like to try to keep the OLSR Android GUI app that I'm working on
> as in sync as possible with batphone, since all of the adhoc/edify/olsrd
> infrastructure will be exactly the same. ?So far I've been working with
> batphone 0.0.7, which seems to be the head of master in git. ?But there
> is a lot of work in the 'development' branch, some of which looks
> related. ?Does it make sense for me to switch over to syncing with your
> development branch?
>
> Also, some feedback on the command line stuff: currently, in the setup
> wizard in 0.0.7 asks for root permission on each step. ?I generally do
> not grant apps permanent root perms, so that means I have to confirm
> granting root perms on each step of the wizard, and probably each step
> of the app running. ?I propose that this app instead launch a root
> shell, then execute commands as root by sending them to this shell.
>
> This way, batphone will only ever ask once for root permission when it
> needs it. ?We've done this in Lil' Debi and some other apps and it works
> well.
>
> .hc
>
> _______________________________________________
> Commotion-dev mailing list
> Commotion-dev at lists.chambana.net
> http://lists.chambana.net/mailman/listinfo/commotion-dev
"
324,Commotion-dev, batphone/olsr GUI dev sync,"Mon, 12 Mar 2012 18:51:18 -0400",-0400,Hans-Christoph Steiner,"
It should be possible to make a Remote Service that runs in the
background and is only killed as a last resort.  It has to be a Remote
Service, because that is the only way that I know to make the Service
run in its own process.  We use this in our Gibberbot app to maintain
the connections to the XMPP server even if the app is killed, and we
run it a lot on Samsungs.  I checked the AndroidManifest.xml and it
seems like there is no Remote Service, only standard Services.

Also, I just tried to build the head of 'development', and got the
errors below:

ndk-build:
        [exec] jni/Android.mk:65: jni/serval-dna/Android.mk: No such
file or directory
        [exec] make: *** No rule to make target
`jni/serval-dna/Android.mk'.  Stop.

Here's what I did before:

- android update project --path .
- set sdk.dir and env.NDK_ROOT in local.properties

.hc


On 03/12/2012 05:37 PM, Jeremy Lakeman wrote:
> Actually, I've just reworked the way batphone executes shell commands
> pretty much exactly like that in the development branch, though I'm
> not keeping the shell open. These changes also make it easier to tell
> the different between su permission errors and errors from executing
> other commands, simplifying a fair amount of code and giving better
> error messages.
> 
> We've had one phone that was impossible to root permanently, so the
> software would always check for root permission when it was started.
> But some other phones are very aggressive at killing background
> processes (eg samsung's), which would cause the root test to pop up
> quite frequently.
> 
> So we now run a foreground service when the software is ""on"" which
> prevents us being killed, and we remember if we had root permission in
> a setting that is only cleared on boot. As well as tweaking a couple
> of other places where running commands as root could be avoided.
> 
> 0.08 is feature complete, and we've pretty much run out of blocking
> issues. So you can expect to see a release candidate build soon.
> 
> On Tue, Mar 13, 2012 at 6:26 AM, Hans-Christoph Steiner
> <hans at guardianproject.info> wrote:
"
325,Commotion-dev, batphone/olsr GUI dev sync,"Tue, 13 Mar 2012 11:05:59 +1030",+1030,Jeremy Lakeman,"> git submodule init
> git submodule update

?


On Tue, Mar 13, 2012 at 9:21 AM, Hans-Christoph Steiner
<hans at guardianproject.info> wrote:
>
> It should be possible to make a Remote Service that runs in the
> background and is only killed as a last resort. ?It has to be a Remote
> Service, because that is the only way that I know to make the Service
> run in its own process. ?We use this in our Gibberbot app to maintain
> the connections to the XMPP server even if the app is killed, and we
> run it a lot on Samsungs. ?I checked the AndroidManifest.xml and it
> seems like there is no Remote Service, only standard Services.
>
> Also, I just tried to build the head of 'development', and got the
> errors below:
>
> ndk-build:
> ? ? ? ?[exec] jni/Android.mk:65: jni/serval-dna/Android.mk: No such
> file or directory
> ? ? ? ?[exec] make: *** No rule to make target
> `jni/serval-dna/Android.mk'. ?Stop.
>
> Here's what I did before:
>
> - android update project --path .
> - set sdk.dir and env.NDK_ROOT in local.properties
>
> .hc
>
>
> On 03/12/2012 05:37 PM, Jeremy Lakeman wrote:
"
326,Commotion-dev, OLSR Android alpha app,"Wed, 21 Mar 2012 11:17:55 -0400",-0400,Hans-Christoph Steiner,"
I have a ""works for me"" olsrd app for Android now, I've called it OLSR-Mesh-Tether for now, since it was based on Barnacle Wifi Tether.  I'm waiting for commit access to the commotion git, then I'll post it there (unless there is another plan for how I should feed code into the commotion-android git).  If anyone wants to test it, I would love testers.

Here is the source and there is an apk in the Downloads:
https://github.com/guardianproject/olsr-mesh-tether

Currently the SSID is 'olsr.org' and its setup with the httpinfo plugin set to be world accessible.  If you click on the link in the little log window in the app, you'll bring up the httpinfo page.

Next up for me is making the Android app able to control olsrd parameters!

.hc
"
327,Commotion-dev, OLSR Android alpha app,"Wed, 21 Mar 2012 11:26:10 -0400",-0400,Brian Duggan,
328,Commotion-dev, OLSR Android alpha app,"Thu, 22 Mar 2012 01:57:23 -0400",-0400,Nathan of Guardian,"On 03/21/2012 11:17 AM, Hans-Christoph Steiner wrote:
> Here is the source and there is an apk in the Downloads:
> https://github.com/guardianproject/olsr-mesh-tether

Works for me on Samsung Galaxy Player with Gingerbread/2.3.5 (rooted,
but stock firmware).

Fyi - if you are looking for an awesome wifi only Android iPod
Touch-type device, I highly recommend this. It is my default device now.
$250 for 5"" screen w/ great battery life, good camera, and able to be
used as a SIP Phone, as well.

http://www.bhphotovideo.com/c/search?Ntt=Samsung+galaxy+player&N=0&InitialSearch=yes




"
329,Commotion-dev, OLSR Android alpha app,"Thu, 22 Mar 2012 11:15:47 -0400",-0400,Preston Rhea,"The link to the device returns:

Sorry!!!
Please try again soon

On Thu, Mar 22, 2012 at 1:57 AM, Nathan of Guardian <
nathan at guardianproject.info> wrote:

> On 03/21/2012 11:17 AM, Hans-Christoph Steiner wrote:
> > Here is the source and there is an apk in the Downloads:
> > https://github.com/guardianproject/olsr-mesh-tether
>
> Works for me on Samsung Galaxy Player with Gingerbread/2.3.5 (rooted,
> but stock firmware).
>
> Fyi - if you are looking for an awesome wifi only Android iPod
> Touch-type device, I highly recommend this. It is my default device now.
> $250 for 5"" screen w/ great battery life, good camera, and able to be
> used as a SIP Phone, as well.
>
>
> http://www.bhphotovideo.com/c/search?Ntt=Samsung+galaxy+player&N=0&InitialSearch=yes
>
>
>
>
> _______________________________________________
> Commotion-dev mailing list
> Commotion-dev at lists.chambana.net
> http://lists.chambana.net/mailman/listinfo/commotion-dev
>
"
330,Commotion-dev, OLSR Android alpha app,"Thu, 22 Mar 2012 11:22:29 -0400",-0400,Nathan Freitas,"On 03/22/2012 11:15 AM, Preston Rhea wrote:
> The link to the device returns:
> 
> Sorry!!!
> Please try again soon

Ah, good ol' B&H Photo.. they should be back online later today. They
are an amazing store, but still a family operation in many ways.





"
331,Commotion-dev, Serval security summary,"Tue, 03 Apr 2012 17:10:52 -0400",-0400,Josh King,"Hi all,

I just wanted to share out a document for discussion that I got a while
back and have been meaning to send out, namely a summary of some of the
security architecture that the Serval Project is working on for
Commotion. It's just a general summary at this point, but there will be
more forthcoming.

One question that I wanted to pose is: the document doesn't talk much
about routing. Is there a sense of how routing is going to work in the
secure overlay network, or am I missing that in the document?

Thanks to the Serval folks for providing this!
-- 
Josh King
Technical Lead
Open Technology Initiative
New America Foundation
"
332,Commotion-dev, Serval security summary,"Tue, 03 Apr 2012 17:28:08 -0400",-0400,Nathan of Guardian,"

Josh King <joshking at newamerica.net> wrote:


>I just wanted to share out a document for discussion that I got a while
>back and have been meaning to send out, namely a summary of some of the
>security architecture that the Serval Project is working on for
>Commotion. It's just a general summary at this point, but there will be
>more forthcoming.

Just scanned through it, and it is promising. Regarding the DH verification, we have been working on this at Guardian within our Gibberbot secure chat app. We have recently.implement the Socialist Millionaire Protocol for OTR and it works great. In addition, we are looking at linking your OTR key as a subkey of an on-device GPG key, such that the chat based verification can extend to other types of keys and methods of communications. We would love to think about how this might support the verification process in a crypto mesh.

You can learn more at https://guardianproject.info/wifi/PSST 

Best,
    Nathan 


"
333,Commotion-dev, Fwd: Re:  Serval security summary,"Tue, 03 Apr 2012 17:55:13 -0400",-0400,Nathan Freitas,"

Nathan of Guardian <nathan at guardianproject.info> wrote:



Josh King <joshking at newamerica.net> wrote:


>I just wanted to share out a document for discussion that I got a while
>back and have been meaning to send out, namely a summary of some of the
>security architecture that the Serval Project is working on for
>Commotion. It's just a general summary at this point, but there will be
>more forthcoming.

Just scanned through it, and it is promising. Regarding the DH verification, we have been working on this at Guardian within our Gibberbot secure chat app. We have recently.implement the Socialist Millionaire Protocol for OTR and it works great. In addition, we are looking at linking your OTR key as a subkey of an on-device GPG key, such that the chat based verification can extend to other types of keys and methods of communications. We would love to think about how this might support the verification process in a crypto mesh.

You can learn more at https://guardianproject.info/wifi/PSST 

Best,
Nathan 


_____________________________________________

Commotion-dev mailing list
Commotion-dev at lists.chambana.net
http://lists.chambana.net/mailman/listinfo/commotion-dev

"
334,Commotion-dev, Serval security summary,"Tue, 03 Apr 2012 18:33:24 -0400",-0400,Josh King,"Hi Nathan,

On Tue 03 Apr 2012 05:28:08 PM EDT, Nathan of Guardian wrote:
>
>
> Josh King <joshking at newamerica.net> wrote:
>
>
"
335,Commotion-dev, Serval security summary,"Wed, 4 Apr 2012 08:38:22 +0930",+0930,Jeremy Lakeman,"We (Serval) have some ideas for routing, but we haven't started
implementing anything yet. I have been doing some R&D on some new
ideas for link quality measurements, but we haven't really started
looking at the higher level routing problem yet.

An initial version might work in parallel to some other routing
daemon, eg olsr. The overlay layer would translate from public key to
current IP address, then consult the routing table to work out which
peer is the next hop. In this mode it should be possible for packets
to traverse an existing network without replacing the routing daemon
on every device.

There are some reasons why I don't like olsr / batman layer 3 routing.
The need to sense topology via broadcast packets, since the routing
table would prevent you sending test unicast packets to 2 hop
neighbours, this makes sensing link failures and new links take way
too long IMHO. You have much more flexibility operating at layer 2 or
4.

Eventually we intend to route across different networking protocols
and between networks that might be sharing the same IP addresses. eg
small networks of android phones in hotspot mode all with 192.168.43.X
addresses, with additional bluetooth links between them.

In my own research, with the android phones we have in reasonable
quantities, I've noticed that wifi burst mode consumes waaaaay too
much air time when a link suddenly fails. Though I haven't established
if this is systemic to wifi, or limited to this specific chipset. The
802.11 spec leaves dealing with burst failures up to the implementer.

Linux buffer bloat is also really annoying, it's far too easy to be
reacting to stale topology information.

Combine these two issues and building a map of a highly mobile network
is almost impossible with any reasonable traffic volume. Using BATMAN
for example, with mobile nodes, poor slightly directional antennas,
and obstructions, gives a voice channel that is almost continuously
dropping out.

On Wed, Apr 4, 2012 at 6:40 AM, Josh King <joshking at newamerica.net> wrote:
> Hi all,
>
> I just wanted to share out a document for discussion that I got a while
> back and have been meaning to send out, namely a summary of some of the
> security architecture that the Serval Project is working on for
> Commotion. It's just a general summary at this point, but there will be
> more forthcoming.
>
> One question that I wanted to pose is: the document doesn't talk much
> about routing. Is there a sense of how routing is going to work in the
> secure overlay network, or am I missing that in the document?
>
> Thanks to the Serval folks for providing this!
> --
> Josh King
> Technical Lead
> Open Technology Initiative
> New America Foundation
>
> _______________________________________________
> Commotion-dev mailing list
> Commotion-dev at lists.chambana.net
> http://lists.chambana.net/mailman/listinfo/commotion-dev
"
336,Commotion-dev, Serval security summary,"Tue, 03 Apr 2012 19:52:39 -0400",-0400,nathan at freitas.net,"

Josh King <joshking at newamerica.net> wrote:


"
337,Commotion-dev, Serval security summary,"Wed, 4 Apr 2012 16:05:25 -0400",-0400,Hans-Christoph Steiner,"
On Apr 3, 2012, at 5:28 PM, Nathan of Guardian wrote:

> Josh King <joshking at newamerica.net> wrote:
> 
"
338,Commotion-dev, Serval security summary,"Wed, 4 Apr 2012 16:41:20 -0400",-0400,Hans-Christoph Steiner,"(Excuse me if I am missing something, I'm working off of the paper attached in this thread, some blog posts of Pauls and the discussion on this list).

Before diving into the Serval Overlay Mesh specifically, I'm curious about what the core motivations are for building a network with verifiable addresses.  If the client software can verify the identity over any network, like OpenPGP or OTR does, then it doesn't matter how the packets get there as long as they are properly encrypted and verified.  The internet is built upon those easily spoofed IP addresses, and it has proven a reliable medium for secure communications (given the right software on the endpoints).

I can understand wanting verified routing to prevent poisoning, but I guess this should be possible by adding crypto verification into the mesh daemons.  Something like: when olsrd receives a message to register a new route, that message includes a public key to tie to that route/address.  It seems feasible that this could happen purely within olsrd, batmand, etc.

Specifically about the Serval Overlay Mesh, sounds like a good plan if such a thing is needed. The huge problem with this approach is that is requires all of the software to be re-written to support it.  Another thing I wonder about is the architecture being built on a single cryptographic technique like Cryptobox.  It makes sense for the prototype to use only one type of key, but I think that the grand plan should allow for other types of keys, like OpenPGP does.

For the example of verified, encrypted voice calls, there is already ZRTP+SRTP+SIP.  We have a public alpha of a ZRTP-oriented voice service: https://ostel.me.  The ZRTP+SRTP+SIP combo is also fully compatible with a serverless, p2p setup.  You can use it with such clients as Jitsi (cross-platform), Twinkle (GNU/Linux), Groundwire (iOS), CSIPSimple (Android), and more.  More from us on that topic here:
https://guardianproject.info/tag/zrtp/
https://guardianproject.info/wiki/OSTN

.hc

On Apr 3, 2012, at 7:08 PM, Jeremy Lakeman wrote:

> We (Serval) have some ideas for routing, but we haven't started
> implementing anything yet. I have been doing some R&D on some new
> ideas for link quality measurements, but we haven't really started
> looking at the higher level routing problem yet.
> 
> An initial version might work in parallel to some other routing
> daemon, eg olsr. The overlay layer would translate from public key to
> current IP address, then consult the routing table to work out which
> peer is the next hop. In this mode it should be possible for packets
> to traverse an existing network without replacing the routing daemon
> on every device.
> 
> There are some reasons why I don't like olsr / batman layer 3 routing.
> The need to sense topology via broadcast packets, since the routing
> table would prevent you sending test unicast packets to 2 hop
> neighbours, this makes sensing link failures and new links take way
> too long IMHO. You have much more flexibility operating at layer 2 or
> 4.
> 
> Eventually we intend to route across different networking protocols
> and between networks that might be sharing the same IP addresses. eg
> small networks of android phones in hotspot mode all with 192.168.43.X
> addresses, with additional bluetooth links between them.
> 
> In my own research, with the android phones we have in reasonable
> quantities, I've noticed that wifi burst mode consumes waaaaay too
> much air time when a link suddenly fails. Though I haven't established
> if this is systemic to wifi, or limited to this specific chipset. The
> 802.11 spec leaves dealing with burst failures up to the implementer.
> 
> Linux buffer bloat is also really annoying, it's far too easy to be
> reacting to stale topology information.
> 
> Combine these two issues and building a map of a highly mobile network
> is almost impossible with any reasonable traffic volume. Using BATMAN
> for example, with mobile nodes, poor slightly directional antennas,
> and obstructions, gives a voice channel that is almost continuously
> dropping out.
> 
> On Wed, Apr 4, 2012 at 6:40 AM, Josh King <joshking at newamerica.net> wrote:
"
339,Commotion-dev, any updates on commotion for Fonera?,"Thu, 5 Apr 2012 15:09:38 -0400",-0400,Hans-Christoph Steiner,"
I have all these Fonera's that would just love to be running olsrd :-D.  Any updates on the commotion firmware for them?

.hc
"
340,Commotion-dev, OLSRD parameters & configuration on Android,"Fri, 6 Apr 2012 16:08:01 -0400",-0400,David Oliver,"We're commencing work on the user interface for Android olsrd.  Since oslrd
is a low-level utility, we need to use a certain amount of care in how much
of its function we expose to the end user (and, on Android devices, we're
going to be dealing with almost entirely ""end users"").

As we reviewed the parameter/configuration settings (which, in fact, are
the ""controls"" for olsrd), we realized that a number of the settings are
likely ""situation dependent"".  For example, one situation might be a mesh
network of mostly mobile phones connecting to a fixed-position WAP with a
route to the Internet.  Another situation might be a mesh of all mobile
phones with one of the mobile phones having a route to the Internet.

These differing situations will impact a number of olsrd parameters, almost
all of whic are going to be hard for end users to understand.  Therefore,
we'd like to remove such configuration from view and have users, instead,
focus on situations or ""usage scenarios"".  And therefore, we'd like to ask
this group to help us define common situations/scenarios.

I'll put up the following strawman as a way to get started.  To be clear,
while we're sure there are many more possible scenarios, we are focused on
scenarios involving olsrd as it is running on Android mobile phones and
tablets.

Scenarios:

1. A small group (< 25) of mobile phone or tablet users staying within
range of a fixed-point WAP connected to a fixed line route to the Internet.
 Group members may come and go as they please, but the size of the group
remains relatively constant.

2. A small group (< 25) of mobile phone users, one of which has a WWAN
route to the Internet. The group is moving in space constantly, but
generally stays close together. Group members may come and go as they
please, but the size of the group remains relatively constant.

3. A large group (> 100) of mobile phone users who are moving in space
amongst a set of fixed-point WAPs connected to a fixed line route to the
Internet.  New group members are constantly joining, while others are
leaving.

4. A large group (> 100) of mobile phone users who are moving in space with
a subset of these devices (<10) which have a WWAN route to the Internet.
 New group members are constantly joining, while others are leaving.

5. A large group (> 100) of mobile phone users who are moving in space with
all devices having a possible WWAN route to the Internet.  However, for
reason of specific conditions on the ground, it is beneficial for only a
small number of the users to use their WWAN connection at a given time
(rather, it is better to 'piggyback' traffic over a few such connections).
 It is also advantageous to the situation on the group to have those few
connections ""hop"" among the all group members randomly at relatively short
intervals (measured in minutes). New group members are constantly joining,
while others are leaving.

6. A mobile phone or tablet group of large size (unknown) utilize a
fixed-point WAP connected to a fixed line route to the Internet.  The group
is constantly changing, in size and membership, but the access point is
safe and durable.

(WWAN = wireless wide area network)

Comments, suggestions, alternatives, and additional details welcomed.


David Oliver, Guardian Project / Oliver+Coady

David M. Oliver | david at olivercoady.com | http://olivercoady.com |
@davidmoliver | +1 914 316 1470
"
341,Commotion-dev, Serval security summary,"Wed, 11 Apr 2012 17:53:15 +0100",+0100,Michael Rogers,"Hi Josh,

Thanks for sharing this document. If I've understood the verification
process correctly, it's missing an important step when compared with
ZRTP. As I understand it, Serval does this:

* Each party generates a long-term public/private key pair
* Each party derives a shared secret from her own private key and the
other party's public key
* Each party derives some confirmation words from the shared secret
* The parties verbally compare their confirmation words

In contrast, ZRTP does this:

* Each party generates an ephemeral public/private key pair
* The parties first exchange the hashes of their public keys
* Then they exchange their public keys
* Each party derives a shared secret from her own private key and the
other party's public key
* Each party derives some confirmation words from the shared secret
* The parties verbally compare their confirmation words

Consider a man-in-the-middle attack against these two approaches. ZRTP
only gives the attacker a single attempt to choose key pairs that will
produce the right confirmation words. The attacker has to commit to the
hash of the public key she'll send to each victim before she sees that
victim's public key, so she can't know which confirmation words the keys
will produce. The confirmation words can therefore have low entropy -
for example, if the words have 20 bits of entropy, the attack will have
less than one chance in a million of going undetected.

In contrast, Serval (if I've understood correctly) gives the attacker
unlimited attempts to choose key pairs that will produce the right
confirmation words for a given pair of users. The attacker can generate
key pairs offline before the users attempt to connect and try them
against the users' public keys until she finds key pairs that produce
matching confirmation words. To make such an attack infeasible, the
confirmation words would need to have high entropy - and it takes a lot
of dictionary words to reach 128 bits of entropy.

A second issue is forward secrecy: if the shared secret is derived from
long-term key pairs, the connection can be decrypted at any time in the
future if one of the private keys is compromised. Using ephemeral key
pairs (and securely deleting the private keys after deriving the shared
secret) would avoid that problem.

I'd also like to second Hans-Christoph's comment: it's not clear what
benefit is provided by using public keys as overlay addresses. Why not
use IP addresses for routing and public keys for end-to-end
authentication, as in existing protocols?

Cheers,
Michael

On 03/04/12 22:10, Josh King wrote:
> Hi all,
> 
> I just wanted to share out a document for discussion that I got a while
> back and have been meaning to send out, namely a summary of some of the
> security architecture that the Serval Project is working on for
> Commotion. It's just a general summary at this point, but there will be
> more forthcoming.
> 
> One question that I wanted to pose is: the document doesn't talk much
> about routing. Is there a sense of how routing is going to work in the
> secure overlay network, or am I missing that in the document?
> 
> Thanks to the Serval folks for providing this!
> 
> 
> 
> _______________________________________________
> Commotion-dev mailing list
> Commotion-dev at lists.chambana.net
> http://lists.chambana.net/mailman/listinfo/commotion-dev


"
342,Commotion-dev, pushing my git to commotion-android repo,"Wed, 11 Apr 2012 12:56:16 -0400",-0400,Hans-Christoph Steiner,"
I'd like to move the OLSR-mesh-tether app to the commotion git, and I am
wondering how I should do it.

* I could push to a new git repo on
https://code.commotionwireless.net/commotion/olsr-mesh-tether.git

* I could overwrite the existing app skeleton in
https://code.commotionwireless.net/commotion/commotion-android.git

* I could leave it at https://github.com/guardianproject/olsr-mesh-tether


.hc

"
343,Commotion-dev, a related crypto mesh effort: Neruda,"Fri, 6 Apr 2012 10:39:25 -0400",-0400,Hans-Christoph Steiner,"
Here's the proposal for an ""open yet hardened overlay network"" with similar goals to Commotion from the FreedomBox people.  I like their idea for using the host key fingerprint as a normal IPv6 address, since they can be the same length.  This allows for multiple crypto algorithms to be used, and might allow for more transparent operation.

They also have outlined a service discovery technique based on Tor called Port Santiago, but that probably relies more on having internet connectivity.

http://freedomboxfoundation.org/

Begin forwarded message:

> From: Nathan of Guardian <nathan at guardianproject.info>
> Date: April 5, 2012 11:51:31 PM EDT
> To: oi2-dev at lists.mayfirst.org
> Subject: [Oi2-dev] Fwd: [Builders] Neruda
> user-agent: K-9 Mail for Android
> 
> Hans... food for PSST thought.
> 
> Isaac Wilder <isaac at freenetworkmovement.org> wrote:
> Hello all.
> 
> Wanted to share this writeup of Project Neruda, attached as pdf and included below. Would love to get thoughts, feedback, criticism, et cetera before making it more public. Nick, I'd especially like to know what you think.
> 
> imw
> 
> 
> 
> Project Neruda
> isaac at freenetworkmovement.org
> 
> Objectives:
> 	? Create a unified identity mechanism based on existing tools and protocols.
> 	? Build a secure, decentralized, and resilient path into the Santiago service discovery mechanism.
> 	? Establish an open yet hardened overlay network by integrating cryptographic trust mechanisms into peering protocols.
> 
> Background:
> In order to guard against the natural failings of both human and technological systems, hackers in the first part of our millenium found it useful to build systems that were completely decentralized. One of the discoveries that made such efforts possible was the Distributed Hash Table. DHTs constitute a class of algorithm that allows for distributed storage and retrieval of key-value pairs.
> Such decentralized systems are generally more resilient than centralized ones, but they are vulnerable to attack as long as their membership remains open. In particular, a vector known as a 'sybil attack' takes advantage of the fact that an adversary with sufficient resources can add an arbitrarily large amount of bad-actor nodes to an open system, thereby rendering the system unusable.
> In 2008 and 2009, white papers were published by researchers such as Petar Maymounkov and Chris Lesniewski-Laas that theoretically established the possibility of hardening DHTs against sybil attacks by building trust mechanisms into their architecture.
> There are existing free systems which have explored this possibility, and which might serve as a starting point for the development of Neruda. The three primary candidates are Cspace, RetroShare and Tonika. Cspace participates in a DHT which maps a public key to an IP address, but it is underdeveloped and does not appear to be currently maintained. RetroShare relies on the (unhardened) BitTorrent DHT to find addresses, and on GPG for identity verification, but these processes are distinct. Finally, Tonika is being written in Go by Maymounkov (the author of Kademlia). Tonika is perhaps the most promising candidate, though it is not well documented and (like RetroShare) includes a host of related, but superfluous functionalities.
> 
> Proposal:
> FreedomBox is a project that aims to allow users to easily own their own data (media, messages, etc) and to share that data securely with whomever they choose. In order to do so, users must be able first to find one another, and subsequently to discover usable modes of communication. Neruda is a project to solve for the first step, and is intended to be paired with the Santiago service discovery mechanism.
> Of all current endeavors to decentralize and secure communications on the Internet, the FreedomBox project is uniquely positioned to effectively bootstrap a system with what Maymounkov calls 'organic security.' Because of its strong ties with the Debian community, which has built the world's most robust cryptographic trust network (the GPG strong set), FreedomBox can effectively launch a trust-backed distributed data store.
> In particular, Neruda would be a distributed hash table whose search keys would be long-form GPG Key IDs, and whose values would be the IPv6 address currently associated with the key in question. (Search key and crypto key are therefore identical). The trust mechanisms built into the GPG protocols could be used to secure the hash table against both poisoning and sybil attacks by limiting the participation of untrusted nodes. Once a Key ID is hashed to a v6 address, that address can be queried using the Santiago mechanism, and secure, authenticated exchange of information can commence.
> 
"
344,Commotion-dev, a related crypto mesh effort: Neruda,"Wed, 11 Apr 2012 22:28:14 +0100",+0100,Michael Rogers,
345,Commotion-dev, Serval security summary,"Thu, 12 Apr 2012 08:50:57 +0930",+0930,Jeremy Lakeman,"Confirmation words are derived from the shared secret between 2 peers
which may also include a session specific nonce, this is not based
directly on their public keys.

A man in the middle attacker can't know the shared secret or the
encryption itself would be suspect.

The UI for the confirmation process could be built to generate an
infinite stream of words, displaying some kind of strength meter to
both parties and prompting them to take turns reading words. The
paranoid could keep reading for quite some time....


We want to build a network that can operate over multiple protocols,
requiring the simplest end user configuration, and the largest address
space for avoiding the birthday paradox.

Possible use cases include small access point based networks, using
the same 192.168.X.X address space, interconnected via bluetooth or
other radio interfaces that may not have IP addresses at all. Routing
between these separate private IP networks just wouldn't work, and we
can't expect our users to know how to resolve all of the potential
networking issues.

That's not to say that the overlay network couldn't be mapped directly
onto an IP network, utilising a service like DNS to map keys to global
addresses and/or public key hashes for host ID's in the FD/8 private
address space. But this implementation detail will be encapsulated and
hidden from any end user applications.

Although on a mesh network, it would be much better to map directly
onto layer 2 (ala batman adv. / TRILL) and skip IP routing tables
altogether as this will allow for a number of different routing tricks
that are impossible using something like olsr.

On Thu, Apr 12, 2012 at 2:23 AM, Michael Rogers <m-- at gmx.com> wrote:
> Hi Josh,
>
> Thanks for sharing this document. If I've understood the verification
> process correctly, it's missing an important step when compared with
> ZRTP. As I understand it, Serval does this:
>
> * Each party generates a long-term public/private key pair
> * Each party derives a shared secret from her own private key and the
> other party's public key
> * Each party derives some confirmation words from the shared secret
> * The parties verbally compare their confirmation words
>
> In contrast, ZRTP does this:
>
> * Each party generates an ephemeral public/private key pair
> * The parties first exchange the hashes of their public keys
> * Then they exchange their public keys
> * Each party derives a shared secret from her own private key and the
> other party's public key
> * Each party derives some confirmation words from the shared secret
> * The parties verbally compare their confirmation words
>
> Consider a man-in-the-middle attack against these two approaches. ZRTP
> only gives the attacker a single attempt to choose key pairs that will
> produce the right confirmation words. The attacker has to commit to the
> hash of the public key she'll send to each victim before she sees that
> victim's public key, so she can't know which confirmation words the keys
> will produce. The confirmation words can therefore have low entropy -
> for example, if the words have 20 bits of entropy, the attack will have
> less than one chance in a million of going undetected.
>
> In contrast, Serval (if I've understood correctly) gives the attacker
> unlimited attempts to choose key pairs that will produce the right
> confirmation words for a given pair of users. The attacker can generate
> key pairs offline before the users attempt to connect and try them
> against the users' public keys until she finds key pairs that produce
> matching confirmation words. To make such an attack infeasible, the
> confirmation words would need to have high entropy - and it takes a lot
> of dictionary words to reach 128 bits of entropy.
>
> A second issue is forward secrecy: if the shared secret is derived from
> long-term key pairs, the connection can be decrypted at any time in the
> future if one of the private keys is compromised. Using ephemeral key
> pairs (and securely deleting the private keys after deriving the shared
> secret) would avoid that problem.
>
> I'd also like to second Hans-Christoph's comment: it's not clear what
> benefit is provided by using public keys as overlay addresses. Why not
> use IP addresses for routing and public keys for end-to-end
> authentication, as in existing protocols?
>
> Cheers,
> Michael
>
> On 03/04/12 22:10, Josh King wrote:
"
346,Commotion-dev, a related crypto mesh effort: Neruda,"Thu, 12 Apr 2012 08:53:00 +0930",+0930,Jeremy Lakeman,"On Thu, Apr 12, 2012 at 6:58 AM, Michael Rogers <m-- at gmx.com> wrote:
> "
347,Commotion-dev, Serval security summary,"Wed, 11 Apr 2012 20:43:14 -0400",-0400,Hans-Christoph Steiner,"
I'm curious why serval wants to avoid proven end-to-end crypto like
ZRTP, OTR, OpenPGP.  Admittedly, they have historically not been easy to
use, but OTR is proven easy and reliable.  ZRTP is recently gotten easy
in CSIPSimple for Android, as well as other apps like Twinkle for KDE.
And OpenPGP has recently gotten much easier on the desktop with
Enigmail/Thunderbird, GPGTools/Apple Mail, etc.

These protocols also have the big advantage of working regardless of
whether all users are on the mesh overlay network or not.  So for
example, if the mesh network has routes to the internet, secure
messaging can happen with any OTR or ZRTP client.

The two key issues that need to be addressed in the mesh that I can see are:

1) preventing mesh nodes from injecting bad route information

2) anonymizing the traffic on the mesh

.hc

On 04/11/2012 07:20 PM, Jeremy Lakeman wrote:
> Confirmation words are derived from the shared secret between 2 peers
> which may also include a session specific nonce, this is not based
> directly on their public keys.
> 
> A man in the middle attacker can't know the shared secret or the
> encryption itself would be suspect.
> 
> The UI for the confirmation process could be built to generate an
> infinite stream of words, displaying some kind of strength meter to
> both parties and prompting them to take turns reading words. The
> paranoid could keep reading for quite some time....
> 
> 
> We want to build a network that can operate over multiple protocols,
> requiring the simplest end user configuration, and the largest address
> space for avoiding the birthday paradox.
> 
> Possible use cases include small access point based networks, using
> the same 192.168.X.X address space, interconnected via bluetooth or
> other radio interfaces that may not have IP addresses at all. Routing
> between these separate private IP networks just wouldn't work, and we
> can't expect our users to know how to resolve all of the potential
> networking issues.
> 
> That's not to say that the overlay network couldn't be mapped directly
> onto an IP network, utilising a service like DNS to map keys to global
> addresses and/or public key hashes for host ID's in the FD/8 private
> address space. But this implementation detail will be encapsulated and
> hidden from any end user applications.
> 
> Although on a mesh network, it would be much better to map directly
> onto layer 2 (ala batman adv. / TRILL) and skip IP routing tables
> altogether as this will allow for a number of different routing tricks
> that are impossible using something like olsr.
> 
> On Thu, Apr 12, 2012 at 2:23 AM, Michael Rogers <m-- at gmx.com> wrote:
"
348,Commotion-dev, a related crypto mesh effort: Neruda,"Wed, 11 Apr 2012 20:44:37 -0400",-0400,Hans-Christoph Steiner,
349,Commotion-dev, dynamic runtime config of olsrd,"Wed, 11 Apr 2012 22:26:24 -0400",-0400,Hans-Christoph Steiner,"
I'm wondering what's the best example for dynamic configuration of olsrd?  The only example I could find is the httpinfo ADMIN_INTERFACE, which seems to have been abandoned years ago.

Is anyone doing dynamic configuration of olsrd at runtime?  Is this not at all useful?

.hc


"
350,Commotion-dev, updated ubuntu packages,"Wed, 11 Apr 2012 22:27:43 -0400",-0400,Hans-Christoph Steiner,"
I just pushed some updates to the olsrd Debian package to our Ubuntu PPA.  This is what I'm using as my dev setup, so I thought I'd share it.  It includes a olsrd.conf that enables httpinfo and HNA, and has a working /etc/init.d/olsrd script that automatically signals NetworkManager to let go of the wifi.

I have a script in the works to setup all of the ad-hoc settings, so eventually /etc/init.d/olsrd will also setup the ad-hoc settings.

https://launchpad.net/~guardianproject/+archive/commotion

This olsrd.conf is also what I'm using in the OLSR-mesh-tether app. The next step is to get automatic creation of internet routes when the device has a working internet connection.

.hc
"
351,Commotion-dev, Serval security summary,"Thu, 12 Apr 2012 16:11:31 +0100",+0100,Michael Rogers,
352,Commotion-dev, dynamic runtime config of olsrd,"Thu, 12 Apr 2012 10:57:05 -0500",-0500,Ben West,"In my practice, I've only just restarted the olsrd daemon after changing
olsrd.conf and let a minute or so transpire while it rebuilds the routing
table.

The disruption of any actively routed traffic wasn't that long (e.g. a
minute or less), and I think it would only be noticeable on continuous TCP
streams (aka streaming media) and maybe SSH sessions.

Also, you could try manually setting a default route with a higher metric
(aka lower priority) as a fallback for the period while olsrd restarts.

On Wed, Apr 11, 2012 at 9:26 PM, Hans-Christoph Steiner <
hans at guardianproject.info> wrote:

>
> I'm wondering what's the best example for dynamic configuration of olsrd?
>  The only example I could find is the httpinfo ADMIN_INTERFACE, which seems
> to have been abandoned years ago.
>
> Is anyone doing dynamic configuration of olsrd at runtime?  Is this not at
> all useful?
>
> .hc
>
>
> _______________________________________________
> Commotion-dev mailing list
> Commotion-dev at lists.chambana.net
> http://lists.chambana.net/mailman/listinfo/commotion-dev
>
"
353,Commotion-dev, dynamic runtime config of olsrd,"Thu, 12 Apr 2012 13:37:12 -0400",-0400,Josh King,"Hmm, I had alwa

On 04/12/2012 11:57 AM, Ben West wrote:
> In my practice, I've only just restarted the olsrd daemon after changing
> olsrd.conf and let a minute or so transpire while it rebuilds the
> routing table.
> 
> The disruption of any actively routed traffic wasn't that long (e.g. a
> minute or less), and I think it would only be noticeable on continuous
> TCP streams (aka streaming media) and maybe SSH sessions.
> 
> Also, you could try manually setting a default route with a higher
> metric (aka lower priority) as a fallback for the period while olsrd
> restarts.
> 
> On Wed, Apr 11, 2012 at 9:26 PM, Hans-Christoph Steiner
> <hans at guardianproject.info <mailto:hans at guardianproject.info"
354,Commotion-dev, dynamic runtime config of olsrd,"Thu, 12 Apr 2012 13:39:28 -0400",-0400,Josh King,"Oops, sorry, premature send ;-)

I had always assumed that sending a HUP to the daemon would at least
cause it to re-read its config file; going to test to see if that's the
case. I know that having a much more dynamic framework for this sort of
thing is part of the roadmap for OLSRv2, but that's still in relatively
early stages as far as I know. I've been meaning to send a message to
Henning (OLSRv2 lead developer) about some other questions, so I'll see
if I can pull him into this conversation in the hopes that he can shed
some light on the issue.

On 04/12/2012 01:37 PM, Josh King wrote:
> Hmm, I had alwa
> 
> On 04/12/2012 11:57 AM, Ben West wrote:
"
355,Commotion-dev, updated ubuntu packages,"Thu, 12 Apr 2012 13:40:53 -0400",-0400,Josh King,"Hi Hans,

That's great! I'm going to set this up and try it out on some machines 
in the office.

On Wed 11 Apr 2012 10:27:43 PM EDT, Hans-Christoph Steiner wrote:
>
> I just pushed some updates to the olsrd Debian package to our Ubuntu PPA.  This is what I'm using as my dev setup, so I thought I'd share it.  It includes a olsrd.conf that enables httpinfo and HNA, and has a working /etc/init.d/olsrd script that automatically signals NetworkManager to let go of the wifi.
>
> I have a script in the works to setup all of the ad-hoc settings, so eventually /etc/init.d/olsrd will also setup the ad-hoc settings.
>
> https://launchpad.net/~guardianproject/+archive/commotion
>
> This olsrd.conf is also what I'm using in the OLSR-mesh-tether app. The next step is to get automatic creation of internet routes when the device has a working internet connection.
>
> .hc
> _______________________________________________
> Commotion-dev mailing list
> Commotion-dev at lists.chambana.net
> http://lists.chambana.net/mailman/listinfo/commotion-dev
"
356,Commotion-dev, pushing my git to commotion-android repo,"Thu, 12 Apr 2012 13:46:29 -0400",-0400,Josh King,"Hi Hans,

How about pushing to the existing repository, but moving the old app
skeleton to a subdirectory, so that we can retain it for posterity but
not generate a whole new redmine project? Would that work, or do you
think it's too clunky?

On 04/11/2012 12:56 PM, Hans-Christoph Steiner wrote:
> 
> I'd like to move the OLSR-mesh-tether app to the commotion git, and I am
> wondering how I should do it.
> 
> * I could push to a new git repo on
> https://code.commotionwireless.net/commotion/olsr-mesh-tether.git
> 
> * I could overwrite the existing app skeleton in
> https://code.commotionwireless.net/commotion/commotion-android.git
> 
> * I could leave it at https://github.com/guardianproject/olsr-mesh-tether
> 
> 
> .hc
> 
> _______________________________________________
> Commotion-dev mailing list
> Commotion-dev at lists.chambana.net
> http://lists.chambana.net/mailman/listinfo/commotion-dev
> 

-- 
Josh King

""I am an Anarchist not because I believe Anarchism is the final goal,
but because there is no such thing as a final goal."" -Rudolf Rocker

"
357,Commotion-dev, pushing my git to commotion-android repo,"Fri, 13 Apr 2012 08:19:28 +0930",+0930,Jeremy Lakeman,"Just use a different branch name...

On Fri, Apr 13, 2012 at 3:16 AM, Josh King <jking at chambana.net> wrote:
> Hi Hans,
>
> How about pushing to the existing repository, but moving the old app
> skeleton to a subdirectory, so that we can retain it for posterity but
> not generate a whole new redmine project? Would that work, or do you
> think it's too clunky?
>
> On 04/11/2012 12:56 PM, Hans-Christoph Steiner wrote:
"
358,Commotion-dev, pushing my git to commotion-android repo,"Thu, 12 Apr 2012 21:07:14 -0400",-0400,Hans-Christoph Steiner,"
I think using commotion-android.git makes sense.  There is currently only a single commit in the repo.  Also, I could be wrong, but it seems that the stuff that's currently there can be gotten somewhere else:

- mac2ip is already in the olsr-wifi-tether app

- olsrd and plugins build as part of olsr-wifi-tether, so we don't need the binaries

- tether-edify looks like it from Android Wifi Tether or some derivative.

- are the icons in res/drawable the official commotion ones?

My vote is to just ditch the old stuff and keep things clean.  I can just incorporate any files that we need into olsr-wifi-tether repo.  So far, the only thing I have a question about is the icons.

.hc

On Apr 12, 2012, at 1:46 PM, Josh King wrote:

> Hi Hans,
> 
> How about pushing to the existing repository, but moving the old app
> skeleton to a subdirectory, so that we can retain it for posterity but
> not generate a whole new redmine project? Would that work, or do you
> think it's too clunky?
> 
> On 04/11/2012 12:56 PM, Hans-Christoph Steiner wrote:
"
359,Commotion-dev, dynamic runtime config of olsrd,"Thu, 12 Apr 2012 21:29:09 -0400",-0400,Hans-Christoph Steiner,"
I also brought this up on olsr-dev, and Henning and others confirmed that there is little dynamic config currently possible.  Here's Henning's email:


On 04/12/2012 04:26 AM, Hans-Christoph Steiner wrote:
> 
> I'm wondering what's the best example for dynamic configuration of
> olsrd? The only example I could find is the httpinfo ADMIN_INTERFACE,
> which  seems to have been abandoned years ago.
Yes, the HTTPINFO plugin in general and especially the admin interface is in a really bad shape because nobody used it for years. It cannot handle multiple concurrent accesses well, it consumes quite a lot of memory and the its not that useful.

> Is anyone doing dynamic configuration of olsrd at runtime?  Is this
> not at all useful?
At the moment OLSRd (neither stable nor development branch) is prepared
for any kind of configuration change during runtime. The only thing that
is dynamic is the IPs of the interfaces, which are scanned by OLSRd
during runtime.

The new OLSRd (v2) I am working on should resolve the problem, but doing
it for the current one will be quite a lot of work.

Henning Rogge




On Apr 12, 2012, at 1:39 PM, Josh King wrote:

> Oops, sorry, premature send ;-)
> 
> I had always assumed that sending a HUP to the daemon would at least
> cause it to re-read its config file; going to test to see if that's the
> case. I know that having a much more dynamic framework for this sort of
> thing is part of the roadmap for OLSRv2, but that's still in relatively
> early stages as far as I know. I've been meaning to send a message to
> Henning (OLSRv2 lead developer) about some other questions, so I'll see
> if I can pull him into this conversation in the hopes that he can shed
> some light on the issue.
> 
> On 04/12/2012 01:37 PM, Josh King wrote:
"
360,Commotion-dev, updated ubuntu packages,"Fri, 13 Apr 2012 17:58:36 -0400",-0400,Hans-Christoph Steiner,"

And another update!  This time I added a script to do the adhoc mode
setup called '/usr/bin/olsrd-adhoc-setup', and put the option to run it
as part of the /etc/init.d/olsrd sequence.  Configure that in
/etc/default/olsrd.

.hc


On 04/11/2012 10:27 PM, Hans-Christoph Steiner wrote:
> 
> I just pushed some updates to the olsrd Debian package to our Ubuntu PPA.  This is what I'm using as my dev setup, so I thought I'd share it.  It includes a olsrd.conf that enables httpinfo and HNA, and has a working /etc/init.d/olsrd script that automatically signals NetworkManager to let go of the wifi.
> 
> I have a script in the works to setup all of the ad-hoc settings, so eventually /etc/init.d/olsrd will also setup the ad-hoc settings.
> 
> https://launchpad.net/~guardianproject/+archive/commotion
> 
> This olsrd.conf is also what I'm using in the OLSR-mesh-tether app. The next step is to get automatic creation of internet routes when the device has a working internet connection.
> 
> .hc

"
361,Commotion-dev, Serval security summary,"Sun, 15 Apr 2012 19:32:02 +0100",+0100,Michael Rogers,
362,Commotion-dev, kleeq -- ad-hoc net security,"Sat, 14 Apr 2012 06:44:32 -0600",-0600,Paul Bame,"""KleeQ
    KleeQ enables secure group communications for users of
    low-connectivity ad-hoc networks. It provides authentication,
    encryption and forward secrecy for a communicating group.

    http://crysp.uwaterloo.ca/software/

(no idea how far along, etc, it is) -- one of several interesting
projects listed at that U-Waterloo web site.


"
363,Commotion-dev, April 13th Conf. Call Notes.,"Mon, 16 Apr 2012 08:34:42 -0400",-0400,Seamus Tuohy,"On last Friday, April 13th there was a check-in call between OTI and
Guardian project that ended up with a lot of useful discussion. If you are
interested we have put the notes up here.
https://code.commotionwireless.net/projects/commotion/wiki/Development_Notes

Please edit, add, etc as needed to make them comprehensive, and feel free
to use this page to log and document other development discussions.

Thanks,
Seamus
Program Associate
OTI
"
364,Commotion-dev, kleeq -- ad-hoc net security,"Thu, 19 Apr 2012 13:41:41 -0400",-0400,Hans-Christoph Steiner,"
Given that the code in the repo hasn't been touched in 5 years, I say its probably not going well. Maybe there's a different repo? THis is what I found:

http://kleeq.svn.sourceforge.net/viewvc/kleeq/trunk/

On this topic, we've been playing with https://crypto.cat, and its creator Nadim has been hanging out here a bit.  It seems to be a good implementation of group chat with end-to-end encryption.  Its JavaScript/PHP, so very web-focused.  Its easy to setup, we have it running on a Debian chroot on Android devices, so this could be a possible chat server for mesh.

.hc

On Apr 14, 2012, at 8:44 AM, Paul Bame wrote:

> ""KleeQ
>    KleeQ enables secure group communications for users of
>    low-connectivity ad-hoc networks. It provides authentication,
>    encryption and forward secrecy for a communicating group.
> 
>    http://crysp.uwaterloo.ca/software/
> 
> (no idea how far along, etc, it is) -- one of several interesting
> projects listed at that U-Waterloo web site.
> 
> 
> _______________________________________________
> Commotion-dev mailing list
> Commotion-dev at lists.chambana.net
> http://lists.chambana.net/mailman/listinfo/commotion-dev
> 


"
365,Commotion-dev, kleeq -- ad-hoc net security,"Thu, 19 Apr 2012 12:47:03 -0500",-0500,Ben West,"W.r.t. to potential for encryption on adhoc/mesh, I am still curious about
viability of simply pushing encrypted VPNs thru an otherwise unencrypted
mesh layer.  That is, besides whatever traffic could not already be bumped
over to SSL, would a VPN tunnel provide a more easily implementable
solution for encrypting specific paths thru the mesh?

On Thu, Apr 19, 2012 at 12:41 PM, Hans-Christoph Steiner <
hans at guardianproject.info> wrote:

>
> Given that the code in the repo hasn't been touched in 5 years, I say its
> probably not going well. Maybe there's a different repo? THis is what I
> found:
>
> http://kleeq.svn.sourceforge.net/viewvc/kleeq/trunk/
>
> On this topic, we've been playing with https://crypto.cat, and its
> creator Nadim has been hanging out here a bit.  It seems to be a good
> implementation of group chat with end-to-end encryption.  Its
> JavaScript/PHP, so very web-focused.  Its easy to setup, we have it running
> on a Debian chroot on Android devices, so this could be a possible chat
> server for mesh.
>
> .hc
>
> On Apr 14, 2012, at 8:44 AM, Paul Bame wrote:
>
> > ""KleeQ
> >    KleeQ enables secure group communications for users of
> >    low-connectivity ad-hoc networks. It provides authentication,
> >    encryption and forward secrecy for a communicating group.
> >
> >    http://crysp.uwaterloo.ca/software/
> >
> > (no idea how far along, etc, it is) -- one of several interesting
> > projects listed at that U-Waterloo web site.
> >
> >
> > _______________________________________________
> > Commotion-dev mailing list
> > Commotion-dev at lists.chambana.net
> > http://lists.chambana.net/mailman/listinfo/commotion-dev
> >
>
>
> _______________________________________________
> Commotion-dev mailing list
> Commotion-dev at lists.chambana.net
> http://lists.chambana.net/mailman/listinfo/commotion-dev
>
"
366,Commotion-dev, kleeq -- ad-hoc net security,"Thu, 19 Apr 2012 15:03:56 -0400",-0400,Hans-Christoph Steiner,"
As a user solution it should work fine.  OLSR is just IP networking, so if one side has a VPN server, then any other node on the mesh can VPN to it.  As a general transparent solution, probably not really viable.

.hc

On Apr 19, 2012, at 1:47 PM, Ben West wrote:

> W.r.t. to potential for encryption on adhoc/mesh, I am still curious about viability of simply pushing encrypted VPNs thru an otherwise unencrypted mesh layer.  That is, besides whatever traffic could not already be bumped over to SSL, would a VPN tunnel provide a more easily implementable solution for encrypting specific paths thru the mesh?
> 
> On Thu, Apr 19, 2012 at 12:41 PM, Hans-Christoph Steiner <hans at guardianproject.info> wrote:
> 
> Given that the code in the repo hasn't been touched in 5 years, I say its probably not going well. Maybe there's a different repo? THis is what I found:
> 
> http://kleeq.svn.sourceforge.net/viewvc/kleeq/trunk/
> 
> On this topic, we've been playing with https://crypto.cat, and its creator Nadim has been hanging out here a bit.  It seems to be a good implementation of group chat with end-to-end encryption.  Its JavaScript/PHP, so very web-focused.  Its easy to setup, we have it running on a Debian chroot on Android devices, so this could be a possible chat server for mesh.
> 
> .hc
> 
> On Apr 14, 2012, at 8:44 AM, Paul Bame wrote:
> 
> > ""KleeQ
> >    KleeQ enables secure group communications for users of
> >    low-connectivity ad-hoc networks. It provides authentication,
> >    encryption and forward secrecy for a communicating group.
> >
> >    http://crysp.uwaterloo.ca/software/
> >
> > (no idea how far along, etc, it is) -- one of several interesting
> > projects listed at that U-Waterloo web site.
> >
> >
> > _______________________________________________
> > Commotion-dev mailing list
> > Commotion-dev at lists.chambana.net
> > http://lists.chambana.net/mailman/listinfo/commotion-dev
> >
> 
> 
> _______________________________________________
> Commotion-dev mailing list
> Commotion-dev at lists.chambana.net
> http://lists.chambana.net/mailman/listinfo/commotion-dev
> 
> 
> 
> 
> -- 
> Ben West
> me at benwest.name
> 

"
367,Commotion-dev, kleeq -- ad-hoc net security,"Fri, 20 Apr 2012 10:47:35 +0200",+0200,L. Aaron Kaplan,"Henning and me were discussing about some  signature/encryption scheme like 3 years ago already.
It was not implemented yet. But it relied on Shamir's Shared Secret Scheme (SSSS)
http://en.wikipedia.org/wiki/Shamir%27s_Secret_Sharing

Maybe that is still interesting 

a.

On Apr 19, 2012, at 9:03 PM, Hans-Christoph Steiner wrote:

> 
> As a user solution it should work fine.  OLSR is just IP networking, so if one side has a VPN server, then any other node on the mesh can VPN to it.  As a general transparent solution, probably not really viable.
> 
> .hc
> 
> On Apr 19, 2012, at 1:47 PM, Ben West wrote:
> 
"
368,Commotion-dev, may day olsr testing report,"Wed, 2 May 2012 15:39:14 -0400",-0400,Hans-Christoph Steiner,"
http://guardianproject.info/2012/05/02/mobile-mesh-in-a-real-world-test/

Nathan, Mark, Lee, and I (all from Guardian) tried some OLSR mesh testing during the May Day protests and marches.  We were able to get 4 devices to associate and mesh together, but not without some trials and travails.  Two pairs of devices setup two separate BSSIDs, so were on separate networks.  We turned them all off, then associated  them one at a time, and then they all got onto the same BSSID and olsrd started doing its thing.  This made us think that we should just use a hard-coded BSSID in the setup, with a preference to allow standard ad-hoc association to find a BSSID.

Next we tried to use some services.  We were going to try running a cryptocat session, but the phone that was running cryptocat via a Lil' Debi Debian install was having trouble staying connected to the mesh.  Next we tried a serverless direct SIP call using CSIPSimple.  

CSIPSimple uses the Android Java API to determine if the device is online.  The current approach to configuring the ad-hoc mode used by Android-Wifi-Tether-based apps including Serval and Barnacle-based apps including OLSR-Mesh-Tether disables the wifi via the Android Java API, then configures ad-hoc mode using command line tools.  This means that Android believe that the wifi is off, and when apps query the network status via the normal Android API, Android will tell it what it believes: there is no network connection.

This works in Serval because Serval is a self-contained system with its own SIP client and server, etc.  This does not work for situations where we want to provide generic IP service using OLSR mesh on Android phones.  I'm going to try to see if I can get the ad-hoc setup to work while making Android believe that the wifi is an and associated with infrastructure-mode network.

Also, in the process of setting up the mesh while mixing in a crowd and walking with a crowd down the street we realized two key things: 1) the setup process should be tolerant of frequent interruptions, and 2) it should be as easy as possible for people to give the mesh app itself from one phone to another.  #1 is in the scope of our current Commotion work and we will focus on making a UI that clearly shows its status and lets the user continue where they left off.  #2 is outside of the scope of our Commotion work, but Guardian Project will be working directly on that issue as part of a separate project, so we'll try to keep everyone informed on our progress with that.

Another idea we discussed was how to have a ""strength meter"" for mesh, like the GSM or wifi bars.  We talked about taking a tally of how many first hop connections there are, the total connections, and the total willingness of all of the first hop connections.

.hc


"
369,Commotion-dev, commotion-android.git updated,"Wed, 2 May 2012 16:01:01 -0400",-0400,Hans-Christoph Steiner,"
I pushed the current OLSRMeshTether app into the commotion-android git, overwriting the original two commits that were there.

.hc
"
370,Commotion-dev, may day olsr testing report,"Thu, 3 May 2012 08:26:21 +0930",+0930,Jeremy Lakeman,"On Thu, May 3, 2012 at 5:09 AM, Hans-Christoph Steiner
<hans at guardianproject.info> wrote:
>
> http://guardianproject.info/2012/05/02/mobile-mesh-in-a-real-world-test/
>
> Nathan, Mark, Lee, and I (all from Guardian) tried some OLSR mesh testing during the May Day protests and marches. ?We were able to get 4 devices to associate and mesh together, but not without some trials and travails. ?Two pairs of devices setup two separate BSSIDs, so were on separate networks. ?We turned them all off, then associated ?them one at a time, and then they all got onto the same BSSID and olsrd started doing its thing. ?This made us think that we should just use a hard-coded BSSID in the setup, with a preference to allow standard ad-hoc association to find a BSSID.
>
> Next we tried to use some services. ?We were going to try running a cryptocat session, but the phone that was running cryptocat via a Lil' Debi Debian install was having trouble staying connected to the mesh. ?Next we tried a serverless direct SIP call using CSIPSimple.
>
> CSIPSimple uses the Android Java API to determine if the device is online. ?The current approach to configuring the ad-hoc mode used by Android-Wifi-Tether-based apps including Serval and Barnacle-based apps including OLSR-Mesh-Tether disables the wifi via the Android Java API, then configures ad-hoc mode using command line tools. ?This means that Android believe that the wifi is off, and when apps query the network status via the normal Android API, Android will tell it what it believes: there is no network connection.
>
> This works in Serval because Serval is a self-contained system with its own SIP client and server, etc. ?This does not work for situations where we want to provide generic IP service using OLSR mesh on Android phones. ?I'm going to try to see if I can get the ad-hoc setup to work while making Android believe that the wifi is an and associated with infrastructure-mode network.

Yes, we had similar issues with SipDroid connecting to localhost or
choosing codec's believing there was no available bandwidth.
But not for much longer, we've dropped asterisk and sipdroid now in a
development branch and have started to replace them.
Yes, we have a big ""Not Invented Here"" complex. But we found a number
of reasons not to use SIP's tcp session protocol and we needed
something that would be easier for us to port in future.

> Also, in the process of setting up the mesh while mixing in a crowd and walking with a crowd down the street we realized two key things: 1) the setup process should be tolerant of frequent interruptions, and 2) it should be as easy as possible for people to give the mesh app itself from one phone to another. ?#1 is in the scope of our current Commotion work and we will focus on making a UI that clearly shows its status and lets the user continue where they left off. ?#2 is outside of the scope of our Commotion work, but Guardian Project will be working directly on that issue as part of a separate project, so we'll try to keep everyone informed on our progress with that.

1) Fire a ""share"" intent with your own apk path. You can get this from
your own package info. The user can choose bluetooth to transfer the
file to another phone. Or you can look through the list of results to
find bluetooth yourself. Though not all phones have the proper
bluetooth stack to receive a file without additional software.
Samsungs work at least.

2) put the phone into hotspot mode and start a web server, again you
can find the path to your own apk and serve a copy of it.

Serval does both, in the latest version.

> Another idea we discussed was how to have a ""strength meter"" for mesh, like the GSM or wifi bars. ?We talked about taking a tally of how many first hop connections there are, the total connections, and the total willingness of all of the first hop connections.
>
> .hc
>
>
>
> _______________________________________________
> Commotion-dev mailing list
> Commotion-dev at lists.chambana.net
> http://lists.chambana.net/mailman/listinfo/commotion-dev
"
371,Commotion-dev, may day olsr testing report,"Wed, 02 May 2012 19:00:26 -0400",-0400,Nathan of Guardian,"On 05/02/2012 06:56 PM, Jeremy Lakeman wrote:
> Serval does both, in the latest version.
It slices, it dices, it makes cocktails!

Kidding aside, it is interesting to see the ""all in one"" approach
develop from a usability standpoint, as opposed to our (Guardian
Project's) many apps ecosystem.

Btw, if you are interested in an HTTP/S capable Android web server with
WebDav, we've got a project going here:
https://github.com/guardianproject/iocipherserver

+n


"
372,Commotion-dev, may day olsr testing report,"Wed, 2 May 2012 19:27:59 -0400",-0400,Hans-Christoph Steiner,"
On May 2, 2012, at 6:56 PM, Jeremy Lakeman wrote:

> On Thu, May 3, 2012 at 5:09 AM, Hans-Christoph Steiner
> <hans at guardianproject.info> wrote:
"
373,Commotion-dev, the one dynamic config option for olsrd,"Sat, 5 May 2012 19:43:36 -0400",-0400,Hans-Christoph Steiner,"
I had a good conversation with Henning Rogge, one of the main olsrd devs, about the txtinfo plugin and dynamic configuration possibilities.  It seems there is one parameter that we can configure at runtime: HNA.  So that means we can have in the phone GUI a button that turns on and off the sharing of the GSM/CDMA internet connection to the mesh, and the rest can stay the same.

The caveat is that the HNA information is not frequently propagated thru the mesh, so it wouldn't take effect quickly for the whole mesh.  But that's probably not a bad thing from the point of view of the user of that particular phone.

So I think that changes the approach a little bit in terms of the seven profiles that we were thinking about.  I think that we should still have the seven profiles, but the HNA/internet gateway stuff should not be included except for maybe one profile that is like the static node that always shares everything.

.hc
"
374,Commotion-dev, OLSR mesh tether app on Commotion,"Tue, 08 May 2012 10:02:41 -0400",-0400,Will Hawkins,"Hello everyone!

First, let me introduce myself. I'm the newly minted ""Commotion Mobile
Developer"" at OTI. I'm sure that I will be working closely with everyone
from the Guardian Project (and others on this list) so I wanted to say
hello before I got any further.

I have had success building, configuring and running the OLSR mesh
tether app (pulled from the Guardian project's github repo). After some
tweaking to olsrd.conf I was also able to get it to properly mesh with
the other nodes on our Commotion test network here at the office. Here
are the relevant changes:

"
375,Commotion-dev, OLSR mesh tether app on Commotion,"Tue, 08 May 2012 12:00:14 -0400",-0400,Hans-Christoph Steiner,"
Hey Will,

Glad to have your contributions on this! I'll go ahead and commit that.
 That app as it stands is the first alpha, so yea, it'll need lots more
fixes like this to make it work well.  I'm currently immersed in writing
a 'jsoninfo' plugin for olsrd which will allow the Android app to easily
get all of the information that the current txtinfo and httpinfo plugins
provide, as well as provide a way to set the HNA routes dynamically.

We then plan on making olsrd.conf files for 7ish profiles, which will be
user-selectable, that's something you could work on now, if you are
interested.

Then we'll be implementing the final round of the GUI, I'll try to post
sketches this week.

Perhaps you could also help us get some Commotion nodes setup on our
end?  We have a Buffalo and a few Foneras.  This would help us a lot
with testing.

.hc


On 05/08/2012 10:02 AM, Will Hawkins wrote:
> Hello everyone!
> 
> First, let me introduce myself. I'm the newly minted ""Commotion Mobile
> Developer"" at OTI. I'm sure that I will be working closely with everyone
> from the Guardian Project (and others on this list) so I wanted to say
> hello before I got any further.
> 
> I have had success building, configuring and running the OLSR mesh
> tether app (pulled from the Guardian project's github repo). After some
> tweaking to olsrd.conf I was also able to get it to properly mesh with
> the other nodes on our Commotion test network here at the office. Here
> are the relevant changes:
> 
> "
376,Commotion-dev, OLSR mesh tether app on Commotion,"Tue, 08 May 2012 12:10:20 -0400",-0400,Will Hawkins,"Thanks for the reply, Hans!

On 05/08/2012 12:00 PM, Hans-Christoph Steiner wrote:
> 
> Hey Will,
> 
> Glad to have your contributions on this! I'll go ahead and commit that.
>  That app as it stands is the first alpha, so yea, it'll need lots more
> fixes like this to make it work well.  I'm currently immersed in writing
> a 'jsoninfo' plugin for olsrd which will allow the Android app to easily
> get all of the information that the current txtinfo and httpinfo plugins
> provide, as well as provide a way to set the HNA routes dynamically.

This seems like it will help with your goal (from your previous message)
of making something that helps the user evaluate their ""coverage"".

> 
> We then plan on making olsrd.conf files for 7ish profiles, which will be
> user-selectable, that's something you could work on now, if you are
> interested.

This seems like a great idea. I was imagining profiles as something that
would be a terrific idea (like you already have for the ad-hoc mode
configurations for certain devices) for selecting configurations. Do you
think that you will give the user that option on the home screen of the
app or via the Settings? That's probably more of a GUI design decision,
but I thought I'd ask.


> 
> Then we'll be implementing the final round of the GUI, I'll try to post
> sketches this week.
> 
> Perhaps you could also help us get some Commotion nodes setup on our
> end?  We have a Buffalo and a few Foneras.  This would help us a lot
> with testing.

I'd be happy to help you with this. Josh is rolling out some new builds
shortly (w/in days) so I will work with him to find out exactly which
buttons to press to make compatible images for those devices. We'll be
in touch about this soon!

Thanks again for your reply!
Will

> 
> .hc
> 
> 
> On 05/08/2012 10:02 AM, Will Hawkins wrote:
"
377,Commotion-dev, OLSR mesh tether app on Commotion,"Tue, 08 May 2012 14:05:23 -0400",-0400,Hans-Christoph Steiner,"
On 05/08/2012 12:10 PM, Will Hawkins wrote:
> Thanks for the reply, Hans!
> 
> On 05/08/2012 12:00 PM, Hans-Christoph Steiner wrote:
"
378,Commotion-dev, Use case for mobile + fixed wireless OLSR?,"Tue, 8 May 2012 13:15:41 -0500",-0500,Ben West,"Hi All,

In lieu of Will Hawkins' recent recruitment for OTI mobile mesh
development (congrats, Will!), I am curious if anyone has given
thought to use cases where potential mobile devices with OLSR mesh
tether app would interoperate with fixed 802.11 hotspots running
OpenWRT/Commotion + OLSR.

That is, I personally work with meshes of fixed hotspots, and I do
understand many of the list members are envisioning meshes of perhaps
only mobile devices, e.g. for ad-hoc assemblies of people in public
plazas and the like.

Is there a particular, compelling use case to have both classes of
devices, mobile and fixed, participate in the same mesh?  E.g., is it
likely that a mostly mobile mesh might use one or two fixed hotspots
for convenient uplink to the Internet?  That is, besides letting the
mesh operate in conventional fashion, are there specific things one
could do to take advantage of the fixed hotspots (which one could
expect to have higher tx power, better rx sensitivity, and/or fast
wired uplink)?

Part of my motivation for asking is that I await a Republic Wireless
handset hopefully at some point this summer, and that phone's
proclivity to use 802.11 service over 3/4G seem to make it a natural
companion to Commotion.

-- 
Ben West
me at benwest.name

"
379,Commotion-dev, Use case for mobile + fixed wireless OLSR?,"Tue, 08 May 2012 15:53:37 -0400",-0400,Hans-Christoph Steiner,"
I think that mobile+mesh is probably the ideal use case for reliable
mobile meshing.  The fixed devices maintain a barebones mesh and perhaps
internet HNA routes, then as the mobiles come and go, they should be
able to associate with the fixed mesh nodes.  The fixed nodes could also
have a very high willingness so that they bear the bulk of the broadcast
traffic, allowing the mobile devices to save their batteries.  I'm
guessing there are other things that we'll want to tweak.

I'm thinking these would likely be two profiles: purely mobile mesh, and
mobile mesh with fixed anchors.

.hc

On 05/08/2012 02:15 PM, Ben West wrote:
> Hi All,
> 
> In lieu of Will Hawkins' recent recruitment for OTI mobile mesh
> development (congrats, Will!), I am curious if anyone has given
> thought to use cases where potential mobile devices with OLSR mesh
> tether app would interoperate with fixed 802.11 hotspots running
> OpenWRT/Commotion + OLSR.
> 
> That is, I personally work with meshes of fixed hotspots, and I do
> understand many of the list members are envisioning meshes of perhaps
> only mobile devices, e.g. for ad-hoc assemblies of people in public
> plazas and the like.
> 
> Is there a particular, compelling use case to have both classes of
> devices, mobile and fixed, participate in the same mesh?  E.g., is it
> likely that a mostly mobile mesh might use one or two fixed hotspots
> for convenient uplink to the Internet?  That is, besides letting the
> mesh operate in conventional fashion, are there specific things one
> could do to take advantage of the fixed hotspots (which one could
> expect to have higher tx power, better rx sensitivity, and/or fast
> wired uplink)?
> 
> Part of my motivation for asking is that I await a Republic Wireless
> handset hopefully at some point this summer, and that phone's
> proclivity to use 802.11 service over 3/4G seem to make it a natural
> companion to Commotion.
> 

"
380,Commotion-dev, first sketch of jsoninfo olsrd plugin,"Wed, 09 May 2012 00:50:13 -0400",-0400,Hans-Christoph Steiner,"
I just pushed the first version of the jsoninfo plugin for getting the
status and config info from olsrd in JSON format.  Right now, it gives
all of the data that the txtinfo plugin does, indeed it is based on the
txtinfo plugin.  It does not yet return the /config information.  Also,
I plan on adding the ability to configure HNAs at runtime via this
plugin (like dyn_gw_plain).

To build it:

git clone http://olsr.org/git/olsrd.git
cd olsrd
make build_all
make jsoninfo

.hc

"
381,Commotion-dev, Submitted DNS and configuration changes,"Thu, 10 May 2012 15:28:32 -0400",-0400,Will Hawkins,"Hello all!

I just wanted to send an update. I finished coding up some changes to
the OLSR mesh tether app that make it even more Commotion-compatible.

1. DNS: I added some code that will set a DNS server (Google's public
DNS, by default) while the user is connected to the mesh. There is a
configuration option (Advanced->Mesh) to change that value. I am going
to continue working on DNS ""stuff"" today and tomorrow. My goal is to get
the Android device to learn any name resolutions passed around in OLSR's
DNS plug-in.

2. Configuration: I changed some of the configuration screen
nomenclature and its semantics. Specifically, I changed the LAN Gateway
and LAN Netmask under Advanced->IPv4 options to properly reflect their
use for the mesh. I also added code so that the user can simply enter
the first quad of an IPv4 address and the client will generate the
remaining 3 based on the MAC address (this is how Commotion works for
OpenWRT devices). I changed the name of the entire configuration tab to
Mesh.

I hope that these are up-to-par and that they are helpful. Please let me
know if there are any changes that you want made so that they fit code
style, etc.

Talk to you soon!
Will
"
382,Commotion-dev, Submitted DNS and configuration changes,"Thu, 10 May 2012 17:30:42 -0400",-0400,Hans-Christoph Steiner,"
Hey Will,

Sounds useful, where can I see these changes? 

.hc

On May 10, 2012, at 3:28 PM, Will Hawkins wrote:

> Hello all!
> 
> I just wanted to send an update. I finished coding up some changes to
> the OLSR mesh tether app that make it even more Commotion-compatible.
> 
> 1. DNS: I added some code that will set a DNS server (Google's public
> DNS, by default) while the user is connected to the mesh. There is a
> configuration option (Advanced->Mesh) to change that value. I am going
> to continue working on DNS ""stuff"" today and tomorrow. My goal is to get
> the Android device to learn any name resolutions passed around in OLSR's
> DNS plug-in.
> 
> 2. Configuration: I changed some of the configuration screen
> nomenclature and its semantics. Specifically, I changed the LAN Gateway
> and LAN Netmask under Advanced->IPv4 options to properly reflect their
> use for the mesh. I also added code so that the user can simply enter
> the first quad of an IPv4 address and the client will generate the
> remaining 3 based on the MAC address (this is how Commotion works for
> OpenWRT devices). I changed the name of the entire configuration tab to
> Mesh.
> 
> I hope that these are up-to-par and that they are helpful. Please let me
> know if there are any changes that you want made so that they fit code
> style, etc.
> 
> Talk to you soon!
> Will
> _______________________________________________
> Commotion-dev mailing list
> Commotion-dev at lists.chambana.net
> http://lists.chambana.net/mailman/listinfo/commotion-dev
> 


"
383,Commotion-dev, Submitted DNS and configuration changes,"Thu, 10 May 2012 17:38:17 -0400",-0400,Will Hawkins,"I submitted a pull request to the Github repo. Does that work for you?

On 05/10/2012 05:30 PM, Hans-Christoph Steiner wrote:
> 
> Hey Will,
> 
> Sounds useful, where can I see these changes? 
> 
> .hc
> 
> On May 10, 2012, at 3:28 PM, Will Hawkins wrote:
> 
"
384,Commotion-dev, Submitted DNS and configuration changes,"Thu, 10 May 2012 18:22:24 -0400",-0400,Hans-Christoph Steiner,"
Ah, ok, that github olsr-wifi-tehter repo is defunct, I think we should try to use the commotion-android Redmine for everything related.  That said, I've never done it with Redmine, so I couldn't tell you how...

.hc

On May 10, 2012, at 5:38 PM, Will Hawkins wrote:

> I submitted a pull request to the Github repo. Does that work for you?
> 
> On 05/10/2012 05:30 PM, Hans-Christoph Steiner wrote:
"
385,Commotion-dev, Submitted DNS and configuration changes,"Thu, 10 May 2012 20:00:27 -0400",-0400,Nathan of Guardian,"On 05/10/2012 06:22 PM, Hans-Christoph Steiner wrote:
> Ah, ok, that github olsr-wifi-tehter repo is defunct,
we should perhaps archive it then? or otherwise indicate we have moved
dev over to:
https://code.commotionwireless.net/commotion/commotion-android.git

?

>  I think we should try to use the commotion-android Redmine for everything related.  That said, I've never done it with Redmine, so I couldn't tell you how...
>
Redmine doesn't offer a Pull Request type feature. I think you will have
to do it the old fashion way, merge branch (which is what a pull request
really is) or patch!

+n


"
386,Commotion-dev, Submitted DNS and configuration changes,"Thu, 10 May 2012 20:13:49 -0400",-0400,Hans-Christoph Steiner,"
On May 10, 2012, at 8:00 PM, Nathan of Guardian wrote:

> On 05/10/2012 06:22 PM, Hans-Christoph Steiner wrote:
"
387,Commotion-dev, Submitted DNS and configuration changes,"Thu, 10 May 2012 21:06:38 -0400",-0400,Hans-Christoph Steiner,"
I looked thru your pull request. I have a couple comments:

* why do you set the DNS via setprop?  Ideally there would be an Android Java API to do this.  I find that messing with things on the terminal level can cause weirdness in apps because the Android level gets out of sync with the lower level.  Here's an example we have to work on: turning off the wifi via Android/Java then enabling it via the shell script causes Android to think that there is no net connection.  Many apps rely on Android to tell them whether there is an net connection, so in mesh mode, these apps will think there is no net connectivitiy because that's what Android believes.

* any reason to leave brncl_lan_gw and brncl_lan_netmask variables around?  I say delete unused variables

* the variables might make more sense as ""adhoc_ip"" and ""adhoc_netmask"" since that's really what they are.  The netmask is not used at all for the meshing since olsrd will write an route entry for each node on the mesh it knows about.  The netmask is really there for a new node to establish first contact another mesh node via standard adhoc wifi IP networking.

I also just pushed updates to make commotion-android/external/olsrd now use olsr.org/git/olsrd.git since all of my updates are now included and I have commit access there.  I included your olsrd.conf commit too.

.hc

On May 10, 2012, at 3:28 PM, Will Hawkins wrote:

> Hello all!
> 
> I just wanted to send an update. I finished coding up some changes to
> the OLSR mesh tether app that make it even more Commotion-compatible.
> 
> 1. DNS: I added some code that will set a DNS server (Google's public
> DNS, by default) while the user is connected to the mesh. There is a
> configuration option (Advanced->Mesh) to change that value. I am going
> to continue working on DNS ""stuff"" today and tomorrow. My goal is to get
> the Android device to learn any name resolutions passed around in OLSR's
> DNS plug-in.
> 
> 2. Configuration: I changed some of the configuration screen
> nomenclature and its semantics. Specifically, I changed the LAN Gateway
> and LAN Netmask under Advanced->IPv4 options to properly reflect their
> use for the mesh. I also added code so that the user can simply enter
> the first quad of an IPv4 address and the client will generate the
> remaining 3 based on the MAC address (this is how Commotion works for
> OpenWRT devices). I changed the name of the entire configuration tab to
> Mesh.
> 
> I hope that these are up-to-par and that they are helpful. Please let me
> know if there are any changes that you want made so that they fit code
> style, etc.
> 
> Talk to you soon!
> Will
> _______________________________________________
> Commotion-dev mailing list
> Commotion-dev at lists.chambana.net
> http://lists.chambana.net/mailman/listinfo/commotion-dev
> 


"
388,Commotion-dev, Submitted DNS and configuration changes,"Fri, 11 May 2012 10:21:41 -0400",-0400,Will Hawkins,"On 05/10/2012 09:06 PM, Hans-Christoph Steiner wrote:
> 
> I looked thru your pull request. I have a couple comments:
> 
> * why do you set the DNS via setprop?  Ideally there would be an Android Java API to do this.  I find that messing with things on the terminal level can cause weirdness in apps because the Android level gets out of sync with the lower level.  Here's an example we have to work on: turning off the wifi via Android/Java then enabling it via the shell script causes Android to think that there is no net connection.  Many apps rely on Android to tell them whether there is an net connection, so in mesh mode, these apps will think there is no net connectivitiy because that's what Android believes.
> 
There is an API to the properties and I initially tried to use that to
set the net.dns1 property. Unfortunately, because Android considers
net.dns1 to be a ""System"" property, the Java API does not allow it to be
read or set by normal user application. There is a list of the
properties accessible via the API at
http://developer.android.com/reference/java/lang/System.html#getProperty%28java.lang.String%29


As someone who never believes what they read, I tried it myself. No
luck. I had to resort to the ash script to get it to do what I wanted.


> * any reason to leave brncl_lan_gw and brncl_lan_netmask variables around?  I say delete unused variables

brncl_lan_gw and brncl_lan_netmask are required by the wifi binary
(main.cc). I didn't know if our project has ""control"" over that source
code so I maintained those variables for compatibility. If there is no
issue modifying the wifi source code, then I can change those variable
references and get rid of unused variables.


> 
> * the variables might make more sense as ""adhoc_ip"" and ""adhoc_netmask"" since that's really what they are.  The netmask is not used at all for the meshing since olsrd will write an route entry for each node on the mesh it knows about.  The netmask is really there for a new node to establish first contact another mesh node via standard adhoc wifi IP networking.
> 

I think that those are great names! I stumbled around for names until I
settled on the mesh_ prefix. We should change them to adhoc_ because, I
agree, those are better names.

On a semi-related note, I realized that I never quite figured out how
you prefer to be addressed? Do you prefer Hans, Hans-Christoph, Your
Highness, King?

> I also just pushed updates to make commotion-android/external/olsrd now use olsr.org/git/olsrd.git since all of my updates are now included and I have commit access there.  I included your olsrd.conf commit too.
> 
> .hc
> 
> On May 10, 2012, at 3:28 PM, Will Hawkins wrote:
> 
"
389,Commotion-dev, Submitted DNS and configuration changes,"Fri, 11 May 2012 10:29:34 -0400",-0400,Will Hawkins,"On 05/10/2012 08:13 PM, Hans-Christoph Steiner wrote:
> 
> On May 10, 2012, at 8:00 PM, Nathan of Guardian wrote:
> 
"
390,Commotion-dev, Submitted DNS and configuration changes,"Fri, 11 May 2012 10:33:22 -0400",-0400,Hans-Christoph Steiner,"
On May 11, 2012, at 10:29 AM, Will Hawkins wrote:

> On 05/10/2012 08:13 PM, Hans-Christoph Steiner wrote:
"
391,Commotion-dev, Submitted DNS and configuration changes,"Fri, 11 May 2012 10:37:21 -0400",-0400,Hans-Christoph Steiner,"
On May 11, 2012, at 10:21 AM, Will Hawkins wrote:

> On 05/10/2012 09:06 PM, Hans-Christoph Steiner wrote:
"
392,Commotion-dev, Submitted DNS and configuration changes,"Fri, 11 May 2012 11:05:33 -0400",-0400,Will Hawkins,"On 05/11/2012 10:37 AM, Hans-Christoph Steiner wrote:
> 
> On May 11, 2012, at 10:21 AM, Will Hawkins wrote:
> 
"
393,Commotion-dev, Submitted DNS and configuration changes,"Fri, 11 May 2012 11:36:43 -0400",-0400,Hans-Christoph Steiner,"
On May 11, 2012, at 11:05 AM, Will Hawkins wrote:

> On 05/11/2012 10:37 AM, Hans-Christoph Steiner wrote:
"
394,Commotion-dev, Submitted DNS and configuration changes,"Fri, 11 May 2012 11:38:47 -0400",-0400,Will Hawkins,"On 05/11/2012 11:36 AM, Hans-Christoph Steiner wrote:
> 
> On May 11, 2012, at 11:05 AM, Will Hawkins wrote:
> 
"
395,Commotion-dev, Change to adhoc_ patch,"Fri, 11 May 2012 12:15:21 -0400",-0400,Will Hawkins,"Hello.

Attached is a patch that changes the preference names from mesh_ to
adhoc_ prefixes. I changed the lan_dns_server name to adhoc_dns_server
for consistency. Please let me know if these patches are usable. In
other words, please tell me if I used 'git diff' correctly.

Will
"
396,Commotion-dev, Submitted DNS and configuration changes,"Fri, 11 May 2012 13:15:11 -0400",-0400,Hans-Christoph Steiner,"
On May 11, 2012, at 11:38 AM, Will Hawkins wrote:

> On 05/11/2012 11:36 AM, Hans-Christoph Steiner wrote:
"
397,Commotion-dev, Change to adhoc_ patch,"Fri, 11 May 2012 13:18:44 -0400",-0400,Hans-Christoph Steiner,"
The patch looks good, and the 'git diff' is ok.  But 'git format-patch' makes much nicer patches that apply nicely with 'git am'.  'git format-patch' saves all of the commit info, so when I include it with 'git am', it looks exactly like the commit in your repo.

Can you send a git format-patch?

.hc

On May 11, 2012, at 12:15 PM, Will Hawkins wrote:

> Hello.
> 
> Attached is a patch that changes the preference names from mesh_ to
> adhoc_ prefixes. I changed the lan_dns_server name to adhoc_dns_server
> for consistency. Please let me know if these patches are usable. In
> other words, please tell me if I used 'git diff' correctly.
> 
> Will
> <adhoc_name_patch.patch>_______________________________________________
> Commotion-dev mailing list
> Commotion-dev at lists.chambana.net
> http://lists.chambana.net/mailman/listinfo/commotion-dev


"
398,Commotion-dev, please review data from the olsrd jsoninfo plugin,"Fri, 11 May 2012 13:53:35 -0400",-0400,Hans-Christoph Steiner,"
I have finished digging thru the txtinfo and httpinfo plugins, as well as other parts of the olsrd source.  The jsoninfo plugin now gives you all of the info in httpinfo and txtinfo, as well as some other info that is not in either.

I tried to make the JSON key names human-readable while still making sense with the OLSR terminology.  I'd appreciate feedback on the key names and data format, and whether they make sense.  The attached data is from a simple test mesh of 4 nodes.  If you can run the jsoninfo plugin on a bigger mesh, I'd love to see a jsoninfo dump of the data from that mesh.  (see the jsoninfo README for more info)

"
399,Commotion-dev, static BSSID?,"Fri, 11 May 2012 14:03:33 -0400",-0400,Hans-Christoph Steiner,"
The trickiest thing for the user of the OlsrMeshTether app remains the ad-hoc network associating.  If a bunch of phones are starting up at the same time, they can easily start associating with themselves in clusters.  Then there is multiple meshes that can't talk to each other.

It seems a simple solution to this is to just hard-code the BSSID for Commotion in general as a default, then allow people to change this if they really want to.  I propose using CC:CC:CC:CC:CC:CC as the static BSSID.

Is there any reason why we wouldn't want to use a static BSSID as the default?

.hc
"
400,Commotion-dev, Change to adhoc_ patch,"Fri, 11 May 2012 14:15:47 -0400",-0400,Will Hawkins,"Ah yes, I do remember git format-patch. Here is one for the most recent
change. Let me know if this works for you. If so, we can just
standardize on this method for shipping around patches.

Will

On 05/11/2012 01:18 PM, Hans-Christoph Steiner wrote:
> 
> The patch looks good, and the 'git diff' is ok.  But 'git format-patch' makes much nicer patches that apply nicely with 'git am'.  'git format-patch' saves all of the commit info, so when I include it with 'git am', it looks exactly like the commit in your repo.
> 
> Can you send a git format-patch?
> 
> .hc
> 
> On May 11, 2012, at 12:15 PM, Will Hawkins wrote:
> 
"
401,Commotion-dev, Change to adhoc_ patch,"Fri, 11 May 2012 14:36:30 -0400",-0400,Hans-Christoph Steiner,"
I can't apply this patch with 'git am' or 'git apply', or the 'git diff' before it too, same error.  Could you rebase it against the head of master?

hans at dhcp-10 commotion-android $ git am ~/Desktop/0001-Change-to-adhoc_-from-mesh_.patch
Applying: Change to adhoc_ from mesh_
/Users/hans/code/commotion/commotion-android/.git/rebase-apply/patch:131: space before tab in indent.
        	e.putString(getString(R.string.adhoc_ip), myIP);
/Users/hans/code/commotion/commotion-android/.git/rebase-apply/patch:153: space before tab in indent.
    			if (k.equalsIgnoreCase(getString(R.string.adhoc_ip)))
error: assets/run: does not match index
error: native/wifi/main.cc: does not match index
error: res/values/strings.xml: does not match index
error: res/xml/preferences.xml: does not match index
error: src/net/szym/barnacle/BarnacleApp.java: does not match index
error: src/net/szym/barnacle/BarnacleService.java: does not match index
error: src/net/szym/barnacle/SettingsActivity.java: does not match index
Patch failed at 0001 Change to adhoc_ from mesh_
When you have resolved this problem run ""git am --resolved"".
If you would prefer to skip this patch, instead run ""git am --skip"".
To restore the original branch and stop patching run ""git am --abort"".

hans at dhcp-10 commotion-android $ git apply ~/Desktop/adhoc_name_patch.patch
/Users/hans/Desktop/adhoc_name_patch.patch:121: space before tab in indent.
        	e.putString(getString(R.string.adhoc_ip), myIP);
/Users/hans/Desktop/adhoc_name_patch.patch:143: space before tab in indent.
    			if (k.equalsIgnoreCase(getString(R.string.adhoc_ip)))
error: patch failed: assets/run:4
error: assets/run: patch does not apply
error: patch failed: res/values/strings.xml:59
error: res/values/strings.xml: patch does not apply
error: patch failed: res/xml/preferences.xml:60
error: res/xml/preferences.xml: patch does not apply
error: patch failed: src/net/szym/barnacle/BarnacleApp.java:101
error: src/net/szym/barnacle/BarnacleApp.java: patch does not apply
error: patch failed: src/net/szym/barnacle/BarnacleService.java:301
error: src/net/szym/barnacle/BarnacleService.java: patch does not apply
error: patch failed: src/net/szym/barnacle/SettingsActivity.java:28
error: src/net/szym/barnacle/SettingsActivity.java: patch does not apply


On May 11, 2012, at 2:15 PM, Will Hawkins wrote:

> Ah yes, I do remember git format-patch. Here is one for the most recent
> change. Let me know if this works for you. If so, we can just
> standardize on this method for shipping around patches.
> 
> Will
> 
> On 05/11/2012 01:18 PM, Hans-Christoph Steiner wrote:
"
402,Commotion-dev, Change to adhoc_ patch,"Fri, 11 May 2012 14:44:59 -0400",-0400,Will Hawkins,"Sure. Just a quick question: The master from which repo?

On 05/11/2012 02:36 PM, Hans-Christoph Steiner wrote:
> 
> I can't apply this patch with 'git am' or 'git apply', or the 'git diff' before it too, same error.  Could you rebase it against the head of master?
> 
> hans at dhcp-10 commotion-android $ git am ~/Desktop/0001-Change-to-adhoc_-from-mesh_.patch
> Applying: Change to adhoc_ from mesh_
> /Users/hans/code/commotion/commotion-android/.git/rebase-apply/patch:131: space before tab in indent.
>         	e.putString(getString(R.string.adhoc_ip), myIP);
> /Users/hans/code/commotion/commotion-android/.git/rebase-apply/patch:153: space before tab in indent.
>     			if (k.equalsIgnoreCase(getString(R.string.adhoc_ip)))
> error: assets/run: does not match index
> error: native/wifi/main.cc: does not match index
> error: res/values/strings.xml: does not match index
> error: res/xml/preferences.xml: does not match index
> error: src/net/szym/barnacle/BarnacleApp.java: does not match index
> error: src/net/szym/barnacle/BarnacleService.java: does not match index
> error: src/net/szym/barnacle/SettingsActivity.java: does not match index
> Patch failed at 0001 Change to adhoc_ from mesh_
> When you have resolved this problem run ""git am --resolved"".
> If you would prefer to skip this patch, instead run ""git am --skip"".
> To restore the original branch and stop patching run ""git am --abort"".
> 
> hans at dhcp-10 commotion-android $ git apply ~/Desktop/adhoc_name_patch.patch
> /Users/hans/Desktop/adhoc_name_patch.patch:121: space before tab in indent.
>         	e.putString(getString(R.string.adhoc_ip), myIP);
> /Users/hans/Desktop/adhoc_name_patch.patch:143: space before tab in indent.
>     			if (k.equalsIgnoreCase(getString(R.string.adhoc_ip)))
> error: patch failed: assets/run:4
> error: assets/run: patch does not apply
> error: patch failed: res/values/strings.xml:59
> error: res/values/strings.xml: patch does not apply
> error: patch failed: res/xml/preferences.xml:60
> error: res/xml/preferences.xml: patch does not apply
> error: patch failed: src/net/szym/barnacle/BarnacleApp.java:101
> error: src/net/szym/barnacle/BarnacleApp.java: patch does not apply
> error: patch failed: src/net/szym/barnacle/BarnacleService.java:301
> error: src/net/szym/barnacle/BarnacleService.java: patch does not apply
> error: patch failed: src/net/szym/barnacle/SettingsActivity.java:28
> error: src/net/szym/barnacle/SettingsActivity.java: patch does not apply
> 
> 
> On May 11, 2012, at 2:15 PM, Will Hawkins wrote:
> 
"
403,Commotion-dev, Change to adhoc_ patch,"Fri, 11 May 2012 15:10:32 -0400",-0400,Will Hawkins,"Try these. These are format-patch from master head'd at 008d861. There
is a patch (001) but I am not shipping that to you because it duplicates
what you already committed directly to the olsrd git repo. Let me know
if these patches work.

Once we get these applied, I will blow away everything that I have
locally and get sync'd up to the master on the
code.commotionwireless.net site so that this is easier going forward.

Will

On 05/11/2012 02:44 PM, Will Hawkins wrote:
> Sure. Just a quick question: The master from which repo?
> 
> On 05/11/2012 02:36 PM, Hans-Christoph Steiner wrote:
"
404,Commotion-dev, Change to adhoc_ patch,"Fri, 11 May 2012 16:52:09 -0400",-0400,Hans-Christoph Steiner,"
commotion-android.  I don't use github.com/guardianproject/olsr-mesh-tether any more, its just there to point people to the new commotion-android repo.

.hc

On May 11, 2012, at 2:44 PM, Will Hawkins wrote:

> Sure. Just a quick question: The master from which repo?
> 
> On 05/11/2012 02:36 PM, Hans-Christoph Steiner wrote:
"
405,Commotion-dev, Change to adhoc_ patch,"Fri, 11 May 2012 17:07:46 -0400",-0400,Hans-Christoph Steiner,"
Ok, those worked, I rebased #3 and #4 into a single commit and editing the commit message.  I pushed them to commotion-android.

.hc

On May 11, 2012, at 3:10 PM, Will Hawkins wrote:

> Try these. These are format-patch from master head'd at 008d861. There
> is a patch (001) but I am not shipping that to you because it duplicates
> what you already committed directly to the olsrd git repo. Let me know
> if these patches work.
> 
> Once we get these applied, I will blow away everything that I have
> locally and get sync'd up to the master on the
> code.commotionwireless.net site so that this is easier going forward.
> 
> Will
> 
> On 05/11/2012 02:44 PM, Will Hawkins wrote:
"
406,Commotion-dev, app name and Java package name for Android?,"Fri, 11 May 2012 17:07:48 -0400",-0400,Hans-Christoph Steiner,"
The Java package name needs to change for the current OLSRMeshTether app.  Any ideas for a new name?  This would also be related to the name of the app itself. At the very least it should be something based on net.commotionwireless.  This is the current idea I have:

app name: MeshTether
java package: net.commotionwireless.meshtether

""wifi tether"" is a whole genre of Android apps, so this would link the 
mesh idea to that genre, since its quite close in concept

.hc
"
407,Commotion-dev, static BSSID?,"Sat, 12 May 2012 11:36:12 +0930",+0930,Jeremy Lakeman,"I propose that the BSSID is generated as a hash of the SSID. This way
each mesh network will have a unique, but static BSSID without needing
the user to know it.

On Sat, May 12, 2012 at 3:33 AM, Hans-Christoph Steiner
<hans at guardianproject.info> wrote:
>
> The trickiest thing for the user of the OlsrMeshTether app remains the ad-hoc network associating. ?If a bunch of phones are starting up at the same time, they can easily start associating with themselves in clusters. ?Then there is multiple meshes that can't talk to each other.
>
> It seems a simple solution to this is to just hard-code the BSSID for Commotion in general as a default, then allow people to change this if they really want to. ?I propose using CC:CC:CC:CC:CC:CC as the static BSSID.
>
> Is there any reason why we wouldn't want to use a static BSSID as the default?
>
> .hc
> _______________________________________________
> Commotion-dev mailing list
> Commotion-dev at lists.chambana.net
> http://lists.chambana.net/mailman/listinfo/commotion-dev
"
408,Commotion-dev, static BSSID?,"Sat, 12 May 2012 13:57:58 -0400",-0400,Hans-Christoph Steiner,"
That's a really nice, tight idea.  I like it.  Do you have an algorithm for it yet?

.hc

On May 11, 2012, at 10:06 PM, Jeremy Lakeman wrote:

> I propose that the BSSID is generated as a hash of the SSID. This way
> each mesh network will have a unique, but static BSSID without needing
> the user to know it.
> 
> On Sat, May 12, 2012 at 3:33 AM, Hans-Christoph Steiner
> <hans at guardianproject.info> wrote:
"
409,Commotion-dev, static BSSID?,"Sun, 13 May 2012 10:32:40 +0930",+0930,Jeremy Lakeman,"No, we haven't chosen a hash function at all.

On Sun, May 13, 2012 at 3:27 AM, Hans-Christoph Steiner
<hans at guardianproject.info> wrote:
>
> That's a really nice, tight idea. ?I like it. ?Do you have an algorithm for it yet?
>
> .hc
>
> On May 11, 2012, at 10:06 PM, Jeremy Lakeman wrote:
>
"
410,Commotion-dev, static BSSID?,"Sat, 12 May 2012 21:57:05 -0400",-0400,Josh King,"BSSID in an ad-hoc network definitely should be statically set in order 
to avoid network cell partitioning problems. I remember that hashing 
the SSID was a proposed solution for this in the madwifi driver, but I 
don't know if it was ever implemented (I vaguely recall some objection 
to this as a bad idea, but I cannot for the life of me find the 
reference to that argument, or think myself of why it might not be a 
good idea). In any event, there's an old patch posted for the madwifi 
driver that provides some sample code that could provide some guidance 
w/ respect to hashing:

http://permalink.gmane.org/gmane.linux.drivers.madwifi.devel/4787

On Sat 12 May 2012 09:02:40 PM EDT, Jeremy Lakeman wrote:
> No, we haven't chosen a hash function at all.
>
> On Sun, May 13, 2012 at 3:27 AM, Hans-Christoph Steiner
> <hans at guardianproject.info> wrote:
"
411,Commotion-dev, static BSSID?,"Sat, 12 May 2012 22:08:25 -0400",-0400,Hans-Christoph Steiner,"
My guess is that this is not a good idea to include in the madwifi driver, since it goes against how the Ad-hoc standard is supposed to work, and it would hinder interoperability with other implementations outside of madwifi (other Linux drivers, Windows, BSD, Mac OS X, etc.)

But for mesh use, this makes perfect sense from what I can see since more mesh nodes on the same SSID mean a better network, versus with standard Ad-hoc, multiple networks with the same SSID would mean interference, both on the wifi level, and things like multiple DHCP servers, etc.

.hc

On May 12, 2012, at 9:57 PM, Josh King wrote:

> BSSID in an ad-hoc network definitely should be statically set in order 
> to avoid network cell partitioning problems. I remember that hashing 
> the SSID was a proposed solution for this in the madwifi driver, but I 
> don't know if it was ever implemented (I vaguely recall some objection 
> to this as a bad idea, but I cannot for the life of me find the 
> reference to that argument, or think myself of why it might not be a 
> good idea). In any event, there's an old patch posted for the madwifi 
> driver that provides some sample code that could provide some guidance 
> w/ respect to hashing:
> 
> http://permalink.gmane.org/gmane.linux.drivers.madwifi.devel/4787
> 
> On Sat 12 May 2012 09:02:40 PM EDT, Jeremy Lakeman wrote:
"
412,Commotion-dev, app name and Java package name for Android?,"Mon, 14 May 2012 09:45:10 -0400",-0400,Will Hawkins,"Hans,

This seems reasonable to me, but I cannot speak for everyone. Let's wait
to hear what other people have to say before making a final decision.

Will

On 05/11/2012 05:07 PM, Hans-Christoph Steiner wrote:
> 
> The Java package name needs to change for the current OLSRMeshTether app.  Any ideas for a new name?  This would also be related to the name of the app itself. At the very least it should be something based on net.commotionwireless.  This is the current idea I have:
> 
> app name: MeshTether
> java package: net.commotionwireless.meshtether
> 
> ""wifi tether"" is a whole genre of Android apps, so this would link the 
> mesh idea to that genre, since its quite close in concept
> 
> .hc
> _______________________________________________
> Commotion-dev mailing list
> Commotion-dev at lists.chambana.net
> http://lists.chambana.net/mailman/listinfo/commotion-dev
> 

"
413,Commotion-dev, app name and Java package name for Android?,"Mon, 14 May 2012 09:58:00 -0400",-0400,Josh King,"Hi Hans,

This sounds great to me! As you said, it fits in with the naming scheme 
of other tether apps.

On Mon 14 May 2012 09:45:10 AM EDT, Will Hawkins wrote:
> Hans,
>
> This seems reasonable to me, but I cannot speak for everyone. Let's wait
> to hear what other people have to say before making a final decision.
>
> Will
>
> On 05/11/2012 05:07 PM, Hans-Christoph Steiner wrote:
"
414,Commotion-dev, app name and Java package name for Android?,"Mon, 14 May 2012 12:42:28 -0400",-0400,Nathan of Guardian,"
"
415,Commotion-dev, app name and Java package name for Android?,"Mon, 14 May 2012 12:44:16 -0400",-0400,Will Hawkins,
416,Commotion-dev, app name and Java package name for Android?,"Mon, 14 May 2012 12:59:24 -0400",-0400,Hans-Christoph Steiner,"
On May 14, 2012, at 12:44 PM, Will Hawkins wrote:

> "
417,Commotion-dev, DNS Update,"Mon, 14 May 2012 16:22:02 -0400",-0400,Will Hawkins,"Hello all!

I just wanted to give everyone an update on what's going on here: I am
working on adding capability to the client to handle DNS entries
distributed in the mesh (via olsr nameservice plugin). Because Android's
/etc/hosts file is on the readonly file system, simply telling olsrd to
write out an /etc/hosts file (like it would normally do on a *nix host)
does not work.

So, I cross-compiled a small (300k) DNS server that the app invokes when
the user connects to the mesh. This server answers queries by first
looking for an answer in an /etc/hosts-formatted file. If there are no
matches, the DNS server forwards the request.

In my testing it works fairly well. I am still integrating it into the
build but I wanted to give everyone an update.

Talk to you all soon!
Will
"
418,Commotion-dev, static BSSID?,"Tue, 15 May 2012 10:12:23 -0400",-0400,Hans-Christoph Steiner,"
Aaron Kaplan of olsr.org pointed out something: the generated, static BSSID should also take into account the wifi channel that the mesh is running on so that there isn't two conflicting mesh networks with the same ESSID/BSSID.  So really this should be a hash of the ESSID and the channel.

.hc

On May 12, 2012, at 10:08 PM, Hans-Christoph Steiner wrote:

> 
> My guess is that this is not a good idea to include in the madwifi driver, since it goes against how the Ad-hoc standard is supposed to work, and it would hinder interoperability with other implementations outside of madwifi (other Linux drivers, Windows, BSD, Mac OS X, etc.)
> 
> But for mesh use, this makes perfect sense from what I can see since more mesh nodes on the same SSID mean a better network, versus with standard Ad-hoc, multiple networks with the same SSID would mean interference, both on the wifi level, and things like multiple DHCP servers, etc.
> 
> .hc
> 
> On May 12, 2012, at 9:57 PM, Josh King wrote:
> 
"
419,Commotion-dev, DNS Update,"Tue, 15 May 2012 12:09:57 -0400",-0400,Hans-Christoph Steiner,"
Sounds good.  Is this setup meant to be only for Android or other platforms too?  I ask because it'll probably be easier to manage a pure Java DNS server as an Android Service than adding another C binary.

As for writing out a non-standard file like /etc/hosts-formatted, if you are writing a custom file, then it should go into the app's file hierarchy.  It is important to avoid touching the filesystem as much as possible.  This file could go into /data/data/net.szym.barnacle/app_bin or we could create ...../app_etc or something like that.

.hc

On May 14, 2012, at 4:22 PM, Will Hawkins wrote:

> Hello all!
> 
> I just wanted to give everyone an update on what's going on here: I am
> working on adding capability to the client to handle DNS entries
> distributed in the mesh (via olsr nameservice plugin). Because Android's
> /etc/hosts file is on the readonly file system, simply telling olsrd to
> write out an /etc/hosts file (like it would normally do on a *nix host)
> does not work.
> 
> So, I cross-compiled a small (300k) DNS server that the app invokes when
> the user connects to the mesh. This server answers queries by first
> looking for an answer in an /etc/hosts-formatted file. If there are no
> matches, the DNS server forwards the request.
> 
> In my testing it works fairly well. I am still integrating it into the
> build but I wanted to give everyone an update.
> 
> Talk to you all soon!
> Will
> _______________________________________________
> Commotion-dev mailing list
> Commotion-dev at lists.chambana.net
> http://lists.chambana.net/mailman/listinfo/commotion-dev
> 


"
420,Commotion-dev, DNS Update,"Tue, 15 May 2012 12:18:33 -0400",-0400,Nathan of Guardian,"On 05/14/2012 04:22 PM, Will Hawkins wrote:
> I just wanted to give everyone an update on what's going on here: I am
> working on adding capability to the client to handle DNS entries
> distributed in the mesh (via olsr nameservice plugin).
Is this being tracked by a ticket on the Commotion dev site? I am all
for rapid innovation, but I think we need to keep track of both bugs and
new feature efforts, and redmine is great way to do that. Pushing
discussion of a feature like this to a relevant ticket is a better way
to keep track of decisions than on the broader list.

+n

"
421,Commotion-dev, DNS Update,"Tue, 15 May 2012 13:22:08 -0400",-0400,Will Hawkins,"Thanks, Nathan, that's a great idea. I will make a feature request on
redmine and we can take this discussion there.

Will

On 05/15/2012 12:18 PM, Nathan of Guardian wrote:
> On 05/14/2012 04:22 PM, Will Hawkins wrote:
"
422,Commotion-dev, DNS Update,"Tue, 15 May 2012 13:25:20 -0400",-0400,Will Hawkins,"Thanks for this Hans.

This setup is meant now only for Android, but it could be useful for
other platforms that do not readily support /etc/hosts-formatted files.
In all honesty I never considered a Java DNS implementation that could
simply run in a separate thread. That is something that I will
definitely look into.

As for the files themselves, these do go into the app-local data
directories. The installation definitely does not pollute the OS file
system beyond that. I'm sorry if there was confusion in my previous
email regarding that point.

Will

On 05/15/2012 12:09 PM, Hans-Christoph Steiner wrote:
> 
> Sounds good.  Is this setup meant to be only for Android or other platforms too?  I ask because it'll probably be easier to manage a pure Java DNS server as an Android Service than adding another C binary.
> 
> As for writing out a non-standard file like /etc/hosts-formatted, if you are writing a custom file, then it should go into the app's file hierarchy.  It is important to avoid touching the filesystem as much as possible.  This file could go into /data/data/net.szym.barnacle/app_bin or we could create ...../app_etc or something like that.
> 
> .hc
> 
> On May 14, 2012, at 4:22 PM, Will Hawkins wrote:
> 
"
423,Commotion-dev, DNS Update,"Tue, 15 May 2012 15:30:01 -0400",-0400,Will Hawkins,"You can now find discussion of this item on Redmine in the
commotion-android project under Feature #300.

https://code.commotionwireless.net/issues/300

Will

On 05/15/2012 01:25 PM, Will Hawkins wrote:
> Thanks for this Hans.
> 
> This setup is meant now only for Android, but it could be useful for
> other platforms that do not readily support /etc/hosts-formatted files.
> In all honesty I never considered a Java DNS implementation that could
> simply run in a separate thread. That is something that I will
> definitely look into.
> 
> As for the files themselves, these do go into the app-local data
> directories. The installation definitely does not pollute the OS file
> system beyond that. I'm sorry if there was confusion in my previous
> email regarding that point.
> 
> Will
> 
> On 05/15/2012 12:09 PM, Hans-Christoph Steiner wrote:
"
424,Commotion-dev, DNS Update,"Wed, 16 May 2012 13:01:16 -0400",-0400,Will Hawkins,"I uploaded a set of patches to redmine that should implement this.
Please take a look at your convenience and provide feedback. I am eager
to hear what you think.

To get the new feature, follow the instructions in the README (basically
update android.env and run ./build_external.sh).

As an overview, here's how the new dns setup works:

On connection to the mesh,
1. the user's DNS server preference is taken from the preferences and
stashed in app_bin/resolv.conf
2. The system-wide dns server is set to 127.0.0.1
3. adsuck (the name of the dns server binary) is launched. Its pid is
stored in the app_bin/adsuck.pid file.
4. olsrd is started with a properly configured nameservice plug-in.
At this point, adsuck is now ready to do .mesh -> address translations.

When olsrd receives an updated DNS entry,
1. The mapping is automatically reflected in
app_bin/chroot/hosts.android.small.
2. The adsuck process (whose pid is found in app_bin/adsuck.pid) is
signalled with HUP to indicate that there were changes to its data source.
3. adsuck rereads app_bin/chroot/hosts.android.small.

On disconnection from the mesh,
1. The application resets the system-wide dns server to what it was
before connecting.

Please let me know if this makes sense. I am eager to get feedback on
the approach and how it works. It's pretty cool to be able to go to
http://commotion-xxxx.mesh from the Android browser.

Will


On 05/15/2012 03:30 PM, Will Hawkins wrote:
> You can now find discussion of this item on Redmine in the
> commotion-android project under Feature #300.
> 
> https://code.commotionwireless.net/issues/300
> 
> Will
> 
> On 05/15/2012 01:25 PM, Will Hawkins wrote:
"
425,Commotion-dev, app name and Java package name for Android?,"Wed, 16 May 2012 14:41:23 -0400",-0400,Andrew Reynolds,"Is there any reason not to call the app Commotion (or some variant)?
That would be the most consistent with the rest of the project.

-andrew

On 05/14/2012 09:45 AM, Will Hawkins wrote:
> Hans,
> 
> This seems reasonable to me, but I cannot speak for everyone. Let's
> wait to hear what other people have to say before making a final
> decision.
> 
> Will
> 
> On 05/11/2012 05:07 PM, Hans-Christoph Steiner wrote:
"
426,Commotion-dev, app name and Java package name for Android?,"Wed, 16 May 2012 14:54:34 -0400",-0400,Sascha Meinrath,"How about Commotion-BETA or Commotion-ALPHA -- something that is *really* clear
that this is a first run.

--Sascha

On 05/16/2012 02:41 PM, Andrew Reynolds wrote:
> Is there any reason not to call the app Commotion (or some variant)?
> That would be the most consistent with the rest of the project.
> 
> -andrew
> 
> On 05/14/2012 09:45 AM, Will Hawkins wrote:
"
427,Commotion-dev, app name and Java package name for Android?,"Wed, 16 May 2012 15:11:30 -0400",-0400,Nathan of Guardian,"On 05/16/2012 02:41 PM, Andrew Reynolds wrote:
> Is there any reason not to call the app Commotion (or some variant)?
> That would be the most consistent with the rest of the project.

I think there was some idea that Commotion was the umbrella brand, while
this app was just one feature or instance of that.

Commotion MeshConnect, perhaps?

I think also, from the pure open-source, open-protocol side of things,
we are still thinking of this as a generic OLSRd Android app, that just
so happens to work with Commotion-based mesh quite well.

On 05/16/2012 02:54 PM, Sascha Meinrath wrote:
> How about Commotion-BETA or Commotion-ALPHA -- something that is
*really* clear
> that this is a first run.

We can change the label of the app outside of the formal name of the app
within the code itself. In addition, we have a standard EULA Mechanism
that pops up on first run, which can be used to inform the user of the
current state of the software.

+n

"
428,Commotion-dev, app name and Java package name for Android?,"Wed, 16 May 2012 15:18:44 -0400",-0400,Josh King,"I would be fine with either Commotion MeshTether or Commotion 
MeshConnect. You're right that it's intended as an umbrella ""brand,"" so 
""Commotion Android"" would include several different tools, of which 
this would be one.

On Wed 16 May 2012 03:11:30 PM EDT, Nathan of Guardian wrote:
> On 05/16/2012 02:41 PM, Andrew Reynolds wrote:
"
429,Commotion-dev, app name and Java package name for Android?,"Wed, 16 May 2012 15:32:30 -0400",-0400,Will Hawkins,"I like Commotion MeshConnect. This likely means that we would put the
package under the net.commotionwireless.meshconnect package name?

Will

On 05/16/2012 03:18 PM, Josh King wrote:
> I would be fine with either Commotion MeshTether or Commotion 
> MeshConnect. You're right that it's intended as an umbrella ""brand,"" so 
> ""Commotion Android"" would include several different tools, of which 
> this would be one.
> 
> On Wed 16 May 2012 03:11:30 PM EDT, Nathan of Guardian wrote:
"
430,Commotion-dev, app name and Java package name for Android?,"Wed, 16 May 2012 15:57:20 -0400",-0400,Hans-Christoph Steiner,"
This works for me.  Anyone object to this arrangement:

Official name: Commotion MeshConnect
APK/app name: MeshConnect
Java package: net.commotionwireless.meshconnect

The Commotion branding can be conveyed in the icon and design also.

.hc


On May 16, 2012, at 3:32 PM, Will Hawkins wrote:

> I like Commotion MeshConnect. This likely means that we would put the
> package under the net.commotionwireless.meshconnect package name?
> 
> Will
> 
> On 05/16/2012 03:18 PM, Josh King wrote:
"
431,Commotion-dev, app name and Java package name for Android?,"Wed, 16 May 2012 16:03:51 -0400",-0400,Andrew Reynolds,"Works for me. Thanks guys.

-andrew

On 05/16/2012 03:57 PM, Hans-Christoph Steiner wrote:
> 
> This works for me.  Anyone object to this arrangement:
> 
> Official name: Commotion MeshConnect
> APK/app name: MeshConnect
> Java package: net.commotionwireless.meshconnect
> 
> The Commotion branding can be conveyed in the icon and design also.
> 
> .hc
> 
> 
> On May 16, 2012, at 3:32 PM, Will Hawkins wrote:
> 
"
432,Commotion-dev, MeshConnect UX Notes,"Wed, 16 May 2012 16:34:42 -0400",-0400,Andrew Reynolds,"I have some notes describing my initial impressions and experience with
the Commotion MeshConnect app. On the whole it was a positive
experience. Nice work, guys.

Those of you working on the app or general usability issues, where do
you want those notes stored? Most of them would translate to feature
requests if you want them in the issue tracker, but I could easily write
out a long form description as well.

-andrew

"
433,Commotion-dev, MeshConnect UX Notes,"Wed, 16 May 2012 16:42:31 -0400",-0400,Hans-Christoph Steiner,"
That UI is very rough, and I have sketches of the UI that we've worked out in my notebook that need to be converted to digital form.  Sending rough notes to this list is probably a good place to start.

.hc

On May 16, 2012, at 4:34 PM, Andrew Reynolds wrote:

> I have some notes describing my initial impressions and experience with
> the Commotion MeshConnect app. On the whole it was a positive
> experience. Nice work, guys.
> 
> Those of you working on the app or general usability issues, where do
> you want those notes stored? Most of them would translate to feature
> requests if you want them in the issue tracker, but I could easily write
> out a long form description as well.
> 
> -andrew
> 
> _______________________________________________
> Commotion-dev mailing list
> Commotion-dev at lists.chambana.net
> http://lists.chambana.net/mailman/listinfo/commotion-dev


"
434,Commotion-dev, Possible hardware defect with POE passthru on,"Wed, 16 May 2012 15:54:05 -0500",-0500,Ben West,"I observed a problem on a recent generation 00:27:... Nanostation M5
(mfg date ~August 2011) bricking itself upon enabling the POE
passthrough feature (via firmware) shortly after boot.

The unit did not become bricked simply from flashing it, but rather
failed upon the passthrough enable.  Also, nothing was connected to
its secondary LAN port at the time; it was sitting on the bench.

I have not experienced this failure upon enabling the POE passthru
feature, with stock firmware and otherwise, on older NSM5 units.
Maybe there was a BOM change.

I found recent reports of other UBNT users experiencing the same
failure enabling the POE passthrough feature on Nanostation M2 and
M5s, when using stock firmware too:
https://forum.ubnt.com/showthread.php?p=270549

The suggested work-around, which I have so far tested successfully, is
to NOT enable POE passthrough, presumably with any firmware.  Rather,
swap the Main and Secondary LAN ports, i.e. so that whatever secondary
POE device is connected to Main.  This will have the effect of the 2nd
POE device being always on.

This work-around comes with caveat of possibly reduced power noise
filtering, since the unit will not be receiving its power from the
Main port.

Also, do please note UBNT's warranty policy of not supporting 3rd
party firmware, even despite their wiki providing instructions for
flashing OpenWRT onto their products:
http://www.ubnt.com/support/warranty

(So, recommendation is to prove out all units with UBNT stock firmware
first, especially POE passthru, to screen for any problems.)

-- 
Ben West
me at benwest.name

"
435,Commotion-dev, commotion hackday on Friday,"Wed, 16 May 2012 17:25:24 -0400",-0400,Josh King,"Hey all,

We're having an unofficial Commotion hackday this Friday to work on
coding, documentation, and discussion. I would encourage everyone to
hang out in the #oti channel on freenode if you're interested in
participating remotely, and feel free to suggest any topics of
discussion or projects to work on for that day. We plan on trying to
have one of these a couple of times a month. Thanks!
-- 
Josh King

""I am an Anarchist not because I believe Anarchism is the final goal,
but because there is no such thing as a final goal."" -Rudolf Rocker

"
436,Commotion-dev, commotion hackday on Friday,"Wed, 16 May 2012 16:27:06 -0500",-0500,Ben West,"Neat!  What times of day (and relevant timezones) for the hackathon?

On Wed, May 16, 2012 at 4:25 PM, Josh King <jking at chambana.net> wrote:
> Hey all,
>
> We're having an unofficial Commotion hackday this Friday to work on
> coding, documentation, and discussion. I would encourage everyone to
> hang out in the #oti channel on freenode if you're interested in
> participating remotely, and feel free to suggest any topics of
> discussion or projects to work on for that day. We plan on trying to
> have one of these a couple of times a month. Thanks!
> --
> Josh King
>
> ""I am an Anarchist not because I believe Anarchism is the final goal,
> but because there is no such thing as a final goal."" -Rudolf Rocker
>
>
> _______________________________________________
> Commotion-dev mailing list
> Commotion-dev at lists.chambana.net
> http://lists.chambana.net/mailman/listinfo/commotion-dev
"
437,Commotion-dev, commotion hackday on Friday,"Wed, 16 May 2012 17:32:47 -0400",-0400,Josh King,"We're pretty much going 9-5 EST, though of course no one is obligated 
to be online for any particular chunk of time.

On Wed 16 May 2012 05:27:06 PM EDT, Ben West wrote:
> Neat!  What times of day (and relevant timezones) for the hackathon?
>
> On Wed, May 16, 2012 at 4:25 PM, Josh King <jking at chambana.net> wrote:
"
438,Commotion-dev, commotion hackday on Friday,"Thu, 17 May 2012 16:00:04 -0400",-0400,Hans-Christoph Steiner,"
I'll be hacking on Commotion for android all day tomorrow here in NYC!

.hc

On May 16, 2012, at 5:32 PM, Josh King wrote:

> We're pretty much going 9-5 EST, though of course no one is obligated 
> to be online for any particular chunk of time.
> 
> On Wed 16 May 2012 05:27:06 PM EDT, Ben West wrote:
"
439,Commotion-dev, static BSSID?,"Thu, 17 May 2012 17:05:48 +0200",+0200,L. Aaron Kaplan,"
On May 13, 2012, at 3:57 AM, Josh King wrote:

> BSSID in an ad-hoc network definitely should be statically set in order 
> to avoid network cell partitioning problems. I remember that hashing 

ACK!

> the SSID was a proposed solution for this in the madwifi driver, but I 
> don't know if it was ever implemented (I vaguely recall some objection 
> to this as a bad idea, but I cannot for the life of me find the 
> reference to that argument, or think myself of why it might not be a 
> good idea). In any event, there's an old patch posted for the madwifi 
> driver that provides some sample code that could provide some guidance 
> w/ respect to hashing:
> 

One thing we came across in our Vienna testing days (which actually given a second thought is pretty obvious):
different ESSIDs, same BSSID but different channels still results in some roque packets from the other channel to arrive at the network stack.

Therefore - for multi-channel setups - I'd recommend:
* different channel implies different BSSIDs 
* keep BSSIDs static

Most drivers can still cope with (different ESSID, same BSSID, same channel)
However, some drivers are known to get confused in this setup.

Hope this info helps,
Aaron.
> 

"
440,Commotion-dev, static BSSID?,"Thu, 17 May 2012 17:16:53 +0200",+0200,L. Aaron Kaplan,"
On May 13, 2012, at 4:08 AM, Hans-Christoph Steiner wrote:

> 
> My guess is that this is not a good idea to include in the madwifi driver, since it goes against how the Ad-hoc standard is supposed to work, and it would hinder interoperability with other implementations outside of madwifi (other Linux drivers, Windows, BSD, Mac OS X, etc.)
> 
> But for mesh use, this makes perfect sense from what I can see since more mesh nodes on the same SSID mean a better network, versus with standard Ad-hoc, multiple networks with the same SSID would mean interference, both on the wifi level, and things like multiple DHCP servers, etc.
> 
Maybe we mean the same thing but it came across differently or I am simply nit-picking now.
But as it is written here:
""what I can see since more mesh nodes on the same SSID mean a better network"" 

is  not true

I would say the more nodes on *different* channels but somehow connected to each other (LAN), the better the network.

Use cable whenever you can :) It keeps those darn radio waves contained hehe.

I think I have a very very neat solution for this. Can show it to you next time we meet.

a.

> .hc
> 
> On May 12, 2012, at 9:57 PM, Josh King wrote:
> 
"
441,Commotion-dev, static BSSID?,"Thu, 17 May 2012 16:08:37 -0400",-0400,Hans-Christoph Steiner,"
On May 17, 2012, at 11:05 AM, L. Aaron Kaplan wrote:

> 
> On May 13, 2012, at 3:57 AM, Josh King wrote:
> 
"
442,Commotion-dev, static BSSID?,"Thu, 17 May 2012 16:12:19 -0400",-0400,Hans-Christoph Steiner,"
If you have multiple mesh nodes radiating on the same frequency in the same area, so that the radio waves overlap, is there ever a time with an OLSR mesh where it would be preferable to have those nodes on separate BSSIDs?  That's the case I'm talking about.

For Ad-hoc networks, if your neighbor happens to be radiating on the same frequency, that doesn't mean you want to your ad-hoc network to merge with theirs.  That would cause confusion with DHCP servers, different IP ranges and devices on the network, different internet connections, etc.

.hc

On May 17, 2012, at 11:16 AM, L. Aaron Kaplan wrote:

> Maybe we mean the same thing but it came across differently or I am simply nit-picking now.
> But as it is written here:
> ""what I can see since more mesh nodes on the same SSID mean a better network"" 
> 
> is  not true
> 
> I would say the more nodes on *different* channels but somehow connected to each other (LAN), the better the network.
> 
> Use cable whenever you can :) It keeps those darn radio waves contained hehe.
> 
> I think I have a very very neat solution for this. Can show it to you next time we meet.
> 
> a.
> 
> On May 13, 2012, at 4:08 AM, Hans-Christoph Steiner wrote:
> 
"
443,Commotion-dev, commotion hackday on Friday,"Thu, 17 May 2012 16:14:26 -0400",-0400,Nathan of Guardian,"On 05/17/2012 04:00 PM, Hans-Christoph Steiner wrote:
> I'll be hacking on Commotion for android all day tomorrow here in NYC!

... and I will be at his side!

We just got SpotSync (aka IOCipherServer, our Android-based HTTP/S
web&file server) working between two meshed devices for the first time.
Going to try and get full storage encryption and seamless syncing of a
specified folder going during the hackday.

https://github.com/guardianproject/iocipherserver

+n

"
444,Commotion-dev, static BSSID?,"Thu, 17 May 2012 22:23:20 +0200",+0200,L. Aaron Kaplan,"
On May 17, 2012, at 10:12 PM, Hans-Christoph Steiner wrote:

> 
> If you have multiple mesh nodes radiating on the same frequency in the same area, so that the radio waves overlap, is there ever a time with an OLSR mesh
> where it would be preferable to have those nodes on separate BSSIDs?  That's the case I'm talking about.
> 
Yes, you actually could think about that. 
Why? Because you limit the number of neighbors this way. And then you get smaller OLSR  packets.

But in general: if the density of nodes on the same frequencies is too high, then you are in trouble. No matter which protocol.

> For Ad-hoc networks, if your neighbor happens to be radiating on the same frequency, that doesn't mean you want to your ad-hoc network to merge with theirs.  
Exactly!

> That would cause confusion with DHCP servers, different IP ranges and devices on the network, different internet connections, etc.
> 
ACK.

Ok, maybe I misunderstood you and was just nit-picking on one particular sentence.

> .hc
> 
> On May 17, 2012, at 11:16 AM, L. Aaron Kaplan wrote:
> 
"
445,Commotion-dev, static BSSID?,"Fri, 18 May 2012 17:04:42 -0400",-0400,Sean McIntyre,"Hey folks,

Talked about this with Hans today. We came up with the following algorithm:

BSSID = MD4(ESSID)[0:4] ++ channel 2-byte integer

This is read in English as: ""The six byte BSSID is the first four
bytes of the MD4 hash of ESSID concatenated with the lowest two bytes
of the channel.""

The rationale for this is that MD4 is uniformly distributed, and the
first four bytes of MD4 are presumably uniformly distributed. (Should
be distributed enough.) Then add on the bytes of the channel so that
same ESSIDs don't collide. MD4 was an arbitrary function choice, and
security is not an issue. :)

I found a public domain implementation of MD4
<http://openwall.info/wiki/people/solar/software/public-domain-source-code/md4>
and made a simple get_bssid() function the same as the above algorithm
(attached).

Signature for get_bssid:

get_bssid(char *essid, unsigned int channel, unsigned char *bssid) //
(result goes in bssid)

Not sure how to add this in, so hope one of you goes ahead and does
that, or let me know how I can be of further service.

Sean

On Thu, May 17, 2012 at 4:23 PM, L. Aaron Kaplan <aaron at lo-res.org> wrote:
>
> On May 17, 2012, at 10:12 PM, Hans-Christoph Steiner wrote:
>
"
446,Commotion-dev, Name space conflict w/ MeshConnect,"Fri, 18 May 2012 18:13:06 -0500",-0500,Ben West,"Hi All,

Not sure how set in stone the name ""MeshConnect"" is for the app under
discussion here, but I realize now there is already a mesh dashboard
project called ""MeshConnect,"" derivative of OrangeMesh and compatible
with ROBIN/Cloudtrax nodes.  (Indeed, I actually deployed MeshConnect
for a client last year.)

http://wifimesh.trigmax.com/en/

But it looks like its user forum have been quiet for over a year
(which the last post being from me :P ) .
http://robin.forumup.it/forum-60-robin.html

On Wed, May 16, 2012 at 3:34 PM, Andrew Reynolds
<andrew at opentechinstitute.org> wrote:
> I have some notes describing my initial impressions and experience with
> the Commotion MeshConnect app. On the whole it was a positive
> experience. Nice work, guys.
>
> Those of you working on the app or general usability issues, where do
> you want those notes stored? Most of them would translate to feature
> requests if you want them in the issue tracker, but I could easily write
> out a long form description as well.
>
> -andrew
>
>
> _______________________________________________
> Commotion-dev mailing list
> Commotion-dev at lists.chambana.net
> http://lists.chambana.net/mailman/listinfo/commotion-dev
"
447,Commotion-dev, WPA-psk now working in adhoc mode for OpenWRT trunk,"Sat, 19 May 2012 19:03:26 -0500",-0500,Ben West,"Has anyone else been able to confirm this?  This would be a wonderful surprise.

https://dev.openwrt.org/ticket/9190
(See reply by nbd from earlier today, saying that WPA-psk works in
ad-hoc mode since end of March)

On Sat, Apr 14, 2012 at 7:44 AM, Paul Bame <bame at riverrock.org> wrote:
> ""KleeQ
> ? ?KleeQ enables secure group communications for users of
> ? ?low-connectivity ad-hoc networks. It provides authentication,
> ? ?encryption and forward secrecy for a communicating group.
>
> ? ?http://crysp.uwaterloo.ca/software/
>
> (no idea how far along, etc, it is) -- one of several interesting
> projects listed at that U-Waterloo web site.
>
>
> _______________________________________________
> Commotion-dev mailing list
> Commotion-dev at lists.chambana.net
> http://lists.chambana.net/mailman/listinfo/commotion-dev
"
448,Commotion-dev," Compiled images for ath5k, ar71xx,","Mon, 21 May 2012 02:40:17 -0500",-0500,Ben West,"Hi All,

In aftermath from Friday's hackathon, here are recent compiled
Commotion-opewrt images for ath5k and ath9k targets, including the
.config files I used and images for UBNT M and Buffalo devices:
http://info.gowasabi.net/commotion-openwrt/openwrt/

I have so far successfully flashed these devices, and afterwards
telnetted into 192.168.1.20 to configure them:
- a really crusty old FON2100 (openwrt-atheros-root.squashfs and
openwrt-atheros-vmlinux.lzma)
- UBNT Nanostation Loco M2
(openwrt-ar71xx-generic-ubnt-nano-m-squashfs-factory.bin)
- UBNT Bullet M2 (openwrt-ar71xx-generic-ubnt-bullet-m-squashfs-factory.bin)

After telnetting into each device to set a root password, I rebooted
them.  All 3 nodes are now meshing w/ each other (can ping / ssh
between them), confirming basic operation of both the ath5k ad ath9k
drivers.

Do note the ath5k images DO NOT have any luci packages compiled into
the images, but are available as separate *.ipk files at the URL
above.  I did this since the FON has only 16MB RAM, and just the bare
image w/o the web UI leaves less than 1MB in free RAM.  Newer ath5k
devices like the Open Mesh OM1P and Engenius EOC-1650 should have at
least 32MB RAM to handle the web UI.

Finally, leading from discussion on IRC, I added a support ticket
requesting periodic (e.g. nightly or weekly) snapshot builds located
on the code.commotionwireless.net server for popular targets like
ath5k and ar71xx.
https://code.commotionwireless.net/issues/308

-- 
Ben West
me at benwest.name

"
449,Commotion-dev, WPA-psk now working in adhoc mode for OpenWRT,"Mon, 21 May 2012 13:05:00 -0400",-0400,Josh King,"The newest Commotion code actually has support for this; when the mesh
backhaul interface is set to 'secure,' it also sets it to WPA. I
actually have no idea how WPA-PSK is supposed to work in an ad-hoc
network, and I haven't had much luck getting it to work; the nodes go
into WPA2-PSK mode on ad-hoc, but they don't seem to pass packets. More
testing is required.

On 05/19/2012 08:03 PM, Ben West wrote:
> Has anyone else been able to confirm this?  This would be a wonderful surprise.
> 
> https://dev.openwrt.org/ticket/9190
> (See reply by nbd from earlier today, saying that WPA-psk works in
> ad-hoc mode since end of March)
> 
> On Sat, Apr 14, 2012 at 7:44 AM, Paul Bame <bame at riverrock.org> wrote:
"
450,Commotion-dev, headed to DC,"Mon, 21 May 2012 20:31:15 -0400",-0400,Hans-Christoph Steiner,"
I'm on the train to DC right now, for the Internet at Liberty conference.  Sounds like I'm missing the mesh fun at F2C, maybe some of you will also be at this one?  I don't know my schedule yet at the conference, but I hope to drop by OTI while I'm in town. I leave Thursday night.  Morning would probably be easiest for me, any particular time that's good to drop by?

.hc
"
451,Commotion-dev, Name space conflict w/ MeshConnect,"Mon, 21 May 2012 22:48:32 -0400",-0400,Hans-Christoph Steiner,"
Ok... how about back to MeshTether then?

.hc

On May 18, 2012, at 7:13 PM, Ben West wrote:

> Hi All,
> 
> Not sure how set in stone the name ""MeshConnect"" is for the app under
> discussion here, but I realize now there is already a mesh dashboard
> project called ""MeshConnect,"" derivative of OrangeMesh and compatible
> with ROBIN/Cloudtrax nodes.  (Indeed, I actually deployed MeshConnect
> for a client last year.)
> 
> http://wifimesh.trigmax.com/en/
> 
> But it looks like its user forum have been quiet for over a year
> (which the last post being from me :P ) .
> http://robin.forumup.it/forum-60-robin.html
> 
> On Wed, May 16, 2012 at 3:34 PM, Andrew Reynolds
> <andrew at opentechinstitute.org> wrote:
"
452,Commotion-dev, Name space conflict w/ MeshConnect,"Mon, 21 May 2012 22:58:26 -0400",-0400,Josh King,"Sounds good to me!

On Mon 21 May 2012 10:48:32 PM EDT, Hans-Christoph Steiner wrote:
>
> Ok... how about back to MeshTether then?
>
> .hc
>
> On May 18, 2012, at 7:13 PM, Ben West wrote:
>
"
453,Commotion-dev, Name space conflict w/ MeshConnect,"Mon, 21 May 2012 23:02:40 -0400",-0400,Hans-Christoph Steiner,"
Looks like we've already claimed that name in Google space anyhow:

http://www.google.com/search?hl=en&q=mesh+tether

.hc

On May 21, 2012, at 10:58 PM, Josh King wrote:

> Sounds good to me!
> 
> On Mon 21 May 2012 10:48:32 PM EDT, Hans-Christoph Steiner wrote:
"
454,Commotion-dev, Name space conflict w/ MeshConnect,"Mon, 21 May 2012 23:08:50 -0400",-0400,Nathan of Guardian,"On 05/21/2012 11:02 PM, Hans-Christoph Steiner wrote:
> Looks like we've already claimed that name in Google space anyhow:
> 
> http://www.google.com/search?hl=en&q=mesh+tether

Let's just call it ""Commotion MT"", and then let people speculate what it
stands for.

Otherwise, I further recuse myself from this discussion, and turn it
over to the branding team.

+n

"
455,Commotion-dev, Some speed tests for ar71xx and ath5k devices,"Tue, 22 May 2012 00:20:57 -0500",-0500,Ben West,"Here are some results of speed tests I did with the two UBNT M and
FON2100 devices I had sitting around, using the version of the
commotion-openwrt from 5/18/12.  These download speeds were recorded
while connected to the public AP of each node.

I tried a couple variations of this 3-node mesh, one with a Nano Loco
M2 as gateway node (i.e. fastest device) and another with a FON2100 as
gateway (slowest device).  All repeaters were only 1 hop away from the
gateway.

Speed tests (via speedtest.net) with Nano M2 as gateway node
~15Mbit/s download thru Nano Loco M2 public AP (gateway node), which
is prbly the limit of my broadband connection
~10Mbit/s download thru Bullet M2 public AP (repeater node)
~6Mbit/s download thru FON2100 public AP (repeater node)

Speed tests with FON2100 as gateway node
~11Mbit/s download thru FON2100 public AP (gateway node)
~8Mbit/s download thru Bullet M2 public AP (repeater node)
~7.5Mbit/s download thru Nano Loco M2 public AP (repeater node)

There tests were overall quite favorable!  My immediate point of
comparison, the ROBIN mesh firmware based on OpenWRT Kamikaze +
madwifi, would likely only achieve 60-70% of these speeds using ath5k
devices.  Which is awesome!

These tests were done with all devices in the same room, so certainly
not realistic w.r.t. to RSSI.  I tuned the 2 UBNT nodes down to 10dB
output power, but I still saw reported signal strengths in 35-45dB
range.  Real world speeds might actually be better, since having all
the nodes in one room certainly was causing interference.

Note that the version of commotion-openwrt I used didn't appear to
have a working instance of dnsmasq yet, so I performed the following
steps on each node to get basic connectivity from the public AP:

- I manually configured my wifi adapter's IP address to be in the
101.x.x.x range used by the target node's public AP.
- I ran ""/etc/init.d/luci_splash stop"" on each node to kill
(non-working?) splash page.
- I also ran ""/etc/init.d/qos stop"" on each node, even tho qos
supposedly disabled.  Just in case.

-- 
Ben West
me at benwest.name

"
456,Commotion-dev, headed to DC,"Tue, 22 May 2012 09:47:16 -0400",-0400,Josh King,"Hi Hans,

Brian and I at least will be at the Liberty conference, though probably 
for more of Thursday than Wednesday. Not sure about everyone else, but 
I'll be around the office on Wednesday morning most likely, then at the 
conference Wednesday afternoon and Thursday morning. There's also a OTI 
and Public Knowledge meeting about spectrum at NAF on Wednesday 
morning, so that will probably take up a bunch of other peoples' time.

If you're around this afternoon, supposedly MobileActive are going to 
come in to the office and do a demo of their OpenBTS-based Village 
Basestation around 12:30 (though I'll have to jet shortly after their 
demo).

On Mon 21 May 2012 08:31:15 PM EDT, Hans-Christoph Steiner wrote:
>
> I'm on the train to DC right now, for the Internet at Liberty conference.  Sounds like I'm missing the mesh fun at F2C, maybe some of you will also be at this one?  I don't know my schedule yet at the conference, but I hope to drop by OTI while I'm in town. I leave Thursday night.  Morning would probably be easiest for me, any particular time that's good to drop by?
>
> .hc
> _______________________________________________
> Commotion-dev mailing list
> Commotion-dev at lists.chambana.net
> http://lists.chambana.net/mailman/listinfo/commotion-dev
"
457,Commotion-dev, headed to DC,"Tue, 22 May 2012 10:35:12 -0400",-0400,Hans-Christoph Steiner,"
There was a little confusion in my schedule, the developer day turns out is only a dinner, so I'm free until 6pm.  I could come work out of OTI, if that makes sense.

.hc

On May 22, 2012, at 9:47 AM, Josh King wrote:

> Hi Hans,
> 
> Brian and I at least will be at the Liberty conference, though probably 
> for more of Thursday than Wednesday. Not sure about everyone else, but 
> I'll be around the office on Wednesday morning most likely, then at the 
> conference Wednesday afternoon and Thursday morning. There's also a OTI 
> and Public Knowledge meeting about spectrum at NAF on Wednesday 
> morning, so that will probably take up a bunch of other peoples' time.
> 
> If you're around this afternoon, supposedly MobileActive are going to 
> come in to the office and do a demo of their OpenBTS-based Village 
> Basestation around 12:30 (though I'll have to jet shortly after their 
> demo).
> 
> On Mon 21 May 2012 08:31:15 PM EDT, Hans-Christoph Steiner wrote:
"
458,Commotion-dev, headed to DC,"Tue, 22 May 2012 10:38:12 -0400",-0400,Josh King,"Hi Hans,

Sure, if you'd like to. We have room for once, since most people are 
out at F2C ;-)

On Tue 22 May 2012 10:35:12 AM EDT, Hans-Christoph Steiner wrote:
>
> There was a little confusion in my schedule, the developer day turns out is only a dinner, so I'm free until 6pm.  I could come work out of OTI, if that makes sense.
>
> .hc
>
> On May 22, 2012, at 9:47 AM, Josh King wrote:
>
"
459,Commotion-dev, headed to DC,"Tue, 22 May 2012 10:40:02 -0400",-0400,Nathan of Guardian,"On 05/22/2012 09:47 AM, Josh King wrote:
> If you're around this afternoon, supposedly MobileActive are going to 
> come in to the office and do a demo of their OpenBTS-based Village 
> Basestation around 12:30 (though I'll have to jet shortly after their 
> demo).

Curious... you mean Kurtis Heimler from UC Berkeley?

"
460,Commotion-dev, headed to DC,"Tue, 22 May 2012 10:40:48 -0400",-0400,Josh King,"I'd have to track down Katrin's message from last week, but I believe 
so.

On Tue 22 May 2012 10:40:02 AM EDT, Nathan of Guardian wrote:
> On 05/22/2012 09:47 AM, Josh King wrote:
"
461,Commotion-dev," Compiled images for ath5k, ar71xx,","Tue, 22 May 2012 11:11:36 -0500",-0500,Ben West,"Hi All,

I updated the compiled images for ath5k and ar71xx I made after some
further testing yesterday.  These images are compiled from the
commotion-openwrt repo as it existed on 5/18/12.
http://info.gowasabi.net/commotion-openwrt/openwrt/

Recently flashed nodes seemed to complain about missing OLSR plugins,
and I wasn't sure if they were required for operation.

(I had thought I filed an issue on Redmine @
https://code.commotionwireless.net/projects/commotion-openwrt/issues
asking if commotionbase missing some declared dependencies, but it
looks it may have gone missing.)

On Mon, May 21, 2012 at 2:40 AM, Ben West <me at benwest.name> wrote:
> Hi All,
>
> In aftermath from Friday's hackathon, here are recent compiled
> Commotion-opewrt images for ath5k and ath9k targets, including the
> .config files I used and images for UBNT M and Buffalo devices:
> http://info.gowasabi.net/commotion-openwrt/openwrt/
>
> I have so far successfully flashed these devices, and afterwards
> telnetted into 192.168.1.20 to configure them:
> - a really crusty old FON2100 (openwrt-atheros-root.squashfs and
> openwrt-atheros-vmlinux.lzma)
> - UBNT Nanostation Loco M2
> (openwrt-ar71xx-generic-ubnt-nano-m-squashfs-factory.bin)
> - UBNT Bullet M2 (openwrt-ar71xx-generic-ubnt-bullet-m-squashfs-factory.bin)
>
> After telnetting into each device to set a root password, I rebooted
> them. ?All 3 nodes are now meshing w/ each other (can ping / ssh
> between them), confirming basic operation of both the ath5k ad ath9k
> drivers.
>
> Do note the ath5k images DO NOT have any luci packages compiled into
> the images, but are available as separate *.ipk files at the URL
> above. ?I did this since the FON has only 16MB RAM, and just the bare
> image w/o the web UI leaves less than 1MB in free RAM. ?Newer ath5k
> devices like the Open Mesh OM1P and Engenius EOC-1650 should have at
> least 32MB RAM to handle the web UI.
>
> Finally, leading from discussion on IRC, I added a support ticket
> requesting periodic (e.g. nightly or weekly) snapshot builds located
> on the code.commotionwireless.net server for popular targets like
> ath5k and ar71xx.
> https://code.commotionwireless.net/issues/308
>
> --
> Ben West
> me at benwest.name



-- 
Ben West
me at benwest.name

"
462,Commotion-dev, virtualbox and commotion,"Wed, 23 May 2012 22:13:49 -0400",-0400,Sean McIntyre,"Hey folks,

Wrote up my experiences setting up VirtualBox with Commotion today.

http://blog.boxysean.com/2012/05/23/virtualbox-and-commotion-openwrt/

Maybe this should go on the wiki, too. Perhaps on a new page here?
<https://code.commotionwireless.net/projects/commotion/wiki/Development_Notes"
463,Commotion-dev, convincing google to support ad-hoc mode,"Wed, 23 May 2012 23:06:10 -0400",-0400,Hans-Christoph Steiner,"
There are some internal rumblings in Google about making Android support Ad-hoc mode natively.  I think we should support this effort as much as possible, since it'll make mesh on Android work a lot easier.  One concern in Google is whether the hardware universally supports ad-hoc mode, or whether Android would have to make special cases for the hardware that does not support ad-hoc mode.

As far as I know, all wifi hardware that would be included in an Android phone will support ad-hoc mode.  Anyone have any info on this, whether contradicting or supporting this claim?

.hc
"
464,Commotion-dev, convincing google to support ad-hoc mode,"Thu, 24 May 2012 09:08:11 +0400",+0400,Alexander Chemeris,"I heard that this mode on Android will support only a very specific
protocol (don't recall its name) and will not be able to support
something like olsr without rooting. Do you know whether they have
changed their mind and plan to make something more universal?

On Thu, May 24, 2012 at 7:06 AM, Hans-Christoph Steiner
<hans at guardianproject.info> wrote:
>
> There are some internal rumblings in Google about making Android support Ad-hoc mode natively. ?I think we should support this effort as much as possible, since it'll make mesh on Android work a lot easier. ?One concern in Google is whether the hardware universally supports ad-hoc mode, or whether Android would have to make special cases for the hardware that does not support ad-hoc mode.
>
> As far as I know, all wifi hardware that would be included in an Android phone will support ad-hoc mode. ?Anyone have any info on this, whether contradicting or supporting this claim?
>
> .hc
> _______________________________________________
> Commotion-dev mailing list
> Commotion-dev at lists.chambana.net
> http://lists.chambana.net/mailman/listinfo/commotion-dev
"
465,Commotion-dev, convincing google to support ad-hoc mode,"Thu, 24 May 2012 14:43:03 +0930",+0930,Jeremy Lakeman,"You might be thinking about Wifi Direct.
This has previously been touted as a replacement for adhoc networking,
even though it doesn't support any kind of mesh routing.
Plus the sdk interface is similar to bluetooth pairing, setting up a
network always requires user intervention.

On Thu, May 24, 2012 at 2:38 PM, Alexander Chemeris
<alexander.chemeris at gmail.com> wrote:
> I heard that this mode on Android will support only a very specific
> protocol (don't recall its name) and will not be able to support
> something like olsr without rooting. Do you know whether they have
> changed their mind and plan to make something more universal?
>
> On Thu, May 24, 2012 at 7:06 AM, Hans-Christoph Steiner
> <hans at guardianproject.info> wrote:
"
466,Commotion-dev, convincing google to support ad-hoc mode,"Thu, 24 May 2012 09:15:19 +0400",+0400,Alexander Chemeris,"Yes, exactly.
So, do you speak about it or something more generic?

On Thu, May 24, 2012 at 9:13 AM, Jeremy Lakeman
<Jeremy.Lakeman at gmail.com> wrote:
> You might be thinking about Wifi Direct.
> This has previously been touted as a replacement for adhoc networking,
> even though it doesn't support any kind of mesh routing.
> Plus the sdk interface is similar to bluetooth pairing, setting up a
> network always requires user intervention.
>
> On Thu, May 24, 2012 at 2:38 PM, Alexander Chemeris
> <alexander.chemeris at gmail.com> wrote:
"
467,Commotion-dev, convincing google to support ad-hoc mode,"Thu, 24 May 2012 08:01:58 -0400",-0400,Hans-Christoph Steiner,"I am talking about wifi ad-hoc mode (i.e. the opposite of infrastructure mode).  Wifi Direct support has already been added to Android, so we don't need to talk about that unless it conflicts with Ad-hoc.

.hc

On May 24, 2012, at 1:15 AM, Alexander Chemeris wrote:

> Yes, exactly.
> So, do you speak about it or something more generic?
> 
> On Thu, May 24, 2012 at 9:13 AM, Jeremy Lakeman
> <Jeremy.Lakeman at gmail.com> wrote:
"
468,Commotion-dev," Commotion-dev Digest, Vol 13, Issue 20","Thu, 24 May 2012 08:09:08 -0400",-0400,David Oliver,"I see this as part of the fundamental conundrum that stems from phones
being retailed by companies that see wifi - adhoc or not - as competitive.

I agree that Google should not be part of that problem but rather fully
enable adhoc mode in a first class way ""at the factory"" and then let/force
operators to cripple it if they deem fit.

Dave

David M. Oliver | david at olivercoady.com | http://olivercoady.com |
@davidmoliver | +1 914 316 1470


On Thu, May 24, 2012 at 8:00 AM,
<commotion-dev-request at lists.chambana.net>wrote:

> Send Commotion-dev mailing list submissions to
>        commotion-dev at lists.chambana.net
>
> To subscribe or unsubscribe via the World Wide Web, visit
>        http://lists.chambana.net/mailman/listinfo/commotion-dev
> or, via email, send a message with subject or body 'help' to
>        commotion-dev-request at lists.chambana.net
>
> You can reach the person managing the list at
>        commotion-dev-owner at lists.chambana.net
>
> When replying, please edit your Subject line so it is more specific
> than ""Re: Contents of Commotion-dev digest...""
>
>
> Today's Topics:
>
>   1. virtualbox and commotion (Sean McIntyre)
>   2. convincing google to support ad-hoc mode (Hans-Christoph Steiner)
>   3. Re: convincing google to support ad-hoc mode (Alexander Chemeris)
>   4. Re: convincing google to support ad-hoc mode (Jeremy Lakeman)
>   5. Re: convincing google to support ad-hoc mode (Alexander Chemeris)
>
>
> "
469,Commotion-dev, convincing google to support ad-hoc mode,"Thu, 24 May 2012 08:39:03 -0400",-0400,Sascha Meinrath,"Perhaps we should see about setting up a meeting with the Android development
team management to ensure they understand the importance of ad hoc mode for the
open source movement?

--Sascha

On 05/23/2012 11:06 PM, Hans-Christoph Steiner wrote:
> 
> There are some internal rumblings in Google about making Android support Ad-hoc mode natively.  I think we should support this effort as much as possible, since it'll make mesh on Android work a lot easier.  One concern in Google is whether the hardware universally supports ad-hoc mode, or whether Android would have to make special cases for the hardware that does not support ad-hoc mode.
> 
> As far as I know, all wifi hardware that would be included in an Android phone will support ad-hoc mode.  Anyone have any info on this, whether contradicting or supporting this claim?
> 
> .hc
> _______________________________________________
> Commotion-dev mailing list
> Commotion-dev at lists.chambana.net
> http://lists.chambana.net/mailman/listinfo/commotion-dev
> 
> 

"
470,Commotion-dev, convincing google to support ad-hoc mode,"Thu, 24 May 2012 16:25:14 +0200",+0200,L. Aaron Kaplan,"

On May 24, 2012, at 2:39 PM, Sascha Meinrath wrote:

> Perhaps we should see about setting up a meeting with the Android development
> team management to ensure they understand the importance of ad hoc mode for the
> open source movement?
> 
YES!!

That would be a great contribution. 

Aaron.


PS: while you are at it: please tell them that for good meshing we need the layer 2 parameters (RSSI, noise, SNR, biterror rate, etc.) as data readable from /proc or debugfs


"
471,Commotion-dev, convincing google to support ad-hoc mode,"Thu, 24 May 2012 10:37:51 -0400",-0400,Brian Duggan,"Thomas and I spoke to Lucas Dixon of Google ideas a couple months ago about
this issue. He's at Internet @ Freedom today. Don't know where that went,
but he was receptive to the ideas of supporting adhoc in the SDK and
exploring a not-quite-root privilege level for routing table modification.
He's at Internet @ Liberty today. I'll follow up with him :)

Brian
On May 24, 2012 10:25 AM, ""L. Aaron Kaplan"" <aaron at lo-res.org> wrote:

>
>
> On May 24, 2012, at 2:39 PM, Sascha Meinrath wrote:
>
> > Perhaps we should see about setting up a meeting with the Android
> development
> > team management to ensure they understand the importance of ad hoc mode
> for the
> > open source movement?
> >
> YES!!
>
> That would be a great contribution.
>
> Aaron.
>
>
> PS: while you are at it: please tell them that for good meshing we need
> the layer 2 parameters (RSSI, noise, SNR, biterror rate, etc.) as data
> readable from /proc or debugfs
>
>
>
> _______________________________________________
> Commotion-dev mailing list
> Commotion-dev at lists.chambana.net
> http://lists.chambana.net/mailman/listinfo/commotion-dev
>
>
"
472,Commotion-dev, virtualbox and commotion,"Thu, 24 May 2012 12:05:38 -0400",-0400,Seamus Tuohy,
473,Commotion-dev, TidePools: Social software for Commotion,"Thu, 24 May 2012 12:30:27 -0400",-0400,Jonathan Baldwin,"I just released the first build of TidePools ? social map software for
community wireless networks, designed to run on top of Commotion.

You can get the code here:
https://github.com/jrbaldwin/TidePools

More information at:
http://tidepools.co

TidePools is meant to run locally, which includes custom generated map
tiles (via OpenStreetMaps + TileMill). With some minor tinkering it can
probably run on top of any web based map. Let me know if you have any
questions.

Best,
Jonathan


-- 
http://www.jrbaldwin.com

usa cell: +1.714.330.9047
sweden cell: +46.729.44.1984
"
474,Commotion-dev, TidePools: Social software for Commotion,"Thu, 24 May 2012 12:42:45 -0400",-0400,Isaac Wilder,"Amazing!
I just watched the video and got giddy.

Really incredible work, Jonathan.


Isaac

On 05/24/2012 12:30 PM, Jonathan Baldwin wrote:
> I just released the first build of TidePools -- social map software
> for community wireless networks, designed to run on top of Commotion.
>
> You can get the code here:
> https://github.com/jrbaldwin/TidePools
>
> More information at:
> http://tidepools.co
>
> TidePools is meant to run locally, which includes custom generated map
> tiles (via OpenStreetMaps + TileMill). With some minor tinkering it
> can probably run on top of any web based map. Let me know if you have
> any questions.
>
> Best,
> Jonathan
>
>
> -- 
> http://www.jrbaldwin.com
>
> usa cell: +1.714.330.9047
> sweden cell: +46.729.44.1984
>
>
>
> _______________________________________________
> Commotion-dev mailing list
> Commotion-dev at lists.chambana.net
> http://lists.chambana.net/mailman/listinfo/commotion-dev

"
475,Commotion-dev, TidePools: Social software for Commotion,"Thu, 24 May 2012 15:29:19 -0400",-0400,Jonathan Baldwin,"Thanks Isaac!

I just realized, if anyone is starting up a new build, that you need to
create a map (new map button) before you can add landmarks (landmarks write
to maps in DB)...

Also, there is a secret button in the top left corner to add buildings,
flora, etc (admin stuff I haven't implemented because there are no accounts
right now). It's a JS input field for .PNG image file names, type and then
click to drop it on the map...you can add any locally hosted images to the
map this way...).

On Thu, May 24, 2012 at 12:42 PM, Isaac Wilder <
isaac_lists at freenetworkmovement.org> wrote:

>  Amazing!
> I just watched the video and got giddy.
>
> Really incredible work, Jonathan.
>
>
> Isaac
>
>
> On 05/24/2012 12:30 PM, Jonathan Baldwin wrote:
>
> I just released the first build of TidePools ? social map software for
> community wireless networks, designed to run on top of Commotion.
>
>  You can get the code here:
> https://github.com/jrbaldwin/TidePools
>
>  More information at:
> http://tidepools.co
>
>  TidePools is meant to run locally, which includes custom generated map
> tiles (via OpenStreetMaps + TileMill). With some minor tinkering it can
> probably run on top of any web based map. Let me know if you have any
> questions.
>
>  Best,
> Jonathan
>
>
>  --
> http://www.jrbaldwin.com
>
> usa cell: +1.714.330.9047
> sweden cell: +46.729.44.1984
>
>
>
> _______________________________________________
> Commotion-dev mailing listCommotion-dev at lists.chambana.nethttp://lists.chambana.net/mailman/listinfo/commotion-dev
>
>
>
> _______________________________________________
> Commotion-dev mailing list
> Commotion-dev at lists.chambana.net
> http://lists.chambana.net/mailman/listinfo/commotion-dev
>
"
476,Commotion-dev, TidePools: Social software for Commotion,"Thu, 24 May 2012 16:40:25 -0400",-0400,Preston Rhea,"This is fantastic Jonathan. I can't wait to learn more about it, and put it
to work on the Mount Pleasant community wireless network.

On Thu, May 24, 2012 at 3:29 PM, Jonathan Baldwin <jrbaldwin at gmail.com>wrote:

> Thanks Isaac!
>
> I just realized, if anyone is starting up a new build, that you need to
> create a map (new map button) before you can add landmarks (landmarks write
> to maps in DB)...
>
> Also, there is a secret button in the top left corner to add buildings,
> flora, etc (admin stuff I haven't implemented because there are no accounts
> right now). It's a JS input field for .PNG image file names, type and then
> click to drop it on the map...you can add any locally hosted images to the
> map this way...).
>
>
> On Thu, May 24, 2012 at 12:42 PM, Isaac Wilder <
> isaac_lists at freenetworkmovement.org> wrote:
>
"
477,Commotion-dev, TidePools: Social software for Commotion,"Thu, 24 May 2012 20:18:57 -0400",-0400,Outback Dingo,"On Thu, May 24, 2012 at 12:30 PM, Jonathan Baldwin <jrbaldwin at gmail.com> wrote:
> I just released the first build of TidePools ? social map software for
> community wireless networks, designed to run on top of Commotion.
>
> You can get the code here:
> https://github.com/jrbaldwin/TidePools
>
> More information at:
> http://tidepools.co
>
> TidePools is meant to run locally, which includes custom generated map tiles
> (via OpenStreetMaps + TileMill). With some minor tinkering it can probably
> run on top of any web based map. Let me know if you have any questions.
>
> Best,
> Jonathan

Can you please clarify something for me...

1) Do this need to interface to tidepools.co
2) can it be setup standalone, on a private mesh, without external
connectivity, using a local map server?

>
>
> --
> http://www.jrbaldwin.com
>
> usa cell: +1.714.330.9047
> sweden cell: +46.729.44.1984
>
>
> _______________________________________________
> Commotion-dev mailing list
> Commotion-dev at lists.chambana.net
> http://lists.chambana.net/mailman/listinfo/commotion-dev
"
478,Commotion-dev, convincing google to support ad-hoc mode,"Thu, 24 May 2012 21:15:48 -0400",-0400,Hans-Christoph Steiner,"
I had dinner with Lucas Dixon a small group at a dinner organized by a couple Google people on Tuesday as a precursor to Internet at Liberty.  Last night at the conference dinner, I happened to be sitting next to him again, and he turned to me and said something like ""I really think that its important that Android support Ad-hoc mode"".  Needless to say, I agreed and gave him lots of information why.  He said he's been talking to the google dev who works on that part of Android, and he's overburdened.  He's been trying to line up other google devs to work on this as part of their 20% time.  We agreed to start an email conversation with those devs with the goal of: a) figuring out what needs to be done, and b) putting together an internal proposal to get google resources officially assigned to it.

I saw Lucas again as we left today, and we reiterated this.  So I'll keep you posted on this.

.hc

On May 24, 2012, at 10:37 AM, Brian Duggan wrote:

> Thomas and I spoke to Lucas Dixon of Google ideas a couple months ago about this issue. He's at Internet @ Freedom today. Don't know where that went, but he was receptive to the ideas of supporting adhoc in the SDK and exploring a not-quite-root privilege level for routing table modification. He's at Internet @ Liberty today. I'll follow up with him :)
> 
> Brian
> 
> On May 24, 2012 10:25 AM, ""L. Aaron Kaplan"" <aaron at lo-res.org> wrote:
> 
> 
> On May 24, 2012, at 2:39 PM, Sascha Meinrath wrote:
> 
> > Perhaps we should see about setting up a meeting with the Android development
> > team management to ensure they understand the importance of ad hoc mode for the
> > open source movement?
> >
> YES!!
> 
> That would be a great contribution.
> 
> Aaron.
> 
> 
> PS: while you are at it: please tell them that for good meshing we need the layer 2 parameters (RSSI, noise, SNR, biterror rate, etc.) as data readable from /proc or debugfs
> 
> 
> 
> _______________________________________________
> Commotion-dev mailing list
> Commotion-dev at lists.chambana.net
> http://lists.chambana.net/mailman/listinfo/commotion-dev
> 
> _______________________________________________
> Commotion-dev mailing list
> Commotion-dev at lists.chambana.net
> http://lists.chambana.net/mailman/listinfo/commotion-dev

"
479,Commotion-dev, TidePools: Social software for Commotion,"Thu, 24 May 2012 23:56:45 -0400",-0400,Jonathan Baldwin,"Tidepools does not need to interface with tidepools.co, it was designed to
run on standalone, private or public mesh.

As long as you are hosting your own map tiles it will all run locally. I
need to write up a tutorial on how to extract & build map tiles through
OpenStreetMap > TileMill > Leaflet ... in the mean time, you can download
the map tiles I use for the Red Hook mesh here:
http://www.jrbaldwin.com/tidepools/redhook_maptiles.zip   if you want
something to test with.

On Thu, May 24, 2012 at 8:18 PM, Outback Dingo <outbackdingo at gmail.com>wrote:

> On Thu, May 24, 2012 at 12:30 PM, Jonathan Baldwin <jrbaldwin at gmail.com>
> wrote:
> > I just released the first build of TidePools ? social map software for
> > community wireless networks, designed to run on top of Commotion.
> >
> > You can get the code here:
> > https://github.com/jrbaldwin/TidePools
> >
> > More information at:
> > http://tidepools.co
> >
> > TidePools is meant to run locally, which includes custom generated map
> tiles
> > (via OpenStreetMaps + TileMill). With some minor tinkering it can
> probably
> > run on top of any web based map. Let me know if you have any questions.
> >
> > Best,
> > Jonathan
>
> Can you please clarify something for me...
>
> 1) Do this need to interface to tidepools.co
> 2) can it be setup standalone, on a private mesh, without external
> connectivity, using a local map server?
>
> >
> >
> > --
> > http://www.jrbaldwin.com
> >
> > usa cell: +1.714.330.9047
> > sweden cell: +46.729.44.1984
> >
> >
> > _______________________________________________
> > Commotion-dev mailing list
> > Commotion-dev at lists.chambana.net
> > http://lists.chambana.net/mailman/listinfo/commotion-dev
> >
"
480,Commotion-dev, virtualbox and commotion,"Fri, 25 May 2012 10:37:41 -0400",-0400,Seamus Tuohy,
481,Commotion-dev, virtualbox and commotion,"Fri, 25 May 2012 10:37:41 -0400",-0400,Seamus Tuohy,
482,Commotion-dev, virtualbox and commotion,"Fri, 25 May 2012 10:49:43 -0400",-0400,Josh,"Hi Everyone,

I am security guy but not much of a coder. I have been following what you
guys have been doing because I think its pretty much awesome.

Are there any Washington DC related meetups or groups that I could attend?

On Fri, May 25, 2012 at 10:37 AM, Seamus Tuohy
<s2e at opentechinitiative.org>wrote:

> "
483,Commotion-dev, virtualbox and commotion,"Fri, 25 May 2012 13:42:57 -0400",-0400,Sean McIntyre,"Go ahead seamus.

Sean
On May 25, 2012 10:41 AM, ""Seamus Tuohy"" <s2e at opentechinitiative.org> wrote:

> "
484,Commotion-dev, convincing google to support ad-hoc mode,"Fri, 25 May 2012 14:07:08 -0400",-0400,Hans-Christoph Steiner,"
On May 24, 2012, at 10:25 AM, L. Aaron Kaplan wrote:

> 
> 
> On May 24, 2012, at 2:39 PM, Sascha Meinrath wrote:
> 
"
485,Commotion-dev, convincing google to support ad-hoc mode,"Fri, 25 May 2012 14:43:50 -0400",-0400,Will Hawkins,"On 05/25/2012 02:07 PM, Hans-Christoph Steiner wrote:
> 
> On May 24, 2012, at 10:25 AM, L. Aaron Kaplan wrote:
> 
"
486,Commotion-dev, convincing google to support ad-hoc mode,"Fri, 25 May 2012 17:10:15 -0400",-0400,Hans-Christoph Steiner,"
On May 25, 2012, at 2:43 PM, Will Hawkins wrote:

> On 05/25/2012 02:07 PM, Hans-Christoph Steiner wrote:
"
487,Commotion-dev, convincing google to support ad-hoc mode,"Fri, 25 May 2012 17:27:59 -0400",-0400,Will Hawkins,"On 05/25/2012 05:10 PM, Hans-Christoph Steiner wrote:
> 
> On May 25, 2012, at 2:43 PM, Will Hawkins wrote:
> 
"
488,Commotion-dev, convincing google to support ad-hoc mode,"Fri, 25 May 2012 23:30:13 +0200",+0200,L. Aaron Kaplan,"
On May 25, 2012, at 8:07 PM, Hans-Christoph Steiner wrote:

> 
> On May 24, 2012, at 10:25 AM, L. Aaron Kaplan wrote:
> 
"
489,Commotion-dev, convincing google to support ad-hoc mode,"Fri, 25 May 2012 17:38:51 -0400",-0400,Hans-Christoph Steiner,"
On May 25, 2012, at 5:30 PM, L. Aaron Kaplan wrote:

> 
> On May 25, 2012, at 8:07 PM, Hans-Christoph Steiner wrote:
> 
"
490,Commotion-dev, convincing google to support ad-hoc mode,"Fri, 25 May 2012 23:43:21 +0200",+0200,L. Aaron Kaplan,
491,Commotion-dev, static BSSID?,"Tue, 29 May 2012 22:34:03 -0400",-0400,Josh King,"Hi Sean,

I talked with Hans about this last week. Looks great, I think it will 
be a workable approach. I'll work on adding this to the next release of 
CommotionWRT, so we can test it out. Thanks!

On Fri 18 May 2012 05:04:42 PM EDT, Sean McIntyre wrote:
> Hey folks,
>
> Talked about this with Hans today. We came up with the following algorithm:
>
> BSSID = MD4(ESSID)[0:4] ++ channel 2-byte integer
>
> This is read in English as: ""The six byte BSSID is the first four
> bytes of the MD4 hash of ESSID concatenated with the lowest two bytes
> of the channel.""
>
> The rationale for this is that MD4 is uniformly distributed, and the
> first four bytes of MD4 are presumably uniformly distributed. (Should
> be distributed enough.) Then add on the bytes of the channel so that
> same ESSIDs don't collide. MD4 was an arbitrary function choice, and
> security is not an issue. :)
>
> I found a public domain implementation of MD4
> <http://openwall.info/wiki/people/solar/software/public-domain-source-code/md4>
> and made a simple get_bssid() function the same as the above algorithm
> (attached).
>
> Signature for get_bssid:
>
> get_bssid(char *essid, unsigned int channel, unsigned char *bssid) //
> (result goes in bssid)
>
> Not sure how to add this in, so hope one of you goes ahead and does
> that, or let me know how I can be of further service.
>
> Sean
>
> On Thu, May 17, 2012 at 4:23 PM, L. Aaron Kaplan <aaron at lo-res.org> wrote:
"
492,Commotion-dev, static BSSID?,"Tue, 29 May 2012 23:09:34 -0400",-0400,Sean McIntyre,"No problem, happy to help.

Sean

On Tue, May 29, 2012 at 10:34 PM, Josh King <jking at chambana.net> wrote:
> Hi Sean,
>
> I talked with Hans about this last week. Looks great, I think it will
> be a workable approach. I'll work on adding this to the next release of
> CommotionWRT, so we can test it out. Thanks!
>
> On Fri 18 May 2012 05:04:42 PM EDT, Sean McIntyre wrote:
"
493,Commotion-dev, Name space conflict w/ MeshConnect,"Thu, 31 May 2012 15:25:12 -0400",-0400,Hans-Christoph Steiner,"
Ok, I made these name changes and pushed the changes last Friday.

.hc

On May 21, 2012, at 10:58 PM, Josh King wrote:

> Sounds good to me!
> 
> On Mon 21 May 2012 10:48:32 PM EDT, Hans-Christoph Steiner wrote:
"
494,Commotion-dev, where to put android build docs?,"Thu, 31 May 2012 15:48:15 -0400",-0400,Hans-Christoph Steiner,"
Hey all,

Following this Redmine issue:
https://code.commotionwireless.net/issues/97

I've already updated the olsrd/android/README and the Android page on olsr.org:
http://olsr.org/?q=olsr_on_android

Does this also need to be in the Commotion wiki? If so, where?

.hc
"
495,Commotion-dev, where to put android build docs?,"Thu, 31 May 2012 17:27:17 -0300",-0300,Andrew Reynolds,"Good question. Commotion Knowledgebase folks, please chime in.

Since these are still olsrd build instructions, not commotion (yet), my
personal opinion is that we should just link to the document from the
commotion wiki and maybe describe how olsrd fits into the commotion
picture or what features we are adding to commotion android. That leaves
proper attribution and help for the parent projects and allows us to
reference and extend for our own project.

Sound reasonable?

-andrew


On 05/31/2012 04:48 PM, Hans-Christoph Steiner wrote:
> 
> Hey all,
> 
> Following this Redmine issue:
> https://code.commotionwireless.net/issues/97
> 
> I've already updated the olsrd/android/README and the Android page on olsr.org:
> http://olsr.org/?q=olsr_on_android
> 
> Does this also need to be in the Commotion wiki? If so, where?
> 
> .hc
> _______________________________________________
> Commotion-dev mailing list
> Commotion-dev at lists.chambana.net
> http://lists.chambana.net/mailman/listinfo/commotion-dev
> 


"
496,Commotion-dev, where to put android build docs?,"Thu, 31 May 2012 16:31:54 -0400",-0400,Hans-Christoph Steiner,"
Sounds like a plan.  I can contribute how olsrd works with the Android app and also some notes on the app itself, but I don't have a strong sense of the whole Commotion picture, so I'll leave that part up to others.

.hc

On May 31, 2012, at 4:27 PM, Andrew Reynolds wrote:

> Good question. Commotion Knowledgebase folks, please chime in.
> 
> Since these are still olsrd build instructions, not commotion (yet), my
> personal opinion is that we should just link to the document from the
> commotion wiki and maybe describe how olsrd fits into the commotion
> picture or what features we are adding to commotion android. That leaves
> proper attribution and help for the parent projects and allows us to
> reference and extend for our own project.
> 
> Sound reasonable?
> 
> -andrew
> 
> 
> On 05/31/2012 04:48 PM, Hans-Christoph Steiner wrote:
"
497,Commotion-dev, CDT and Android Native Perspective setup for Eclipse,"Thu, 31 May 2012 17:28:20 -0400",-0400,Hans-Christoph Steiner,"
Anyone who might be working on the Android client: I just updated the Eclipse project to also build the native side when building the Java side.  To make this work on your Eclipse, you need to install Sequoyah and CDT:

http://www.eclipse.org/sequoyah/documentation/native_debug.php

Otherwise, you can continue to do it manually.

.hc




"
498,Commotion-dev, adhoc on android,"Fri, 1 Jun 2012 10:52:26 -0400",-0400,Hans-Christoph Steiner,"
I've been chatting with Lucas Dixon at Google Ideas, he is making it a priority to get adhoc support officially into Android.  He's said one big reason why its not in there already is there is only one overworked dev in charge of that aspect.  We want to convene a very small group of people to discuss what needs to happen and how, then we can make a work plan and also help make an internal Google proposal to try to get an internal resource assigned to it.  We can also contribute patches to ensure this happens sooner rather than later.

I've spoken with Jeremy and Bryan about this stuff before, so perhaps you two want to be on this team?  Or others?  I think 3 of us would be a good size.

I've never built or hacked on wpa_supplicant, but I know quite a bit about the stuff around that.  I think it makes sense if I am part of this group since I have the established relationship and am working directly on this stuff these days, but that's open to discussion.

.hc
"
499,Commotion-dev, adhoc on android,"Fri, 01 Jun 2012 13:03:21 -0400",-0400,Will Hawkins,"Hello Hans!

Thanks for keeping up the push for ad hoc support in Android. If there
is room at the metaphorical table, I'd really like to be involved with
these discussions.

Will

On 06/01/2012 10:52 AM, Hans-Christoph Steiner wrote:
> 
> I've been chatting with Lucas Dixon at Google Ideas, he is making it a priority to get adhoc support officially into Android.  He's said one big reason why its not in there already is there is only one overworked dev in charge of that aspect.  We want to convene a very small group of people to discuss what needs to happen and how, then we can make a work plan and also help make an internal Google proposal to try to get an internal resource assigned to it.  We can also contribute patches to ensure this happens sooner rather than later.
> 
> I've spoken with Jeremy and Bryan about this stuff before, so perhaps you two want to be on this team?  Or others?  I think 3 of us would be a good size.
> 
> I've never built or hacked on wpa_supplicant, but I know quite a bit about the stuff around that.  I think it makes sense if I am part of this group since I have the established relationship and am working directly on this stuff these days, but that's open to discussion.
> 
> .hc
> _______________________________________________
> Commotion-dev mailing list
> Commotion-dev at lists.chambana.net
> http://lists.chambana.net/mailman/listinfo/commotion-dev
> 

"
500,Commotion-dev, android adhoc config working after variable,"Fri, 1 Jun 2012 13:26:28 -0400",-0400,Hans-Christoph Steiner,"
Hey Will,

It seems that something has broken the wifi adhoc config.  I just rolled back to:

008d861: Commiting changes to the olsrd.conf file for compatability with Commotion.

and the adhoc config worked for me again.  Is the adhoc config working for you with your DNS and 'wifi' changes?

.hc
"
501,Commotion-dev, adhoc on android,"Fri, 1 Jun 2012 13:31:47 -0400",-0400,Hans-Christoph Steiner,"
Doh, sorry, yes, I spoke with you about this as well.

.hc

On Jun 1, 2012, at 1:03 PM, Will Hawkins wrote:

> Hello Hans!
> 
> Thanks for keeping up the push for ad hoc support in Android. If there
> is room at the metaphorical table, I'd really like to be involved with
> these discussions.
> 
> Will
> 
> On 06/01/2012 10:52 AM, Hans-Christoph Steiner wrote:
"
502,Commotion-dev, android adhoc config working after variable,"Fri, 01 Jun 2012 13:52:26 -0400",-0400,Will Hawkins,"Very interesting. I *think* that it is working. I will investigate
further and be in touch.

Will

On 06/01/2012 01:26 PM, Hans-Christoph Steiner wrote:
> 
> Hey Will,
> 
> It seems that something has broken the wifi adhoc config.  I just rolled back to:
> 
> 008d861: Commiting changes to the olsrd.conf file for compatability with Commotion.
> 
> and the adhoc config worked for me again.  Is the adhoc config working for you with your DNS and 'wifi' changes?
> 
> .hc
> _______________________________________________
> Commotion-dev mailing list
> Commotion-dev at lists.chambana.net
> http://lists.chambana.net/mailman/listinfo/commotion-dev
> 

"
503,Commotion-dev, wiki for dev notes?,"Fri, 1 Jun 2012 15:41:23 -0400",-0400,Hans-Christoph Steiner,"
I seem to recall that there was a wiki for commotion dev notes, but now I can't find it anywhere.  Can someone tell me where I should post commotion-android related notes?

.hc
"
504,Commotion-dev, where to put android build docs?,"Fri, 1 Jun 2012 15:47:14 -0400",-0400,Benjamin Chodoroff,"Ideally, every subproject would have a wiki in which we can start
collecting related docs -- even in this case of one of us contributing docs
upstream to a commotion-related project, we could just make a note in the
commotion-android project wiki like ""see this external page for docs on how
to build olsrd on android - we helped write these docs!""

As we work on establishing documentation procedures and stuff, we'll be
adding template pages to the code.commotionwireless.net wiki to make things
easier.

-b

On Thu, May 31, 2012 at 4:31 PM, Hans-Christoph Steiner <
hans at guardianproject.info> wrote:

>
> Sounds like a plan.  I can contribute how olsrd works with the Android app
> and also some notes on the app itself, but I don't have a strong sense of
> the whole Commotion picture, so I'll leave that part up to others.
>
> .hc
>
> On May 31, 2012, at 4:27 PM, Andrew Reynolds wrote:
>
> > Good question. Commotion Knowledgebase folks, please chime in.
> >
> > Since these are still olsrd build instructions, not commotion (yet), my
> > personal opinion is that we should just link to the document from the
> > commotion wiki and maybe describe how olsrd fits into the commotion
> > picture or what features we are adding to commotion android. That leaves
> > proper attribution and help for the parent projects and allows us to
> > reference and extend for our own project.
> >
> > Sound reasonable?
> >
> > -andrew
> >
> >
> > On 05/31/2012 04:48 PM, Hans-Christoph Steiner wrote:
> "
505,Commotion-dev, wiki for dev notes?,"Fri, 1 Jun 2012 15:49:40 -0400",-0400,Benjamin Chodoroff,"someone with redmine superduper privs needs to enable the wiki module on
the commotion-android project (and all other projects, i'd say)

-b&

On Fri, Jun 1, 2012 at 3:41 PM, Hans-Christoph Steiner <
hans at guardianproject.info> wrote:

>
> I seem to recall that there was a wiki for commotion dev notes, but now I
> can't find it anywhere.  Can someone tell me where I should post
> commotion-android related notes?
>
> .hc
> _______________________________________________
> Commotion-dev mailing list
> Commotion-dev at lists.chambana.net
> http://lists.chambana.net/mailman/listinfo/commotion-dev
>
"
506,Commotion-dev, wiki for dev notes?,"Fri, 1 Jun 2012 16:02:22 -0400",-0400,Hans-Christoph Steiner,"
IMHO, there will be a lot of overlap on wiki topics between all of the subprojects, so if we have separate wikis for each, then it'll be hard to organize the info that spans subprojects.  Examples of this are anything to do with olsrd configuration, mesh status monitoring, etc.  Commotion-manual, commotion-devdocs, commotion-android, commotion-linux, commotion-mac, commotion-openwrt, commotion-windows and OLSRd subprojects all will have this kind of info overlapping.

And on a related note, it seems that the OLSRd subproject is empty and redundant. Perhaps it should be removed?  I think any fixes we need can just be contributed directly upstream to olsr.org.

.hc

On Jun 1, 2012, at 3:49 PM, Benjamin Chodoroff wrote:

> someone with redmine superduper privs needs to enable the wiki module on the commotion-android project (and all other projects, i'd say)
> 
> -b&
> 
> On Fri, Jun 1, 2012 at 3:41 PM, Hans-Christoph Steiner <hans at guardianproject.info> wrote:
> 
> I seem to recall that there was a wiki for commotion dev notes, but now I can't find it anywhere.  Can someone tell me where I should post commotion-android related notes?
> 
> .hc
> _______________________________________________
> Commotion-dev mailing list
> Commotion-dev at lists.chambana.net
> http://lists.chambana.net/mailman/listinfo/commotion-dev
> 
> 
> 
> 
> -- 
> Work Department / theworkdept.com
> Thermitic / thermitic.net
> Detroit Digital Justice Coalition / detroitdjc.org
> 


"
507,Commotion-dev, adhoc on android,"Fri, 1 Jun 2012 16:25:10 -0400",-0400,Hans-Christoph Steiner,"
Sorry, I think I caused this problem actually, still hunting it down.

.hc

On Jun 1, 2012, at 1:03 PM, Will Hawkins wrote:

> Hello Hans!
> 
> Thanks for keeping up the push for ad hoc support in Android. If there
> is room at the metaphorical table, I'd really like to be involved with
> these discussions.
> 
> Will
> 
> On 06/01/2012 10:52 AM, Hans-Christoph Steiner wrote:
"
508,Commotion-dev, adhoc on android,"Fri, 1 Jun 2012 16:53:44 -0400",-0400,Hans-Christoph Steiner,"
On Jun 1, 2012, at 4:43 PM, Sascha Meinrath wrote:

> Hi Hans-Christoph,
> 
> On 06/01/2012 10:52 AM, Hans-Christoph Steiner wrote:
"
509,Commotion-dev, adhoc on android,"Fri, 01 Jun 2012 16:43:30 -0400",-0400,Sascha Meinrath,"Hi Hans-Christoph,

On 06/01/2012 10:52 AM, Hans-Christoph Steiner wrote:
> 
> I've been chatting with Lucas Dixon at Google Ideas, he is making it a priority to get adhoc support officially into Android.  He's said one big reason why its not in there already is there is only one overworked dev in charge of that aspect.  We want to convene a very small group of people to discuss what needs to happen and how, then we can make a work plan and also help make an internal Google proposal to try to get an internal resource assigned to it.  We can also contribute patches to ensure this happens sooner rather than later.
> 
> I've spoken with Jeremy and Bryan about this stuff before, so perhaps you two want to be on this team?  Or others?  I think 3 of us would be a good size.
> 
> I've never built or hacked on wpa_supplicant, but I know quite a bit about the stuff around that.  I think it makes sense if I am part of this group since I have the established relationship and am working directly on this stuff these days, but that's open to discussion.

Sounds like things are moving along smoothly; but please keep me looped in on
this since I can talk with various Google higher-ups if things get bottlenecked.

--Sascha

> .hc
> _______________________________________________
> Commotion-dev mailing list
> Commotion-dev at lists.chambana.net
> http://lists.chambana.net/mailman/listinfo/commotion-dev
> 
> 
> 

"
510,Commotion-dev, wiki for dev notes?,"Fri, 01 Jun 2012 18:07:19 -0300",-0300,Seamus Tuohy,
511,Commotion-dev, wiki for dev notes?,"Mon, 04 Jun 2012 10:01:54 -0400",-0400,Josh King,"We were aiming for consolidating everything under the superproject wiki 
that Seamus mentions below, with possibly adding a wiki link for each 
project that, instead of going to a separate wiki, goes back to the 
main wiki. With a wiki under every subproject, especially with the 
large number of subprojects we have, documentation could quickly become 
fragmented and impossible to find, or that's my feeling.

On Fri 01 Jun 2012 05:07:19 PM EDT, Seamus Tuohy wrote:
> ********* *BEGIN ENCRYPTED or SIGNED PART* *********
>
> Anyone can feel free to contribute to the main Commotion Wiki at
> https://code.commotionwireless.net/projects/commotion/wiki
>
> If you want the development notes specific page it lives at
> https://code.commotionwireless.net/projects/commotion/wiki/Development_Notes
>
> I agree on the redundancy issue. I think we should move towards
> consolidating the Wiki's into the main Commotion Dev Wiki, and once
> that is complete disabling them on the other pages. What does everyone
> else think?
>
> Seamus
>
>
> ********** *END ENCRYPTED or SIGNED PART* **********
>
> _______________________________________________
> Commotion-dev mailing list
> Commotion-dev at lists.chambana.net
> http://lists.chambana.net/mailman/listinfo/commotion-dev
>
>
"
512,Commotion-dev, adhoc on android,"Mon, 4 Jun 2012 16:33:37 -0400",-0400,Hans-Christoph Steiner,"
Ok, Will and I are affirmative, who else wants to be part of this?

.hc

On Jun 1, 2012, at 1:03 PM, Will Hawkins wrote:

> Hello Hans!
> 
> Thanks for keeping up the push for ad hoc support in Android. If there
> is room at the metaphorical table, I'd really like to be involved with
> these discussions.
> 
> Will
> 
> On 06/01/2012 10:52 AM, Hans-Christoph Steiner wrote:
"
513,Commotion-dev, adhoc on android,"Tue, 05 Jun 2012 10:05:35 -0400",-0400,Brian Duggan,
514,Commotion-dev, jsoninfo updates: UUID and /sys/class/net info,"Tue, 05 Jun 2012 20:05:22 -0400",-0400,Hans-Christoph Steiner,"
jsoninfo is now officially part of olsrd, it was included by default in
the 0.6.3 release today.  In the released version, the whole JSON dump
is wrapped as one big chunk with a timestamp.  I just did some more work
on it for some more experimental stuff.  First, I added the possibility
for setting a UUID in a file, configurable in the jsoninfo section of
olsrd.conf, then if its present, that UUID is included in the outermost
json wrapper:

{
	""data"": [all of the requested data],
	""systemTime"": 1338940817,
	""uuid"": ""khjhaskldjfhajksetnrjky41h98uij23u4h""}
}

Next, I started gathering lots of data from /sys/class/net and adding it
to interfaces:

{
""data"": [{""interfaces"": [
{
	""name"": ""wlan0"",
	""state"": ""up"",
	""mtu"": 1472,
	""wireless"": true,
	""ipv4Address"": ""172.29.126.189"",
	""netmask"": ""255.255.0.0"",
	""broadcast"": ""172.29.255.255"",
	""addressLength"": ""6"",
	""carrier"": ""1"",
	""dormant"": ""0"",
	""flags"": ""0x1003"",
	""linkMode"": ""0"",
	""macAddress"": ""00:1b:63:cc:7e:bd"",
	""MTU"": ""1500"",
	""operationalState"": ""unknown"",
	""txQueueLength"": ""1000"",
	""collisions"": ""0"",
	""multicastPackets"": ""0"",
	""rxBytes"": ""4020976"",
	""rxCompressed"": ""0"",
	""rxCrcErrors"": ""0"",
	""rxDropped"": ""0"",
	""rxErrors"": ""0"",
	""rxFifoErrors"": ""0"",
	""rxFrameErrors"": ""0"",
	""rxLengthErrors"": ""0"",
	""rxMissedErrors"": ""0"",
	""rxOverErrors"": ""0"",
	""rxPackets"": ""48842"",
	""txAbortedErrors"": ""0"",
	""txBytes"": ""851046"",
	""txCarrierErrors"": ""0"",
	""txCompressed"": ""0"",
	""txDropped"": ""0"",
	""txErrors"": ""0"",
	""txFifoErrors"": ""0"",
	""txHeartbeatErrors"": ""0"",
	""txPackets"": ""6675"",
	""txWindowErrors"": ""0""}]}
]
,
	""systemTime"": 1338940817,
	""uuid"": ""khjhaskldjfhajksetnrjky41h98uij23u4h""}

"
515,Commotion-dev, Dual interfaces,"Wed, 06 Jun 2012 09:03:46 +0100",+0100,Michael Rogers,
516,Commotion-dev, Dual interfaces,"Wed, 6 Jun 2012 10:01:46 -0400",-0400,Hans-Christoph Steiner,"
I haven't tried it and it is theoretically possible, but it would be very impractical. USB-to-go does not power the USB devices, do you'd have to include a powered USB hub in order to power the wifi dongle.  Just having a wifi dongle sticking out of your phone or tablet would be bad enough, now imagine having a battery-powered USB hub also.

I could maybe see one use case in repurposing old Android devices as static mesh routers.

.hc

On Jun 6, 2012, at 4:03 AM, Michael Rogers wrote:

> "
517,Commotion-dev, Dual interfaces,"Wed, 06 Jun 2012 11:51:45 -0400",-0400,Nathan of Guardian,
518,Commotion-dev, insights into Open Garden's mesh?,"Wed, 06 Jun 2012 15:15:41 -0400",-0400,Hans-Christoph Steiner,"
I had to leave the IRC discussion, did anyone find out anything about
how OpenGarden works that they can share?

.hc

"
519,Commotion-dev, insights into Open Garden's mesh?,"Wed, 06 Jun 2012 15:20:02 -0400",-0400,Josh King,"Unfortunately, the guy we were talking to was not their tech guy, so he 
wasn't able to supply a lot of technical details. However, we're going 
to try and set up a call for week after next (they're really busy 
prepping for a conference) with their tech guy. If it's cool with them, 
do you want to join in?

In the meantime, I think I'm going to try traffic capturing the 
connection between a couple of phones, and see if I can see anything I 
recognize (in case they're basing it on ExOr or AODV or even OLSR). 
Although, it sounds like they don't actually have multi-hop capability 
yet, so I don't now how ""mesh-y"" it is at the moment.

On Wed 06 Jun 2012 03:15:41 PM EDT, Hans-Christoph Steiner wrote:
>
> I had to leave the IRC discussion, did anyone find out anything about
> how OpenGarden works that they can share?
>
> .hc
>
> _______________________________________________
> Commotion-dev mailing list
> Commotion-dev at lists.chambana.net
> http://lists.chambana.net/mailman/listinfo/commotion-dev
"
520,Commotion-dev, jsoninfo updates: UUID and /sys/class/net info,"Wed, 06 Jun 2012 15:23:37 -0400",-0400,Josh King,"Hi Hans,

This is great, and I like the addition of the UUID (especially since 
I'm working on better unique identifiers for nodes right now anyway). 
I'm thinking about working on a LuCI plugin to expose mesh information 
through the JSON API on OpenWRT; I'm planning on using this as a 
template.

On Tue 05 Jun 2012 08:05:22 PM EDT, Hans-Christoph Steiner wrote:
>
> jsoninfo is now officially part of olsrd, it was included by default in
> the 0.6.3 release today.  In the released version, the whole JSON dump
> is wrapped as one big chunk with a timestamp.  I just did some more work
> on it for some more experimental stuff.  First, I added the possibility
> for setting a UUID in a file, configurable in the jsoninfo section of
> olsrd.conf, then if its present, that UUID is included in the outermost
> json wrapper:
>
> {
> 	""data"": [all of the requested data],
> 	""systemTime"": 1338940817,
> 	""uuid"": ""khjhaskldjfhajksetnrjky41h98uij23u4h""}
> }
>
> Next, I started gathering lots of data from /sys/class/net and adding it
> to interfaces:
>
> {
> ""data"": [{""interfaces"": [
> {
> 	""name"": ""wlan0"",
> 	""state"": ""up"",
> 	""mtu"": 1472,
> 	""wireless"": true,
> 	""ipv4Address"": ""172.29.126.189"",
> 	""netmask"": ""255.255.0.0"",
> 	""broadcast"": ""172.29.255.255"",
> 	""addressLength"": ""6"",
> 	""carrier"": ""1"",
> 	""dormant"": ""0"",
> 	""flags"": ""0x1003"",
> 	""linkMode"": ""0"",
> 	""macAddress"": ""00:1b:63:cc:7e:bd"",
> 	""MTU"": ""1500"",
> 	""operationalState"": ""unknown"",
> 	""txQueueLength"": ""1000"",
> 	""collisions"": ""0"",
> 	""multicastPackets"": ""0"",
> 	""rxBytes"": ""4020976"",
> 	""rxCompressed"": ""0"",
> 	""rxCrcErrors"": ""0"",
> 	""rxDropped"": ""0"",
> 	""rxErrors"": ""0"",
> 	""rxFifoErrors"": ""0"",
> 	""rxFrameErrors"": ""0"",
> 	""rxLengthErrors"": ""0"",
> 	""rxMissedErrors"": ""0"",
> 	""rxOverErrors"": ""0"",
> 	""rxPackets"": ""48842"",
> 	""txAbortedErrors"": ""0"",
> 	""txBytes"": ""851046"",
> 	""txCarrierErrors"": ""0"",
> 	""txCompressed"": ""0"",
> 	""txDropped"": ""0"",
> 	""txErrors"": ""0"",
> 	""txFifoErrors"": ""0"",
> 	""txHeartbeatErrors"": ""0"",
> 	""txPackets"": ""6675"",
> 	""txWindowErrors"": ""0""}]}
> ]
> ,
> 	""systemTime"": 1338940817,
> 	""uuid"": ""khjhaskldjfhajksetnrjky41h98uij23u4h""}
>
> _______________________________________________
> Commotion-dev mailing list
> Commotion-dev at lists.chambana.net
> http://lists.chambana.net/mailman/listinfo/commotion-dev
"
521,Commotion-dev, insights into Open Garden's mesh?,"Wed, 06 Jun 2012 15:27:51 -0400",-0400,Hans-Christoph Steiner,"
I would normally want to join in, but next week I'll be out for my
wedding, and will be off the grid for 3 of those days.  I'll rejoin the
world on June 16th.

.hc

On 06/06/2012 03:20 PM, Josh King wrote:
> Unfortunately, the guy we were talking to was not their tech guy, so he 
> wasn't able to supply a lot of technical details. However, we're going 
> to try and set up a call for week after next (they're really busy 
> prepping for a conference) with their tech guy. If it's cool with them, 
> do you want to join in?
> 
> In the meantime, I think I'm going to try traffic capturing the 
> connection between a couple of phones, and see if I can see anything I 
> recognize (in case they're basing it on ExOr or AODV or even OLSR). 
> Although, it sounds like they don't actually have multi-hop capability 
> yet, so I don't now how ""mesh-y"" it is at the moment.
> 
> On Wed 06 Jun 2012 03:15:41 PM EDT, Hans-Christoph Steiner wrote:
"
522,Commotion-dev, jsoninfo updates: UUID and /sys/class/net info,"Wed, 06 Jun 2012 15:29:03 -0400",-0400,Hans-Christoph Steiner,"Cool, to have jsoninfo report the UUID, just write the UUID out to a
file, then give the path to that file in the olsrd.conf section for
jsoninfo.

.hc

On 06/06/2012 03:23 PM, Josh King wrote:
> Hi Hans,
> 
> This is great, and I like the addition of the UUID (especially since 
> I'm working on better unique identifiers for nodes right now anyway). 
> I'm thinking about working on a LuCI plugin to expose mesh information 
> through the JSON API on OpenWRT; I'm planning on using this as a 
> template.
> 
> On Tue 05 Jun 2012 08:05:22 PM EDT, Hans-Christoph Steiner wrote:
"
523,Commotion-dev, insights into Open Garden's mesh?,"Wed, 06 Jun 2012 15:29:10 -0400",-0400,Josh King,"I'm actually talking about the week after next week, i.e. the week of 
the 18th.

On Wed 06 Jun 2012 03:27:51 PM EDT, Hans-Christoph Steiner wrote:
>
> I would normally want to join in, but next week I'll be out for my
> wedding, and will be off the grid for 3 of those days.  I'll rejoin the
> world on June 16th.
>
> .hc
>
> On 06/06/2012 03:20 PM, Josh King wrote:
"
524,Commotion-dev, insights into Open Garden's mesh?,"Wed, 06 Jun 2012 15:33:25 -0400",-0400,Nathan of Guardian,"On 06/06/2012 03:20 PM, Josh King wrote:
> Although, it sounds like they don't actually have multi-hop capability 
> yet, so I don't now how ""mesh-y"" it is at the moment.
I think it is just wifi tethering with a pretty GUI, but I may be wrong.


"
525,Commotion-dev, insights into Open Garden's mesh?,"Wed, 06 Jun 2012 15:35:33 -0400",-0400,Josh King,"Hi Nathan,

They have had a wifi tether for a long time, but now they have an 
Android mesh application as of a week or two ago, which is why we were 
meeting with them to get more information.

On Wed 06 Jun 2012 03:33:25 PM EDT, Nathan of Guardian wrote:
> On 06/06/2012 03:20 PM, Josh King wrote:
"
526,Commotion-dev, insights into Open Garden's mesh?,"Wed, 06 Jun 2012 15:40:15 -0400",-0400,Nathan of Guardian,"On 06/06/2012 03:35 PM, Josh King wrote:
> They have had a wifi tether for a long time, but now they have an 
> Android mesh application as of a week or two ago,
Right, but just the way they describe it, it does not seem like mesh, at
all, in the technical sense.

It seems like a great user concept, and a great user experience for
managing access from a variety of devices or people to the internet
backhaul on your phone or 3g-enabled laptop or tablet.

Anyhow, I could be wrong. It just raises the hairs on my neck in the
same way that people through around terms like ""secure"" or ""private""...
and of course also ""mesh"".

I would be glad to be wrong, and I should probably just play with it myself.

+n

"
527,Commotion-dev, FON2100,"Wed, 6 Jun 2012 18:01:44 -0400",-0400,Patrick B,"Hi,

I have a couple Fonera(FON2100) devices I am trying to install commotion
too. I flashed them using the recent Atheros image from :

http://info.gowasabi.net/commotion-openwrt/openwrt/

The image works fine, but I am having trouble configuring them to mesh. By
default the interfaces wlan0 and wlan0-2 are down. I brought them up, gave
wlan0-2 an IP and BSSID (commotionwireless.net) and tried running olsrd
 (olsrd -i wlan0-2). However, I can't get it to properly associate with the
mesh network as confirmed by a working commotion device. If anyone could
point me in the right direction.  This is the olsrd.conf:

DebugLevel 0
AllowNoInt yes
IpVersion 4
LinkQualityLevel 2
LinkQualityAlgorithm ""etx_ffeth""
SmartGateway yes
LoadPlugin ""olsrd_arprefresh.so.0.1""
{
}
LoadPlugin ""olsrd_dyn_gw.so.0.5""
{
}
LoadPlugin ""olsrd_secure.so.0.6""
{
}
LoadPlugin ""olsrd_nameservice.so.0.3""
{
PlParam ""name"" ""commotion-165249""
PlParam ""sighup-pid-file"" ""/var/run/dnsmasq.pid""
PlParam ""suffix"" "".mesh""
}
LoadPlugin ""olsrd_txtinfo.so.0.1""
{
PlParam ""accept"" ""0.0.0.0""
}

If anyone could point me in the right direction for getting these devices
manually configured that'd be very helpful.

Thanks,

Patrick Baxter
"
528,Commotion-dev, FON2100,"Wed, 6 Jun 2012 17:12:28 -0500",-0500,Ben West,"Hi All,

I had recently re-compiled Commotion against OpenWRT r32002 to see if any
speed improvement were available.  The images presently @
info.gowasabi.netinclude this, I think.

I'm also having problems with getting the wireless interface my FON2100
working with this version, and so it might actually be a problem with the
new ath5k drivers.

I plan to re-flash my FON with regular OpenWRT trunk r32002, to see if the
problem persists.  If so, I will revert the Commotion images @
info.gowasabi.net back to the older trunk.

On Wed, Jun 6, 2012 at 5:01 PM, Patrick B <patrickbx at gmail.com> wrote:

> Hi,
>
> I have a couple Fonera(FON2100) devices I am trying to install commotion
> too. I flashed them using the recent Atheros image from :
>
> http://info.gowasabi.net/commotion-openwrt/openwrt/
>
> The image works fine, but I am having trouble configuring them to mesh. By
> default the interfaces wlan0 and wlan0-2 are down. I brought them up, gave
> wlan0-2 an IP and BSSID (commotionwireless.net) and tried running olsrd
>  (olsrd -i wlan0-2). However, I can't get it to properly associate with the
> mesh network as confirmed by a working commotion device. If anyone could
> point me in the right direction.  This is the olsrd.conf:
>
> DebugLevel 0
> AllowNoInt yes
> IpVersion 4
> LinkQualityLevel 2
> LinkQualityAlgorithm ""etx_ffeth""
> SmartGateway yes
> LoadPlugin ""olsrd_arprefresh.so.0.1""
> {
> }
> LoadPlugin ""olsrd_dyn_gw.so.0.5""
> {
> }
> LoadPlugin ""olsrd_secure.so.0.6""
> {
> }
> LoadPlugin ""olsrd_nameservice.so.0.3""
> {
> PlParam ""name"" ""commotion-165249""
> PlParam ""sighup-pid-file"" ""/var/run/dnsmasq.pid""
> PlParam ""suffix"" "".mesh""
> }
> LoadPlugin ""olsrd_txtinfo.so.0.1""
> {
> PlParam ""accept"" ""0.0.0.0""
> }
>
> If anyone could point me in the right direction for getting these devices
> manually configured that'd be very helpful.
>
> Thanks,
>
> Patrick Baxter
>
> _______________________________________________
> Commotion-dev mailing list
> Commotion-dev at lists.chambana.net
> http://lists.chambana.net/mailman/listinfo/commotion-dev
>
"
529,Commotion-dev, FON2100,"Thu, 7 Jun 2012 11:28:13 -0500",-0500,Ben West,"For an update, I was getting this error in the syslog on my FON2100
using Commotion w/ OpenWRT r32002:

Jan  1 00:00:58 commotion-2022497 user.info sysinit: Configuration
file: /var/run/hostapd-phy0.conf
Jan  1 00:00:58 commotion-2022497 user.info sysinit: nl80211: Failed
to add interface wlan0 into bridge lo: Operation not supported
Jan  1 00:00:58 commotion-2022497 user.info sysinit: nl80211 driver
initialization failed.
Jan  1 00:00:58 commotion-2022497 user.info sysinit: Failed to start
hostapd for phy0

It looks like this issue, which is claimed to have been fixed in
r32011+, may be related:
https://dev.openwrt.org/ticket/11553

I will try re-compiling against a newer version of OpenWRT trunk to
see if that resolves this problem.

On Wed, Jun 6, 2012 at 5:12 PM, Ben West <me at benwest.name> wrote:
> Hi All,
>
> I had recently re-compiled Commotion against OpenWRT r32002 to see if any
> speed improvement were available. ?The images presently @ info.gowasabi.net
> include this, I think.
>
> I'm also having problems with getting the wireless interface my FON2100
> working with this version, and so it might actually be a problem with the
> new ath5k drivers.
>
> I plan to re-flash my FON with regular OpenWRT trunk r32002, to see if the
> problem persists. ?If so, I will revert the Commotion images @
> info.gowasabi.net back to the older trunk.
>
> On Wed, Jun 6, 2012 at 5:01 PM, Patrick B <patrickbx at gmail.com> wrote:
"
530,Commotion-dev, Help us plan the knowledgebase,"Thu, 7 Jun 2012 14:42:17 -0400",-0400,Michael Gregor,"Hi all, 

In order to help build the most effective Commotion online community, we (The Work Department) are conducting basic  research to gain an understanding of the needs of Commotion developers and end-users. We will soon be launching a complete Commotion website to meet those needs. In order to help us plan, we'd like your input. Feel free to pass this along to relevant people who may not notice it here.

Can you respond to three simple questions by Friday, June 15? The survey is at https://docs.google.com/spreadsheet/viewform?formkey=dEotelBEQWotWkR1emFhdVdJcjVCc3c6MQ

Thank you for your help!

Michael

- - - -
Michael Gregor
Digital Strategy Consultant
313.437.1244 (office)
theworkdept.com


This email message and any attached files are confidential and are intended solely for the use of the addressee(s) named above. If you are not the intended recipient, any review, use, dissemination, forwarding, printing, copying, or other distribution of this email message and any attached files is strictly prohibited.






"
531,Commotion-dev, Better understanding of meshconfig tool in,"Fri, 8 Jun 2012 14:09:35 -0500",-0500,Ben West,"Hi All,

I see that the boot script /etc/init.d/meshconfig in Commotion OpenWRT
looks to do much of the heavy lifting in configuring a node, and that
this tool is unique to Commotion rather than taken from another source
(like meshwizard).  I fully understand this tool is still under
development, and that issues were just filed today on Redmine asking
for documentation.  Just trying to get a better idea of where to
start.

I was able to get several nodes meshing together using OpenWRT r31639
a few weeks back, but attempts so far with r32002 are falling flat.
So, the original behavior of those functioning nodes is a bit of a
mystery.

>From what I've observed so far, a newly flashed node upon 1st boot
should broadcast the following SSIDs on channel 5, and these are set
by the apply_wireless_defaults() function in /etc/init.d/meshconfig,
correct?

CommotionSetup-ap (public AP)
CommotionSetup-secure (encrypted AP)
CommotionSetup-mesh (adhoc)

After a node receives its unique configuration, whereby it gets a
assigned a unique numerical ID like 2022497, it should then broadcast
these SSIDs instead, which are also set by the meshconfig script,
correct?

commotion_2022497_ap (public AP)
commotion_2022497_secure (private AP)
commotionwireless.net (adhoc)

How is the per-node configuration supposed to occur?  I.e. is the node
supposed to configure itself upon 1st or 2nd boot?  Is the user
supposed to SSH into 192.168.1.20 to issue commands at the prompt?
Or, is the user supposed to connect wirelessly to one of the node's
""CommotionSetup"" APs and enter config info thru a web UI?

Likewise, how does a node know whether it is a gateway (e.g. wired
uplink on its LAN port) or just a repeater?  Is it supposed to
automatically detect presence of an upstream DHCP server on its LAN
port, or must these roles be specified explicitly under /etc/...

Thanks.

--
Ben West
me at benwest.name

"
532,Commotion-dev, license and copyright assignment?,"Fri, 08 Jun 2012 17:00:17 -0400",-0400,Hans-Christoph Steiner,"
Which license should I be using for the Commotion code?  I'm fine with
GPL, LGPL, Apache, and BSD.  When a piece of code I've worked on is
based on another package I generally find it makes the most sense to
keep the license the same as the original.

Also, who should the copyright be assigned to?  OTI? New America? FSF? me?

.hc

"
533,Commotion-dev, license and copyright assignment?,"Fri, 8 Jun 2012 16:06:18 -0500",-0500,Ben West,"The underlying OpenWRT codebase uses GPL, would that be the suggested
choice for commotion-openwrt?
http://wiki.openwrt.org/about/license

On Fri, Jun 8, 2012 at 4:00 PM, Hans-Christoph Steiner
<hans at guardianproject.info> wrote:
>
> Which license should I be using for the Commotion code? ?I'm fine with
> GPL, LGPL, Apache, and BSD. ?When a piece of code I've worked on is
> based on another package I generally find it makes the most sense to
> keep the license the same as the original.
>
> Also, who should the copyright be assigned to? ?OTI? New America? FSF? me?
>
> .hc
>
> _______________________________________________
> Commotion-dev mailing list
> Commotion-dev at lists.chambana.net
> http://lists.chambana.net/mailman/listinfo/commotion-dev
"
534,Commotion-dev, license and copyright assignment?,"Fri, 08 Jun 2012 17:15:24 -0400",-0400,Josh King,"The CommotionWRT code I've written is under the GPLv3, and I have a 
strong preference for GPL licenses. We haven't been asking projects to 
assign copyright to us (OTI) for code we've funded to have added to 
existing projects, but standalone original applications like MeshTether 
may be a different matter that we've just picked up discussions here at 
OTI about what that would look like. I'm going to find out from people 
here what the view is on best practice under the grant, and bring that 
to the list as a discussion point.

On Fri 08 Jun 2012 05:06:18 PM EDT, Ben West wrote:
> The underlying OpenWRT codebase uses GPL, would that be the suggested
> choice for commotion-openwrt?
> http://wiki.openwrt.org/about/license
>
> On Fri, Jun 8, 2012 at 4:00 PM, Hans-Christoph Steiner
> <hans at guardianproject.info> wrote:
"
535,Commotion-dev, license and copyright assignment?,"Fri, 08 Jun 2012 17:24:49 -0400",-0400,Hans-Christoph Steiner,"
MeshTether is substantially based on Barnacle Wifi Tether, which is
GPLv3, so it'll be easiest there to just keep that license.

jsoninfo is pretty much all written under Commotion funding, but is part
of olsrd, so it should probably use that license (I think MIT or BSD).

The OlsrInfo java library is all new code, so it can easily be whatever
license.

.hc

On 06/08/2012 05:15 PM, Josh King wrote:
> The CommotionWRT code I've written is under the GPLv3, and I have a 
> strong preference for GPL licenses. We haven't been asking projects to 
> assign copyright to us (OTI) for code we've funded to have added to 
> existing projects, but standalone original applications like MeshTether 
> may be a different matter that we've just picked up discussions here at 
> OTI about what that would look like. I'm going to find out from people 
> here what the view is on best practice under the grant, and bring that 
> to the list as a discussion point.
> 
> On Fri 08 Jun 2012 05:06:18 PM EDT, Ben West wrote:
"
536,Commotion-dev, Android olsrd using JNI,"Fri, 08 Jun 2012 17:43:54 -0400",-0400,Will Hawkins,"Hello Hans, etc.

I had a thought over the past few days. Since we are already compiling
olsrd natively for ARM, does it make sense to invoke/suspend olsrd
through JNI?

As opposed to the way we are doing it now, this seems to have the
advantage that olsrd can look like a Thread instead of a process that
needs to be controlled via the shell. This will also give us the chance
to potentially call functions in olsrd source directly to do things like
re-read the configuration file.

I need to investigate whether running olsrd this way will limit its
ability to run as root.

If you don't see anything absolutely objectionable to this, I will spend
some time next week further evaluating the pros/cons to this approach.

Will
"
537,Commotion-dev, Android olsrd using JNI,"Fri, 08 Jun 2012 18:40:15 -0400",-0400,Hans-Christoph Steiner,"
Its an interesting idea, but I think that getting root for that thread
is the hard part.  I think its worth trying but perhaps after we have a
simple Java wrapper for the olsrd.

I think this is the kind of thing they are trying to support in the
olsrd rewrite, since its all framework-based.

At the very least, it would be interesting to see if there is another
workable approach to getting root for operations on Android.  From what
I've seen, everything is using 'su' to start a process.

.hc

On 06/08/2012 05:43 PM, Will Hawkins wrote:
> Hello Hans, etc.
> 
> I had a thought over the past few days. Since we are already compiling
> olsrd natively for ARM, does it make sense to invoke/suspend olsrd
> through JNI?
> 
> As opposed to the way we are doing it now, this seems to have the
> advantage that olsrd can look like a Thread instead of a process that
> needs to be controlled via the shell. This will also give us the chance
> to potentially call functions in olsrd source directly to do things like
> re-read the configuration file.
> 
> I need to investigate whether running olsrd this way will limit its
> ability to run as root.
> 
> If you don't see anything absolutely objectionable to this, I will spend
> some time next week further evaluating the pros/cons to this approach.
> 
> Will
> _______________________________________________
> Commotion-dev mailing list
> Commotion-dev at lists.chambana.net
> http://lists.chambana.net/mailman/listinfo/commotion-dev
> 

"
538,Commotion-dev, license and copyright assignment?,"Fri, 08 Jun 2012 21:32:31 -0400",-0400,Sascha Meinrath,"I want to ensure that Commotion is (and always will be) free for personal,
non-profit, etc. use.  I would also love if there was a mechanism to ensure that
companies that wanted to license Commotion for their own products could do so in
return for paying back into the open source community.  I'm not sure what that
sort of license would look like, but would love to hear ideas on how to ensure
that those who earn income off of Commotion give back to the continued
development of these technologies.

--Sascha

On 06/08/2012 05:06 PM, Ben West wrote:
> The underlying OpenWRT codebase uses GPL, would that be the suggested
> choice for commotion-openwrt?
> http://wiki.openwrt.org/about/license
> 
> On Fri, Jun 8, 2012 at 4:00 PM, Hans-Christoph Steiner
> <hans at guardianproject.info> wrote:
"
539,Commotion-dev, license and copyright assignment?,"Fri, 08 Jun 2012 23:24:37 -0400",-0400,Hans-Christoph Steiner,"
None of the licenses discussed so far put any restriction on commercial
use.  To support its use in proprietary software, it would have to be
LGPL, Apache, or BSD.  olsrd is already BSDish, and Mesh Tether is based
on a lot of GPLv3 code, so that will need to be the same.  OlsrInfo can
be anything since that's all written under Commotion's banner.  In terms
of issuing separate licenses for purchase, that can't be done for Mesh
Tether since there are outside copyright holders for code that is GPLv3.

.hc

On 06/08/2012 09:32 PM, Sascha Meinrath wrote:
> I want to ensure that Commotion is (and always will be) free for personal,
> non-profit, etc. use.  I would also love if there was a mechanism to ensure that
> companies that wanted to license Commotion for their own products could do so in
> return for paying back into the open source community.  I'm not sure what that
> sort of license would look like, but would love to hear ideas on how to ensure
> that those who earn income off of Commotion give back to the continued
> development of these technologies.
> 
> --Sascha
> 
> On 06/08/2012 05:06 PM, Ben West wrote:
"
540,Commotion-dev, license and copyright assignment?,"Mon, 11 Jun 2012 12:12:03 +0200",+0200,L. Aaron Kaplan,"
On Jun 8, 2012, at 11:24 PM, Hans-Christoph Steiner wrote:

> 
> MeshTether is substantially based on Barnacle Wifi Tether, which is
> GPLv3, so it'll be easiest there to just keep that license.
> 
> jsoninfo is pretty much all written under Commotion funding, but is part
> of olsrd, so it should probably use that license (I think MIT or BSD).

Yes, if something only works together with OLSR (such as plugins), it would make sense to keep it the same license (BSD license in this case). 
I wouldn't like to see a balkanization of licenses in the olsr.org code repo. This will create headaches for olsr.org in the years to come. Easier to keep it under one license (even though personally I don't like the implications of BSD license so much).

a.


"
541,Commotion-dev, Your message to Chambana-rooters awaits moderator,"Mon, 11 Jun 2012 07:50:31 +0000",+0000,chambana-rooters-bounces at lists.chambana.net,"Your mail to 'Chambana-rooters' with the subject

    Commotion Wireless Project account activation request

Is being held until the list moderator can review it for approval.

The reason it is being held:

    Too many recipients to the message

Either the message will get posted to the list, or you will receive
notification of the moderator's decision.  If you would like to cancel
this posting, please visit the following URL:

    http://lists.chambana.net/mailman/confirm/chambana-rooters/7013e48287db1b1869518bdd7e439da7508b1da9


"
542,Commotion-dev, Your message to Chambana-rooters awaits moderator,"Mon, 11 Jun 2012 07:51:10 +0000",+0000,chambana-rooters-bounces at lists.chambana.net,"Your mail to 'Chambana-rooters' with the subject

    Commotion Wireless Project account activation request

Is being held until the list moderator can review it for approval.

The reason it is being held:

    Too many recipients to the message

Either the message will get posted to the list, or you will receive
notification of the moderator's decision.  If you would like to cancel
this posting, please visit the following URL:

    http://lists.chambana.net/mailman/confirm/chambana-rooters/05d977fc184ea102fb742050065651471388ddb0


"
543,Commotion-dev, HIG Table of Contents,"Mon, 11 Jun 2012 13:45:26 -0400",-0400,Michael Gregor,"Hi all,

Thanks for your input as we continue to plan the new Commotion website. We're going to begin writing the Human Interface Guidelines soon and want to get your feedback as we get started. A draft Table of Contents is below. It's an overview of what we plan to include in the guidelines.  

https://docs.google.com/document/d/1eZq2iZanxxgPUS2rGuzgoU1KHhbiWT9p9-2-N0o85Ec/edit

Please take a look and let us know what you think. Feel free to make comments directly on the doc or send your input to me.

All the best,

Michael



- - - -
Michael Gregor
Digital Strategy Consultant
313.437.1244 (office)
theworkdept.com


This email message and any attached files are confidential and are intended solely for the use of the addressee(s) named above. If you are not the intended recipient, any review, use, dissemination, forwarding, printing, copying, or other distribution of this email message and any attached files is strictly prohibited.

"
544,Commotion-dev, Your message to Chambana-rooters awaits moderator,"Tue, 12 Jun 2012 18:26:34 +0000",+0000,chambana-rooters-bounces at lists.chambana.net,"Your mail to 'Chambana-rooters' with the subject

    Commotion Wireless Project account activation request

Is being held until the list moderator can review it for approval.

The reason it is being held:

    Too many recipients to the message

Either the message will get posted to the list, or you will receive
notification of the moderator's decision.  If you would like to cancel
this posting, please visit the following URL:

    http://lists.chambana.net/mailman/confirm/chambana-rooters/347767a014f07fcc4068006fb0967e9ee1c0be8e


"
545,Commotion-dev, DNS Update,"Wed, 13 Jun 2012 13:30:03 -0400",-0400,Will Hawkins,"Hey Hans,

Just wondering if you had a chance to consider these patches?

On 05/16/2012 01:01 PM, Will Hawkins wrote:
> I uploaded a set of patches to redmine that should implement this.
> Please take a look at your convenience and provide feedback. I am eager
> to hear what you think.
> 
> To get the new feature, follow the instructions in the README (basically
> update android.env and run ./build_external.sh).
> 
> As an overview, here's how the new dns setup works:
> 
> On connection to the mesh,
> 1. the user's DNS server preference is taken from the preferences and
> stashed in app_bin/resolv.conf
> 2. The system-wide dns server is set to 127.0.0.1
> 3. adsuck (the name of the dns server binary) is launched. Its pid is
> stored in the app_bin/adsuck.pid file.
> 4. olsrd is started with a properly configured nameservice plug-in.
> At this point, adsuck is now ready to do .mesh -> address translations.
> 
> When olsrd receives an updated DNS entry,
> 1. The mapping is automatically reflected in
> app_bin/chroot/hosts.android.small.
> 2. The adsuck process (whose pid is found in app_bin/adsuck.pid) is
> signalled with HUP to indicate that there were changes to its data source.
> 3. adsuck rereads app_bin/chroot/hosts.android.small.
> 
> On disconnection from the mesh,
> 1. The application resets the system-wide dns server to what it was
> before connecting.
> 
> Please let me know if this makes sense. I am eager to get feedback on
> the approach and how it works. It's pretty cool to be able to go to
> http://commotion-xxxx.mesh from the Android browser.
> 
> Will
> 
> 
> On 05/15/2012 03:30 PM, Will Hawkins wrote:
"
546,Commotion-dev, Your message to Chambana-rooters awaits moderator,"Fri, 15 Jun 2012 17:04:14 +0000",+0000,chambana-rooters-bounces at lists.chambana.net,"Your mail to 'Chambana-rooters' with the subject

    Commotion Wireless Project account activation request

Is being held until the list moderator can review it for approval.

The reason it is being held:

    Too many recipients to the message

Either the message will get posted to the list, or you will receive
notification of the moderator's decision.  If you would like to cancel
this posting, please visit the following URL:

    http://lists.chambana.net/mailman/confirm/chambana-rooters/40fbf50ee6abc520e0b3f5aa4a20015ef29a06d7


"
547,Commotion-dev, Your message to Chambana-rooters awaits moderator,"Sun, 17 Jun 2012 16:27:11 +0000",+0000,chambana-rooters-bounces at lists.chambana.net,"Your mail to 'Chambana-rooters' with the subject

    Commotion Wireless Project account activation request

Is being held until the list moderator can review it for approval.

The reason it is being held:

    Too many recipients to the message

Either the message will get posted to the list, or you will receive
notification of the moderator's decision.  If you would like to cancel
this posting, please visit the following URL:

    http://lists.chambana.net/mailman/confirm/chambana-rooters/d6e9060e7e7782bb42d726b060253849ff3ada99


"
548,Commotion-dev, Your message to Chambana-rooters awaits moderator,"Mon, 18 Jun 2012 20:07:12 +0000",+0000,chambana-rooters-bounces at lists.chambana.net,"Your mail to 'Chambana-rooters' with the subject

    Commotion Wireless Project account activation request

Is being held until the list moderator can review it for approval.

The reason it is being held:

    Too many recipients to the message

Either the message will get posted to the list, or you will receive
notification of the moderator's decision.  If you would like to cancel
this posting, please visit the following URL:

    http://lists.chambana.net/mailman/confirm/chambana-rooters/e1e2edde32ca3210954195d75bbb2ae52021a5a0


"
549,Commotion-dev, complete Android GUI mockups,"Tue, 19 Jun 2012 21:18:34 -0400",-0400,Hans-Christoph Steiner,"
I posted Harlo's complete GUI mockups to the redmine, please check it out and let us know what you think:

https://code.commotionwireless.net/issues/162

.hc
"
550,Commotion-dev, Quick review of olsr-mesh-tether aka,"Tue, 19 Jun 2012 21:35:45 -0400",-0400,Hans-Christoph Steiner,"
Thanks for the review, please file bug reports in the commotion-android redmine if you want to track the progress on any of these issues.  Comments inline:

On Jun 18, 2012, at 11:45 PM, Jeremy Lakeman wrote:

> The ""clients"" tab seems like a tether artifact that should be removed.
> Probably other settings that can also go, but that stuck out.

The GUI that's there is just what was inherited from Barnacle WIfi Tether, here's the planned GUI:
https://code.commotionwireless.net/issues/162

> MeshTetherApp.broadcastState should probably be a sticky intent. Which
> would negate the need for the MeshTetherApp.ACTION_CHECK receiver.

Noted, that's a good idea.

> Stopping the app doesn't terminate olsrd, which might cause undefined
> behaviour when upgrading as the previous build of olsrd would be
> restarted.

A known bug due to cramming olsrd into Barnacle.  Will is taking on writing a proper Java daemon wrapper so that should be fixed soon.

> In my case port 8080 was already in use, since you're providing a
> hyperlink in the log the port number doesn't really matter.

The final version will likely only use the jsoninfo plugin, which uses the much less common port 9090.  If port conflicts are still an issue, I think that the best solution is to modify jsoninfo to optionally use a UNIX socket.

> For Serval Mesh we've been considering dropping support for olsr &
> batman and may at some point split out adhoc support to a completely
> separate apk. Partly because we don't want to overload our users with
> info / config which other apps might do better, partly because our
> application can function without adhoc or root access though it is not
> perceived that way.
> 
> I see you have a TOGGLE_STATE broadcast intent we could use, but I was
> wondering if we should try to build a standard interface that's a
> little more generic and allows different implementations to be
> written.
> 
> It should be possible to use the same generic action name in an intent
> filter for a service, yet still allow the calling application to
> specify the implementation to use.
> 
> Any thoughts?


Interesting, so are you thinking that you'll rely on Commotion Mesh Tether to provide Adhoc+OLSR?  This definitely is worth a feature request in redmine.

Following the way this app works, I think the Intents would be TOGGLE_STATE and CHOOSE_PROFILE.  Then we should probably have the option of importing profiles via a JSON file, so that other apps can add the profile they need to MeshTether.

.hc




"
551,Commotion-dev, complete Android GUI mockups,"Wed, 20 Jun 2012 13:36:44 -0400",-0400,Andrew Reynolds,"Thanks Hans,

Would you prefer that discussion and feedback to be captured in Redmine
or on the dev list?

-andrew

On 06/19/2012 09:18 PM, Hans-Christoph Steiner wrote:
> 
> I posted Harlo's complete GUI mockups to the redmine, please check it
> out and let us know what you think:
> 
> https://code.commotionwireless.net/issues/162
> 
> .hc _______________________________________________ Commotion-dev
> mailing list Commotion-dev at lists.chambana.net 
> http://lists.chambana.net/mailman/listinfo/commotion-dev
> 


"
552,Commotion-dev, complete Android GUI mockups,"Wed, 20 Jun 2012 14:26:24 -0400",-0400,Hans-Christoph Steiner,"
I think that the list is an easier place for discussions, but other than
that, no strong preference.

.hc


On 06/20/2012 01:36 PM, Andrew Reynolds wrote:
> Thanks Hans,
> 
> Would you prefer that discussion and feedback to be captured in Redmine
> or on the dev list?
> 
> -andrew
> 
> On 06/19/2012 09:18 PM, Hans-Christoph Steiner wrote:
"
553,Commotion-dev, Your message to Chambana-rooters awaits moderator,"Wed, 20 Jun 2012 20:54:01 +0000",+0000,chambana-rooters-bounces at lists.chambana.net,"Your mail to 'Chambana-rooters' with the subject

    Commotion Wireless Project account activation request

Is being held until the list moderator can review it for approval.

The reason it is being held:

    Too many recipients to the message

Either the message will get posted to the list, or you will receive
notification of the moderator's decision.  If you would like to cancel
this posting, please visit the following URL:

    http://lists.chambana.net/mailman/confirm/chambana-rooters/b349c44e625eb2580698d28890a5e427bc5bf723


"
554,Commotion-dev, Your message to Chambana-rooters awaits moderator,"Wed, 20 Jun 2012 21:09:06 +0000",+0000,chambana-rooters-bounces at lists.chambana.net,"Your mail to 'Chambana-rooters' with the subject

    Commotion Wireless Project account activation request

Is being held until the list moderator can review it for approval.

The reason it is being held:

    Too many recipients to the message

Either the message will get posted to the list, or you will receive
notification of the moderator's decision.  If you would like to cancel
this posting, please visit the following URL:

    http://lists.chambana.net/mailman/confirm/chambana-rooters/8e82de5e8e24877bc5f7134d15265352f18880a7


"
555,Commotion-dev, Your message to Chambana-rooters awaits moderator,"Wed, 20 Jun 2012 21:09:06 +0000",+0000,chambana-rooters-bounces at lists.chambana.net,"Your mail to 'Chambana-rooters' with the subject

    Commotion Wireless Project account activation request

Is being held until the list moderator can review it for approval.

The reason it is being held:

    Too many recipients to the message

Either the message will get posted to the list, or you will receive
notification of the moderator's decision.  If you would like to cancel
this posting, please visit the following URL:

    http://lists.chambana.net/mailman/confirm/chambana-rooters/8e82de5e8e24877bc5f7134d15265352f18880a7


"
556,Commotion-dev, Commotion on the Raspberry Pi?,"Wed, 20 Jun 2012 19:10:09 -0400",-0400,Dan Staples,"Taking many of the same inspirations that led to Commotion, I've been
working on creating a framework for decentralized file-sharing and
communication over a wireless mesh network, utilizing the Raspberry Pi
as the device of choice (due to its low cost and the capabilities of
embedded linux).  I aim to use OLSR for the routing protocol, and
Tahoe-LAFS for file storage/sharing.

I see that Commotion is focused on smartphones and OpenWRT-flashed
routers, but I was wondering if my idea might fit well with the
Commotion project.  Long-term vision, I'd like to create a linux image
one could boot from an SD card on the Raspberry Pi, but for now I'm
focusing on getting the mesh networking set up.

I'd love to hear feedback, and if you all think this might be a good fit
with Commotion.

cheers,
Dan

"
557,Commotion-dev, Commotion on the Raspberry Pi?,"Wed, 20 Jun 2012 19:02:32 -0500",-0500,Ben West,"This definitely a cool idea, and the Raspberry is indeed a neat platform
for OpenWRT, and by extension Commotion.

I did notice mention on a (now-closed) OpenWRT ticket that the Raspberry
has on average more CPU/RAM resources than the typical device targeted for
OpenWRT, meaning that desktop-class Linux distros like Ubuntu, etc might be
a better choice anyway.

So, once Commotion runs fine on Ubuntu/Debian OS, it should run fine on the
Raspberry w/o needing to compile OpenWRT.

Nevertheless, it looks like the OpenWRT community, et al, are working on a
port:
https://code.google.com/p/raspberrypi-openwrt/ (Google Code repository)
https://code.google.com/p/raspberrypi-openwrt/wiki/ConfigureOpenWrt(Incomplete
build instructions)
https://github.com/derlunz/openwrt-raspberrypi (a possibly unrelated github
repo)
http://www.raspberrypi.org/phpBB3/viewtopic.php?f=41&t=1098 (thread on
Raspberry forums)

Besides all that, since the Raspberry doesn't have a built-in wifi radio,
you would need to use a USB wifi stick.  Do make sure to select one that
has solid Linux support.
https://help.ubuntu.com/community/WifiDocs/WirelessCardsSupported

On Wed, Jun 20, 2012 at 6:10 PM, Dan Staples <danarky at riseup.net> wrote:

> Taking many of the same inspirations that led to Commotion, I've been
> working on creating a framework for decentralized file-sharing and
> communication over a wireless mesh network, utilizing the Raspberry Pi
> as the device of choice (due to its low cost and the capabilities of
> embedded linux).  I aim to use OLSR for the routing protocol, and
> Tahoe-LAFS for file storage/sharing.
>
> I see that Commotion is focused on smartphones and OpenWRT-flashed
> routers, but I was wondering if my idea might fit well with the
> Commotion project.  Long-term vision, I'd like to create a linux image
> one could boot from an SD card on the Raspberry Pi, but for now I'm
> focusing on getting the mesh networking set up.
>
> I'd love to hear feedback, and if you all think this might be a good fit
> with Commotion.
>
> cheers,
> Dan
>
> _______________________________________________
> Commotion-dev mailing list
> Commotion-dev at lists.chambana.net
> http://lists.chambana.net/mailman/listinfo/commotion-dev
>
"
558,Commotion-dev, Your message to Chambana-rooters awaits moderator,"Thu, 21 Jun 2012 08:56:52 +0000",+0000,chambana-rooters-bounces at lists.chambana.net,"Your mail to 'Chambana-rooters' with the subject

    Commotion Wireless Project account activation request

Is being held until the list moderator can review it for approval.

The reason it is being held:

    Too many recipients to the message

Either the message will get posted to the list, or you will receive
notification of the moderator's decision.  If you would like to cancel
this posting, please visit the following URL:

    http://lists.chambana.net/mailman/confirm/chambana-rooters/1b02d6193a693e49341f17fab0aeb28ede3087ff


"
559,Commotion-dev, Your message to Chambana-rooters awaits,"Thu, 21 Jun 2012 10:02:02 +0100",+0100,Michael Rogers,
560,Commotion-dev, Your message to Chambana-rooters awaits moderator,"Thu, 21 Jun 2012 09:39:00 +0000",+0000,chambana-rooters-bounces at lists.chambana.net,"Your mail to 'Chambana-rooters' with the subject

    Commotion Wireless Project account activation request

Is being held until the list moderator can review it for approval.

The reason it is being held:

    Too many recipients to the message

Either the message will get posted to the list, or you will receive
notification of the moderator's decision.  If you would like to cancel
this posting, please visit the following URL:

    http://lists.chambana.net/mailman/confirm/chambana-rooters/79a1bd3495516650d20debed26913076e75aa8c6


"
561,Commotion-dev," Commotion-dev Digest, Vol 14, Issue 19","Thu, 21 Jun 2012 08:02:22 -0400",-0400,David Oliver,"Yes please capture that discussion in Redmine, Andrew.


David M. Oliver | david at olivercoady.com | http://olivercoady.com |
http://dmo.tel | @davidmoliver | +1 970 368 2366


On Thu, Jun 21, 2012 at 5:02 AM,
<commotion-dev-request at lists.chambana.net>wrote:

> Send Commotion-dev mailing list submissions to
>        commotion-dev at lists.chambana.net
>
> To subscribe or unsubscribe via the World Wide Web, visit
>        http://lists.chambana.net/mailman/listinfo/commotion-dev
> or, via email, send a message with subject or body 'help' to
>        commotion-dev-request at lists.chambana.net
>
> You can reach the person managing the list at
>        commotion-dev-owner at lists.chambana.net
>
> When replying, please edit your Subject line so it is more specific
> than ""Re: Contents of Commotion-dev digest...""
>
>
> Today's Topics:
>
>   1. Re: complete Android GUI mockups (Andrew Reynolds)
>   2. Re: complete Android GUI mockups (Hans-Christoph Steiner)
>   3. Your message to Chambana-rooters awaits moderator approval
>      (chambana-rooters-bounces at lists.chambana.net)
>   4. Your message to Chambana-rooters awaits moderator approval
>      (chambana-rooters-bounces at lists.chambana.net)
>   5. Your message to Chambana-rooters awaits moderator approval
>      (chambana-rooters-bounces at lists.chambana.net)
>   6. Commotion on the Raspberry Pi? (Dan Staples)
>   7. Re: Commotion on the Raspberry Pi? (Ben West)
>   8. Your message to Chambana-rooters awaits moderator approval
>      (chambana-rooters-bounces at lists.chambana.net)
>   9. Re: Your message to Chambana-rooters awaits moderator
>      approval (Michael Rogers)
>
>
> "
562,Commotion-dev, Your message to Chambana-rooters awaits moderator,"Thu, 21 Jun 2012 13:22:39 +0000",+0000,chambana-rooters-bounces at lists.chambana.net,"Your mail to 'Chambana-rooters' with the subject

    Commotion Wireless Project account activation request

Is being held until the list moderator can review it for approval.

The reason it is being held:

    Too many recipients to the message

Either the message will get posted to the list, or you will receive
notification of the moderator's decision.  If you would like to cancel
this posting, please visit the following URL:

    http://lists.chambana.net/mailman/confirm/chambana-rooters/59fc90b67410ff4e24db1501cafb829f45e6cb95


"
563,Commotion-dev, Commotion on the Raspberry Pi?,"Thu, 21 Jun 2012 11:44:18 -0400",-0400,Hans-Christoph Steiner,"
Sounds like a good idea.  I agree with Ben, I think that Debian would be the best approach.

I'm working on making the olsrd package in Debian as easy and plug-n-play as possible.  Its not a small project, so your contributions there would fulfill your goal and also contribute to the creater Debian ecosystem.

.hc

On Jun 20, 2012, at 8:02 PM, Ben West wrote:

> This definitely a cool idea, and the Raspberry is indeed a neat platform for OpenWRT, and by extension Commotion.
> 
> I did notice mention on a (now-closed) OpenWRT ticket that the Raspberry has on average more CPU/RAM resources than the typical device targeted for OpenWRT, meaning that desktop-class Linux distros like Ubuntu, etc might be a better choice anyway.
> 
> So, once Commotion runs fine on Ubuntu/Debian OS, it should run fine on the Raspberry w/o needing to compile OpenWRT.
> 
> Nevertheless, it looks like the OpenWRT community, et al, are working on a port:
> https://code.google.com/p/raspberrypi-openwrt/ (Google Code repository)
> https://code.google.com/p/raspberrypi-openwrt/wiki/ConfigureOpenWrt (Incomplete build instructions)
> https://github.com/derlunz/openwrt-raspberrypi (a possibly unrelated github repo)
> http://www.raspberrypi.org/phpBB3/viewtopic.php?f=41&t=1098 (thread on Raspberry forums)
> 
> Besides all that, since the Raspberry doesn't have a built-in wifi radio, you would need to use a USB wifi stick.  Do make sure to select one that has solid Linux support.
> https://help.ubuntu.com/community/WifiDocs/WirelessCardsSupported
> 
> On Wed, Jun 20, 2012 at 6:10 PM, Dan Staples <danarky at riseup.net> wrote:
> Taking many of the same inspirations that led to Commotion, I've been
> working on creating a framework for decentralized file-sharing and
> communication over a wireless mesh network, utilizing the Raspberry Pi
> as the device of choice (due to its low cost and the capabilities of
> embedded linux).  I aim to use OLSR for the routing protocol, and
> Tahoe-LAFS for file storage/sharing.
> 
> I see that Commotion is focused on smartphones and OpenWRT-flashed
> routers, but I was wondering if my idea might fit well with the
> Commotion project.  Long-term vision, I'd like to create a linux image
> one could boot from an SD card on the Raspberry Pi, but for now I'm
> focusing on getting the mesh networking set up.
> 
> I'd love to hear feedback, and if you all think this might be a good fit
> with Commotion.
> 
> cheers,
> Dan
> 
> _______________________________________________
> Commotion-dev mailing list
> Commotion-dev at lists.chambana.net
> http://lists.chambana.net/mailman/listinfo/commotion-dev
> 
> 
> 
> 
> -- 
> Ben West
> me at benwest.name
> 
> _______________________________________________
> Commotion-dev mailing list
> Commotion-dev at lists.chambana.net
> http://lists.chambana.net/mailman/listinfo/commotion-dev

"
564,Commotion-dev, repo for OlsrInfo Java API?,"Thu, 21 Jun 2012 15:50:25 -0400",-0400,Hans-Christoph Steiner,"
I'm just finishing up the OlsrInfo Java API and I was wondering where I
should put the git repo.  I am currently pushing here:

https://github.com/guardianproject/OlsrInfo

This is a separate project from Commotion-Android i.e. MeshTether, so
I've kept it in a separate repo and include it in MeshTether as a jar.

.hc

"
565,Commotion-dev, Commotion on the Raspberry Pi?,"Thu, 21 Jun 2012 15:57:26 -0400",-0400,Dan Staples,"Right now I'm running Debian squeeze on it, and I agree Debian will 
probably allow the most flexibility.  I would be glad to help improve 
olsrd for Debian.  Is what you're working on part of the olsrd git repo 
hosted on commotionwireless.net, or is it somewhere else?

Dan

On Thu 21 Jun 2012 11:44:18 AM EDT, Hans-Christoph Steiner wrote:
>
> Sounds like a good idea.  I agree with Ben, I think that Debian would
> be the best approach.
>
> I'm working on making the olsrd package in Debian as easy and
> plug-n-play as possible.  Its not a small project, so your
> contributions there would fulfill your goal and also contribute to the
> creater Debian ecosystem.
>
> .hc
>
> On Jun 20, 2012, at 8:02 PM, Ben West wrote:
>
"
566,Commotion-dev, Commotion on the Raspberry Pi?,"Thu, 21 Jun 2012 17:31:39 -0400",-0400,Hans-Christoph Steiner,"
For fixes to olsrd itself, I'm committing them directly upstream.  Then
I'm working on scripts to make it easy to setup the adhoc mode for a
given mesh, you can see that in the latest olsrd in
files/olsrd-adhoc-setup or in the latest Debian package.

Right now we're also working on ""profiles"" for a given mesh network
which includes a olsrd.conf as well as settings outside of olsrd like
the wifi SSID, wifi channel, IP address, netmask, DNS settings, etc.
This is first going to manifest itself in the Android app, but then
later in Network Manager.  For your project, we should think about how
best to manage these profiles when working with a headless node.

.hc

On 06/21/2012 03:57 PM, Dan Staples wrote:
> Right now I'm running Debian squeeze on it, and I agree Debian will 
> probably allow the most flexibility.  I would be glad to help improve 
> olsrd for Debian.  Is what you're working on part of the olsrd git repo 
> hosted on commotionwireless.net, or is it somewhere else?
> 
> Dan
> 
> On Thu 21 Jun 2012 11:44:18 AM EDT, Hans-Christoph Steiner wrote:
"
567,Commotion-dev," Compiled images for ath5k, ar71xx,","Thu, 21 Jun 2012 19:01:26 -0400",-0400,Hans-Christoph Steiner,"
We tried this image and were able to get something working.  But we had to manually setup the wifi settings, tweak the olsrd.conf, and manually start olsrd.  Did we miss something or is this image not yet setup to do commotion by default?

.hc

On May 22, 2012, at 12:11 PM, Ben West wrote:

> Hi All,
> 
> I updated the compiled images for ath5k and ar71xx I made after some
> further testing yesterday.  These images are compiled from the
> commotion-openwrt repo as it existed on 5/18/12.
> http://info.gowasabi.net/commotion-openwrt/openwrt/
> 
> Recently flashed nodes seemed to complain about missing OLSR plugins,
> and I wasn't sure if they were required for operation.
> 
> (I had thought I filed an issue on Redmine @
> https://code.commotionwireless.net/projects/commotion-openwrt/issues
> asking if commotionbase missing some declared dependencies, but it
> looks it may have gone missing.)
> 
> On Mon, May 21, 2012 at 2:40 AM, Ben West <me at benwest.name> wrote:
"
568,Commotion-dev," Compiled images for ath5k, ar71xx,","Thu, 21 Jun 2012 18:16:53 -0500",-0500,Ben West,"Hi Hans,

I was having lots of problems getting Commotion to work under OpenWRT trunk
r32002 and newer, due to recent changes made to kernel and I think to
netifd.
https://dev.openwrt.org/changeset/31640/
https://dev.openwrt.org/changeset/32049/

This is what prompted my question to this list about how the meshconfig
tool works (the tool that handles node auto-config), since it apparently
stopped working for newer versions of trunk.

I do have compiled ar71xx and atheros images from when I reverted Commotion
back to trunk r31639, and I though I had published them to info.gowasabi.net,
but I may have misplaced them.

I will look and respond later today.

On Thu, Jun 21, 2012 at 6:01 PM, Hans-Christoph Steiner <
hans at guardianproject.info> wrote:

>
> We tried this image and were able to get something working.  But we had to
> manually setup the wifi settings, tweak the olsrd.conf, and manually start
> olsrd.  Did we miss something or is this image not yet setup to do
> commotion by default?
>
> .hc
>
> On May 22, 2012, at 12:11 PM, Ben West wrote:
>
> > Hi All,
> >
> > I updated the compiled images for ath5k and ar71xx I made after some
> > further testing yesterday.  These images are compiled from the
> > commotion-openwrt repo as it existed on 5/18/12.
> > http://info.gowasabi.net/commotion-openwrt/openwrt/
> >
> > Recently flashed nodes seemed to complain about missing OLSR plugins,
> > and I wasn't sure if they were required for operation.
> >
> > (I had thought I filed an issue on Redmine @
> > https://code.commotionwireless.net/projects/commotion-openwrt/issues
> > asking if commotionbase missing some declared dependencies, but it
> > looks it may have gone missing.)
> >
> > On Mon, May 21, 2012 at 2:40 AM, Ben West <me at benwest.name> wrote:
> "
569,Commotion-dev, Your message to Chambana-rooters awaits moderator,"Fri, 22 Jun 2012 12:48:21 +0000",+0000,chambana-rooters-bounces at lists.chambana.net,"Your mail to 'Chambana-rooters' with the subject

    Commotion Wireless Project account activation request

Is being held until the list moderator can review it for approval.

The reason it is being held:

    Too many recipients to the message

Either the message will get posted to the list, or you will receive
notification of the moderator's decision.  If you would like to cancel
this posting, please visit the following URL:

    http://lists.chambana.net/mailman/confirm/chambana-rooters/2862236bd1794ede0e8145e47c1c44d3610dcdd6


"
570,Commotion-dev, Your message to Chambana-rooters awaits moderator,"Fri, 22 Jun 2012 14:08:28 +0000",+0000,chambana-rooters-bounces at lists.chambana.net,"Your mail to 'Chambana-rooters' with the subject

    Commotion Wireless Project account activation request

Is being held until the list moderator can review it for approval.

The reason it is being held:

    Too many recipients to the message

Either the message will get posted to the list, or you will receive
notification of the moderator's decision.  If you would like to cancel
this posting, please visit the following URL:

    http://lists.chambana.net/mailman/confirm/chambana-rooters/39c85ace2d9eaaca5ca1aded24aa28e55bc3cab8


"
571,Commotion-dev, complete Android GUI mockups,"Fri, 22 Jun 2012 12:54:31 -0400",-0400,Andrew Reynolds,"Comments posted to issue 162 (https://code.commotionwireless.net/issues/162)

As far as methodology, I cut out each of the screen mockups and had
people navigate the app as though it were an actual phone, handing them
new pages based on their behavior. I had a mix of technical and
nontechnical users, with most of the technical users being members of
the Commotion dev team. All were android users.

Behavior and expectations were fairly close between both groups, though
the technical users (mostly members of the commotion dev team) were able
to make better educated guesses when they got stuck. Novice users tended
to explore, but mostly kept the default settings.

-andrew

On 06/19/2012 09:18 PM, Hans-Christoph Steiner wrote:
> 
> I posted Harlo's complete GUI mockups to the redmine, please check it
> out and let us know what you think:
> 
> https://code.commotionwireless.net/issues/162
> 
> .hc _______________________________________________ Commotion-dev
> mailing list Commotion-dev at lists.chambana.net 
> http://lists.chambana.net/mailman/listinfo/commotion-dev
> 



"
572,Commotion-dev, DNS Update,"Fri, 22 Jun 2012 17:50:18 -0400",-0400,Hans-Christoph Steiner,"
Sorry, I was out for my wedding and am still catching up.  I will definitely check this out first thing next week.

.hc

On Jun 13, 2012, at 1:30 PM, Will Hawkins wrote:

> Hey Hans,
> 
> Just wondering if you had a chance to consider these patches?
> 
> On 05/16/2012 01:01 PM, Will Hawkins wrote:
"
573,Commotion-dev, Your message to Chambana-rooters awaits moderator,"Fri, 22 Jun 2012 22:26:54 +0000",+0000,chambana-rooters-bounces at lists.chambana.net,"Your mail to 'Chambana-rooters' with the subject

    Commotion Wireless Project account activation request

Is being held until the list moderator can review it for approval.

The reason it is being held:

    Too many recipients to the message

Either the message will get posted to the list, or you will receive
notification of the moderator's decision.  If you would like to cancel
this posting, please visit the following URL:

    http://lists.chambana.net/mailman/confirm/chambana-rooters/dfef6c10cd4454aa6602b36ec9df7962b507511c


"
574,Commotion-dev," Compiled images for ath5k, ar71xx,","Sat, 23 Jun 2012 00:23:24 -0500",-0500,Ben West,"Hello again,

I found the working Commotion-OpenWRT images I had compiled for atheros and
ar71xx targets, after reverting back to known functional OpenWRT trunk
r31639.

I've but them back online here, and any further experiments with newer
versions of trunk will be put at separate location:
http://info.gowasabi.net/commotion-openwrt/openwrt/

Also, do please note that I excluded all luci-related packages from the
atheros images.  The FON2100 I have just can't fit everything into its 16MB
of RAM.  All the separate *.ipk package files, tho, are still downloadable
here:
http://info.gowasabi.net/commotion-openwrt/openwrt/bin/atheros/packages/

The ar71xx images, however, do have the luci packages included.

On Thu, Jun 21, 2012 at 6:16 PM, Ben West <me at benwest.name> wrote:

> Hi Hans,
>
> I was having lots of problems getting Commotion to work under OpenWRT
> trunk r32002 and newer, due to recent changes made to kernel and I think to
> netifd.
> https://dev.openwrt.org/changeset/31640/
> https://dev.openwrt.org/changeset/32049/
>
> This is what prompted my question to this list about how the meshconfig
> tool works (the tool that handles node auto-config), since it apparently
> stopped working for newer versions of trunk.
>
> I do have compiled ar71xx and atheros images from when I reverted
> Commotion back to trunk r31639, and I though I had published them to
> info.gowasabi.net, but I may have misplaced them.
>
> I will look and respond later today.
>
>
> On Thu, Jun 21, 2012 at 6:01 PM, Hans-Christoph Steiner <
> hans at guardianproject.info> wrote:
>
"
575,Commotion-dev, Your message to Chambana-rooters awaits moderator,"Sun, 24 Jun 2012 09:53:57 +0000",+0000,chambana-rooters-bounces at lists.chambana.net,"Your mail to 'Chambana-rooters' with the subject

    Commotion Wireless Project account activation request

Is being held until the list moderator can review it for approval.

The reason it is being held:

    Too many recipients to the message

Either the message will get posted to the list, or you will receive
notification of the moderator's decision.  If you would like to cancel
this posting, please visit the following URL:

    http://lists.chambana.net/mailman/confirm/chambana-rooters/c1e0f1dc317e2af6f9ba3de14573542e1c2c7a56


"
576,Commotion-dev, Help w/ Commotion dev/deployment for upcoming,"Sun, 24 Jun 2012 18:45:00 -0500",-0500,Ben West,"Hi All,

(Shout outs to Nina B. and Benjamin C.!)

In lieu of the upcoming Allied Media Conference in Detroit next weekend (
http://amc.alliedmedia.org/) is there need for assistance w/ pushing thru
progress on any low-hanging fruit in the Commotion OpenWRT issue queue?
https://code.commotionwireless.net/projects/commotion-openwrt/issues

I was not sure if folks were planning a small (or large?) mesh deployment
at AMC.  If so, are there any things folks would like to see working by
next weekend if possible, e.g.

- Better splash page operation?
- CoovaChilli integration, in case captive portal integration is desired?
- Cloudtrax dashboard integration (to generate live mesh status maps)?
- Alternatively, munin or nagios integration for automated node status
reporting?
- Documentation on flashing Commotion and basic operation, including remote
flashing?

P.S. As a reminder, I've re-published my working images atheros and ar71xx
of Commotion OpenWRT here.
http://info.gowasabi.net/commotion-openwrt/openwrt/

They're based on the last known compatible version of OpenWRT trunk r31639,
since newer versions r32002+ have updates to the kernel and/or netifd that
appear to break Commotion's meshconfig tool.  Again, do note the
atheros/ath5k images do not have luci, etc compiled in due to RAM
constraints on my FON2100's, but the *.ipk files are still there for
download.

P.P.S. I can not travel to Detroit myself, unfortunately.  I'm pinging the
list here, since I'm hoping to knock out a bunch pending tasks on
Commotion/ROBIN/WasabiNet/etc queue this week.

-- 
Ben West
me at benwest.name
"
577,Commotion-dev, Better understanding of meshconfig tool in,"Mon, 25 Jun 2012 01:56:07 -0500",-0500,Ben West,"For follow-up on this thread, here is what I've observed about getting
Commotion nodes to configure themselves and mesh ...

Upon first boot after flashing, the node should broadcast the following
SSIDs on channel 5, and these are set by the /etc/init.d/meshconfig script.

CommotionSetup-ap (public AP)
CommotionSetup-secure (encrypted AP)
CommotionSetup-mesh (adhoc)

Shortly after first boot (how long?), the node will be assigned a unique
numerical ID like 2022497.  I think the node also converts its root
filesystem from squashfs to jffs during this time too, meaning it shouldn't
be powered down.

The meshconfig script will then update the SSID's broadcast by the node as
such:

commotion_2022497_ap (public AP)
commotion_2022497_secure (private AP)
commotionwireless.net (adhoc)

At this point, the nodes should be able to automatically distinguish which
is a repeater and which is a gateway node, meshing with each other over the
""commotionwireless.net"" signal.  Likewise, each node will accept wifi
clients on both their public and private APs (WPA key ""c0MM0t10N!r0ckS!""),
displaying the Commotion splash page on your first port 80 request if that
was compiled in.

It looks like there was wiki page sneaking around with lots of these
details already, tho I think a bit out of date now:
https://code.commotionwireless.net/projects/commotion/wiki/Newbie_How_it_Works

On Fri, Jun 8, 2012 at 2:09 PM, Ben West <me at benwest.name> wrote:

> Hi All,
>
> I see that the boot script /etc/init.d/meshconfig in Commotion OpenWRT
> looks to do much of the heavy lifting in configuring a node, and that
> this tool is unique to Commotion rather than taken from another source
> (like meshwizard).  I fully understand this tool is still under
> development, and that issues were just filed today on Redmine asking
> for documentation.  Just trying to get a better idea of where to
> start.
>
> I was able to get several nodes meshing together using OpenWRT r31639
> a few weeks back, but attempts so far with r32002 are falling flat.
> So, the original behavior of those functioning nodes is a bit of a
> mystery.
>
> From what I've observed so far, a newly flashed node upon 1st boot
> should broadcast the following SSIDs on channel 5, and these are set
> by the apply_wireless_defaults() function in /etc/init.d/meshconfig,
> correct?
>
> CommotionSetup-ap (public AP)
> CommotionSetup-secure (encrypted AP)
> CommotionSetup-mesh (adhoc)
>
> After a node receives its unique configuration, whereby it gets a
> assigned a unique numerical ID like 2022497, it should then broadcast
> these SSIDs instead, which are also set by the meshconfig script,
> correct?
>
> commotion_2022497_ap (public AP)
> commotion_2022497_secure (private AP)
> commotionwireless.net (adhoc)
>
> How is the per-node configuration supposed to occur?  I.e. is the node
> supposed to configure itself upon 1st or 2nd boot?  Is the user
> supposed to SSH into 192.168.1.20 to issue commands at the prompt?
> Or, is the user supposed to connect wirelessly to one of the node's
> ""CommotionSetup"" APs and enter config info thru a web UI?
>
> Likewise, how does a node know whether it is a gateway (e.g. wired
> uplink on its LAN port) or just a repeater?  Is it supposed to
> automatically detect presence of an upstream DHCP server on its LAN
> port, or must these roles be specified explicitly under /etc/...
>
> Thanks.
>
> --
> Ben West
> me at benwest.name
"
578,Commotion-dev, Better understanding of meshconfig tool in,"Mon, 25 Jun 2012 01:56:07 -0500",-0500,Ben West,"For follow-up on this thread, here is what I've observed about getting
Commotion nodes to configure themselves and mesh ...

Upon first boot after flashing, the node should broadcast the following
SSIDs on channel 5, and these are set by the /etc/init.d/meshconfig script.

CommotionSetup-ap (public AP)
CommotionSetup-secure (encrypted AP)
CommotionSetup-mesh (adhoc)

Shortly after first boot (how long?), the node will be assigned a unique
numerical ID like 2022497.  I think the node also converts its root
filesystem from squashfs to jffs during this time too, meaning it shouldn't
be powered down.

The meshconfig script will then update the SSID's broadcast by the node as
such:

commotion_2022497_ap (public AP)
commotion_2022497_secure (private AP)
commotionwireless.net (adhoc)

At this point, the nodes should be able to automatically distinguish which
is a repeater and which is a gateway node, meshing with each other over the
""commotionwireless.net"" signal.  Likewise, each node will accept wifi
clients on both their public and private APs (WPA key ""c0MM0t10N!r0ckS!""),
displaying the Commotion splash page on your first port 80 request if that
was compiled in.

It looks like there was wiki page sneaking around with lots of these
details already, tho I think a bit out of date now:
https://code.commotionwireless.net/projects/commotion/wiki/Newbie_How_it_Works

On Fri, Jun 8, 2012 at 2:09 PM, Ben West <me at benwest.name> wrote:

> Hi All,
>
> I see that the boot script /etc/init.d/meshconfig in Commotion OpenWRT
> looks to do much of the heavy lifting in configuring a node, and that
> this tool is unique to Commotion rather than taken from another source
> (like meshwizard).  I fully understand this tool is still under
> development, and that issues were just filed today on Redmine asking
> for documentation.  Just trying to get a better idea of where to
> start.
>
> I was able to get several nodes meshing together using OpenWRT r31639
> a few weeks back, but attempts so far with r32002 are falling flat.
> So, the original behavior of those functioning nodes is a bit of a
> mystery.
>
> From what I've observed so far, a newly flashed node upon 1st boot
> should broadcast the following SSIDs on channel 5, and these are set
> by the apply_wireless_defaults() function in /etc/init.d/meshconfig,
> correct?
>
> CommotionSetup-ap (public AP)
> CommotionSetup-secure (encrypted AP)
> CommotionSetup-mesh (adhoc)
>
> After a node receives its unique configuration, whereby it gets a
> assigned a unique numerical ID like 2022497, it should then broadcast
> these SSIDs instead, which are also set by the meshconfig script,
> correct?
>
> commotion_2022497_ap (public AP)
> commotion_2022497_secure (private AP)
> commotionwireless.net (adhoc)
>
> How is the per-node configuration supposed to occur?  I.e. is the node
> supposed to configure itself upon 1st or 2nd boot?  Is the user
> supposed to SSH into 192.168.1.20 to issue commands at the prompt?
> Or, is the user supposed to connect wirelessly to one of the node's
> ""CommotionSetup"" APs and enter config info thru a web UI?
>
> Likewise, how does a node know whether it is a gateway (e.g. wired
> uplink on its LAN port) or just a repeater?  Is it supposed to
> automatically detect presence of an upstream DHCP server on its LAN
> port, or must these roles be specified explicitly under /etc/...
>
> Thanks.
>
> --
> Ben West
> me at benwest.name
"
579,Commotion-dev, Better understanding of meshconfig tool in,"Mon, 25 Jun 2012 01:56:07 -0500",-0500,Ben West,"For follow-up on this thread, here is what I've observed about getting
Commotion nodes to configure themselves and mesh ...

Upon first boot after flashing, the node should broadcast the following
SSIDs on channel 5, and these are set by the /etc/init.d/meshconfig script.

CommotionSetup-ap (public AP)
CommotionSetup-secure (encrypted AP)
CommotionSetup-mesh (adhoc)

Shortly after first boot (how long?), the node will be assigned a unique
numerical ID like 2022497.  I think the node also converts its root
filesystem from squashfs to jffs during this time too, meaning it shouldn't
be powered down.

The meshconfig script will then update the SSID's broadcast by the node as
such:

commotion_2022497_ap (public AP)
commotion_2022497_secure (private AP)
commotionwireless.net (adhoc)

At this point, the nodes should be able to automatically distinguish which
is a repeater and which is a gateway node, meshing with each other over the
""commotionwireless.net"" signal.  Likewise, each node will accept wifi
clients on both their public and private APs (WPA key ""c0MM0t10N!r0ckS!""),
displaying the Commotion splash page on your first port 80 request if that
was compiled in.

It looks like there was wiki page sneaking around with lots of these
details already, tho I think a bit out of date now:
https://code.commotionwireless.net/projects/commotion/wiki/Newbie_How_it_Works

On Fri, Jun 8, 2012 at 2:09 PM, Ben West <me at benwest.name> wrote:

> Hi All,
>
> I see that the boot script /etc/init.d/meshconfig in Commotion OpenWRT
> looks to do much of the heavy lifting in configuring a node, and that
> this tool is unique to Commotion rather than taken from another source
> (like meshwizard).  I fully understand this tool is still under
> development, and that issues were just filed today on Redmine asking
> for documentation.  Just trying to get a better idea of where to
> start.
>
> I was able to get several nodes meshing together using OpenWRT r31639
> a few weeks back, but attempts so far with r32002 are falling flat.
> So, the original behavior of those functioning nodes is a bit of a
> mystery.
>
> From what I've observed so far, a newly flashed node upon 1st boot
> should broadcast the following SSIDs on channel 5, and these are set
> by the apply_wireless_defaults() function in /etc/init.d/meshconfig,
> correct?
>
> CommotionSetup-ap (public AP)
> CommotionSetup-secure (encrypted AP)
> CommotionSetup-mesh (adhoc)
>
> After a node receives its unique configuration, whereby it gets a
> assigned a unique numerical ID like 2022497, it should then broadcast
> these SSIDs instead, which are also set by the meshconfig script,
> correct?
>
> commotion_2022497_ap (public AP)
> commotion_2022497_secure (private AP)
> commotionwireless.net (adhoc)
>
> How is the per-node configuration supposed to occur?  I.e. is the node
> supposed to configure itself upon 1st or 2nd boot?  Is the user
> supposed to SSH into 192.168.1.20 to issue commands at the prompt?
> Or, is the user supposed to connect wirelessly to one of the node's
> ""CommotionSetup"" APs and enter config info thru a web UI?
>
> Likewise, how does a node know whether it is a gateway (e.g. wired
> uplink on its LAN port) or just a repeater?  Is it supposed to
> automatically detect presence of an upstream DHCP server on its LAN
> port, or must these roles be specified explicitly under /etc/...
>
> Thanks.
>
> --
> Ben West
> me at benwest.name
"
580,Commotion-dev, Your message to Chambana-rooters awaits moderator,"Mon, 25 Jun 2012 08:09:04 +0000",+0000,chambana-rooters-bounces at lists.chambana.net,"Your mail to 'Chambana-rooters' with the subject

    Commotion Wireless Project account activation request

Is being held until the list moderator can review it for approval.

The reason it is being held:

    Too many recipients to the message

Either the message will get posted to the list, or you will receive
notification of the moderator's decision.  If you would like to cancel
this posting, please visit the following URL:

    http://lists.chambana.net/mailman/confirm/chambana-rooters/a0e82d88bed0af7920c7ce6cb2cad899672cb2e0


"
581,Commotion-dev, Help w/ Commotion dev/deployment for upcoming,"Mon, 25 Jun 2012 16:11:08 -0400",-0400,Andy Gunn,
582,Commotion-dev, Help w/ Commotion dev/deployment for upcoming,"Tue, 26 Jun 2012 17:01:43 -0400",-0400,Hans-Christoph Steiner,"
How about trying out the MeshTether app for Android too?  It currently defaults to 'commotionwireless.net' and the GUI isn't complete, but it has been working for us with the nanostation that OTI gave us.

You can point people here to download the nightly builds:
https://guardianproject.info/builds/CommotionMeshTether/
"
583,Commotion-dev, Help w/ Commotion dev/deployment for upcoming,"Wed, 27 Jun 2012 08:28:01 -0400",-0400,bame at riverrock.org,"Somebody who now works at OTI who shall remain nameless :-) set up a
Fonera last year to simply repeat to the timeout/passworded campus
network but without the hassle of password and timeouts.  I loved it.

A potentially interesting challenge is that, as I recall, the high-use
campus network areas frequently suffered capacity problems, so I'd often
wander off to a remote hallway (part of that was probably my laptop's
finicky WiFi too).  A mesh uplinked with the campus network in several
locations could theoretically help spread traffic and diffuse the
capacity problem, though I don't recall anything in olsrd which would
automaticaly adapt or change the 0/0 route to make that actually happen.

	-p
"
584,Commotion-dev," Working compiled images for atheros and ar71xx,","Thu, 28 Jun 2012 04:42:05 -0500",-0500,Ben West,"Howdy All,

Sorry if this is too late for the mesh deployment underway at AMC.

I just published a bunch of new images for ar71xx, atheros, and
stripped-down images for FONs.
 The stripped-down ""atheros-ar2315-minimal"" images for FON do not have the
luci web UI or the splash page, but they will mesh fine.  The un-stripped
atheros and ar71xx images do have luci and the splash page, both of which
worked OK in testing.

It took a while to get the stripped-down Commotion OpenWRT working reliably
for FON2100's.  It may just be the FONs I was testing with, but I found
they will spontaneously reboot (or just lock up) if they run out of free
RAM.

http://info.gowasabi.net/commotion-openwrt/openwrt/bin/
    |-- bin
        |-- ar71xx Full Commotion OpenWRT images for ar71xx nodes
        |-- atheros Slightly stripped-down Commotion OpenWRT images for
atheros nodes w/ 32MB RAM, e.g. OM1P, EOC-1650
        `-- atheros-ar2315-minimal Minimal Commotion OpenWRT images for
atheros AR2315 nodes w/ 16MB RAM (e.g. FON2100), no luci web UI

All of these images have a default root password r0ot56c0MM0t10N, so the
ar71xx nodes can be flashed remotely w/ the sysupgrade tool.  You should
still be able to SSH into each node's LAN port at IP 192.168.1.20, too.

I was even able to reflash a node remotely via the SSH console, although,
again, the sysupgrade tool won't with the atheros nodes, just ar71xx nodes.

-- 
Ben West
me at benwest.name
"
585,Commotion-dev," OLSR sensitivity to node's local time,","Thu, 28 Jun 2012 05:02:05 -0500",-0500,Ben West,"I'm starting this as a separate thread, in case the problem also arises for
the folks testing on Android.

I've found that if a repeater node boots up with its local time grossly out
of sync (ath5k devices especially), and it is unable to sync its local time
via ntpdate, then it may not find its gateway route and thus not pass any
client traffic.  The node will still be accessible to SSH from other nodes
on the mesh, so you can login manually to set a default route and update
local time, but the OLSR assignment of default route appears to fail until
local time is updated.

A further complication is that a repeater node with badly out-of-sync local
time seems to also cause neighboring repeater nodes to also not find their
default route, i.e. spreading the problem to more than one node.  This
problem, as I've observed it, is extremely sporadic.  E.g. rebooting all
nodes in the mesh can fix it.

The best measure I've found to avoid the problem is to use the OLSR
SmartGateway feature (which Commotion OpenWRT does), along with a recurring
ntpdate job that periodically sync the node's local time.  That is, if
ntpdate doesn't succeed on boot-up due to no Internet access, it will run
again (and again) after a few minutes, until the gateway node is available.
 (The images I just published in the previous thread do this.)

I had posed this question on the olsr-users listserv a while back, although
no one was quite sure what caused the problem.  OLSRd itself shouldn't have
a hard dependency on whether the node's local time is in sync.

Finally, do please note this problem is not unique to Commotion.  I've
experienced it on mesh nodes running ROBIN and plain vanilla OpenWRT
Backfire.

-- 
Ben West
me at benwest.name
"
586,Commotion-dev, Your message to Chambana-rooters awaits moderator,"Thu, 28 Jun 2012 16:11:42 +0000",+0000,chambana-rooters-bounces at lists.chambana.net,"Your mail to 'Chambana-rooters' with the subject

    Commotion Wireless Project account activation request

Is being held until the list moderator can review it for approval.

The reason it is being held:

    Too many recipients to the message

Either the message will get posted to the list, or you will receive
notification of the moderator's decision.  If you would like to cancel
this posting, please visit the following URL:

    http://lists.chambana.net/mailman/confirm/chambana-rooters/016e76b8037867f27dee0023f7cf1650d90767a2

"
587,Commotion-dev, Commotion Mesh Tether wireframes,"Thu, 28 Jun 2012 12:51:44 -0400",-0400,Hans-Christoph Steiner,"
We're using Balsamiq for the GUI mockups, and we just started using its
nice web integration.  You can view and comment without an account, and
if you want to create change proposals and edit things, we can add your
account.

Here's the current state of the mockups for Commotion Mesh Tether:

https://guardianproject.mybalsamiq.com/projects/commotion/grid

.hc
"
588,Commotion-dev, Commotion Mesh Tether wireframes,"Thu, 28 Jun 2012 13:00:09 -0400",-0400,Nathan of Guardian,"On 06/28/2012 12:51 PM, Hans-Christoph Steiner wrote:
> We're using Balsamiq for the GUI mockups, and we just started using its
> nice web integration.  You can view and comment without an account, and
> if you want to create change proposals and edit things, we can add your
> account.

Two additional views offered:

1) Prototype view - where you can click through the UI (though you have
to click on the right spot!):
https://guardianproject.mybalsamiq.com/projects/commotion/naked/homescreen_view?key=b21a42e332d1fbcd1c0d68957d0c24d8f8510f19

2) Story view: a more fluid river of screens:
https://guardianproject.mybalsamiq.com/projects/commotion/story

As a side note, Balsamiq offers free licenses to open-source projects:
http://support.balsamiq.com/customer/portal/articles/131280

Best,
 +n

"
589,Commotion-dev, network profiles in Mesh Tether,"Thu, 28 Jun 2012 14:05:16 -0400",-0400,Hans-Christoph Steiner,"
I think the confusion over the ""profiles"" in the Mesh Tether app stems
from the vague term ""profile"" and lack of context.  These profiles are
network profiles, i.e. all of the settings needed to connect to an OLSR
mesh network.  Here's a quick example:

commotionwireless.net:
	SSID: commotionwireless.net
	BSSID: 02:ca:ff:ee:ba:be
	channel: 5
	DNS: 8.8.8.8 + plugin 127.0.0.1
	LinkQualityAlgorithm ""etx_ffeth""
	IP root: 10.
	netmask: 255.0.0.0


funkfeuer:
	SSID: freiesnetz.www.funkfeuer.at die
	BSSID: 4E:FE:52:36:2E:65
	channel: 1
	DNS: 193.238.157.16
	LinkQualityAlgorithm ""etx_ff""
	IP root: statically assigned, real IPs


And so on and so forth.  The idea is that each profile represents how to
connect to a mesh.  It is a quick and dirty version of the wifi browser
that must be manually configured.  Hopefully, this won't be the final
idea, but before we can do a proper scanner and browser, there is much
work to be done (IP address assignment techniques, SSIDs as mesh
descriptor, etc.).

.hc	
	
"
590,Commotion-dev, network profiles in Mesh Tether,"Thu, 28 Jun 2012 14:15:13 -0400",-0400,David Oliver,"Hans,

Thanks so much for this clarification.

I do think we're missing something, still, however.  We know that olsrd -
the actual daemon software - has many operational parameters.  It's a
problem, however, that we don't really have a good idea what modifying
those parameters means, and we don't have a good idea if or how modifying
such parameters will improve or ruin mesh network connectivity and
performance when mobile networks (and intermittent network users on mobile
devices) are involved.

What this implies to me is that even under the (future) circumstances where
we have an easier ability to discover and connect to mesh networks (which
your definition of the ""profile"" addresses), we do not yet know if, upon
connection, there are other settings/configurations necessary to optimize
performance for specific mesh situations.    Thus, unlike WiFi, there may
need to be two ""layers"" here: (a) connection and (b) optimizing performance.

When I wrote up the scenarios earlier on (and proposed seven profiles,
mostly just dreaming them up since we have no knowledge to support them), I
intended them to be separate from ""network settings"" (network connection
parameters).  Overall, though, my current feeling is that we simply lack
the proper knowledge to understand this second portion and we should just
leave it for the experimenters to discover for us.

Dave

David M. Oliver | david at olivercoady.com | http://olivercoady.com |
http://dmo.tel | @davidmoliver | +1 970 368 2366


On Thu, Jun 28, 2012 at 2:05 PM, Hans-Christoph Steiner <
hans at guardianproject.info> wrote:

>
> I think the confusion over the ""profiles"" in the Mesh Tether app stems
> from the vague term ""profile"" and lack of context.  These profiles are
> network profiles, i.e. all of the settings needed to connect to an OLSR
> mesh network.  Here's a quick example:
>
> commotionwireless.net:
>        SSID: commotionwireless.net
>        BSSID: 02:ca:ff:ee:ba:be
>        channel: 5
>        DNS: 8.8.8.8 + plugin 127.0.0.1
>        LinkQualityAlgorithm ""etx_ffeth""
>        IP root: 10.
>        netmask: 255.0.0.0
>
>
> funkfeuer:
>        SSID: freiesnetz.www.funkfeuer.at die
>        BSSID: 4E:FE:52:36:2E:65
>        channel: 1
>        DNS: 193.238.157.16
>        LinkQualityAlgorithm ""etx_ff""
>        IP root: statically assigned, real IPs
>
>
> And so on and so forth.  The idea is that each profile represents how to
> connect to a mesh.  It is a quick and dirty version of the wifi browser
> that must be manually configured.  Hopefully, this won't be the final
> idea, but before we can do a proper scanner and browser, there is much
> work to be done (IP address assignment techniques, SSIDs as mesh
> descriptor, etc.).
>
> .hc
>
>
"
591,Commotion-dev, Your message to Chambana-rooters awaits moderator,"Fri, 29 Jun 2012 00:23:46 +0000",+0000,chambana-rooters-bounces at lists.chambana.net,"Your mail to 'Chambana-rooters' with the subject

    Commotion Wireless Project account activation request

Is being held until the list moderator can review it for approval.

The reason it is being held:

    Too many recipients to the message

Either the message will get posted to the list, or you will receive
notification of the moderator's decision.  If you would like to cancel
this posting, please visit the following URL:

    http://lists.chambana.net/mailman/confirm/chambana-rooters/37a4fcade09177edbe5cdb42ee42b6610093debe

"
592,Commotion-dev, updated Ubuntu packages in Commotion PPA,"Thu, 28 Jun 2012 23:16:33 -0400",-0400,Hans-Christoph Steiner,"
I've updated the olsrd Debian package and made Commotion-tweaked builds
for Ubuntu in our Commotion PPA.  You should able to able to do:

1) add this PPA:
   https://launchpad.net/~guardianproject/+archive/commotion/
2) apt-get install olsrd
3) edit /etc/default/olsrd to set START_OLSRD=YES and START_ADHOC=YES
4) sudo /etc/init.d/olsrd start

That should be enough to then have a working mesh connection to
commotionwireless.net.  If anyone could test this, I'd love to hear how
it works for them.

.hc
"
593,Commotion-dev, Your message to Chambana-rooters awaits moderator,"Fri, 29 Jun 2012 03:57:42 +0000",+0000,chambana-rooters-bounces at lists.chambana.net,"Your mail to 'Chambana-rooters' with the subject

    Commotion Wireless Project account activation request

Is being held until the list moderator can review it for approval.

The reason it is being held:

    Too many recipients to the message

Either the message will get posted to the list, or you will receive
notification of the moderator's decision.  If you would like to cancel
this posting, please visit the following URL:

    http://lists.chambana.net/mailman/confirm/chambana-rooters/2e5f7782b03a7d7e5b1eaea62755ba81167a74bf

"
594,Commotion-dev, updated Ubuntu packages in Commotion PPA,"Fri, 29 Jun 2012 12:45:57 -0400",-0400,Jordan McCarthy,
595,Commotion-dev, updated Ubuntu packages in Commotion PPA,"Fri, 29 Jun 2012 12:50:28 -0400",-0400,Hans-Christoph Steiner,"
Oops, I moved it to /usr/sbin since it must be run as root.  Where did
you see the reference to /usr/bin/olsrd-adhoc-setup?  I'd like to fix that.

But you shouldn't have to run that script manually if you edit
/etc/default/olsrd and uncomment START_ADHOC=YES

.hc

On 06/29/2012 12:45 PM, Jordan McCarthy wrote:
> Hi Hans-Christoph,
> 	Is /usr/bin/olsrd-adhoc-setup supposed to be included in the
> installer package?  On my test system that script was not created
> during the install, so I had to enlist Will to help me get the mesh0
> interface created and properly associated.
> 
> Other than that, though, things seem to be working nicely.
> 
> - Jordan
> 
> Jordan McCarthy
> Technical Research Associate | Open Technology Institute | New America
> Foundation
> My Public Key: C08D8042
> 
> On 06/28/2012 11:16 PM, Hans-Christoph Steiner wrote:
> 
"
596,Commotion-dev, complete Android GUI mockups,"Wed, 20 Jun 2012 13:13:35 -0400",-0400,Michael Gregor,"Thanks so much for sharing your UI mockups. They were very useful in giving us some more perspective and ideas for the HIG, which we are writing now. I've included some draft sections of the HIG below - feel free to use this in your development or send me back your comments on things you feel strongly about.

Also, please read this when you get a chance to see some of our ideas: https://blog.commotionwireless.net/blog/2012/05/user-interface-prototype-what-commotion-software-could-look

Here's a compilation of our thoughts on the design you proposed. Some of it may be redundant with conversations with OTI.

It would be best to use the common language proposed below.
It would be best to use the Commotion colors, typeface, and other brand assets. You can find the complete usage guidelines at https://blog.commotionwireless.net/files/Commotion%20Brand.pdf and the individual files at nina.inst7.thermitic.net/commotion_assets061912.zip
We like the status bar icon idea, which we hadn't thoroughly considered before. We do think that the icon should be a signal strength bar instead of color-coded. Users are far more familiar with strength bars on their cell phones and computers. We will draft an icon that could be used here.
It's unclear to us why profiles are necessary and seem to complicate the process. From our understanding, the basic user will only need to occasionally set their network name and channel. Are there reasons why a basic user would need to save more than that? We're unsure of the rationale. 
We think that the network status page should be displayed differently: simply using text for this phase of the project. In future iterations, it would be great to see visualizations. We're concerned that the hexagon layout cannot accurately represent the real world (arrangement of nodes in space) and can be confusing due to fundamental geometric restraints. In the HIG, we're going to propose a simple status page and mention that developers could use some sort of network visualization tool in the advanced area.
We're also thinking of including the log in the native menu in Android or in the green footer on all other applications.
We like the notification concept!

Let us know if you have feedback on anything here.

All the best,

Michael

"
597,Commotion-dev, Your message to Chambana-rooters awaits moderator,"Mon, 02 Jul 2012 15:53:42 +0000",+0000,chambana-rooters-bounces at lists.chambana.net,"Your mail to 'Chambana-rooters' with the subject

    Commotion Wireless Project account activation request

Is being held until the list moderator can review it for approval.

The reason it is being held:

    Too many recipients to the message

Either the message will get posted to the list, or you will receive
notification of the moderator's decision.  If you would like to cancel
this posting, please visit the following URL:

    http://lists.chambana.net/mailman/confirm/chambana-rooters/61518b3ba486cca125616864ea3ecea6f8e01334

"
598,Commotion-dev, Your message to Chambana-rooters awaits moderator,"Mon, 02 Jul 2012 16:01:14 +0000",+0000,chambana-rooters-bounces at lists.chambana.net,"Your mail to 'Chambana-rooters' with the subject

    Commotion Wireless Project account activation request

Is being held until the list moderator can review it for approval.

The reason it is being held:

    Too many recipients to the message

Either the message will get posted to the list, or you will receive
notification of the moderator's decision.  If you would like to cancel
this posting, please visit the following URL:

    http://lists.chambana.net/mailman/confirm/chambana-rooters/bc5a22f22da3c59c49cc452ee19aa3acb05bdb91

"
599,Commotion-dev, [PATCH] Refactor MeshService to support stopping,"Mon,  2 Jul 2012 16:21:55 -0400",-0400,Will Hawkins,"Refactor MeshService.java so that we can properly
stop olsrd when the user presses Stop. This consolidates
all the process monitoring into a MeshTetherProcess
app that handles start, stop and i/o redirection.
"
600,Commotion-dev, Your message to Chambana-rooters awaits moderator,"Tue, 03 Jul 2012 02:49:27 +0000",+0000,chambana-rooters-bounces at lists.chambana.net,"Your mail to 'Chambana-rooters' with the subject

    Commotion Wireless Project account activation request

Is being held until the list moderator can review it for approval.

The reason it is being held:

    Too many recipients to the message

Either the message will get posted to the list, or you will receive
notification of the moderator's decision.  If you would like to cancel
this posting, please visit the following URL:

    http://lists.chambana.net/mailman/confirm/chambana-rooters/f1f7364c8a3e9f3d7ced557787bc33ba396ac250

"
601,Commotion-dev, jsoninfo updates: UUID and /sys/class/net info,"Tue, 3 Jul 2012 09:52:11 -0400",-0400,Benjamin Chodoroff,"hi josh! did you end up getting started on the openwrt json mesh
endpoint? is there a reason to do this via luci vs. via an olsrd
plugin?

-b

On Wed, Jun 6, 2012 at 3:23 PM, Josh King <jking at chambana.net> wrote:
> Hi Hans,
>
> This is great, and I like the addition of the UUID (especially since
> I'm working on better unique identifiers for nodes right now anyway).
> I'm thinking about working on a LuCI plugin to expose mesh information
> through the JSON API on OpenWRT; I'm planning on using this as a
> template.
>
> On Tue 05 Jun 2012 08:05:22 PM EDT, Hans-Christoph Steiner wrote:
"
602,Commotion-dev, jsoninfo updates: UUID and /sys/class/net info,"Tue, 3 Jul 2012 10:49:52 -0400",-0400,Hans-Christoph Steiner,"
luci sounds interesting, can luci export all the olsrd data that available in txtinfo or httpinfo (things like HNA, neighbors, links, etc.)?  I've ended up putting additional status data into jsoninfo as well.  In any case, sounds like there should be some kind of merge between jsoninfo and luci, for openwrt nodes at least.  luci probably won't help us on everything else.

As for jsoninfo, I highly recommend using the version from git, rather than the version in the 0.6.3 release.  There have been many improvements and bugfixes.

.hc


On Jul 3, 2012, at 9:52 AM, Benjamin Chodoroff wrote:

> hi josh! did you end up getting started on the openwrt json mesh
> endpoint? is there a reason to do this via luci vs. via an olsrd
> plugin?
> 
> -b
> 
> On Wed, Jun 6, 2012 at 3:23 PM, Josh King <jking at chambana.net> wrote:
"
603,Commotion-dev, updated Ubuntu packages in Commotion PPA,"Tue, 3 Jul 2012 11:30:15 -0400",-0400,Hans-Christoph Steiner,"
On Jul 2, 2012, at 6:45 PM, Jordan McCarthy wrote:

> "
604,Commotion-dev, [PATCH] Refactor MeshService to support,"Wed, 4 Jul 2012 16:10:38 -0400",-0400,Hans-Christoph Steiner,"
Ok, the attached patch worked.  I got it integrated in and its working for me.  Yay, we can finally stop olsrd from the GUI!

One thing I think we could improve is running a single root shell which we feed commands too.  That means SuperUser would only ask once for root access, not for each command.  That makes it much easier to use MeshTether without having to grant it automatic root access.

One other detail: we should probably check if an olsrd is left running in onCreate() or something.  If MeshTether crashes (shudder the thought) it'll leave olsrd running.  Or even better, find a way to always kill olsrd when MeshTether crashes.

.hc

On Jul 2, 2012, at 4:21 PM, Will Hawkins wrote:

> Refactor MeshService.java so that we can properly
> stop olsrd when the user presses Stop. This consolidates
> all the process monitoring into a MeshTetherProcess
> app that handles start, stop and i/o redirection.
> "
605,Commotion-dev, startard olsrd.conf for commotion?,"Wed, 4 Jul 2012 16:38:44 -0400",-0400,Hans-Christoph Steiner,"
Is there a standard olsrd.conf for Commotion?  I'm collecting olsrd.conf files for various networks and sticking them into olsr.org/olsrd/files/ to serve as reference and examples.

I started putting one together, if this is useful:
"
606,Commotion-dev, startard olsrd.conf for commotion?,"Wed, 4 Jul 2012 16:56:08 -0500",-0500,Ben West,"Hi Hans,

My observation is that the meshconfig tool will dynamically create
/var/etc/olsrd.conf upon power-up, so that it can populate the file with
stanzas for the appropriate interfaces.

I think this is done to distinguish gateway from repeater nodes.

On Wed, Jul 4, 2012 at 3:38 PM, Hans-Christoph Steiner <
hans at guardianproject.info> wrote:

>
> Is there a standard olsrd.conf for Commotion?  I'm collecting olsrd.conf
> files for various networks and sticking them into olsr.org/olsrd/files/to serve as reference and examples.
>
> I started putting one together, if this is useful:
>
>
>
> .hc
> _______________________________________________
> Commotion-dev mailing list
> Commotion-dev at lists.chambana.net
> http://lists.chambana.net/mailman/listinfo/commotion-dev
>
"
607,Commotion-dev, startard olsrd.conf for commotion?,"Thu, 05 Jul 2012 11:52:13 -0400",-0400,Will Hawkins,"Hey Hans,


On 07/04/2012 05:56 PM, Ben West wrote:
> Hi Hans,
> 
> My observation is that the meshconfig tool will dynamically create
> /var/etc/olsrd.conf upon power-up, so that it can populate the file with
> stanzas for the appropriate interfaces.

This is my understanding as well.

I have attached an example olsrd.conf file from a running node. The
subnets announced using HNA are automatically selected based on the
node's running configuration. You will see where other parameters are
determined based upon the node's configuration (e.g., nameservice, p2pd).

>From my work getting a good olsrd.conf for the Android app that works
with Commotion, it seems like the LinkQualityLevel and
LinkQualityAlgorithm are the most important parameters to match.

I hope this helps,
Will

> 
> I think this is done to distinguish gateway from repeater nodes.
> 
> On Wed, Jul 4, 2012 at 3:38 PM, Hans-Christoph Steiner
> <hans at guardianproject.info <mailto:hans at guardianproject.info"
608,Commotion-dev, [PATCH] Refactor MeshService to support,"Wed, 04 Jul 2012 20:29:24 -0400",-0400,Will Hawkins," 

Glad it worked! See comments inline.


On Wednesday, July 4, 2012 16:10 EDT, Hans-Christoph Steiner <hans at guardianproject.info> wrote: 
 
> 
> Ok, the attached patch worked.  I got it integrated in and its working for me.  Yay, we can finally stop olsrd from the GUI!

Yes!

> 
> One thing I think we could improve is running a single root shell which we feed commands too.  That means SuperUser would only ask once for root access, not for each command.  That makes it much easier to use MeshTether without having to grant it automatic root access.

This is a very good idea. The reason that I shied away from this in the past is that getting the quoting of parameters right for 'su -c' is tricky. Having said that, it is definitely import for usability that the user need not press ""Grant"" over and over. On Thursday I will start to work through this and channel all calls through the su_c shell script.

> 
> One other detail: we should probably check if an olsrd is left running in onCreate() or something.  If MeshTether crashes (shudder the thought) it'll leave olsrd running.  Or even better, find a way to always kill olsrd when MeshTether crashes.

Good thought. I will check on this and make the necessary changes!

Will
> 
> .hc
> 
> On Jul 2, 2012, at 4:21 PM, Will Hawkins wrote:
> 
> > Refactor MeshService.java so that we can properly
> > stop olsrd when the user presses Stop. This consolidates
> > all the process monitoring into a MeshTetherProcess
> > app that handles start, stop and i/o redirection.
> > "
609,Commotion-dev," ""links"" view on Mesh Tether","Thu, 5 Jul 2012 14:39:59 -0400",-0400,Hans-Christoph Steiner,"
I just implemented a basic view of the first hop links of the phone.  You can see the LQ and NLQ in little bars, and you can watch it change when first connecting.  The green LED thing is on when that node has an HNA:

"
610,Commotion-dev, Commotion HIG,"Thu, 5 Jul 2012 20:57:28 -0400",-0400,Michael Gregor,"Hi all,

I'm excited to share that our draft of the Commotion Human Interface Guidelines is complete!

You can view it at http://commotion-kb-062512.jackpine.theworkdept.com/.

This guide is a starting point and will evolve over time, with your help. Please read it and add any comments you have by Friday, July 13. After receiving this round of feedback, we will make edits as appropriate and release the final draft later this month.

Thanks for your help in creating an outstanding Commotion UI!

All the best,

Michael


- - - -
Michael Gregor
Digital Strategy Consultant
313.437.1244 (office)
theworkdept.com


This email message and any attached files are confidential and are intended solely for the use of the addressee(s) named above. If you are not the intended recipient, any review, use, dissemination, forwarding, printing, copying, or other distribution of this email message and any attached files is strictly prohibited.

"
611,Commotion-dev, startard olsrd.conf for commotion?,"Fri, 6 Jul 2012 12:33:27 -0400",-0400,Hans-Christoph Steiner,"
On Jul 5, 2012, at 11:52 AM, Will Hawkins wrote:

> Hey Hans,
> 
> 
> On 07/04/2012 05:56 PM, Ben West wrote:
"
612,Commotion-dev, startard olsrd.conf for commotion?,"Fri, 06 Jul 2012 12:38:11 -0400",-0400,Will Hawkins,"I am definitely not the person to ask :-) We should ask Josh for
confirmation before we drop something into the olsrd repo that is
considered the Commotion default.

However, if I was a betting man, I would say that it's very close to
being correct!

Will

On 07/06/2012 12:33 PM, Hans-Christoph Steiner wrote:
> 
> On Jul 5, 2012, at 11:52 AM, Will Hawkins wrote:
> 
"
613,Commotion-dev, startard olsrd.conf for commotion?,"Fri, 06 Jul 2012 13:43:24 -0400",-0400,Josh King,"Hi Hans,

The default olsrd.conf's that I've seen in packages for other distros 
have typically had a lot more comments in them, clarifying the options. 
So if you're suggesting replacing a the default .conf file in the 
Debian repo, it might be better to take the existing default file, 
change the settings to be in line with the settings in this file (minus 
the HNAs and Interface addressing, given that those are node-specific) 
and test. That may be what you're already suggesting.

On Fri 06 Jul 2012 12:38:11 PM EDT, Will Hawkins wrote:
> I am definitely not the person to ask :-) We should ask Josh for
> confirmation before we drop something into the olsrd repo that is
> considered the Commotion default.
>
> However, if I was a betting man, I would say that it's very close to
> being correct!
>
> Will
>
> On 07/06/2012 12:33 PM, Hans-Christoph Steiner wrote:
"
614,Commotion-dev, startard olsrd.conf for commotion?,"Fri, 6 Jul 2012 14:13:14 -0400",-0400,Hans-Christoph Steiner,"
The idea here is an example olsrd.conf for running networks.  The default olsrd.conf is the one with all the comments, that's staying.  What I'm doing now is collecting real world examples to put into /usr/share/doc/olsrd/examples.  These should be the opposite of the default olsrd.conf in that they should only have the things that need to be set in there.

Then people can just copy the conf file from there when setting up a node for a given network.  There are already files for funkfeuer and freifunk there.  These also serve as a good example for ""best practices"" when people are creating their own meshes.

.hc

On Jul 6, 2012, at 1:43 PM, Josh King wrote:

> Hi Hans,
> 
> The default olsrd.conf's that I've seen in packages for other distros 
> have typically had a lot more comments in them, clarifying the options. 
> So if you're suggesting replacing a the default .conf file in the 
> Debian repo, it might be better to take the existing default file, 
> change the settings to be in line with the settings in this file (minus 
> the HNAs and Interface addressing, given that those are node-specific) 
> and test. That may be what you're already suggesting.
> 
> On Fri 06 Jul 2012 12:38:11 PM EDT, Will Hawkins wrote:
"
615,Commotion-dev, startard olsrd.conf for commotion?,"Fri, 06 Jul 2012 14:18:07 -0400",-0400,Josh King,"Oh, awesome. In that case, yes, that should be fine as an example 
olsrd.conf.

On Fri 06 Jul 2012 02:13:14 PM EDT, Hans-Christoph Steiner wrote:
>
> The idea here is an example olsrd.conf for running networks.  The default olsrd.conf is the one with all the comments, that's staying.  What I'm doing now is collecting real world examples to put into /usr/share/doc/olsrd/examples.  These should be the opposite of the default olsrd.conf in that they should only have the things that need to be set in there.
>
> Then people can just copy the conf file from there when setting up a node for a given network.  There are already files for funkfeuer and freifunk there.  These also serve as a good example for ""best practices"" when people are creating their own meshes.
>
> .hc
>
> On Jul 6, 2012, at 1:43 PM, Josh King wrote:
>
"
616,Commotion-dev, startard olsrd.conf for commotion?,"Fri, 6 Jul 2012 14:34:30 -0400",-0400,Hans-Christoph Steiner,"
I tweaked it a bit to be more relevant to Debian and committed it:

http://olsr.org/git/?p=olsrd.git;a=commit;h=9d93391d72e377848347f700e76c8761245c1f58

.hc

On Jul 6, 2012, at 2:18 PM, Josh King wrote:

> Oh, awesome. In that case, yes, that should be fine as an example 
> olsrd.conf.
> 
> On Fri 06 Jul 2012 02:13:14 PM EDT, Hans-Christoph Steiner wrote:
"
617,Commotion-dev, Your message to Chambana-rooters awaits moderator,"Sat, 07 Jul 2012 13:07:49 +0000",+0000,chambana-rooters-bounces at lists.chambana.net,"Your mail to 'Chambana-rooters' with the subject

    Commotion Wireless Project account activation request

Is being held until the list moderator can review it for approval.

The reason it is being held:

    Too many recipients to the message

Either the message will get posted to the list, or you will receive
notification of the moderator's decision.  If you would like to cancel
this posting, please visit the following URL:

    http://lists.chambana.net/mailman/confirm/chambana-rooters/1cfab13bd1644d7e94a14a9a7766274cee12e792

"
618,Commotion-dev, Your message to Chambana-rooters awaits moderator,"Sun, 08 Jul 2012 12:19:44 +0000",+0000,chambana-rooters-bounces at lists.chambana.net,"Your mail to 'Chambana-rooters' with the subject

    Commotion Wireless Project account activation request

Is being held until the list moderator can review it for approval.

The reason it is being held:

    Too many recipients to the message

Either the message will get posted to the list, or you will receive
notification of the moderator's decision.  If you would like to cancel
this posting, please visit the following URL:

    http://lists.chambana.net/mailman/confirm/chambana-rooters/6a90721a2201aa6ffd621e1e7ed45d4b42729e9e

"
619,Commotion-dev, [PATCH] Refactor MeshService to support,"Mon, 9 Jul 2012 13:08:48 +0930",+0930,Jeremy Lakeman,"On Thu, Jul 5, 2012 at 5:40 AM, Hans-Christoph Steiner
<hans at guardianproject.info> wrote:
>
> Ok, the attached patch worked.  I got it integrated in and its working for me.  Yay, we can finally stop olsrd from the GUI!
>
> One thing I think we could improve is running a single root shell which we feed commands too.  That means SuperUser would only ask once for root access, not for each command.  That makes it much easier to use MeshTether without having to grant it automatic root access.

Something like this?

https://github.com/servalproject/batphone/tree/418223aca4d4a0aaaa4ab82f072d4049197aa822/src/org/servalproject/shell
"
620,Commotion-dev, [PATCH] Refactor MeshService to support,"Mon, 09 Jul 2012 10:54:12 -0400",-0400,Will Hawkins,"Jeremy,

Thanks for sending this along. This looks incredibly promising. It looks like you may have already implemented what I had outlined as a solution. I have not yet had a chance to fully digest the code, but when I do I may send along some questions. Thanks very much for sending this!

Will

On Sunday, July 8, 2012 23:38 EDT, Jeremy Lakeman <Jeremy.Lakeman at gmail.com> wrote: 
 
> On Thu, Jul 5, 2012 at 5:40 AM, Hans-Christoph Steiner
> <hans at guardianproject.info> wrote:
> >
> > Ok, the attached patch worked.  I got it integrated in and its working for me.  Yay, we can finally stop olsrd from the GUI!
> >
> > One thing I think we could improve is running a single root shell which we feed commands too.  That means SuperUser would only ask once for root access, not for each command.  That makes it much easier to use MeshTether without having to grant it automatic root access.
> 
> Something like this?
> 
> https://github.com/servalproject/batphone/tree/418223aca4d4a0aaaa4ab82f072d4049197aa822/src/org/servalproject/shell
 
 
 
 

"
621,Commotion-dev, [PATCH] Refactor MeshService to support,"Mon, 09 Jul 2012 16:30:22 -0400",-0400,Nathan of Guardian,"On 07/09/2012 10:54 AM, Will Hawkins wrote:
> Thanks for sending this along. This looks incredibly promising. It looks like you may have already implemented what I had outlined as a solution. I have not yet had a chance to fully digest the code, but when I do I may send along some questions. Thanks very much for sending this!

Agreed, that is a nice bit of code!

However, what it comes down to is that if you call ""su"" as your exec
command, then write to the outputstream after that, then the user will
only be prompted once for root.

Process proc = Runtime.getRuntime().exec(""su"");
proc.getOutputStream().write(""foobin arg1 arg2"");

Our less elegant doShellCommand() here is an example of this same
phenomenon:
https://gitweb.torproject.org/n8fr8/orbot.git/blob/HEAD:/src/org/torproject/android/service/TorServiceUtils.java#l173

+n

"
622,Commotion-dev, getting the starting running without 'wifi',"Fri, 13 Jul 2012 10:23:40 -0400",-0400,Hans-Christoph Steiner,"
Its been killing me trying to get a version of the app that doesn't use
the 'wifi' utility.  The existing setup of the app used to run the
'wifi' process seems to play an integral part of the app knowing what to do.

Will, do you have any insight on how to make a version that only starts
olsrd and doesn't run 'wifi' at all? It seems that the WifiProcess
expects the script to stay running and regularly report back, but I'm
not sure what it reports back.

.hc

"
623,Commotion-dev, ssh host key for git.chambana.net?,"Fri, 13 Jul 2012 10:38:29 -0400",-0400,Hans-Christoph Steiner,"
I just got prompted to validate the ssh host key for git.chambana.net,
which surprised me a bit, so I wanted to run it by everyone for
confirmation.  I do have this key already in my Mac, but I want to be
sure. Could someone post a pgp-signed mail with the right fingerprints
for the ssh host keys?  It would also be good to post it to the wiki
with a pgp signature.

(by the way, to get this printout straight from the source i.e. the
server run: ssh-keygen -lv -f /etc/ssh/ssh_host_rsa_key )


This is what I have:
hans at palatschinken commotion-android $ git push
The authenticity of host 'git.chambana.net (209.66.96.76)' can't be
established.
RSA key fingerprint is 11:0e:ab:6d:48:b3:55:ff:f3:f9:0e:a4:2f:b6:1d:3b.
+--[ RSA 2048]"
624,Commotion-dev, ssh host key for git.chambana.net?,"Fri, 13 Jul 2012 11:12:52 -0400",-0400,Andrew Reynolds,"That appears to be the correct key:
ssh-keygen -lv -f /etc/ssh/ssh_host_rsa_key
2048 11:0e:ab:6d:48:b3:55:ff:f3:f9:0e:a4:2f:b6:1d:3b  root at frost (RSA)
+--[ RSA 2048]"
625,Commotion-dev, ssh host key for git.chambana.net?,"Fri, 13 Jul 2012 22:44:43 -0400",-0400,Hans-Christoph Steiner,"
I'll throw my signature on this key as well for the record.

.hc

On 07/13/2012 11:12 AM, Andrew Reynolds wrote:
> That appears to be the correct key:
> ssh-keygen -lv -f /etc/ssh/ssh_host_rsa_key
> 2048 11:0e:ab:6d:48:b3:55:ff:f3:f9:0e:a4:2f:b6:1d:3b  root at frost (RSA)
> +--[ RSA 2048]"
626,Commotion-dev, Wiki page about OLSR TX Power plugin,"Sun, 15 Jul 2012 18:31:58 -0500",-0500,Ben West,"I added a wiki page to resurrect a rough spec for an OLSRd plugin that
could tweak node TX power to optimize throughput vs. wireless interference,
or to minimize a mesh's spectrum footprint and thus risk of surveillance.

https://code.commotionwireless.net/projects/olsrd/wiki/OLSR-TX-Power-Plugin

This plugin was discussed last year at the OTI code sprint in DC, but it so
far has only existed in stale listserv archives.

-- 
Ben West
me at benwest.name
"
627,Commotion-dev, Wiki page about Commotion dashboard integration,"Sun, 15 Jul 2012 18:40:37 -0500",-0500,Ben West,"I've created this wiki page as as entry point for info about Commotion
dashboard / mesh mapping tool integration.

https://code.commotionwireless.net/projects/commotion-visualizer/wiki/Dashboard-Overview

Examples of such dashboards would be Cloudtrax, Freimap, WLAN-Slovenia Node
Database, and (to a more tangential extent) Tidepools.

-- 
Ben West
me at benwest.name
"
628,Commotion-dev," OLSR sensitivity to node's local time,","Sun, 15 Jul 2012 19:15:43 -0500",-0500,Ben West,"I've filed this as an issue on the Commotion-OpenWRT queue, so that it can
be revisited later if needed:
https://code.commotionwireless.net/issues/331

On Thu, Jun 28, 2012 at 5:02 AM, Ben West <me at benwest.name> wrote:

> I'm starting this as a separate thread, in case the problem also arises
> for the folks testing on Android.
>
> I've found that if a repeater node boots up with its local time grossly
> out of sync (ath5k devices especially), and it is unable to sync its local
> time via ntpdate, then it may not find its gateway route and thus not pass
> any client traffic.  The node will still be accessible to SSH from other
> nodes on the mesh, so you can login manually to set a default route and
> update local time, but the OLSR assignment of default route appears to fail
> until local time is updated.
>
> A further complication is that a repeater node with badly out-of-sync
> local time seems to also cause neighboring repeater nodes to also not find
> their default route, i.e. spreading the problem to more than one node.
>  This problem, as I've observed it, is extremely sporadic.  E.g. rebooting
> all nodes in the mesh can fix it.
>
> The best measure I've found to avoid the problem is to use the OLSR
> SmartGateway feature (which Commotion OpenWRT does), along with a recurring
> ntpdate job that periodically sync the node's local time.  That is, if
> ntpdate doesn't succeed on boot-up due to no Internet access, it will run
> again (and again) after a few minutes, until the gateway node is available.
>  (The images I just published in the previous thread do this.)
>
> I had posed this question on the olsr-users listserv a while back,
> although no one was quite sure what caused the problem.  OLSRd itself
> shouldn't have a hard dependency on whether the node's local time is in
> sync.
>
> Finally, do please note this problem is not unique to Commotion.  I've
> experienced it on mesh nodes running ROBIN and plain vanilla OpenWRT
> Backfire.
>
> --
> Ben West
> me at benwest.name
>
"
629,Commotion-dev, virtualbox and commotion,"Sun, 15 Jul 2012 19:35:10 -0500",-0500,Ben West,"I added a section to Sean's VirtualBox/Commotion writeup, with a rough
draft on options for using VirtualBox to simulate multiple nodes on a mesh.

https://code.commotionwireless.net/projects/commotion/wiki/Virtual-Box

My understanding is that VirtualBox will let you create internal networks
b/w VMs under the same host, which could be used to simulate the mesh,
public APs, and private APs?  All such networks, however, would operate as
logical wired networks, but possibly this is still useful to test out
things like UI or captive portals w/o endless re-flashing of physical nodes.

This would require tweaking meshconfig to properly deploy network config on
a virtual OpenWRT node.

Furthermore, maybe one could create a 3-node virtual mesh of OpenWRT nodes,
and then add a 4th VM running Windows/Ubuntu to simulate a client
connection?

A final interesting detail is the mac80211 hwsim module, which lets you
simulate wireless interfaces (albeit with perfect RSSI).  Such virtual
wireless interfaces will accept the same configuration commands as actual
radios, and I am curious if clever use of the loopback module, bridging, or
hwsim's monitoring netdev could even let one pass packets between separate
VMs.
http://linuxwireless.org/en/users/Drivers/mac80211_hwsim

On Wed, May 23, 2012 at 9:13 PM, Sean McIntyre <boxysean at gmail.com> wrote:

> Hey folks,
>
> Wrote up my experiences setting up VirtualBox with Commotion today.
>
> http://blog.boxysean.com/2012/05/23/virtualbox-and-commotion-openwrt/
>
> Maybe this should go on the wiki, too. Perhaps on a new page here?
> <
> https://code.commotionwireless.net/projects/commotion/wiki/Development_Notes
> >
>
> Sean
>
> _______________________________________________
> Commotion-dev mailing list
> Commotion-dev at lists.chambana.net
> http://lists.chambana.net/mailman/listinfo/commotion-dev
>
"
630,Commotion-dev, Wiki page about OLSR TX Power plugin,"Sun, 15 Jul 2012 20:49:08 -0400",-0400,Hans-Christoph Steiner,"
Sounds very worthwhile This sounds like something to bring up on olsr-dev as well.  Perhaps this could be an olsrd plugin?

.hc

On Jul 15, 2012, at 7:31 PM, Ben West wrote:

> I added a wiki page to resurrect a rough spec for an OLSRd plugin that could tweak node TX power to optimize throughput vs. wireless interference, or to minimize a mesh's spectrum footprint and thus risk of surveillance.
> 
> https://code.commotionwireless.net/projects/olsrd/wiki/OLSR-TX-Power-Plugin
> 
> This plugin was discussed last year at the OTI code sprint in DC, but it so far has only existed in stale listserv archives.
> 
> -- 
> Ben West
> me at benwest.name
> 
> _______________________________________________
> Commotion-dev mailing list
> Commotion-dev at lists.chambana.net
> http://lists.chambana.net/mailman/listinfo/commotion-dev

"
631,Commotion-dev, Wiki page about OLSR TX Power plugin,"Sun, 15 Jul 2012 19:50:13 -0500",-0500,Ben West,"Yes, indeed this is being conceived as an OLSRd plugin.

On Sun, Jul 15, 2012 at 7:49 PM, Hans-Christoph Steiner <
hans at guardianproject.info> wrote:

>
> Sounds very worthwhile This sounds like something to bring up on olsr-dev
> as well.  Perhaps this could be an olsrd plugin?
>
> .hc
>
> On Jul 15, 2012, at 7:31 PM, Ben West wrote:
>
> I added a wiki page to resurrect a rough spec for an OLSRd plugin that
> could tweak node TX power to optimize throughput vs. wireless interference,
> or to minimize a mesh's spectrum footprint and thus risk of surveillance.
>
> https://code.commotionwireless.net/projects/olsrd/wiki/OLSR-TX-Power-Plugin
>
> This plugin was discussed last year at the OTI code sprint in DC, but it
> so far has only existed in stale listserv archives.
>
> --
> Ben West
> me at benwest.name
>
>  _______________________________________________
> Commotion-dev mailing list
> Commotion-dev at lists.chambana.net
> http://lists.chambana.net/mailman/listinfo/commotion-dev
>
>
"
632,Commotion-dev, Wiki page about Commotion dashboard integration,"Mon, 16 Jul 2012 15:03:27 -0400",-0400,Seamus Tuohy,"Hey Ben,

You should also look at the Big Board / Little Board discussion on the 
dev notes wiki for some of our thoughts on an implementation.

https://code.commotionwireless.net/projects/commotion/wiki/BigBoard

Seamus
"
633,Commotion-dev, Wiki page about OLSR TX Power plugin,"Tue, 17 Jul 2012 11:14:37 +0200",+0200,L. Aaron Kaplan,"Ben et al, 

are you aware of the work going on in DLEP right now?
Essentially DLEP is a new RFC draft which is being discussed at the IETF right now . It is a protocol between $radio and $routing_protocol
It can communicate two-way and send commands such as txpwr-- or txpwr++ or read out the SNR and things like that.
Essentially, it is the glue connecting a routing protocol 's metric calculation system with it's radios.
A txpower plugin would fit very neatly into this framework. Take a look at it: http://olsr.org/git/?p=dlep_app.git;a=summary
Henning is the guy to ask for details.

Aaron.

On Jul 16, 2012, at 2:50 AM, Ben West wrote:

> Yes, indeed this is being conceived as an OLSRd plugin.
> 
> On Sun, Jul 15, 2012 at 7:49 PM, Hans-Christoph Steiner <hans at guardianproject.info> wrote:
> 
> Sounds very worthwhile This sounds like something to bring up on olsr-dev as well.  Perhaps this could be an olsrd plugin?
> 
> .hc
> 
> On Jul 15, 2012, at 7:31 PM, Ben West wrote:
> 
"
634,Commotion-dev, publications concerning commotion,"Tue, 17 Jul 2012 12:59:41 +0200",+0200,Stas Stelle,"Hi,
Im an IT security master student at TU Darmstadt in germany.
I joined this list several weeks ago and started following the
contributions in here.
In the meantime I also started to write my master's thesis in the area of
wireless mesh networks and use the commotionwireless project as the basis
of my work.
This is why Im writing to this list now asking:

* Are there scientific papers about projects or ideas which involve
commotionwireless (as for the mesh building)?

* Does commotionwireless support secure routing or other secure mechanisms?

Once my project reached a level where its ""showable"" I would be glad to
announce it on this list :)

Thanks in advance, stas
"
635,Commotion-dev, publications concerning commotion,"Tue, 17 Jul 2012 10:52:01 -0400",-0400,Seamus Tuohy,"
Hey Stas,

* Are there scientific papers about projects or ideas which involve
commotionwireless (as for the mesh building)?

As of right now there are no scientific papers that are ON commotion. 
But, there are many on the ideas and concepts that compose commotion. 
The first thing I would do it go to code.commotionwireless.net and 
check out the development notes section of the main commotion wireless 
project wiki. We throw a bunch of links and references to papers under 
various topics there.  You will want to search for byzantine style 
distributed networks for academic papers on the type of network 
Commotion is creating.

Keep in touch as you work on what exactly your focus is. I have a 
plethora of academic papers referenced in various files and folders.  
If you need any help refining your topic, finding the terms used by 
various fields, or tracking down quality research shoot me an e-mail. I 
have been collecting academic articles on our topics for quite a while.

* Does commotionwireless support secure routing or other secure 
mechanisms?

As of right now the two mechanisms we have implemented are WPA None and 
AuthSAE. Of course this upcoming 6 months to a year is when that will 
be changing quite a bit hopefully.

Let me know if you have any questions. Also, I would love if you would 
send me any interesting or informative articles you find as you do your 
research. I am always looking to find good resources.

Seamus Tuohy
Program Associate
Commotion
"
636,Commotion-dev, Commotion Knowledgebase,"Tue, 17 Jul 2012 10:53:15 -0400",-0400,Michael Gregor,"Hi team! 

We've created a sitemap and wireframes for the Commotion knowledgebase. These outline the basic structure for the website and the very basic page layout for the home page and a few interior pages. We will develop full designs next.  

Take a look at https://www.lucidchart.com/documents/view?#42aa-ff34-4ffef8e6-826c-0dd00ad3924f?branch=e0c261e2-b7ec-4284-b86c-88905055cf09. Please send me any feedback directly.

Thanks!

Michael


- - - -
Michael Gregor
Digital Strategy Consultant
313.437.1244 (office)
theworkdept.com


"
637,Commotion-dev, publications concerning commotion,"Tue, 17 Jul 2012 12:21:13 -0400",-0400,Hans-Christoph Steiner,"
On this topic, I'd love to see research and papers on real world
deployments of impromtu mesh networks, if anyone has any recommendations.

.hc

On 07/17/2012 10:52 AM, Seamus Tuohy wrote:
> 
> Hey Stas,
> 
> * Are there scientific papers about projects or ideas which involve
> commotionwireless (as for the mesh building)?
> 
> As of right now there are no scientific papers that are ON commotion. 
> But, there are many on the ideas and concepts that compose commotion. 
> The first thing I would do it go to code.commotionwireless.net and 
> check out the development notes section of the main commotion wireless 
> project wiki. We throw a bunch of links and references to papers under 
> various topics there.  You will want to search for byzantine style 
> distributed networks for academic papers on the type of network 
> Commotion is creating.
> 
> Keep in touch as you work on what exactly your focus is. I have a 
> plethora of academic papers referenced in various files and folders.  
> If you need any help refining your topic, finding the terms used by 
> various fields, or tracking down quality research shoot me an e-mail. I 
> have been collecting academic articles on our topics for quite a while.
> 
> * Does commotionwireless support secure routing or other secure 
> mechanisms?
> 
> As of right now the two mechanisms we have implemented are WPA None and 
> AuthSAE. Of course this upcoming 6 months to a year is when that will 
> be changing quite a bit hopefully.
> 
> Let me know if you have any questions. Also, I would love if you would 
> send me any interesting or informative articles you find as you do your 
> research. I am always looking to find good resources.
> 
> Seamus Tuohy
> Program Associate
> Commotion
> _______________________________________________
> Commotion-dev mailing list
> Commotion-dev at lists.chambana.net
> http://lists.chambana.net/mailman/listinfo/commotion-dev
> 


"
638,Commotion-dev, pushed commotion-android updates,"Thu, 19 Jul 2012 15:22:16 -0400",-0400,Hans-Christoph Steiner,"
I pushed a bunch of updates to commotion-android, including some stuff
to hopefully make the building easier.  That's documented in the README.txt.

Will, any new stuff in the pipeline?  I just want to stay in sync.

.hc

"
639,Commotion-dev, pushed commotion-android updates,"Fri, 20 Jul 2012 12:59:32 -0400",-0400,Will Hawkins,"Thanks for asking, Hans.

bb854d4bc9ee688bf6d508d09d02aabf83cceaa2 did exactly what I was going to
submit to fix the Atrix bug (discovered during testing with Andrew's
device).

I am nearing completion of the system to run a single ""superuser"" shell.
I will keep you posted on the progress of that.

Will

On 07/19/2012 03:22 PM, Hans-Christoph Steiner wrote:
> 
> I pushed a bunch of updates to commotion-android, including some stuff
> to hopefully make the building easier.  That's documented in the README.txt.
> 
> Will, any new stuff in the pipeline?  I just want to stay in sync.
> 
> .hc
> 
> _______________________________________________
> Commotion-dev mailing list
> Commotion-dev at lists.chambana.net
> http://lists.chambana.net/mailman/listinfo/commotion-dev
> 
"
640,Commotion-dev, pushed commotion-android updates,"Fri, 20 Jul 2012 15:05:11 -0400",-0400,Hans-Christoph Steiner,"
Does that include running olsrd in a MeshTetherProcess in Java?

.hc


On 07/20/2012 12:59 PM, Will Hawkins wrote:
> Thanks for asking, Hans.
> 
> bb854d4bc9ee688bf6d508d09d02aabf83cceaa2 did exactly what I was going to
> submit to fix the Atrix bug (discovered during testing with Andrew's
> device).
> 
> I am nearing completion of the system to run a single ""superuser"" shell.
> I will keep you posted on the progress of that.
> 
> Will
> 
> On 07/19/2012 03:22 PM, Hans-Christoph Steiner wrote:
"
641,Commotion-dev, pushed commotion-android updates,"Fri, 20 Jul 2012 17:14:23 -0400",-0400,Will Hawkins,"It will be an extensible way to run almost any binary, send it input and
capture its output.

Is that a reasonable answer? I feel like I am forgetting a conversation
about this that would give me some context for your question! :-)

Will

On 07/20/2012 03:05 PM, Hans-Christoph Steiner wrote:
> 
> Does that include running olsrd in a MeshTetherProcess in Java?
> 
> .hc
> 
> 
> On 07/20/2012 12:59 PM, Will Hawkins wrote:
"
642,Commotion-dev, latest Android screenshot,"Fri, 20 Jul 2012 14:19:22 -0400",-0400,Hans-Christoph Steiner,"
Making progress on the GUI, its almost complete (see attached pics) but
I'm debugging some of the start-up procedure.

.hc
"
643,Commotion-dev, latest Android screenshot,"Sun, 22 Jul 2012 23:11:54 -0400",-0400,Hans-Christoph Steiner,"
here's another for good measure, this time showing the active state,
connected to three other nodes.

.hc


On 07/20/2012 02:19 PM, Hans-Christoph Steiner wrote:
> 
> Making progress on the GUI, its almost complete (see attached pics) but
> I'm debugging some of the start-up procedure.
> 
> .hc
> 
"
644,Commotion-dev, community wireless fireside chat?,"Mon, 23 Jul 2012 14:40:45 -0400",-0400,Benjamin Chodoroff,"is anyone up for having a little IRC discussion about ideas for
applications that leverage community wireless networks? we've been
cookin up some stuff here in Detroit, and i think now's a good time to
maybe collaborate/check in with others who might be interested.

-ben

"
645,Commotion-dev, Problem with busybox_config as committed,"Tue, 24 Jul 2012 12:32:45 -0400",-0400,Will Hawkins,"Hey Hans!

We were having trouble building busybox, so I investigated the
busybox_config file. It looks like there is a hard-coded path set in
CONFIG_SYSROOT that prevents it from building when the NDK is not in a
particular location.

After I modified the CONFIG_SYSROOT value to reflect the location of the
system root in my NDK installation, everything worked fine. Is there a
way that I can make that variable dynamic? Or should I just add a note
to the README saying that it needs to be changed as part of the build
process?

Thanks as always!
Will
"
646,Commotion-dev, Android mesh app - preferred devices,"Tue, 24 Jul 2012 09:16:25 -0400",-0400,David Oliver,"Hans is closing in on round one of the Android mesh application.  Any
feeling out there as to which ""useful subset"" of Android devices should be
targeted for first release?  I'm specifically wondering about devices
community members already own?  Also, are there devices we need to stay
away from in the current time frame (where effort > desirable outcome)?

Thanks for your input.

David Oliver

David M. Oliver | david at g <david at olivercoady.com>uardianproject.info |
http://g <http://olivercoady.com>uardianproject.info | @davidmoliver | +1
970 368 2366
"
647,Commotion-dev, Problem with busybox_config as committed,"Tue, 24 Jul 2012 19:57:12 -0400",-0400,Will Hawkins,"Hey Hans!

I know that you're out of town, so I hate to bother you. I am trying to
work through the latest commits. It appears that the app ""does not work""
on any of the phones that we've tested here.

We are using the HTC Sensation 4G, the Virgin Mobile LG phone and
Andrew's Motorola Atrix device.

The most visible error that we see is that the app cannot connect to the
JsonInfo plugin on port 9090. This seems to be a red herring, though. On
the devices, the wifi never really seems to associate. Given the changes
that have been made to how you are now associating with access points, I
don't know what other helpful information to provide for your debugging.

If there are things that you want me to try, please let me know.
Otherwise, I will continue to debug on my own and sync up when you are
back around.

Talk to you soon!
Will

On 07/24/2012 12:32 PM, Will Hawkins wrote:
> Hey Hans!
> 
> We were having trouble building busybox, so I investigated the
> busybox_config file. It looks like there is a hard-coded path set in
> CONFIG_SYSROOT that prevents it from building when the NDK is not in a
> particular location.
> 
> After I modified the CONFIG_SYSROOT value to reflect the location of the
> system root in my NDK installation, everything worked fine. Is there a
> way that I can make that variable dynamic? Or should I just add a note
> to the README saying that it needs to be changed as part of the build
> process?
> 
> Thanks as always!
> Will
> _______________________________________________
> Commotion-dev mailing list
> Commotion-dev at lists.chambana.net
> http://lists.chambana.net/mailman/listinfo/commotion-dev
> 
"
648,Commotion-dev, Android mesh app - preferred devices,"Tue, 24 Jul 2012 19:58:43 -0400",-0400,Will Hawkins,"Andrew and I talked about this today. I think that the HTC Sensation 4G
and the HTC Desire Z are two good devices to put on the map. Those are
available in the community and they are available to our documentation
specialists at the Work Dept.

Andrew, if I misrepresented anything from our earlier discussion, please
let me know.

Will

On 07/24/2012 09:16 AM, David Oliver wrote:
> Hans is closing in on round one of the Android mesh application.  Any
> feeling out there as to which ""useful subset"" of Android devices should
> be targeted for first release?  I'm specifically wondering about devices
> community members already own?  Also, are there devices we need to stay
> away from in the current time frame (where effort > desirable outcome)?
> 
> Thanks for your input.
> 
> David Oliver
> 
> David M. Oliver | david at g
> <mailto:david at olivercoady.com>uardianproject.info
> <http://uardianproject.info> | http://g
> <http://olivercoady.com>uardianproject.info
> <http://uardianproject.info> | @davidmoliver | +1 970 368 2366
> 
> 
> _______________________________________________
> Commotion-dev mailing list
> Commotion-dev at lists.chambana.net
> http://lists.chambana.net/mailman/listinfo/commotion-dev
> 
"
649,Commotion-dev, Android mesh app - preferred devices,"Tue, 24 Jul 2012 20:11:22 -0400",-0400,Benjamin Chodoroff,"On Tue 24 Jul 2012 07:58:43 PM EDT, Will Hawkins wrote:
> Andrew and I talked about this today. I think that the HTC Sensation 4G
> and the HTC Desire Z are two good devices to put on the map. Those are
> available in the community and they are available to our documentation
> specialists at the Work Dept.

targeting 2.2 and 2.3 seems like a good idea -- the desire and 
sensation are in that zone, conveniently :)

android os version usage piecharts: 
http://developer.android.com/about/dashboards/index.html

semi-relevant: what's the latest on adhoc in 4.x / future android 
versions? any new info from friends in Mountain View?

-ben

"
650,Commotion-dev, Problem with busybox_config as committed,"Tue, 24 Jul 2012 20:17:55 -0400",-0400,Nathan of Guardian,"On 07/24/2012 07:57 PM, Will Hawkins wrote:
> We are using the HTC Sensation 4G, the Virgin Mobile LG phone and
> Andrew's Motorola Atrix device.

I know there was some expectation of perhaps Cyanogen 7 being the
firmware (though I did it seeing running on a rooted stock/AOSP Nexus
One), and that specifically the testing one our end has been limited to
HTC and Motorola.

Are any of these running CM7 or above?

Is the LG phone an Optimus? We have a Sprint/Ting CDMA LG Optimus that
perhaps we can start adding into our test kit.

+n

"
651,Commotion-dev, Android mesh app - preferred devices,"Wed, 25 Jul 2012 10:13:15 +0930",+0930,Jeremy Lakeman,"On Wed, Jul 25, 2012 at 9:41 AM, Benjamin Chodoroff <ben at theworkdept.com> wrote:
> On Tue 24 Jul 2012 07:58:43 PM EDT, Will Hawkins wrote:
"
652,Commotion-dev, Android mesh app - preferred devices,"Tue, 24 Jul 2012 21:19:36 -0400",-0400,Nathan of Guardian,"On 07/24/2012 08:43 PM, Jeremy Lakeman wrote:
> Nexus 7 running stock 4.1 rom + root;
> # ./iwconfig wlan0 mode ad-hoc
> Error for wireless request ""Set Mode"" (8B06) :
>     SET failed on device wlan0 ; Operation not supported on transport endpoint.

What I think we recently discovered (and Hans will have to back me up or
correct me here) that while adhoc wireless is not supported in the
typical way (i.e. you can see the network and select it), you can
definitely insert and active configuration information for adhoc
networks via the WirelessManager API.

See the ""Ignore adhoc"" in the WirelessManager Android source (meaning,
they support them but just don't display them):
http://grepcode.com/file/repository.grepcode.com/java/ext/com.google.android/android-apps/4.0.1_r1/com/android/settings/wifi/WifiSettings.java#506

and then our code here for manually configuring an adhoc network via the
public WirelessManager API:
https://code.commotionwireless.net/projects/commotion-android/repository/revisions/87466f5344fa36ff78333d58f14ab126b11fe41b/entry/src/net/commotionwireless/meshtether/MeshService.java#L334

This is all very new, and I am sure there are bugs, but I did see this
working live on a rooted stock/AOSP Nexus One late last week, so... ya.

+n







"
653,Commotion-dev,,"Tue, 24 Jul 2012 21:40:07 -0400",-0400,Will Hawkins," 
On Tuesday, July 24, 2012 20:17 EDT, Nathan of Guardian <nathan at guardianproject.info> wrote: 
 
> On 07/24/2012 07:57 PM, Will Hawkins wrote:
> > We are using the HTC Sensation 4G, the Virgin Mobile LG phone and
> > Andrew's Motorola Atrix device.
> 
> I know there was some expectation of perhaps Cyanogen 7 being the
> firmware (though I did it seeing running on a rooted stock/AOSP Nexus
> One), and that specifically the testing one our end has been limited to
> HTC and Motorola.

Thanks, as usual, for your reply!

> 
> Are any of these running CM7 or above?

No, and that's kind of what I was thinking. I thought that the new API that HC was using required CM. If it is the case that CM is required, it's personally not a big deal. I just wanted to confirm that before I spent time debugging. :-)

> 
> Is the LG phone an Optimus? We have a Sprint/Ting CDMA LG Optimus that
> perhaps we can start adding into our test kit.

Yes, I believe that it is an Optimus: http://www.lg.com/us/cell-phones/lg-LS670-Gray-optimus-s Is that the one that you have? I will be online in irc tomorrow if we want to go over any of the other details. 

Getting this working is made urgent only by the fact that Andrew is hoping to give a demo of the app at the Grassroots Radio Conference this weekend.

Will

> 
> +n
> 
> _______________________________________________
> Commotion-dev mailing list
> Commotion-dev at lists.chambana.net
> http://lists.chambana.net/mailman/listinfo/commotion-dev
> 
 
 
 
 


"
654,Commotion-dev, Problem with busybox_config as committed,"Tue, 24 Jul 2012 21:53:57 -0400",-0400,Nathan of Guardian,"On 07/24/2012 09:40 PM, Will Hawkins wrote:
> Getting this working is made urgent only by the fact that Andrew is hoping to give a demo of the app at the Grassroots Radio Conference this weekend.

Well, if you could have at least one Cyanogen handset around, that
probably would not hurt. I think we are still in a ""it works best on
Cyanogen"" state, though I am also fairly certain it is no longer required.

If you need us to express mail down a Nexus One with Cyanogen on it
tomorrow, I think we could do that.

+n

"
655,Commotion-dev, Problem with busybox_config as committed,"Wed, 25 Jul 2012 11:31:06 -0400",-0400,Hans-Christoph Steiner,"
Thanks for catching the busybox config issue, I think the thing to try is replace the /usr/local/android-ndk with $NDK_BASE, hopefully that will work.

Whenever you see the can't connect to 9090 error, that means that olsrd is not running. For some reason, the LD_LIBRARY_PATH stopped working for the plugin loading, I dont' know what.  But sticking the full path to the plugins in the olsrd.conf worked for me.  I just pushed that commit.

As for which distro, I think this should work on a lot of android distros.  I've been most recently developing on a Nexus One with the stock ROM.  But HTC+Cyanogenmod is the safest bet.

There is one other relevant outstanding issue: the routing.  The Android static IP API requires that a gateway is specified.  So we stuck in the phone's own IP for the gateway.  This means the default route is then the phones own IP.  I added busybox so we can easily delete that route, but I haven't found the right place in the whole startup operation to do this and actually have the setting stick.  It can be done manually and it works.

So this just means that an HNA that specifies a default route (0.0.0.0) won't work in the current app without manual intervention via the terminal.  Once we have Will's framework for starting and stopping lots of terminal command via a single 'su -c' thread, then we can clean up the whole startup process and make sure that route stays deleted.

.hc

On Jul 24, 2012, at 7:57 PM, Will Hawkins wrote:

> Hey Hans!
> 
> I know that you're out of town, so I hate to bother you. I am trying to
> work through the latest commits. It appears that the app ""does not work""
> on any of the phones that we've tested here.
> 
> We are using the HTC Sensation 4G, the Virgin Mobile LG phone and
> Andrew's Motorola Atrix device.
> 
> The most visible error that we see is that the app cannot connect to the
> JsonInfo plugin on port 9090. This seems to be a red herring, though. On
> the devices, the wifi never really seems to associate. Given the changes
> that have been made to how you are now associating with access points, I
> don't know what other helpful information to provide for your debugging.
> 
> If there are things that you want me to try, please let me know.
> Otherwise, I will continue to debug on my own and sync up when you are
> back around.
> 
> Talk to you soon!
> Will
> 
> On 07/24/2012 12:32 PM, Will Hawkins wrote:
"
656,Commotion-dev, Problem with busybox_config as committed,"Wed, 25 Jul 2012 17:38:48 -0400",-0400,Will Hawkins,"Hey Hans! Thanks for your responses. See below.

On 07/25/2012 11:31 AM, Hans-Christoph Steiner wrote:
> 
> Thanks for catching the busybox config issue, I think the thing to try is replace the /usr/local/android-ndk with $NDK_BASE, hopefully that will work.
> 
I temporarily committed a note to the documentation to work around this.
I will look at doing something more permanent based on this information.

> Whenever you see the can't connect to 9090 error, that means that olsrd is not running. For some reason, the LD_LIBRARY_PATH stopped working for the plugin loading, I dont' know what.  But sticking the full path to the plugins in the olsrd.conf worked for me.  I just pushed that commit.
> 
> As for which distro, I think this should work on a lot of android distros.  I've been most recently developing on a Nexus One with the stock ROM.  But HTC+Cyanogenmod is the safest bet.
> 
Update: I flashed an HTC Sensation with CM 9 and the app now works ...
sort of. I occasionally (often, actually) have a problem where the app
gets stuck at ""Found active WAN interface"". When this happens it looks
like the run script doesn't even get to where olsrd is started. If this
is something you haven't seen, I am happy to debug. I just thought I'd
ask before I went down that path.

> There is one other relevant outstanding issue: the routing.  The Android static IP API requires that a gateway is specified.  So we stuck in the phone's own IP for the gateway.  This means the default route is then the phones own IP.  I added busybox so we can easily delete that route, but I haven't found the right place in the whole startup operation to do this and actually have the setting stick.  It can be done manually and it works.
> 
> So this just means that an HNA that specifies a default route (0.0.0.0) won't work in the current app without manual intervention via the terminal.  Once we have Will's framework for starting and stopping lots of terminal command via a single 'su -c' thread, then we can clean up the whole startup process and make sure that route stays deleted.
> 
This is something that I think I've run into. However, I may actually
have been running into a different issue.

In either case, I have been pulled to another task this week so my work
on the single-shell tool has been postponed. I should be able to restart
that work early next week and I hope to have something by the middle of
next week.

Will

> .hc
> 
> On Jul 24, 2012, at 7:57 PM, Will Hawkins wrote:
> 
"
657,Commotion-dev, Problem with busybox_config as committed,"Wed, 25 Jul 2012 17:49:57 -0400",-0400,Nathan of Guardian,"On 07/25/2012 05:38 PM, Will Hawkins wrote:
> Update: I flashed an HTC Sensation with CM 9 and the app now works ...

We are using CM7 at this point, as CM9 did not exist when the
development began.

"
658,Commotion-dev, OSLR Build Error,"Wed, 25 Jul 2012 08:08:49 -0700",-0700,Jason Prenger,"Hi,

I'm very new to your system and am trying to get it up and running on a
couple of Androids in my office and was running into a few problems.
When I try to build it following the instructions in the README of the
CommotionMeshTether project it fails at the busybox compilation stage.
While there are quite a few errors I think the main cause is one that
states: ""<long ndk path>/limits.h:122:61: error: no include path in
which to search for limits.h""  I was wondering if anyone has run into
this error in the past or would know more about how approach fixing this
compiler error than I do.  I'm developing on Ubuntu using android-ndk-r8
if that helps in any way. If this is the wrong place for this kind of
question I apologize

Thanks in advance,
Jason Prenger
"
659,Commotion-dev, Dual interfaces,"Wed, 25 Jul 2012 11:27:11 -0700",-0700,Dan Blah,"Did folks ever find any affirmative supported drivers in Android related
to this? I am very interested in USB dongles with external antennae ports.

On 6/6/12 8:51 AM, Nathan of Guardian wrote:
> On 06/06/2012 10:01 AM, Hans-Christoph Steiner wrote:
"
660,Commotion-dev, Android mesh app - preferred devices,"Wed, 25 Jul 2012 21:24:10 -0400",-0400,Hans-Christoph Steiner,"
On Jul 24, 2012, at 9:19 PM, Nathan of Guardian wrote:

> On 07/24/2012 08:43 PM, Jeremy Lakeman wrote:
"
661,Commotion-dev, Android mesh app - preferred devices,"Wed, 25 Jul 2012 21:26:02 -0400",-0400,Hans-Christoph Steiner,"
On Jul 24, 2012, at 8:11 PM, Benjamin Chodoroff wrote:

> On Tue 24 Jul 2012 07:58:43 PM EDT, Will Hawkins wrote:
"
662,Commotion-dev, Dual interfaces,"Thu, 26 Jul 2012 09:12:54 -0500",-0500,Ben West,"USB power issue not withstanding, the ar9170 drivers for Atheros chipset
should be available to compile for many targets:
http://linuxwireless.org/en/users/Drivers/carl9170

Here is a similar thread someone started on the ath9k-devel mailing list a
couple years ago:
http://www.mail-archive.com/ath9k-devel at lists.ath9k.org/msg03653.html

On Wed, Jul 25, 2012 at 1:27 PM, Dan Blah <blah at riseup.net> wrote:

> Did folks ever find any affirmative supported drivers in Android related
> to this? I am very interested in USB dongles with external antennae ports.
>
> On 6/6/12 8:51 AM, Nathan of Guardian wrote:
> > On 06/06/2012 10:01 AM, Hans-Christoph Steiner wrote:
> "
663,Commotion-dev, Problem with busybox_config as committed,"Thu, 26 Jul 2012 10:55:49 -0400",-0400,Hans-Christoph Steiner,"
On Jul 25, 2012, at 5:38 PM, Will Hawkins wrote:

> Hey Hans! Thanks for your responses. See below.
> 
> On 07/25/2012 11:31 AM, Hans-Christoph Steiner wrote:
"
664,Commotion-dev, OSLR Build Error,"Thu, 26 Jul 2012 12:02:51 -0400",-0400,Will Hawkins,"Hello Jason!

Thanks for your interest in the platform. Check out the file
busybox_config in the external/ directory. Look for a configuration
value named CONFIG_SYSROOT. Make sure that the value for this variable
is set to the actual location of your android NDK. For instance,
CONFIG_SYSROOT=""/home/hawkinsw/android-ndk-r8/platforms/android-8/arch-arm""

Save that file and try to recompile. Let us know if that works!

Thanks again for your interest in the platform.

Will

On 07/25/2012 11:08 AM, Jason Prenger wrote:
> Hi,
> 
> I'm very new to your system and am trying to get it up and running on a
> couple of Androids in my office and was running into a few problems. 
> When I try to build it following the instructions in the README of the
> CommotionMeshTether project it fails at the busybox compilation stage.
> While there are quite a few errors I think the main cause is one that
> states: ""<long ndk path>/limits.h:122:61: error: no include path in
> which to search for limits.h""  I was wondering if anyone has run into
> this error in the past or would know more about how approach fixing this
> compiler error than I do.  I'm developing on Ubuntu using android-ndk-r8
> if that helps in any way. If this is the wrong place for this kind of
> question I apologize
> 
> Thanks in advance,
> Jason Prenger
> 
> 
> _______________________________________________
> Commotion-dev mailing list
> Commotion-dev at lists.chambana.net
> http://lists.chambana.net/mailman/listinfo/commotion-dev
> 
"
665,Commotion-dev, OSLR Build Error,"Thu, 26 Jul 2012 15:27:00 -0400",-0400,Andrew Reynolds,"That answers a question I had as well.

Read strictly, the README specifies path to android ndk, but leaves off
""platforms/android-8/arch-arm"". I suspected this was the answer but
hadn't had time to test yet.

-andrew

On 07/26/2012 12:02 PM, Will Hawkins wrote:
> Hello Jason!
> 
> Thanks for your interest in the platform. Check out the file
> busybox_config in the external/ directory. Look for a configuration
> value named CONFIG_SYSROOT. Make sure that the value for this variable
> is set to the actual location of your android NDK. For instance,
> CONFIG_SYSROOT=""/home/hawkinsw/android-ndk-r8/platforms/android-8/arch-arm""
> 
> Save that file and try to recompile. Let us know if that works!
> 
> Thanks again for your interest in the platform.
> 
> Will
> 
> On 07/25/2012 11:08 AM, Jason Prenger wrote:
"
666,Commotion-dev, Community Wireless resources - what to do?,"Fri, 27 Jul 2012 11:35:44 -0400",-0400,Benjamin Chodoroff,"Hi commotioners,

Over here at the workdept, we're busy working on the knowledgebase
website - commotion's future home on the internet.

One of the features that the commotion community had in mind early on in
the planning process was to provide a general informational wiki-style
thing to keep track of community wireless and free software mesh
networking technology... not specifically limited to commotion, but
related in that commotion is one part of this larger ecosystem.

I'm excited to build this resource, mostly because i've wanted to share
my own notes and haven't had a place to do so. I think a lot of other
people are in the same boat.

If anyone has any thoughts or ideas about this part of the project,
let's talk about it.

A quick list of things that I think are important:

* while the rest of the commotion site will be related to the commotion
project, this ""community wireless resources"" section will contain
information related to core technologies and projects
* we should talk about the name -- i prefer ""community wireless"" or
""community internet"" since we might end up sharing information about
non-mesh or non-wireless tech
* i'd like to encourage people involved in other (potentially
similar-to-commotion) projects to participate in building this resources
section -- let's start developing a list of groups we should
specifically invite to talk about their project or provide info.
* the most exciting part of this resource section, to me, will be some
sort of list of prominent community networks -- this is the info that
i've had the hardest time finding on the web!

ok, enough from me for now!

-b&

"
667,Commotion-dev, OLSR Build Error,"Fri, 27 Jul 2012 08:52:23 -0700",-0700,Jason Prenger,"Hi,

I recently sent an email about encountering a build error (""<long ndk
path>/limits.h:122:61: error: no include path in which to search for
limits.h"") but I can't find the email to reply to it so I'll have to
start a new one.  Will  and Andrew were correct in that I needed to
change the CONFIG_SYSROOT to point to my ndk (which I had done) BUT I
also needed to leave on the ""/platforms/android-8/arch-arm"" portion of
it.  After doing that, everything built fine. 

Thanks again for the help and I'll be sure to let you know what, if any,
devices I get this working on

Jason Prenger
"
668,Commotion-dev, community wireless fireside chat?,"Fri, 27 Jul 2012 13:39:17 -0400",-0400,Seamus Tuohy,
669,Commotion-dev, Commotion Website Design Ideas,"Fri, 27 Jul 2012 13:48:25 -0400",-0400,Michael Gregor,"Hi all,

We're in the midst of the design process for the new Commotion website. Just want to share our design ideas with you! Attached are compositions of potential home pages and potential interior pages. 

OTI staff will be approving final designs soon. If you have any feedback on these, please reply here right away!

https://dl.dropbox.com/u/15155891/Commotion.zip

Best,

Michael





- - - -
Michael Gregor
Digital Strategy Consultant
313.437.1244 (office)
theworkdept.com


This email message and any attached files are confidential and are intended solely for the use of the addressee(s) named above. If you are not the intended recipient, any review, use, dissemination, forwarding, printing, copying, or other distribution of this email message and any attached files is strictly prohibited.




"
670,Commotion-dev, OSLR Build Error,"Sat, 28 Jul 2012 11:16:38 -0400",-0400,Hans-Christoph Steiner,"
Never seen this error before.  Can you post the whole build log somewhere like http://pastebin.com?

.hc

On Jul 25, 2012, at 11:08 AM, Jason Prenger wrote:

> Hi,
> 
> I'm very new to your system and am trying to get it up and running on a couple of Androids in my office and was running into a few problems.  When I try to build it following the instructions in the README of the CommotionMeshTether project it fails at the busybox compilation stage. While there are quite a few errors I think the main cause is one that states: ""<long ndk path>/limits.h:122:61: error: no include path in which to search for limits.h""  I was wondering if anyone has run into this error in the past or would know more about how approach fixing this compiler error than I do.  I'm developing on Ubuntu using android-ndk-r8 if that helps in any way. If this is the wrong place for this kind of question I apologize
> 
> Thanks in advance,
> Jason Prenger
> _______________________________________________
> Commotion-dev mailing list
> Commotion-dev at lists.chambana.net
> http://lists.chambana.net/mailman/listinfo/commotion-dev


"
671,Commotion-dev, community wireless fireside chat?,"Mon, 30 Jul 2012 11:00:48 -0400",-0400,Benjamin Chodoroff,"On Fri 27 Jul 2012 01:39:17 PM EDT, Seamus Tuohy wrote:
> We are in the process of collecting applications to configure for
> community wireless network users to run. This is going to really hit
> the ground on our end starting mid-august when our field team will
> start planning a way of gathering data from the communities we are
> working with around the services they want to run. I would love to
> have that conversation on IRC. Just let me know when you are around.

i'll be workin on olsr related stuff from 4-6 tonight and all day 
tomorrow+wednesday - i'll be on #oti - drop in and we'll commotion 
commingle

also, for the record: potential name for mesh network distributed mood 
ring: commotion emotion

-ben

"
672,Commotion-dev, OSLR Build Error,"Mon, 30 Jul 2012 08:03:14 -0700",-0700,Jason Prenger,"Here is the build log: http://pastebin.com/irLwUhz0

I was able to fix this by ensuring that the
""/platforms/android-8/arch-arm"" portion of the CONFIG_SYSROOT in
busybox_config was still present.  I had been just setting that to my
NDK base

Jason Prenger

On Sat, 2012-07-28 at 11:16 -0400, Hans-Christoph Steiner wrote:

> Never seen this error before.  Can you post the whole build log somewhere like http://pastebin.com?
> 
> .hc
> 
> On Jul 25, 2012, at 11:08 AM, Jason Prenger wrote:
> 
> > Hi,
> > 
> > I'm very new to your system and am trying to get it up and running on a couple of Androids in my office and was running into a few problems.  When I try to build it following the instructions in the README of the CommotionMeshTether project it fails at the busybox compilation stage. While there are quite a few errors I think the main cause is one that states: ""<long ndk path>/limits.h:122:61: error: no include path in which to search for limits.h""  I was wondering if anyone has run into this error in the past or would know more about how approach fixing this compiler error than I do.  I'm developing on Ubuntu using android-ndk-r8 if that helps in any way. If this is the wrong place for this kind of question I apologize
> > 
> > Thanks in advance,
> > Jason Prenger
> > _______________________________________________
> > Commotion-dev mailing list
> > Commotion-dev at lists.chambana.net
> > http://lists.chambana.net/mailman/listinfo/commotion-dev
> 
> 
"
673,Commotion-dev, doubledip: starting olsrd with alias interfaces &,"Mon, 30 Jul 2012 11:35:23 -0400",-0400,Benjamin Chodoroff,"hi commotion!

first thing: i've noticed that, at least on some ubuntu systems i use,
you need to specify an alias interface name when you start olsrd for it
to work.. like ``olsrd -i wlan0:0'' if your mesh interface is wlan0.
olsrd ends up using wlan0 and not using wlan0:0 -- it marks it as down.

second thing: when olsrd has an interface that is down, jsoninfo doesn't
deal with it gracefully - it segfaults!

i used httpinfo as an example and patched
lib/jsoninfo/src/olsrd_jsoninfo.c - jsoninfo checks to see if rifs
exists, but not before it tries to read from it!

--8<--

diff --git a/lib/jsoninfo/src/olsrd_jsoninfo.c
b/lib/jsoninfo/src/olsrd_jsoninfo.c
index 2057468..5faec7a 100644
"
674,Commotion-dev, community wireless fireside chat?,"Mon, 30 Jul 2012 12:27:58 -0400",-0400,Sean McIntyre,"Hey folks,

I'd like to participate in talking as well. I'm Brooklyn based.

The conversations I have with people interested in mesh here is
usually centered around ""what for?"". I'm interested to hear the
directions you're attempting and perhaps I'll float some of the things
we're talking about over here (which are pure talk presently).

Tomorrow and Wednesday are available for me. I'm always lurking in
#oti as boxysean. :"
675,Commotion-dev, Make busybox_config respect NDK_BASE,"Mon, 30 Jul 2012 12:49:41 -0400",-0400,Will Hawkins,"Hey Hans!

Here is a patch that will make external/busybox_config respect the
NDK_BASE variable by properly setting CONFIG_SYSROOT.

I've attached rather than inline'd it because IIRC that is how you
prefer it.

Let me know what you think.
Will
"
676,Commotion-dev, Make busybox_config respect NDK_BASE,"Mon, 30 Jul 2012 12:51:53 -0400",-0400,Will Hawkins,"Hey Hans!

Here is a patch that will make external/busybox_config respect the
NDK_BASE variable by properly setting CONFIG_SYSROOT.

I've attached rather than inline'd it because IIRC that is how you
prefer it.

Let me know what you think.
Will
"
677,Commotion-dev, doubledip: starting olsrd with alias interfaces,"Tue, 31 Jul 2012 13:46:49 -0400",-0400,Hans-Christoph Steiner,"
Thanks for tracking this down.  Turns out the issue was bigger than
that, but I just committed and pushed a fix that works for me.  Its in
the olsrd.git, please test it there, or use the attached patch.

.hc

On 07/30/2012 11:35 AM, Benjamin Chodoroff wrote:
> hi commotion!
> 
> first thing: i've noticed that, at least on some ubuntu systems i use,
> you need to specify an alias interface name when you start olsrd for it
> to work.. like ``olsrd -i wlan0:0'' if your mesh interface is wlan0.
> olsrd ends up using wlan0 and not using wlan0:0 -- it marks it as down.
> 
> second thing: when olsrd has an interface that is down, jsoninfo doesn't
> deal with it gracefully - it segfaults!
> 
> i used httpinfo as an example and patched
> lib/jsoninfo/src/olsrd_jsoninfo.c - jsoninfo checks to see if rifs
> exists, but not before it tries to read from it!
> 
> --8<--
> 
> diff --git a/lib/jsoninfo/src/olsrd_jsoninfo.c
> b/lib/jsoninfo/src/olsrd_jsoninfo.c
> index 2057468..5faec7a 100644
> "
678,Commotion-dev, Make busybox_config respect NDK_BASE,"Tue, 31 Jul 2012 14:03:24 -0400",-0400,Hans-Christoph Steiner,"
Accepted, thanks.

.hc

On 07/30/2012 12:51 PM, Will Hawkins wrote:
> Hey Hans!
> 
> Here is a patch that will make external/busybox_config respect the
> NDK_BASE variable by properly setting CONFIG_SYSROOT.
> 
> I've attached rather than inline'd it because IIRC that is how you
> prefer it.
> 
> Let me know what you think.
> Will
> 
> 
> 
> _______________________________________________
> Commotion-dev mailing list
> Commotion-dev at lists.chambana.net
> http://lists.chambana.net/mailman/listinfo/commotion-dev
> 





"
679,Commotion-dev, MeshTether GUI is feature complete,"Thu, 02 Aug 2012 20:41:20 -0400",-0400,Hans-Christoph Steiner,"
Ok, I finished all of the features for the first round of MeshTether and
its working pretty well on the Nexus One I'm using for testing.  I've
also tried the HTC Wildfire, Motorola Droid, and HTC myTouch 3G.

I've implemented the mesh profiles like this:

- (default) uses the wifi/ip settings from the preferences and the
  olsrd.conf that is included in the app

- the rest are scanned from the file system in two places:
    * in the app's app_bin/ folder
    * /mnt/sdcard/MeshTether

- the scanner looks in those dirs for *.properties and takes the
  filename as the profile name (i.e. myprofile.properties will be
  linked to the ""myprofile"" item in the profiles menu)

- if there is also a myprofile.conf next to the myprofile.properties
  then it will use that as the olsrd.conf. otherwise, it'll use the
  included olsrd.conf

- the properties options are:

    ssid=commotionwireless.net
    bssid=02:CA:FF:EE:BA:BE
    channel=5
    ip=172.29.0.0
    ipgenerate=true
    netmask=255.255.0.0
    dns=8.8.8.8

- all are required, except 'ipgenerate', which marks the 'ip' as the
  root for the IP generation algorithm.  If 'ipgenerate' is unset or
  not 'true', then the 'ip' is used as is.

Here's a test apk:

https://guardianproject.info/builds/CommotionMeshTether/2012-08-02/
md5: 6157640c85ccfb2389e21e015a3ea764
sha1: 62a46b73dbc08e48b75a2a443a304601cce0f1bc

give it a whirl and let me know how it works for you!

.hc

"
680,Commotion-dev, complete Android GUI mockups,"Fri, 03 Aug 2012 14:22:44 -0400",-0400,Hans-Christoph Steiner,"
Now that I've applied some of these graphics to the Android app, here's
some quick feedback:

- the lines in the icon are much too thin to be visible when used
without a background.  App and Nofitication icons in Android are 24x24,
36x36, 48x48 and 96x96 at the supported resolutions

- the icons don't really work on the default button backgrounds.  these
backgrounds can vary a fair amount depending on which Android version

- the icons alone don't look like a button

.hc

On 06/20/2012 01:13 PM, Michael Gregor wrote:
> Thanks so much for sharing your UI mockups. They were very useful in giving us some more perspective and ideas for the HIG, which we are writing now. I've included some draft sections of the HIG below - feel free to use this in your development or send me back your comments on things you feel strongly about.
> 
> Also, please read this when you get a chance to see some of our ideas: https://blog.commotionwireless.net/blog/2012/05/user-interface-prototype-what-commotion-software-could-look
> 
> Here's a compilation of our thoughts on the design you proposed. Some of it may be redundant with conversations with OTI.
> 
> It would be best to use the common language proposed below.
> It would be best to use the Commotion colors, typeface, and other brand assets. You can find the complete usage guidelines at https://blog.commotionwireless.net/files/Commotion%20Brand.pdf and the individual files at nina.inst7.thermitic.net/commotion_assets061912.zip
> We like the status bar icon idea, which we hadn't thoroughly considered before. We do think that the icon should be a signal strength bar instead of color-coded. Users are far more familiar with strength bars on their cell phones and computers. We will draft an icon that could be used here.
> It's unclear to us why profiles are necessary and seem to complicate the process. From our understanding, the basic user will only need to occasionally set their network name and channel. Are there reasons why a basic user would need to save more than that? We're unsure of the rationale. 
> We think that the network status page should be displayed differently: simply using text for this phase of the project. In future iterations, it would be great to see visualizations. We're concerned that the hexagon layout cannot accurately represent the real world (arrangement of nodes in space) and can be confusing due to fundamental geometric restraints. In the HIG, we're going to propose a simple status page and mention that developers could use some sort of network visualization tool in the advanced area.
> We're also thinking of including the log in the native menu in Android or in the green footer on all other applications.
> We like the notification concept!
> 
> Let us know if you have feedback on anything here.
> 
> All the best,
> 
> Michael
> 
> "
681,Commotion-dev, Commotion homepage,"Fri, 3 Aug 2012 17:04:28 -0400",-0400,Michael Gregor,"Hi all,

Below is the second iteration of the home page design, based on feedback from OTI. There are two files: one showing a drop-down menu on hover and one without.

https://dl.dropbox.com/u/15155891/commotion_kb_rev1.pdf
https://dl.dropbox.com/u/15155891/commotion_kb_rev1drop.pdf

The arrows on the navigation bar indicate that a drop-down menu is available on hover. We don't think these indicators are necessary but will certainly keep them if needed.

We revised the icons for Get Started and Get Involved that are consistent with the illustration style of Commotion's standard icons. We think that this consistency is important and would like to avoid introducing a new illustration style to the site.

Send any feedback you have to Seamus at OTI, who is coordinating the approval of the design.

Thanks!

Michael


- - - -
Michael Gregor
Digital Strategy Consultant
313.437.1244 (office)
theworkdept.com


This email message and any attached files are confidential and are intended solely for the use of the addressee(s) named above. If you are not the intended recipient, any review, use, dissemination, forwarding, printing, copying, or other distribution of this email message and any attached files is strictly prohibited.


"
682,Commotion-dev, MeshTether GUI is feature complete,"Fri, 03 Aug 2012 17:59:20 -0400",-0400,Hans-Christoph Steiner,"
I fixed some bugs today, so I thought I'd send some screenshots (in two
emails since this list is capped to 40kb emails)... first the Info view.

.hc



"
683,Commotion-dev, MeshTether GUI is feature complete,"Fri, 03 Aug 2012 18:00:12 -0400",-0400,Hans-Christoph Steiner,"
And next the the Links view:


"
684,Commotion-dev, Commotion homepage,"Fri, 03 Aug 2012 18:26:17 -0400",-0400,Andrew Reynolds,"Thanks, Michael.

Since this thread started on the dev list, let's send critiques to the
list instead of Seamus. I would rather keep as much discussion public as
possible. There may be tie ins to UI discussions as well.

What's the deadline for feedback?

-andrew

On 08/03/2012 05:04 PM, Michael Gregor wrote:
> Hi all,
> 
> Below is the second iteration of the home page design, based on
> feedback from OTI. There are two files: one showing a drop-down menu
> on hover and one without.
> 
> https://dl.dropbox.com/u/15155891/commotion_kb_rev1.pdf 
> https://dl.dropbox.com/u/15155891/commotion_kb_rev1drop.pdf
> 
> The arrows on the navigation bar indicate that a drop-down menu is
> available on hover. We don't think these indicators are necessary but
> will certainly keep them if needed.
> 
> We revised the icons for Get Started and Get Involved that are
> consistent with the illustration style of Commotion's standard icons.
> We think that this consistency is important and would like to avoid
> introducing a new illustration style to the site.
> 
> Send any feedback you have to Seamus at OTI, who is coordinating the
> approval of the design.
> 
> Thanks!
> 
> Michael
> 
> 
> - - - - Michael Gregor Digital Strategy Consultant 313.437.1244
> (office) theworkdept.com
> 
> 
> This email message and any attached files are confidential and are
> intended solely for the use of the addressee(s) named above. If you
> are not the intended recipient, any review, use, dissemination,
> forwarding, printing, copying, or other distribution of this email
> message and any attached files is strictly prohibited.
> 
> 
> _______________________________________________ Commotion-dev mailing
> list Commotion-dev at lists.chambana.net 
> http://lists.chambana.net/mailman/listinfo/commotion-dev
> 


"
685,Commotion-dev, MeshTether GUI is feature complete,"Fri, 03 Aug 2012 19:15:04 -0400",-0400,Will Hawkins,"Hey!

I am going to take this build through its paces starting on Monday. I
will send feedback if I have any. I am also very close to finishing the
infrastructure to run a single su shell with all our commands descended
from that. I will keep you posted on that as well.

Talk to you next week!
Will

On 08/03/2012 06:00 PM, Hans-Christoph Steiner wrote:
> 
> And next the the Links view:
> 
> 
> 
> 
> _______________________________________________
> Commotion-dev mailing list
> Commotion-dev at lists.chambana.net
> http://lists.chambana.net/mailman/listinfo/commotion-dev
> 
"
686,Commotion-dev, Commotion homepage,"Fri, 03 Aug 2012 19:18:46 -0400",-0400,Will Hawkins,"These designs are looking really good. A few questions:

1. Can the background of the 'hovered' link in the drop down menu be
something other than black? It blends in with the black behind the
""Commotion is an open-source communication
tool that uses mobile phones, computers, and
other wirelesdevices to create decentralized
mesh networks.""

2. What is the semantic meaning of certain links being underlined in
yellow?

Hope you have a great weekend!
Will

On 08/03/2012 06:26 PM, Andrew Reynolds wrote:
> Thanks, Michael.
> 
> Since this thread started on the dev list, let's send critiques to the
> list instead of Seamus. I would rather keep as much discussion public as
> possible. There may be tie ins to UI discussions as well.
> 
> What's the deadline for feedback?
> 
> -andrew
> 
> On 08/03/2012 05:04 PM, Michael Gregor wrote:
"
687,Commotion-dev, MeshTether GUI is feature complete,"Fri, 03 Aug 2012 19:36:00 -0400",-0400,Hans-Christoph Steiner,"
Looking forward to the feedback!  I just pushed a bunch of fixes, so
build from git for the full experience.

.hc

On 08/03/2012 07:15 PM, Will Hawkins wrote:
> Hey!
> 
> I am going to take this build through its paces starting on Monday. I
> will send feedback if I have any. I am also very close to finishing the
> infrastructure to run a single su shell with all our commands descended
> from that. I will keep you posted on that as well.
> 
> Talk to you next week!
> Will
> 
> On 08/03/2012 06:00 PM, Hans-Christoph Steiner wrote:
"
688,Commotion-dev, Commotion homepage,"Fri, 3 Aug 2012 23:09:36 -0400",-0400,Nina Bianchi,"Awesome. Thanks!

We'll look into the main nav drop down hover state / design options. Good point.

The yellow underline is a demo of the link hover state.

-Nina


On Aug 3, 2012, at 7:18 PM, Will Hawkins wrote:

> These designs are looking really good. A few questions:
> 
> 1. Can the background of the 'hovered' link in the drop down menu be
> something other than black? It blends in with the black behind the
> ""Commotion is an open-source communication
> tool that uses mobile phones, computers, and
> other wirelesdevices to create decentralized
> mesh networks.""
> 
> 2. What is the semantic meaning of certain links being underlined in
> yellow?
> 
> Hope you have a great weekend!
> Will
> 
> On 08/03/2012 06:26 PM, Andrew Reynolds wrote:
"
689,Commotion-dev, Commotion homepage,"Fri, 3 Aug 2012 17:03:18 -0400",-0400,Michael Gregor,"Hi all,

Below is the second iteration of the home page design, based on feedback from OTI. There are two files: one showing a drop-down menu on hover and one without.

https://dl.dropbox.com/u/15155891/commotion_kb_rev1.pdf
https://dl.dropbox.com/u/15155891/commotion_kb_rev1drop.pdf

The arrows on the navigation bar indicate that a drop-down menu is available on hover. We don't think these indicators are necessary but will certainly keep them if needed.

We revised the icons for Get Started and Get Involved that are consistent with the illustration style of Commotion's standard icons. We think that this consistency is important and would like to avoid introducing a new illustration style to the site.

Send any feedback you have to Seamus at OTI, who is coordinating the approval of the design.

Thanks!

Michael


- - - -
Michael Gregor
Digital Strategy Consultant
313.437.1244 (office)
theworkdept.com


This email message and any attached files are confidential and are intended solely for the use of the addressee(s) named above. If you are not the intended recipient, any review, use, dissemination, forwarding, printing, copying, or other distribution of this email message and any attached files is strictly prohibited.

"
690,Commotion-dev, complete Android GUI mockups,"Fri, 3 Aug 2012 23:06:06 -0400",-0400,Nina Bianchi,"Thanks for testing these icons in context... based on this feedback, we could explore an even further simplified version. Sample attached.

-Nina


"
691,Commotion-dev, complete Android GUI mockups,"Sat, 04 Aug 2012 09:32:58 -0400",-0400,Seamus Tuohy,
692,Commotion-dev, complete Android GUI mockups,"Sat, 4 Aug 2012 22:20:17 -0400",-0400,Hans-Christoph Steiner,"
I'm a fan of the mesh diagram in the icon, do you think you could make a thick-lined version for these tiny icons?  I think they could read similarly to the thin-lined big versions.

As for the on/off button, this new icon looks more like a button and seems to me well suited to represent the ""off"" state.  Do you think you could make an ""on"" version with the mesh lines or something like that?

.hc

On Aug 3, 2012, at 11:06 PM, Nina Bianchi wrote:

> Thanks for testing these icons in context... based on this feedback, we could explore an even further simplified version. Sample attached.
> 
> -Nina
> 
> 
> <commotion_adaptation.png>
> On Aug 3, 2012, at 2:22 PM, Hans-Christoph Steiner wrote:
> 
"
693,Commotion-dev," Commotion-dev Digest, Vol 16, Issue 4","Mon, 6 Aug 2012 13:24:47 -0400",-0400,Michael Gregor,"Thanks for the useful comments so far. I'll need your feedback by today at 5pm EST!

All the best,

Michael


On ago 3, 2012, at 7:18 p.m., commotion-dev-request at lists.chambana.net wrote:

> Date: Fri, 03 Aug 2012 18:26:17 -0400
> From: Andrew Reynolds <andrew at opentechinstitute.org>
> To: Commotion Development List <commotion-dev at lists.chambana.net>
> Subject: Re: [Commotion-dev] Commotion homepage
> Message-ID: <501C5009.9090001 at opentechinstitute.org>
> Content-Type: text/plain; charset=""iso-8859-1""
> 
> Thanks, Michael.
> 
> Since this thread started on the dev list, let's send critiques to the
> list instead of Seamus. I would rather keep as much discussion public as
> possible. There may be tie ins to UI discussions as well.
> 
> What's the deadline for feedback?
> 
> -andrew
> 
> On 08/03/2012 05:04 PM, Michael Gregor wrote:
"
694,Commotion-dev, MeshTether GUI is feature complete,"Mon, 06 Aug 2012 18:10:39 -0400",-0400,Will Hawkins,"Just wanted to give you a status update:

I have completed work on the Java API for my single-shell work. I am
going to begin integrating with MeshTether either tomorrow or Wednesday.
I will let you know how it goes.

Will

On 08/03/2012 07:36 PM, Hans-Christoph Steiner wrote:
> 
> Looking forward to the feedback!  I just pushed a bunch of fixes, so
> build from git for the full experience.
> 
> .hc
> 
> On 08/03/2012 07:15 PM, Will Hawkins wrote:
"
695,Commotion-dev, MeshTether GUI is feature complete,"Mon, 06 Aug 2012 18:39:17 -0400",-0400,Hans-Christoph Steiner,"
Sounds great, looking forward to it!

.hc

On 08/06/2012 06:10 PM, Will Hawkins wrote:
> Just wanted to give you a status update:
> 
> I have completed work on the Java API for my single-shell work. I am
> going to begin integrating with MeshTether either tomorrow or Wednesday.
> I will let you know how it goes.
> 
> Will
> 
> On 08/03/2012 07:36 PM, Hans-Christoph Steiner wrote:
"
696,Commotion-dev, MeshTether GUI is feature complete,"Wed, 8 Aug 2012 11:32:41 +0200",+0200,L. Aaron Kaplan,"
Feedback:

I would only include ETX as value. LQ / NLQ is confusing. 
Just give the people one number and name it ""quality"" or something like that.

My 2 cents of user interface design.
a.

On Aug 4, 2012, at 1:36 AM, Hans-Christoph Steiner wrote:

> 
> Looking forward to the feedback!  I just pushed a bunch of fixes, so
> build from git for the full experience.
> 
> .hc
> 
> On 08/03/2012 07:15 PM, Will Hawkins wrote:
"
697,Commotion-dev, MeshTether GUI is feature complete,"Wed, 08 Aug 2012 08:58:00 -0400",-0400,Hans-Christoph Steiner,"
Sounds like it would be good to have ETX represented.  Where do I get
ETX for the first hop connections?  Is that link_entry->linkcost?

.hc

On 08/08/2012 05:32 AM, L. Aaron Kaplan wrote:
> 
> Feedback:
> 
> I would only include ETX as value. LQ / NLQ is confusing. 
> Just give the people one number and name it ""quality"" or something like that.
> 
> My 2 cents of user interface design.
> a.
> 
> On Aug 4, 2012, at 1:36 AM, Hans-Christoph Steiner wrote:
> 
"
698,Commotion-dev, MeshTether GUI is feature complete,"Thu, 9 Aug 2012 12:28:33 +0200",+0200,L. Aaron Kaplan,"
On Aug 8, 2012, at 2:58 PM, Hans-Christoph Steiner wrote:

> 
> Sounds like it would be good to have ETX represented.  Where do I get
> ETX for the first hop connections?  Is that link_entry->linkcost?
> 

ETX = 1/(LQ*NLQ) :)

"
699,Commotion-dev, OLSR Routes,"Thu, 09 Aug 2012 11:18:06 -0700",-0700,Jason Prenger,"Hi Guys,

At this point does the olsrd setup routes based upon the its Links and
received HNAs?  I've turned on the httpinfo and can see that all of the
links, neighbors, and topology entities are as expected but nothing
shows up in the routes section.  I suspect it has something to do with
my LinkCost always being INIFINITE but I'm not sure

I can manually add the routes if I need to but just making sure I didn't
miss a flag in the configuration file or something.

Thanks,
Jason Prenger 
"
700,Commotion-dev, OLSR Routes,"Thu, 09 Aug 2012 14:25:28 -0400",-0400,Josh King,"Hi Jason,

Do any of the routes show up in the kernel routing table? It should be 
noted that if SmartGateway is enabled in OLSRd, the gateway routes do 
not show up in the main routing table but are included in a secondary 
table. But all other routes, including non-gateway HNAs, should show up 
when you type 'route'.

On Thu Aug  9 14:18:06 2012, Jason Prenger wrote:
> Hi Guys,
>
> At this point does the olsrd setup routes based upon the its Links and
> received HNAs?  I've turned on the httpinfo and can see that all of the
> links, neighbors, and topology entities are as expected but nothing
> shows up in the routes section.  I suspect it has something to do with
> my LinkCost always being INIFINITE but I'm not sure
>
> I can manually add the routes if I need to but just making sure I didn't
> miss a flag in the configuration file or something.
>
> Thanks,
> Jason Prenger
>
>
>
> _______________________________________________
> Commotion-dev mailing list
> Commotion-dev at lists.chambana.net
> http://lists.chambana.net/mailman/listinfo/commotion-dev

--
Josh King

""I am an Anarchist not because I believe Anarchism is the final goal,
but because there is no such thing as a final goal."" -Rudolf Rocker
"
701,Commotion-dev, OLSR Routes,"Thu, 9 Aug 2012 14:36:34 -0400",-0400,bame at riverrock.org,"In a situation I struggled with, olsrd was remarkably good about displaying
routes it knew about, and remarkably terrible about helping me
find out why they were not showing up in (any of the) kernel routes.
I instrumented the code quite deeply even, and still it was subtle.

Turned out I used a slightly different LinkQualityAlgorithm than my
peers, and none of the visible routes made it to routing tables.  No
error messages.  No warnings: ""hey I have routes but I'm not sharing,
just saying"".  Given the effort I as a pretty damn good and experienced
hacker expended to debug this, I declared the implementation of olsrd
not ready for mortals :-)

	-p

"
702,Commotion-dev, OLSR Routes,"Thu, 09 Aug 2012 12:33:45 -0700",-0700,Jason Prenger,"I probably should have noted in my last email that I'm running this on
my Android phone. Based upon the httpinfo none of the routes are in the
kernel.  When I look at the routes on the phone itself (though not
through any 'route' command) I don't see anything being set up either.

I'll try messing with some of the configuration values some more and see
if that helps just didn't know if I missed something obvious

Thanks,
Jason Prenger

On Thu, 2012-08-09 at 14:36 -0400, bame at riverrock.org wrote:

> In a situation I struggled with, olsrd was remarkably good about displaying
> routes it knew about, and remarkably terrible about helping me
> find out why they were not showing up in (any of the) kernel routes.
> I instrumented the code quite deeply even, and still it was subtle.
> 
> Turned out I used a slightly different LinkQualityAlgorithm than my
> peers, and none of the visible routes made it to routing tables.  No
> error messages.  No warnings: ""hey I have routes but I'm not sharing,
> just saying"".  Given the effort I as a pretty damn good and experienced
> hacker expended to debug this, I declared the implementation of olsrd
> not ready for mortals :-)
> 
> 	-p
> 
"
703,Commotion-dev, OLSR Routes,"Thu, 09 Aug 2012 13:50:35 -0700",-0700,Jason Prenger,"Success! All the routes are being setup correctly when I switched the
LinkQualityAlgorithm

Thanks again

On Thu, 2012-08-09 at 12:33 -0700, Jason Prenger wrote:

> I probably should have noted in my last email that I'm running this on
> my Android phone. Based upon the httpinfo none of the routes are in
> the kernel.  When I look at the routes on the phone itself (though not
> through any 'route' command) I don't see anything being set up either.
> 
> I'll try messing with some of the configuration values some more and
> see if that helps just didn't know if I missed something obvious
> 
> Thanks,
> Jason Prenger
> 
> On Thu, 2012-08-09 at 14:36 -0400, bame at riverrock.org wrote: 
> 
> > In a situation I struggled with, olsrd was remarkably good about displaying
> > routes it knew about, and remarkably terrible about helping me
> > find out why they were not showing up in (any of the) kernel routes.
> > I instrumented the code quite deeply even, and still it was subtle.
> > 
> > Turned out I used a slightly different LinkQualityAlgorithm than my
> > peers, and none of the visible routes made it to routing tables.  No
> > error messages.  No warnings: ""hey I have routes but I'm not sharing,
> > just saying"".  Given the effort I as a pretty damn good and experienced
> > hacker expended to debug this, I declared the implementation of olsrd
> > not ready for mortals :-)
> > 
> > 	-p
> > 
"
704,Commotion-dev, Super Node,"Wed, 15 Aug 2012 12:51:10 -0400",-0400,Seamus Tuohy,
705,Commotion-dev, Super Node,"Thu, 16 Aug 2012 17:42:33 -0400",-0400,Benjamin Chodoroff,"On 08/15/2012 12:51 PM, Seamus Tuohy wrote:
> We have a lot of notes starting to take form in the development notes
> section of the Wiki. I would love to hear ideas, suggestions, and
> critique both on the  list and on the wiki.

This is great to hear about. We've been working on a client-node-client
websocket messaging (we affectionately refer to this as ""meshaging"")
server openwrt package over here in the work dept. We're tidying up some
intro docs that will be ready tomorrow and will have some beta code and
packages posted next week. If you're adventurous, you can try the code
at https://github.com/AdamMagaluk/commotion-ws-routing.git sans context
and testing ;)

Rather than ""supernodes"" we've been focusing on using the power of
whatever devices that connect to the AP to do any heavy lifting, and
using the nodes to simply pass messages / keep track of connected clients.

Is there discussion elsewhere related to registering ""apps"" with LuCI or
are we coming up with this stuff alone?

Is there another wiki page aside from ""Meshable applications"" to look over?

What other mesh-based applications and ideas have people come across?

-b

"
706,Commotion-dev, Remove exclude pattern in classpathentry in,"Thu, 16 Aug 2012 18:30:45 -0400",-0400,Will Hawkins,"Hello everyone!

As HC said in our IRC today, ""every day with Eclipse is a struggle"".
When I import the Commotion Meshtether project into Eclipse it gives me
an error about duplicate 'src' entries in the classpath.

The problem is resolved by removing the ""excluding"" attribute of the
<classpathentry kind=""src"" excluding=""*/.svn/*"" path=""src""/> line in the
.classpath file. I ran a 'find' through the source directory and there
aren't any .svn files in our project, so I think removing that should be
okay.

Will
"
707,Commotion-dev, Remove exclude pattern in classpathentry in,"Thu, 16 Aug 2012 23:37:17 -0400",-0400,Hans-Christoph Steiner,"
We can remove it, but that stuff was added by either Eclipse or the
Android ADT plugin. I certainly didn't modify the Eclipse files
manually.  Its been working fine for me on three different Eclipe 3.x
Indigo installs.

.hc

On 08/16/2012 06:30 PM, Will Hawkins wrote:
> Hello everyone!
> 
> As HC said in our IRC today, ""every day with Eclipse is a struggle"".
> When I import the Commotion Meshtether project into Eclipse it gives me
> an error about duplicate 'src' entries in the classpath.
> 
> The problem is resolved by removing the ""excluding"" attribute of the
> <classpathentry kind=""src"" excluding=""*/.svn/*"" path=""src""/> line in the
> .classpath file. I ran a 'find' through the source directory and there
> aren't any .svn files in our project, so I think removing that should be
> okay.
> 
> Will
> _______________________________________________
> Commotion-dev mailing list
> Commotion-dev at lists.chambana.net
> http://lists.chambana.net/mailman/listinfo/commotion-dev
> 

"
708,Commotion-dev, Remove exclude pattern in classpathentry in,"Fri, 17 Aug 2012 00:33:32 -0400",-0400,Will Hawkins,"
It's up to you, really! I have no idea why Eclipse complains to me. It only occurs when I import the project into Eclipse. It doesn't cause any problems but annoys me nonetheless.

Also, do you mean to imply that you don't go around editing .classpath files on a regular basis? ;-)

Will
 
On Thursday, August 16, 2012 23:37 EDT, Hans-Christoph Steiner <hans at guardianproject.info> wrote: 
 
> 
> We can remove it, but that stuff was added by either Eclipse or the
> Android ADT plugin. I certainly didn't modify the Eclipse files
> manually.  Its been working fine for me on three different Eclipe 3.x
> Indigo installs.
> 
> .hc
> 
> On 08/16/2012 06:30 PM, Will Hawkins wrote:
> > Hello everyone!
> > 
> > As HC said in our IRC today, ""every day with Eclipse is a struggle"".
> > When I import the Commotion Meshtether project into Eclipse it gives me
> > an error about duplicate 'src' entries in the classpath.
> > 
> > The problem is resolved by removing the ""excluding"" attribute of the
> > <classpathentry kind=""src"" excluding=""*/.svn/*"" path=""src""/> line in the
> > .classpath file. I ran a 'find' through the source directory and there
> > aren't any .svn files in our project, so I think removing that should be
> > okay.
> > 
> > Will
> > _______________________________________________
> > Commotion-dev mailing list
> > Commotion-dev at lists.chambana.net
> > http://lists.chambana.net/mailman/listinfo/commotion-dev
> > 
> 
> _______________________________________________
> Commotion-dev mailing list
> Commotion-dev at lists.chambana.net
> http://lists.chambana.net/mailman/listinfo/commotion-dev
> 
 
 
 
 


"
709,Commotion-dev, a bit about mesh apps,"Mon, 20 Aug 2012 09:27:45 -0400",-0400,Benjamin Chodoroff,"Hi list,

Over here in Detroit, we've been working on mesh applications. We'll be
pushing out some blog posts and code during this week. Please take a
look at my first draft of the first post below. I'll put it on the
internet more publicly later today!

Overview

Over the past few years, The Work Department has been active in building
community wireless networks in Detroit. We have experimented with
different types of hardware and software, and we have helped
neighborhoods build useful networks to share internet connectivity and
provide local file sharing. Something we haven?t had much of an
opportunity to explore, though, is building more elaborate systems that
leverage the unique traits of mesh networks.

As we worked through other parts of the Commotion project, we
brainstormed ideas for wireless mesh applications. We noticed that our
ideas would oftentimes replicate existing web services - e.g. a local
fileserver for music or movies, or a local message board for
neighborhood discussion. We began to wonder what would make a community
wireless application more appealing than using a centralized
Internet-based application. We agreed that it wouldn?t be enough to
offer someone the simple satisfaction of knowing their data is
decentralized... there would need to be some other benefits to using a
local application.

What would these benefits be? What is special about the architecture of
a community wireless mesh network? In pondering these questions, we
considered what is provided by these networks -- earlier, I mentioned
that the networks provide internet connection sharing and local file
sharing... but that?s only a part of the story. These networks also
provide something much grander: they become community institutions.
Unlike the Comcast hardware that is bolted out of arm?s reach on a
utility pole, our community wireless equipment lives on our porches, in
chicken coops, in our bell towers, and next to our desks. Each piece of
equipment has a story behind it. We know who held the ladder while it
was being installed and who lent their hammer drill to run a cable up to it.

A community mesh wireless router?s IP address is more than a 32 bit
number. It has history and meaning. How can we build applications that
reflect and enhance this?

I had the good fortune to meet Adam Magaluk at the Detroit?s
hackerspace, OmniCorpDetroit. Adam works on mesh wireless systems at
Illuminating Concepts, and is deeply interested in OLSR and embedded
systems. We are both young programmers, and share a desire for modular
and decentralized systems. During our initial conversations and
research, we ended up favoring web browser based application development
-- this way, people who might want to use an application wouldn?t have
to download anything. With today?s web browsers having lightweight
streaming messaging capabilities with WebSocket, we would have a lot of
flexibility in application development.

To build a web browser based application, we can start by limiting the
amount of work the server does to a bare minimum. In the circumstance of
a chat application, we can say that the server should simply keep a
record of who is connected to a chat session (in a sort of subscription
model) and then, as messages are posted, transfer messages from the
publisher to the subscribers.

Limiting the duties of each mesh node to passing messages and keeping
track of connected clients ends up being beneficial in two ways: it
conserves computing resources and encourages decentralized application
development. Since most community wireless routers are low power, low
cost devices running with MIPS CPUs and 4-16GB memory, the former
benefit is clearly attractive. The latter benefit is a bit more complex
- do we really need a fully decentralized application? Why can?t we just
have a little bit of local node storage? It sure would make things
simpler if we could have a local data cache instead of trying to develop
a peer-to-peer storage system.

To begin experimenting with the core concepts of lightweight messaging
systems that can work with hardware that makes up a community wireless
network, we built a system to provide WebSocket service to clients
connected to a Commotion access point. This service can be utilized by
anything on the network, but in our first example application, it is
employed by a web application served from a publicly-accessible LuCI
URL, linked from the splash page. The application provides a simple
interface to chat with other people who have connected to the local
node?s websocket chat system.

Thanks to Hans Christoph Steiner?s work on the jsoninfo plugin, OLSRd
can easily provide some useful network information as a json object to
web applications. Above the network layer, our websocket message server
can provide data about connected clients and possibly other information
in the future.

After you get your head wrapped around the WebSocket sever, its
underlying restrictions, and the mesh network playing field, you can
start to imagine various situations where local messaging might be
interesting. With an idea in mind, a developer can easily jump into a
familiar web application development environment - if you have used
WebSockets or socket.io or the like before, you understand the core
concepts of writing a mesh network application using these building
blocks. As we build more features into the platform, it will offer more
options for developers.

Next Steps

Currently, the system provides a messaging service that doesn?t utilize
node-to-node mesh connections. As it stands, we can develop some
interesting and useful applications, but there is definitely a lot to
gain from adding functionality as well as possibly revamping things in
the interest of security or privacy.

Our next major task is to begin experimenting with systems to allow
neighboring nodes to subscribe to each others? connections. To use the
chat application as an example of how this might be used, a chat
participant might be able to start a conversation with people connected
to their own mesh node as well as its next neighbors, or some other
arbitrary number of hops.

We would also like to experiment with simple implementations of shared /
distributed storage. Again, to use the chat system as an illustration,
we could have chat participants store chat logs and offer them to new
participants who broadcast a request for the last n minutes of
conversation. There is a lot of distributed storage work for us to
reference, of course, so we have our work cut out for us!

Aside from enhancements and features in the messaging system itself, we
have plenty of ideas for the actual applications. We have recently been
prototyping games that could use a neighborhood or multi-neighborhood
mesh network as a playing field. We have found that prototyping and
brainstorming games is an enlightening process: it helps explain the ins
and outs of the technology to people, and also presents clear challenges
to create obvious and attainable goals within the technology?s
limitations. We?ll be sharing some ?capture the flag? style game ideas
that utilize a meshaging system during the next couple of weeks.

"
710,Commotion-dev, Documentation available for freifunk-watchdog,"Mon, 20 Aug 2012 15:16:29 -0500",-0500,Ben West,"Might anyone know if updated and/or translated documentation for the
freifunk-watchdog service is available somewhere?  All I can find is
the somewhat outdated German wiki page below:

http://wiki.freifunk.net/Kamikaze/LuCI/Watchdog

-- 
Ben West
me at benwest.name
"
711,Commotion-dev, beta release for MeshTether?,"Tue, 21 Aug 2012 17:41:41 -0400",-0400,Hans-Christoph Steiner,"
I haven't heard much back about the test release of MeshTether.  I'd
like to try to get the word out more.  Any plan from OTI about
announcing/publicizing?  Or I can also just send a bunch of emails myself :)

.hc
"
712,Commotion-dev, beta release for MeshTether?,"Wed, 22 Aug 2012 10:44:06 +0200",+0200,L. Aaron Kaplan,"

Hans, I guess you might get useful feedback from the olsr-{dev ,users} mailing list.

On Aug 21, 2012, at 11:41 PM, Hans-Christoph Steiner wrote:

> 
> I haven't heard much back about the test release of MeshTether.  I'd
> like to try to get the word out more.  Any plan from OTI about
> announcing/publicizing?  Or I can also just send a bunch of emails myself :)
> 
> .hc
> _______________________________________________
> Commotion-dev mailing list
> Commotion-dev at lists.chambana.net
> http://lists.chambana.net/mailman/listinfo/commotion-dev

"
713,Commotion-dev, beta release for MeshTether?,"Wed, 22 Aug 2012 14:56:38 -0400",-0400,Andrew Reynolds,"On 08/21/2012 05:41 PM, Hans-Christoph Steiner wrote:
> 
> I haven't heard much back about the test release of MeshTether.  I'd
> like to try to get the word out more.  Any plan from OTI about
> announcing/publicizing?  Or I can also just send a bunch of emails myself :)

Short answer: You're welcome to start talking about it and asking for input.

We here at OTI have been waiting for a couple of pieces to come together
before we really publicize it. First, we want to get Will's su component
integrated. We're also trying to hold off until the release of the new
Commotion site (scheduled for late August/early September).

That said, we're still talking about it and asking for input, just not
as publicly as we plan to in the very near future.

-andrew

"
714,Commotion-dev, beta release for MeshTether?,"Wed, 22 Aug 2012 15:12:23 -0400",-0400,Hans-Christoph Steiner,"

On 08/22/2012 02:56 PM, Andrew Reynolds wrote:
> On 08/21/2012 05:41 PM, Hans-Christoph Steiner wrote:
"
715,Commotion-dev, MeshTether test release - olsrd for Android,"Wed, 22 Aug 2012 16:56:34 -0400",-0400,Hans-Christoph Steiner,"
Commotion MeshTether is an Android app that aims to make it possible to
connect to OLSR meshes with a single click of a button.  It comes
configured for the Commotion mesh by default, but can be entirely
configured, and can have multiple mesh ""profiles"" to choose from.

There are two information tabs: Links and Info.  Links shows all of the
first-hop links and Info shows the entire wifi config and olsrd.conf
settings.  Additionally, you can share/email debug information from the
app's menu.

Its working pretty well on the Nexus One I'm using for testing.  I've
also tried the HTC Wildfire, Motorola Droid, and HTC myTouch 3G.

The mesh profiles are implemented like this:

- (default) uses the wifi/ip settings from the preferences and the
  olsrd.conf that is included in the app

- the rest are scanned from the file system in two places:
    * in the app's app_bin/ folder
    * /mnt/sdcard/MeshTether (i.e. the MeshTether folder on the SD card)

- the scanner looks in those folders for *.properties files and takes
  the filename as the profile name (i.e. myprofile.properties will be
  linked to the ""myprofile"" item in the profiles menu)

- if there is also a myprofile.conf next to the myprofile.properties
  then it will use that as the olsrd.conf. otherwise, it'll use the
  included olsrd.conf

- the properties options are:

    ssid=commotionwireless.net
    bssid=02:CA:FF:EE:BA:BE
    channel=5
    ip=172.29.0.0
    ipgenerate=true
    netmask=255.255.0.0
    dns=8.8.8.8

- all are required, except 'ipgenerate', which marks the 'ip' as the
  root for the IP generation algorithm.  If 'ipgenerate' is unset or
  not 'true', then the 'ip' is used as is.

Here's a test apk:

https://guardianproject.info/builds/CommotionMeshTether/2012-08-22/
md5: 176008560f00d8cef65f0e3e781884e1
sha1: b9151fb635185880007411fd49e8ab5b254ad750

Give it a whirl and let us know how it works for you!

.hc

"
716,Commotion-dev, FoxFi (WiFi Tether w/o Root),"Thu, 23 Aug 2012 17:09:35 -0400",-0400,Hans-Christoph Steiner,"
Has anyone seen FoxFi?  It seems to be able to create a Master mode AP
on Android phones that creates an infrastructure mode network.  It
worked on my stock Nexus One, which is rooted, but it didn't prompt me
for root access.

https://play.google.com/store/apps/details?id=com.foxfi

.hc
"
717,Commotion-dev, OpenWRT trunk r33202 does PSK-encrypted adhoc on,"Thu, 23 Aug 2012 18:04:05 -0500",-0500,Ben West,"Hi All,

Sharing some results from a couple weeks of surfing the choppy waters
of recent OpenWRT trunk: I have been able to get 2 UBNT ar71xx nodes
to mesh with PSK-encrypted adhoc, aka IBSS RSN.

You can even configure the encryption in /etc/config/wireless,
provided you use hostapd and wpa_supplicant packages instead of wpad
or wpad-mini.

Known so far:
- The meshconfig tool bundled w/ Commotion does not work at all,
likely due to significant changes made after trunk r31639 for netifd
support.  I unfortunately could not glean more info about this, since
nodes flashed w/ the commotionbase package atop r33202 trunk became
completely unresponsive.  I have a TTL/serial cable on order, to
hopefully learn more about this.
- Likewise, the freifunk-watchdog service (ffwatchd), as configured &
bundled w/ Commotion, doesn't seem to like an encrypted mesh.  I saw
it repeatedly restarting the wireless interfaces, so I removed that
pkg from the firmware images I was testing with.  I posted a query to
this list previously if anyone knows of documentation available for
ffwatchd.
- Although you can indeed specify ""encryption psk"" for the mesh VAP in
/etc/config/wireless, a bug with wpa_supplicant.sh causes that VAP to
lose its assigned IP address thereafter.  I had do ""ifconfig wlan0
10.12.x.x"" after bringing up the wireless to restore the IP address.
- ""iw wlan0 station dump"" suggests that nodes joining an encrypted
mesh do not get reliably ""authorized,"" even when they are
""authenticated.""  On the un-authorized node where I observed this, I
bringing its wlan0 down and then back up resolved this.
- My UBNT nodes were able to ping each other (even at 10ms intervals
using fping) OK for days, until a power blip reset them.

Unknown, so far:
- Whether this works for ath5k too.  Trunk r33202 does not appear to
boot at all on ath5k, although recent patches submitted to trunk do
explicitly mention IBSS RSN support for ath5k.
- What sort of speed penalty this imposes, or if the PSK encryption is
done in hardware or software on either platform.
- Whether ar71xx/ath5k driver will let you add more VAPs (encrypted or
not) to a physical interface already broadcasting an encrypted mesh.
- Whether hostapd-mini and wpa-supplicant-mini will correctly
configure IBSS RSN, too.

It looks like much thanks for getting IBSS RSN to a functional state
on Atheros chips should go to Antonio Quartulli, who is involved with
the BATMAN-based project http://open-mesh.org.

-- 
Ben West
http://gowasabi.net
ben at gowasabi.net
"
718,Commotion-dev, HIG,"Fri, 24 Aug 2012 11:39:00 -0400",-0400,Michael Gregor,"Hi all, 

Writing to let you know that the final draft of the Human Interface Guidelines is complete and available in the soon-to-be-launched Commotion site.

Take a glance at http://commotion-kb-062512.jackpine.theworkdept.com/docs/hig/introduction

Michael


- - - -
Michael Gregor
Digital Strategy Consultant
313.437.1244 (office)
theworkdept.com


This email message and any attached files are confidential and are intended solely for the use of the addressee(s) named above. If you are not the intended recipient, any review, use, dissemination, forwarding, printing, copying, or other distribution of this email message and any attached files is strictly prohibited.

"
719,Commotion-dev, HIG,"Fri, 24 Aug 2012 12:11:26 -0400",-0400,Michael Gregor,"Hi all, 

Writing to let you know that the final draft of the Human Interface Guidelines is complete and available in the soon-to-be-launched Commotion site.

Take a glance at http://commotion-kb-062512.jackpine.theworkdept.com/docs/hig/introduction

Michael


- - - -
Michael Gregor
Digital Strategy Consultant
313.437.1244 (office)
theworkdept.com


This email message and any attached files are confidential and are intended solely for the use of the addressee(s) named above. If you are not the intended recipient, any review, use, dissemination, forwarding, printing, copying, or other distribution of this email message and any attached files is strictly prohibited.

"
720,Commotion-dev, Remove exclude pattern in classpathentry in,"Mon, 27 Aug 2012 11:45:09 -0400",-0400,Hans-Christoph Steiner,"
I removed it.  Turns out I think I was wrong about where it came from.
I think it came from the Barnacle author.  I looked at other Android
projects where I know Eclipse created them, that bit was missing.  Maybe
it was inserted by an SVN plugin or something.

.hc

On 08/17/2012 12:33 AM, Will Hawkins wrote:
> 
> It's up to you, really! I have no idea why Eclipse complains to me. It only occurs when I import the project into Eclipse. It doesn't cause any problems but annoys me nonetheless.
> 
> Also, do you mean to imply that you don't go around editing .classpath files on a regular basis? ;-)
> 
> Will
>  
> On Thursday, August 16, 2012 23:37 EDT, Hans-Christoph Steiner <hans at guardianproject.info> wrote: 
>  
"
721,Commotion-dev, Single su (aka Shell Fork),"Mon, 27 Aug 2012 16:10:22 -0400",-0400,Will Hawkins,"Hello everyone!

The much-talked-about single SU functionality is ready to deploy. Most
of the functionality works through a daemon known as fork. fork is a
shell that allows ""the user to remotely start a shell, manage jobs, and
give input and take output from those jobs"". For more information about
fork, please refer to the project README file available at
https://github.com/opentechinstitute/shell-fork.

fork has a Java API that is used to incorporate it into the MeshTether
application. The Java API has JavaDoc to explain its usage. To ""make""
the JavaDoc, use the ant target javadoc, as in
$ ant javadoc
The resulting files will be in the bin/ directory of the source code tree.

Attached to this email are the patches to the MeshTether application
that integrate fork. The patches include changes to Java source code and
Makefiles.

In order for these patches to work, you must first incorporate
shell-fork (git://github.com/opentechinstitute/shell-fork.git) as a
submodule in the external/fork path.

I'm sure that there are parts of the integration that I am forgetting to
mention. Please send email and we can hash things out.

:-)
Will

"
722,Commotion-dev, Route indicator in links view not updating,"Mon, 27 Aug 2012 16:53:14 -0700",-0700,Jason Prenger,"Hey Guys,

Been working with the Android app and got to say this stuff is awesome,
works great.  I did notice that my HNA indicator wasn't showing up
properly though in the links list.  I have a small network where every
node is broadcasting a HNA but only a few would indicators would show in
the links list, and only some of the time.  I could still ping and send
data to those nodes so I know the routes were being setup properly, just
the indicator wasn't showing correctly some times.

Delved into it a little bit and noticed that in LinksActivity lines 203
and 204, the new client data's hasRouteToOther and hasDefaultRoute are
being set to the current (or old) data.  I don't know if that was done
on purpose or what but it doesn't seem like that should be the case.

I haven't done much work with GIT in the past so I'm not sure the
procedure for commits or pull-requests but if you want me to go that
approach let me know.  And if this was on purpose then please disregard
this

Jason Prenger
"
723,Commotion-dev, Route indicator in links view not updating,"Tue, 28 Aug 2012 09:37:09 -0400",-0400,Andrew Reynolds,"On 08/27/2012 07:53 PM, Jason Prenger wrote:
> I haven't done much work with GIT in the past so I'm not sure the
> procedure for commits or pull-requests but if you want me to go that
> approach let me know.  And if this was on purpose then please disregard
> this

For now, just submit a patch to the commotion-dev list. We've been
talking about this sort of project governance issue, and have a few
ideas on privilege escalation, but we haven't nailed down any of the
processes.

Once we put up the new Commotion site (sometime in the next couple of
weeks) and have something public to point to, we will start having these
discussions more publicly. In the mean time, please feel free to share
any ideas. We're not trying to shut people out or reinvent the wheel.

-andrew

"
724,Commotion-dev, Route indicator in links view not updating,"Tue, 28 Aug 2012 09:51:08 -0400",-0400,Josh King,"Hi Jason,

Thanks so much for the bug report! Will or Hans, do you have any
comments on whether this is the appropriate behavior? Jason, currently
the best way to contribute is by submitting a patch to the list, or by
filing a bug report at https://code.commotionwireless.net and attaching
a patch file (you can also email bugs at commotionwireless.net to start a
ticket). We are also looking at linking up with Github, so that
contributors can more easily issue pull requests.


Jason Prenger <jason.prenger at datasoft.com> wrote:

>Hey Guys,
>
>Been working with the Android app and got to say this stuff is awesome,
>works great.  I did notice that my HNA indicator wasn't showing up
>properly though in the links list.  I have a small network where every
>node is broadcasting a HNA but only a few would indicators would show
>in
>the links list, and only some of the time.  I could still ping and send
>data to those nodes so I know the routes were being setup properly,
>just
>the indicator wasn't showing correctly some times.
>
>Delved into it a little bit and noticed that in LinksActivity lines 203
>and 204, the new client data's hasRouteToOther and hasDefaultRoute are
>being set to the current (or old) data.  I don't know if that was done
>on purpose or what but it doesn't seem like that should be the case.
>
>I haven't done much work with GIT in the past so I'm not sure the
>procedure for commits or pull-requests but if you want me to go that
>approach let me know.  And if this was on purpose then please disregard
>this
>
>Jason Prenger
>_______________________________________________
>Commotion-dev mailing list
>Commotion-dev at lists.chambana.net
>http://lists.chambana.net/mailman/listinfo/commotion-dev

"
725,Commotion-dev, Single su (aka Shell Fork),"Tue, 28 Aug 2012 15:36:09 -0400",-0400,Hans-Christoph Steiner,"
Wow, it turned into quite a project.  It might take me a bit of time to
wrap my head around it. A couple of questions:

- Is this for use in other projects besides MeshTether?

- does fork require android-16?  That will eliminate the majority of
deployed devices. This is set in 0001-Add-fork.patch

- Does fork not work with the wifiLock?  It was commented out in
0003-MeshService...patch

.hc

On 08/27/2012 04:10 PM, Will Hawkins wrote:
> Hello everyone!
> 
> The much-talked-about single SU functionality is ready to deploy. Most
> of the functionality works through a daemon known as fork. fork is a
> shell that allows ""the user to remotely start a shell, manage jobs, and
> give input and take output from those jobs"". For more information about
> fork, please refer to the project README file available at
> https://github.com/opentechinstitute/shell-fork.
> 
> fork has a Java API that is used to incorporate it into the MeshTether
> application. The Java API has JavaDoc to explain its usage. To ""make""
> the JavaDoc, use the ant target javadoc, as in
> $ ant javadoc
> The resulting files will be in the bin/ directory of the source code tree.
> 
> Attached to this email are the patches to the MeshTether application
> that integrate fork. The patches include changes to Java source code and
> Makefiles.
> 
> In order for these patches to work, you must first incorporate
> shell-fork (git://github.com/opentechinstitute/shell-fork.git) as a
> submodule in the external/fork path.
> 
> I'm sure that there are parts of the integration that I am forgetting to
> mention. Please send email and we can hash things out.
> 
> :-)
> Will
> 
> 
> 
> _______________________________________________
> Commotion-dev mailing list
> Commotion-dev at lists.chambana.net
> http://lists.chambana.net/mailman/listinfo/commotion-dev
> 

"
726,Commotion-dev, Single su (aka Shell Fork),"Tue, 28 Aug 2012 17:24:13 -0400",-0400,Will Hawkins,"Hey Hans,

Replies inline.

On 08/28/2012 03:36 PM, Hans-Christoph Steiner wrote:
> 
> Wow, it turned into quite a project.  It might take me a bit of time to
> wrap my head around it. A couple of questions:
> 
> - Is this for use in other projects besides MeshTether?

Could be. :-)

> 
> - does fork require android-16?  That will eliminate the majority of
> deployed devices. This is set in 0001-Add-fork.patch

Does not require it, as far as I know. I only put in 16 as the default
because it's the SDK platform that I have installed on my machine. The
gist of what's going on there is this:

The MeshTether app wants to be notified using an Android Handler object.
To include the ability for the fork Java API to include this
functionality and build properly, it has to ""link"" against android.jar.
(At least that's the way I understand it.) So, as a default I used what
I had defined on my system and that was 16. The Android Handler has been
in the API since version 1
(http://developer.android.com/reference/android/os/Handler.html) so it
should work on any platform.

I hope I made that clearer rather than, well, vaguer, if that's even a word.

> 
> - Does fork not work with the wifiLock?  It was commented out in
> 0003-MeshService...patch

That was only commented out because it does not work on the specific
device that I am using for testing. Sorry for allowing that to slip through.

Please reach out with other questions. I am interested in your feedback,
as always!

Will

> 
> .hc
> 
> On 08/27/2012 04:10 PM, Will Hawkins wrote:
"
727,Commotion-dev, Single su (aka Shell Fork),"Wed, 29 Aug 2012 17:38:18 -0400",-0400,Hans-Christoph Steiner,"

Would it be possible to start 'fork' in a Java Thread, then interact
with it using stdin/stdout using StreamThread or something like that?  I
would be nice to not have to use TCP/IP and a session key.

.hc

On 08/28/2012 05:24 PM, Will Hawkins wrote:
> Hey Hans,
> 
> Replies inline.
> 
> On 08/28/2012 03:36 PM, Hans-Christoph Steiner wrote:
"
728,Commotion-dev, Single su (aka Shell Fork),"Wed, 29 Aug 2012 17:42:50 -0400",-0400,Will Hawkins,"I had thought about that, actually. It's definitely doable. It would
require some work, but I am definitely not opposed to it. In fact, the
session key came about because I was not interacting with fork through
stdio (which is definitely more secure).

Obviously the goal is not to have a remote shell over the network so
TCP/IP isn't a design requirement.

If there is an interest in moving toward this model, just let me know. I
could probably have it done in a few days.

Will

On 08/29/2012 05:38 PM, Hans-Christoph Steiner wrote:
> 
> 
> Would it be possible to start 'fork' in a Java Thread, then interact
> with it using stdin/stdout using StreamThread or something like that?  I
> would be nice to not have to use TCP/IP and a session key.
> 
> .hc
> 
> On 08/28/2012 05:24 PM, Will Hawkins wrote:
"
729,Commotion-dev, Single su (aka Shell Fork),"Thu, 30 Aug 2012 11:27:56 -0400",-0400,Will Hawkins,"Hey Hans,

Josh, Andrew and I discussed this further offline. We talked about
making this change to interact with fork via stdio in a future release.

I talked about the rationale of using TCP/IP and session keys in the
first place (debugging convenience, asynchronicity of issuing
control/input commands) and the reason why it's not a big deal to switch
over. That said, staying with TCP/IP at this point seems like a good
idea to us so that we can have a fixed debugging target while fork is
integrated with MeshTether. As far as I can tell, the change to this
model of interaction between user and fork would not significantly
change the API.

I am really glad that you provided this level of feedback. You and other
Guardians (n8fr8) are very talented developers and I look forward to
incorporating your bug reports and feedback.

Thoughts?

On 08/29/2012 05:38 PM, Hans-Christoph Steiner wrote:
> 
> 
> Would it be possible to start 'fork' in a Java Thread, then interact
> with it using stdin/stdout using StreamThread or something like that?  I
> would be nice to not have to use TCP/IP and a session key.
> 
> .hc
> 
> On 08/28/2012 05:24 PM, Will Hawkins wrote:
"
730,Commotion-dev, Single su (aka Shell Fork),"Thu, 30 Aug 2012 11:44:01 -0400",-0400,Hans-Christoph Steiner,"
I think your approach has a lot of potential for streamlining the
handling of root in Android apps.  I'm still trying to wrap my head
around it, so that's where a lot of my questions come from.  Then I'm a
bit dogmatic when it comes to ""as simple as possible"".

Will, could you reissue your patches without the API change and removal
of the wifi lock?  Or if the wifi lock is an issue, that should probably
be handled separately.  Also as a stylistic thing, I think there is no
need to leave in commented out code, since that code will always be in
the git history.  But others disagree on that one.

.hc

On 08/30/2012 11:27 AM, Will Hawkins wrote:
> Hey Hans,
> 
> Josh, Andrew and I discussed this further offline. We talked about
> making this change to interact with fork via stdio in a future release.
> 
> I talked about the rationale of using TCP/IP and session keys in the
> first place (debugging convenience, asynchronicity of issuing
> control/input commands) and the reason why it's not a big deal to switch
> over. That said, staying with TCP/IP at this point seems like a good
> idea to us so that we can have a fixed debugging target while fork is
> integrated with MeshTether. As far as I can tell, the change to this
> model of interaction between user and fork would not significantly
> change the API.
> 
> I am really glad that you provided this level of feedback. You and other
> Guardians (n8fr8) are very talented developers and I look forward to
> incorporating your bug reports and feedback.
> 
> Thoughts?
> 
> On 08/29/2012 05:38 PM, Hans-Christoph Steiner wrote:
"
731,Commotion-dev, Single su (aka Shell Fork),"Thu, 30 Aug 2012 15:42:49 -0400",-0400,Will Hawkins,"Thanks for your reply, Hans.

Here is a repackage of those patches w/out the commented out wifi lock
code. I tend to agree that removing code outright is the best,
especially when everything is under revision control. When I look back
at blocks of code that is commented out I always wonder if I left it
there with intent to put it back in later! It's so much clearer when
it's just gone.

Let me know if you need other modifications to these patches.

Will

On 08/30/2012 11:44 AM, Hans-Christoph Steiner wrote:
> 
> I think your approach has a lot of potential for streamlining the
> handling of root in Android apps.  I'm still trying to wrap my head
> around it, so that's where a lot of my questions come from.  Then I'm a
> bit dogmatic when it comes to ""as simple as possible"".
> 
> Will, could you reissue your patches without the API change and removal
> of the wifi lock?  Or if the wifi lock is an issue, that should probably
> be handled separately.  Also as a stylistic thing, I think there is no
> need to leave in commented out code, since that code will always be in
> the git history.  But others disagree on that one.
> 
> .hc
> 
> On 08/30/2012 11:27 AM, Will Hawkins wrote:
"
732,Commotion-dev, application captive portal,"Thu, 30 Aug 2012 15:40:33 -0400",-0400,Seamus Tuohy,
733,Commotion-dev, Commotion repos down?,"Thu, 30 Aug 2012 21:08:42 -0500",-0500,Ben West,"It looks like all the git repos are presently throwing 404 errors.  Are the
repos down, and/or have they been relocated?

https://code.commotionwireless.net/projects/commotion-openwrt/repository
https://code.commotionwireless.net/projects/commotion-openbts/repository
https://code.commotionwireless.net/projects/commotion-android/repository

-- 
Ben West
me at benwest.name
"
734,Commotion-dev, Commotion repos down?,"Thu, 30 Aug 2012 23:15:50 -0400",-0400,Josh King,"Hi Ben,

The repos aren't down, but we're having a problem with the redmine
plugin that displays them on the code site. I'm working on fixing that
issue, sorry about the inconvenience.

On 08/30/2012 10:08 PM, Ben West wrote:
> It looks like all the git repos are presently throwing 404 errors.  Are the
> repos down, and/or have they been relocated?
> 
> https://code.commotionwireless.net/projects/commotion-openwrt/repository
> https://code.commotionwireless.net/projects/commotion-openbts/repository
> https://code.commotionwireless.net/projects/commotion-android/repository
> 
> 
> 
> This body part will be downloaded on demand.
> 

-- 
Josh King

""I am an Anarchist not because I believe Anarchism is the final goal,
but because there is no such thing as a final goal."" -Rudolf Rocker

"
735,Commotion-dev, Commotion repos down?,"Thu, 30 Aug 2012 22:40:13 -0500",-0500,Ben West,"Hi Josh,

No problem at all.  I was just checking to ensure there was not something
wrong on my end(s).

On Thu, Aug 30, 2012 at 10:15 PM, Josh King <jking at chambana.net> wrote:

> Hi Ben,
>
> The repos aren't down, but we're having a problem with the redmine
> plugin that displays them on the code site. I'm working on fixing that
> issue, sorry about the inconvenience.
>
> On 08/30/2012 10:08 PM, Ben West wrote:
> > It looks like all the git repos are presently throwing 404 errors.  Are
> the
> > repos down, and/or have they been relocated?
> >
> > https://code.commotionwireless.net/projects/commotion-openwrt/repository
> > https://code.commotionwireless.net/projects/commotion-openbts/repository
> > https://code.commotionwireless.net/projects/commotion-android/repository
> >
> >
> >
> > This body part will be downloaded on demand.
> >
>
> --
> Josh King
>
> ""I am an Anarchist not because I believe Anarchism is the final goal,
> but because there is no such thing as a final goal."" -Rudolf Rocker
>
"
736,Commotion-dev, OpenWRT trunk r33202 does PSK-encrypted adhoc,"Fri, 31 Aug 2012 00:27:21 -0500",-0500,Ben West,"Hi All,

For a follow here, I have been able to get IBSS RSN (aka PSK-encrypted
mesh) working now on an Open Mesh OM1P (aka Atheros AR2315 chipset), and it
does successfully mesh with the existing two UBNT ar71xx nodes.  So,
encrypted mesh does work for atheros and ar71xx targets on OpenWRT trunk
r33202.

I've been letting all 3 nodes mutually fping each other as fast as they
will allow (roughly 1 ping per 50ms) for the past several days.  So for no
lockups or ugly complaints appearing in kernel logs, despite ifconfig
reporting multiple GBytes transferred.

The problem with ath5k images not booting is actually due to a recently
introduced compile option mucking with older ath5k devices:
https://lists.openwrt.org/pipermail/openwrt-devel/2012-August/016539.html

On Thu, Aug 23, 2012 at 6:04 PM, Ben West <ben at gowasabi.net> wrote:

> Hi All,
>
> Sharing some results from a couple weeks of surfing the choppy waters
> of recent OpenWRT trunk: I have been able to get 2 UBNT ar71xx nodes
> to mesh with PSK-encrypted adhoc, aka IBSS RSN.
>
> You can even configure the encryption in /etc/config/wireless,
> provided you use hostapd and wpa_supplicant packages instead of wpad
> or wpad-mini.
>
> Known so far:
> - The meshconfig tool bundled w/ Commotion does not work at all,
> likely due to significant changes made after trunk r31639 for netifd
> support.  I unfortunately could not glean more info about this, since
> nodes flashed w/ the commotionbase package atop r33202 trunk became
> completely unresponsive.  I have a TTL/serial cable on order, to
> hopefully learn more about this.
> - Likewise, the freifunk-watchdog service (ffwatchd), as configured &
> bundled w/ Commotion, doesn't seem to like an encrypted mesh.  I saw
> it repeatedly restarting the wireless interfaces, so I removed that
> pkg from the firmware images I was testing with.  I posted a query to
> this list previously if anyone knows of documentation available for
> ffwatchd.
> - Although you can indeed specify ""encryption psk"" for the mesh VAP in
> /etc/config/wireless, a bug with wpa_supplicant.sh causes that VAP to
> lose its assigned IP address thereafter.  I had do ""ifconfig wlan0
> 10.12.x.x"" after bringing up the wireless to restore the IP address.
> - ""iw wlan0 station dump"" suggests that nodes joining an encrypted
> mesh do not get reliably ""authorized,"" even when they are
> ""authenticated.""  On the un-authorized node where I observed this, I
> bringing its wlan0 down and then back up resolved this.
> - My UBNT nodes were able to ping each other (even at 10ms intervals
> using fping) OK for days, until a power blip reset them.
>
> Unknown, so far:
> - Whether this works for ath5k too.  Trunk r33202 does not appear to
> boot at all on ath5k, although recent patches submitted to trunk do
> explicitly mention IBSS RSN support for ath5k.
> - What sort of speed penalty this imposes, or if the PSK encryption is
> done in hardware or software on either platform.
> - Whether ar71xx/ath5k driver will let you add more VAPs (encrypted or
> not) to a physical interface already broadcasting an encrypted mesh.
> - Whether hostapd-mini and wpa-supplicant-mini will correctly
> configure IBSS RSN, too.
>
> It looks like much thanks for getting IBSS RSN to a functional state
> on Atheros chips should go to Antonio Quartulli, who is involved with
> the BATMAN-based project http://open-mesh.org.
>
> --
> Ben West
> http://gowasabi.net
> ben at gowasabi.net
"
737,Commotion-dev, application captive portal,"Fri, 31 Aug 2012 09:20:12 -0400",-0400,Benjamin Chodoroff,"On Thu 30 Aug 2012 03:40:33 PM EDT, Seamus Tuohy wrote:
> "
738,Commotion-dev, Commotion repos down?,"Sun, 2 Sep 2012 20:20:04 -0500",-0500,Ben West,"Hello,

I've checked a few things into a new branch labeled ""x86"" (for playing
around with VMs under VirtualBox).  The pushes appear to be going thru
successfully, despite the git web UI at code.commotionwireless.net being
broken.

In particular, this is the URL I've been using in ./.git/config :

url = git at code.commotionwireless.net:commotion/commotion-openwrt.git

I am able to push commits from one machine, and then pull them from
another.  Do please respond if I should stop doing this (i.e. making
current problem w/ git repos worse?).

On Thu, Aug 30, 2012 at 10:40 PM, Ben West <me at benwest.name> wrote:

> Hi Josh,
>
> No problem at all.  I was just checking to ensure there was not something
> wrong on my end(s).
>
>
> On Thu, Aug 30, 2012 at 10:15 PM, Josh King <jking at chambana.net> wrote:
>
"
739,Commotion-dev, Redmine site search also throwing 500 errors,"Mon, 3 Sep 2012 12:42:33 -0500",-0500,Ben West,"I'm not sure if this related to the ongoing problem w/ the git web UI
mentioned in a previous thread, but I see that the Redmine search page is
also throwing 500 errors:

https://code.commotionwireless.net/search?q=foo

-- 
Ben West
me at benwest.name
"
740,Commotion-dev, Redmine site search also throwing 500 errors,"Mon, 3 Sep 2012 12:42:33 -0500",-0500,Ben West,"I'm not sure if this related to the ongoing problem w/ the git web UI
mentioned in a previous thread, but I see that the Redmine search page is
also throwing 500 errors:

https://code.commotionwireless.net/search?q=foo

-- 
Ben West
me at benwest.name
"
741,Commotion-dev, Single su (aka Shell Fork),"Mon, 03 Sep 2012 15:02:04 -0400",-0400,Hans-Christoph Steiner,"
Hey Will

I just noticed, the 0001-Add-fork.patch includes a git URL that probably
only you can reach since its an ssh connection using the account
'hawkinsw'.  I'm guessing you meant to use the publically accessible URL:
https://github.com/opentechinstitute/shell-fork.git

.hc

On 08/30/2012 03:42 PM, Will Hawkins wrote:
> Thanks for your reply, Hans.
> 
> Here is a repackage of those patches w/out the commented out wifi lock
> code. I tend to agree that removing code outright is the best,
> especially when everything is under revision control. When I look back
> at blocks of code that is commented out I always wonder if I left it
> there with intent to put it back in later! It's so much clearer when
> it's just gone.
> 
> Let me know if you need other modifications to these patches.
> 
> Will
> 
> On 08/30/2012 11:44 AM, Hans-Christoph Steiner wrote:
"
742,Commotion-dev, Redmine site search also throwing 500 errors,"Mon, 3 Sep 2012 12:42:33 -0500",-0500,Ben West,"I'm not sure if this related to the ongoing problem w/ the git web UI
mentioned in a previous thread, but I see that the Redmine search page is
also throwing 500 errors:

https://code.commotionwireless.net/search?q=foo

-- 
Ben West
me at benwest.name
"
743,Commotion-dev, Route indicator in links view not updating,"Mon, 03 Sep 2012 20:37:24 -0400",-0400,Hans-Christoph Steiner,"
Hey Jason,

Good catch!  You're right, those two lines are only causing problems.  I
just removed them and committed. Please test and report back if things
are not fixed.

.hc

On 08/27/2012 07:53 PM, Jason Prenger wrote:
> Hey Guys,
> 
> Been working with the Android app and got to say this stuff is awesome,
> works great.  I did notice that my HNA indicator wasn't showing up
> properly though in the links list.  I have a small network where every
> node is broadcasting a HNA but only a few would indicators would show in
> the links list, and only some of the time.  I could still ping and send
> data to those nodes so I know the routes were being setup properly, just
> the indicator wasn't showing correctly some times.
> 
> Delved into it a little bit and noticed that in LinksActivity lines 203
> and 204, the new client data's hasRouteToOther and hasDefaultRoute are
> being set to the current (or old) data.  I don't know if that was done
> on purpose or what but it doesn't seem like that should be the case.
> 
> I haven't done much work with GIT in the past so I'm not sure the
> procedure for commits or pull-requests but if you want me to go that
> approach let me know.  And if this was on purpose then please disregard
> this
> 
> Jason Prenger
> 
> 
> 
> _______________________________________________
> Commotion-dev mailing list
> Commotion-dev at lists.chambana.net
> http://lists.chambana.net/mailman/listinfo/commotion-dev
> 

"
744,Commotion-dev, Single su (aka Shell Fork),"Mon, 03 Sep 2012 22:23:50 -0400",-0400,Hans-Christoph Steiner,"
I tried using
https://github.com/opentechinstitute/shell-fork

And it doesn't build because the tests fail because it can't find
org.junit.*.  That's because there are hard-coded, absolute paths in
shell-fork/build.xml that will only work on your machine:

<property name=""junitJarFile""
value=""/home/hawkinsw/code/junit/junit-4.10.jar""/>
<property name=""androidJarFilePath""
value=""/home/hawkinsw/android-sdk-linux/platforms/android-16/""/"
745,Commotion-dev, Single su (aka Shell Fork),"Tue, 04 Sep 2012 10:53:06 -0400",-0400,Will Hawkins,"Hello Hans!

On 09/03/2012 10:23 PM, Hans-Christoph Steiner wrote:
> 
> I tried using
> https://github.com/opentechinstitute/shell-fork
> 
> And it doesn't build because the tests fail because it can't find
> org.junit.*.  That's because there are hard-coded, absolute paths in
> shell-fork/build.xml that will only work on your machine:
> 
> <property name=""junitJarFile""
> value=""/home/hawkinsw/code/junit/junit-4.10.jar""/>
> <property name=""androidJarFilePath""
> value=""/home/hawkinsw/android-sdk-linux/platforms/android-16/""/"
746,Commotion-dev, Single su (aka Shell Fork),"Tue, 04 Sep 2012 12:13:42 -0400",-0400,Hans-Christoph Steiner,"

On 09/04/2012 10:53 AM, Will Hawkins wrote:
> Hello Hans!
> 
> On 09/03/2012 10:23 PM, Hans-Christoph Steiner wrote:
"
747,Commotion-dev, Tips on getting Android OS (and Commotion) working,"Wed, 12 Sep 2012 14:55:44 -0500",-0500,Ben West,"Hi All (and more specifically Hans-Christoph),

My own naive Googling suggests one is quite capable of getting Android up
and running under VirtualBox, e.g.

Ice Cream Sandwich v4.0:
http://www.vmlite.com/index.php?option=com_content&view=article&id=68:android&catid=17:vmlitenewsrotator
Honeycomb v3.2 (via Android x86):
https://code.google.com/p/android-x86/downloads/list?can=4
Gingerbread v2.3 (via Android x86):
http://www.android-x86.org/releases/build-20110828

It looks like Android x86 is a popular source, but I am curious to hear
about other list members' experience using Android under VirtualBox.  In
particular, I read that some examples of Android VMs do not support an
Ethernet interface, presumably meaning the VM would have no access to the
outside.

-- 
Ben West
me at benwest.name
"
748,Commotion-dev, Tips on getting Android OS (and Commotion),"Wed, 12 Sep 2012 16:19:24 -0400",-0400,Hans-Christoph Steiner,"
Why not just download the Android SDK, which comes with the Android
emulator, which is just a thin wrapper of QEMU.  There are ARM and x86
emulator images included in the SDK.

.hc

On 09/12/2012 03:55 PM, Ben West wrote:
> Hi All (and more specifically Hans-Christoph),
> 
> My own naive Googling suggests one is quite capable of getting Android up
> and running under VirtualBox, e.g.
> 
> Ice Cream Sandwich v4.0:
> http://www.vmlite.com/index.php?option=com_content&view=article&id=68:android&catid=17:vmlitenewsrotator
> Honeycomb v3.2 (via Android x86):
> https://code.google.com/p/android-x86/downloads/list?can=4
> Gingerbread v2.3 (via Android x86):
> http://www.android-x86.org/releases/build-20110828
> 
> It looks like Android x86 is a popular source, but I am curious to hear
> about other list members' experience using Android under VirtualBox.  In
> particular, I read that some examples of Android VMs do not support an
> Ethernet interface, presumably meaning the VM would have no access to the
> outside.
> 
> 
> 
> _______________________________________________
> Commotion-dev mailing list
> Commotion-dev at lists.chambana.net
> http://lists.chambana.net/mailman/listinfo/commotion-dev
> 

"
749,Commotion-dev, Tips on getting Android OS (and Commotion),"Wed, 12 Sep 2012 16:29:20 -0400",-0400,Will Hawkins,"Ben,

I'd side with hc on this one. Unless there is a specific reason for
doing something different, I'd go with the emulator(s) included in the SDK.

Will

On 09/12/2012 04:19 PM, Hans-Christoph Steiner wrote:
> 
> Why not just download the Android SDK, which comes with the Android
> emulator, which is just a thin wrapper of QEMU.  There are ARM and x86
> emulator images included in the SDK.
> 
> .hc
> 
> On 09/12/2012 03:55 PM, Ben West wrote:
"
750,Commotion-dev, Tips on getting Android OS (and Commotion),"Wed, 12 Sep 2012 15:30:13 -0500",-0500,Ben West,"I do see the SDK would effectively replicate the same environment one sees
under VirtualBox.  However, I am interested in VirtualBox, since I would
want the Android node to talk to other VirtualBox VMs, e.g. OpenWRT or
Ubuntu.  The basic goal is to use VirtualBox to (very crudely) simulate
something like a 3-node mesh.

So, I would like to use the inter-VM networking features VirtualBox has.
Does the Android SDK let you define an addressable IP for the virtual
machine, directly accessible to the host OS?

On Wed, Sep 12, 2012 at 3:19 PM, Hans-Christoph Steiner <
hans at guardianproject.info> wrote:

>
> Why not just download the Android SDK, which comes with the Android
> emulator, which is just a thin wrapper of QEMU.  There are ARM and x86
> emulator images included in the SDK.
>
> .hc
>
> On 09/12/2012 03:55 PM, Ben West wrote:
> > Hi All (and more specifically Hans-Christoph),
> >
> > My own naive Googling suggests one is quite capable of getting Android up
> > and running under VirtualBox, e.g.
> >
> > Ice Cream Sandwich v4.0:
> >
> http://www.vmlite.com/index.php?option=com_content&view=article&id=68:android&catid=17:vmlitenewsrotator
> > Honeycomb v3.2 (via Android x86):
> > https://code.google.com/p/android-x86/downloads/list?can=4
> > Gingerbread v2.3 (via Android x86):
> > http://www.android-x86.org/releases/build-20110828
> >
> > It looks like Android x86 is a popular source, but I am curious to hear
> > about other list members' experience using Android under VirtualBox.  In
> > particular, I read that some examples of Android VMs do not support an
> > Ethernet interface, presumably meaning the VM would have no access to the
> > outside.
> >
> >
> >
> > _______________________________________________
> > Commotion-dev mailing list
> > Commotion-dev at lists.chambana.net
> > http://lists.chambana.net/mailman/listinfo/commotion-dev
> >
>
> _______________________________________________
> Commotion-dev mailing list
> Commotion-dev at lists.chambana.net
> http://lists.chambana.net/mailman/listinfo/commotion-dev
>
"
751,Commotion-dev, Tips on getting Android OS (and Commotion),"Wed, 12 Sep 2012 16:31:52 -0400",-0400,Hans-Christoph Steiner,"
My guess is yes, tho I have not specifically tried.  In terms of
inter-VM communications, olsrd should only need proper TCP/IP, which VMs
are pretty good at these days.

.hc

On 09/12/2012 04:30 PM, Ben West wrote:
> I do see the SDK would effectively replicate the same environment one sees
> under VirtualBox.  However, I am interested in VirtualBox, since I would
> want the Android node to talk to other VirtualBox VMs, e.g. OpenWRT or
> Ubuntu.  The basic goal is to use VirtualBox to (very crudely) simulate
> something like a 3-node mesh.
> 
> So, I would like to use the inter-VM networking features VirtualBox has.
> Does the Android SDK let you define an addressable IP for the virtual
> machine, directly accessible to the host OS?
> 
> On Wed, Sep 12, 2012 at 3:19 PM, Hans-Christoph Steiner <
> hans at guardianproject.info> wrote:
> 
"
752,Commotion-dev, Tips on getting Android OS (and Commotion),"Wed, 12 Sep 2012 16:45:29 -0400",-0400,Will Hawkins,"Hey Ben,

What about this?
http://stackoverflow.com/questions/4044479/comunication-between-android-emulators

The usual disclaimer applies: I've not tried this so it might be
worthless! :-)

Will

On 09/12/2012 04:31 PM, Hans-Christoph Steiner wrote:
> 
> My guess is yes, tho I have not specifically tried.  In terms of
> inter-VM communications, olsrd should only need proper TCP/IP, which VMs
> are pretty good at these days.
> 
> .hc
> 
> On 09/12/2012 04:30 PM, Ben West wrote:
"
753,Commotion-dev, Tips on getting Android OS (and Commotion),"Wed, 12 Sep 2012 16:07:19 -0500",-0500,Ben West,"I'm glad that communication b/w Android emulators might be possible.  My
preference for VirtualBox is due to its ability to have multiple VMs with
different OSs, which I am assuming the Android emulator would not do.
 Still, I can understand that running Android under VB is not preferred
when an emulator already exists.

That said, the degree of functionality I'd need for Android + Commotion App
tentatively under VirtualBox is pretty minimal, since this question is
related to testing rather than development.  I.e. I'd really only need to
boot Android, launch the Commotion App and/or launch a browser.

On Wed, Sep 12, 2012 at 3:45 PM, Will Hawkins <
hawkinsw at opentechinstitute.org> wrote:

> Hey Ben,
>
> What about this?
>
> http://stackoverflow.com/questions/4044479/comunication-between-android-emulators
>
> The usual disclaimer applies: I've not tried this so it might be
> worthless! :-)
>
> Will
>
> On 09/12/2012 04:31 PM, Hans-Christoph Steiner wrote:
> >
> > My guess is yes, tho I have not specifically tried.  In terms of
> > inter-VM communications, olsrd should only need proper TCP/IP, which VMs
> > are pretty good at these days.
> >
> > .hc
> >
> > On 09/12/2012 04:30 PM, Ben West wrote:
> "
754,Commotion-dev, Developer Contract: Commotion Windows Client,"Tue, 18 Sep 2012 10:37:34 -0400",-0400,Andrew Reynolds,"The New America Foundation's Open Technology Institute (OTI) is
accepting proposals to develop a Windows client for the Commotion
Wireless Project. This will be a concept to completion production. The
purpose of this RFP is to provide a fair evaluation for all candidates
and to provide the candidates with the evaluation criteria against which
they will be judged.

Full details are available at
https://commotionwireless.net/jobs/windows-client-rfp

Please submit proposals to oti-tech at opentechinstitute.org no later than
5:00 PM EDT on October 8, 2012.

-andrew

"
755,Commotion-dev, Developer Contract: Commotion Dashboard,"Tue, 18 Sep 2012 10:39:44 -0400",-0400,Andrew Reynolds,"The New America Foundation's Open Technology Institute (OTI) is
accepting proposals to develop a network and service dashboard for the
Commotion Wireless Project. This will be a concept to completion
production. The purpose of this RFP is to provide a fair evaluation for
all candidates and to provide the candidates with the evaluation
criteria against which they will be judged.

Full details are available at
https://commotionwireless.net/jobs/dashboard-rfp

Please submit proposals to oti-tech at opentechinstitute.org no later than
5:00 PM EDT on October 8, 2012.

-andrew

"
756,Commotion-dev, MeshTether,"Wed, 19 Sep 2012 11:09:39 -0400",-0400,Hans-Christoph Steiner,"
Hey Teco,

For the first phase of MeshTether dev, we worked on getting it fully
working working on some devices.  I worked with HTC devices and a
Motorola Droid/Milestone, and those all work every time for me now.  The
next phase of the development will focus on getting it working on as
many devices as possible.

The next step to getting the Wolfgang AT-AS28D working is figuring out
first what the problem is.  You can get a lot of info from the Info tab.
 The easiest way to check whether adhoc got setup correctly is to
compare the ""wifi settings"".  The first block of settings is what the
app is trying to set, the second block is what was read from the wifi
driver.  If they are not the same, that means adhoc setup failed.

Which BSSID field is numeric only?  I can type numbers and letters into
the BSSID field in the Settings just fine on my phone.

.hc

On 09/19/2012 07:13 AM, Teco Boot wrote:
> Hi Hans,
> 
> We struggle with getting new Samsung Galaxy S3/Nexus in wlan ad hoc mode. Maybe Eric de Vries contacted you already, or did you see some postings from him. Maybe we have to conclude these phones do not support ad hoc. What about a Wiki with a whitelist / blacklist of phones that do / do not support ad hoc? Status can be supported, unknown or unsupported.
> 
> I have one of the cheapest android phones here on the market, in the Netherlands. It is a made in China Wolfgang AT-AS28D. I use this phone to check how easy it can be getting ad hoc networks up and running. I tried MeshTether for a moment, it failed.
> 
> Minor: the BSSID field is nummeric only, while I need hex input.
> 
> Major: the phone does not join the IBSS.
> I set up the network, with two Linux boxes close to the phone and one on a distance. I see two nodes beaconing. No probe responses.
> One second trace:
"
757,Commotion-dev, MeshTether,"Wed, 19 Sep 2012 11:25:16 -0400",-0400,Dan Staples,"Hans,

Just FYI, I got the latest build of MeshTether working great on my HTC 
Incredible last week at an OTI hackday.  It's a pretty widely used 
phone, too.  Wanted to let you know in case you hadn't had a chance to 
test on one of those.

cheers,
Dan Staples

On Wed 19 Sep 2012 11:09:39 AM EDT, Hans-Christoph Steiner wrote:
>
> Hey Teco,
>
> For the first phase of MeshTether dev, we worked on getting it fully
> working working on some devices.  I worked with HTC devices and a
> Motorola Droid/Milestone, and those all work every time for me now.  The
> next phase of the development will focus on getting it working on as
> many devices as possible.
>
> The next step to getting the Wolfgang AT-AS28D working is figuring out
> first what the problem is.  You can get a lot of info from the Info tab.
>  The easiest way to check whether adhoc got setup correctly is to
> compare the ""wifi settings"".  The first block of settings is what the
> app is trying to set, the second block is what was read from the wifi
> driver.  If they are not the same, that means adhoc setup failed.
>
> Which BSSID field is numeric only?  I can type numbers and letters into
> the BSSID field in the Settings just fine on my phone.
>
> .hc
>
> On 09/19/2012 07:13 AM, Teco Boot wrote:
"
758,Commotion-dev, MeshTether,"Wed, 19 Sep 2012 11:30:21 -0400",-0400,Hans-Christoph Steiner,"
Thanks for the report!  Was it pretty straightforward or did you have to
do any tricks?

.hc

On 09/19/2012 11:25 AM, Dan Staples wrote:
> Hans,
> 
> Just FYI, I got the latest build of MeshTether working great on my HTC 
> Incredible last week at an OTI hackday.  It's a pretty widely used 
> phone, too.  Wanted to let you know in case you hadn't had a chance to 
> test on one of those.
> 
> cheers,
> Dan Staples
> 
> On Wed 19 Sep 2012 11:09:39 AM EDT, Hans-Christoph Steiner wrote:
"
759,Commotion-dev, Fwd: MeshTether,"Wed, 19 Sep 2012 17:39:00 +0200",+0200,Teco Boot," - now on list -

Op 19 sep. 2012, om 17:09 heeft Hans-Christoph Steiner het volgende geschreven:

> 
> Hey Teco,
> 
> For the first phase of MeshTether dev, we worked on getting it fully
> working working on some devices.  I worked with HTC devices and a
> Motorola Droid/Milestone, and those all work every time for me now.  The
> next phase of the development will focus on getting it working on as
> many devices as possible.
Did you test with 4.x?
It seems harder on newer stuff.

> The next step to getting the Wolfgang AT-AS28D working is figuring out
> first what the problem is.  You can get a lot of info from the Info tab.
> The easiest way to check whether adhoc got setup correctly is to
> compare the ""wifi settings"".  The first block of settings is what the
> app is trying to set,
This looks fine.
""ahr""
(my BSSID)
(my IP address)
(my subnet)

(my DNS, 8.8.8.8)
(olsrd.conf path)


> the second block is what was read from the wifi
> driver.  
Then, the wifi info:
SSID: null
BSSID: null
ip: 0.0.0.0
MAC: (ok)
speed 0 Mbps
RSSI: -200dBm
(last two for last node? entries for all neighbors?)

> If they are not the same, that means adhoc setup failed.
Or joining the network failed. It sends beacons with something that looks OK. Maybe if stayed down, because there is no peer station.
I'll test more, with focus on the beacon and probe messages. It looks like wrong formatted and ignored by my other nodes. 

Can I assume you tested with phones and OpenWRT boxes?

> 
> Which BSSID field is numeric only?  I can type numbers and letters into
> the BSSID field in the Settings just fine on my phone.
I used cut&paste.
I have a numeric keyboard, with greyed alfa (ABC on 2, DEF on 3, etc).
I can use some special characters, for dailing.

Teco



"
760,Commotion-dev, MeshTether,"Wed, 19 Sep 2012 11:53:28 -0400",-0400,Hans-Christoph Steiner,"

On 09/19/2012 11:33 AM, Teco Boot wrote:
> 
> Op 19 sep. 2012, om 17:09 heeft Hans-Christoph Steiner het volgende geschreven:
> 
"
761,Commotion-dev, MeshTether - BSSID field nummeric,"Wed, 19 Sep 2012 19:07:13 +0200",+0200,Teco Boot,"I splitted the threat.

Op 19 sep. 2012, om 17:53 heeft Hans-Christoph Steiner het volgende geschreven:
> 
"
762,Commotion-dev, MeshTether - BSSID field nummeric,"Wed, 19 Sep 2012 18:56:50 -0400",-0400,Hans-Christoph Steiner,"

On 09/19/2012 01:07 PM, Teco Boot wrote:
> I splitted the threat.
> 
> Op 19 sep. 2012, om 17:53 heeft Hans-Christoph Steiner het volgende geschreven:
"
763,Commotion-dev, Monitor-mode enabled on bcm4330 bcm4329 chips,"Thu, 20 Sep 2012 15:20:30 +0200",+0200,Paul Fuxjaeger,"maybe that's interesting for you folks too:

http://bcmon.blogspot.co.il/2012/09/working-monitor-mode-on-nexus-one.html

It's not an elegant hack yet (breaks normal operation mode, turns off 
all filters, therefore power-consumption increases). But we consider 
this an important milestone towards much appreciated flexibility to 
experiment: extract cross-layer info, implement adhocdemo mode, ...

AFAIK around 80-90% of all smartphones and tablets sold in the last 
three years use this one.


cheers
paul

"
764,Commotion-dev, Monitor-mode enabled on bcm4330 bcm4329 chips,"Thu, 20 Sep 2012 11:05:29 -0400",-0400,Hans-Christoph Steiner,"
Its definitely interesting!  It'll be great to have monitor mode on lots
of Android devices!  As for adhoc mode, that chipset already works fine,
I used the Nexus One as my main development phone for MeshTether.

.hc

On 09/20/2012 09:20 AM, Paul Fuxjaeger wrote:
> maybe that's interesting for you folks too:
> 
> http://bcmon.blogspot.co.il/2012/09/working-monitor-mode-on-nexus-one.html
> 
> It's not an elegant hack yet (breaks normal operation mode, turns off
> all filters, therefore power-consumption increases). But we consider
> this an important milestone towards much appreciated flexibility to
> experiment: extract cross-layer info, implement adhocdemo mode, ...
> 
> AFAIK around 80-90% of all smartphones and tablets sold in the last
> three years use this one.
> 
> 
> cheers
> paul
> 
> _______________________________________________
> Commotion-dev mailing list
> Commotion-dev at lists.chambana.net
> http://lists.chambana.net/mailman/listinfo/commotion-dev
> 

"
765,Commotion-dev, MeshTether test feedback and debugging for,"Thu, 20 Sep 2012 12:33:46 -0400",-0400,Hans-Christoph Steiner,"
Hey Martin,

Thanks for this thorough test report!  I'm cc'ing commotion-dev since
that's the MeshTether dev list.

On 08/25/2012 03:26 PM, Martin Asmus wrote:
> Hi Hans, hi Aaron,
> 
> Here are my testing results:
> GT-I9000:
> Wpa_suppplicant-method: reinit, wifi fail afterwards, works again after
> ""real"" reboot.
> With ""skip wpa-sup.""-option: At the first glance, there?s no difference
> between the standard script and the Samsung-custom script. It seems to
> startup fine, but there comes no bssid-config to the GUI. I haven?t checked
> for now, if there is any configuration done in the system besides the
> startup of olsrd, neither if there?s any difference between the effects of
> the two scripts.
> I can take a look at the syslog if needed. I have enclosed the exportable
> logs from your App.

This sounds like my experience on Samsung devices as well.  I think
it'll take some digging to iron that process out.

> TF-101:
> Seems to startup fine with wpa-sup-mode, as well as direct-mode, but when I
> want to check the App-config, it tells that olsrd isn?t running...
> Therefore I can?t export any logs from within your app, but I can export the
> device?s syslog, if you need it.
> Tried no custom scripts so far.

This is odd, so you are seeing something like the first screen here,
where the BSSID and IP are set successfully in the ""wifi info"" section:
https://code.commotionwireless.net/projects/commotion/wiki/Android_Troubleshooting

You should be able to get the olsrd.log, which should tell you why olsrd
didn't start up.

> Both my devices are rooted, but with stock-ROMs. The only present
> wifi-driver structure, I can find on my devices is bcm4329.
> I think there are also different setups between some build-batches. At least
> for the transformer, I know that there was a change somewhere at build 90
> (mine is a build 50).
> Let me know if there are any patches/updates/new versions, or if any
> testing/debugging is tbd.

I was using a Nexus One with a stock firmware as my main testing device,
so stock should be OK.  But stock varies depending on the vendor.  I
think the Nexus One has a bcm4329 also.

.hc

"
766,Commotion-dev, User feedback repository,"Thu, 20 Sep 2012 15:21:42 -0400",-0400,Dan Staples,"Hi all,

As we start doing more thorough usability testing for the Commotion
clients, it will be important to collect user feedback in a central
repository for developers to review.  What would be a good place to keep
this information?

Some possibilities include the wiki on the new (public)
commotionwireless.net site, an internal wiki or redmine (just for
developers), or ...?  Please send any ideas you have for how to best
organize this!

-- 
Dan Staples
Program Associate, Open Technology Institute
New America Foundation

"
767,Commotion-dev, User feedback repository,"Thu, 20 Sep 2012 16:17:14 -0400",-0400,Hans-Christoph Steiner,"
I like wikis for this kind of thing.  If we just set up a clear place
for them, and a simple template for people to put their info in, I think
they work well.

.hc

On 09/20/2012 03:21 PM, Dan Staples wrote:
> Hi all,
> 
> As we start doing more thorough usability testing for the Commotion
> clients, it will be important to collect user feedback in a central
> repository for developers to review.  What would be a good place to keep
> this information?
> 
> Some possibilities include the wiki on the new (public)
> commotionwireless.net site, an internal wiki or redmine (just for
> developers), or ...?  Please send any ideas you have for how to best
> organize this!
> 

"
768,Commotion-dev, Monitor-mode enabled on bcm4330 bcm4329 chips,"Fri, 21 Sep 2012 08:18:13 +0200",+0200,Teco Boot,"
Op 20 sep. 2012, om 17:05 heeft Hans-Christoph Steiner het volgende geschreven:

> 
> Its definitely interesting!  It'll be great to have monitor mode on lots
> of Android devices!  As for adhoc mode, that chipset already works fine,

adhoc mode != AHDEMO.
I used AHDEMO with madwifi, but I had to switch to IBSS when I switched to ath5k. For a mesh/manet, AHDEMO can have less problems because there are no 802.11 management frames. But it only works when wlan stack does support it, and needs configured BSSID and channel.
I think AHDEMO drains the battery less fast as WiFi-Direct or IBSS, depending on the MANET protocol and timers. But no power saving mode.

Teco

> I used the Nexus One as my main development phone for MeshTether.
> 
> .hc
> 
> On 09/20/2012 09:20 AM, Paul Fuxjaeger wrote:
"
769,Commotion-dev, Monitor-mode enabled on bcm4330 bcm4329 chips,"Fri, 21 Sep 2012 11:46:07 -0400",-0400,Hans of Guardian,"
To use AHDEMO mode, wouldn't every single device on the mesh have to use it?  Could you have some using IBSS and others using AHDEMO at the same time?  AHDEMO sounds great, but such limitations of compatibility limit its usefulness to our goals for MeshTether, which is people easily setting up their own impromptu meshes.  AHDEMO mode sounds great for a backhaul mesh, but the Commotion project uses OpenWRT for that.

If you wanted to add AHDEMO support to MeshTether, I think we could incorporate it into the app.

.hc

On Sep 21, 2012, at 2:18 AM, Teco Boot wrote:
> 
> adhoc mode != AHDEMO.
> I used AHDEMO with madwifi, but I had to switch to IBSS when I switched to ath5k. For a mesh/manet, AHDEMO can have less problems because there are no 802.11 management frames. But it only works when wlan stack does support it, and needs configured BSSID and channel.
> I think AHDEMO drains the battery less fast as WiFi-Direct or IBSS, depending on the MANET protocol and timers. But no power saving mode.
> 
> Teco
> 
> Op 20 sep. 2012, om 17:05 heeft Hans-Christoph Steiner het volgende geschreven:
> 
"
770,Commotion-dev, Monitor-mode enabled on bcm4330 bcm4329 chips,"Fri, 21 Sep 2012 14:54:57 -0400",-0400,Josh King,"ahdemo has some other problems, in that it doesn't play well with 
traditional wifi. Given that it lacks beacons and other management 
frames, it can't operate in contention with other wifi networks, and 
two or more operating on the same channel will cause one to lose out. 
That said, it is very handy for some other purposes, not least traffic 
obfuscation, since it won't appear to a standard wifi client scanning 
for APs.

Although it can't be the default, due to its many shortcomings, ahdemo 
support would be a welcome contribution ;-)

On Fri 21 Sep 2012 11:46:07 AM EDT, Hans of Guardian wrote:
>
> To use AHDEMO mode, wouldn't every single device on the mesh have to use it?  Could you have some using IBSS and others using AHDEMO at the same time?  AHDEMO sounds great, but such limitations of compatibility limit its usefulness to our goals for MeshTether, which is people easily setting up their own impromptu meshes.  AHDEMO mode sounds great for a backhaul mesh, but the Commotion project uses OpenWRT for that.
>
> If you wanted to add AHDEMO support to MeshTether, I think we could incorporate it into the app.
>
> .hc
>
> On Sep 21, 2012, at 2:18 AM, Teco Boot wrote:
"
771,Commotion-dev, Monitor-mode enabled on bcm4330 bcm4329 chips,"Fri, 21 Sep 2012 15:58:10 -0400",-0400,Hans of Guardian,"
Good point.  In terms of ""can't work in contention"", it should be able to work on some level with contention, no?  If an AHDEMO packet collides with a packet from some other wifi, shouldn't it retry?  For sure, it'll perform poorly, but it should work somewhat unless there is heavy contention.

.hc

On Sep 21, 2012, at 2:54 PM, Josh King wrote:

> ahdemo has some other problems, in that it doesn't play well with 
> traditional wifi. Given that it lacks beacons and other management 
> frames, it can't operate in contention with other wifi networks, and 
> two or more operating on the same channel will cause one to lose out. 
> That said, it is very handy for some other purposes, not least traffic 
> obfuscation, since it won't appear to a standard wifi client scanning 
> for APs.
> 
> Although it can't be the default, due to its many shortcomings, ahdemo 
> support would be a welcome contribution ;-)
> 
> On Fri 21 Sep 2012 11:46:07 AM EDT, Hans of Guardian wrote:
"
772,Commotion-dev, Monitor-mode enabled on bcm4330 bcm4329 chips,"Sat, 22 Sep 2012 09:04:45 +0200",+0200,Teco Boot,"I don't understand the suggested problems. Media access of bss, ibss and ahdemo do not differ.

The purpose of ahdemo is some form of undercover (no management frames) and less problems with self forming self healing. Requirement is manual config of channel and bssid on all nodes. 
There could be some compatibility between ibss and ahdemo, but that comes with problems where I want to stay away from.

Teco

Op 21 sep. 2012 om 21:58 heeft Hans of Guardian <hans at guardianproject.info> het volgende geschreven:

> 
> Good point.  In terms of ""can't work in contention"", it should be able to work on some level with contention, no?  If an AHDEMO packet collides with a packet from some other wifi, shouldn't it retry?  For sure, it'll perform poorly, but it should work somewhat unless there is heavy contention.
> 
> .hc
> 
> On Sep 21, 2012, at 2:54 PM, Josh King wrote:
> 
"
773,Commotion-dev, Monitor-mode enabled on bcm4330 bcm4329 chips,"Sat, 22 Sep 2012 09:04:45 +0200",+0200,Teco Boot,"I don't understand the suggested problems. Media access of bss, ibss and ahdemo do not differ.

The purpose of ahdemo is some form of undercover (no management frames) and less problems with self forming self healing. Requirement is manual config of channel and bssid on all nodes. 
There could be some compatibility between ibss and ahdemo, but that comes with problems where I want to stay away from.

Teco

Op 21 sep. 2012 om 21:58 heeft Hans of Guardian <hans at guardianproject.info> het volgende geschreven:

> 
> Good point.  In terms of ""can't work in contention"", it should be able to work on some level with contention, no?  If an AHDEMO packet collides with a packet from some other wifi, shouldn't it retry?  For sure, it'll perform poorly, but it should work somewhat unless there is heavy contention.
> 
> .hc
> 
> On Sep 21, 2012, at 2:54 PM, Josh King wrote:
> 
"
774,Commotion-dev, Monitor-mode enabled on bcm4330 bcm4329 chips,"Sat, 22 Sep 2012 09:04:45 +0200",+0200,Teco Boot,"I don't understand the suggested problems. Media access of bss, ibss and ahdemo do not differ.

The purpose of ahdemo is some form of undercover (no management frames) and less problems with self forming self healing. Requirement is manual config of channel and bssid on all nodes. 
There could be some compatibility between ibss and ahdemo, but that comes with problems where I want to stay away from.

Teco

Op 21 sep. 2012 om 21:58 heeft Hans of Guardian <hans at guardianproject.info> het volgende geschreven:

> 
> Good point.  In terms of ""can't work in contention"", it should be able to work on some level with contention, no?  If an AHDEMO packet collides with a packet from some other wifi, shouldn't it retry?  For sure, it'll perform poorly, but it should work somewhat unless there is heavy contention.
> 
> .hc
> 
> On Sep 21, 2012, at 2:54 PM, Josh King wrote:
> 
"
775,Commotion-dev, Commotion Android UI Testing,"Wed, 26 Sep 2012 16:00:59 -0400",-0400,Andrew Reynolds,"Hi all,

We're beginning some user testing of the Commotion Android client in
preparation for a round of UI refinement.

I've thrown a draft script of the test procedures up on the wiki, as
well as a short user survey to help categorize users by level of expertise.

The script assumes Commotion will be preinstalled and will connect to an
existing Commotion network. The user will perform a few tasks using the
network (a Cryptocat chat in this case, though other apps would be fine)
and talk about their experience.

The survey focuses solely on Android expertise, but it's designed to be
modular, so it could easily be augmented with questions about networking
expertise or specific usage patterns.

The script is here:
https://code.commotionwireless.net/projects/commotion/wiki/Commotion-Android_v1_Script
and it links to the survey, which is here:
https://code.commotionwireless.net/projects/commotion/wiki/Android_user_expertise_survey

Feedback is welcome.

-andrew

"
776,Commotion-dev, Commotion Android UI Testing,"Wed, 26 Sep 2012 17:06:43 -0400",-0400,Dan Staples,"Here is some feedback/questions:

  * The testing procedures mention starting Commotion then starting a
    Cryptocat chat.  Will they be asked to poke around the MeshTether
    app first?  If not, the test seems more designed to test whether the
    user understands a mesh network rather than testing the UX of the app.
  * Is the app going to be called Commotion or MeshTether?
  * What will be included when you tell users what Commotion is about? 
    Will they be told what 'mesh', 'node', 'gateway', 'network
    topology', and the like mean?  Some of the questions rely on a user
    knowing these terms.
  * Some other possible questions:
      o Did the app seem overwhelming?  Was there too much information
        presented at once?
      o Did you feel lost at any point when using the app?
      o Maybe ask them to rate on a scale of 1-5 how user-friendly they
        thought the app was.

For the survey, I would suggest asking:

  * how frequently, if ever, the user uses wifi networks with their
    Android phone.
  * how long have they owned or used an Android phone?


Dan

On Wed 26 Sep 2012 04:00:59 PM EDT, Andrew Reynolds wrote:
>
> Hi all,
>
> We're beginning some user testing of the Commotion Android client in
> preparation for a round of UI refinement.
>
> I've thrown a draft script of the test procedures up on the wiki, as
> well as a short user survey to help categorize users by level of
> expertise.
>
> The script assumes Commotion will be preinstalled and will connect to an
> existing Commotion network. The user will perform a few tasks using the
> network (a Cryptocat chat in this case, though other apps would be fine)
> and talk about their experience.
>
> The survey focuses solely on Android expertise, but it's designed to be
> modular, so it could easily be augmented with questions about networking
> expertise or specific usage patterns.
>
> The script is here:
> https://code.commotionwireless.net/projects/commotion/wiki/Commotion-Android_v1_Script
> and it links to the survey, which is here:
> https://code.commotionwireless.net/projects/commotion/wiki/Android_user_expertise_survey
>
> Feedback is welcome.
>
> -andrew
>
>
>
> _______________________________________________
> Commotion-dev mailing list
> Commotion-dev at lists.chambana.net
> http://lists.chambana.net/mailman/listinfo/commotion-dev
> -- 
> Dan Staples
> Program Associate, Open Technology Institute
> New America Foundation
"
777,Commotion-dev, Commotion Android UI Testing,"Wed, 26 Sep 2012 17:42:01 -0400",-0400,Andrew Reynolds,"On 09/26/2012 05:06 PM, Dan Staples wrote:
> Here is some feedback/questions:
> 
>   * The testing procedures mention starting Commotion then starting a
>     Cryptocat chat.  Will they be asked to poke around the MeshTether
>     app first?  If not, the test seems more designed to test whether the
>     user understands a mesh network rather than testing the UX of the app.

Yeah, I've been struggling with that question. The problem is that to a
lot of people, the network is just a utility. Without a specific
interest in network diagnostics, I suspect most folks would turn it on,
say ""Yep! It's meshing!"" and leave it at that.

The use case I went with when I wrote the question was a person who
would connect to the commotion mesh and leave it running mostly in the
background. I want them to be able to ignore it when they want to, but
still be able to find useful information when they need it.

I'm open to alternate tasks.

>   * Is the app going to be called Commotion or MeshTether?

There was a thread about that a while back. For what it's worth, I
always look for it under Commotion, not MeshTether.

>   * What will be included when you tell users what Commotion is about? 
>     Will they be told what 'mesh', 'node', 'gateway', 'network
>     topology', and the like mean?  Some of the questions rely on a user
>     knowing these terms.

Good point. I had figured on fleshing it out a bit before the Summit,
but I think the presenter could vary the details depending on the user.

>   * Some other possible questions:
>       o Did the app seem overwhelming?  Was there too much information
>         presented at once?
>       o Did you feel lost at any point when using the app?
>       o Maybe ask them to rate on a scale of 1-5 how user-friendly they
>         thought the app was.

The first question seems too broad to stand on its own. It's probably
more useful in the context of the second question.

I think user-friendliness on a scale of 1-5 is pretty ambiguous.

> For the survey, I would suggest asking:
> 
>   * how frequently, if ever, the user uses wifi networks with their
>     Android phone.
>   * how long have they owned or used an Android phone?

Oh, good call.

-andrew



"
778,Commotion-dev, Commotion Android UI Testing,"Thu, 27 Sep 2012 09:56:05 -0400",-0400,David Oliver,"Andrew, thanks for putting this together.

Dan's comments are good.  For me, personally, it's hard to understand how
much we want to, or need to, ""make of"" the mesh network.  Sometime down the
road, we hope it will be ""invisible"" like WiFi, but for not it's key that
we develop and understanding of how it actually works on mobile devices,
and if users are able to understand its basic properties and failure modes.
 Therefore, in the current testing, the network IS prominent.  Perhaps your
start--up guide will need to say this.

Dave


David M. Oliver | david at olivercoady.com | http://olivercoady.com |
http://dmo.tel | @davidmoliver | +1 970 368 2366


On Thu, Sep 27, 2012 at 8:00 AM,
<commotion-dev-request at lists.chambana.net>wrote:

> Send Commotion-dev mailing list submissions to
>         commotion-dev at lists.chambana.net
>
> To subscribe or unsubscribe via the World Wide Web, visit
>         http://lists.chambana.net/mailman/listinfo/commotion-dev
> or, via email, send a message with subject or body 'help' to
>         commotion-dev-request at lists.chambana.net
>
> You can reach the person managing the list at
>         commotion-dev-owner at lists.chambana.net
>
> When replying, please edit your Subject line so it is more specific
> than ""Re: Contents of Commotion-dev digest...""
>
>
> Today's Topics:
>
>    1. Commotion Android UI Testing (Andrew Reynolds)
>    2. Re: Commotion Android UI Testing (Dan Staples)
>    3. Re: Commotion Android UI Testing (Andrew Reynolds)
>
>
> "
779,Commotion-dev, Commotion Android UI Testing,"Thu, 27 Sep 2012 12:34:45 -0400",-0400,Hans-Christoph Steiner,"
Overall, I think it looks good, and I'm excited to hear about the
results.  To follow up on Dave's comments, I think it would be good to
add more tests to it, something along the lines of:

* can the user just start meshtether, and click the ""go"" button, and
start using the mesh?
* how confusing is the long startup time? (I guess I assume its a bit
confusing and could be better represented).
* how can the user determine if the mesh is not working?
* what kind of things do they try to do if the mesh isn't working?
* how does the user try troubleshooting?

.hc

On 09/27/2012 09:56 AM, David Oliver wrote:
> Andrew, thanks for putting this together.
> 
> Dan's comments are good.  For me, personally, it's hard to understand how
> much we want to, or need to, ""make of"" the mesh network.  Sometime down the
> road, we hope it will be ""invisible"" like WiFi, but for not it's key that
> we develop and understanding of how it actually works on mobile devices,
> and if users are able to understand its basic properties and failure modes.
>  Therefore, in the current testing, the network IS prominent.  Perhaps your
> start--up guide will need to say this.
> 
> Dave
> 
> 
> David M. Oliver | david at olivercoady.com | http://olivercoady.com |
> http://dmo.tel | @davidmoliver | +1 970 368 2366
> 
> 
> On Thu, Sep 27, 2012 at 8:00 AM,
> <commotion-dev-request at lists.chambana.net>wrote:
> 
"
780,Commotion-dev, Commotion Android UI Testing,"Thu, 27 Sep 2012 13:22:44 -0400",-0400,Andrew Reynolds,"On 09/27/2012 12:34 PM, Hans-Christoph Steiner wrote:
> 
> Overall, I think it looks good, and I'm excited to hear about the
> results.  To follow up on Dave's comments, I think it would be good to
> add more tests to it, something along the lines of:
> 
> * can the user just start meshtether, and click the ""go"" button, and
> start using the mesh?
> * how confusing is the long startup time? (I guess I assume its a bit
> confusing and could be better represented).

Sure. I see these as an extension of the mesh startup task. It's exactly
the kind of thing I was thinking of when I mentioned having the user
think out loud, but definitely worth adding to the list of questions if
only to confirm.

> * how can the user determine if the mesh is not working?
> * what kind of things do they try to do if the mesh isn't working?
> * how does the user try troubleshooting?

Any thoughts on how to do this in a scripted environment without making
the procedure too cumbersome?

Maybe stocking two phones, one working and one slightly misconfigured?

-andrew


"
781,Commotion-dev, Commotion Android UI Testing,"Thu, 27 Sep 2012 13:28:50 -0400",-0400,Hans-Christoph Steiner,"

On 09/27/2012 01:22 PM, Andrew Reynolds wrote:
> On 09/27/2012 12:34 PM, Hans-Christoph Steiner wrote:
"
782,Commotion-dev, Commotion Android UI Testing,"Thu, 27 Sep 2012 13:35:10 -0400",-0400,Andrew Reynolds,"On 09/27/2012 01:28 PM, Hans-Christoph Steiner wrote:
> On 09/27/2012 01:22 PM, Andrew Reynolds wrote:
"
783,Commotion-dev, Commotion Android UI Testing,"Thu, 27 Sep 2012 14:26:11 -0400",-0400,Andrew Reynolds,"Probably so. And the more I thought on Dan's comments the more I
realized that we really weren't gathering any information on our app.

I will keep gathering input and revising over the next few days. These
suggestions have been very helpful.

-andrew


On 09/27/2012 09:56 AM, David Oliver wrote:
> Andrew, thanks for putting this together.
> 
> Dan's comments are good.  For me, personally, it's hard to understand how
> much we want to, or need to, ""make of"" the mesh network.  Sometime down the
> road, we hope it will be ""invisible"" like WiFi, but for not it's key that
> we develop and understanding of how it actually works on mobile devices,
> and if users are able to understand its basic properties and failure modes.
>  Therefore, in the current testing, the network IS prominent.  Perhaps your
> start--up guide will need to say this.
> 
> Dave
> 
> 
> David M. Oliver | david at olivercoady.com | http://olivercoady.com |
> http://dmo.tel | @davidmoliver | +1 970 368 2366
> 
> 
> On Thu, Sep 27, 2012 at 8:00 AM,
> <commotion-dev-request at lists.chambana.net>wrote:
> 
"
784,Commotion-dev, Commotion Android UI Testing,"Thu, 27 Sep 2012 14:48:47 -0400",-0400,Hans-Christoph Steiner,"

On 09/27/2012 01:35 PM, Andrew Reynolds wrote:
> On 09/27/2012 01:28 PM, Hans-Christoph Steiner wrote:
"
785,Commotion-dev, Commotion Android UI Testing,"Thu, 27 Sep 2012 15:01:43 -0400",-0400,Dan Staples,"You could build a DIY Faraday cage to simulate spotty coverage! :)

http://www.jeddaniels.com/2007/faraday-cage-part-1/

Dan

On 09/27/2012 01:35 PM, Andrew Reynolds wrote:
> On 09/27/2012 01:28 PM, Hans-Christoph Steiner wrote:
"
786,Commotion-dev," ""My Account"" page on Commotion Redmine","Wed, 3 Oct 2012 06:42:36 -0500",-0500,Ben West,"Howdy,

Thanks first off for getting the Commotion git repos back online!

However, it looks like the gitauth / gitosis integration with Redmine may
still be awry.  This page (after logging in) throws a 500 error:
https://code.commotionwireless.net/my/account

I'm hoping to get another public RSA key added to my account.  Is there
perhaps an alternate way to do this, outside the web UI?

-- 
Ben West
me at benwest.name
"
787,Commotion-dev," ""My Account"" page on Commotion Redmine","Wed, 03 Oct 2012 10:58:15 -0400",-0400,Jordan McCarthy,
788,Commotion-dev," ""My Account"" page on Commotion Redmine","Thu, 4 Oct 2012 12:43:46 +0200",+0200,Ben West,"Hi Jordan,

I found this repo on github, which looks to be automatically syndicated
with the repo at code.commotionwireless.net .  Will this be the new home
for Commotion code?

https://github.com/opentechinstitute/commotion-openwrt

On Wed, Oct 3, 2012 at 4:58 PM, Jordan McCarthy <
mccarthy at opentechinstitute.org> wrote:

> "
789,Commotion-dev," ""My Account"" page on Commotion Redmine","Thu, 04 Oct 2012 10:18:29 -0400",-0400,Jordan McCarthy,
790,Commotion-dev, security hardening for olsrd: new Debian/Ubuntu,"Thu, 04 Oct 2012 10:34:08 -0400",-0400,Hans-Christoph Steiner,"
I've been working to get olsrd to pass the Debian 'hardening-check' and
incorporate all of the changes into the official Debian package.  I have
a test version that is working for me.  Now I'd love for others to test it.

There are two way to get the packages, the Guardian Project Commotion PPA:

  sudo add-apt-repository ppa:guardianproject/commotion
or
  https://launchpad.net/~guardianproject/+archive/ppa

And the Debian experimental package:

  http://packages.debian.org/experimental/olsrd

Since olsrd runs as root, its important that it is secure and hard to
exploit.  This is especially important as people install olsrd on
their own laptops and Android phones, where all sorts of sensitive data
is stored.

.hc
"
791,Commotion-dev, security hardening for olsrd: new Debian/Ubuntu,"Fri, 05 Oct 2012 12:25:10 -0400",-0400,Dan Staples,"I would be glad to help test this.  Is there any particular testing 
feedback that would be helpful for you?

Dan

On Thu 04 Oct 2012 10:34:08 AM EDT, Hans-Christoph Steiner wrote:
>
> I've been working to get olsrd to pass the Debian 'hardening-check' and
> incorporate all of the changes into the official Debian package.  I have
> a test version that is working for me.  Now I'd love for others to test it.
>
> There are two way to get the packages, the Guardian Project Commotion PPA:
>
>   sudo add-apt-repository ppa:guardianproject/commotion
> or
>   https://launchpad.net/~guardianproject/+archive/ppa
>
> And the Debian experimental package:
>
>   http://packages.debian.org/experimental/olsrd
>
> Since olsrd runs as root, its important that it is secure and hard to
> exploit.  This is especially important as people install olsrd on
> their own laptops and Android phones, where all sorts of sensitive data
> is stored.
>
> .hc
> _______________________________________________
> Commotion-dev mailing list
> Commotion-dev at lists.chambana.net
> http://lists.chambana.net/mailman/listinfo/commotion-dev

--
Dan Staples
Program Associate, Open Technology Institute
New America Foundation
"
792,Commotion-dev, security hardening for olsrd: new Debian/Ubuntu,"Fri, 05 Oct 2012 15:08:01 -0400",-0400,Hans-Christoph Steiner,"
The first thing is just to make sure it works properly with any
configurations that you normally use.  Then, depending on any other
skills you might have, it would be awesome if someone tried to break it
and let us know what the exploits are. :-D

.hc

On 10/05/2012 12:25 PM, Dan Staples wrote:
> I would be glad to help test this.  Is there any particular testing 
> feedback that would be helpful for you?
> 
> Dan
> 
> On Thu 04 Oct 2012 10:34:08 AM EDT, Hans-Christoph Steiner wrote:
"
793,Commotion-dev, Configurate Point-to-Point Link in Commotion,"Fri, 5 Oct 2012 11:36:49 -0500",-0500,Esteban Municio,"Hi list!

I Would know how can I configurate a Point-to-Point link between two
nodes Ubnt Rocket that are connected to two diferents mesh networks.
The mesh networks are formed with Nanostation M5 nodes, and I would
like to merge both networks using the rocket stations(with directive
antennas)

I have tried to use the Ap interfaces and I tried to create new mesh
interfaces too, but I can't get anything.
Any help?Which would be the steps to follow?

Thanks you very much
-- 
Esteban
"
794,Commotion-dev, Use case: how to configure gateway nodes for static,"Sun, 7 Oct 2012 12:09:54 +0200",+0200,Ben West,"Hi All,

A very clear use case which has come up during the current IS4CWM
conference here in Barcelona is the ability to assign static IPs to the wan
interface on Commotion gateway nodes.  DHCP unfortunately is not always
offered at some venues (perhaps especially university conferences), and
manually marking up the /etc/config/* files on the nodes here in Barcelona
to accommodate has been pretty tiresome.

Please respond to this thread if you have ideas to contribute, so that this
can be filed as a feature at code.commotionwireless.net

-- 
Ben West
me at benwest.name
"
795,Commotion-dev, Commotion Android build/install/testing,"Wed, 10 Oct 2012 13:54:46 -0400",-0400,Doug Reith,"Hello Commotion,

I was experimenting with building and installing the Commotion Android
application from the instructions in the
readme<https://code.commotionwireless.net/projects/commotion-android/repository/revisions/master/entry/README>.
I hit a few obstacles and had a few questions:

1. Initially the make build for the Android app was failing. I eventually
realized that the Makefile conditionally assigns 9 as the Android SDK
platform in line 11: SDK_PLATFORM_LEVEL ?= 9. From what I read 9 is
obsolete. The build ran sucessfully with platform level 16. Which SDK API
Level should I be using?

2. I had to explore quite a bit of the Android Developers documentation to
fill in the gaps of the Readme instructions. Including setting up device
detecting on Ubuntu<http://developer.android.com/tools/device.html#setting-up>.
Are there other Commotion Android resources (besides the readme) that
provide instructions on testing or troubleshooting?

3. After installing the app on two HTC mobile devices, we tested them and
they are either crashing or not fully functional. What is the best way for
me to debug this? Should I run the app with adb logcat and share my
findings on this commotion-dev? Is the commotion-android listserv not in
use?

*Douglas G Reith*
Developer
313.437.1244 (office)
theworkdept.com
"
796,Commotion-dev, Commotion Android build/install/testing,"Wed, 10 Oct 2012 14:36:49 -0400",-0400,Hans of Guardian,"
On Oct 10, 2012, at 1:54 PM, Doug Reith wrote:

> Hello Commotion,
> 
> I was experimenting with building and installing the Commotion Android application from the instructions in the readme. I hit a few obstacles and had a few questions:
> 
> 1. Initially the make build for the Android app was failing. I eventually realized that the Makefile conditionally assigns 9 as the Android SDK platform in line 11: SDK_PLATFORM_LEVEL ?= 9. From what I read 9 is obsolete. The build ran sucessfully with platform level 16. Which SDK API Level should I be using? 

Either should be fine.  Originally Android build systems seemed to work best if you put the oldest supported version in that field.  Now they seemed to have changed their minds and say you should put the newest supported version.  If you want to compiled for android-9, you just have to install the android-9 stuff in the android updater.

> 2. I had to explore quite a bit of the Android Developers documentation to fill in the gaps of the Readme instructions. Including setting up device detecting on Ubuntu. Are there other Commotion Android resources (besides the readme) that provide instructions on testing or troubleshooting?

The README assumes that you have a fully working Android development setup.  Otherwise we'd have to maintain a duplicate set of instructions as Google's.

> 3. After installing the app on two HTC mobile devices, we tested them and they are either crashing or not fully functional. What is the best way for me to debug this? Should I run the app with adb logcat and share my findings on this commotion-dev? Is the commotion-android listserv not in use? 

Post here on commotion-dev.  I'm the main author of the Commotion MeshTether, and that's the first I've heard of the commotion-android list :)

The crashes should give you a stacktrace in logcat, that's a good place to start.  Post anything here that you want to discuss.

Right now the known working devices are HTC running Android 2.x some random others.  It works on my Motorola Droid running CyanogenMod, and I can sometimes get it working on my Samsung Galaxy Player 5.0 running 2.3.3.  Will is currently working on 4.x support.

.hc
"
797,Commotion-dev, Commotion Android build/install/testing,"Wed, 10 Oct 2012 14:58:39 -0400",-0400,Will Hawkins,"Hello Doug!

Thanks for your email.

On 10/10/2012 01:54 PM, Doug Reith wrote:
> Hello Commotion,
> 
> I was experimenting with building and installing the Commotion Android
> application from the instructions in the readme
> <https://code.commotionwireless.net/projects/commotion-android/repository/revisions/master/entry/README>.
> I hit a few obstacles and had a few questions:
> 
> 1. Initially the make build for the Android app was failing. I
> eventually realized that the Makefile conditionally assigns 9 as the
> Android SDK platform in line 11: SDK_PLATFORM_LEVEL ?= 9. From what I
> read 9 is obsolete. The build ran sucessfully with platform level 16.
> Which SDK API Level should I be using? 

Yes, level 9 is obsolete. We stuck with that one initially since it is
compatible some of the older phones running older releases of the
Android OS that we are targeting. As long as you are building with an
SDK/NDK that is compatible with the platform on which you are going to
deploy then you'll be fine! You can override the SDK_PLATFORM_LEVEL from
the command line by adding SDK_PLATFORM_LEVEL=16, for example, to any of
the make commands from the README. It's a shortcut for having to edit
the Makefile. The same trick applies for overriding the
NDK_PLATFORM_VARIABLE.

> 
> 2. I had to explore quite a bit of the Android Developers documentation
> to fill in the gaps of the Readme instructions. Including setting
> up device detecting on Ubuntu
> <http://developer.android.com/tools/device.html#setting-up>. Are there
> other Commotion Android resources (besides the readme) that provide
> instructions on testing or troubleshooting?

We do not yet have any of that type of documentation. We do have some
instructions on our internal wiki that document how to setup the Android
development environment under Ubuntu but we have not yet published that
externally. Do you think that's something that would help developers? If
so, we could move that from our internal wiki to the public wiki.

> 
> 3. After installing the app on two HTC mobile devices, we tested them
> and they are either crashing or not fully functional. What is the best
> way for me to debug this? Should I run the app with adb logcat and share
> my findings on this commotion-dev? Is the commotion-android listserv not
> in use? 

This is absolutely the place for that debugging. Please send along your
logcat output and we will start the debugging process. I'm sorry to hear
that you are having trouble. There are two possible explanations for the
failure: 1) you've found a bug in our application or 2) the phone that
you are using has a wifi chipset that is incompatible with adhoc mode.
In either case, having that logcat output will get us going in the right
direction!

Thanks for taking the time to write out your experiences. I look forward
to hearing back from you and taking this conversation forward.

Will

> 
> *Douglas G Reith*
> Developer
> 313.437.1244 <tel:313.437.1244> (office)
> theworkdept.com <http://theworkdept.com/>
> 
> 
> 
> _______________________________________________
> Commotion-dev mailing list
> Commotion-dev at lists.chambana.net
> http://lists.chambana.net/mailman/listinfo/commotion-dev
> 
"
798,Commotion-dev, Configurate Point-to-Point Link in Commotion,"Wed, 10 Oct 2012 15:13:11 -0400",-0400,Seamus Tuohy,
799,Commotion-dev, Commotion Android build/install/testing,"Wed, 10 Oct 2012 15:26:00 -0400",-0400,Doug Reith,"Thanks for the quick response and great work, Hans! I'll get more familiar
with Android development and share my experiences testing this out.

*Douglas G Reith*
Developer
313.437.1244 (office)
theworkdept.com


On Wed, Oct 10, 2012 at 2:36 PM, Hans of Guardian <hans at guardianproject.info
> wrote:

>
> On Oct 10, 2012, at 1:54 PM, Doug Reith wrote:
>
> Hello Commotion,
>
> I was experimenting with building and installing the Commotion Android
> application from the instructions in the readme<https://code.commotionwireless.net/projects/commotion-android/repository/revisions/master/entry/README>.
> I hit a few obstacles and had a few questions:
>
> 1. Initially the make build for the Android app was failing. I eventually
> realized that the Makefile conditionally assigns 9 as the Android SDK
> platform in line 11: SDK_PLATFORM_LEVEL ?= 9. From what I read 9 is
> obsolete. The build ran sucessfully with platform level 16. Which SDK API
> Level should I be using?
>
>
> Either should be fine.  Originally Android build systems seemed to work
> best if you put the oldest supported version in that field.  Now they
> seemed to have changed their minds and say you should put the newest
> supported version.  If you want to compiled for android-9, you just have to
> install the android-9 stuff in the android updater.
>
> 2. I had to explore quite a bit of the Android Developers documentation to
> fill in the gaps of the Readme instructions. Including setting up device
> detecting on Ubuntu<http://developer.android.com/tools/device.html#setting-up>.
> Are there other Commotion Android resources (besides the readme) that
> provide instructions on testing or troubleshooting?
>
>
> The README assumes that you have a fully working Android development
> setup.  Otherwise we'd have to maintain a duplicate set of instructions as
> Google's.
>
> 3. After installing the app on two HTC mobile devices, we tested them and
> they are either crashing or not fully functional. What is the best way for
> me to debug this? Should I run the app with adb logcat and share my
> findings on this commotion-dev? Is the commotion-android listserv not in
> use?
>
>
> Post here on commotion-dev.  I'm the main author of the Commotion
> MeshTether, and that's the first I've heard of the commotion-android list :)
>
> The crashes should give you a stacktrace in logcat, that's a good place to
> start.  Post anything here that you want to discuss.
>
> Right now the known working devices are HTC running Android 2.x some
> random others.  It works on my Motorola Droid running CyanogenMod, and I
> can sometimes get it working on my Samsung Galaxy Player 5.0 running 2.3.3.
>  Will is currently working on 4.x support.
>
> .hc
>
"
800,Commotion-dev, Fwd: olsrd_0.6.2-2~bpo60+1_i386.changes ACCEPTED,"Thu, 11 Oct 2012 11:38:49 -0400",-0400,Hans-Christoph Steiner,"
Its official, we got olsrd in squeeze-backports, so its easier to
install olsrd on Debian/squeeze.  olsrd was left out of the squeeze
release originally:


"
801,Commotion-dev, Fwd: olsrd_0.6.2-2~bpo60+1_i386.changes,"Thu, 11 Oct 2012 17:41:12 +0200",+0200,L. Aaron Kaplan,"Congrats!!!


On Oct 11, 2012, at 5:38 PM, Hans-Christoph Steiner wrote:

> 
> Its official, we got olsrd in squeeze-backports, so its easier to install olsrd on Debian/squeeze.  olsrd was left out of the squeeze release originally:
> 
> 

"
802,Commotion-dev, Fwd: olsrd_0.6.2-2~bpo60+1_i386.changes,"Thu, 11 Oct 2012 10:49:40 -0500",-0500,Ben West,"Allow me to say: Huzzah!

On Thursday, October 11, 2012, Hans-Christoph Steiner wrote:

>
> Its official, we got olsrd in squeeze-backports, so its easier to install
> olsrd on Debian/squeeze.  olsrd was left out of the squeeze release
> originally:
>
>
> "
803,Commotion-dev, ad-hoc in android,"Thu, 11 Oct 2012 14:48:32 -0400",-0400,Hans-Christoph Steiner,"
There is now a patch submitted via the official android gerrit to add
ad-hoc support to Android:

https://android-review.googlesource.com/#/c/43070/

.hc
"
804,Commotion-dev, ad-hoc in android,"Fri, 12 Oct 2012 10:51:32 +1030",+1030,Jeremy Lakeman,"Hopefully this actually gets in and starts to be supported. But even
then it takes a long time for new android versions to trickle down to
actual devices.

I have wondered if we should team up with other projects that want
adhoc on android to build a single unified API we can use to get adhoc
working on each device. With a web site for documenting which
platforms are supported or broken and any other crazy steps required
like replacing your kernel.

On Fri, Oct 12, 2012 at 5:18 AM, Hans-Christoph Steiner
<hans at guardianproject.info> wrote:
>
> There is now a patch submitted via the official android gerrit to add
> ad-hoc support to Android:
>
> https://android-review.googlesource.com/#/c/43070/
>
> .hc
> _______________________________________________
> Commotion-dev mailing list
> Commotion-dev at lists.chambana.net
> http://lists.chambana.net/mailman/listinfo/commotion-dev
"
805,Commotion-dev, ad-hoc in android,"Fri, 12 Oct 2012 07:52:23 -0400",-0400,Dan Staples,"I'm glad to see that's been submitted!  Currently, does implementing 
ad-hoc mode such as in MeshTether (and Serval has their own 
implementation too, no?) require root?  I imagine once ad-hoc is 
supported in android itself root will not be required, which will 
greatly expand its accessibility for both developers and users.

Dan

On Thu 11 Oct 2012 08:21:32 PM EDT, Jeremy Lakeman wrote:
> Hopefully this actually gets in and starts to be supported. But even
> then it takes a long time for new android versions to trickle down to
> actual devices.
>
> I have wondered if we should team up with other projects that want
> adhoc on android to build a single unified API we can use to get adhoc
> working on each device. With a web site for documenting which
> platforms are supported or broken and any other crazy steps required
> like replacing your kernel.
>
> On Fri, Oct 12, 2012 at 5:18 AM, Hans-Christoph Steiner
> <hans at guardianproject.info> wrote:
"
806,Commotion-dev," Commotion-dev Digest, Vol 18, Issue 8","Fri, 12 Oct 2012 08:24:20 -0400",-0400,David Oliver,"It's good news that this patch got submitted but I agree with the notion
that even it accepted it will take a long time to ""trickle up"".

Should we be starting a list of devices that are compatible with Android
Mesh Tether?  More importantly perhaps, should we be compiling a list of
devices to AVOID (Hans mentioned one that goes dark permanently if you try
set ad hoc)?

Dave
David M. Oliver | david at olivercoady.com | http://olivercoady.com |
http://dmo.tel | @davidmoliver | +1 970 368 2366


On Fri, Oct 12, 2012 at 8:00 AM,
<commotion-dev-request at lists.chambana.net>wrote:

> Send Commotion-dev mailing list submissions to
>         commotion-dev at lists.chambana.net
>
> To subscribe or unsubscribe via the World Wide Web, visit
>         http://lists.chambana.net/mailman/listinfo/commotion-dev
> or, via email, send a message with subject or body 'help' to
>         commotion-dev-request at lists.chambana.net
>
> You can reach the person managing the list at
>         commotion-dev-owner at lists.chambana.net
>
> When replying, please edit your Subject line so it is more specific
> than ""Re: Contents of Commotion-dev digest...""
>
>
> Today's Topics:
>
>    1. ad-hoc in android (Hans-Christoph Steiner)
>    2. Re: ad-hoc in android (Jeremy Lakeman)
>    3. Re: ad-hoc in android (Dan Staples)
>
>
> "
807,Commotion-dev, ad-hoc in android,"Fri, 12 Oct 2012 11:41:25 -0400",-0400,Hans of Guardian,"
Yes, they both require root to set adhoc because you need root to set the wireless settings.  But this is not a big deal since any app that I know that uses adhoc needs root for other things as well.  OLSR mesh and tethering apps need root for setting routes, fr example.

.hc

On Oct 12, 2012, at 7:52 AM, Dan Staples wrote:

> I'm glad to see that's been submitted!  Currently, does implementing 
> ad-hoc mode such as in MeshTether (and Serval has their own 
> implementation too, no?) require root?  I imagine once ad-hoc is 
> supported in android itself root will not be required, which will 
> greatly expand its accessibility for both developers and users.
> 
> Dan
> 
> On Thu 11 Oct 2012 08:21:32 PM EDT, Jeremy Lakeman wrote:
"
808,Commotion-dev, ad-hoc in android,"Fri, 12 Oct 2012 11:42:06 -0400",-0400,Hans of Guardian,"
This is a good idea, have any ideas for how to structure it?

.hc

On Oct 11, 2012, at 8:21 PM, Jeremy Lakeman wrote:

> Hopefully this actually gets in and starts to be supported. But even
> then it takes a long time for new android versions to trickle down to
> actual devices.
> 
> I have wondered if we should team up with other projects that want
> adhoc on android to build a single unified API we can use to get adhoc
> working on each device. With a web site for documenting which
> platforms are supported or broken and any other crazy steps required
> like replacing your kernel.
> 
> On Fri, Oct 12, 2012 at 5:18 AM, Hans-Christoph Steiner
> <hans at guardianproject.info> wrote:
"
809,Commotion-dev, MITRE SPAN project: olsrd on Android,"Fri, 12 Oct 2012 11:48:59 -0400",-0400,Hans of Guardian,"
Anyone know anything about this MITRE SPAN project? Its apparently olsrd on Android, and open source, but I can't find the actual software anywhere.

.hc

Begin forwarded message:

> From: Teco Boot <teco at inf-net.nl>
> Date: October 12, 2012 5:44:45 AM EDT
> To: Magnus Wennberg <magnuswennberg at gmail.com>
> Cc: olsr-dev at lists.olsr.org
> Subject: Re: [Olsr-dev] Android ICS
> x-mailer: Apple Mail (2.1283)
> 
> More are with you facing some problems.
> There is a solution for Galaxy Nexus, with CM 4.0.2.
> Check SPAN for details.
> http://www.mitre.org/work/tech_papers/2012/12_2943/
> 
> I'm with you future versions of CM should have ad hoc capabilities. And on the end stock Android should support it.
> 
> Teco
> 
> 
> 
> Op 12 okt. 2012, om 11:11 heeft Magnus Wennberg het volgende geschreven:
> 
"
810,Commotion-dev, MITRE SPAN project: olsrd on Android,"Fri, 12 Oct 2012 18:08:05 +0200",+0200,Teco Boot,"
Op 12 okt. 2012, om 17:48 heeft Hans of Guardian het volgende geschreven:

> 
> Anyone know anything about this MITRE SPAN project? Its apparently olsrd on Android, and open source, but I can't find the actual software anywhere.

http://www.youtube.com/watch?v=RrI3MUnExJM
https://github.com/monk-dot/SPAN.git
Now moved to https://github.com/ProjectSPAN
Sync with those guys?

Teco

> .hc
> 
> Begin forwarded message:
> 
"
811,Commotion-dev, MITRE SPAN project: olsrd on Android,"Fri, 12 Oct 2012 14:36:57 -0400",-0400,Hans of Guardian,"
Anyone find any apks for this?  It looks like a pain to build.  I did a quick poke around the sources.  Looks like some useful stuff, with some overlap with the MeshTether code. Here's an overview of the pieces:

This only has some stuff related to building custom kernels for two Android devices:
https://github.com/monk-dot/SPAN.git

This looks like a modified version of olsrd based on olsrd at roughly commit 300e8ac364bbea7b9571ba938f893985416a16f9:
https://github.com/ProjectSPAN/android-manet-olsrd

This looks like an Android app written in Processing for visualizing the network:
https://github.com/ProjectSPAN/android-manet-visualizer

This seems to be the app wrapper for starting/stopping the mesh.
https://github.com/ProjectSPAN/android-manet-manager


Too bad they didn't post this code three months ago when they wrote it, it seems it just was posted on Oct 8th.  It would have been quite useful in the MeshTether app... they actually wrote a whole scraper for the txtinfo plugin, which sounds painful to me ;)

.hc

On Oct 12, 2012, at 12:08 PM, Teco Boot wrote:

> http://www.youtube.com/watch?v=RrI3MUnExJM
> https://github.com/monk-dot/SPAN.git
> Now moved to https://github.com/ProjectSPAN
> Sync with those guys?
> 
> Teco
> 
> 
> Op 12 okt. 2012, om 17:48 heeft Hans of Guardian het volgende geschreven:
> 
"
812,Commotion-dev, MITRE SPAN project: olsrd on Android,"Fri, 12 Oct 2012 14:59:09 -0400",-0400,Will Hawkins,"Since they are likely at a MITRE facility in the DC area, I am going to
actually contact the paper's authors and attempt to set up a meeting
with them. I will keep the list posted!

Will

On 10/12/2012 02:36 PM, Hans of Guardian wrote:
> 
> Anyone find any apks for this?  It looks like a pain to build.  I did a quick poke around the sources.  Looks like some useful stuff, with some overlap with the MeshTether code. Here's an overview of the pieces:
> 
> This only has some stuff related to building custom kernels for two Android devices:
> https://github.com/monk-dot/SPAN.git
> 
> This looks like a modified version of olsrd based on olsrd at roughly commit 300e8ac364bbea7b9571ba938f893985416a16f9:
> https://github.com/ProjectSPAN/android-manet-olsrd
> 
> This looks like an Android app written in Processing for visualizing the network:
> https://github.com/ProjectSPAN/android-manet-visualizer
> 
> This seems to be the app wrapper for starting/stopping the mesh.
> https://github.com/ProjectSPAN/android-manet-manager
> 
> 
> Too bad they didn't post this code three months ago when they wrote it, it seems it just was posted on Oct 8th.  It would have been quite useful in the MeshTether app... they actually wrote a whole scraper for the txtinfo plugin, which sounds painful to me ;)
> 
> .hc
> 
> On Oct 12, 2012, at 12:08 PM, Teco Boot wrote:
> 
"
813,Commotion-dev, ad-hoc in android,"Fri, 12 Oct 2012 15:05:20 -0400",-0400,Hans of Guardian,"
I haven't heard any ""nuclear"" problems with MeshTether or Barnacle (where MeshTether gets part of its adhoc logic from), but that's not saying it might not happen in the future :)

The meltdown occurred on my Motorola Droid running CM7 using Serval, which uses a different adhoc wrangling technique than MeshTether/Barnacle.  MeshTether is working fine on the Motorola Droid running CM7.    But MeshTether/Barnacle seem to support fewer devices currently than Serval.

.hc

On Oct 12, 2012, at 8:24 AM, David Oliver wrote:

> It's good news that this patch got submitted but I agree with the notion that even it accepted it will take a long time to ""trickle up"".
> 
> Should we be starting a list of devices that are compatible with Android Mesh Tether?  More importantly perhaps, should we be compiling a list of devices to AVOID (Hans mentioned one that goes dark permanently if you try set ad hoc)?
> 
> Dave
> David M. Oliver | david at olivercoady.com | http://olivercoady.com | http://dmo.tel | @davidmoliver | +1 970 368 2366
> 
> 
> On Fri, Oct 12, 2012 at 8:00 AM, <commotion-dev-request at lists.chambana.net> wrote:
> Send Commotion-dev mailing list submissions to
>         commotion-dev at lists.chambana.net
> 
> To subscribe or unsubscribe via the World Wide Web, visit
>         http://lists.chambana.net/mailman/listinfo/commotion-dev
> or, via email, send a message with subject or body 'help' to
>         commotion-dev-request at lists.chambana.net
> 
> You can reach the person managing the list at
>         commotion-dev-owner at lists.chambana.net
> 
> When replying, please edit your Subject line so it is more specific
> than ""Re: Contents of Commotion-dev digest...""
> 
> 
> Today's Topics:
> 
>    1. ad-hoc in android (Hans-Christoph Steiner)
>    2. Re: ad-hoc in android (Jeremy Lakeman)
>    3. Re: ad-hoc in android (Dan Staples)
> 
> 
> "
814,Commotion-dev, SPAN Android App,"Fri, 12 Oct 2012 17:00:41 -0400",-0400,Hans of Guardian,"
Hey there,

I just saw that you posted the SPAN sources, thanks to Teco Boot's post to the olsr-dev list.  It looks like there is a lot of overlap between the SPAN project, and the Commotion project, specifically olsrd on Android, and its issues.  We're also working with Serval as well and are looking to get some more code sharing going on.  To start with, an android ad-hoc framework to encapsulate all the tricks needed to enable adhoc mode for various devices.

If you're interested in trying the Commotion MeshTether app, you can get a test build here:
https://commotionwireless.net/blog/meshtether-test-release

and the source is here:
https://code.commotionwireless.net/projects/commotion-android

In related news, you'll probably be happy to hear that we've been working with some Google engineers on their 20% time to get adhoc support into Android.  The patch is been submitted to the Android gerrit, has been verified by their automated builder, and is just waiting for final approval from the Android dev:

https://android-review.googlesource.com/#/c/43070/

.hc
"
815,Commotion-dev, MITRE SPAN project: olsrd on Android,"Fri, 12 Oct 2012 17:05:28 -0400",-0400,Outback Dingo,"https://github.com/monk-dot/SPAN.git

On Fri, Oct 12, 2012 at 11:48 AM, Hans of Guardian
<hans at guardianproject.info> wrote:
>
> Anyone know anything about this MITRE SPAN project? Its apparently olsrd on Android, and open source, but I can't find the actual software anywhere.
>
> .hc
>
> Begin forwarded message:
>
"
816,Commotion-dev, MITRE SPAN project: olsrd on Android,"Fri, 12 Oct 2012 17:07:11 -0400",-0400,Hans of Guardian,"
That's only their presentation slides and kernels for two devices.  This seems to be everything:

https://github.com/ProjectSPAN/

.hc

On Oct 12, 2012, at 5:05 PM, Outback Dingo wrote:

> https://github.com/monk-dot/SPAN.git
> 
> On Fri, Oct 12, 2012 at 11:48 AM, Hans of Guardian
> <hans at guardianproject.info> wrote:
"
817,Commotion-dev, MITRE SPAN project: olsrd on Android,"Fri, 12 Oct 2012 17:20:47 -0400",-0400,Hans of Guardian,"
I wasn't involved in the choice of olsrd for Commotion, but I can throw my own opinion in :

olsrd was created in 2004, so its hardly reinventing the wheel.  olsrd is what runs large (1000 node) meshes in places like Vienna with funkfeuer, and a lot of other cities.

Can you expand more on the meshing that you worked on?  We're always interested in hearing more real world experience.  How would you make meshing work on phones without using adhoc mode wifi?

.hc

On Oct 12, 2012, at 5:16 PM, Outback Dingo wrote:

> On a side note, Ive really been quite curious as to why you would use
> olsr for this, and why reinvent the wheel
> theres already a ""number"" or wireless mesh projects out there, why
> start over from scratch and not do a due
> diligence. I mean 4+ years ago even I created a wireless mesh network
> with encrypted node to node communication
> and further encrypted routing protocol communications. We even did
> 0-configuration, and auto addressing, basically
> created a plug and play radio, would have been great in the arab
> spring, or haiti earthquakes, and japan tsunami. I
> guess for me I dont see how re-inventing something, that requires
> everyday users to add adhoc capabilities to their phone,
> let alone the limited handsets itll work on very limiting to these
> types of efforts.
> 
> On Fri, Oct 12, 2012 at 5:07 PM, Hans of Guardian
> <hans at guardianproject.info> wrote:
"
818,Commotion-dev, SPAN Android App,"Fri, 12 Oct 2012 20:56:48 -0400",-0400,Hans of Guardian,"
Spreading the word would be awesome.  And helping us figure out the SPAN code would be great as well.

.hc

On Oct 12, 2012, at 7:36 PM, m0nk wrote:

> That is so incredibly awesome.
> 
> I'll start digging into the project this weekend, sorry I have not come across it before.
> I'd personally love to be involved and help out with damn near anything mesh related if it has the ability to reach the populous.  
> 
> I'll be speaking at ToorCon in San Diego next weekend about meshing Android and some other conferences later this year.  Please let me know what can and can not be made ""public"" from your end?
> I started speaking about our specific project, but I have been focusing my recent talks more on overall concepts, headaches and technical challenges across the projects that I know of.
> 
> Thanks for the info? i am sure I will have questions after digging into the code and project.
> 
> josh
> 
> -- 
> m0nk
> Sent with Sparrow
> 
> On Friday, October 12, 2012 at 5:00 PM, Hans of Guardian wrote:
> 
"
819,Commotion-dev, ad-hoc in android,"Sat, 13 Oct 2012 12:45:09 +1030",+1030,Jeremy Lakeman,"Political structure;
A wiki, a git repo (+gerrit?), a mailing list... github can handle
most of that. I figure most projects that want to use it would
contribute to its development. Other than that I don't really care.

Main activity with;
- handset type detection
- automated check for existing test results on wiki
- serval-ish auto detection for finding and loading wifi modules
- testing process
- upload results to wiki

List of adhoc profile's & settings editing
3rd party apps should be able to pre-load a default config, but let
the user choose which profile they want to use with that application.

Android service that you can call from 3rd party apps for various actions;
- Add profile [SSID, BSSID, IP, channel, ...]
- Start profile
- Start scan, [if possible]

Sticky broadcast with current wifi network details [as above, +interface name]

And importantly, an automated testing process we can each run with the
various physical handsets we have available as part of accepting code
changes.

And if we can separate that out, Serval wouldn't need root for
anything since we relay payloads from user-space and don't touch the
routing table.

On Sat, Oct 13, 2012 at 2:12 AM, Hans of Guardian
<hans at guardianproject.info> wrote:
>
> This is a good idea, have any ideas for how to structure it?
>
> .hc
>
> On Oct 11, 2012, at 8:21 PM, Jeremy Lakeman wrote:
>
"
820,Commotion-dev, ad-hoc in android,"Fri, 12 Oct 2012 23:08:57 -0400",-0400,Hans of Guardian,"
Another thing to add that we have working in MeshTether is the WifiConfig in Android space so that Android thinks it has a network connection, instead of telling Android that wifi is disabled.

As an aside, how would you run OLSR or BATMAN without root?

.hc

On Oct 12, 2012, at 10:15 PM, Jeremy Lakeman wrote:

> Political structure;
> A wiki, a git repo (+gerrit?), a mailing list... github can handle
> most of that. I figure most projects that want to use it would
> contribute to its development. Other than that I don't really care.
> 
> Main activity with;
> - handset type detection
> - automated check for existing test results on wiki
> - serval-ish auto detection for finding and loading wifi modules
> - testing process
> - upload results to wiki
> 
> List of adhoc profile's & settings editing
> 3rd party apps should be able to pre-load a default config, but let
> the user choose which profile they want to use with that application.
> 
> Android service that you can call from 3rd party apps for various actions;
> - Add profile [SSID, BSSID, IP, channel, ...]
> - Start profile
> - Start scan, [if possible]
> 
> Sticky broadcast with current wifi network details [as above, +interface name]
> 
> And importantly, an automated testing process we can each run with the
> various physical handsets we have available as part of accepting code
> changes.
> 
> And if we can separate that out, Serval wouldn't need root for
> anything since we relay payloads from user-space and don't touch the
> routing table.
> 
> On Sat, Oct 13, 2012 at 2:12 AM, Hans of Guardian
> <hans at guardianproject.info> wrote:
"
821,Commotion-dev, ad-hoc in android,"Sat, 13 Oct 2012 14:30:11 +1030",+1030,Jeremy Lakeman,"On Sat, Oct 13, 2012 at 1:38 PM, Hans of Guardian
<hans at guardianproject.info> wrote:
>
> Another thing to add that we have working in MeshTether is the WifiConfig in Android space so that Android thinks it has a network connection, instead of telling Android that wifi is disabled.
>
> As an aside, how would you run OLSR or BATMAN without root?
"
822,Commotion-dev, ad-hoc in android,"Sat, 13 Oct 2012 09:56:15 +0200",+0200,Teco Boot,"
Op 13 okt. 2012, om 06:00 heeft Jeremy Lakeman het volgende geschreven:

> On Sat, Oct 13, 2012 at 1:38 PM, Hans of Guardian
> <hans at guardianproject.info> wrote:
"
823,Commotion-dev, SPAN Android App,"Fri, 12 Oct 2012 19:36:32 -0400",-0400,m0nk,"That is so incredibly awesome.  

I'll start digging into the project this weekend, sorry I have not come across it before.
I'd personally love to be involved and help out with damn near anything mesh related if it has the ability to reach the populous.   

I'll be speaking at ToorCon in San Diego next weekend about meshing Android and some other conferences later this year.  Please let me know what can and can not be made ""public"" from your end?
I started speaking about our specific project, but I have been focusing my recent talks more on overall concepts, headaches and technical challenges across the projects that I know of.

Thanks for the info? i am sure I will have questions after digging into the code and project.

josh  

--  
m0nk
Sent with Sparrow (http://www.sparrowmailapp.com/?sig)


On Friday, October 12, 2012 at 5:00 PM, Hans of Guardian wrote:

>  
> Hey there,
>  
> I just saw that you posted the SPAN sources, thanks to Teco Boot's post to the olsr-dev list. It looks like there is a lot of overlap between the SPAN project, and the Commotion project, specifically olsrd on Android, and its issues. We're also working with Serval as well and are looking to get some more code sharing going on. To start with, an android ad-hoc framework to encapsulate all the tricks needed to enable adhoc mode for various devices.
>  
> If you're interested in trying the Commotion MeshTether app, you can get a test build here:
> https://commotionwireless.net/blog/meshtether-test-release
>  
> and the source is here:
> https://code.commotionwireless.net/projects/commotion-android
>  
> In related news, you'll probably be happy to hear that we've been working with some Google engineers on their 20% time to get adhoc support into Android. The patch is been submitted to the Android gerrit, has been verified by their automated builder, and is just waiting for final approval from the Android dev:
>  
> https://android-review.googlesource.com/#/c/43070/
>  
> .hc  

"
824,Commotion-dev, SPAN Android App,"Mon, 15 Oct 2012 17:34:03 +0000",+0000,"Robble, Jeff","Hi Hans,

What Android devices does Commotion currently support? I tried it out an my Galaxy Nexus (CDMA) and Galaxy S II (SPH-D710) to no avail.

Supporting all of the various Android devices and their hardware differences is a major issue. A common framework would be great. Currently SPAN works on devices with Wireless Extensions kernel support. That way we can simply use iwconfig; however, there are some things that iwconfig can't seem to do on Android devices, like set the 802.11 channel.

It seems that Commotion is focusing on OLSR. Is there a reason you went with OLSR and not BATMAN? Serval uses BATMAN I believe. Based on what I read, the main developers behind OLSR came up with BATMAN to address circular routing, network congestion, and performance issues. Yet, OLSR-NG apparently fixed their fisheye feature and now it performs much better than before with less network congestion: http://www.olsr.org/?q=node/13

Ultimately a generic framework for plug-and-play routing protocols would be best. That way people could test and determine which ones are best. Have you guys given any thought to reactive protocols (like AODV) vs. proactive protocols (like OLSR)?

Serval does a decent job with security; however, it seems that for each device they randomly generate a public/private key pair such that the public key is an IPv4 address they statically assign to that device. While the probability is low that there will be IPv4 address collision in a class C subnet, there is still a possibility, and that doesn't sit right with me. SPAN is looking into using tinc (http://www.tinc-vpn.org/) for P2P VPN across the mesh and sharing keys via NFC.

SPAN is also looking into supporting iOS. Have the Commotion folks looked into that yet?

Getting ad-hoc support into the Android framework would be amazing. The root requirement is a no-go for a lot of users. Also, it would be great if an Android app. could simply work over the mesh without needing to be customized against a special mesh API. That's why SPAN came up with a transparent proxy that runs on the device and routes outgoing packets to our mesh service. Of course apps will need an API to get the peer list, etc., but existing ""stock"" Android apps wouldn't need to change.

Jeffrey Robble
Software Systems Engineer
The MITRE Corporation (Bedford)
Office: 781.271.2790

From: Hans of Guardian <hans at guardianproject.info<mailto:hans at guardianproject.info"
825,Commotion-dev, SPAN Android App,"Mon, 15 Oct 2012 17:36:37 +0000",+0000,"Robble, Jeff","Also, have you guys looked into Wi-Fi Direct?

Jeffrey Robble
Software Systems Engineer
The MITRE Corporation (Bedford)
Office: 781.271.2790

From: <Robble>, ""Robble, Jeff"" <jrobble at mitre.org<mailto:jrobble at mitre.org"
826,Commotion-dev, SPAN Android App,"Mon, 15 Oct 2012 17:48:09 +0000",+0000,"Robble, Jeff","Err, I meant ""While the probability is low that there will be IPv4 address collision in a class A subnet"" ?

Maybe these questions / concerns should be posted on your forum.

Jeffrey Robble
Software Systems Engineer
The MITRE Corporation (Bedford)
Office: 781.271.2790

From: <Robble>, ""Robble, Jeff"" <jrobble at mitre.org<mailto:jrobble at mitre.org"
827,Commotion-dev, SPAN Android App,"Mon, 15 Oct 2012 15:00:23 -0400",-0400,Hans of Guardian,"
I've looked into Wifi Direct a little bit.  From what I've seen, its not a replacement for adhoc mode unless you want to use Wifi Direct meshing.  Wifi Direct meshing is limited to 32 nodes in the spec.  So if you're happy with all meshes always under 32 nodes, then it could work well.

.hc

On Oct 15, 2012, at 1:36 PM, Robble, Jeff wrote:

> Also, have you guys looked into Wi-Fi Direct?
> 
> Jeffrey Robble
> Software Systems Engineer
> The MITRE Corporation (Bedford)
> Office: 781.271.2790
> 
> From: <Robble>, ""Robble, Jeff"" <jrobble at mitre.org>
> Date: Monday, October 15, 2012 1:34 PM
> To: Hans of Guardian <hans at guardianproject.info>
> Cc: List Commotion Development <commotion-dev at lists.chambana.net>, ""Chong, Oliver L"" <ochong at mitre.org>, ""Durrant, Sheldon A."" <sdurrant at mitre.org>, ""m0nk.omg.pwnies at gmail.com"" <m0nk.omg.pwnies at gmail.com>
> Subject: Re: SPAN Android App
> 
> Hi Hans,
> 
> What Android devices does Commotion currently support? I tried it out an my Galaxy Nexus (CDMA) and Galaxy S II (SPH-D710) to no avail.
> 
> Supporting all of the various Android devices and their hardware differences is a major issue. A common framework would be great. Currently SPAN works on devices with Wireless Extensions kernel support. That way we can simply use iwconfig; however, there are some things that iwconfig can't seem to do on Android devices, like set the 802.11 channel.
> 
> It seems that Commotion is focusing on OLSR. Is there a reason you went with OLSR and not BATMAN? Serval uses BATMAN I believe. Based on what I read, the main developers behind OLSR came up with BATMAN to address circular routing, network congestion, and performance issues. Yet, OLSR-NG apparently fixed their fisheye feature and now it performs much better than before with less network congestion: http://www.olsr.org/?q=node/13
> 
> Ultimately a generic framework for plug-and-play routing protocols would be best. That way people could test and determine which ones are best. Have you guys given any thought to reactive protocols (like AODV) vs. proactive protocols (like OLSR)?
> 
> Serval does a decent job with security; however, it seems that for each device they randomly generate a public/private key pair such that the public key is an IPv4 address they statically assign to that device. While the probability is low that there will be IPv4 address collision in a class C subnet, there is still a possibility, and that doesn't sit right with me. SPAN is looking into using tinc (http://www.tinc-vpn.org/) for P2P VPN across the mesh and sharing keys via NFC.
> 
> SPAN is also looking into supporting iOS. Have the Commotion folks looked into that yet?
> 
> Getting ad-hoc support into the Android framework would be amazing. The root requirement is a no-go for a lot of users. Also, it would be great if an Android app. could simply work over the mesh without needing to be customized against a special mesh API. That's why SPAN came up with a transparent proxy that runs on the device and routes outgoing packets to our mesh service. Of course apps will need an API to get the peer list, etc., but existing ""stock"" Android apps wouldn't need to change.
> 
> Jeffrey Robble
> Software Systems Engineer
> The MITRE Corporation (Bedford)
> Office: 781.271.2790
> 
> From: Hans of Guardian <hans at guardianproject.info>
> Date: Friday, October 12, 2012 8:56 PM
> To: ""m0nk.omg.pwnies at gmail.com"" <m0nk.omg.pwnies at gmail.com>
> Cc: ""Robble, Jeff"" <jrobble at mitre.org>, List Commotion Development <commotion-dev at lists.chambana.net>
> Subject: Re: SPAN Android App
> 
> 
> Spreading the word would be awesome.  And helping us figure out the SPAN code would be great as well.
> 
> .hc
> 
> On Oct 12, 2012, at 7:36 PM, m0nk wrote:
> 
"
828,Commotion-dev, SPAN Android App,"Mon, 15 Oct 2012 15:00:37 -0400",-0400,Will Hawkins,"Hi Jeff!

I am one of the Commotion developers at OTI and focus specifically on
the mobile side of things. I came over recently from the Naval Research
Lab where I was working on similar things. Thank you for your work on
SPAN and your detailed email. I will respond where I have knowledge and
defer to others where I am ignorant.

On 10/15/2012 01:34 PM, Robble, Jeff wrote:
> Hi Hans,
> 
> What Android devices does Commotion currently support? I tried it out an
> my Galaxy Nexus (CDMA) and Galaxy S II (SPH-D710) to no avail.
> 
> Supporting all of the various Android devices and their hardware
> differences is a major issue. A common framework would be great.
> Currently SPAN works on devices with Wireless Extensions kernel support.
> That way we can simply use iwconfig; however, there are some things that
> iwconfig can't seem to do on Android devices, like set the 802.11 channel.
> 
> It seems that Commotion is focusing on OLSR. Is there a reason you went
> with OLSR and not BATMAN? Serval uses BATMAN I believe. Based on what I
> read, the main developers behind OLSR came up with BATMAN to address
> circular routing, network congestion, and performance issues. Yet,
> OLSR-NG apparently fixed their fisheye feature and now it performs much
> better than before with less network congestion:
> http://www.olsr.org/?q=node/13
> 
> Ultimately a generic framework for plug-and-play routing protocols would
> be best. That way people could test and determine which ones are best.
> Have you guys given any thought to reactive protocols (like AODV) vs.
> proactive protocols (like OLSR)?

I will defer to Josh, one of the original Commotion designers who was
one of those people who helped make the decision to focus on OLSRd.
However, I can say that one of our goals for the near future is to
support multiple routing protocols (and even perhaps supporting
802.11s). We have looked into BATMAN and that is on our short list of
protocols that we want to be compatible with.

> 
> Serval does a decent job with security; however, it seems that for each
> device they randomly generate a public/private key pair such that the
> public key is an IPv4 address they statically assign to that device.
> While the probability is low that there will be IPv4 address collision
> in a class C subnet, there is still a possibility, and that doesn't sit
> right with me. 

It sounds like what you are describing is similar to their mesh datagram
protocol. Commotion is actively working with Serval to implement MDP
into its implementation. Is this what you are describing?

> SPAN is looking into using tinc
> (http://www.tinc-vpn.org/) for P2P VPN across the mesh and sharing keys
> via NFC.

This looks very interesting. I will definitely investigate further!
Thanks for the pointer.

> 
> SPAN is also looking into supporting iOS. Have the Commotion folks
> looked into that yet?

We have ""looked"" into it but not yet gotten very far. We have iOS
development expertise in house (me) but have not yet moved forward. If
you have an architecture in mind I would like to hear about it. If not,
I would absolutely be interested in brainstorming approaches to mesh
networking in iOS.

> 
> Getting ad-hoc support into the Android framework would be amazing. The
> root requirement is a no-go for a lot of users. Also, it would be great
> if an Android app. could simply work over the mesh without needing to be
> customized against a special mesh API. That's why SPAN came up with a
> transparent proxy that runs on the device and routes outgoing packets to
> our mesh service. Of course apps will need an API to get the peer list,
> etc., but existing ""stock"" Android apps wouldn't need to change.

I would be interested in hearing more about this. With the Commotion
Mesh Tether application running on a mesh network with access to the
Internet (through HNA), applications ""just work"". For instance, I can
fire up the default Android web browser and hop on the Internet without
needing to know that I am reaching, for example, cnn.com over the mesh.
Is there a particular problem you were seeing that caused you to
implement this proxy solution?

> 
> Jeffrey Robble
> 
> Software Systems Engineer
> 
> The MITRE Corporation (Bedford)
> 
> Office: 781.271.2790
> 
> 
> From: Hans of Guardian <hans at guardianproject.info
> <mailto:hans at guardianproject.info"
829,Commotion-dev, SPAN Android App,"Mon, 15 Oct 2012 15:01:49 -0400",-0400,Hans of Guardian,"
I encourage you to join commotion-dev.  Its low traffic and high signal-noise ratio, and already a common  place for OTI/Commotion, Serval, and OLSR devs.

.hc

On Oct 15, 2012, at 1:48 PM, Robble, Jeff wrote:

> Err, I meant ""While the probability is low that there will be IPv4 address collision in a class A subnet"" ?
> 
> Maybe these questions / concerns should be posted on your forum.
> 
> Jeffrey Robble
> Software Systems Engineer
> The MITRE Corporation (Bedford)
> Office: 781.271.2790
> 
> From: <Robble>, ""Robble, Jeff"" <jrobble at mitre.org>
> Date: Monday, October 15, 2012 1:36 PM
> To: Hans of Guardian <hans at guardianproject.info>
> Cc: List Commotion Development <commotion-dev at lists.chambana.net>, ""Chong, Oliver L"" <ochong at mitre.org>, ""Durrant, Sheldon A."" <sdurrant at mitre.org>, ""m0nk.omg.pwnies at gmail.com"" <m0nk.omg.pwnies at gmail.com>
> Subject: Re: SPAN Android App
> 
> Also, have you guys looked into Wi-Fi Direct?
> 
> Jeffrey Robble
> Software Systems Engineer
> The MITRE Corporation (Bedford)
> Office: 781.271.2790
> 
> From: <Robble>, ""Robble, Jeff"" <jrobble at mitre.org>
> Date: Monday, October 15, 2012 1:34 PM
> To: Hans of Guardian <hans at guardianproject.info>
> Cc: List Commotion Development <commotion-dev at lists.chambana.net>, ""Chong, Oliver L"" <ochong at mitre.org>, ""Durrant, Sheldon A."" <sdurrant at mitre.org>, ""m0nk.omg.pwnies at gmail.com"" <m0nk.omg.pwnies at gmail.com>
> Subject: Re: SPAN Android App
> 
> Hi Hans,
> 
> What Android devices does Commotion currently support? I tried it out an my Galaxy Nexus (CDMA) and Galaxy S II (SPH-D710) to no avail.
> 
> Supporting all of the various Android devices and their hardware differences is a major issue. A common framework would be great. Currently SPAN works on devices with Wireless Extensions kernel support. That way we can simply use iwconfig; however, there are some things that iwconfig can't seem to do on Android devices, like set the 802.11 channel.
> 
> It seems that Commotion is focusing on OLSR. Is there a reason you went with OLSR and not BATMAN? Serval uses BATMAN I believe. Based on what I read, the main developers behind OLSR came up with BATMAN to address circular routing, network congestion, and performance issues. Yet, OLSR-NG apparently fixed their fisheye feature and now it performs much better than before with less network congestion: http://www.olsr.org/?q=node/13
> 
> Ultimately a generic framework for plug-and-play routing protocols would be best. That way people could test and determine which ones are best. Have you guys given any thought to reactive protocols (like AODV) vs. proactive protocols (like OLSR)?
> 
> Serval does a decent job with security; however, it seems that for each device they randomly generate a public/private key pair such that the public key is an IPv4 address they statically assign to that device. While the probability is low that there will be IPv4 address collision in a class C subnet, there is still a possibility, and that doesn't sit right with me. SPAN is looking into using tinc (http://www.tinc-vpn.org/) for P2P VPN across the mesh and sharing keys via NFC.
> 
> SPAN is also looking into supporting iOS. Have the Commotion folks looked into that yet?
> 
> Getting ad-hoc support into the Android framework would be amazing. The root requirement is a no-go for a lot of users. Also, it would be great if an Android app. could simply work over the mesh without needing to be customized against a special mesh API. That's why SPAN came up with a transparent proxy that runs on the device and routes outgoing packets to our mesh service. Of course apps will need an API to get the peer list, etc., but existing ""stock"" Android apps wouldn't need to change.
> 
> Jeffrey Robble
> Software Systems Engineer
> The MITRE Corporation (Bedford)
> Office: 781.271.2790
> 
> From: Hans of Guardian <hans at guardianproject.info>
> Date: Friday, October 12, 2012 8:56 PM
> To: ""m0nk.omg.pwnies at gmail.com"" <m0nk.omg.pwnies at gmail.com>
> Cc: ""Robble, Jeff"" <jrobble at mitre.org>, List Commotion Development <commotion-dev at lists.chambana.net>
> Subject: Re: SPAN Android App
> 
> 
> Spreading the word would be awesome.  And helping us figure out the SPAN code would be great as well.
> 
> .hc
> 
> On Oct 12, 2012, at 7:36 PM, m0nk wrote:
> 
"
830,Commotion-dev, SPAN Android App,"Mon, 15 Oct 2012 15:10:45 -0400",-0400,Hans of Guardian,"
On Oct 15, 2012, at 3:00 PM, Will Hawkins wrote:

> Hi Jeff!
> 
> I am one of the Commotion developers at OTI and focus specifically on
> the mobile side of things. I came over recently from the Naval Research
> Lab where I was working on similar things. Thank you for your work on
> SPAN and your detailed email. I will respond where I have knowledge and
> defer to others where I am ignorant.
> 
> On 10/15/2012 01:34 PM, Robble, Jeff wrote:
"
831,Commotion-dev, SPAN Android App,"Tue, 16 Oct 2012 08:40:34 +1030",+1030,Jeremy Lakeman,"On Tue, Oct 16, 2012 at 4:04 AM, Robble, Jeff <jrobble at mitre.org> wrote:
> Serval does a decent job with security; however, it seems that for each
> device they randomly generate a public/private key pair such that the public
> key is an IPv4 address they statically assign to that device. While the
> probability is low that there will be IPv4 address collision in a class C
> subnet, there is still a possibility, and that doesn't sit right with me.

There's a good reason that doesn't sit right, because we aren't doing
that at all. Sure we assign a random IPv4 address, but that has
nothing to do with our security layer. Note that the following
description refers to the upcoming 0.90 version, version 0.08 just
uses BATMAN or olsr with unencrypted network packets.

We're generating 256-bit ECC key pairs and using those as network
addresses. That doesn't mean we're putting public keys in standard IP
headers. We've basically written an entire network stack in user-space
with our own payload forwarding protocol that we encapsulate into
IP/UPD packets. And send them between instances of our servald daemon,
acting as routers.

When you send a payload via MDP, you address it to a 256-bit public
key and hand it over to your local servald daemon. This daemon
encrypts the payload, adds it to a queue, works out which neighbour to
use as the next hop, then stuffs a number of small payloads going to
the same broadcast/unicast address into an IP/UDP packet to reach that
neighbour.

In that respect, MDP behaves more like a many-to-many VPN that doesn't
(yet) have a tap/tun virtual interface.

Note that I've also done some work recently to support a small number
of servald daemon's operating on a larger olsr network. Essentially we
have a mode where servald will send mesh-wide flood messages, like
phone number lookup requests, via an olsr plugin. Servald will use
receipt of those messages to discover the unicast addresses of other
servald nodes on the network. From then on we can send encrypted
payloads, like phone number / public key responses or voice call
payloads, directly across the mesh.

I'm also extending the work I did for olsr, supporting unicast
destinations in servald's routing table, to build Serval's first piece
of infrastructure. An opt-in dns like global directory of phone
numbers, public keys, and current internet addresses. Some time in the
future, you will be able to use Serval to place phone calls over the
internet, or send any other kind of encrypted payload to anyone in the
world. And all you'll need to know is their phone number or public
key.

"
832,Commotion-dev, SPAN Android App,"Tue, 16 Oct 2012 01:18:36 +0100",+0100,Michael Rogers,
833,Commotion-dev, SPAN Android App,"Tue, 16 Oct 2012 10:50:24 +1030",+1030,Jeremy Lakeman,"On Tue, Oct 16, 2012 at 9:04 AM, Robble, Jeff <jrobble at mitre.org> wrote:
> Thanks for the clarification Jeremy.
>
> So you're randomly generating a 256-bit key pair and using the public key
> as the device network address. When you want to send data the serval
> daemon encrypts it using the 256-bit IP address of the destination and
> encapsulates it in a IP/UDP packet. Am I misunderstanding?

A picture is worth a thousand words... The logical structure of our
transmitted IP packets look something like this;

[ethernet header; source MAC, dest MAC, ...]
[ip / udp header; source IP, dest IP, source port, dest port, ...]
[serval packet format version number]
[transmitting device PK]
[payload list;
  [payload;
    - original source PK
    - final destination PK or broadcast identifier for de-duplication
    - next hop PK
    - payload length
    - payload body
  ],
  ...
]

Though the wire format does have some space saving tricks for sending
short abbreviations for PK addresses that are already known by both
parties.

When we receive a packet, we only use the source IP address to work
out where to send unicast reply packets destined for the ""transmitting
device PK"". And only if we're running in olsr mode or the transmitter
is in a different network sub-net.

We then look through the payload list for anything addressed to us as
the destination or next hop address, and process and/or forward them.

So yes, the network discovers public keys as it builds the routing
table and communicates with other devices. So we can easily encrypt
any packet with a PK destination over the network. But that doesn't
mean we've authenticated anyone's identity or done anything to detect
a man-in-the-middle attack.

Public key verification is still best done in person. Though we are
also looking at verification via an audio channel; relying on your
brain's ability to do voice print verification of identity, while
confirming the fingerprint of a shared secret.

Eventually we may also implement key signing for building a web of trust.

"
834,Commotion-dev, SPAN Android App,"Tue, 16 Oct 2012 11:40:22 +1030",+1030,Jeremy Lakeman,"On Tue, Oct 16, 2012 at 10:48 AM, Michael Rogers
<michael at briarproject.org> wrote:
> This sounds like a really exciting piece of infrastructure, but if all
> I have is someone's phone number, how can I authenticate the data I
> retrieve from the directory (which I guess would include the person's
> public key)? What's to stop someone else from storing their public key
> under my phone number, or replacing my public key with their own when
> forwarding a directory response?

We may charge a token fee for registration, probably similar to the
cost of a dns name. Or we could charge for an identity verification
process where we send you a text message to confirm your control of a
phone number. Either of these approaches should help to dampen the
potential impact of spamming the phone number directory.

Though the technical details of the implementation are still up in the
air. I have thought about publishing phone number mappings via a hash
of the number and the current time to the nearest 12 hours or so. The
back end storage system then doesn't have the time to keep rebuilding
rainbow tables in order to work out what phone numbers have been
published.

Without any form of verification, you have to assume anyone could be
snooping via a man-in-the-middle attack. If you're happy to
communicate, knowing that a government or other attacker could be
listening, we're not going to stop you. Our current plan is to play a
beep periodically during a voice call, to indicate that the channel's
security has not been confirmed and might be recorded.

Once you've verified keys with someone, we expect you to initiate
communications using the keys themselves, without repeating the phone
number lookup.

"
835,Commotion-dev, Bandwidth limiting on Commotion OpenWRT?,"Tue, 16 Oct 2012 10:23:13 -0400",-0400,Andy Gunn,"Hi Dev team - I have a question regarding rate limiting a Commotion node
when it is operating as a Gateway. Is there a way to configure the unit
to limit the bandwith?

Doing this through the GUI would be great, so we can train users on this
- but if necessary we can go through the shell.

Thanks!



-- 

Andy Gunn
Field Engineer, Open Technology Institute
New America Foundation
202-596-3484
http://oti.newamerica.net
"
836,Commotion-dev, Bandwidth limiting on Commotion OpenWRT?,"Tue, 16 Oct 2012 11:10:40 -0400",-0400,Jordan McCarthy,
837,Commotion-dev, Bandwidth limiting on Commotion OpenWRT?,"Tue, 16 Oct 2012 11:15:44 -0400",-0400,Andy Gunn,
838,Commotion-dev, SPAN Android App,"Mon, 15 Oct 2012 22:34:55 +0000",+0000,"Robble, Jeff","Thanks for the clarification Jeremy.

So you're randomly generating a 256-bit key pair and using the public key
as the device network address. When you want to send data the serval
daemon encrypts it using the 256-bit IP address of the destination and
encapsulates it in a IP/UDP packet. Am I misunderstanding?

It doesn't seem necessary to exchange public keys at all since that
information is contained in the IP/UDP packet header.

Jeffrey Robble
Software Systems Engineer
The MITRE Corporation (Bedford)
Office: 781.271.2790






On 10/15/12 6:10 PM, ""Jeremy Lakeman"" <Jeremy.Lakeman at gmail.com> wrote:

>On Tue, Oct 16, 2012 at 4:04 AM, Robble, Jeff <jrobble at mitre.org> wrote:
"
839,Commotion-dev, SPAN Android App,"Mon, 15 Oct 2012 22:37:09 +0000",+0000,"Robble, Jeff","....

It doesn't seem necessary to exchange public keys at all since that
information is contained in the IP/UDP packet header as the sender address.


Jeffrey Robble
Software Systems Engineer
The MITRE Corporation (Bedford)
Office: 781.271.2790






On 10/15/12 6:34 PM, ""Robble, Jeff"" <jrobble at mitre.org> wrote:

>Thanks for the clarification Jeremy.
>
>So you're randomly generating a 256-bit key pair and using the public key
>as the device network address. When you want to send data the serval
>daemon encrypts it using the 256-bit IP address of the destination and
>encapsulates it in a IP/UDP packet. Am I misunderstanding?
>
>It doesn't seem necessary to exchange public keys at all since that
>information is contained in the IP/UDP packet header.
>
>Jeffrey Robble
>Software Systems Engineer
>The MITRE Corporation (Bedford)
>Office: 781.271.2790
>
>
>
>
>
>
>On 10/15/12 6:10 PM, ""Jeremy Lakeman"" <Jeremy.Lakeman at gmail.com> wrote:
>
"
840,Commotion-dev, Bandwidth limiting on Commotion OpenWRT?,"Tue, 16 Oct 2012 11:40:23 -0400",-0400,Seamus Tuohy,
841,Commotion-dev, Bandwidth limiting on Commotion OpenWRT?,"Tue, 16 Oct 2012 12:04:01 -0400",-0400,Andy Gunn,
842,Commotion-dev, Bandwidth limiting on Commotion OpenWRT?,"Tue, 16 Oct 2012 11:26:56 -0500",-0500,Ben West,"I use the qos-scripts and the corresponding Luci plugin pretty routinely to
throttle bandwidth used on both eth0 and wlan0.  I've found them to work
acceptably w/o appearing to hog lots of CPU on my Ubiquiti M5 radios.
 Also, effective QoS does require RAM, at least 32MB per node, ideally more
if you are wanting to throttle at rates above 10Mbit/s.

In effect, you can specify for qos-scripts maximum upload and download
bandwidth caps per interface.  However, you may need to do some testing to
determine which context for ""upload"" and ""download"" is assumed by
qos-scripts on each radio.  I.e., I believe it is different for gateway vs.
repeater node.  Also, qos-scripts comes with a bunch of default class
definitions (bulk, normal, express), to let you prioritize certain types of
traffic over others, although I've not played around with these classes
very much myself.

You can look /etc/config/qos (if you have qos-scripts package installed)
for a good idea.

More info:
http://wiki.openwrt.org/doc/uci/qos

Finally, do please note that this QoS implementation likely suffers from
the dreaded Bufferbloat problem which Jim Gettys, et al, are convincingly
claiming will soon kill the Internet beyond any hope of repair.  That is,
please be aware that enabling QoS under certain conditions, especially
where lots of streaming media is used, might just make things worse.

The bleeding-edge versions of OpenWRT, altho not yet Commotion, are now
using a bufferbloat fix called ""CoDel,"" but I've yet to try it out myself.

On Tue, Oct 16, 2012 at 11:04 AM, Andy Gunn <gunn at newamerica.net> wrote:

> "
843,Commotion-dev, SPAN Android App,"Wed, 17 Oct 2012 08:45:34 +1030",+1030,Jeremy Lakeman,"On Wed, Oct 17, 2012 at 4:51 AM, Robble, Jeff <jrobble at mitre.org> wrote:
> The packet layout helps clarify. 256-bit key addresses are used to
> determine how to route packets between serval daemons in user space. IP
> addresses are still used to send packets between devices over the wireless
> interface.
>
> I assume the ""payload body"" is the only part of each serval payload that's
> encrypted and it's encrypted using only the final destination's public
> key. Is that accurate?

Correct.

> You mention that the source IP address is used to only send a unicast
> reply. I assume that a message with payloads destined for specific peers
> (i.e. the message does not contain a broadcast) is sent via unicast to the
> next hop. Is that accurate or are all messages broadcast over the wireless
> interface, received by the serval daemon on each device, and filtered
> accordingly?

We prefer to send broadcast packets so we can include payloads for
multiple neighbours in the same frame, and it more closely matches
what's happening at the physical layer. We will need to fall back to
unicast packets if our neighbour can't hear our own broadcast packets.
Many android devices filter broadcasts when entering a low power
state, and some filter broadcasts all the time.

Though broadcast packets are more unreliable on ad-hoc wifi, if
there's a collision or interference the packet will be lost. While the
wifi layer will ack / nack unciast packets and will retry a few times
until successful, we've found a couple of devices like Samsung G SII
that retry so much in burst mode they consume all available bandwidth
for ~0.9 seconds.

Since we're expecting to route packets over a mesh, if a transmission
fails it may indicate that the topology has changed and any retry may
need to take a different path. Though we haven't implemented retries
at the network level yet.

> I'm trying to figure out if your version of OLSR is using IP addresses or
> 256-bit key addresses. Does serval perform a lookup on the next hop
> 256-bit key addresses to determine its IP address and then send the
> message via unicast to that IP address?

If we're running in our new experimental olsr mode, we don't actively
try to determine the topology of the mesh at all, that's olsr's job.
We use a similar payload header for messages we send via olsr's
flooding service, and we establish a routing table entry mapping PK to
IPv4 address. Then we always send unicast IP packets directly to the
final destination. This has a lot in common with our approach for
routing payloads via the internet.

Since we can run a network in either mode, we should be able to easily
compare our routing engine to olsr to compare performance. I'm not
expecting us to beat olsr yet, we've still got a lot of work to do.
But if we get close, we should be able to prove it.

While serval does support devices with multiple interfaces, we haven't
tackled use cases where those interfaces use different modes of
routing. Either all devices should be in olsr mode, or all devices
should be routing via our protocol.

> Jeffrey Robble
> Software Systems Engineer
> The MITRE Corporation (Bedford)
> Office: 781.271.2790
>
>
>
>
> On 10/15/12 8:20 PM, ""Jeremy Lakeman"" <Jeremy.Lakeman at gmail.com> wrote:
>
"
844,Commotion-dev, SPAN Android App,"Tue, 16 Oct 2012 18:21:39 +0000",+0000,"Robble, Jeff","The packet layout helps clarify. 256-bit key addresses are used to
determine how to route packets between serval daemons in user space. IP
addresses are still used to send packets between devices over the wireless
interface.

I assume the ""payload body"" is the only part of each serval payload that's
encrypted and it's encrypted using only the final destination's public
key. Is that accurate?

You mention that the source IP address is used to only send a unicast
reply. I assume that a message with payloads destined for specific peers
(i.e. the message does not contain a broadcast) is sent via unicast to the
next hop. Is that accurate or are all messages broadcast over the wireless
interface, received by the serval daemon on each device, and filtered
accordingly? 

I'm trying to figure out if your version of OLSR is using IP addresses or
256-bit key addresses. Does serval perform a lookup on the next hop
256-bit key addresses to determine its IP address and then send the
message via unicast to that IP address?

Jeffrey Robble
Software Systems Engineer
The MITRE Corporation (Bedford)
Office: 781.271.2790




On 10/15/12 8:20 PM, ""Jeremy Lakeman"" <Jeremy.Lakeman at gmail.com> wrote:

>On Tue, Oct 16, 2012 at 9:04 AM, Robble, Jeff <jrobble at mitre.org> wrote:
"
845,Commotion-dev, SPAN Android App,"Wed, 17 Oct 2012 13:11:18 +0000",+0000,"Robble, Jeff","Your comment about the Samsung Galaxy S II burst mode is interesting. When
we tested a network of 10+ Samsung Galaxy S II's and 10+ Samsung Galaxy
Nexus's we noticed that the Samsung Galaxy Nexus's would eventually drop
out of the network because other devices couldn't receive their OLSR
""hello"" broadcasts. It seemed like the Samsung Galaxy S II's were drowning
them out. The Samsung Galaxy S II's could still communicate. All of the
devices were on 802.11 channel 1 and transmitting at 32 dBm (according to
iwconfig).

Your MDP approach sounds promising. Would you please provide an example of
the packet layout for the experimental olsr mode?


Jeffrey Robble
Software Systems Engineer
The MITRE Corporation (Bedford)
Office: 781.271.2790



On 10/16/12 6:15 PM, ""Jeremy Lakeman"" <Jeremy.Lakeman at gmail.com> wrote:

>On Wed, Oct 17, 2012 at 4:51 AM, Robble, Jeff <jrobble at mitre.org> wrote:
"
846,Commotion-dev, SPAN Android App,"Wed, 17 Oct 2012 10:35:17 -0400",-0400,Hans-Christoph Steiner,"
Have you tried playing with the various Android Wifi locks and sleep
modes?  There are some new ones in 4.x that should improve multicast
performance, for example.  This sounds related to that.

.hc

On 10/17/2012 09:11 AM, Robble, Jeff wrote:
> Your comment about the Samsung Galaxy S II burst mode is interesting. When
> we tested a network of 10+ Samsung Galaxy S II's and 10+ Samsung Galaxy
> Nexus's we noticed that the Samsung Galaxy Nexus's would eventually drop
> out of the network because other devices couldn't receive their OLSR
> ""hello"" broadcasts. It seemed like the Samsung Galaxy S II's were drowning
> them out. The Samsung Galaxy S II's could still communicate. All of the
> devices were on 802.11 channel 1 and transmitting at 32 dBm (according to
> iwconfig).
> 
> Your MDP approach sounds promising. Would you please provide an example of
> the packet layout for the experimental olsr mode?
> 
> 
> Jeffrey Robble
> Software Systems Engineer
> The MITRE Corporation (Bedford)
> Office: 781.271.2790
> 
> 
> 
> On 10/16/12 6:15 PM, ""Jeremy Lakeman"" <Jeremy.Lakeman at gmail.com> wrote:
> 
"
847,Commotion-dev, Commotion download security,"Fri, 19 Oct 2012 17:05:43 -0400",-0400,Dan Staples,"I'd like to bring up the issue of how to best give users the ability to
verify the integrity and authenticity of Commotion binaries and source
code they download from the website.  Currently, our redmine provides
md5 checksums of our OpenWRT images.  Without even getting into the
weaknesses of the md5 algorithm (which may or may not be relevant here),
a checksum doesn't let the user verify that the image they download is
in fact authentic (e.g. in the case of a man-in-the-middle attack or a
compromised server).

The TAILS project provides the PGP signature of their ISO image on their
download page (https://tails.boum.org/download/index.en.html).  I like
this approach because the user is able to check both the integrity and
authenticity of their download.  What would folks think about using a
PGP signature instead or in addition to an md5 checksum?  Another ideas
is that we could instruct users to use web of trust and public key
servers to retrieve and verify the PGP signing key, instead of getting
it from our website.  Of course, this brings up the question of who
would own and manage the signing key for Commotion...

Finally, attached is a screenshot of a Downloads page for the Commotion
website I'm putting together.  Right now it just has OpenWRT, but
Android will also be added.  If anyone has suggestions for what else
should go on the page or what should be different, please let me know. 
Here (or maybe elsewhere?) we could also list the features that are in
development or planned, but aren't a part of the core Commotion
repositories (like OLSRd plugins), and there would be links out to these
sub-projects.

Dan Staples

-- 
Dan Staples
Program Associate, Open Technology Institute
New America Foundation

"
848,Commotion-dev, Commotion download security,"Fri, 19 Oct 2012 19:20:17 -0400",-0400,Hans-Christoph Steiner,"
This is a good idea for sure.  One thing would be to use SHA1 instead of MD5.
 Its only a little longer and still not cracked.  A PGP signature is good for
people who actually check these things.  For the PGP sig to be effective, the
downloads should be signed by a key that is signed by as many other keys as
possible so that people can find a chain of trust to that key.

For most people, they'll never check a hash or a signature.  One thing that is
not hard to setup and transparent to the user is to force HTTPS for the
downloads, and have a real, valid cert.

About the download page layout, I think that next to the binaries, there
should be the source code.  I don't think having olsrd plugins there would be
useful since as far as I know they are all distributed as part of olsrd
itself, and never outside of it.

.hc

On 10/19/2012 05:05 PM, Dan Staples wrote:
> I'd like to bring up the issue of how to best give users the ability to
> verify the integrity and authenticity of Commotion binaries and source
> code they download from the website.  Currently, our redmine provides
> md5 checksums of our OpenWRT images.  Without even getting into the
> weaknesses of the md5 algorithm (which may or may not be relevant here),
> a checksum doesn't let the user verify that the image they download is
> in fact authentic (e.g. in the case of a man-in-the-middle attack or a
> compromised server).
> 
> The TAILS project provides the PGP signature of their ISO image on their
> download page (https://tails.boum.org/download/index.en.html).  I like
> this approach because the user is able to check both the integrity and
> authenticity of their download.  What would folks think about using a
> PGP signature instead or in addition to an md5 checksum?  Another ideas
> is that we could instruct users to use web of trust and public key
> servers to retrieve and verify the PGP signing key, instead of getting
> it from our website.  Of course, this brings up the question of who
> would own and manage the signing key for Commotion...
> 
> Finally, attached is a screenshot of a Downloads page for the Commotion
> website I'm putting together.  Right now it just has OpenWRT, but
> Android will also be added.  If anyone has suggestions for what else
> should go on the page or what should be different, please let me know. 
> Here (or maybe elsewhere?) we could also list the features that are in
> development or planned, but aren't a part of the core Commotion
> repositories (like OLSRd plugins), and there would be links out to these
> sub-projects.
> 
> Dan Staples
> 
> 
> 
> _______________________________________________
> Commotion-dev mailing list
> Commotion-dev at lists.chambana.net
> http://lists.chambana.net/mailman/listinfo/commotion-dev
> 

"
849,Commotion-dev, Commotion download security,"Wed, 24 Oct 2012 11:40:37 -0400",-0400,Dan Staples,"Great, thanks for the feedback! As a quick note about checksums, I worry
that people who /would/ verify the checksum, they might leave it at that
and not check the PGP signature. Perhaps we should leave out a MD5/SHA1
checksum and just include a PGP signature, so that they would be pushed
to do a more secure verification...sort of as a way to encourage better
security practices.  Or would that just be counterproductive?

The website and downloads are all forced HTTPS, using a valid cert (at
least in my browser).

Dan

On Fri 19 Oct 2012 07:20:17 PM EDT, Hans-Christoph Steiner wrote:
>
>
> This is a good idea for sure. One thing would be to use SHA1 instead
> of MD5.
> Its only a little longer and still not cracked. A PGP signature is
> good for
> people who actually check these things. For the PGP sig to be
> effective, the
> downloads should be signed by a key that is signed by as many other
> keys as
> possible so that people can find a chain of trust to that key.
>
> For most people, they'll never check a hash or a signature. One thing
> that is
> not hard to setup and transparent to the user is to force HTTPS for the
> downloads, and have a real, valid cert.
>
> About the download page layout, I think that next to the binaries, there
> should be the source code. I don't think having olsrd plugins there
> would be
> useful since as far as I know they are all distributed as part of olsrd
> itself, and never outside of it.
>
> .hc
>
> On 10/19/2012 05:05 PM, Dan Staples wrote:
"
850,Commotion-dev, Commotion download security,"Wed, 24 Oct 2012 11:45:49 -0400",-0400,Josh King,"We can't really force anyone to do either one. I think we should 
provide both, so that someone who doesn't have gnupg setup will still 
be able to verify that they have an uncorrupted download.

On Wed 24 Oct 2012 11:40:37 AM EDT, Dan Staples wrote:
> Great, thanks for the feedback! As a quick note about checksums, I worry
> that people who /would/ verify the checksum, they might leave it at that
> and not check the PGP signature. Perhaps we should leave out a MD5/SHA1
> checksum and just include a PGP signature, so that they would be pushed
> to do a more secure verification...sort of as a way to encourage better
> security practices.  Or would that just be counterproductive?
>
> The website and downloads are all forced HTTPS, using a valid cert (at
> least in my browser).
>
> Dan
>
> On Fri 19 Oct 2012 07:20:17 PM EDT, Hans-Christoph Steiner wrote:
"
851,Commotion-dev, Commotion download security,"Wed, 24 Oct 2012 11:57:46 -0400",-0400,Hans-Christoph Steiner,"
Yeah, I agree. have both the hash and the pgp sig.

.hc

On 10/24/2012 11:45 AM, Josh King wrote:
> We can't really force anyone to do either one. I think we should 
> provide both, so that someone who doesn't have gnupg setup will still 
> be able to verify that they have an uncorrupted download.
> 
> On Wed 24 Oct 2012 11:40:37 AM EDT, Dan Staples wrote:
"
852,Commotion-dev, Commotion download security,"Wed, 24 Oct 2012 11:53:20 -0400",-0400,Benjamin Chodoroff,"On Wed 24 Oct 2012 11:45:49 AM EDT, Josh King wrote:
> We can't really force anyone to do either one. I think we should
> provide both, so that someone who doesn't have gnupg setup will still
> be able to verify that they have an uncorrupted download.


a recommendation for the release task list: publish checksums and sigs 
in more than one place, and link to these other sources in release 
announcements+download page - if someone can modify the tarball, they 
can probably also modify the checksum on the website :)

"
853,Commotion-dev, NetworKManager: the good news and the bad news,"Wed, 24 Oct 2012 17:47:24 -0400",-0400,Hans-Christoph Steiner,"The good news is that one of the main devs was already thinking about a full
on plugin system for networkmanager that will make it full possible to support
all known OLSR configs.  The bad news is it doesn't exist yet... and the only
existing plugin interface is the VPN plugins.  That VPN plugin API is
basically useless to us since it assumes the IP layer, i.e. the wifi, is
already configured, and therefore provides no way to configure the wifi.

Here's the IRC transcript from my discusion dcbw aka Dan Williams aka Mr
Network Manager on the NetworkManager room (irc://irc.freenode.net/nm


(03:52:10 PM) _hc: hey all, I'm working on making OLSR mesh networking really
easy to do, and currently I'm focused on NM integration.  I don't have access
to an OLPC, so I can't try that stuff in NM.  So I wanted to ask here to get
some ideas for the right approach for me to take
(03:52:46 PM) _hc: the way I currently envision it is that you could browse
thru all adhoc wifi, then try to connect using OLSR
(03:53:04 PM) _hc: we're working on ways to detech OLSR meshes better, but
that'll come later
(03:53:48 PM) _hc: so there would be a separate listing, list ""Wired
Networks"", ""Wireless Networks"", ""OLSR Networks""
(03:54:04 PM) dcbw: _hc: ideally we can find the OLSR networks via beacon IEs
(03:54:35 PM) dcbw: _hc: the OLPC stuff is quite OLPC specific and only works
with the mesh implementation done for those devices
(03:54:54 PM) dcbw: _hc: which means, basically, a specific SSID is used that
indicates that the adhoc SSID is part of the OLCP mesh
(03:54:55 PM) _hc: then the use just needs to click on one of the networks,
then entire a WPA password if needed, do IP inof, etc
15:55
(03:55:10 PM) _hc: right, I konw the OLPC mesh is incompatible
(03:55:23 PM) _hc: but I was looking at it for an example of nm integration
(03:55:53 PM) _hc: our plan is to try to work out a similar SSID encoding for
OLSR networks
(03:56:12 PM) dcbw: _hc: kinda evil, ideally it would be a beacon IE but with
adhoc that's somewhat tricky
(03:56:14 PM) _hc: dcbw: what's a beacon IE?
(03:56:19 PM) dcbw: _hc: any reason it can't be 802.11s?
(03:56:30 PM) _hc: isn't 802.11s limited to 32 nodes?
(03:56:35 PM) dcbw: _hc: an Information Element
(03:56:50 PM) _hc: we're aiming for meshes of hundreds and thousands
(03:56:52 PM) dcbw: a TLV broadcast in the beacon for a specific type of
information
(03:57:06 PM) _hc: there are a number of long standing big OLSR meshes like that
(03:57:13 PM) dcbw: which could be a way to identify the network independent
of SSID
(03:57:50 PM) dcbw: _hc: sounds a lot like what we were trying to do with OLPC
5 years ago
(03:58:03 PM) dcbw: which *kinda* worked, hopefully things have gotten better
with large meshes since then :)
(03:58:22 PM) _hc: yeah, figures, that stuff is coming later, right now we
just want a list of adhoc networks that the use can guess based on SSID
(03:58:43 PM) _hc: dcbw: do you know the funkfeuer, freifunk, and related
projects?
(03:58:58 PM) dcbw: _hc: so if there's a specific SSID that identifies the
OLSR network, why would we need a separate section?  or is the SSID supposed
to be configurable?
(03:59:51 PM) _hc: so you're saying the OLSR mesh would just show up under
""Wireless Networks"" and if it received the right beacon IP or TLV, it would be
configured for OLSR?
16:00
(04:00:27 PM) _hc: that would be very nice, too bad the ID work is not there
yet, that's led by someone else, not me
(04:00:27 PM) dcbw: not quite
(04:00:52 PM) dcbw: what I'm saying is that it would be really, really nice
from NM's point of view to know which scanned SSIDs were OLSR capable
(04:01:12 PM) dcbw: so that we can do something intelligent in the UI instead
of saying ""hey, this coiuld be OLSR, but it migth not be, so I guess you have
to try connecting and if it's not OLSR it'll fail""
(04:01:38 PM) _hc: one sure fire way is to connect to the olsrd's UDP port
(04:01:49 PM) dcbw: yeah, but then you ahve to already be associated with the
network
(04:01:52 PM) _hc: but that comes later in the process, it would need to
associate, get an ip etc.
(04:01:53 PM) dcbw: so that's not going to work
(04:02:05 PM) _hc: yes, its the ""better than nothing"" solution
(04:02:07 PM) dcbw: ok
(04:02:15 PM) dcbw: OLSR is a routing protocol really, right?
(04:02:28 PM) _hc: kind of
(04:02:32 PM) dcbw: and it just runs on top of wifi adhoc or master-mode
networking?
(04:02:40 PM) _hc: right, adhoc
(04:02:52 PM) dcbw: ok, so any adhoc network can theoretically run OLSR
(04:02:59 PM) _hc: so yeah, you can think of olsrd as a routing daemon since
the IP effect is to change the routing table
(04:03:02 PM) dcbw: even in parallel with regular local network IP
(04:03:12 PM) _hc: hmm kind of, not really
(04:03:19 PM) _hc: olsrd will change the routing table
(04:03:28 PM) dcbw: ok, so IP addressing is done how?
(04:03:29 PM) _hc: but it'll keep the default route, I suppose
(04:03:31 PM) dcbw: link-local?
(04:03:44 PM) _hc: no, random number in a pre-assigned range
(04:03:53 PM) dcbw: how are collisions handled?
(04:03:58 PM) _hc: luck
(04:04:00 PM) _hc: hehe
(04:04:03 PM) _hc: big range
(04:04:05 PM) dcbw: ummm..... :)
(04:04:13 PM) _hc: yeah... that's in the works
(04:04:26 PM) _hc: there are a number of approaches for that, ahcpd is one
(04:04:27 PM) dcbw: ok, so you attempt to join the adhoc network and then you
assign yourself a random number in say the 10.x or 172.16.x range?
(04:04:31 PM) _hc: right
(04:04:40 PM) dcbw: and then you start up OLSR and hope somebody else you can
talk to is running it?
(04:04:48 PM) _hc: yup
16:05
(04:05:22 PM) _hc: you can think of an OLSR mesh as defined by a BSSID and a
channel
(04:05:34 PM) _hc: the SSID and IP range are basically part of that too, but a
little bit optional
(04:06:20 PM) _hc: I guess I should say: OLSR mesh is BSSID, channel, and OLSR
conf
(04:06:37 PM) dcbw: ok, so the core UI question is how is the user supposed to
know to try OLSR on this network or not
(04:06:37 PM) _hc: since there are different approaches to sharing metic info
(04:06:53 PM) dcbw: and given that most  networks won't be OLSR, ideally we
don't ask ""enable OLSR?"" for everything you connect to
(04:06:54 PM) _hc: for sure
(04:07:00 PM) dcbw: which is why I was talking about beacon IEs
(04:07:11 PM) dcbw: that would be really, really nice to have :)
(04:07:17 PM) dcbw: since then it would be plug and play really
(04:07:23 PM) _hc: I'm unfamiliar with a beacon IE, how would I implement such
a thing?
(04:07:38 PM) dcbw: are you familiar with  how adhoc wifi works at a lower level?
(04:07:51 PM) dcbw: and BTW, you can't really depend on a specific BSSID
(04:08:01 PM) dcbw: with adhoc you can only depend on the SSID
(04:08:34 PM) dcbw: as drivers/firmware often have ""BSSID coalescing"" schemes
to all arrive at a given BSSID over time
(04:08:35 PM) _hc: we force the BSSID
(04:08:43 PM) dcbw: that doesn't work with all hardware
(04:08:47 PM) _hc: sad but true
(04:08:57 PM) dcbw: and there really isn't a good reason to do it
(04:09:28 PM) _hc: there are good reasons because that algo is fallable
(04:09:44 PM) _hc: well, for an established OLSR mesh, you know the BSSID, its
been there for years, or whatever
(04:09:59 PM) dcbw: oh, so it's a single global BSSID?
16:10
(04:10:07 PM) dcbw: or each mesh has it's own defined BSSID?
(04:10:09 PM) _hc: sometimes the autoselection choses the BSSID of another new
node that is also starting the process of getting on the mesh
(04:10:27 PM) _hc: then they happen mesh together, but ignore the big one that
they really should be talking to
(04:10:41 PM) _hc: each mesh has its own BSSID
(04:11:11 PM) _hc: in bigger meshes, there are parallel meshes for optimization
(04:11:34 PM) _hc: so a private, encrypted backhaul mesh in parallel with a
public, unencrypted one
(04:11:44 PM) _hc: those are separate BSSIDs etc
(04:12:10 PM) _hc: often split by 2.4 and 5.0 GHz, but that's not so relevant here
(04:13:23 PM) dcbw: _hc: so back to adhoc wifi
(04:13:32 PM) dcbw: _hc: with adhoc, stations take turns beaconing
(04:13:50 PM) dcbw: _hc: a beacon is just a packet in the air that advertises
the adhoc (or master-mode) network
(04:14:23 PM) dcbw: _hc: it has a few parts; one standard part whose format
never changes, and then a variable part composed of IEs, which are just TLVs
(Type Length Value)
(04:14:53 PM) _hc: so i know about beaconing in terms of advertising in wifi,
but I've never toyed with that stuff, just read about it, and been aware of it
16:15
(04:15:18 PM) _hc: ok, sounds promising
(04:15:18 PM) dcbw: ideally, OLSR would get a vendor ID assigned and then
could add an IE to the beacon so that anyone doing a scan could instantly know
it's an OLSR-capable network before they even tryto connect
(04:16:04 PM) _hc: getting a vendor ID sounds like a large, institutional process
(04:16:18 PM) dcbw: and there are only 256 of them :(
(04:16:30 PM) dcbw: there is a mechanism for extending though
(04:16:48 PM) _hc: is there a community wifi or hacker mesh vendor ID we can
share? :)
(04:17:01 PM) _hc: that's basically the devs of OLSR
(04:18:33 PM) jreznik_ left the room (quit: Read error: Operation timed out).
(04:19:51 PM) dcbw: _hc: does OLSR have an IEEE OUI?
16:20
(04:21:38 PM) _hc: my guess is no, but let me look
(04:22:16 PM) dcbw: there's a vendor-specific IE, which is defined to be
whatever you want, but you need an IEEE OUI first
(04:22:36 PM) _hc: fyi, I don't think OLSR is incorporated itself, its just
the name of a IETF protocol with one main implementation: olsrd http://olsr.org
(04:22:42 PM) _hc: there are a bunch of orgs involved
(04:22:48 PM) _hc: and some military contractors
(04:23:31 PM) dcbw: might make sense to get one so this specific issue can be
made smoother for users, otherwise this sort of thing never gets better...
(04:23:52 PM) dcbw: at least on Linux it seems fairly easy to send the beacon
template that could include the OLSR IE
(04:24:05 PM) dcbw: in any case, that's the future (ideally)
(04:24:31 PM) dcbw: then everything can be automatic
16:25
(04:25:00 PM) dcbw: for OLPC we just used link-local iPv4 addresses
(04:25:38 PM) dcbw: of which there are 64k
(04:26:33 PM) _hc: does the OLPC mesh route to the internet too?
(04:27:06 PM) dcbw: yes, through mesh portals
(04:27:35 PM) dcbw: but the point of all that is, non-802.11s OLPC meshing has
a known SSID so when connecting we know exactly what to do
(04:27:42 PM) _hc: so its a minor abuse of the link-local addresses to connect
them to the internet, no?
(04:27:44 PM) dcbw: which isn't the case for OLSR
(04:27:58 PM) dcbw: _hc: at least when I was working on that stuff, the portal
NAT-ed everyone to the internet
(04:28:40 PM) dcbw: so for OLSR, the core problem is that you don't know it's
OLSR until after you've connected, which isn't a great user experience because
you need to know it's OLSR so you don't try DHCP or something by default
(04:29:12 PM) _hc: right
(04:29:29 PM) dcbw: at the moment it's looking more like this is more a L3+
issue than anything wifi related
(04:29:38 PM) _hc: then either olsrd will already be running, or nm needs to
trigger it to start
16:30
(04:30:01 PM) _hc: if olsrd is running, it'll see the change in the net if,
and respond by broadcasting to find other nodes
(04:30:25 PM) dcbw: can also be  done through dispatcher scripts, assuming
olsrd has some sane control interface
(04:30:39 PM) dcbw: and doesn't need to be restarted on every network change
(04:30:43 PM) _hc: I can write a sane control interface :)
(04:30:47 PM) _hc: it probably doesn't exist
(04:31:09 PM) dcbw: there are 3 core problems I see here:
(04:31:28 PM) dcbw: 1) how we're supposed to know that the network is running
OLSR so we can do (2) and (3)
(04:31:50 PM) dcbw: 2) after associating, we need a specific IP configuration
method when using OLSR
(04:31:57 PM) dcbw: 3) something needs to kick olsrd
(04:32:10 PM) dcbw: if (1) gets solved, then (2) and (3) are easy
(04:32:32 PM) dcbw: but (1) has to get solved in a way that doesn't
necessarily require more checkboxes every time you connect to an adhoc network
(04:32:57 PM) dcbw: and ideally also doesn't require editing a config file
somewhere, since that's pretty much the opposite of easy to use
(04:32:58 PM) jheretic [~jheretic at 64.124.162.98] entered the room.
(04:33:18 PM) dcbw: which is why the beacon IE is a nice solution
(04:33:45 PM) _hc: dcbw: so what about this approach: we make it easy to have
pre-configured meshes, then if the BSSID and channel match, it'll do its OLSR
thing
(04:33:50 PM) _hc: so its a manual approach to #1
(04:34:01 PM) _hc: but once in place will provide full auto-detect
(04:34:50 PM) _hc: it would also hopefully mean that once people figure out
how to do good full auto detect of OLSR meshes, the nm code wouldn't have to
change much
(04:34:55 PM) _hc: since 2 and 3 would be the same
16:35
(04:35:18 PM) dcbw: if you're going the preconfigured route, then this gets
easier since you can just tell NM that it's OLSR instead of doing BSSID and
channel matching
(04:35:32 PM) dcbw: as in olsr=true or whatever for the network config
(04:35:58 PM) dcbw: _hc: then it's pretty easy
(04:36:12 PM) dcbw: _hc: NM has a 'dispatcher' functionality that calls
scripts in /etc/NetworkManager/dispatcher.d
(04:36:21 PM) dcbw: and it passes a lot of information in the environment
(04:36:30 PM) _hc: I mean that a user could download  a package of OLSR
configs that plug into NM
(04:36:32 PM) dcbw: which could potentially include OLSR=true or whatever
(04:36:51 PM) dcbw: hmm, potentially
(04:36:52 PM) _hc: then when NM sees an adhoc net that matches the profile,
it'll automatically set it up as an OLSR mesh
(04:38:10 PM) dcbw: is the IP addressing scheme well-defined?
(04:38:14 PM) dcbw: or is it site-specific
(04:38:29 PM) _hc: can this dispatcher mode pre-screen things? like I click on
""commotionwireless.net"" in the Wireless Networking list, then some code
somewhere check it, and says ""this is OLSR, config it as such"", then it skips
the normal wiif config?
(04:38:41 PM) _hc: its mesh-specific, that would be part of the profile
(04:38:42 PM) dcbw: not at this time, no
(04:39:08 PM) dcbw: so what all is part of the profile?
(04:39:29 PM) _hc: SSID, BSSID, channel, ip-scheme, olsrd.config
16:40
(04:40:05 PM) dcbw: and what are the IP schemes?
(04:40:31 PM) dcbw: (as in, what specifically is the addressing randomization
algorithm, and what ranges of IP does ""ip-scheme"" allow?)
(04:41:53 PM) _hc: since the meshes are all run by various groups, they range
from static IPs to random within a range, a range with last bytes of MAC,
ahcpd, etc
(04:43:35 PM) _hc: it seems to me that NM only needs to know about BSSID and
channel, then the olsr logic would handle the rest
(04:44:03 PM) _hc: I mean in terms of marking an ahdoc  as an OLSR mesh
(04:44:38 PM) dcbw: well, NM handles the IP configuration on the interface too
(04:44:45 PM) dcbw: and stuff like DNS
(04:44:55 PM) dcbw: so NM would be doing the actual IP configuration, more orless
16:45
(04:45:09 PM) _hc: ok
(04:45:14 PM) _hc: makes sense
(04:45:25 PM) dcbw: btw where does the station get DNS servers from?
(04:45:39 PM) _hc: that's also part of the mesh config
(04:45:58 PM) dcbw: so they're static?
(04:45:59 PM) _hc: some are static, some use advertisments on the mesh
(04:46:03 PM) dcbw: ah
(04:47:06 PM) _hc: would it be possible to make dhclient kind of scripts that
NM delegates to?
(04:47:41 PM) dcbw: not in the way you're thinking, but having more hooks into
the mechanisms is an enhancement goal
(04:48:22 PM) _hc: so with NM, is dhclient the only mechanism for using some
external thing to config IP and DNS?
(04:48:51 PM) dcbw: _hc: or avahi-autoip, or IPv6 router advertisements, or
static configuration
(04:48:57 PM) dcbw: _hc: or PPP
(04:49:00 PM) dcbw: _hc: or VPNs
(04:49:39 PM) _hc: so it seems that OLSR meshes with specific needs could make
a kind of avahi-autoip as part of the config
16:50
(04:50:06 PM) dcbw: yeah, that would be the idea, though we'd want to do this
more formally in NM
(04:50:18 PM) dcbw: well, with a more formal modular structure
(04:50:57 PM) dcbw: quite a few things want something like this
(04:50:59 PM) _hc: is there way in NM to have it ask something external for
the IP/DNS info, then it handle the actual setting of the interface, etc?
(04:51:03 PM) _hc: is that waht you mean?
(04:51:23 PM) _hc: that would be very nice for the OLSR mesh stuff, then the
IP config could be represented in a little script
(04:51:33 PM) _hc: that generates the numbers
(04:51:34 PM) dcbw: _hc: that's exactly how dhcp, autoip, ipv6, ppp, and vpn
already work, just that they're more or less hardcoded into NM
(04:51:43 PM) _hc: ah, I see
(04:51:49 PM) dcbw: _hc: you'd want more than a ""little script""
(04:52:06 PM) dcbw: since that ""plugin"" if you will would also be responsible
for getting DNS, possibly from advertisements
(04:52:16 PM) dcbw: and thus would need to listen for them
(04:53:16 PM) _hc: so any suggestions on where I should start on this?  do you
think it'll only be possible with modifications on NM itself, or would any
kind of ""plugin"" be an option?
(04:53:33 PM) _hc: I looked at the VPN Plugins, they seem to tied to the idea
of a VPN
(04:54:02 PM) _hc: but if the VPN plugins can handle the BSSID/channel stuff,
it might be one way to get started
(04:54:22 PM) dcbw: _hc: vpns have to layer on top of existing hardware
connections so they wouldn't really be suitable
(04:54:29 PM) dcbw: _hc: we'd want the best way of fixing it :)  which would
mean plugins, really
(04:54:38 PM) dcbw: which needs some architecting thought
16:55
(04:55:01 PM) dcbw: since you'd want the ability for plugins at different
levels of the process, and the ability to pass information back and forth
(04:55:09 PM) jheretic left the room (quit: Ping timeout: 244 seconds).
(04:56:09 PM) _hc: I've been employed to work on this stuff, so I'm happy to
dig in wherever you think is helpful
(04:56:19 PM) dcbw: _hc: and that would be excellent
(04:56:34 PM) _hc: in case you are interested, I'm working as part of this;
https://commotionwireless.net/
(04:56:55 PM) dcbw: cool
(04:57:03 PM) _hc: the only rub is that my wife is due anyday so I'm going to
disappear for 6ish weeks once the baby comes :-D
(04:57:10 PM) dcbw: heh :)
(04:57:17 PM) dcbw: congratulations
(04:57:18 PM) _hc: perfect time to start a new project ;)
(04:57:19 PM) _hc: thanks
(04:57:31 PM) dcbw: any day you'll be starting a new project :)
(04:57:41 PM) dcbw: one that will last a looooooong time
(04:57:48 PM) _hc: hehe, I have one already, so its just adding to the
maelstrom :)
(04:58:28 PM) _hc: by the way, some of the pauses in this convo were from my
15 month old son insisting on turning my monitor on and off
(04:58:48 PM) _hc: he's little so he can sneak up
(04:58:52 PM) dcbw: _hc: so lets stop thinking about OLSR specifically and
starting thinking more generally about how to make it work the best way that
OLSR can also integrate with
(04:59:11 PM) _hc: ok, sounds good
17:00
(05:00:23 PM) dcbw: _hc: first is to define that generic plugin interface
including how plugins register themselves for certain hooks, how plugins can
attach information to the interface activation process (ie, connecting) and at
what points they get asked to do things
(05:01:27 PM) dcbw: it might be as simple as passing the NMConnection to each
plugin at each step and asking if the plugin wants to do something
(05:01:36 PM) dcbw: which is basically how it works internally
(05:01:45 PM) dcbw: internally there are 5 steps
(05:01:57 PM) _hc: ok, fyi, I'm a long time NM user, and have done a little NM
scripting with dbus, but the dev is new to me.  but I've been doing C for 10+
years, and was a network manager before that, so I'm not starting from nothing ;)
(05:02:16 PM) dcbw: good to hear :)
(05:03:04 PM) _hc: I'll see if I can check out the code in parallel
(05:03:05 PM) dcbw: each step can return SUCCESS (everything already done,
like static IP where we just set the IP address and return), POSTPONE (ie dhcp
where we need to start dhcp and then wait for the answer to come back maybe 30
seconds later) and FAILURE (something went wrong, fail the interface)
(05:03:32 PM) dcbw: we also have some things that are really global plugins,
like for DNS handling
(05:03:37 PM) _hc: what if the plugin doesn't want to do anything?
(05:04:10 PM) _hc: like for the OLSR plugin: ""is this adhoc? no, then
nevermind...""
(05:04:23 PM) dcbw: _hc: that's just the general way things work right now;
we'd want a more formalized mechanism for the plugin interface itself
(05:04:30 PM) dcbw: but it's a fairly good mapping so far
17:05
(05:05:06 PM) dcbw: eventually we'd turn some of the internal stuff into
plugins as well
(05:05:39 PM) dcbw: like the avahi-autoipd IPv4 stuff is a great candidate
(05:05:53 PM) _hc: ok, so this is something already in the works?
(05:06:01 PM) dcbw: no, just been thinking about this for a while
(05:06:15 PM) dcbw: and how to best make it happen
(05:06:26 PM) dcbw: with minimal disruption

"
854,Commotion-dev, NetworKManager: the good news and the bad news,"Wed, 24 Oct 2012 18:02:37 -0500",-0500,Ben West,"For background, this is the NetworkManager tool provided with GNOME
UI's, et al, on most popular Linux distros, including Debian and
Ubuntu, correct?

http://blogs.gnome.org/dcbw/

On Wed, Oct 24, 2012 at 4:47 PM, Hans-Christoph Steiner
<hans at guardianproject.info> wrote:
> The good news is that one of the main devs was already thinking about a full
> on plugin system for networkmanager that will make it full possible to support
> all known OLSR configs.  The bad news is it doesn't exist yet... and the only
> existing plugin interface is the VPN plugins.  That VPN plugin API is
> basically useless to us since it assumes the IP layer, i.e. the wifi, is
> already configured, and therefore provides no way to configure the wifi.
>
> Here's the IRC transcript from my discusion dcbw aka Dan Williams aka Mr
> Network Manager on the NetworkManager room (irc://irc.freenode.net/nm
>
>
> (03:52:10 PM) _hc: hey all, I'm working on making OLSR mesh networking really
> easy to do, and currently I'm focused on NM integration.  I don't have access
> to an OLPC, so I can't try that stuff in NM.  So I wanted to ask here to get
> some ideas for the right approach for me to take
> (03:52:46 PM) _hc: the way I currently envision it is that you could browse
> thru all adhoc wifi, then try to connect using OLSR
> (03:53:04 PM) _hc: we're working on ways to detech OLSR meshes better, but
> that'll come later
> (03:53:48 PM) _hc: so there would be a separate listing, list ""Wired
> Networks"", ""Wireless Networks"", ""OLSR Networks""
> (03:54:04 PM) dcbw: _hc: ideally we can find the OLSR networks via beacon IEs
> (03:54:35 PM) dcbw: _hc: the OLPC stuff is quite OLPC specific and only works
> with the mesh implementation done for those devices
> (03:54:54 PM) dcbw: _hc: which means, basically, a specific SSID is used that
> indicates that the adhoc SSID is part of the OLCP mesh
> (03:54:55 PM) _hc: then the use just needs to click on one of the networks,
> then entire a WPA password if needed, do IP inof, etc
> 15:55
> (03:55:10 PM) _hc: right, I konw the OLPC mesh is incompatible
> (03:55:23 PM) _hc: but I was looking at it for an example of nm integration
> (03:55:53 PM) _hc: our plan is to try to work out a similar SSID encoding for
> OLSR networks
> (03:56:12 PM) dcbw: _hc: kinda evil, ideally it would be a beacon IE but with
> adhoc that's somewhat tricky
> (03:56:14 PM) _hc: dcbw: what's a beacon IE?
> (03:56:19 PM) dcbw: _hc: any reason it can't be 802.11s?
> (03:56:30 PM) _hc: isn't 802.11s limited to 32 nodes?
> (03:56:35 PM) dcbw: _hc: an Information Element
> (03:56:50 PM) _hc: we're aiming for meshes of hundreds and thousands
> (03:56:52 PM) dcbw: a TLV broadcast in the beacon for a specific type of
> information
> (03:57:06 PM) _hc: there are a number of long standing big OLSR meshes like that
> (03:57:13 PM) dcbw: which could be a way to identify the network independent
> of SSID
> (03:57:50 PM) dcbw: _hc: sounds a lot like what we were trying to do with OLPC
> 5 years ago
> (03:58:03 PM) dcbw: which *kinda* worked, hopefully things have gotten better
> with large meshes since then :)
> (03:58:22 PM) _hc: yeah, figures, that stuff is coming later, right now we
> just want a list of adhoc networks that the use can guess based on SSID
> (03:58:43 PM) _hc: dcbw: do you know the funkfeuer, freifunk, and related
> projects?
> (03:58:58 PM) dcbw: _hc: so if there's a specific SSID that identifies the
> OLSR network, why would we need a separate section?  or is the SSID supposed
> to be configurable?
> (03:59:51 PM) _hc: so you're saying the OLSR mesh would just show up under
> ""Wireless Networks"" and if it received the right beacon IP or TLV, it would be
> configured for OLSR?
> 16:00
> (04:00:27 PM) _hc: that would be very nice, too bad the ID work is not there
> yet, that's led by someone else, not me
> (04:00:27 PM) dcbw: not quite
> (04:00:52 PM) dcbw: what I'm saying is that it would be really, really nice
> from NM's point of view to know which scanned SSIDs were OLSR capable
> (04:01:12 PM) dcbw: so that we can do something intelligent in the UI instead
> of saying ""hey, this coiuld be OLSR, but it migth not be, so I guess you have
> to try connecting and if it's not OLSR it'll fail""
> (04:01:38 PM) _hc: one sure fire way is to connect to the olsrd's UDP port
> (04:01:49 PM) dcbw: yeah, but then you ahve to already be associated with the
> network
> (04:01:52 PM) _hc: but that comes later in the process, it would need to
> associate, get an ip etc.
> (04:01:53 PM) dcbw: so that's not going to work
> (04:02:05 PM) _hc: yes, its the ""better than nothing"" solution
> (04:02:07 PM) dcbw: ok
> (04:02:15 PM) dcbw: OLSR is a routing protocol really, right?
> (04:02:28 PM) _hc: kind of
> (04:02:32 PM) dcbw: and it just runs on top of wifi adhoc or master-mode
> networking?
> (04:02:40 PM) _hc: right, adhoc
> (04:02:52 PM) dcbw: ok, so any adhoc network can theoretically run OLSR
> (04:02:59 PM) _hc: so yeah, you can think of olsrd as a routing daemon since
> the IP effect is to change the routing table
> (04:03:02 PM) dcbw: even in parallel with regular local network IP
> (04:03:12 PM) _hc: hmm kind of, not really
> (04:03:19 PM) _hc: olsrd will change the routing table
> (04:03:28 PM) dcbw: ok, so IP addressing is done how?
> (04:03:29 PM) _hc: but it'll keep the default route, I suppose
> (04:03:31 PM) dcbw: link-local?
> (04:03:44 PM) _hc: no, random number in a pre-assigned range
> (04:03:53 PM) dcbw: how are collisions handled?
> (04:03:58 PM) _hc: luck
> (04:04:00 PM) _hc: hehe
> (04:04:03 PM) _hc: big range
> (04:04:05 PM) dcbw: ummm..... :)
> (04:04:13 PM) _hc: yeah... that's in the works
> (04:04:26 PM) _hc: there are a number of approaches for that, ahcpd is one
> (04:04:27 PM) dcbw: ok, so you attempt to join the adhoc network and then you
> assign yourself a random number in say the 10.x or 172.16.x range?
> (04:04:31 PM) _hc: right
> (04:04:40 PM) dcbw: and then you start up OLSR and hope somebody else you can
> talk to is running it?
> (04:04:48 PM) _hc: yup
> 16:05
> (04:05:22 PM) _hc: you can think of an OLSR mesh as defined by a BSSID and a
> channel
> (04:05:34 PM) _hc: the SSID and IP range are basically part of that too, but a
> little bit optional
> (04:06:20 PM) _hc: I guess I should say: OLSR mesh is BSSID, channel, and OLSR
> conf
> (04:06:37 PM) dcbw: ok, so the core UI question is how is the user supposed to
> know to try OLSR on this network or not
> (04:06:37 PM) _hc: since there are different approaches to sharing metic info
> (04:06:53 PM) dcbw: and given that most  networks won't be OLSR, ideally we
> don't ask ""enable OLSR?"" for everything you connect to
> (04:06:54 PM) _hc: for sure
> (04:07:00 PM) dcbw: which is why I was talking about beacon IEs
> (04:07:11 PM) dcbw: that would be really, really nice to have :)
> (04:07:17 PM) dcbw: since then it would be plug and play really
> (04:07:23 PM) _hc: I'm unfamiliar with a beacon IE, how would I implement such
> a thing?
> (04:07:38 PM) dcbw: are you familiar with  how adhoc wifi works at a lower level?
> (04:07:51 PM) dcbw: and BTW, you can't really depend on a specific BSSID
> (04:08:01 PM) dcbw: with adhoc you can only depend on the SSID
> (04:08:34 PM) dcbw: as drivers/firmware often have ""BSSID coalescing"" schemes
> to all arrive at a given BSSID over time
> (04:08:35 PM) _hc: we force the BSSID
> (04:08:43 PM) dcbw: that doesn't work with all hardware
> (04:08:47 PM) _hc: sad but true
> (04:08:57 PM) dcbw: and there really isn't a good reason to do it
> (04:09:28 PM) _hc: there are good reasons because that algo is fallable
> (04:09:44 PM) _hc: well, for an established OLSR mesh, you know the BSSID, its
> been there for years, or whatever
> (04:09:59 PM) dcbw: oh, so it's a single global BSSID?
> 16:10
> (04:10:07 PM) dcbw: or each mesh has it's own defined BSSID?
> (04:10:09 PM) _hc: sometimes the autoselection choses the BSSID of another new
> node that is also starting the process of getting on the mesh
> (04:10:27 PM) _hc: then they happen mesh together, but ignore the big one that
> they really should be talking to
> (04:10:41 PM) _hc: each mesh has its own BSSID
> (04:11:11 PM) _hc: in bigger meshes, there are parallel meshes for optimization
> (04:11:34 PM) _hc: so a private, encrypted backhaul mesh in parallel with a
> public, unencrypted one
> (04:11:44 PM) _hc: those are separate BSSIDs etc
> (04:12:10 PM) _hc: often split by 2.4 and 5.0 GHz, but that's not so relevant here
> (04:13:23 PM) dcbw: _hc: so back to adhoc wifi
> (04:13:32 PM) dcbw: _hc: with adhoc, stations take turns beaconing
> (04:13:50 PM) dcbw: _hc: a beacon is just a packet in the air that advertises
> the adhoc (or master-mode) network
> (04:14:23 PM) dcbw: _hc: it has a few parts; one standard part whose format
> never changes, and then a variable part composed of IEs, which are just TLVs
> (Type Length Value)
> (04:14:53 PM) _hc: so i know about beaconing in terms of advertising in wifi,
> but I've never toyed with that stuff, just read about it, and been aware of it
> 16:15
> (04:15:18 PM) _hc: ok, sounds promising
> (04:15:18 PM) dcbw: ideally, OLSR would get a vendor ID assigned and then
> could add an IE to the beacon so that anyone doing a scan could instantly know
> it's an OLSR-capable network before they even tryto connect
> (04:16:04 PM) _hc: getting a vendor ID sounds like a large, institutional process
> (04:16:18 PM) dcbw: and there are only 256 of them :(
> (04:16:30 PM) dcbw: there is a mechanism for extending though
> (04:16:48 PM) _hc: is there a community wifi or hacker mesh vendor ID we can
> share? :)
> (04:17:01 PM) _hc: that's basically the devs of OLSR
> (04:18:33 PM) jreznik_ left the room (quit: Read error: Operation timed out).
> (04:19:51 PM) dcbw: _hc: does OLSR have an IEEE OUI?
> 16:20
> (04:21:38 PM) _hc: my guess is no, but let me look
> (04:22:16 PM) dcbw: there's a vendor-specific IE, which is defined to be
> whatever you want, but you need an IEEE OUI first
> (04:22:36 PM) _hc: fyi, I don't think OLSR is incorporated itself, its just
> the name of a IETF protocol with one main implementation: olsrd http://olsr.org
> (04:22:42 PM) _hc: there are a bunch of orgs involved
> (04:22:48 PM) _hc: and some military contractors
> (04:23:31 PM) dcbw: might make sense to get one so this specific issue can be
> made smoother for users, otherwise this sort of thing never gets better...
> (04:23:52 PM) dcbw: at least on Linux it seems fairly easy to send the beacon
> template that could include the OLSR IE
> (04:24:05 PM) dcbw: in any case, that's the future (ideally)
> (04:24:31 PM) dcbw: then everything can be automatic
> 16:25
> (04:25:00 PM) dcbw: for OLPC we just used link-local iPv4 addresses
> (04:25:38 PM) dcbw: of which there are 64k
> (04:26:33 PM) _hc: does the OLPC mesh route to the internet too?
> (04:27:06 PM) dcbw: yes, through mesh portals
> (04:27:35 PM) dcbw: but the point of all that is, non-802.11s OLPC meshing has
> a known SSID so when connecting we know exactly what to do
> (04:27:42 PM) _hc: so its a minor abuse of the link-local addresses to connect
> them to the internet, no?
> (04:27:44 PM) dcbw: which isn't the case for OLSR
> (04:27:58 PM) dcbw: _hc: at least when I was working on that stuff, the portal
> NAT-ed everyone to the internet
> (04:28:40 PM) dcbw: so for OLSR, the core problem is that you don't know it's
> OLSR until after you've connected, which isn't a great user experience because
> you need to know it's OLSR so you don't try DHCP or something by default
> (04:29:12 PM) _hc: right
> (04:29:29 PM) dcbw: at the moment it's looking more like this is more a L3+
> issue than anything wifi related
> (04:29:38 PM) _hc: then either olsrd will already be running, or nm needs to
> trigger it to start
> 16:30
> (04:30:01 PM) _hc: if olsrd is running, it'll see the change in the net if,
> and respond by broadcasting to find other nodes
> (04:30:25 PM) dcbw: can also be  done through dispatcher scripts, assuming
> olsrd has some sane control interface
> (04:30:39 PM) dcbw: and doesn't need to be restarted on every network change
> (04:30:43 PM) _hc: I can write a sane control interface :)
> (04:30:47 PM) _hc: it probably doesn't exist
> (04:31:09 PM) dcbw: there are 3 core problems I see here:
> (04:31:28 PM) dcbw: 1) how we're supposed to know that the network is running
> OLSR so we can do (2) and (3)
> (04:31:50 PM) dcbw: 2) after associating, we need a specific IP configuration
> method when using OLSR
> (04:31:57 PM) dcbw: 3) something needs to kick olsrd
> (04:32:10 PM) dcbw: if (1) gets solved, then (2) and (3) are easy
> (04:32:32 PM) dcbw: but (1) has to get solved in a way that doesn't
> necessarily require more checkboxes every time you connect to an adhoc network
> (04:32:57 PM) dcbw: and ideally also doesn't require editing a config file
> somewhere, since that's pretty much the opposite of easy to use
> (04:32:58 PM) jheretic [~jheretic at 64.124.162.98] entered the room.
> (04:33:18 PM) dcbw: which is why the beacon IE is a nice solution
> (04:33:45 PM) _hc: dcbw: so what about this approach: we make it easy to have
> pre-configured meshes, then if the BSSID and channel match, it'll do its OLSR
> thing
> (04:33:50 PM) _hc: so its a manual approach to #1
> (04:34:01 PM) _hc: but once in place will provide full auto-detect
> (04:34:50 PM) _hc: it would also hopefully mean that once people figure out
> how to do good full auto detect of OLSR meshes, the nm code wouldn't have to
> change much
> (04:34:55 PM) _hc: since 2 and 3 would be the same
> 16:35
> (04:35:18 PM) dcbw: if you're going the preconfigured route, then this gets
> easier since you can just tell NM that it's OLSR instead of doing BSSID and
> channel matching
> (04:35:32 PM) dcbw: as in olsr=true or whatever for the network config
> (04:35:58 PM) dcbw: _hc: then it's pretty easy
> (04:36:12 PM) dcbw: _hc: NM has a 'dispatcher' functionality that calls
> scripts in /etc/NetworkManager/dispatcher.d
> (04:36:21 PM) dcbw: and it passes a lot of information in the environment
> (04:36:30 PM) _hc: I mean that a user could download  a package of OLSR
> configs that plug into NM
> (04:36:32 PM) dcbw: which could potentially include OLSR=true or whatever
> (04:36:51 PM) dcbw: hmm, potentially
> (04:36:52 PM) _hc: then when NM sees an adhoc net that matches the profile,
> it'll automatically set it up as an OLSR mesh
> (04:38:10 PM) dcbw: is the IP addressing scheme well-defined?
> (04:38:14 PM) dcbw: or is it site-specific
> (04:38:29 PM) _hc: can this dispatcher mode pre-screen things? like I click on
> ""commotionwireless.net"" in the Wireless Networking list, then some code
> somewhere check it, and says ""this is OLSR, config it as such"", then it skips
> the normal wiif config?
> (04:38:41 PM) _hc: its mesh-specific, that would be part of the profile
> (04:38:42 PM) dcbw: not at this time, no
> (04:39:08 PM) dcbw: so what all is part of the profile?
> (04:39:29 PM) _hc: SSID, BSSID, channel, ip-scheme, olsrd.config
> 16:40
> (04:40:05 PM) dcbw: and what are the IP schemes?
> (04:40:31 PM) dcbw: (as in, what specifically is the addressing randomization
> algorithm, and what ranges of IP does ""ip-scheme"" allow?)
> (04:41:53 PM) _hc: since the meshes are all run by various groups, they range
> from static IPs to random within a range, a range with last bytes of MAC,
> ahcpd, etc
> (04:43:35 PM) _hc: it seems to me that NM only needs to know about BSSID and
> channel, then the olsr logic would handle the rest
> (04:44:03 PM) _hc: I mean in terms of marking an ahdoc  as an OLSR mesh
> (04:44:38 PM) dcbw: well, NM handles the IP configuration on the interface too
> (04:44:45 PM) dcbw: and stuff like DNS
> (04:44:55 PM) dcbw: so NM would be doing the actual IP configuration, more orless
> 16:45
> (04:45:09 PM) _hc: ok
> (04:45:14 PM) _hc: makes sense
> (04:45:25 PM) dcbw: btw where does the station get DNS servers from?
> (04:45:39 PM) _hc: that's also part of the mesh config
> (04:45:58 PM) dcbw: so they're static?
> (04:45:59 PM) _hc: some are static, some use advertisments on the mesh
> (04:46:03 PM) dcbw: ah
> (04:47:06 PM) _hc: would it be possible to make dhclient kind of scripts that
> NM delegates to?
> (04:47:41 PM) dcbw: not in the way you're thinking, but having more hooks into
> the mechanisms is an enhancement goal
> (04:48:22 PM) _hc: so with NM, is dhclient the only mechanism for using some
> external thing to config IP and DNS?
> (04:48:51 PM) dcbw: _hc: or avahi-autoip, or IPv6 router advertisements, or
> static configuration
> (04:48:57 PM) dcbw: _hc: or PPP
> (04:49:00 PM) dcbw: _hc: or VPNs
> (04:49:39 PM) _hc: so it seems that OLSR meshes with specific needs could make
> a kind of avahi-autoip as part of the config
> 16:50
> (04:50:06 PM) dcbw: yeah, that would be the idea, though we'd want to do this
> more formally in NM
> (04:50:18 PM) dcbw: well, with a more formal modular structure
> (04:50:57 PM) dcbw: quite a few things want something like this
> (04:50:59 PM) _hc: is there way in NM to have it ask something external for
> the IP/DNS info, then it handle the actual setting of the interface, etc?
> (04:51:03 PM) _hc: is that waht you mean?
> (04:51:23 PM) _hc: that would be very nice for the OLSR mesh stuff, then the
> IP config could be represented in a little script
> (04:51:33 PM) _hc: that generates the numbers
> (04:51:34 PM) dcbw: _hc: that's exactly how dhcp, autoip, ipv6, ppp, and vpn
> already work, just that they're more or less hardcoded into NM
> (04:51:43 PM) _hc: ah, I see
> (04:51:49 PM) dcbw: _hc: you'd want more than a ""little script""
> (04:52:06 PM) dcbw: since that ""plugin"" if you will would also be responsible
> for getting DNS, possibly from advertisements
> (04:52:16 PM) dcbw: and thus would need to listen for them
> (04:53:16 PM) _hc: so any suggestions on where I should start on this?  do you
> think it'll only be possible with modifications on NM itself, or would any
> kind of ""plugin"" be an option?
> (04:53:33 PM) _hc: I looked at the VPN Plugins, they seem to tied to the idea
> of a VPN
> (04:54:02 PM) _hc: but if the VPN plugins can handle the BSSID/channel stuff,
> it might be one way to get started
> (04:54:22 PM) dcbw: _hc: vpns have to layer on top of existing hardware
> connections so they wouldn't really be suitable
> (04:54:29 PM) dcbw: _hc: we'd want the best way of fixing it :)  which would
> mean plugins, really
> (04:54:38 PM) dcbw: which needs some architecting thought
> 16:55
> (04:55:01 PM) dcbw: since you'd want the ability for plugins at different
> levels of the process, and the ability to pass information back and forth
> (04:55:09 PM) jheretic left the room (quit: Ping timeout: 244 seconds).
> (04:56:09 PM) _hc: I've been employed to work on this stuff, so I'm happy to
> dig in wherever you think is helpful
> (04:56:19 PM) dcbw: _hc: and that would be excellent
> (04:56:34 PM) _hc: in case you are interested, I'm working as part of this;
> https://commotionwireless.net/
> (04:56:55 PM) dcbw: cool
> (04:57:03 PM) _hc: the only rub is that my wife is due anyday so I'm going to
> disappear for 6ish weeks once the baby comes :-D
> (04:57:10 PM) dcbw: heh :)
> (04:57:17 PM) dcbw: congratulations
> (04:57:18 PM) _hc: perfect time to start a new project ;)
> (04:57:19 PM) _hc: thanks
> (04:57:31 PM) dcbw: any day you'll be starting a new project :)
> (04:57:41 PM) dcbw: one that will last a looooooong time
> (04:57:48 PM) _hc: hehe, I have one already, so its just adding to the
> maelstrom :)
> (04:58:28 PM) _hc: by the way, some of the pauses in this convo were from my
> 15 month old son insisting on turning my monitor on and off
> (04:58:48 PM) _hc: he's little so he can sneak up
> (04:58:52 PM) dcbw: _hc: so lets stop thinking about OLSR specifically and
> starting thinking more generally about how to make it work the best way that
> OLSR can also integrate with
> (04:59:11 PM) _hc: ok, sounds good
> 17:00
> (05:00:23 PM) dcbw: _hc: first is to define that generic plugin interface
> including how plugins register themselves for certain hooks, how plugins can
> attach information to the interface activation process (ie, connecting) and at
> what points they get asked to do things
> (05:01:27 PM) dcbw: it might be as simple as passing the NMConnection to each
> plugin at each step and asking if the plugin wants to do something
> (05:01:36 PM) dcbw: which is basically how it works internally
> (05:01:45 PM) dcbw: internally there are 5 steps
> (05:01:57 PM) _hc: ok, fyi, I'm a long time NM user, and have done a little NM
> scripting with dbus, but the dev is new to me.  but I've been doing C for 10+
> years, and was a network manager before that, so I'm not starting from nothing ;)
> (05:02:16 PM) dcbw: good to hear :)
> (05:03:04 PM) _hc: I'll see if I can check out the code in parallel
> (05:03:05 PM) dcbw: each step can return SUCCESS (everything already done,
> like static IP where we just set the IP address and return), POSTPONE (ie dhcp
> where we need to start dhcp and then wait for the answer to come back maybe 30
> seconds later) and FAILURE (something went wrong, fail the interface)
> (05:03:32 PM) dcbw: we also have some things that are really global plugins,
> like for DNS handling
> (05:03:37 PM) _hc: what if the plugin doesn't want to do anything?
> (05:04:10 PM) _hc: like for the OLSR plugin: ""is this adhoc? no, then
> nevermind...""
> (05:04:23 PM) dcbw: _hc: that's just the general way things work right now;
> we'd want a more formalized mechanism for the plugin interface itself
> (05:04:30 PM) dcbw: but it's a fairly good mapping so far
> 17:05
> (05:05:06 PM) dcbw: eventually we'd turn some of the internal stuff into
> plugins as well
> (05:05:39 PM) dcbw: like the avahi-autoipd IPv4 stuff is a great candidate
> (05:05:53 PM) _hc: ok, so this is something already in the works?
> (05:06:01 PM) dcbw: no, just been thinking about this for a while
> (05:06:15 PM) dcbw: and how to best make it happen
> (05:06:26 PM) dcbw: with minimal disruption
>
> _______________________________________________
> Commotion-dev mailing list
> Commotion-dev at lists.chambana.net
> http://lists.chambana.net/mailman/listinfo/commotion-dev
"
855,Commotion-dev, NetworKManager: the good news and the bad news,"Thu, 25 Oct 2012 09:33:32 +1030",+1030,Jeremy Lakeman,"A pre-association test would be great. A beacon IE message sounds
interesting. Wifi-Direct service discovery might also be useful, but I
don't know if it's possible while still connected to an adhoc network.

Assuming we can't get that to work, or to support current devices that
have no hope of that working, what about the following;

associate with adhoc network
try dhcp / adhcp
fall back to link local IPv4 (+IPv6?)
send probe broadcast UDP packet to well known port (repeat a few times)

any mesh routing daemons respond with a packet in a well defined format like;

header
- format version
- protocol type (olsr, batman, experiment#3, serval, ...)
- message to display to user if protocol unknown (eg ""See olsr.net for
more info"")

generic IP config
- IP / netmask
- DNS
- etc

optional protocol specific config
...

Once the network is up, you keep the link local IP address so you can
respond to similar requests.

On Thu, Oct 25, 2012 at 8:17 AM, Hans-Christoph Steiner
<hans at guardianproject.info> wrote:
> The good news is that one of the main devs was already thinking about a full
> on plugin system for networkmanager that will make it full possible to support
> all known OLSR configs.  The bad news is it doesn't exist yet... and the only
> existing plugin interface is the VPN plugins.  That VPN plugin API is
> basically useless to us since it assumes the IP layer, i.e. the wifi, is
> already configured, and therefore provides no way to configure the wifi.
>
> Here's the IRC transcript from my discusion dcbw aka Dan Williams aka Mr
> Network Manager on the NetworkManager room (irc://irc.freenode.net/nm
>
>
> (03:52:10 PM) _hc: hey all, I'm working on making OLSR mesh networking really
> easy to do, and currently I'm focused on NM integration.  I don't have access
> to an OLPC, so I can't try that stuff in NM.  So I wanted to ask here to get
> some ideas for the right approach for me to take
> (03:52:46 PM) _hc: the way I currently envision it is that you could browse
> thru all adhoc wifi, then try to connect using OLSR
> (03:53:04 PM) _hc: we're working on ways to detech OLSR meshes better, but
> that'll come later
> (03:53:48 PM) _hc: so there would be a separate listing, list ""Wired
> Networks"", ""Wireless Networks"", ""OLSR Networks""
> (03:54:04 PM) dcbw: _hc: ideally we can find the OLSR networks via beacon IEs
> (03:54:35 PM) dcbw: _hc: the OLPC stuff is quite OLPC specific and only works
> with the mesh implementation done for those devices
> (03:54:54 PM) dcbw: _hc: which means, basically, a specific SSID is used that
> indicates that the adhoc SSID is part of the OLCP mesh
> (03:54:55 PM) _hc: then the use just needs to click on one of the networks,
> then entire a WPA password if needed, do IP inof, etc
> 15:55
> (03:55:10 PM) _hc: right, I konw the OLPC mesh is incompatible
> (03:55:23 PM) _hc: but I was looking at it for an example of nm integration
> (03:55:53 PM) _hc: our plan is to try to work out a similar SSID encoding for
> OLSR networks
> (03:56:12 PM) dcbw: _hc: kinda evil, ideally it would be a beacon IE but with
> adhoc that's somewhat tricky
> (03:56:14 PM) _hc: dcbw: what's a beacon IE?
> (03:56:19 PM) dcbw: _hc: any reason it can't be 802.11s?
> (03:56:30 PM) _hc: isn't 802.11s limited to 32 nodes?
> (03:56:35 PM) dcbw: _hc: an Information Element
> (03:56:50 PM) _hc: we're aiming for meshes of hundreds and thousands
> (03:56:52 PM) dcbw: a TLV broadcast in the beacon for a specific type of
> information
> (03:57:06 PM) _hc: there are a number of long standing big OLSR meshes like that
> (03:57:13 PM) dcbw: which could be a way to identify the network independent
> of SSID
> (03:57:50 PM) dcbw: _hc: sounds a lot like what we were trying to do with OLPC
> 5 years ago
> (03:58:03 PM) dcbw: which *kinda* worked, hopefully things have gotten better
> with large meshes since then :)
> (03:58:22 PM) _hc: yeah, figures, that stuff is coming later, right now we
> just want a list of adhoc networks that the use can guess based on SSID
> (03:58:43 PM) _hc: dcbw: do you know the funkfeuer, freifunk, and related
> projects?
> (03:58:58 PM) dcbw: _hc: so if there's a specific SSID that identifies the
> OLSR network, why would we need a separate section?  or is the SSID supposed
> to be configurable?
> (03:59:51 PM) _hc: so you're saying the OLSR mesh would just show up under
> ""Wireless Networks"" and if it received the right beacon IP or TLV, it would be
> configured for OLSR?
> 16:00
> (04:00:27 PM) _hc: that would be very nice, too bad the ID work is not there
> yet, that's led by someone else, not me
> (04:00:27 PM) dcbw: not quite
> (04:00:52 PM) dcbw: what I'm saying is that it would be really, really nice
> from NM's point of view to know which scanned SSIDs were OLSR capable
> (04:01:12 PM) dcbw: so that we can do something intelligent in the UI instead
> of saying ""hey, this coiuld be OLSR, but it migth not be, so I guess you have
> to try connecting and if it's not OLSR it'll fail""
> (04:01:38 PM) _hc: one sure fire way is to connect to the olsrd's UDP port
> (04:01:49 PM) dcbw: yeah, but then you ahve to already be associated with the
> network
> (04:01:52 PM) _hc: but that comes later in the process, it would need to
> associate, get an ip etc.
> (04:01:53 PM) dcbw: so that's not going to work
> (04:02:05 PM) _hc: yes, its the ""better than nothing"" solution
> (04:02:07 PM) dcbw: ok
> (04:02:15 PM) dcbw: OLSR is a routing protocol really, right?
> (04:02:28 PM) _hc: kind of
> (04:02:32 PM) dcbw: and it just runs on top of wifi adhoc or master-mode
> networking?
> (04:02:40 PM) _hc: right, adhoc
> (04:02:52 PM) dcbw: ok, so any adhoc network can theoretically run OLSR
> (04:02:59 PM) _hc: so yeah, you can think of olsrd as a routing daemon since
> the IP effect is to change the routing table
> (04:03:02 PM) dcbw: even in parallel with regular local network IP
> (04:03:12 PM) _hc: hmm kind of, not really
> (04:03:19 PM) _hc: olsrd will change the routing table
> (04:03:28 PM) dcbw: ok, so IP addressing is done how?
> (04:03:29 PM) _hc: but it'll keep the default route, I suppose
> (04:03:31 PM) dcbw: link-local?
> (04:03:44 PM) _hc: no, random number in a pre-assigned range
> (04:03:53 PM) dcbw: how are collisions handled?
> (04:03:58 PM) _hc: luck
> (04:04:00 PM) _hc: hehe
> (04:04:03 PM) _hc: big range
> (04:04:05 PM) dcbw: ummm..... :)
> (04:04:13 PM) _hc: yeah... that's in the works
> (04:04:26 PM) _hc: there are a number of approaches for that, ahcpd is one
> (04:04:27 PM) dcbw: ok, so you attempt to join the adhoc network and then you
> assign yourself a random number in say the 10.x or 172.16.x range?
> (04:04:31 PM) _hc: right
> (04:04:40 PM) dcbw: and then you start up OLSR and hope somebody else you can
> talk to is running it?
> (04:04:48 PM) _hc: yup
> 16:05
> (04:05:22 PM) _hc: you can think of an OLSR mesh as defined by a BSSID and a
> channel
> (04:05:34 PM) _hc: the SSID and IP range are basically part of that too, but a
> little bit optional
> (04:06:20 PM) _hc: I guess I should say: OLSR mesh is BSSID, channel, and OLSR
> conf
> (04:06:37 PM) dcbw: ok, so the core UI question is how is the user supposed to
> know to try OLSR on this network or not
> (04:06:37 PM) _hc: since there are different approaches to sharing metic info
> (04:06:53 PM) dcbw: and given that most  networks won't be OLSR, ideally we
> don't ask ""enable OLSR?"" for everything you connect to
> (04:06:54 PM) _hc: for sure
> (04:07:00 PM) dcbw: which is why I was talking about beacon IEs
> (04:07:11 PM) dcbw: that would be really, really nice to have :)
> (04:07:17 PM) dcbw: since then it would be plug and play really
> (04:07:23 PM) _hc: I'm unfamiliar with a beacon IE, how would I implement such
> a thing?
> (04:07:38 PM) dcbw: are you familiar with  how adhoc wifi works at a lower level?
> (04:07:51 PM) dcbw: and BTW, you can't really depend on a specific BSSID
> (04:08:01 PM) dcbw: with adhoc you can only depend on the SSID
> (04:08:34 PM) dcbw: as drivers/firmware often have ""BSSID coalescing"" schemes
> to all arrive at a given BSSID over time
> (04:08:35 PM) _hc: we force the BSSID
> (04:08:43 PM) dcbw: that doesn't work with all hardware
> (04:08:47 PM) _hc: sad but true
> (04:08:57 PM) dcbw: and there really isn't a good reason to do it
> (04:09:28 PM) _hc: there are good reasons because that algo is fallable
> (04:09:44 PM) _hc: well, for an established OLSR mesh, you know the BSSID, its
> been there for years, or whatever
> (04:09:59 PM) dcbw: oh, so it's a single global BSSID?
> 16:10
> (04:10:07 PM) dcbw: or each mesh has it's own defined BSSID?
> (04:10:09 PM) _hc: sometimes the autoselection choses the BSSID of another new
> node that is also starting the process of getting on the mesh
> (04:10:27 PM) _hc: then they happen mesh together, but ignore the big one that
> they really should be talking to
> (04:10:41 PM) _hc: each mesh has its own BSSID
> (04:11:11 PM) _hc: in bigger meshes, there are parallel meshes for optimization
> (04:11:34 PM) _hc: so a private, encrypted backhaul mesh in parallel with a
> public, unencrypted one
> (04:11:44 PM) _hc: those are separate BSSIDs etc
> (04:12:10 PM) _hc: often split by 2.4 and 5.0 GHz, but that's not so relevant here
> (04:13:23 PM) dcbw: _hc: so back to adhoc wifi
> (04:13:32 PM) dcbw: _hc: with adhoc, stations take turns beaconing
> (04:13:50 PM) dcbw: _hc: a beacon is just a packet in the air that advertises
> the adhoc (or master-mode) network
> (04:14:23 PM) dcbw: _hc: it has a few parts; one standard part whose format
> never changes, and then a variable part composed of IEs, which are just TLVs
> (Type Length Value)
> (04:14:53 PM) _hc: so i know about beaconing in terms of advertising in wifi,
> but I've never toyed with that stuff, just read about it, and been aware of it
> 16:15
> (04:15:18 PM) _hc: ok, sounds promising
> (04:15:18 PM) dcbw: ideally, OLSR would get a vendor ID assigned and then
> could add an IE to the beacon so that anyone doing a scan could instantly know
> it's an OLSR-capable network before they even tryto connect
> (04:16:04 PM) _hc: getting a vendor ID sounds like a large, institutional process
> (04:16:18 PM) dcbw: and there are only 256 of them :(
> (04:16:30 PM) dcbw: there is a mechanism for extending though
> (04:16:48 PM) _hc: is there a community wifi or hacker mesh vendor ID we can
> share? :)
> (04:17:01 PM) _hc: that's basically the devs of OLSR
> (04:18:33 PM) jreznik_ left the room (quit: Read error: Operation timed out).
> (04:19:51 PM) dcbw: _hc: does OLSR have an IEEE OUI?
> 16:20
> (04:21:38 PM) _hc: my guess is no, but let me look
> (04:22:16 PM) dcbw: there's a vendor-specific IE, which is defined to be
> whatever you want, but you need an IEEE OUI first
> (04:22:36 PM) _hc: fyi, I don't think OLSR is incorporated itself, its just
> the name of a IETF protocol with one main implementation: olsrd http://olsr.org
> (04:22:42 PM) _hc: there are a bunch of orgs involved
> (04:22:48 PM) _hc: and some military contractors
> (04:23:31 PM) dcbw: might make sense to get one so this specific issue can be
> made smoother for users, otherwise this sort of thing never gets better...
> (04:23:52 PM) dcbw: at least on Linux it seems fairly easy to send the beacon
> template that could include the OLSR IE
> (04:24:05 PM) dcbw: in any case, that's the future (ideally)
> (04:24:31 PM) dcbw: then everything can be automatic
> 16:25
> (04:25:00 PM) dcbw: for OLPC we just used link-local iPv4 addresses
> (04:25:38 PM) dcbw: of which there are 64k
> (04:26:33 PM) _hc: does the OLPC mesh route to the internet too?
> (04:27:06 PM) dcbw: yes, through mesh portals
> (04:27:35 PM) dcbw: but the point of all that is, non-802.11s OLPC meshing has
> a known SSID so when connecting we know exactly what to do
> (04:27:42 PM) _hc: so its a minor abuse of the link-local addresses to connect
> them to the internet, no?
> (04:27:44 PM) dcbw: which isn't the case for OLSR
> (04:27:58 PM) dcbw: _hc: at least when I was working on that stuff, the portal
> NAT-ed everyone to the internet
> (04:28:40 PM) dcbw: so for OLSR, the core problem is that you don't know it's
> OLSR until after you've connected, which isn't a great user experience because
> you need to know it's OLSR so you don't try DHCP or something by default
> (04:29:12 PM) _hc: right
> (04:29:29 PM) dcbw: at the moment it's looking more like this is more a L3+
> issue than anything wifi related
> (04:29:38 PM) _hc: then either olsrd will already be running, or nm needs to
> trigger it to start
> 16:30
> (04:30:01 PM) _hc: if olsrd is running, it'll see the change in the net if,
> and respond by broadcasting to find other nodes
> (04:30:25 PM) dcbw: can also be  done through dispatcher scripts, assuming
> olsrd has some sane control interface
> (04:30:39 PM) dcbw: and doesn't need to be restarted on every network change
> (04:30:43 PM) _hc: I can write a sane control interface :)
> (04:30:47 PM) _hc: it probably doesn't exist
> (04:31:09 PM) dcbw: there are 3 core problems I see here:
> (04:31:28 PM) dcbw: 1) how we're supposed to know that the network is running
> OLSR so we can do (2) and (3)
> (04:31:50 PM) dcbw: 2) after associating, we need a specific IP configuration
> method when using OLSR
> (04:31:57 PM) dcbw: 3) something needs to kick olsrd
> (04:32:10 PM) dcbw: if (1) gets solved, then (2) and (3) are easy
> (04:32:32 PM) dcbw: but (1) has to get solved in a way that doesn't
> necessarily require more checkboxes every time you connect to an adhoc network
> (04:32:57 PM) dcbw: and ideally also doesn't require editing a config file
> somewhere, since that's pretty much the opposite of easy to use
> (04:32:58 PM) jheretic [~jheretic at 64.124.162.98] entered the room.
> (04:33:18 PM) dcbw: which is why the beacon IE is a nice solution
> (04:33:45 PM) _hc: dcbw: so what about this approach: we make it easy to have
> pre-configured meshes, then if the BSSID and channel match, it'll do its OLSR
> thing
> (04:33:50 PM) _hc: so its a manual approach to #1
> (04:34:01 PM) _hc: but once in place will provide full auto-detect
> (04:34:50 PM) _hc: it would also hopefully mean that once people figure out
> how to do good full auto detect of OLSR meshes, the nm code wouldn't have to
> change much
> (04:34:55 PM) _hc: since 2 and 3 would be the same
> 16:35
> (04:35:18 PM) dcbw: if you're going the preconfigured route, then this gets
> easier since you can just tell NM that it's OLSR instead of doing BSSID and
> channel matching
> (04:35:32 PM) dcbw: as in olsr=true or whatever for the network config
> (04:35:58 PM) dcbw: _hc: then it's pretty easy
> (04:36:12 PM) dcbw: _hc: NM has a 'dispatcher' functionality that calls
> scripts in /etc/NetworkManager/dispatcher.d
> (04:36:21 PM) dcbw: and it passes a lot of information in the environment
> (04:36:30 PM) _hc: I mean that a user could download  a package of OLSR
> configs that plug into NM
> (04:36:32 PM) dcbw: which could potentially include OLSR=true or whatever
> (04:36:51 PM) dcbw: hmm, potentially
> (04:36:52 PM) _hc: then when NM sees an adhoc net that matches the profile,
> it'll automatically set it up as an OLSR mesh
> (04:38:10 PM) dcbw: is the IP addressing scheme well-defined?
> (04:38:14 PM) dcbw: or is it site-specific
> (04:38:29 PM) _hc: can this dispatcher mode pre-screen things? like I click on
> ""commotionwireless.net"" in the Wireless Networking list, then some code
> somewhere check it, and says ""this is OLSR, config it as such"", then it skips
> the normal wiif config?
> (04:38:41 PM) _hc: its mesh-specific, that would be part of the profile
> (04:38:42 PM) dcbw: not at this time, no
> (04:39:08 PM) dcbw: so what all is part of the profile?
> (04:39:29 PM) _hc: SSID, BSSID, channel, ip-scheme, olsrd.config
> 16:40
> (04:40:05 PM) dcbw: and what are the IP schemes?
> (04:40:31 PM) dcbw: (as in, what specifically is the addressing randomization
> algorithm, and what ranges of IP does ""ip-scheme"" allow?)
> (04:41:53 PM) _hc: since the meshes are all run by various groups, they range
> from static IPs to random within a range, a range with last bytes of MAC,
> ahcpd, etc
> (04:43:35 PM) _hc: it seems to me that NM only needs to know about BSSID and
> channel, then the olsr logic would handle the rest
> (04:44:03 PM) _hc: I mean in terms of marking an ahdoc  as an OLSR mesh
> (04:44:38 PM) dcbw: well, NM handles the IP configuration on the interface too
> (04:44:45 PM) dcbw: and stuff like DNS
> (04:44:55 PM) dcbw: so NM would be doing the actual IP configuration, more orless
> 16:45
> (04:45:09 PM) _hc: ok
> (04:45:14 PM) _hc: makes sense
> (04:45:25 PM) dcbw: btw where does the station get DNS servers from?
> (04:45:39 PM) _hc: that's also part of the mesh config
> (04:45:58 PM) dcbw: so they're static?
> (04:45:59 PM) _hc: some are static, some use advertisments on the mesh
> (04:46:03 PM) dcbw: ah
> (04:47:06 PM) _hc: would it be possible to make dhclient kind of scripts that
> NM delegates to?
> (04:47:41 PM) dcbw: not in the way you're thinking, but having more hooks into
> the mechanisms is an enhancement goal
> (04:48:22 PM) _hc: so with NM, is dhclient the only mechanism for using some
> external thing to config IP and DNS?
> (04:48:51 PM) dcbw: _hc: or avahi-autoip, or IPv6 router advertisements, or
> static configuration
> (04:48:57 PM) dcbw: _hc: or PPP
> (04:49:00 PM) dcbw: _hc: or VPNs
> (04:49:39 PM) _hc: so it seems that OLSR meshes with specific needs could make
> a kind of avahi-autoip as part of the config
> 16:50
> (04:50:06 PM) dcbw: yeah, that would be the idea, though we'd want to do this
> more formally in NM
> (04:50:18 PM) dcbw: well, with a more formal modular structure
> (04:50:57 PM) dcbw: quite a few things want something like this
> (04:50:59 PM) _hc: is there way in NM to have it ask something external for
> the IP/DNS info, then it handle the actual setting of the interface, etc?
> (04:51:03 PM) _hc: is that waht you mean?
> (04:51:23 PM) _hc: that would be very nice for the OLSR mesh stuff, then the
> IP config could be represented in a little script
> (04:51:33 PM) _hc: that generates the numbers
> (04:51:34 PM) dcbw: _hc: that's exactly how dhcp, autoip, ipv6, ppp, and vpn
> already work, just that they're more or less hardcoded into NM
> (04:51:43 PM) _hc: ah, I see
> (04:51:49 PM) dcbw: _hc: you'd want more than a ""little script""
> (04:52:06 PM) dcbw: since that ""plugin"" if you will would also be responsible
> for getting DNS, possibly from advertisements
> (04:52:16 PM) dcbw: and thus would need to listen for them
> (04:53:16 PM) _hc: so any suggestions on where I should start on this?  do you
> think it'll only be possible with modifications on NM itself, or would any
> kind of ""plugin"" be an option?
> (04:53:33 PM) _hc: I looked at the VPN Plugins, they seem to tied to the idea
> of a VPN
> (04:54:02 PM) _hc: but if the VPN plugins can handle the BSSID/channel stuff,
> it might be one way to get started
> (04:54:22 PM) dcbw: _hc: vpns have to layer on top of existing hardware
> connections so they wouldn't really be suitable
> (04:54:29 PM) dcbw: _hc: we'd want the best way of fixing it :)  which would
> mean plugins, really
> (04:54:38 PM) dcbw: which needs some architecting thought
> 16:55
> (04:55:01 PM) dcbw: since you'd want the ability for plugins at different
> levels of the process, and the ability to pass information back and forth
> (04:55:09 PM) jheretic left the room (quit: Ping timeout: 244 seconds).
> (04:56:09 PM) _hc: I've been employed to work on this stuff, so I'm happy to
> dig in wherever you think is helpful
> (04:56:19 PM) dcbw: _hc: and that would be excellent
> (04:56:34 PM) _hc: in case you are interested, I'm working as part of this;
> https://commotionwireless.net/
> (04:56:55 PM) dcbw: cool
> (04:57:03 PM) _hc: the only rub is that my wife is due anyday so I'm going to
> disappear for 6ish weeks once the baby comes :-D
> (04:57:10 PM) dcbw: heh :)
> (04:57:17 PM) dcbw: congratulations
> (04:57:18 PM) _hc: perfect time to start a new project ;)
> (04:57:19 PM) _hc: thanks
> (04:57:31 PM) dcbw: any day you'll be starting a new project :)
> (04:57:41 PM) dcbw: one that will last a looooooong time
> (04:57:48 PM) _hc: hehe, I have one already, so its just adding to the
> maelstrom :)
> (04:58:28 PM) _hc: by the way, some of the pauses in this convo were from my
> 15 month old son insisting on turning my monitor on and off
> (04:58:48 PM) _hc: he's little so he can sneak up
> (04:58:52 PM) dcbw: _hc: so lets stop thinking about OLSR specifically and
> starting thinking more generally about how to make it work the best way that
> OLSR can also integrate with
> (04:59:11 PM) _hc: ok, sounds good
> 17:00
> (05:00:23 PM) dcbw: _hc: first is to define that generic plugin interface
> including how plugins register themselves for certain hooks, how plugins can
> attach information to the interface activation process (ie, connecting) and at
> what points they get asked to do things
> (05:01:27 PM) dcbw: it might be as simple as passing the NMConnection to each
> plugin at each step and asking if the plugin wants to do something
> (05:01:36 PM) dcbw: which is basically how it works internally
> (05:01:45 PM) dcbw: internally there are 5 steps
> (05:01:57 PM) _hc: ok, fyi, I'm a long time NM user, and have done a little NM
> scripting with dbus, but the dev is new to me.  but I've been doing C for 10+
> years, and was a network manager before that, so I'm not starting from nothing ;)
> (05:02:16 PM) dcbw: good to hear :)
> (05:03:04 PM) _hc: I'll see if I can check out the code in parallel
> (05:03:05 PM) dcbw: each step can return SUCCESS (everything already done,
> like static IP where we just set the IP address and return), POSTPONE (ie dhcp
> where we need to start dhcp and then wait for the answer to come back maybe 30
> seconds later) and FAILURE (something went wrong, fail the interface)
> (05:03:32 PM) dcbw: we also have some things that are really global plugins,
> like for DNS handling
> (05:03:37 PM) _hc: what if the plugin doesn't want to do anything?
> (05:04:10 PM) _hc: like for the OLSR plugin: ""is this adhoc? no, then
> nevermind...""
> (05:04:23 PM) dcbw: _hc: that's just the general way things work right now;
> we'd want a more formalized mechanism for the plugin interface itself
> (05:04:30 PM) dcbw: but it's a fairly good mapping so far
> 17:05
> (05:05:06 PM) dcbw: eventually we'd turn some of the internal stuff into
> plugins as well
> (05:05:39 PM) dcbw: like the avahi-autoipd IPv4 stuff is a great candidate
> (05:05:53 PM) _hc: ok, so this is something already in the works?
> (05:06:01 PM) dcbw: no, just been thinking about this for a while
> (05:06:15 PM) dcbw: and how to best make it happen
> (05:06:26 PM) dcbw: with minimal disruption
>
> _______________________________________________
> Commotion-dev mailing list
> Commotion-dev at lists.chambana.net
> http://lists.chambana.net/mailman/listinfo/commotion-dev
"
856,Commotion-dev, NetworKManager: the good news and the bad news,"Wed, 24 Oct 2012 19:46:33 -0400",-0400,Hans-Christoph Steiner,"
That's correct, but its also much more widespread than just GNOME and
Debian/Ubuntu.  I think basically every distro installs it by default, and it
also is fully supported in KDE as well as other environments.  Basically, if
you are doing user networking with GNU/Linux these days, its running
NetworkManager or you're an ueber-geek ;)

.hc

On 10/24/2012 07:02 PM, Ben West wrote:
> For background, this is the NetworkManager tool provided with GNOME
> UI's, et al, on most popular Linux distros, including Debian and
> Ubuntu, correct?
> 
> http://blogs.gnome.org/dcbw/
> 
> On Wed, Oct 24, 2012 at 4:47 PM, Hans-Christoph Steiner
> <hans at guardianproject.info> wrote:
"
857,Commotion-dev, NetworKManager: the good news and the bad news,"Wed, 24 Oct 2012 19:59:21 -0400",-0400,Hans-Christoph Steiner,"

On 10/24/2012 07:03 PM, Jeremy Lakeman wrote:
> A pre-association test would be great. A beacon IE message sounds
> interesting. Wifi-Direct service discovery might also be useful, but I
> don't know if it's possible while still connected to an adhoc network.


Sounds like we either need a wifi vendor ID or an IEEE OUI to do that.
Getting a wifi vendor ID sounds basically impossible, but perhaps not an IEEE
OUI.  Isn't there someone at Battlemesh who had one for this stuff?


> Assuming we can't get that to work, or to support current devices that
> have no hope of that working, what about the following;
> 
> associate with adhoc network
> try dhcp / adhcp
> fall back to link local IPv4 (+IPv6?)
> send probe broadcast UDP packet to well known port (repeat a few times)
> 
> any mesh routing daemons respond with a packet in a well defined format like;
> 
> header
> - format version
> - protocol type (olsr, batman, experiment#3, serval, ...)
> - message to display to user if protocol unknown (eg ""See olsr.net for
> more info"")
> 
> generic IP config
> - IP / netmask
> - DNS
> - etc
> 
> optional protocol specific config
> ...
> 
> Once the network is up, you keep the link local IP address so you can
> respond to similar requests.

We discussed that in the conversation below.  Upon thinking about it more, I
think it is not workable since that means NetworkManager would have to attach
to every adhoc network it sees in order to provide a scan of which networks
are OLSR-capable.  That could easily make the scanning very slow and error
prone since you'd have to wait for a lot of timeouts before you could do
anything else with the network interface.

.hc


> On Thu, Oct 25, 2012 at 8:17 AM, Hans-Christoph Steiner
> <hans at guardianproject.info> wrote:
"
858,Commotion-dev, NetworKManager: the good news and the bad news,"Thu, 25 Oct 2012 11:49:26 +1030",+1030,Jeremy Lakeman,"I was mainly thinking of deferring that problem to the user.

We don't announce which networks have a usable internet connection
either (yet), which is a similar problem that we already delegate to
the user.

On Thu, Oct 25, 2012 at 10:29 AM, Hans-Christoph Steiner
<hans at guardianproject.info> wrote:
>
>
> On 10/24/2012 07:03 PM, Jeremy Lakeman wrote:
"
859,Commotion-dev, NetworKManager: the good news and the bad news,"Thu, 25 Oct 2012 13:46:45 -0400",-0400,The Doctor,
860,Commotion-dev, NetworKManager: the good news and the bad news,"Fri, 26 Oct 2012 10:57:02 -0400",-0400,Josh King,"Seems like we can try both. Will is currently looking into finding out
whether there's an allied organization that might have an OUI, whom we
could reach out to about using it for this purpose. Otherwise, we may
look into whether OTI can just pay for one for Commotion. This could be
independent of the rest of the discovery and configuration piece.

On 10/24/2012 09:19 PM, Jeremy Lakeman wrote:
> I was mainly thinking of deferring that problem to the user.
> 
> We don't announce which networks have a usable internet connection
> either (yet), which is a similar problem that we already delegate to
> the user.
> 
> On Thu, Oct 25, 2012 at 10:29 AM, Hans-Christoph Steiner
> <hans at guardianproject.info> wrote:
"
861,Commotion-dev, Get Involved page on Commotion website,"Fri, 26 Oct 2012 15:56:07 -0400",-0400,Michael Gregor,"Hi all,

We're creating a new and improved *Get Involved* page that will replace 
the existing content at https://commotionwireless.net/get-involved. It 
will include graphics that represent the various ways for newcomers to 
get involved in Commotion.

We're finalizing the new text content here: 
https://docs.google.com/document/d/1dCfhj7-JdXqiljMf6W_Dar-owwpVI_CSfD-boFBeNNw/edit

Take a look and if you have any suggested changes, please post a comment 
by *Monday at 5pm*.

Thanks!

Michael


-- 
*Michael Gregor*
Strategy Consultant
313.437.1244
theworkdept.com


/This email message and any attached files are confidential and are 
intended solely for the use of the addressee(s) named above. If you are 
not the intended recipient, any review, use, dissemination, forwarding, 
printing, copying, or other distribution of this email message and any 
attached files is strictly prohibited./
"
862,Commotion-dev, Commotion's Community Governance Guidelines,"Mon, 05 Nov 2012 15:39:33 -0500",-0500,Seamus Tuohy,"Hello All,

We have been working on the following draft of Commotion's Community
Governance Guidelines. The first is a proposal for the overarching
Commotion project guidelines. The second is a proposed individual
project guideline for code submission and review. Now that we have a
rough sketch of what we think we should include we would like to see
what the active community wants added, removed, reworded, etc.



Commotion Community Governance Guidelines

  * The Commotion project is an open source, free software toolkit. The
    community welcomes all contributions and conversations that help the
    project grow and improve in accordance with its mission.
  * Commotion?s Mission and Goals are guided by the active developers
    and community stakeholders who contribute to the project community.
    Active developers of Commotion projects will guide the development
    of their individual project.
  * The Commotion project team encourages communities to customize the
    software to better meet local needs. We request that all
    customizations be contributed or communicated back to the Commotion
    community so that improvements can be reused without undue
    duplication of effort.
  * Work on Commotion should do no harm to existing projects. Projects
    that implement new code that breaks the existing functionality of
    other Commotion projects should work with the community of the
    existing project in order to provide support for the existing
    functions.

  * New members may contribute to existing Commotion projects by
    collaborating with active developers. Each Commotion subproject will
    maintain an active version-controlled code repository. Guidelines
    for contribution will be managed by each project?s active
    developers, and will be posted on each project?s development page.


Commotion Project Governance Guidelines

To contribute to the (___________) project?s code repository you must
post contributions to the development list for review. When the
community has reviewed them you will be asked to submit a request to
submit code so that the community can add your code to the project. At
the point when repository administrators believe that you have a strong
grasp of your contributed code?s effect on the rest of the code base,
and that your intentions are to further the goals of the project with
all of your contributions, you may be granted access to submit code
directly to the code base without review. Malicious or damaging code
that is submitted will cause those privileges to be revoked immediately.



Thanks,
Seamus 2e
"
863,Commotion-dev, Commotion's Community Governance Guidelines,"Tue, 06 Nov 2012 13:51:38 -0500",-0500,Michael Gregor,"This is a good start Seamus.

I think you should specify what the *Mission* and *Goals* are so readers 
have a clear understanding of the project. If they are included here, it 
could become easy to evaluate proposals and decisions using the Mission 
and Goals.

Best,

Michael


On 11/5/12 3:39 p.m., Seamus Tuohy wrote:
> Hello All,
>
> We have been working on the following draft of Commotion's Community
> Governance Guidelines. The first is a proposal for the overarching
> Commotion project guidelines. The second is a proposed individual
> project guideline for code submission and review. Now that we have a
> rough sketch of what we think we should include we would like to see
> what the active community wants added, removed, reworded, etc.
>
>
>
> Commotion Community Governance Guidelines
>
>    * The Commotion project is an open source, free software toolkit. The
>      community welcomes all contributions and conversations that help the
>      project grow and improve in accordance with its mission.
>    * Commotion?s Mission and Goals are guided by the active developers
>      and community stakeholders who contribute to the project community.
>      Active developers of Commotion projects will guide the development
>      of their individual project.
>    * The Commotion project team encourages communities to customize the
>      software to better meet local needs. We request that all
>      customizations be contributed or communicated back to the Commotion
>      community so that improvements can be reused without undue
>      duplication of effort.
>    * Work on Commotion should do no harm to existing projects. Projects
>      that implement new code that breaks the existing functionality of
>      other Commotion projects should work with the community of the
>      existing project in order to provide support for the existing
>      functions.
>
>    * New members may contribute to existing Commotion projects by
>      collaborating with active developers. Each Commotion subproject will
>      maintain an active version-controlled code repository. Guidelines
>      for contribution will be managed by each project?s active
>      developers, and will be posted on each project?s development page.
>
>
> Commotion Project Governance Guidelines
>
> To contribute to the (___________) project?s code repository you must
> post contributions to the development list for review. When the
> community has reviewed them you will be asked to submit a request to
> submit code so that the community can add your code to the project. At
> the point when repository administrators believe that you have a strong
> grasp of your contributed code?s effect on the rest of the code base,
> and that your intentions are to further the goals of the project with
> all of your contributions, you may be granted access to submit code
> directly to the code base without review. Malicious or damaging code
> that is submitted will cause those privileges to be revoked immediately.
>
>
>
> Thanks,
> Seamus 2e
> _______________________________________________
> Commotion-dev mailing list
> Commotion-dev at lists.chambana.net
> http://lists.chambana.net/mailman/listinfo/commotion-dev

-- 
*Michael Gregor*
Strategy Consultant
313.437.1244
theworkdept.com


/This email message and any attached files are confidential and are 
intended solely for the use of the addressee(s) named above. If you are 
not the intended recipient, any review, use, dissemination, forwarding, 
printing, copying, or other distribution of this email message and any 
attached files is strictly prohibited./
"
864,Commotion-dev, security hardening for olsrd: new Debian/Ubuntu,"Thu, 08 Nov 2012 14:48:12 -0500",-0500,Dan Staples,"Hi .hc,

Sorry for the long delay...I got busy with some other tasks and this 
dropped off my radar.  We were able to test the new builds today, and 
they seem to work fine, no problems.  We were able to mesh just fine 
with our existing Commotion mesh network, though we weren't able to 
test multi-hop since we would have to spread out pretty far in order to 
get out of single-hop range of each other.

Dan

On Fri 05 Oct 2012 03:08:01 PM EDT, Hans-Christoph Steiner wrote:
>
> The first thing is just to make sure it works properly with any
> configurations that you normally use.  Then, depending on any other
> skills you might have, it would be awesome if someone tried to break it
> and let us know what the exploits are. :-D
>
> .hc
>
> On 10/05/2012 12:25 PM, Dan Staples wrote:
"
865,Commotion-dev, FYI: Serval & OpenBTS integration,"Tue, 13 Nov 2012 16:07:41 +1030",+1030,Jeremy Lakeman,"I've recently finished setting up a second OpenBTS box here in the
lab. Getting everything up and running was a relatively painless
process.

I've written some very rough notes on the process for calling to and
from serval phones, that can be found here;
https://github.com/servalproject/serval-dna/blob/master/doc/OpenBts-setup.md

"
866,Commotion-dev, FYI: Serval & OpenBTS integration,"Tue, 13 Nov 2012 11:58:47 +0400",+0400,Alexander Chemeris,"Hi Jeremy,

Good work. Could you answer to a few questions from the OpenBTS side, please:

How does an OpenBTS user know his number? Do you send a welcome SMS
with a number on registration?

And what will happen with the number if a user moves to another
OpenBTS base station?

Do you think there are benefits of using Serval DNA in a pure OpenBTS
multi-site installations, i.e. without other non-OpenBTS Serval
devices?

Does Serval DNA works well with thousands of users?

Does Serval support SMS messages?

On Tue, Nov 13, 2012 at 9:37 AM, Jeremy Lakeman
<Jeremy.Lakeman at gmail.com> wrote:
> I've recently finished setting up a second OpenBTS box here in the
> lab. Getting everything up and running was a relatively painless
> process.
>
> I've written some very rough notes on the process for calling to and
> from serval phones, that can be found here;
> https://github.com/servalproject/serval-dna/blob/master/doc/OpenBts-setup.md
>
> _______________________________________________
> Commotion-dev mailing list
> Commotion-dev at lists.chambana.net
> http://lists.chambana.net/mailman/listinfo/commotion-dev
"
867,Commotion-dev, FYI: Serval & OpenBTS integration,"Tue, 13 Nov 2012 21:40:18 +1030",+1030,Jeremy Lakeman,"On Tue, Nov 13, 2012 at 6:28 PM, Alexander Chemeris
<alexander.chemeris at gmail.com> wrote:
> Hi Jeremy,
>
> Good work. Could you answer to a few questions from the OpenBTS side, please:
>
> How does an OpenBTS user know his number? Do you send a welcome SMS
> with a number on registration?

That's something we haven't changed from the default install. This
setup still uses the same database for local number registrations via
the web UI or SMS message.

> And what will happen with the number if a user moves to another
> OpenBTS base station?

We've mainly been assuming that the BTS boxes don't trust each other
and might be administered independently.
Though if a number of boxes did trust each other, they could use our
rhizome file transport to share SIM card details and last known
location, even if the network is not always available.
The basic pieces we've built could probably be adapted into this kind
of deployment with some scripting and changes to the dialplan.

> Do you think there are benefits of using Serval DNA in a pure OpenBTS
> multi-site installations, i.e. without other non-OpenBTS Serval
> devices?

With no single point of failure, one BTS box could still allow local
phone calls and any two boxes could form a working network.
Though we still have a lot of work to do, improving codec support and
our routing protocol. With servald handling the network routing and
packet delivery, the network layer has the potential to carry more
simultaneous calls over a wifi network.
We'll need to do a lot more testing to see how well that claim pans
out in practice.

> Does Serval DNA works well with thousands of users?

Good question, no idea. There will probably be scalability issues
we'll need to deal with so we don't flood a large network just trying
to resolve phone numbers. Probably some kind of election process to
pick a small number of network nodes to collect and search the entire
phone directory.

> Does Serval support SMS messages?

We have a text messaging solution for android, where we can assume
that one identity is only reachable via one instance of the software.
We'd need to build something a bit different to deliver messages to
users roaming between BTS boxes. We haven't tackled that yet, but we
might get around to it eventually.

> On Tue, Nov 13, 2012 at 9:37 AM, Jeremy Lakeman
> <Jeremy.Lakeman at gmail.com> wrote:
"
868,Commotion-dev, FYI: Serval & OpenBTS integration,"Tue, 13 Nov 2012 15:21:39 +0400",+0400,Alexander Chemeris,"On Tue, Nov 13, 2012 at 3:10 PM, Jeremy Lakeman
<Jeremy.Lakeman at gmail.com> wrote:
> On Tue, Nov 13, 2012 at 6:28 PM, Alexander Chemeris
> <alexander.chemeris at gmail.com> wrote:
"
869,Commotion-dev, FYI: Serval & OpenBTS integration,"Tue, 13 Nov 2012 22:39:46 +1030",+1030,Jeremy Lakeman,"On Tue, Nov 13, 2012 at 9:51 PM, Alexander Chemeris
<alexander.chemeris at gmail.com> wrote:
"
870,Commotion-dev, FYI: Serval & OpenBTS integration,"Tue, 13 Nov 2012 07:56:41 -0500",-0500,Dan Staples,"Thanks for the documentation on integrating Serval with OpenBTS. Here 
in our lab we're on our way to testing that out, using our Range 5150 
for the radio hardware. Our snag right now is that for some reason our 
OpenBTS build isn't talking to the Subscriber Registry db when a 
registration is made...anyone else experienced that?

Everything is working fine on the Range commercial OpenBTS version, 
however, so I may just try to install servald and serval-asterisk 
integration on the commercial version to test it out.

Dan

On Tue 13 Nov 2012 07:09:46 AM EST, Jeremy Lakeman wrote:
> On Tue, Nov 13, 2012 at 9:51 PM, Alexander Chemeris
> <alexander.chemeris at gmail.com> wrote:
"
871,Commotion-dev, FYI: Serval & OpenBTS integration,"Tue, 13 Nov 2012 08:02:46 -0500",-0500,Dan Staples,"Also, Jeremy, can Serval use non-numeric DIDs? We were thinking that 
that would make it easier for us to integrate Serval/OpenBTS with 
Commotion...for instance for people who wanted to send a Rhizome bundle 
to a Commotion node by using the node's hostname instead of a telephone 
number for the DID.

Dan

On Tue 13 Nov 2012 07:56:41 AM EST, Dan Staples wrote:
> Thanks for the documentation on integrating Serval with OpenBTS. Here
> in our lab we're on our way to testing that out, using our Range 5150
> for the radio hardware. Our snag right now is that for some reason our
> OpenBTS build isn't talking to the Subscriber Registry db when a
> registration is made...anyone else experienced that?
>
> Everything is working fine on the Range commercial OpenBTS version,
> however, so I may just try to install servald and serval-asterisk
> integration on the commercial version to test it out.
>
> Dan
>
> On Tue 13 Nov 2012 07:09:46 AM EST, Jeremy Lakeman wrote:
"
872,Commotion-dev, FYI: Serval & OpenBTS integration,"Wed, 14 Nov 2012 11:10:37 +1030",+1030,Jeremy Lakeman,"We store DID's as a plain text string in our keystore. If you tried to
store something that wasn't a phone number, or no number at all, I'm
certain there are a number of validation routines that you'd trip over
at the moment.

You can certainly enter any name you like though.

Either way, the rhizome bundle is likely to be addressed to a public
key instead of a logical name. Apart from our MeshMS text UI, we
haven't really dealt with how the user will choose a recipient for
other types of bundles.

We need a better way to indicate which instances of servald have a
connected phone service, and which do not. Perhaps we should
generalise our phone directory lookup to allow for other types of
service discovery.

On Tue, Nov 13, 2012 at 11:32 PM, Dan Staples
<danstaples at opentechinstitute.org> wrote:
> Also, Jeremy, can Serval use non-numeric DIDs? We were thinking that
> that would make it easier for us to integrate Serval/OpenBTS with
> Commotion...for instance for people who wanted to send a Rhizome bundle
> to a Commotion node by using the node's hostname instead of a telephone
> number for the DID.
>
> Dan
>
> On Tue 13 Nov 2012 07:56:41 AM EST, Dan Staples wrote:
"
873,Commotion-dev, FYI: Serval & OpenBTS integration,"Wed, 14 Nov 2012 07:54:09 +0400",+0400,Alexander Chemeris,"On Tue, Nov 13, 2012 at 4:56 PM, Dan Staples
<danstaples at opentechinstitute.org> wrote:
> Thanks for the documentation on integrating Serval with OpenBTS. Here
> in our lab we're on our way to testing that out, using our Range 5150
> for the radio hardware. Our snag right now is that for some reason our
> OpenBTS build isn't talking to the Subscriber Registry db when a
> registration is made...anyone else experienced that?

There could be several reasons for that. Ones which come to my mind:

 1. Phone thinks that it's already registered and just does not
communicate with the BTS at all. Then there is not reason for the BTS
to contact with the Subscriber Registry. This may happen if you power
on a BTS soon enough after you powered it off - for a phone it looks
like BTS signal was lost and then re-appear, e.g. like you went to a
tunnel and came back. To force a phone to register after a BTS restart
is to change BTS's LAC. In that case a phone thinks it moved to
another Location Area and will send a Location Update Request (LUR).

 2. ""SIP.Proxy.Registration"" configuration parameter is not configured
properly in the OpenBTS installation.

Thus I recommend you to:
 * Double-check SIP.Proxy.Registration configuration parameter.
 * Run Wireshark and check for SIP traffic.
 * Run `tail -f <OpenBTS_logs>` and check whether there is any traffic
between the phone and the BTS when you expect it.

--
Regards,
Alexander Chemeris.
CEO, Fairwaves LLC / ??? ???????
http://fairwaves.ru
"
874,Commotion-dev, FYI: Serval & OpenBTS integration,"Wed, 14 Nov 2012 11:34:59 -0500",-0500,Dan Staples,"Thanks Alexander, we'll try all those suggestions. Do you know if
Asterisk needs to be running in order for OpenBTS to write to the
Subscriber Registry db, or does OpenBTS write directly to the db?

Also, you mentioned at the Hackday that some phones have compatibility
problems with OpenBTS...what exactly about those phones in incompatible?
Is it certain brands or chipsets?

Dan

On Tue 13 Nov 2012 10:54:09 PM EST, Alexander Chemeris wrote:
>
> On Tue, Nov 13, 2012 at 4:56 PM, Dan Staples
> <danstaples at opentechinstitute.org> wrote:
"
875,Commotion-dev, FYI: Serval & OpenBTS integration,"Fri, 16 Nov 2012 11:34:04 -0500",-0500,Dan Staples,"Jeremy,

Is number resolution implemented between Serval and OpenBTS? As per the
documentation, I tried doing a dna lookup for an OpenBTS number, and got
nothing, even doing the lookup from the OpenBTS box itself. Running
num2sip.py manually, I was able to get the IMSIs of OpenBTS phone
numbers, but that's about it. I'm running servald built from the latest
commits.

Dan

On Wed 14 Nov 2012 11:34:59 AM EST, Dan Staples wrote:
>
> Thanks Alexander, we'll try all those suggestions. Do you know if
> Asterisk needs to be running in order for OpenBTS to write to the
> Subscriber Registry db, or does OpenBTS write directly to the db?
>
> Also, you mentioned at the Hackday that some phones have compatibility
> problems with OpenBTS...what exactly about those phones in incompatible?
> Is it certain brands or chipsets?
>
> Dan
>
> On Tue 13 Nov 2012 10:54:09 PM EST, Alexander Chemeris wrote:
"
876,Commotion-dev, FYI: Serval & OpenBTS integration,"Sat, 17 Nov 2012 10:52:09 +1030",+1030,Jeremy Lakeman,"It certainly can work. I've successfully placed a phone call in both directions.

Have you looked at the log file produced from the servald instance on
the openbts box?
You also could try turning on more debugging options like this one;
servald config debug.dnahelper 1

On Sat, Nov 17, 2012 at 3:04 AM, Dan Staples
<danstaples at opentechinstitute.org> wrote:
> Jeremy,
>
> Is number resolution implemented between Serval and OpenBTS? As per the
> documentation, I tried doing a dna lookup for an OpenBTS number, and got
> nothing, even doing the lookup from the OpenBTS box itself. Running
> num2sip.py manually, I was able to get the IMSIs of OpenBTS phone
> numbers, but that's about it. I'm running servald built from the latest
> commits.
>
> Dan
>
> On Wed 14 Nov 2012 11:34:59 AM EST, Dan Staples wrote:
"
877,Commotion-dev, FYI: Serval & OpenBTS integration,"Mon, 19 Nov 2012 14:17:01 -0500",-0500,Dan Staples,"That dnahelper debug flag helped me find what the problem was, though I
had to look through the source code to find the config option I needed
to set to fix it. I had to set
dna.helper.argv.1=/home/openbts/app_servaldna/conf_adv/num2sip.ini.
Also, how can I specify a log file to use? I haven't been able to find
the various config options besides the couple listed in
doc/Servald-Configuration.md.

After setting this config option, I was able to successfully resolve
DIDs in both directions. However, I still wasn't able to place calls
from one to the other. When calling a serval number from OpenBTS, I got
the following warnings:

[Nov 19 11:00:56] WARNING[2392]: channel.c:5414 ast_request: No channel
type registered for 'VOMP'
[Nov 19 11:00:56] WARNING[2392]: app_dial.c:2039 dial_exec_full: Unable
to create channel of type 'VOMP' (cause 66 - Channel not implemented)
When calli
This occurred even though I had added app_servaldna.so to
/usr/lib/asterisk/modules/. I also had to add a new context to the
sample extensions.conf provided by serval in order to get my
openbts-registered phones to make calls:

[phones]
include => openbts

In the other direction, when setting the number of a serval phone to the
asterisk echo extension, and calling it from another phone's peer list,
it just goes through as a regular serval voice call between the two
phones instead of going to the echo service. Is this what you meant by
""Remote call to local asterisk test number"" in the documentation, or am
I doing it wrong?

Dan

On 11/16/2012 07:22 PM, Jeremy Lakeman wrote:
> It certainly can work. I've successfully placed a phone call in both directions.
>
> Have you looked at the log file produced from the servald instance on
> the openbts box?
> You also could try turning on more debugging options like this one;
> servald config debug.dnahelper 1
>
> On Sat, Nov 17, 2012 at 3:04 AM, Dan Staples
> <danstaples at opentechinstitute.org> wrote:
"
878,Commotion-dev, FYI: Serval & OpenBTS integration,"Tue, 20 Nov 2012 00:34:11 +0400",+0400,Alexander Chemeris,"Hi Dan,

I apologize for slow response. I haven't paid attention to my e-mails
this week due to high workload.

On Wed, Nov 14, 2012 at 8:34 PM, Dan Staples
<danstaples at opentechinstitute.org> wrote:
> Thanks Alexander, we'll try all those suggestions. Do you know if
> Asterisk needs to be running in order for OpenBTS to write to the
> Subscriber Registry db, or does OpenBTS write directly to the db?

Asterisk doesn't write to Subscriber Registry db. It's sipauthserve
and OpenBTS who write to it. IIRC, OpenBTS only writes non-essential
things like IMEI and RRLP coordinates to it, while sipauthserve writes
the actual phone location (aka IP:port) to it. This have to be checked
vs the code to be sure.

What issue do you have with this?

> Also, you mentioned at the Hackday that some phones have compatibility
> problems with OpenBTS...what exactly about those phones in incompatible?
> Is it certain brands or chipsets?

Different chipsets has different GSM stacks and thus their behavior is
different. Also there are chipsets with buggy GSM stacks (esp. Chinese
ones), which doesn't make life easier. To add some salt, OpenBTS
implementation of GSM is not complete - GSM uses state machines, while
OpenBTS assumes it's a linear sequence of messages. And we already
know some places where this breaks execution and OpenBTS just hangs a
call instead of processing it. I'd love to fix this, but it requires
quite some time and effort.

--
Regards,
Alexander Chemeris.
CEO, Fairwaves LLC / ??? ???????
http://fairwaves.ru
"
879,Commotion-dev, FYI: Serval & OpenBTS integration,"Tue, 20 Nov 2012 08:27:12 +1030",+1030,Jeremy Lakeman,"On Tue, Nov 20, 2012 at 5:47 AM, Dan Staples
<danstaples at opentechinstitute.org> wrote:
> That dnahelper debug flag helped me find what the problem was, though I
> had to look through the source code to find the config option I needed
> to set to fix it. I had to set
> dna.helper.argv.1=/home/openbts/app_servaldna/conf_adv/num2sip.ini.

Oops, could have sworn I'd checked that in.

> Also, how can I specify a log file to use? I haven't been able to find
> the various config options besides the couple listed in
> doc/Servald-Configuration.md.

You can set a log file either with an environment variable
SERVALD_LOG_FILE, or by setting a log.file configuration value.

> After setting this config option, I was able to successfully resolve
> DIDs in both directions. However, I still wasn't able to place calls
> from one to the other. When calling a serval number from OpenBTS, I got
> the following warnings:
>
> [Nov 19 11:00:56] WARNING[2392]: channel.c:5414 ast_request: No channel
> type registered for 'VOMP'
> [Nov 19 11:00:56] WARNING[2392]: app_dial.c:2039 dial_exec_full: Unable
> to create channel of type 'VOMP' (cause 66 - Channel not implemented)
> When calli
> This occurred even though I had added app_servaldna.so to
> /usr/lib/asterisk/modules/.

The vomp channel driver should log something to the asterisk log while
asterisk is starting. Asterisk should also log something if it failed
to load the module.
Is the module file readable by the user running asterisk?

Once the channel driver has started, servald should also log that it
has a connected client.

> I also had to add a new context to the
> sample extensions.conf provided by serval in order to get my
> openbts-registered phones to make calls:
>
> [phones]
> include => openbts
>
> In the other direction, when setting the number of a serval phone to the
> asterisk echo extension, and calling it from another phone's peer list,
> it just goes through as a regular serval voice call between the two
> phones instead of going to the echo service. Is this what you meant by
> ""Remote call to local asterisk test number"" in the documentation, or am
> I doing it wrong?

Not quite. If you set the phone number of the servald instance on the
bts box to the echo number in asterisk, then this is the extension
that the vomp channel driver will connect you to when dialling the
public key of the bts box.
eg;
servald keyring list
servald set did [sid] [did] [name]

But you'll need to work out why the channel driver isn't registering
first. Hopefully that's the only remaining piece of the puzzle that
isn't working.

> Dan
"
880,Commotion-dev, FYI: Serval & OpenBTS integration,"Tue, 20 Nov 2012 16:35:10 -0500",-0500,Dan Staples,"Indeed that was the problem. I originally compiled app_servaldna linking
to the Asterisk 1.8 source, while the OpenBTS box was using v1.8.3.
Recompiling against the 1.8.3 source gave me a working channel driver.

Another thing I learned testing this out is that multiple identities
mess things up. I had two identities in the OpenBTS box's serval keyring
(one on a unique DID and the other DID set as the echo extension), and
nothing worked. DNA lookups from another machine resolved, but lookups
made from the OpenBTS box gave no results. Once I made a new keyring
with only one identity (and set the DID to the echo extension),
everything worked.

Hurrah! Thanks Jeremy for creating this functionality, it's very
exciting progress!

Dan

On 11/19/2012 04:57 PM, Jeremy Lakeman wrote:
> On Tue, Nov 20, 2012 at 5:47 AM, Dan Staples
> <danstaples at opentechinstitute.org> wrote:
"
881,Commotion-dev, FYI: Serval & OpenBTS integration,"Wed, 21 Nov 2012 08:36:22 +1030",+1030,Jeremy Lakeman,"On Wed, Nov 21, 2012 at 8:05 AM, Dan Staples
<danstaples at opentechinstitute.org> wrote:
> Indeed that was the problem. I originally compiled app_servaldna linking
> to the Asterisk 1.8 source, while the OpenBTS box was using v1.8.3.
> Recompiling against the 1.8.3 source gave me a working channel driver.

On our box I replaced the asterisk installation with a newly built one.

> Another thing I learned testing this out is that multiple identities
> mess things up. I had two identities in the OpenBTS box's serval keyring
> (one on a unique DID and the other DID set as the echo extension), and
> nothing worked. DNA lookups from another machine resolved, but lookups
> made from the OpenBTS box gave no results. Once I made a new keyring
> with only one identity (and set the DID to the echo extension),
> everything worked.

Yes, we're aware that multiple identities have not been tested. I'm
fairly certain that the routing engine doesn't really deal with them
properly.

> Hurrah! Thanks Jeremy for creating this functionality, it's very
> exciting progress!
>
> Dan
>
> On 11/19/2012 04:57 PM, Jeremy Lakeman wrote:
"
882,Commotion-dev, collectd number of users,"Tue, 20 Nov 2012 22:00:30 -0500",-0500,Sean McIntyre,"Hey list,

I'm trying to figure out what collectd mod to use to keep track of the
number of users on a node. I think some of you have talked in other
channels saying that keeping track of DHCP leases is the way to go. It
also sounds like one of you (Seamus?) has done this before.

I installed the iptables mod from pre-built packages here
<http://downloads.openwrt.org/snapshots/trunk/ar71xx/packages/> but
for some reason am not getting any data out of it. Here's the relevant
config lines in /etc/collectd.conf.

LoadPlugin iptables
<Plugin ""iptables"">
  Chain ""filter"" ""FORWARD""
  Chain6 ""filter"" ""OUTPUT""
</Plugin"
883,Commotion-dev, collectd number of users,"Wed, 21 Nov 2012 09:25:26 -0500",-0500,Benjamin Chodoroff,"On Tue 20 Nov 2012 10:00:30 PM EST, Sean McIntyre wrote:
> Hey list,
>
> I'm trying to figure out what collectd mod to use to keep track of the
> number of users on a node. I think some of you have talked in other
> channels saying that keeping track of DHCP leases is the way to go. It
> also sounds like one of you (Seamus?) has done this before.
>
> I installed the iptables mod from pre-built packages here
> <http://downloads.openwrt.org/snapshots/trunk/ar71xx/packages/> but
> for some reason am not getting any data out of it. Here's the relevant
> config lines in /etc/collectd.conf.
>
> LoadPlugin iptables
> <Plugin ""iptables"">
>   Chain ""filter"" ""FORWARD""
>   Chain6 ""filter"" ""OUTPUT""
> </Plugin>
>
> Let me know if you see anything / if you've made this work before. I'm
> kinda wondering if a special collectd mod needs to be made for this
> purpose...? (hope not!)
>
> Sean

Just spent a minute looking around for a dhcp lease count collectd 
plugin, but didn't find one. Iptables is one way of doing it, or 
another option is to write a shell script collectd plugin using 
https://collectd.org/wiki/index.php/Plugin:Exec that runs ""cat 
/var/dhcpd.leases | wc -l""

iptables will give a more accurate picture of instantaneous # of users, 
i think.

-b

"
884,Commotion-dev, collectd number of users,"Wed, 21 Nov 2012 09:45:28 -0500",-0500,Seamus Tuohy,"Yea, from my search Ben is right on track. No better way with CollectD.

s2e


On 11/21/2012 09:25 AM, Benjamin Chodoroff wrote:
> On Tue 20 Nov 2012 10:00:30 PM EST, Sean McIntyre wrote:
"
885,Commotion-dev, collectd number of users,"Wed, 21 Nov 2012 22:49:14 -0500",-0500,Sean McIntyre,"Cool, ty Ben and Seamus. Do you guys have working /etc/collectd.conf
with collectd-mod-iptables? I'm researching it, but seems like I'm
going to have to get a bit more up-to-speed with iptables and the mod
to get something working.

Sean

On Wed, Nov 21, 2012 at 9:45 AM, Seamus Tuohy <s2e at opentechinstitute.org> wrote:
> Yea, from my search Ben is right on track. No better way with CollectD.
>
> s2e
>
>
> On 11/21/2012 09:25 AM, Benjamin Chodoroff wrote:
"
886,Commotion-dev, collectd number of users,"Wed, 21 Nov 2012 23:03:45 -0500",-0500,Sean McIntyre,"My understanding is that the following lines in /etc/collectd.conf
should be enough. It will keep track of data going through the output
chain and forward chain.

LoadPlugin iptables
<Plugin ""iptables"">
  Chain ""filter"" ""FORWARD""
  Chain6 ""filter"" ""OUTPUT""
</Plugin"
887,Commotion-dev, collectd number of users,"Fri, 23 Nov 2012 12:47:06 -0500",-0500,Seamus Tuohy,"Hey Sean,

Make sure you loaded the rrdtool plugin. It can't collect data if it
does not have a data collection plugin. You can check out the original
configuration I used when I set it up on a node here.
https://code.commotionwireless.net/projects/commotion/wiki/Hackday-5412

That worked enough to gather data, but it did not use the iptables
plugin. It also does not have the output set to send to an centralized
server, etc. It should give you a foil to check against though.

s2e

On 11/21/2012 11:03 PM, Sean McIntyre wrote:
> My understanding is that the following lines in /etc/collectd.conf
> should be enough. It will keep track of data going through the output
> chain and forward chain.
> 
> LoadPlugin iptables
> <Plugin ""iptables"">
>   Chain ""filter"" ""FORWARD""
>   Chain6 ""filter"" ""OUTPUT""
> </Plugin>
> 
> The symptom is I'm not getting any iptables RRD data / folder in the
> server's /var/lib/collectd/rrd/commotion-230179203 folder.
> 
> Sean
> 
> On Wed, Nov 21, 2012 at 10:49 PM, Sean McIntyre <boxysean at gmail.com> wrote:
"
888,Commotion-dev, Updated fork-shell (commotion-android) available,"Tue, 04 Dec 2012 14:58:46 -0500",-0500,Will Hawkins,"Hello everyone!

I just wanted to write and ask for some help with testing a new version
of fork-shell. In this version of fork-shell, all interaction is done
over standard i/o rather than network i/o. Only the parent process of
fork can give commands and get their output. I think that this will make
fork-shell a) more secure and b) more robust.

The updates exist in a branch of fork-shell called io. To test
fork-shell with the Android app, do the following:

1. From your MeshTether source code root directory,
cd external/fork-shell
2. git pull
3. git checkout io
4. cd -
5. make -C external/ (or the make command you use to build MeshTether
application)
6. ""Clean"" MeshTether (through Eclipse or ant) and build.

That should do it. I have tested it locally and run it through the
various unit tests. But, before I merge io to master, I want to get some
group feedback!

Thanks in advance for giving this a shot and giving feedback!
Will
"
889,Commotion-dev," Current Commotion deployments, bug report template,","Thu, 6 Dec 2012 15:41:09 -0600",-0600,Ben West,"Hi All,

I notice from some issues being filed for Commotion-OpenWRT at
https://code.commotionwireless.net that there are now some nodes deployed
in Detroit.  (Actually I think these nodes have been deployed for months,
but the traffic in new issues in the queue has recently gone up, which is
great!)

Any other locations where folks have both deployed Commotion nodes, and are
active readers of this listserv?

I do not have Commotion nodes deployed consistently in St. Louis (yet), due
to lack of spare hardware available, but I could start pestering some of my
compadres about volunteering for guinea pig duty in exchange for the
awesome wifi.

Finally, and in follow-up to this issue filed about wifi spottiness ...
https://code.commotionwireless.net/issues/342#change-1015
... where to start on a good template for users to follow in reporting bugs?

I can report from years of experience in WasabiNet-land that the lack of
such a template will yield you lots of reports along the lines of ""the wifi
is broken,"" with no other details.  It shouldn't be unreasonable to expect
users willing to file issue reports to also offer with some specific
information.  Indeed, that is the norm on the Lanchdpad queues for Ubuntu,
etc.

The bug reporting form presently available is here:
https://commotionwireless.net/report

What additional data points should we ask for?  For instance ...

- Type of user's device (laptop, tablet, smartphone)
- User's OS and version
- Additional info about user's wifi adapter/driver, if available (e.g.
carl9170, madwifi)
- Type of Commotion node, i.e. UBNT access point, Android device
- Version of Commotion (PR2, PR3, DR1)
- Additional notes about quality of wifi signal, e.g. user had weak signal
to Commotion node, Commotion node itself had weak signal back to gateway
node.

Finally, would it be good to provide a conspicuous link on the bug
reporting form to wiki page(s) explaining how to check for other wifi
devices on a particular 802.11 channel?  That wiki page could provide some
high-level instructions, broken down by popular OS's and devices, about how
to scan the area for free wifi channels.

-- 
Ben West
http://gowasabi.net
ben at gowasabi.net
314-246-9434
"
890,Commotion-dev, Commotion's Community Governance Guidelines,"Thu, 6 Dec 2012 15:48:56 -0600",-0600,Ben West,"I agree with Michael this is a great start.  Also, am I correct that the
governance guidelines, mission, and goals are not yet on the wiki itself?

Besides adding more detail about mission and goals, I think this would be
good publish on the wiki sooner than later, to help Commotion better
identify itself (both to 'insiders' and 'outsiders') as a project based on
participation.  Likewise, perhaps add a conspicuous link to the governance
guidelines to the bug reporting form, in case a casual bug reporter would
like to become more involved?

Presumably, these guidelines would also help establish the process one goes
through in transitioning from 'outsider' to 'insider.'

On Mon, Nov 5, 2012 at 2:39 PM, Seamus Tuohy <s2e at opentechinstitute.org>wrote:

> Hello All,
>
> We have been working on the following draft of Commotion's Community
> Governance Guidelines. The first is a proposal for the overarching
> Commotion project guidelines. The second is a proposed individual
> project guideline for code submission and review. Now that we have a
> rough sketch of what we think we should include we would like to see
> what the active community wants added, removed, reworded, etc.
>
>
>
> Commotion Community Governance Guidelines
>
>   * The Commotion project is an open source, free software toolkit. The
>     community welcomes all contributions and conversations that help the
>     project grow and improve in accordance with its mission.
>   * Commotion?s Mission and Goals are guided by the active developers
>     and community stakeholders who contribute to the project community.
>     Active developers of Commotion projects will guide the development
>     of their individual project.
>   * The Commotion project team encourages communities to customize the
>     software to better meet local needs. We request that all
>     customizations be contributed or communicated back to the Commotion
>     community so that improvements can be reused without undue
>     duplication of effort.
>   * Work on Commotion should do no harm to existing projects. Projects
>     that implement new code that breaks the existing functionality of
>     other Commotion projects should work with the community of the
>     existing project in order to provide support for the existing
>     functions.
>
>   * New members may contribute to existing Commotion projects by
>     collaborating with active developers. Each Commotion subproject will
>     maintain an active version-controlled code repository. Guidelines
>     for contribution will be managed by each project?s active
>     developers, and will be posted on each project?s development page.
>
>
> Commotion Project Governance Guidelines
>
> To contribute to the (___________) project?s code repository you must
> post contributions to the development list for review. When the
> community has reviewed them you will be asked to submit a request to
> submit code so that the community can add your code to the project. At
> the point when repository administrators believe that you have a strong
> grasp of your contributed code?s effect on the rest of the code base,
> and that your intentions are to further the goals of the project with
> all of your contributions, you may be granted access to submit code
> directly to the code base without review. Malicious or damaging code
> that is submitted will cause those privileges to be revoked immediately.
>
>
>
> Thanks,
> Seamus 2e
> _______________________________________________
> Commotion-dev mailing list
> Commotion-dev at lists.chambana.net
> http://lists.chambana.net/mailman/listinfo/commotion-dev
"
891,Commotion-dev," Whether to use encrypted meshing,","Thu, 6 Dec 2012 16:47:10 -0600",-0600,Ben West,"Hi All,

Apologies for the serial emails.

I've been successfully deploying WPA2-encrypted adhoc meshes using OpenWRT
v12.09 beta (aka Attitude Adjustment) here in St. Louis, so I'm starting
this discussion thread now to anticipate Commotion itself presumably moving
the OpenWRT v12.09 stable, when available.  Likewise for when or if Android
adhoc support (and all the Bug 82 drama) achieves enough resolution to also
support encrypted meshing.

This thread doesn't need to have any bearing on the current n2n tunneling
application in Commotion, which can effectively operate as an independent
layer of encryption (albeit with bandwidth constrained by the node's CPU).

First off, here are the assumptions I'm making w/r/t to security, both for
maintenance of such security and to help manage expectations:

   - WPA2 encryption, while certainly better than no encryption, can still
   be broken readily w/o the users of the network knowing about it.
   Realistically, WPA2 encryption can deter casual snooping or routing
   interference, but it should not be considered robust.
   - The decision to use WPA2 encrypted meshing should likewise include the
   decision to use a PSK key of maximum possible entropy (e.g. 63 random
   chars), and a mutual policy to change the key periodically on all nodes.
   - Any wireless transmission of sensitive info to or from a remote node,
   whether or not the mesh uses WPA2 encryption, should itself be thru an
   SSH/SSL/VPN tunnel.  By 'sensitive' I understand firmware images, config
   data including PSK or OLSR keys, passwords, users' MAC addresses, etc.

Next, here are potential questions a Commotion user should answer for
him/herself before encrypting the mesh.  These could help the mesh users
better understand what security the encryption does and doesn't provide.

   - Do you want strangers whom you or other mesh custodians have never met
   to have the ability to configure their nodes and join your mesh on their
   own?  If so, you probably don't need encryption, at least not on the mesh
   where you would like strangers to join.
   - Alternately, would you like such strangers to contact you (or other
   mesh custodians) *in person*, to arrange proper configuration of their
   node?  If not, then this mesh wouldn't benefit from encryption.
   - Furthermore, do you mind recently acquainted strangers, upon having
   their nodes configured to join your encrypted mesh, thereafter gaining the
   ability to observe all (non-tunneled) traffic on the mesh?  If you do mind,
   then this mesh probably doesn't need encryption.

Finally, what are your thoughts for mechanisms for adding new nodes to an
encrypted mesh?  At least, so that the mesh's encryption retains some
degree of usefulness.

   - *Quantum entanglement* metaphor.  Similar to how quantum particles
   become entangled only when in the immediate vicinity of each other, new
   nodes (and their owners) must be brought physically to an existing node and
   its owner.  The new node is configured with the mesh WPA key in person
   only, and thereafter taken to its desired location.
   - *Airmail pickup* metaphor, as illustrated in this
photo<http://npm.si.edu/exhibits/2c2b4_2_stinson.html>.
   A new node is flashed with default settings and installed at a location
   w/in useful wireless range of a encrypted mesh, and the MAC of that node's
   radio is emailed to the mesh custodians, who add it to an internal
   whitelist on their end.  Thereafter, the nodes in the encrypted mesh all
   periodically (e.g. once per day, at off-hours) disable their APs and switch
   their mesh interface to the default channel, w/o encryption, and scan for
   the MAC of the new node.  Upon completing the scan, the nodes switch back
   to encrypted operation.  If an already-configured node finds it is range of
   the new node, it transmits (via SSH/SSL/VPN tunnel) relevant config data
   and the WPA key to new node, who then reboots to join the encrypted mesh.


Further thoughts?

-- 
Ben West
http://gowasabi.net
ben at gowasabi.net
314-246-9434
"
892,Commotion-dev," Whether to use encrypted meshing,","Fri, 7 Dec 2012 10:53:08 +1030",+1030,Jeremy Lakeman,"On Fri, Dec 7, 2012 at 9:17 AM, Ben West <ben at gowasabi.net> wrote:
> Hi All,
>
> Apologies for the serial emails.
>
> I've been successfully deploying WPA2-encrypted adhoc meshes using OpenWRT
> v12.09 beta (aka Attitude Adjustment) here in St. Louis, so I'm starting
> this discussion thread now to anticipate Commotion itself presumably moving
> the OpenWRT v12.09 stable, when available.  Likewise for when or if Android
> adhoc support (and all the Bug 82 drama) achieves enough resolution to also
> support encrypted meshing.
>
> This thread doesn't need to have any bearing on the current n2n tunneling
> application in Commotion, which can effectively operate as an independent
> layer of encryption (albeit with bandwidth constrained by the node's CPU).
>
> First off, here are the assumptions I'm making w/r/t to security, both for
> maintenance of such security and to help manage expectations:
>
> WPA2 encryption, while certainly better than no encryption, can still be
> broken readily w/o the users of the network knowing about it.
> Realistically, WPA2 encryption can deter casual snooping or routing
> interference, but it should not be considered robust.
> The decision to use WPA2 encrypted meshing should likewise include the
> decision to use a PSK key of maximum possible entropy (e.g. 63 random
> chars), and a mutual policy to change the key periodically on all nodes.
> Any wireless transmission of sensitive info to or from a remote node,
> whether or not the mesh uses WPA2 encryption, should itself be thru an
> SSH/SSL/VPN tunnel.  By 'sensitive' I understand firmware images, config
> data including PSK or OLSR keys, passwords, users' MAC addresses, etc.
>
> Next, here are potential questions a Commotion user should answer for
> him/herself before encrypting the mesh.  These could help the mesh users
> better understand what security the encryption does and doesn't provide.
>
> Do you want strangers whom you or other mesh custodians have never met to
> have the ability to configure their nodes and join your mesh on their own?
> If so, you probably don't need encryption, at least not on the mesh where
> you would like strangers to join.
> Alternately, would you like such strangers to contact you (or other mesh
> custodians) in person, to arrange proper configuration of their node?  If
> not, then this mesh wouldn't benefit from encryption.
> Furthermore, do you mind recently acquainted strangers, upon having their
> nodes configured to join your encrypted mesh, thereafter gaining the ability
> to observe all (non-tunneled) traffic on the mesh?  If you do mind, then
> this mesh probably doesn't need encryption.

That's the $64k question.

In order to place any trust in the encryption layer you must also
trust every single person or device that knows the keys to join the
mesh. Wifi encryption may be providing a false sense of security.

> Finally, what are your thoughts for mechanisms for adding new nodes to an
> encrypted mesh?  At least, so that the mesh's encryption retains some degree
> of usefulness.
>
> Quantum entanglement metaphor.  Similar to how quantum particles become
> entangled only when in the immediate vicinity of each other, new nodes (and
> their owners) must be brought physically to an existing node and its owner.
> The new node is configured with the mesh WPA key in person only, and
> thereafter taken to its desired location.
> Airmail pickup metaphor, as illustrated in this photo.  A new node is
> flashed with default settings and installed at a location w/in useful
> wireless range of a encrypted mesh, and the MAC of that node's radio is
> emailed to the mesh custodians, who add it to an internal whitelist on their
> end.  Thereafter, the nodes in the encrypted mesh all periodically (e.g.
> once per day, at off-hours) disable their APs and switch their mesh
> interface to the default channel, w/o encryption, and scan for the MAC of
> the new node.  Upon completing the scan, the nodes switch back to encrypted
> operation.  If an already-configured node finds it is range of the new node,
> it transmits (via SSH/SSL/VPN tunnel) relevant config data and the WPA key
> to new node, who then reboots to join the encrypted mesh.
>
>
> Further thoughts?
>
> --
> Ben West
> http://gowasabi.net
> ben at gowasabi.net
> 314-246-9434
>
>
> _______________________________________________
> Commotion-dev mailing list
> Commotion-dev at lists.chambana.net
> http://lists.chambana.net/mailman/listinfo/commotion-dev
>
"
893,Commotion-dev," Whether to use encrypted meshing,","Fri, 07 Dec 2012 14:10:44 +0200",+0200,Daniel Golle,
894,Commotion-dev, Commotion's Community Governance Guidelines,"Fri, 07 Dec 2012 08:34:18 -0500",-0500,Seamus Tuohy,"The governance guidelines are on the main site at
https://commotionwireless.net/docs/community-governance . I think that
building a mission and goals would be a boon to the project. I don't
know if one was developed before I entered the project. Does anyone know?

The governance page is on the footer and under documentation currently,
I will check to see if we can get it on the bug-page.


Seamus

On 12/06/2012 04:48 PM, Ben West wrote:
> I agree with Michael this is a great start.  Also, am I correct that the
> governance guidelines, mission, and goals are not yet on the wiki itself?
> 
> Besides adding more detail about mission and goals, I think this would be
> good publish on the wiki sooner than later, to help Commotion better
> identify itself (both to 'insiders' and 'outsiders') as a project based on
> participation.  Likewise, perhaps add a conspicuous link to the governance
> guidelines to the bug reporting form, in case a casual bug reporter would
> like to become more involved?
> 
> Presumably, these guidelines would also help establish the process one goes
> through in transitioning from 'outsider' to 'insider.'
> 
> On Mon, Nov 5, 2012 at 2:39 PM, Seamus Tuohy <s2e at opentechinstitute.org>wrote:
> 
"
895,Commotion-dev," Whether to use encrypted meshing,","Sat, 8 Dec 2012 15:10:54 +1030",+1030,Paul Gardner-Stephen,"Hi All,

We have been thinking about some of these problems with the Serval
Project for a while as well.
While we have not come up with a complete solution, we realised early
on that having an unforgeable network identity would be a very useful
thing for any sensible solution in this space.  This is why we use
public keys as the network identifier on the Serval Overlay Mesh
(which is what VoMP sits on).

This means you can at least work out, in a completely distributed
system, whether you are talking to the node that you think you are.
>From there you can start building up the necessary features to obtain
Byzantine Robustness.

On that note, Radia Perlman
(http://en.wikipedia.org/wiki/Radia_Perlman), who wrote the paper
about achieving Routing with Byzantine Robustness
(http://labs.oracle.com/techrep/2005/smli_tr-2005-146.pdf), is one of
the keynotes at Linux Conf Australia this coming January.  A bunch of
us from Serval intend to be there, and might pick her brains on this.

More generally her paper about Routing with Byzantine Robustness is
well worth us all reading (or re-reading) as we look for solutions in
this space.

Paul.

On Fri, Dec 7, 2012 at 10:40 PM, Daniel Golle <daniel.golle at gmail.com> wrote:
> "
896,Commotion-dev," Whether to use encrypted meshing,","Sun, 09 Dec 2012 21:47:07 +0000",+0000,Michael Rogers,
897,Commotion-dev," Whether to use encrypted meshing,","Tue, 11 Dec 2012 14:01:34 +1030",+1030,Paul Gardner-Stephen,"Hello,

On Mon, Dec 10, 2012 at 8:17 AM, Michael Rogers
<michael at briarproject.org> wrote:
> "
898,Commotion-dev," Whether to use encrypted meshing,","Tue, 11 Dec 2012 11:31:13 -0500",-0500,The Doctor,
899,Commotion-dev," Whether to use encrypted meshing,","Tue, 11 Dec 2012 18:42:32 +0000",+0000,Michael Rogers,
900,Commotion-dev, Experiences with AR7xxx based USB wifi adapter?,"Tue, 11 Dec 2012 16:36:39 -0600",-0600,Ben West,"Hi All,

Part of the envisioned testing procedure Commotion involves simulating
multiple nodes (OpenWRT or otherwise) bound together via a virtual mesh
under one VirtualBox host.  Although the mac80211_hwsim library does show
some promise for simulating wireless networks, that library as-is does not
support a single (virtual) radio broadcasting both the adhoc mesh and the
APs.  I instead had been instantiated multiple virtual radios for each
(B)SSID and bridging that radio with a virtual wired interface.

This works, but the Commotion auto-configuration tool doesn't support it,
requiring manual configuration of the nodes, which ultimately reduces the
usefulness of the test procedure.

Other the other hand, VirtualBox is claimed to support connecting USB
peripherals directly to VMs, which opens up the possibility of connecting
USB wifi adapters, i.e. physical radios, to virtual nodes.  I.e. multiple
USB wifi adapters hanging off extension cables plugged into a hub, with
each radio turned down to minimum tx power.

Does anyone on the list happen to have good experience with a particular
brand/model inexpensive USB wifi stick based on Atheros AR72xx?  I happen
to have a single such stick sitting around, brand SMC, but I thus far found
the carl9170 driver that Ubuntu selects for that device kinda crappy.

-- 
Ben West
http://gowasabi.net
ben at gowasabi.net
314-246-9434
"
901,Commotion-dev, Experiences with AR7xxx based USB wifi adapter?,"Wed, 12 Dec 2012 11:03:06 +1030",+1030,Paul Gardner-Stephen,"Hello,

On a related note, I have been thinking for a couple of weeks now that
we need to start specifying what use cases we want to test against for
integration of the Serval and OpenBTS stuff into commotion.

We have been working against some informal use-cases, primarily meshed
BTS->BTS GSM calls and meshed BTS->serval phone calls.  But it would
be a good idea, I think, to try to firm up a well defined set of
use-cases that we should be testing against to make sure that
Commotion has the desired capabilities.

Paul.

On Wed, Dec 12, 2012 at 9:06 AM, Ben West <ben at gowasabi.net> wrote:
> Hi All,
>
> Part of the envisioned testing procedure Commotion involves simulating
> multiple nodes (OpenWRT or otherwise) bound together via a virtual mesh
> under one VirtualBox host.  Although the mac80211_hwsim library does show
> some promise for simulating wireless networks, that library as-is does not
> support a single (virtual) radio broadcasting both the adhoc mesh and the
> APs.  I instead had been instantiated multiple virtual radios for each
> (B)SSID and bridging that radio with a virtual wired interface.
>
> This works, but the Commotion auto-configuration tool doesn't support it,
> requiring manual configuration of the nodes, which ultimately reduces the
> usefulness of the test procedure.
>
> Other the other hand, VirtualBox is claimed to support connecting USB
> peripherals directly to VMs, which opens up the possibility of connecting
> USB wifi adapters, i.e. physical radios, to virtual nodes.  I.e. multiple
> USB wifi adapters hanging off extension cables plugged into a hub, with each
> radio turned down to minimum tx power.
>
> Does anyone on the list happen to have good experience with a particular
> brand/model inexpensive USB wifi stick based on Atheros AR72xx?  I happen to
> have a single such stick sitting around, brand SMC, but I thus far found the
> carl9170 driver that Ubuntu selects for that device kinda crappy.
>
> --
> Ben West
> http://gowasabi.net
> ben at gowasabi.net
> 314-246-9434
>
>
> _______________________________________________
> Commotion-dev mailing list
> Commotion-dev at lists.chambana.net
> http://lists.chambana.net/mailman/listinfo/commotion-dev
"
902,Commotion-dev," Whether to use encrypted meshing,","Wed, 12 Dec 2012 11:05:37 +1030",+1030,Paul Gardner-Stephen,"Thank you both for clear and concise summaries of these issues.

Paul.

On Wed, Dec 12, 2012 at 5:12 AM, Michael Rogers
<michael at briarproject.org> wrote:
> "
903,Commotion-dev, Tests [Was: Re: Experiences with AR7xxx based USB,"Wed, 12 Dec 2012 11:33:57 +0100",+0100,stephane at shimaore.net,"> On a related note, I have been thinking for a couple of weeks now that
> we need to start specifying what use cases we want to test against for
> integration of the Serval and OpenBTS stuff into commotion.
> We have been working against some informal use-cases, primarily meshed
> BTS->BTS GSM calls and meshed BTS->serval phone calls.  But it would
> be a good idea, I think, to try to firm up a well defined set of
> use-cases that we should be testing against to make sure that
> Commotion has the desired capabilities.

I can't help much with the definition of test cases wrt mesh and radio,
but I might be able to help writing voice test cases. Do you have a format
in mind for these? (And eventually, where would they live?)
S.

"
904,Commotion-dev, Tests [Was: Re: Experiences with AR7xxx based,"Wed, 12 Dec 2012 10:37:14 -0500",-0500,Seamus Tuohy,"We have been working on defining the various test cases that we want to
support in house as well.
https://code.commotionwireless.net/projects/commotion/wiki/Testing .
Feel free to use this wiki page as a place to put ideas, so that in teh
next couple of weeks as we firm up the testing procedure on our physical
test bed we can add in your concerns.

Seamus

On 12/12/2012 05:33 AM, stephane at shimaore.net wrote:
"
905,Commotion-dev, Tests [Was: Re: Experiences with AR7xxx based,"Wed, 12 Dec 2012 11:19:55 -0500",-0500,Dan Staples,"Ben,

I believe Seamus recently built a VirtualBox image of Commotion-OpenWRT,
so he might be able to shed some light on how he managed the network
interfaces.

As for a solid USB wifi adapter, I am a big fan of the Alfa AWUS036NEH,
as it supports ad-hoc out-of-the-box on recent linux kernels, and can do
master mode with hostapd just fine. However, I have not been able to use
it to create more than one virtual interface in different wifi modes on
a single Alfa card...so no dual ad-hoc/AP interfaces with one radio.

I've also briefly tried out the TP-Link TL-WN821N, before I melted it
using a cheap USB hub. It has an Atheros chipset that also uses the
carl9170 driver, so probably isn't useful to you if you've had bad
experiences with that driver. As far as I know there is no USB wifi card
based on Atheros AR72xx. linuxwireless.org is my go-to place for
cross-referencing devices to chipsets:

http://linuxwireless.org/en/users/Drivers
http://linuxwireless.org/en/users/Devices/USB

Dan

On 12/12/2012 10:37 AM, Seamus Tuohy wrote:
> We have been working on defining the various test cases that we want to
> support in house as well.
> https://code.commotionwireless.net/projects/commotion/wiki/Testing .
> Feel free to use this wiki page as a place to put ideas, so that in teh
> next couple of weeks as we firm up the testing procedure on our physical
> test bed we can add in your concerns.
>
> Seamus
>
> On 12/12/2012 05:33 AM, stephane at shimaore.net wrote:
"
906,Commotion-dev, Commotion-OpenBTS-Serval live image,"Wed, 12 Dec 2012 14:17:01 -0500",-0500,Dan Staples,"I just put a customized Ubuntu live image into the Commotion-OpenBTS git
repo that includes OpenBTS, OLSRd, and Servald. The current image was
built for the RAD1 transceiver board, but I will add another version
later on built for the USRP. The image can be found in the ISO directory
of the liveboot branch of the repo.

All the components start on boot, and it assigns itself a Serval name
and DID based on the MAC address of the computer's first ethernet
interface. So theoretically if it's booted up with a transceiver plugged
in, it should be able to field any OpenBTS and Serval traffic on a
Commotion mesh network.

That said, the RAD1 transceiver software currently doesn't work, so
testing is a bit difficult. If anyone has a USRP or another transceiver
they'd like to test it on, please do!

Dan

-- 
Dan Staples
Open Technology Institute

"
907,Commotion-dev, Commotion-OpenBTS-Serval live image,"Wed, 12 Dec 2012 23:25:35 +0400",+0400,Alexander Chemeris,"Hi Dan,

Creating a live image with OpenBTS is something we long wanted to do
for our version of OpenBTS. Could you please share the process you
used? We'd love to repeat it here.

PS Seems that git web interface you're using is buggy. Looking at the
liveboot branch I don't see the ISO directory there, though it shows
commit log fine:
https://code.commotionwireless.net/projects/commotion-openbts/repository/show?rev=liveboot

On Wed, Dec 12, 2012 at 11:17 PM, Dan Staples
<danstaples at opentechinstitute.org> wrote:
> I just put a customized Ubuntu live image into the Commotion-OpenBTS git
> repo that includes OpenBTS, OLSRd, and Servald. The current image was
> built for the RAD1 transceiver board, but I will add another version
> later on built for the USRP. The image can be found in the ISO directory
> of the liveboot branch of the repo.
>
> All the components start on boot, and it assigns itself a Serval name
> and DID based on the MAC address of the computer's first ethernet
> interface. So theoretically if it's booted up with a transceiver plugged
> in, it should be able to field any OpenBTS and Serval traffic on a
> Commotion mesh network.
>
> That said, the RAD1 transceiver software currently doesn't work, so
> testing is a bit difficult. If anyone has a USRP or another transceiver
> they'd like to test it on, please do!
>
> Dan
>
> --
> Dan Staples
> Open Technology Institute
>
> _______________________________________________
> Commotion-dev mailing list
> Commotion-dev at lists.chambana.net
> http://lists.chambana.net/mailman/listinfo/commotion-dev



-- 
Regards,
Alexander Chemeris.
CEO, Fairwaves LLC / ??? ???????
http://fairwaves.ru
"
908,Commotion-dev, Experiences with AR7xxx based USB wifi adapter?,"Wed, 12 Dec 2012 13:50:40 -0600",-0600,Ben West,"Hi All,

To follow up, I've made good progress actually getting a USB wifi stick to
work with a VirtualBox guest.  Whether this works or not appears to be
dependent on both your OS and the brand/model of USB wifi adapter.

Thus far, I've verified this works.  Or at least that the guest VM
correctly identifies the USB wifi and loads a driver for it:

VBox host: Ubuntu v11.10 on 32bit x86
VBox version v4.2.4 r81684 (downloaded from virtualbox.org)
VBox extension pack v4.2.4 r81684
Cisco/Linksys WUSB54GC v3 (aka Ralink rt2870)
... with VBox guest Ubuntu v12.10
... with VBox guest Windows XP
*... with VBox guest Commotion OpenWRT* (using rt2800usb kernel model)

On the other hand, my SMCWUSB-N2 (Atheros AR9170 chip) USB adapter does not
work with the VirtualBox USB gateway, regardless of guest OS, which appears
to be specific to this adapter.

Beside Dan's suggestion of AWUS036NEH and TP-Link TL-WN821N, this URL seems
to suggest the TP-Link USB sticks (which are Atheros based) do work for
guests under VirtualBox.  So I'm a gonna get me a couple.
http://top-hat-sec.com/forum/index.php?topic=960.0

Finally, the meshconfig tool doesn't support USB wifu adapters,
unsurprisingly, but I am assuming that modifying it to support such would
be less effort-intensive that modifying mac80211_hwsim.

This should hopefully streamline Commotion testing dramatically, since it
would permit a VM node to mesh directly with physical nodes.

On Tue, Dec 11, 2012 at 4:36 PM, Ben West <ben at gowasabi.net> wrote:

> Hi All,
>
> Part of the envisioned testing procedure Commotion involves simulating
> multiple nodes (OpenWRT or otherwise) bound together via a virtual mesh
> under one VirtualBox host.  Although the mac80211_hwsim library does show
> some promise for simulating wireless networks, that library as-is does not
> support a single (virtual) radio broadcasting both the adhoc mesh and the
> APs.  I instead had been instantiated multiple virtual radios for each
> (B)SSID and bridging that radio with a virtual wired interface.
>
> This works, but the Commotion auto-configuration tool doesn't support it,
> requiring manual configuration of the nodes, which ultimately reduces the
> usefulness of the test procedure.
>
> Other the other hand, VirtualBox is claimed to support connecting USB
> peripherals directly to VMs, which opens up the possibility of connecting
> USB wifi adapters, i.e. physical radios, to virtual nodes.  I.e. multiple
> USB wifi adapters hanging off extension cables plugged into a hub, with
> each radio turned down to minimum tx power.
>
> Does anyone on the list happen to have good experience with a particular
> brand/model inexpensive USB wifi stick based on Atheros AR72xx?  I happen
> to have a single such stick sitting around, brand SMC, but I thus far found
> the carl9170 driver that Ubuntu selects for that device kinda crappy.
>
> --
> Ben West
> http://gowasabi.net
> ben at gowasabi.net
> 314-246-9434
>
"
909,Commotion-dev, Commotion-OpenBTS-Serval live image,"Wed, 12 Dec 2012 14:57:35 -0500",-0500,Dan Staples,"Yup, putting the image in a git repo turned out to be a bad idea and
made things break. I'll upload it elsewhere and send out the link so you
can download it.

I would be glad to share the process I used to create it. I'll write it
up and send it out to the list as well.

Dan

On 12/12/2012 02:25 PM, Alexander Chemeris wrote:
> Hi Dan,
>
> Creating a live image with OpenBTS is something we long wanted to do
> for our version of OpenBTS. Could you please share the process you
> used? We'd love to repeat it here.
>
> PS Seems that git web interface you're using is buggy. Looking at the
> liveboot branch I don't see the ISO directory there, though it shows
> commit log fine:
> https://code.commotionwireless.net/projects/commotion-openbts/repository/show?rev=liveboot
>
> On Wed, Dec 12, 2012 at 11:17 PM, Dan Staples
> <danstaples at opentechinstitute.org> wrote:
"
910,Commotion-dev, Commotion-OpenBTS-Serval live image,"Thu, 13 Dec 2012 00:07:26 +0400",+0400,Alexander Chemeris,"Thanks! How much time would it take to write up? We'd love to get our
own images before we departure to 29c3.

On Wed, Dec 12, 2012 at 11:57 PM, Dan Staples
<danstaples at opentechinstitute.org> wrote:
> Yup, putting the image in a git repo turned out to be a bad idea and
> made things break. I'll upload it elsewhere and send out the link so you
> can download it.
>
> I would be glad to share the process I used to create it. I'll write it
> up and send it out to the list as well.
>
> Dan
>
> On 12/12/2012 02:25 PM, Alexander Chemeris wrote:
"
911,Commotion-dev, Tests [Was: Re: Experiences with AR7xxx based,"Thu, 13 Dec 2012 09:14:12 +1030",+1030,Paul Gardner-Stephen,"Hello Stephane,

On Wed, Dec 12, 2012 at 9:03 PM,  <stephane at shimaore.net> wrote:
"
912,Commotion-dev, Commotion-OpenBTS-Serval live image,"Wed, 12 Dec 2012 18:05:27 -0500",-0500,Dan Staples,"Well I can just give you the summary of what I did:

 1. Do a fresh install of Ubuntu 12.04 LTS on a laptop (32-bit for
    better hardware compatibility).
 2. Enable main/restricted/universe/multiverse repositories
 3. apt-get update/dist-upgrade and then install dependencies: autoconf
    libtool libosip2-dev libortp-dev libusb-1.0-0-dev g++ sqlite3
    libsqlite3-dev erlang libreadline6-dev libboost-all-dev subversion
    git libxml2-dev
 4. Download source code into home directory:
     1. svn checkout http://svn.asterisk.org/svn/asterisk/branches/1.8
        asterisk-1.8
     2. svn co http://wush.net/svn/range/software/public openbts (or
        whatever version you like)
     3. git clone git://github.com/servalproject/serval-dna.git
     4. git clone git://github.com/servalproject/app_servaldna.git
     5. wget http://www.olsr.org/releases/0.6/olsrd-0.6.4.tar.bz2
 5. build and install OLSRd (including nameservice, jsoninfo, txtinfo
    plugins in lib/ directory); configure /etc/olsrd.conf as needed (I
    used Commotion-specific settings)
 6. build and install asterisk
 7. build serval-dna
 8. build and configure app_servaldna (following steps here:
    https://github.com/servalproject/serval-dna/blob/master/doc/OpenBts-setup.md)
 9. add the following to /etc/asterisk/extensions.conf:

        [phones]
        include => openbts

10. build, install, and configure OpenBTS
11. create /etc/rc.local script to start and configure everything on
    boot
    (https://code.commotionwireless.net/projects/commotion-openbts/repository/revisions/liveboot/entry/liveboot/rc.local)
12. rm ~/.bash_history and any other unnecessary customizations ;)
13. install remastersys and create a backup (do not use the ""distro"" option)
14. create bootable USB with the resulting .iso
15. profit

That's the process I used. Let me know if there are any other details
that would be helpful!

Dan


On 12/12/2012 03:07 PM, Alexander Chemeris wrote:
> Thanks! How much time would it take to write up? We'd love to get our
> own images before we departure to 29c3.
>
> On Wed, Dec 12, 2012 at 11:57 PM, Dan Staples
> <danstaples at opentechinstitute.org> wrote:
"
913,Commotion-dev," Whether to use encrypted meshing,","Wed, 12 Dec 2012 18:18:29 -0600",-0600,Ben West,"Likewise, thank you every for the detailed responses, and especially for
providing all the background on what is clearly a well known problem.

W.r.t. authsae mentioned by Daniel, I do find this patch for adding an
authsae daemon to OpenWRT, although I believe this patch is targeted for
802.11s.
http://patchwork.openwrt.org/patch/1350/

Likewise this ticket in the OpenWRT queue:
https://dev.openwrt.org/ticket/12078

Further investigation into authsae options for 802.11n adhoc leads to this
issue filed by Will Hawkins on a very familiar looking website:
https://code.commotionwireless.net/issues/305

""Submitted some patches upstream to cozybit authsae project. Next up,
attempting to upstream patches to the kernel.""

Will, do you happen to links to the patch submissions you made for kernel
and authsae?  I'm curious when this makes its way into OpenWRT trunk.  (No
mention of authsae in recent OpenWRT-devel chatter.)

-- 
Ben West
http://gowasabi.net
ben at gowasabi.net
314-246-9434
"
914,Commotion-dev, Tests [Was: Re: Experiences with AR7xxx based,"Thu, 13 Dec 2012 02:20:59 +0100",+0100,stephane at shimaore.net,"Hi Paul,

> Some use-case level tests that I think make sense are as follows.
[...]
> 1. GSM->GSM VoMP phone call via single OpenBTS
> 2. GSM->GSM VoMP phone call via two meshed OpenBTS (single hop between
> the OpenBTS units)

Funny how the mind works. The type of test cases I had in mind were kind
of perpendicular to those you listed:
- initiate call, caller hang-up
- initiate call, called hang-up
- initiate call, caller put on hold, caller hang up
etc.

We obviously need to document both directions.
S.

"
915,Commotion-dev, Tests [Was: Re: Experiences with AR7xxx based,"Thu, 13 Dec 2012 12:23:12 +1030",+1030,Paul Gardner-Stephen,"Hello,

On Thu, Dec 13, 2012 at 11:50 AM,  <stephane at shimaore.net> wrote:
> Hi Paul,
>
"
916,Commotion-dev, Tests [Was: Re: Experiences with AR7xxx based,"Thu, 13 Dec 2012 11:12:42 -0500",-0500,Andrew Reynolds,"On 12/12/2012 08:53 PM, Paul Gardner-Stephen wrote:
> So, the dreaded question, who is going to work on capturing all this?
> And then turn it into an actionable test regime?
> And then periodically apply it to the code base?

OTI will take ownership of that. We will talk internally today and
figure out who is best suited to be the main point of contact for testing.

-andrew

"
917,Commotion-dev, Fwd: UmTRX beta aka Limited Edition sales start!,"Sat, 15 Dec 2012 13:29:00 +0400",+0400,Alexander Chemeris,"Hi all,

I think this might be interesting for some Commotion developers as well.


"
918,Commotion-dev, UmTRX beta aka Limited Edition sales start!,"Sat, 15 Dec 2012 19:23:34 +0400",+0400,Alexander Chemeris,"The t-shirt picture didn't get through the mailing list, so here is a
link to it:
https://fairwaves.ru/files/Open-Source%20Telecom%20t-shirt.png

On Sat, Dec 15, 2012 at 1:29 PM, Alexander Chemeris
<alexander.chemeris at gmail.com> wrote:
> Hi all,
>
> I think this might be interesting for some Commotion developers as well.
>
>
> "
919,Commotion-dev, Looking for a Commotion-OpenWRT backup tgz from a,"Sat, 15 Dec 2012 15:23:08 -0600",-0600,Ben West,"Hi All,

Might anyone have a Ubiquitui Nanostation M2 which they could flash with
current generation Commotion, boot up, and then extract the tarball gz of
the configuration generated by meshconfig?  (You can do this from the luci
web UI via System -> Backup, I believe.)  I am needing an example of the
network/wireless/firewall setup which meshconfig generates on a device with
two LAN ports, like the NSM2.

Also, if you would prefer, it's fine to scrub the tarball of any private
info you would prefer not to share, e.g. password shadow file, wifi MAC
address.  I do nevertheless promise not to a deploy a 500meter wide yagi
antenna from here in Missouri to snoop on your wifi. ;)

Thanks.

-- 
Ben West
http://gowasabi.net
ben at gowasabi.net
314-246-9434
"
920,Commotion-dev, Unifying Serval and Commotion Mesh,"Mon, 17 Dec 2012 12:37:38 +1030",+1030,Paul Gardner-Stephen,"Hi All,

>From a Serval Project perspective, we see much value in converging on
a single ""standard"" SSID (and ideally BSSID) for WiFi mesh networks
for Serval and Commotion.  The logical choice is almost certainly to
use whatever values that Commotion uses.

In fact, what we would like to see in time is that Commotion and
Serval's Android ad-hoc WiFi mesh management software converge into a
single thing, and possible a single APK that contains all Commotion
and Serval functions, or possibly it will be two separate APKs --
there are arguments for and against.

But back to the present...

The BSSID/ad-hoc bug issues on Android phones remains a source of
intense pain (which is part of why we are working on a ""mesh helper""
device that would basically be a cross between an OpenWRT router and
mobile phone, that would basically be pocket-sized battery-powered
WiFi adhoc+AP plus long-range UHF radio).

So I am not sure that a final solution is possible now, but we are
thinking about our default SSID for the Serval Mesh 0.90 release we
are hoping to have out by Christmas, and we hope to continue the
conversation about converging this all as much as possible.

Our feeling in the lab here is that until we have interoperation
sorted out, that we will probably default to a serval-specific SSID,
probably mesh.servalproject.org, so that it will point people to a
(yet to be populated) web page where they can learn more.  But for
0.91 and later, we hope to make moves towards convergence.  Perhaps
having a short list of configured network names and patterns is the
next step, but this is all really thinking out loud for now.

Paul.

"
921,Commotion-dev, wifis.org,"Mon, 17 Dec 2012 11:43:43 -0500",-0500,Sean McIntyre,"on hacker news today...

http://www.wifis.org/

Seems relevant. :)

Sean
"
922,Commotion-dev, wifis.org,"Mon, 17 Dec 2012 10:56:10 -0600",-0600,Ben West,"The underlying idea is to put a URL in the SSID, e.g. wifis.org/myiwifi .
Commotion-OpenWRT I believe also does this by default, naming the adhoc
mesh 'commotionwireless.net'.

On Mon, Dec 17, 2012 at 10:43 AM, Sean McIntyre <boxysean at gmail.com> wrote:

> on hacker news today...
>
> http://www.wifis.org/
>
> Seems relevant. :)
>
> Sean
>
> _______________________________________________
> Commotion-dev mailing list
> Commotion-dev at lists.chambana.net
> http://lists.chambana.net/mailman/listinfo/commotion-dev
>
"
923,Commotion-dev, Where to do git commits now?,"Mon, 17 Dec 2012 10:59:48 -0600",-0600,Ben West,"Hi All,

I have an updated OpenWRT .config file for x86 and some patches for
ath9k_htc driver.  Where does one make commits to git repos now?

Here (which has been dormant since September)?
https://code.commotionwireless.net/projects/commotion-openwrt/repository

Or here (which has also been dormant since September)?
https://github.com/opentechinstitute/commotion-openwrt

Thanks.

-- 
Ben West
http://gowasabi.net
ben at gowasabi.net
314-246-9434
"
924,Commotion-dev, Unifying Serval and Commotion Mesh,"Mon, 17 Dec 2012 12:04:39 -0500",-0500,Josh King,"Hi Paul,

This is something that we've been thinking about recently here at OTI as
well. I think it makes a lot of sense to standardize around SSIDs and
BSSIDs. Additionally, I'm working on rewriting the way that the OpenWRT
firmware handles connecting to the mesh as a standalone C daemon and
library, something that I hope may eventually serve as a cross-platform
way to manage configuration profiles and wireless connection issues in a
generalized fashion.

In the short term, I've been thinking too about how to make sure that
the Commotion Android application and Serval can work together
effectively on the same device. Would it make sense for Serval to make
use of Meshtether to establish the wifi network if it's available, and
for Meshtether to connect to the Serval application's instance of
servald for encryption, if available?

On Sun 16 Dec 2012 09:07:38 PM EST, Paul Gardner-Stephen wrote:
> Hi All,
>
> From a Serval Project perspective, we see much value in converging on
> a single ""standard"" SSID (and ideally BSSID) for WiFi mesh networks
> for Serval and Commotion.  The logical choice is almost certainly to
> use whatever values that Commotion uses.
>
> In fact, what we would like to see in time is that Commotion and
> Serval's Android ad-hoc WiFi mesh management software converge into a
> single thing, and possible a single APK that contains all Commotion
> and Serval functions, or possibly it will be two separate APKs --
> there are arguments for and against.
>
> But back to the present...
>
> The BSSID/ad-hoc bug issues on Android phones remains a source of
> intense pain (which is part of why we are working on a ""mesh helper""
> device that would basically be a cross between an OpenWRT router and
> mobile phone, that would basically be pocket-sized battery-powered
> WiFi adhoc+AP plus long-range UHF radio).
>
> So I am not sure that a final solution is possible now, but we are
> thinking about our default SSID for the Serval Mesh 0.90 release we
> are hoping to have out by Christmas, and we hope to continue the
> conversation about converging this all as much as possible.
>
> Our feeling in the lab here is that until we have interoperation
> sorted out, that we will probably default to a serval-specific SSID,
> probably mesh.servalproject.org, so that it will point people to a
> (yet to be populated) web page where they can learn more.  But for
> 0.91 and later, we hope to make moves towards convergence.  Perhaps
> having a short list of configured network names and patterns is the
> next step, but this is all really thinking out loud for now.
>
> Paul.
>
> _______________________________________________
> Commotion-dev mailing list
> Commotion-dev at lists.chambana.net
> http://lists.chambana.net/mailman/listinfo/commotion-dev
>
-- 
Josh King

""I am an Anarchist not because I believe Anarchism is the final goal,
but because there is no such thing as a final goal."" -Rudolf Rocker

"
925,Commotion-dev, Where to do git commits now?,"Mon, 17 Dec 2012 12:06:33 -0500",-0500,Josh King,"Hi Ben,

The first one is the repo that you should currently commit to, and the
github one is a mirror. They will most likely swap places in the near
future, but for the moment you can commit directly to the
code.commotionwireless.net site.

I'm currently working on substantially rewriting parts of the OpenWRT
firmware, parts of which I hope to have posted in a separate repo on
code.commotionwireless.net this week.

On Mon 17 Dec 2012 11:59:48 AM EST, Ben West wrote:
> Hi All,
>
> I have an updated OpenWRT .config file for x86 and some patches for
> ath9k_htc driver.  Where does one make commits to git repos now?
>
> Here (which has been dormant since September)?
> https://code.commotionwireless.net/projects/commotion-openwrt/repository
>
> Or here (which has also been dormant since September)?
> https://github.com/opentechinstitute/commotion-openwrt
>
> Thanks.
>
>
>
> _______________________________________________
> Commotion-dev mailing list
> Commotion-dev at lists.chambana.net
> http://lists.chambana.net/mailman/listinfo/commotion-dev
-- 
Josh King

""I am an Anarchist not because I believe Anarchism is the final goal,
but because there is no such thing as a final goal."" -Rudolf Rocker

"
926,Commotion-dev, Where to do git commits now?,"Mon, 17 Dec 2012 12:09:38 -0500",-0500,Andrew Reynolds,"The github repo is actually just a front end to the repo at
code.commotionwireless.net. Either will work.

-andrew

On 12/17/2012 11:59 AM, Ben West wrote:
> Hi All,
> 
> I have an updated OpenWRT .config file for x86 and some patches for
> ath9k_htc driver.  Where does one make commits to git repos now?
> 
> Here (which has been dormant since September)?
> https://code.commotionwireless.net/projects/commotion-openwrt/repository
> 
> Or here (which has also been dormant since September)?
> https://github.com/opentechinstitute/commotion-openwrt
> 
> Thanks.
> 
> 
> 
> _______________________________________________
> Commotion-dev mailing list
> Commotion-dev at lists.chambana.net
> http://lists.chambana.net/mailman/listinfo/commotion-dev
> 


"
927,Commotion-dev, Where to do git commits now?,"Mon, 17 Dec 2012 12:11:42 -0500",-0500,Josh King,"I stand corrected ;-)

On Mon 17 Dec 2012 12:09:38 PM EST, Andrew Reynolds wrote:
> The github repo is actually just a front end to the repo at
> code.commotionwireless.net. Either will work.
>
> -andrew
>
> On 12/17/2012 11:59 AM, Ben West wrote:
"
928,Commotion-dev, Where to do git commits now?,"Mon, 17 Dec 2012 11:24:12 -0600",-0600,Ben West,"Hi Josh,

In lieu of the ""substantially rewriting parts of the OpenWRT"" part, is
there anything I can do that would directly assist your progress?  I.e.
should I just proceed on these documenting / uploading these parts at
current pace, or would you be able to make use of these bits sooner than
later?

- Commotion-OpenWRT images for x86 VirtualBox VM, compiled with driver
support for TP-Link TL-WN821N/TL-WN722N USB adapters?
- The .config files used in compiling the above
- The ath9k_htc driver patches used in compiling the above
- The config tarball used on VirtualBox VM node

I.e. would having a functional Commotion-OpenWRT node under VirtualBox,
albeit with a physical radio via USB, be useful for you?

On Mon, Dec 17, 2012 at 11:06 AM, Josh King <jking at chambana.net> wrote:

> Hi Ben,
>
> The first one is the repo that you should currently commit to, and the
> github one is a mirror. They will most likely swap places in the near
> future, but for the moment you can commit directly to the
> code.commotionwireless.net site.
>
> I'm currently working on substantially rewriting parts of the OpenWRT
> firmware, parts of which I hope to have posted in a separate repo on
> code.commotionwireless.net this week.
>
> On Mon 17 Dec 2012 11:59:48 AM EST, Ben West wrote:
> > Hi All,
> >
> > I have an updated OpenWRT .config file for x86 and some patches for
> > ath9k_htc driver.  Where does one make commits to git repos now?
> >
> > Here (which has been dormant since September)?
> > https://code.commotionwireless.net/projects/commotion-openwrt/repository
> >
> > Or here (which has also been dormant since September)?
> > https://github.com/opentechinstitute/commotion-openwrt
> >
> > Thanks.
> >
> >
> >
> > _______________________________________________
> > Commotion-dev mailing list
> > Commotion-dev at lists.chambana.net
> > http://lists.chambana.net/mailman/listinfo/commotion-dev
> --
> Josh King
>
> ""I am an Anarchist not because I believe Anarchism is the final goal,
> but because there is no such thing as a final goal."" -Rudolf Rocker
>
"
929,Commotion-dev, Where to do git commits now?,"Mon, 17 Dec 2012 12:28:57 -0500",-0500,Josh King,"Hi Ben,

The biggest use I'll have for that list of items personally, is that it 
would make it easier for me to work on and test Commotion while 
travelling for the holidays. So as long as that all gets posted before 
Friday, the current pace is fine :-)

On Mon 17 Dec 2012 12:24:12 PM EST, Ben West wrote:
> Hi Josh,
>
> In lieu of the ""substantially rewriting parts of the OpenWRT"" part, is
> there anything I can do that would directly assist your progress?  I.e.
> should I just proceed on these documenting / uploading these parts at
> current pace, or would you be able to make use of these bits sooner than
> later?
>
> - Commotion-OpenWRT images for x86 VirtualBox VM, compiled with driver
> support for TP-Link TL-WN821N/TL-WN722N USB adapters?
> - The .config files used in compiling the above
> - The ath9k_htc driver patches used in compiling the above
> - The config tarball used on VirtualBox VM node
>
> I.e. would having a functional Commotion-OpenWRT node under VirtualBox,
> albeit with a physical radio via USB, be useful for you?
>
> On Mon, Dec 17, 2012 at 11:06 AM, Josh King <jking at chambana.net> wrote:
>
"
930,Commotion-dev, Unifying Serval and Commotion Mesh,"Tue, 18 Dec 2012 04:15:47 +1030",+1030,Paul Gardner-Stephen,"Hi Josh,

On Tue, Dec 18, 2012 at 3:34 AM, Josh King <jking at chambana.net> wrote:
> Hi Paul,
>
> This is something that we've been thinking about recently here at OTI as
> well. I think it makes a lot of sense to standardize around SSIDs and
> BSSIDs. Additionally, I'm working on rewriting the way that the OpenWRT
> firmware handles connecting to the mesh as a standalone C daemon and
> library, something that I hope may eventually serve as a cross-platform
> way to manage configuration profiles and wireless connection issues in a
> generalized fashion.

I think there is merit in that.

> In the short term, I've been thinking too about how to make sure that
> the Commotion Android application and Serval can work together
> effectively on the same device. Would it make sense for Serval to make
> use of Meshtether to establish the wifi network if it's available, and
> for Meshtether to connect to the Serval application's instance of
> servald for encryption, if available?

Some variation on that makes a lot of sense.  Probably we should look
at what we have in Meshtether and Serval Mesh, and cherry pick the
best from each, so that we can support the most handsets, and then
fold it into one single app that does mesh on Android, and nothing
else.  We can then make use of that (and even bundle it inside) the
Commotion and Serval Mesh APKs.

We are already exposing some APIs on Android for using servald, and we
have wanted for a while to think about the right way to expand that
out, and allow servald to offer secure mesh communications for any app
on the phone (possibly with a SuperUser.apk style prompting the first
(or each) time an app wants to use the mesh).

Both of these would be great for us to find resources to work on and
really facilitate the kind of improved simplicity, interoperability
and de-duplication of effort and interfaces that I think will pay
dividends.

One of the things that might affect how we do that, is that with
support from NLnet Foundation we have begun prototyping non-WiFi mesh
options, e.g., UHF ISM band packet radio, that will be supported by
the Serval Mesh on a ""Mesh Helper"" device in future.

It would make sense to tie that closely with servald, since servald
will need to use these packet radio interfaces which will not be
exposed as an operating system network interface (we don't want ARP
and chatty 3G/4G designed applications cluttering the limited
bandwidth we can obtain).

Yet, it would make sense for all the mesh interfaces to be handled by
the one application, and to offer a unified interface to that, which
suggests it should be in whatever combined application we create for
handling mesh communications.

Perhaps what all this means is that the combined mesh application
should actually be where servald runs.  Then it is just the
user-facing services that end up in a separate app.

Of course, the mesh control and servald are the largest parts of the
Serval Mesh app right now, and so then it starts feeling like all the
Serval Mesh apk functionality should be in there, in which case
convergence would be logical by cherry picking from Meshtether into
the Serval Mesh apk, and changing the Serval Mesh wifi settings to
follow the Commotion scheme. Else the Serval Mesh user services
(telephony, rhizome etc) are accessed from a separate app, but that
feels like artificial separation, and doesn't any significant
advantages, at least as I think about it at 04.15h.

I am not totally settled on all this yet, and this is largely thinking
out loud, but it seems like there is a good potential solution space
that it makes sense to explore further.

Paul.

> On Sun 16 Dec 2012 09:07:38 PM EST, Paul Gardner-Stephen wrote:
"
931,Commotion-dev, wifis.org,"Tue, 18 Dec 2012 04:20:30 +1030",+1030,Paul Gardner-Stephen,"Hi,

On Tue, Dec 18, 2012 at 3:26 AM, Ben West <me at benwest.name> wrote:
> The underlying idea is to put a URL in the SSID, e.g. wifis.org/myiwifi .
> Commotion-OpenWRT I believe also does this by default, naming the adhoc mesh
> 'commotionwireless.net'.

We have been looking at this sort of thing with Serval, too.
I think having a URL is a great way to use SSIDs as free advertising,
and to help people learn about what is being offered.  I think it also
encourages people to connect, although I think we might want to think
about doing some sort of study to find out what makes people think an
SSID is worth (and ok to) try connecting to.  Maybe a student project
opportunity.  Would need ethics approval to run a survey. Hmmm....

Paul.

> On Mon, Dec 17, 2012 at 10:43 AM, Sean McIntyre <boxysean at gmail.com> wrote:
"
932,Commotion-dev, Where to do git commits now?,"Tue, 18 Dec 2012 04:26:19 +1030",+1030,Paul Gardner-Stephen,"This is good to know, as we can look into merging our Mesh Helper work
(currently on OpenWRT Dragino/Dragrove boxes) with the Commotion
OpenWRT work, so that we have servald all set and easy to incorporate
into Commotion on OpenWRT when desired.

Will need to dust off my OpenWRT configuration knowledge to get
Commotion building on the Draginos ...

Paul.

On Tue, Dec 18, 2012 at 3:39 AM, Andrew Reynolds
<andrew at opentechinstitute.org> wrote:
> The github repo is actually just a front end to the repo at
> code.commotionwireless.net. Either will work.
>
> -andrew
>
> On 12/17/2012 11:59 AM, Ben West wrote:
"
933,Commotion-dev, Commotion-OpenWRT on dragino,"Mon, 17 Dec 2012 12:52:17 -0600",-0600,Ben West,"Hi Paul,

The Dragino M12, if that is what you have, is an Atheros AR2317 based
device, which should load the 'atheros' target firmware images for
Commotion.
http://wiki.openwrt.org/toh/dragino/ms12

I have compiled Commotion-OpenWRT fine for atheros target, and I've checked
in the .config file(s) I used to the repo here:
https://code.commotionwireless.net/projects/commotion-openwrt/repository/show?rev=ath5kMinimal

I also have pre-compiled atheros images & config you could try here:
http://info.gowasabi.net/commotion-openwrt/openwrt/atheros.config.20120627
http://info.gowasabi.net/commotion-openwrt/openwrt/atheros-ar2315.minimal.config
http://info.gowasabi.net/commotion-openwrt/openwrt/bin/atheros/
http://info.gowasabi.net/commotion-openwrt/openwrt/bin/atheros-ar2315-minimal/

Note these images have a pre-set root password r0ot56c0MM0t10N .

Follow-up question: how much RAM does your Dragino have?  The 16MB version
would have a hard time running anything besides stripped-down Commotion,
but it looks like a 32MB version is available too.

The 'minimal' config files referenced above were my attempts to compile
Commotion to fit within 16MB RAM.  Images compiled with this config will
mesh and broadcast APs, but they are missing the luci web UI and the splash
page.

On Mon, Dec 17, 2012 at 11:56 AM, Paul Gardner-Stephen <
paul at servalproject.org> wrote:

> This is good to know, as we can look into merging our Mesh Helper work
> (currently on OpenWRT Dragino/Dragrove boxes) with the Commotion
> OpenWRT work, so that we have servald all set and easy to incorporate
> into Commotion on OpenWRT when desired.
>
> Will need to dust off my OpenWRT configuration knowledge to get
> Commotion building on the Draginos ...
>
> Paul.
>
> On Tue, Dec 18, 2012 at 3:39 AM, Andrew Reynolds
> <andrew at opentechinstitute.org> wrote:
> > The github repo is actually just a front end to the repo at
> > code.commotionwireless.net. Either will work.
> >
> > -andrew
> >
> > On 12/17/2012 11:59 AM, Ben West wrote:
> "
934,Commotion-dev, Unifying Serval and Commotion Mesh,"Tue, 18 Dec 2012 08:17:45 +1030",+1030,Jeremy Lakeman,"On Tue, Dec 18, 2012 at 3:34 AM, Josh King <jking at chambana.net> wrote:
> Hi Paul,
>
> This is something that we've been thinking about recently here at OTI as
> well. I think it makes a lot of sense to standardize around SSIDs and
> BSSIDs. Additionally, I'm working on rewriting the way that the OpenWRT
> firmware handles connecting to the mesh as a standalone C daemon and
> library, something that I hope may eventually serve as a cross-platform
> way to manage configuration profiles and wireless connection issues in a
> generalized fashion.
>
> In the short term, I've been thinking too about how to make sure that
> the Commotion Android application and Serval can work together
> effectively on the same device. Would it make sense for Serval to make
> use of Meshtether to establish the wifi network if it's available, and
> for Meshtether to connect to the Serval application's instance of
> servald for encryption, if available?
"
935,Commotion-dev, Field Based Mesh Testing Methodology,"Mon, 17 Dec 2012 16:52:13 -0500",-0500,Seamus Tuohy,"Hello All,


I am working with our field team to ready one of our test beds for
Commotion testing. I want to get as many eyes on our QOS testing pages
for our test beds and release candidates as I can.

https://code.commotionwireless.net/projects/commotion/wiki/Testing

https://code.commotionwireless.net/projects/commotion/wiki/Testing#Release-Candidate-Test-Regiment

If anyone has comments on methods we should use to test some of these
metrics, missing metrics to test, or node set-up for effectively running
these tests please feel free to respond to the dev-list or customize the
wiki-pages.

Over the next month we will be pinning down the tests we will run. So,
if you think certain knowledge about Commotions performance would help
you in your work, make sure it is on our list somewhere.

s2e
"
936,Commotion-dev, Unifying Serval and Commotion Mesh,"Tue, 18 Dec 2012 13:47:22 +1030",+1030,Paul Gardner-Stephen,"On Tue, Dec 18, 2012 at 8:17 AM, Jeremy Lakeman
<Jeremy.Lakeman at gmail.com> wrote:
> On Tue, Dec 18, 2012 at 3:34 AM, Josh King <jking at chambana.net> wrote:
"
937,Commotion-dev, Unifying Serval and Commotion Mesh (Paul,"Tue, 18 Dec 2012 09:56:28 +0000",+0000,Eric de Vries,"
Hi,
I was wondering if anyone had given some thought into taking consideration the SPAN project as well for a possible merge/converge ? They also have a simple and working UI for (dis)activating a mesh network on Android. 

On Sun 16 Dec 2012 09:07:38 PM EST, Paul Gardner-Stephen wrote:
>Hi All,

>From a Serval Project perspective, we see much value in converging on
>a single ""standard"" SSID (and ideally BSSID) for WiFi mesh networks
>for Serval and Commotion.  The logical choice is almost certainly to
>use whatever values that Commotion uses.

>In fact, what we would like to see in time is that Commotion and
>Serval's Android ad-hoc WiFi mesh management software converge into a
>single thing, and possible a single APK that contains all Commotion
>and Serval functions, or possibly it will be two separate APKs --
>there are arguments for and against.

>But back to the present...

>The BSSID/ad-hoc bug issues on Android phones remains a source of
>intense pain (which is part of why we are working on a ""mesh helper""
>device that would basically be a cross between an OpenWRT router and
>mobile phone, that would basically be pocket-sized battery-powered
>WiFi adhoc+AP plus long-range UHF radio).

>So I am not sure that a final solution is possible now, but we are
>thinking about our default SSID for the Serval Mesh 0.90 release we
>are hoping to have out by Christmas, and we hope to continue the
>conversation about converging this all as much as possible.

>Our feeling in the lab here is that until we have interoperation
>sorted out, that we will probably default to a serval-specific SSID,
>probably mesh.servalproject.org, so that it will point people to a
>(yet to be populated) web page where they can learn more.  But for
>0.91 and later, we hope to make moves towards convergence.  Perhaps
>having a short list of configured network names and patterns is the
>next step, but this is all really thinking out loud for now.

>Paul.

"
938,Commotion-dev, Unifying Serval and Commotion Mesh (Paul,"Tue, 18 Dec 2012 16:00:42 -0500",-0500,Hans of Guardian,"
We've made contact with them, but haven't heard from them in a while.  If I remember correctly, they rely on a custom kernel, which is a no go for Serval and Commotion.  But other parts might make sense to merge.

.hc

On Dec 18, 2012, at 4:56 AM, Eric de Vries wrote:

> 
> Hi,
> I was wondering if anyone had given some thought into taking consideration the SPAN project as well for a possible merge/converge ? They also have a simple and working UI for (dis)activating a mesh network on Android. 
> 
> On Sun 16 Dec 2012 09:07:38 PM EST, Paul Gardner-Stephen wrote:
"
939,Commotion-dev, Unifying Serval and Commotion Mesh (Paul,"Wed, 19 Dec 2012 07:35:16 +1030",+1030,Paul Gardner-Stephen,"Hi Eric,

I think it makes a lot of sense to unify these efforts.

Do you know the guys behind SPAN?

Paul.

On Tue, Dec 18, 2012 at 8:26 PM, Eric de Vries <Eric.de.Vries at ict.nl> wrote:
>
> Hi,
> I was wondering if anyone had given some thought into taking consideration the SPAN project as well for a possible merge/converge ? They also have a simple and working UI for (dis)activating a mesh network on Android.
>
> On Sun 16 Dec 2012 09:07:38 PM EST, Paul Gardner-Stephen wrote:
"
940,Commotion-dev, Unifying Serval and Commotion Mesh,"Tue, 18 Dec 2012 16:12:23 -0500",-0500,Hans of Guardian,"
On Dec 17, 2012, at 4:47 PM, Jeremy Lakeman wrote:

> On Tue, Dec 18, 2012 at 3:34 AM, Josh King <jking at chambana.net> wrote:
"
941,Commotion-dev, Unifying Serval and Commotion Mesh (Paul,"Wed, 19 Dec 2012 12:38:21 +1030",+1030,Paul Gardner-Stephen,"Hello,

While a custom kernel isn't ideal, I am happy if they maintain them,
and make them available, as my main objection is the difficulty in
porting useful kernels to every type of phone, followed by rooting.

Paul.

On Wed, Dec 19, 2012 at 7:30 AM, Hans of Guardian
<hans at guardianproject.info> wrote:
>
> We've made contact with them, but haven't heard from them in a while.  If I remember correctly, they rely on a custom kernel, which is a no go for Serval and Commotion.  But other parts might make sense to merge.
>
> .hc
>
> On Dec 18, 2012, at 4:56 AM, Eric de Vries wrote:
>
"
942,Commotion-dev, Unifying Serval and Commotion Mesh,"Wed, 19 Dec 2012 12:49:04 +1030",+1030,Paul Gardner-Stephen,"Hello,

On Wed, Dec 19, 2012 at 7:42 AM, Hans of Guardian
<hans at guardianproject.info> wrote:
>
> On Dec 17, 2012, at 4:47 PM, Jeremy Lakeman wrote:
>
"
943,Commotion-dev, Unifying Serval and Commotion Mesh,"Wed, 19 Dec 2012 07:47:30 -0500",-0500,Dan Staples,"Paul,

I have no idea how well supported it is in android, but would using IPv6
for the mesh be better for avoiding address collision? The private
address space for IPv6 is undoubtedly large enough to avoid address
collision with any significant probability.

And just as a note, Commotion uses the 5.0.0.0/8 block for mesh
addresses. However, I'm not sure what this particular subnet was chosen.

Dan

On 12/18/2012 09:19 PM, Paul Gardner-Stephen wrote:
> Hello,
>
> On Wed, Dec 19, 2012 at 7:42 AM, Hans of Guardian
> <hans at guardianproject.info> wrote:
"
944,Commotion-dev, Unifying Serval and Commotion Mesh,"Wed, 19 Dec 2012 14:27:46 +0100",+0100,stephane at shimaore.net,"> And just as a note, Commotion uses the 5.0.0.0/8 block for mesh
> addresses. However, I'm not sure what this particular subnet was chosen.

Maybe because it was freed at some time? It appears to be allocated to
RIPE nowadays:
  http://www.iana.org/assignments/ipv4-address-space/ipv4-address-space.xml
who has started allocating out of it. So it will conflict with actual,
public IPs.
S.

"
945,Commotion-dev, Unifying Serval and Commotion Mesh,"Wed, 19 Dec 2012 08:47:59 -0500",-0500,Josh King,"In it's earliest incarnation, the Commotion firmware was meant to be interoperable with the R.O.B.I.N. and open-mesh.com firmware, which uses 5.0.0.0/8 by default, presumably because it was formerly unallocated. We've long since superseded any requirement to maintain that default interoperability at all costs, and I've always intended to switch to something else as the default. I know some of the Byzantium folks have suggested 44/8, an unallocated block for amateur radio.

stephane at shimaore.net wrote:

"
946,Commotion-dev, Unifying Serval and Commotion Mesh,"Wed, 19 Dec 2012 09:18:59 -0500",-0500,Hans of Guardian,"
On Dec 19, 2012, at 7:47 AM, Dan Staples wrote:

> On 12/18/2012 09:19 PM, Paul Gardner-Stephen wrote:
"
947,Commotion-dev, Unifying Serval and Commotion Mesh,"Wed, 19 Dec 2012 09:34:04 -0500",-0500,The Doctor,
948,Commotion-dev, Unifying Serval and Commotion Mesh,"Wed, 19 Dec 2012 16:49:15 +0100",+0100,stephane at shimaore.net,"> This is true, and one of the things we've considered at Project
> Byzantium.  There are lots of IP blocks out there that aren't used on
> the public Net, and both Babel and OLSR are more than happy to set up
> routes between nodes That Just Work (tm).

IPv6 in a non-Internet connected network is probably a good choice.

One thing to be careful about (for Internet-connected meshes), is
that IPv6 connectivity is far from ubiquituous: the node(s) on the mesh
that connect to the Internet might not be able to route IPv6, for
example because their ISPs don't support it yet -- this should become
less of an issue over time. Hopefully that's already taken into account
by the mesh routing protocol.

Maybe more awkwardly, IPv6 and IPv4 are actually more like two separate
technologies when it comes to connectivity: the same way that at some
point in time you could access the Internet over IPX and over IPv4 (I'm
showing my age..), nowadays you can access it using IPv6 and IPv4, but
the two shall not meet easily.  The best bet is still to have a
dual-stack, which doesn't completely eliminate issues, especially if
availability/resilience of one protocol might differ from the one for the
other protocol (for example bad IPv6 connectivity but good IPv4
connectivity, with a client that tries IPv6 first, which is normally the
case).

Finally, I don't know about serval, but my experience with IPv6 and IPv4
and VoIP is that most stacks do not handle both together well; I'm not
even talking about creepy situations where signaling might use one and
media the other. >:)
S.

"
949,Commotion-dev, Unifying Serval and Commotion Mesh,"Wed, 19 Dec 2012 11:24:39 -0500",-0500,The Doctor,
950,Commotion-dev," Whether to use encrypted meshing,","Wed, 19 Dec 2012 13:15:13 -0500",-0500,Will Hawkins,"Ben,

Sorry for just now responding!

On 12/12/2012 07:18 PM, Ben West wrote:
> Likewise, thank you every for the detailed responses, and especially for
> providing all the background on what is clearly a well known problem.
> 
> W.r.t. authsae mentioned by Daniel, I do find this patch for adding an
> authsae daemon to OpenWRT, although I believe this patch is targeted for
> 802.11s.
> http://patchwork.openwrt.org/patch/1350/
> 
> Likewise this ticket in the OpenWRT queue:
> https://dev.openwrt.org/ticket/12078
> 
> Further investigation into authsae options for 802.11n adhoc leads to
> this issue filed by Will Hawkins on a very familiar looking website:
> https://code.commotionwireless.net/issues/305
> 
> ""Submitted some patches upstream to cozybit authsae project. Next up,
> attempting to upstream patches to the kernel.""
> 
> Will, do you happen to links to the patch submissions you made for
> kernel and authsae?  I'm curious when this makes its way into OpenWRT
> trunk.  (No mention of authsae in recent OpenWRT-devel chatter.)

I have links to the patches that I submitted for the Linux kernel to
make authsae possible over adhoc networks. The change is a rather modest
two lines and was accepted into the kernel months ago. If you are
running compat-wireless or a recent kernel you probably already have the
change. Otherwise, you can look here:
http://git.kernel.org/?p=linux/kernel/git/jberg/mac80211.git;a=commit;h=3bfda62c50b0a4b118dcfce36686508ca2892292
http://git.kernel.org/?p=linux/kernel/git/jberg/mac80211.git;a=commit;h=452a6d22615bb8262a932b362f41fc5d89f03293
http://git.kernel.org/?p=linux/kernel/git/jberg/mac80211.git;a=commit;h=6abe0563224f8540c88e1d84d2bb394bd408c951

As for the authsae patches, I submitted them to the Cozybit developers.
They suggested improvements/changes and we went back and forth several
times. We stopped going down that path because we decided that it would
ultimately be better to integrate authsae directly with wpa_supplicant
so that we would not need to add an extra binary into Commotion. But, if
you are curious, you can look here:
https://github.com/hawkinswnaf/authsae

Fortunately, the cozybit people already have a ""custom"" wpa_supplicant
with authsae support. Yet, that's not the end of the issue. The signal
that they used to trigger an authsae handshake was not available for
adhoc nodes. That recently changed. Within the last week there was a
kernel patch that will allow us to grab a signal when a new peer adhoc
node is available for authentication. This means that we'll have an
easier time integrating authsae for mesh in wpa_supplicant.

I hope this information helped provide a little bit of background about
what we are working on with authsae. It's a pretty long-winded way of
saying, ""we're working on it"". :-)  Let me know your thoughts!

Talk to you soon!
Will

> 
> -- 
> Ben West
> http://gowasabi.net
> ben at gowasabi.net <mailto:ben at gowasabi.net>
> 314-246-9434
> 
> 
> 
> _______________________________________________
> Commotion-dev mailing list
> Commotion-dev at lists.chambana.net
> http://lists.chambana.net/mailman/listinfo/commotion-dev
> 
"
951,Commotion-dev, Unifying Serval and Commotion Mesh,"Thu, 20 Dec 2012 07:01:53 +1030",+1030,Paul Gardner-Stephen,"Hi All,

>From a Serval perspective, we chose to stick with IPv4 for a few reasons:

1. IPv4 headers are smaller, which on limited bandwidth is always a
good thing, especially when you start passing around lots of addresses
to manage your topology.
2. At a global scale 64 bits of host address in IPv6 is actually a bit
marginal for avoiding collisions among randomly self-allocated
addresses.  This is more of a concern for networks consisting of very
mobile devices, such as phones.  Overall, it can probably be managed.
3. IPv6 adds overhead without actually solving some of the more
important problems, such as preventing address spoofing, really
avoiding address collisions, and allowing easy end-to-end encryption.
Our view is that a public-key based overlay is a better solution,
which is why we have created one.  We dealt with the long-address
problem by baking in address abbreviation, so that the shortest unique
prefix of each address is used, reducing overhead to sub-IPv4 levels
in many cases, and combined overlay+IPv4 overhead to less than IPv6
overhead.
4. IPv6 is not available on all devices we wish to support, e.g., some
Symbian phones, Windows Mobile phones, and very likely some Android
phones.  See http://en.wikipedia.org/wiki/Comparison_of_IPv6_support_in_operating_systems.
5. We are creating digital packet radio interfaces for long-range
meshing that will have insufficient bandwidth to support IPv6
overhead.

Of course, for Serval the equation is a little different, because
routing traditional TCP/IP traffic is not our highest priority.

I should add that some of our team is more sympathetic to IPv6 than I
am, and that we don't see a problem with making use of IPv6 when it is
available, but, personally, I am somewhat reluctant to rely on it, and
harbor concerns about the increased overhead, at least unless some
sort of address abbreviation is used in the routing protocols (which
maybe it already is by now).

Paul.

On Thu, Dec 20, 2012 at 2:54 AM, The Doctor <drwho at virtadpt.net> wrote:
> "
952,Commotion-dev, Unifying Serval and Commotion Mesh,"Wed, 19 Dec 2012 15:36:01 -0500",-0500,Josh King,"Hi Paul,

Something I've thought about but which I should probably ask your 
opinion on: what do you think about the feasibility of a generic serval 
 MDP proxy which presents, say, a SOCKS interface or something for 
sending generic TCP/IP traffic through the overlay network?

On Wed 19 Dec 2012 03:31:53 PM EST, Paul Gardner-Stephen wrote:
> OpenPGP: *Parts of the message have NOT been signed or encrypted*
>
> Hi All,
>
> From a Serval perspective, we chose to stick with IPv4 for a few reasons:
>
> 1. IPv4 headers are smaller, which on limited bandwidth is always a
> good thing, especially when you start passing around lots of addresses
> to manage your topology.
> 2. At a global scale 64 bits of host address in IPv6 is actually a bit
> marginal for avoiding collisions among randomly self-allocated
> addresses.  This is more of a concern for networks consisting of very
> mobile devices, such as phones.  Overall, it can probably be managed.
> 3. IPv6 adds overhead without actually solving some of the more
> important problems, such as preventing address spoofing, really
> avoiding address collisions, and allowing easy end-to-end encryption.
> Our view is that a public-key based overlay is a better solution,
> which is why we have created one.  We dealt with the long-address
> problem by baking in address abbreviation, so that the shortest unique
> prefix of each address is used, reducing overhead to sub-IPv4 levels
> in many cases, and combined overlay+IPv4 overhead to less than IPv6
> overhead.
> 4. IPv6 is not available on all devices we wish to support, e.g., some
> Symbian phones, Windows Mobile phones, and very likely some Android
> phones.  See http://en.wikipedia.org/wiki/Comparison_of_IPv6_support_in_operating_systems.
> 5. We are creating digital packet radio interfaces for long-range
> meshing that will have insufficient bandwidth to support IPv6
> overhead.
>
> Of course, for Serval the equation is a little different, because
> routing traditional TCP/IP traffic is not our highest priority.
>
> I should add that some of our team is more sympathetic to IPv6 than I
> am, and that we don't see a problem with making use of IPv6 when it is
> available, but, personally, I am somewhat reluctant to rely on it, and
> harbor concerns about the increased overhead, at least unless some
> sort of address abbreviation is used in the routing protocols (which
> maybe it already is by now).
>
> Paul.
>
> On Thu, Dec 20, 2012 at 2:54 AM, The Doctor <drwho at virtadpt.net> wrote:
"
953,Commotion-dev, Unifying Serval and Commotion Mesh,"Thu, 20 Dec 2012 08:34:58 +1030",+1030,Paul Gardner-Stephen,"Hello,

On Thu, Dec 20, 2012 at 7:06 AM, Josh King <jking at chambana.net> wrote:
> Hi Paul,
>
> Something I've thought about but which I should probably ask your
> opinion on: what do you think about the feasibility of a generic serval
>  MDP proxy which presents, say, a SOCKS interface or something for
> sending generic TCP/IP traffic through the overlay network?

Yes, that would be quite feasible, and is something that we have
thought about doing for a while.

The main ingredient needed would be ""Reliable MDP"", i.e., a TCP-like
reliable stream service to complement the UDP-like MDP.  This would be
quite feasible, but to do it right would take some effort. Naively
implementing TCP semantics is probably not the right solution.  It
probably makes sense to incorporate some of the Network Coding (see
http://www.mit.edu/~medard/papers2011/Modeling%20Network%20Coded%20TCP.pdf)
in this, so that packet loss doesn't get interpreted as congestion.

In the meanwhile, we do have an unofficial HTTP interface to Rhizome
that can be leveraged and extended to provide some internet-connected
services in the meantime. That interface is probably better for
providing off-grid content, and we have plans to implement distributed
content/learning management systems on this at some point.

Paul.

> On Wed 19 Dec 2012 03:31:53 PM EST, Paul Gardner-Stephen wrote:
"
954,Commotion-dev, NetworKManager: the good news and the bad news,"Wed, 19 Dec 2012 17:04:58 -0500",-0500,Hans of Guardian,"
Now that I'm back from paternity leave and getting sleep (waking up only once a night!), I'm ready to dive back in.  Did anyone have any luck tracking down an OUI?

.hc

On Oct 26, 2012, at 10:57 AM, Josh King wrote:

> Seems like we can try both. Will is currently looking into finding out
> whether there's an allied organization that might have an OUI, whom we
> could reach out to about using it for this purpose. Otherwise, we may
> look into whether OTI can just pay for one for Commotion. This could be
> independent of the rest of the discovery and configuration piece.
> 
> On 10/24/2012 09:19 PM, Jeremy Lakeman wrote:
"
955,Commotion-dev, Commotion OpenWRT on Dragino Build Problems,"Thu, 20 Dec 2012 08:36:24 +1030",+1030,Paul Gardner-Stephen,"Hi all,

I have just tried building commotion-openwrt from github for the
Draginos (AR2317 based).
The openwrt build process fails with some problems with compiling the
linux kernel as far as I can see.  Anyone have any tips on how to sort
this out?  Compilation errors follow.

make[5]: Leaving directory
`/home/gardners/commotion-openwrt/openwrt/build_dir/linux-atheros/linux-3.3.4'
. /home/gardners/commotion-openwrt/openwrt/include/shell.sh; grep
'=[ym]' /home/gardners/commotion-openwrt/openwrt/build_dir/linux-atheros/linux-3.3.4/.config
| LC_ALL=C sort | md5s >
/home/gardners/commotion-openwrt/openwrt/build_dir/linux-atheros/linux-3.3.4/.vermagic
touch /home/gardners/commotion-openwrt/openwrt/build_dir/linux-atheros/linux-3.3.4/.configured
rm -f /home/gardners/commotion-openwrt/openwrt/build_dir/linux-atheros/linux-3.3.4/vmlinux
/home/gardners/commotion-openwrt/openwrt/build_dir/linux-atheros/linux-3.3.4/System.map
make -C /home/gardners/commotion-openwrt/openwrt/build_dir/linux-atheros/linux-3.3.4
CROSS_COMPILE=""mips-openwrt-linux-uclibc-"" ARCH=""mips""
KBUILD_HAVE_NLS=no CONFIG_SHELL=""/bin/bash"" V=''
CC=""mips-openwrt-linux-uclibc-gcc"" modules
make[5]: Entering directory
`/home/gardners/commotion-openwrt/openwrt/build_dir/linux-atheros/linux-3.3.4'
  CHK     include/linux/version.h
  CHK     include/generated/utsrelease.h
  CALL    scripts/checksyscalls.sh
  CC [M]  fs/autofs4/init.o
  CC [M]  fs/autofs4/inode.o
  CC [M]  fs/autofs4/root.o
  CC [M]  fs/autofs4/symlink.o
  CC [M]  fs/autofs4/waitq.o
  CC [M]  fs/autofs4/expire.o
  CC [M]  fs/autofs4/dev-ioctl.o
  LD [M]  fs/autofs4/autofs4.o
  CC [M]  fs/nls/nls_base.o
  CC [M]  crypto/algapi.o
  CC [M]  crypto/scatterwalk.o
  CC [M]  crypto/proc.o
  LD [M]  crypto/crypto_algapi.o
  CC [M]  crypto/aes_generic.o
  CC [M]  crypto/arc4.o
  CC [M]  drivers/leds/leds-gpio.o
In file included from
/home/gardners/commotion-openwrt/openwrt/build_dir/linux-atheros/linux-3.3.4/arch/mips/include/asm/mach-ar231x/gpio.h:4:0,
                 from
/home/gardners/commotion-openwrt/openwrt/build_dir/linux-atheros/linux-3.3.4/arch/mips/include/asm/gpio.h:4,
                 from include/linux/gpio.h:30,
                 from include/linux/of_gpio.h:20,
                 from drivers/leds/leds-gpio.c:18:
/home/gardners/commotion-openwrt/openwrt/build_dir/linux-atheros/linux-3.3.4/arch/mips/include/asm/mach-ar231x/ar231x.h:
In function 'ar231x_read_reg':
/home/gardners/commotion-openwrt/openwrt/build_dir/linux-atheros/linux-3.3.4/arch/mips/include/asm/mach-ar231x/ar231x.h:32:2:
error: implicit declaration of function '__raw_readl'
[-Werror=implicit-function-declaration]
/home/gardners/commotion-openwrt/openwrt/build_dir/linux-atheros/linux-3.3.4/arch/mips/include/asm/mach-ar231x/ar231x.h:
In function 'ar231x_write_reg':
/home/gardners/commotion-openwrt/openwrt/build_dir/linux-atheros/linux-3.3.4/arch/mips/include/asm/mach-ar231x/ar231x.h:38:2:
error: implicit declaration of function '__raw_writel'
[-Werror=implicit-function-declaration]
In file included from
/home/gardners/commotion-openwrt/openwrt/build_dir/linux-atheros/linux-3.3.4/arch/mips/include/asm/page.h:51:0,
                 from include/linux/mmzone.h:20,
                 from include/linux/gfp.h:4,
                 from include/linux/slab.h:12,
                 from drivers/leds/leds-gpio.c:19:
/home/gardners/commotion-openwrt/openwrt/build_dir/linux-atheros/linux-3.3.4/arch/mips/include/asm/io.h:
At top level:
/home/gardners/commotion-openwrt/openwrt/build_dir/linux-atheros/linux-3.3.4/arch/mips/include/asm/io.h:421:1:
warning: conflicting types for '__raw_writel' [enabled by default]
/home/gardners/commotion-openwrt/openwrt/build_dir/linux-atheros/linux-3.3.4/arch/mips/include/asm/io.h:421:1:
error: static declaration of '__raw_writel' follows non-static
declaration
/home/gardners/commotion-openwrt/openwrt/build_dir/linux-atheros/linux-3.3.4/arch/mips/include/asm/mach-ar231x/ar231x.h:38:2:
note: previous implicit declaration of '__raw_writel' was here
/home/gardners/commotion-openwrt/openwrt/build_dir/linux-atheros/linux-3.3.4/arch/mips/include/asm/io.h:421:1:
error: conflicting types for '__raw_readl'
/home/gardners/commotion-openwrt/openwrt/build_dir/linux-atheros/linux-3.3.4/arch/mips/include/asm/mach-ar231x/ar231x.h:32:9:
note: previous implicit declaration of '__raw_readl' was here
cc1: some warnings being treated as errors

make[7]: *** [drivers/leds/leds-gpio.o] Error 1
make[6]: *** [drivers/leds] Error 2
make[5]: *** [drivers] Error 2
make[5]: Leaving directory
`/home/gardners/commotion-openwrt/openwrt/build_dir/linux-atheros/linux-3.3.4'
make[4]: *** [/home/gardners/commotion-openwrt/openwrt/build_dir/linux-atheros/linux-3.3.4/.modules]
Error 2
make[4]: Leaving directory
`/home/gardners/commotion-openwrt/openwrt/target/linux/atheros'
make[3]: *** [compile] Error 2
make[3]: Leaving directory
`/home/gardners/commotion-openwrt/openwrt/target/linux'
make[2]: *** [target/linux/compile] Error 2
make[2]: Leaving directory `/home/gardners/commotion-openwrt/openwrt'
make[1]: *** [/home/gardners/commotion-openwrt/openwrt/staging_dir/target-mips_uClibc-0.9.33/stamp/.target_compile]
Error 2
make[1]: Leaving directory `/home/gardners/commotion-openwrt/openwrt'
make: *** [world] Error 2
[gardners at fedora-on-mbp openwrt]$ make V=99
make[1]: Entering directory `/home/gardners/commotion-openwrt/openwrt'
make[2]: Entering directory `/home/gardners/commotion-openwrt/openwrt'
make[3]: Entering directory
`/home/gardners/commotion-openwrt/openwrt/target/linux'
make[4]: Entering directory
`/home/gardners/commotion-openwrt/openwrt/target/linux/atheros'
/home/gardners/commotion-openwrt/openwrt/scripts/kconfig.pl  +
/home/gardners/commotion-openwrt/openwrt/target/linux/generic/config-3.3
/home/gardners/commotion-openwrt/openwrt/target/linux/atheros/config-3.3
> /home/gardners/commotion-openwrt/openwrt/build_dir/linux-atheros/linux-3.3.4/.config.target
awk '/^(#[[:space:]]+)?CONFIG_KERNEL/{sub(""CONFIG_KERNEL_"",""CONFIG_"");print}'
/home/gardners/commotion-openwrt/openwrt/.config "
956,Commotion-dev, Commotion OpenWRT on Dragino Build Problems,"Wed, 19 Dec 2012 16:17:02 -0600",-0600,Ben West,"Hi Paul,

This is a known problem with some generations of OpenWRT trunk that precede
the v12.09 Attitude Adjustment version they're working on now.  The
work-around is either to disable CONFIG_PACKAGE_kmod-leds-gpio in the
OpenWRT .config file or disable the corresponding option in the kernel
itself (illustrated below).

Here is a diff relevant to the openwrt root directory:

Index: target/linux/atheros/config-3.3
===================================================================
"
957,Commotion-dev, Unifying Serval and Commotion Mesh (Paul,"Thu, 20 Dec 2012 09:30:58 +0000",+0000,Eric de Vries,"Hi Paul and Hans,
to answer your question Paul : yes I have contact with them (SPAN).
I will make them aware about this discussion so that they can reply as well, I am pretty sure they would be interested nut they simply might not be aware of this discussion !

On Wed 19 Dec 2012 07:35:16 PM EST, Paul Gardner-Stephen wrote:

>Hi Eric,

>I think it makes a lot of sense to unify these efforts.

>Do you know the guys behind SPAN?

>Paul.
"
958,Commotion-dev, UmTRX beta aka Limited Edition sales start!,"Sat, 15 Dec 2012 15:17:27 -0000",-0000,Alexander Chemeris,"Now with the t-shirt picture.

On Sat, Dec 15, 2012 at 1:29 PM, Alexander Chemeris
<alexander.chemeris at gmail.com> wrote:
> Hi all,
>
> I think this might be interesting for some Commotion developers as well.
>
>
> "
959,Commotion-dev, Virtual Commotion-OpenWRT with real wifi radios for,"Tue, 1 Jan 2013 02:05:31 -0600",-0600,Ben West,"Hi All,

I've updated / added the following wiki pages to record my progress in
getting Commotion-OpenWRT nodes under VirtualBox and VMware Player to work
with real USB wifi adapters.  The idea is that a virtual Commotion node
would be more convenient for rapid testing / development cycles than
testing directly on the target device.  Do note these virtual nodes are not
useful for performance testing (e.g. wireless reception / throughput); that
would still require the target hardware.

https://code.commotionwireless.net/projects/commotion/wiki/Virtual-Box
How to run Commotion as a guest VM under VirtualBox.

https://code.commotionwireless.net/projects/commotion/wiki/Virtual-Box-Real-Mesh
How to deploy Commotion as a guest under VirtualBox, with a USB wifi
adapter.

https://code.commotionwireless.net/projects/commotion/wiki/Virtual-Box-Virtual-Mesh
How to deploy Commotion as multiple guest VMs under a single VirtualBox
host, with a virtual mesh between the nodes.

https://code.commotionwireless.net/projects/commotion/wiki/VMware-Player
How to run Commotion as a guest VM under VMware Player.

Compatible images, config tarballs, and VirtualBox appliances files may be
downloaded from https://code.commotionwireless.net/projects/commotion/files

Note that VirtualBox is far less robust than VMware in attaching USB
peripherals to VM guests, so you may likely have to use VMware.  Likewise,
both VirtualBox and VMware will only simulate guests compiled for the x86
platform, although that does not appear to affect function of the
compat-wireless drivers.

Please do respond with your experiences and ideas about using virtual
Commotion nodes for testing and development, or suggested edits to the wiki
pages cited above.  I am planning to assemble suites of automated test
vectors that may be executed on these virtual nodes, with goal of reducing
complexity of the required testing environment (e.g. not every tester needs
a Nanostation M2 on hand).

P.S. Happy new year!

-- 
Ben West
http://gowasabi.net
ben at gowasabi.net
314-246-9434
"
960,Commotion-dev, MeshTether to the Play Store,"Fri, 4 Jan 2013 19:07:15 -0500",-0500,Hans of Guardian,"
Are there any plans for getting MeshTether in the Google Play Store?  I think that could be a good way to get a lot of testers.  It should be listed with a fair amount of caveats, but it certainly would be a fast to find out which devices it works on.

I don't think the risk of it damaging phones is high at all.  Mostly the risk is that we'll get a fair amount of negative feedback because it won't work on most devices (i.e. Samsung).

.hc
"
961,Commotion-dev, Unifying Serval and Commotion Mesh (Paul,"Fri, 4 Jan 2013 19:36:58 -0500",-0500,stoker,"Thanks Eric for pulling SPAN into the conversation. I'm a bit late to
the party but thanks to Seamus I'm finally subscribed to the
commotion-dev mailing list.

SPAN is a framework for mesh network experimentation on the Android
platform (iOS support is also in the works). Don't be turned off by
the ""experimentation"" aspect - SPAN is quite functional. We like to
express that SPAN is constantly being advanced and we're very open to
new ideas.

Here's a high-level breakdown for those who aren't familiar with SPAN:

- We have an Manet Service and associated API that allows apps to turn
ad-hoc mode on and off, configure various network settings
programmatically and through a config file, query the network status
and routing information, and return a list of reachable peers. Also,
the device can be configured connect to traditional network
infrastructure via the cell chip or a secondary wireless network
adapter.

- We have a simple Manet Manager UI for configuring the network and
starting / stopping ad-hoc mode. We're working on allowing user to
share the app and config info by physically bumping phones (NFC).

- We have a simple mesh network visualizer app developed using
Processing for Android.

- We use standard Linux tools such as ifconfig, iwconfig, and iptables
to configure the wireless network adapter. As long as apps use the
right IP address they do not need to use the Manet Service API or be
modified in any way to make use of the ad-hoc network.

- Currently we support OLSR, but are not tied to any particular
routing protocol. We're interested in supporting reactive protocols to
cut down on network chatter. We like the idea of remaining as silent
as possible until you need to send data; however, complete silence
doesn't seem possible because at a minimum beacon frames will be sent
out and handled by the MAC layer.

- We're in the process of using tinc to create P2P VPN network
overlays on top of the mesh and using the openssl library to support a
variety of encryption algorithms.

- Public keys will be side-loaded or shared by physically bumping
phones with peers. Key pairs will also be generated on the device.
We'll support X.509 certs if users have a CA. The Manet Manager will
provide a convenient UI for sharing and managing keys and certs.

Here's a list of some of the things we want to stay away from:

- Being tied to a custom routing or mesh networking protocol. Custom
solutions often work very well and have their merits, but as a mesh
experimentation framework we'd like our protocols to be plug-and-play
if possible. Wouldn't it be great if there was a common API for
interacting with such protocols? It would be even better if they
worked transparently. That's why we're leaning towards a global device
proxy that intercepts all outgoing and incoming packets and sends them
to our Manet Service for mesh-related processing.

- Data interception and MITM attacks. The idea of sending your public
key over the open air without a pre-existing authentication mechanism
presents an opportunity for identify spoofing and a MITM attack.
That's why we plan on sharing keys via side-loading or a phone bump.
Also, broadcasting data packets makes it relatively simple to sniff
those packets without placing a malicious device in promiscuous mode
or monitor mode. We'd like to encapsulate full IP packets + headers in
VPN tunnel mode. Also, we'd like to encrypt the routing protocol
traffic itself to prevent malicious entities from manipulating the
network topology and perform DoS attacks.

Some things of note:

- SPAN provides a generic ad-hoc enabler - that is, if your device is
rooted, your wireless chipset driver module supports ad-hoc mode, and
your kernel supports wireless extensions (wext). Devices with Broadcom
chips work the best - about half the time the kernel or module code
needs to be slightly modified or built with new kernel options. It's
not our goal to customize a kernel for each Android device out there.
It would be great if there was a way to roll in the necessary kernel
modifications into CyanogenMod or the like, but the device-specific
nature of those customizations makes that relatively difficult. Also,
it seems that CyanogenMod's intention is to stay as ""vanilla"" as
possible and to focus kernel changes on performance and stability
improvements.

- We modified the pttdroid app. to get group voice chat working over
the mesh. The intent is to provide a simple replacement for
traditional push-to-talk (PTT) land mobile radios (LMRs) in a close /
moderate range environment. The app. is very simple - it's not
session-based and uses UDP, which works well in a mesh where people go
in and out of range at will. Using the app. you can see what other
peers are in the network, talk to them individually, create groups of
them, or passively listen for all incoming communications. The app.
doesn't support SIP or connect to a VOIP gateway.

Links:

Google group discussion forum: https://groups.google.com/forum/#!forum/spandev

Open source code: https://github.com/ProjectSPAN

- stoker

"
962,Commotion-dev, Unifying Serval and Commotion Mesh (Paul,"Fri, 4 Jan 2013 20:57:02 -0500",-0500,Hans of Guardian,"
This sounds great, definitely a lot of overlap in missions and ripe for collaboration.  A couple quick questions:

* do you have APKs that we can try?

* are you able to get Samsungs into adhoc mode?

* do you make Android itself aware of the status of the wifi device? I.e. can you see the IP, SSID, etc. in the Wifi Settings.

.hc

On Jan 4, 2013, at 7:36 PM, stoker wrote:

> Thanks Eric for pulling SPAN into the conversation. I'm a bit late to
> the party but thanks to Seamus I'm finally subscribed to the
> commotion-dev mailing list.
> 
> SPAN is a framework for mesh network experimentation on the Android
> platform (iOS support is also in the works). Don't be turned off by
> the ""experimentation"" aspect - SPAN is quite functional. We like to
> express that SPAN is constantly being advanced and we're very open to
> new ideas.
> 
> Here's a high-level breakdown for those who aren't familiar with SPAN:
> 
> - We have an Manet Service and associated API that allows apps to turn
> ad-hoc mode on and off, configure various network settings
> programmatically and through a config file, query the network status
> and routing information, and return a list of reachable peers. Also,
> the device can be configured connect to traditional network
> infrastructure via the cell chip or a secondary wireless network
> adapter.
> 
> - We have a simple Manet Manager UI for configuring the network and
> starting / stopping ad-hoc mode. We're working on allowing user to
> share the app and config info by physically bumping phones (NFC).
> 
> - We have a simple mesh network visualizer app developed using
> Processing for Android.
> 
> - We use standard Linux tools such as ifconfig, iwconfig, and iptables
> to configure the wireless network adapter. As long as apps use the
> right IP address they do not need to use the Manet Service API or be
> modified in any way to make use of the ad-hoc network.
> 
> - Currently we support OLSR, but are not tied to any particular
> routing protocol. We're interested in supporting reactive protocols to
> cut down on network chatter. We like the idea of remaining as silent
> as possible until you need to send data; however, complete silence
> doesn't seem possible because at a minimum beacon frames will be sent
> out and handled by the MAC layer.
> 
> - We're in the process of using tinc to create P2P VPN network
> overlays on top of the mesh and using the openssl library to support a
> variety of encryption algorithms.
> 
> - Public keys will be side-loaded or shared by physically bumping
> phones with peers. Key pairs will also be generated on the device.
> We'll support X.509 certs if users have a CA. The Manet Manager will
> provide a convenient UI for sharing and managing keys and certs.
> 
> Here's a list of some of the things we want to stay away from:
> 
> - Being tied to a custom routing or mesh networking protocol. Custom
> solutions often work very well and have their merits, but as a mesh
> experimentation framework we'd like our protocols to be plug-and-play
> if possible. Wouldn't it be great if there was a common API for
> interacting with such protocols? It would be even better if they
> worked transparently. That's why we're leaning towards a global device
> proxy that intercepts all outgoing and incoming packets and sends them
> to our Manet Service for mesh-related processing.
> 
> - Data interception and MITM attacks. The idea of sending your public
> key over the open air without a pre-existing authentication mechanism
> presents an opportunity for identify spoofing and a MITM attack.
> That's why we plan on sharing keys via side-loading or a phone bump.
> Also, broadcasting data packets makes it relatively simple to sniff
> those packets without placing a malicious device in promiscuous mode
> or monitor mode. We'd like to encapsulate full IP packets + headers in
> VPN tunnel mode. Also, we'd like to encrypt the routing protocol
> traffic itself to prevent malicious entities from manipulating the
> network topology and perform DoS attacks.
> 
> Some things of note:
> 
> - SPAN provides a generic ad-hoc enabler - that is, if your device is
> rooted, your wireless chipset driver module supports ad-hoc mode, and
> your kernel supports wireless extensions (wext). Devices with Broadcom
> chips work the best - about half the time the kernel or module code
> needs to be slightly modified or built with new kernel options. It's
> not our goal to customize a kernel for each Android device out there.
> It would be great if there was a way to roll in the necessary kernel
> modifications into CyanogenMod or the like, but the device-specific
> nature of those customizations makes that relatively difficult. Also,
> it seems that CyanogenMod's intention is to stay as ""vanilla"" as
> possible and to focus kernel changes on performance and stability
> improvements.
> 
> - We modified the pttdroid app. to get group voice chat working over
> the mesh. The intent is to provide a simple replacement for
> traditional push-to-talk (PTT) land mobile radios (LMRs) in a close /
> moderate range environment. The app. is very simple - it's not
> session-based and uses UDP, which works well in a mesh where people go
> in and out of range at will. Using the app. you can see what other
> peers are in the network, talk to them individually, create groups of
> them, or passively listen for all incoming communications. The app.
> doesn't support SIP or connect to a VOIP gateway.
> 
> Links:
> 
> Google group discussion forum: https://groups.google.com/forum/#!forum/spandev
> 
> Open source code: https://github.com/ProjectSPAN
> 
> - stoker
> 
> _______________________________________________
> Commotion-dev mailing list
> Commotion-dev at lists.chambana.net
> https://lists.chambana.net/mailman/listinfo/commotion-dev
> 


"
963,Commotion-dev, MeshTether to the Play Store,"Sat, 5 Jan 2013 09:35:10 +0100",+0100,Teco Boot,"
Op 5 jan. 2013, om 01:07 heeft Hans of Guardian het volgende geschreven:

> 
> Are there any plans for getting MeshTether in the Google Play Store?  I think that could be a good way to get a lot of testers.  It should be listed with a fair amount of caveats, but it certainly would be a fast to find out which devices it works on.
> 
> I don't think the risk of it damaging phones is high at all.  Mostly the risk is that we'll get a fair amount of negative feedback because it won't work on most devices (i.e. Samsung).

Any outcome that brings us to better support for ad hoc would be great. Blame and shame is one method.
The app should have a pointer to a wiki, with blacklist, whitelist and howto for enabling ad hoc.
We can easily get custom mod's on whitelist, by just pushing our fixes upstream.

Teco

> 
> .hc
> _______________________________________________
> Commotion-dev mailing list
> Commotion-dev at lists.chambana.net
> https://lists.chambana.net/mailman/listinfo/commotion-dev
> 


"
964,Commotion-dev, Unifying Serval and Commotion Mesh (Paul,"Sun, 6 Jan 2013 15:35:32 -0500",-0500,stoker,"Hi Hans,

We're currently in the process of getting our apps posted to Google
Play. In the meantime, I just posted the apks to GitHub. Check the
""builds"" folder in each project repo.

As mentioned above, in order for the Manet Service to flip your device
in ad-hoc mode:

- your device must be rooted
- your wireless chipset driver must support ad-hoc mode
- your kernel must support wireless extensions (wext)

We successfully got SPAN to work on the following devices:

- Samsung Galaxy Tab 10.1
- Samsung Galaxy Nexus (custom kernel)
- Samsung Galaxy S II 4G Epic Touch
- ASUS Transformer Prime (custom kernel)
- ASUS Nexus 7 (custom kernel)

We've done most of our testing on the Samsung Galaxy Nexus. We posted
our custom kernels here:
https://github.com/monk-dot/SPAN/tree/master/kernels

You can install the kernel zips using ClockworkMod Recovery.

Some Samsung devices require custom kernel tweaks to work properly.
Sometimes it's as simple as adding ad-hoc mode back to the list of
supported wireless modes. Let us know which devices you're having
trouble with and we might be able to help.

We flip the device in ad-hoc mode at the linux level, so the Android
framework isn't aware. As far as the framework is concerned the wifi
is turned off. Thus, an app can't use the framework's WifiManager to
determine if wifi is enabled. That's a problem that we haven't spent
time trying to solve yet. Do you guys have a solution?

- stoker

On Fri, Jan 4, 2013 at 8:57 PM, Hans of Guardian
<hans at guardianproject.info> wrote:
>
> This sounds great, definitely a lot of overlap in missions and ripe for collaboration.  A couple quick questions:
>
> * do you have APKs that we can try?
>
> * are you able to get Samsungs into adhoc mode?
>
> * do you make Android itself aware of the status of the wifi device? I.e. can you see the IP, SSID, etc. in the Wifi Settings.
>
> .hc
>
> On Jan 4, 2013, at 7:36 PM, stoker wrote:
>
"
965,Commotion-dev, Unifying Serval and Commotion Mesh (Paul,"Mon, 07 Jan 2013 13:44:55 -0500",-0500,Hans-Christoph Steiner,"
I'm happy to see you got adhoc working on some Samsung devices.  For the goals
of Commotion MeshTether, custom kernels are not an option.  Do you have
documentation on the specific issues that block adhoc mode on the devices
where you used a custom kernel?  I ask because that is something that ideally
we'd like to address for a popular devices.

When setting up adhoc mode on the Linux level, do you disable the wifi on the
Android level?  This is what Serval does, but that doesn't work for MeshTether
since the goal is to provide transparent TCP/IP networking.  Many if not most
Android apps will check with Android whether the phone has a network
connection before trying to use it.  So if the mesh app first tells Android to
disable wifi, then uses the Linux tools to setup the network, Android will
report there is no networking, all apps using this check will think there is
no networking.

I was able to get this working in MeshTether by setting the network config in
both Android level and the Linux level.  Then the settings are in sync, and
Android will report them properly to apps that ask.

Last question from me: what kind of integration with Serval and MeshTether are
you interested in?  IMHO, I think it would be great if we all joined efforts
on the core bits, like an adhoc framework that includes the MethTether trick.
 Also olsrd/batmand/etc. wrapping code.

.hc



On 01/06/2013 03:35 PM, stoker wrote:
> Hi Hans,
> 
> We're currently in the process of getting our apps posted to Google
> Play. In the meantime, I just posted the apks to GitHub. Check the
> ""builds"" folder in each project repo.
> 
> As mentioned above, in order for the Manet Service to flip your device
> in ad-hoc mode:
> 
> - your device must be rooted
> - your wireless chipset driver must support ad-hoc mode
> - your kernel must support wireless extensions (wext)
> 
> We successfully got SPAN to work on the following devices:
> 
> - Samsung Galaxy Tab 10.1
> - Samsung Galaxy Nexus (custom kernel)
> - Samsung Galaxy S II 4G Epic Touch
> - ASUS Transformer Prime (custom kernel)
> - ASUS Nexus 7 (custom kernel)
> 
> We've done most of our testing on the Samsung Galaxy Nexus. We posted
> our custom kernels here:
> https://github.com/monk-dot/SPAN/tree/master/kernels
> 
> You can install the kernel zips using ClockworkMod Recovery.
> 
> Some Samsung devices require custom kernel tweaks to work properly.
> Sometimes it's as simple as adding ad-hoc mode back to the list of
> supported wireless modes. Let us know which devices you're having
> trouble with and we might be able to help.
> 
> We flip the device in ad-hoc mode at the linux level, so the Android
> framework isn't aware. As far as the framework is concerned the wifi
> is turned off. Thus, an app can't use the framework's WifiManager to
> determine if wifi is enabled. That's a problem that we haven't spent
> time trying to solve yet. Do you guys have a solution?
> 
> - stoker
> 
> On Fri, Jan 4, 2013 at 8:57 PM, Hans of Guardian
> <hans at guardianproject.info> wrote:
"
966,Commotion-dev, Unifying Serval and Commotion Mesh (Paul,"Tue, 8 Jan 2013 06:54:58 +1030",+1030,Paul Gardner-Stephen,"Hello Hans,

On Tue, Jan 8, 2013 at 5:14 AM, Hans-Christoph Steiner
<hans at guardianproject.info> wrote:
>
> I'm happy to see you got adhoc working on some Samsung devices.  For the goals
> of Commotion MeshTether, custom kernels are not an option.  Do you have
> documentation on the specific issues that block adhoc mode on the devices
> where you used a custom kernel?  I ask because that is something that ideally
> we'd like to address for a popular devices.

I believe the problem is that the kernels on Android 4.0.1+ devices
specifically have removed ad-hoc wifi support.  On those devices, an
updated kernel is the only option.

This could be streamlined by enabling MeshTether/ServalMesh/SPAN to
pull kernels off the net and install them, without having to get
clockwork recovery or other tools specifically -- i.e., make it
trivial for an end user to do.

> When setting up adhoc mode on the Linux level, do you disable the wifi on the
> Android level?  This is what Serval does, but that doesn't work for MeshTether
> since the goal is to provide transparent TCP/IP networking.  Many if not most
> Android apps will check with Android whether the phone has a network
> connection before trying to use it.  So if the mesh app first tells Android to
> disable wifi, then uses the Linux tools to setup the network, Android will
> report there is no networking, all apps using this check will think there is
> no networking.
>
> I was able to get this working in MeshTether by setting the network config in
> both Android level and the Linux level.  Then the settings are in sync, and
> Android will report them properly to apps that ask.
>
> Last question from me: what kind of integration with Serval and MeshTether are
> you interested in?  IMHO, I think it would be great if we all joined efforts
> on the core bits, like an adhoc framework that includes the MethTether trick.
>  Also olsrd/batmand/etc. wrapping code.

>From a Serval perspective, I see the following strengths that might be
leveraged in a combined ad-hoc management application, taking the best
from each:

1. SPAN has specific interest in enabling ad-hoc as a goal unto itself
(whereas Serval and MeshTether/Commotion need ad-hoc mode as an
enabler for their core business)
2. Serval Mesh probably has the widest general handset support, and a
framework for adding scripts to support new handsets without
reinstalling the APK.
3. MeshTether has the trick for letting Android know that a network is
available.

I am sure that there are other advantages that each has, but it seems
to me that there are strengths in each that are worth combining into a
single Android ad-hoc management app.  Such a combined app would
probably give us leverage for inclusion in CyanogenMod and other
custom ROMs, as well as for encouraging Google/Android to do something
more definite about ad-hoc support in Android.

Paul.

> On 01/06/2013 03:35 PM, stoker wrote:
"
967,Commotion-dev, MeshTether to the Play Store,"Mon, 07 Jan 2013 15:37:32 -0500",-0500,Dan Staples,"I agree, it would be great to get it into the Play Store. That said, I
have no idea what the process is to do that. Users inevitably complain
in the comments section of apps when it doesn't work on their phone, so
that would be useful information to us.

Dan

On 01/05/2013 03:35 AM, Teco Boot wrote:
> Op 5 jan. 2013, om 01:07 heeft Hans of Guardian het volgende geschreven:
>
"
968,Commotion-dev, MeshTether to the Play Store,"Mon, 07 Jan 2013 15:48:02 -0500",-0500,Hans-Christoph Steiner,"
Hey Dan,
http://developer.android.com/distribute/googleplay/publish/preparing.html

I think the hardest part will be figuring out how OTI or Commotion should
manage it, but the process is not hard.

.hc

On 01/07/2013 03:37 PM, Dan Staples wrote:
> I agree, it would be great to get it into the Play Store. That said, I
> have no idea what the process is to do that. Users inevitably complain
> in the comments section of apps when it doesn't work on their phone, so
> that would be useful information to us.
> 
> Dan
> 
> On 01/05/2013 03:35 AM, Teco Boot wrote:
"
969,Commotion-dev, MeshTether to the Play Store,"Tue, 8 Jan 2013 08:18:58 +1030",+1030,Jeremy Lakeman,"You may also wish to deploy via http://f-droid.org.

On Tue, Jan 8, 2013 at 7:18 AM, Hans-Christoph Steiner
<hans at guardianproject.info> wrote:
>
> Hey Dan,
> http://developer.android.com/distribute/googleplay/publish/preparing.html
>
> I think the hardest part will be figuring out how OTI or Commotion should
> manage it, but the process is not hard.
>
> .hc
>
> On 01/07/2013 03:37 PM, Dan Staples wrote:
"
970,Commotion-dev, Unifying Serval and Commotion Mesh (Paul,"Mon, 7 Jan 2013 20:29:07 -0500",-0500,stoker,"Hans, I understand why you guys would want to stay away from custom
kernels, but I believe that in doing so there will be certain devices
which you simply cannot support. One solution might be to pre-compile
your own wireless kernel module driver and insmod / rmmod it as
necessary.

We don't have documentation on the device-specific issues, but I just
compiled the following list for you:


Ad-hoc mode support is disabled on the Galaxy Nexus CDMA/LTE 4G AOSP
4.0.2 ICS kernel (android-omap-tuna-3.0-mr0.1)

Add NL80211_IFTYPE_ADHOC back into supported interface modes list:

/drivers/net/wireless/bcmdhd/wl_cfg80211.c

static struct wireless_dev *wl_alloc_wdev(struct device *sdiofunc_dev) {
	// ?
	wdev->wiphy->interface_modes =
		BIT(NL80211_IFTYPE_STATION) | BIT(NL80211_IFTYPE_ADHOC)
		| BIT(NL80211_IFTYPE_AP) | BIT(NL80211_IFTYPE_MONITOR);
	// ...
}



Ad-hoc mode support is disabled on the Nexus 7 AOSP 4.1.2 JB kernel
(android-tegra3-grouper-3.1-jb-mr0)

Add NL80211_IFTYPE_ADHOC back into supported interface modes list:

/drivers/net/wireless/bcmdhd/wl_cfg80211.c

static s32 wl_setup_wiphy(struct wireless_dev *wdev, struct device
*sdiofunc_dev)
{
	// ...
	wdev->wiphy->interface_modes =
		BIT(NL80211_IFTYPE_STATION) | BIT(NL80211_IFTYPE_ADHOC)
		| BIT(NL80211_IFTYPE_AP) | BIT(NL80211_IFTYPE_MONITOR);
	// ...
}



Ad-hoc mode is disabled on the Samsung Galaxy S III GSM SGH-i747 ICS kernel

Add NL80211_IFTYPE_ADHOC back into supported interface modes list:

/drivers/net/wireless/bcmdhd/src/wl/sys/wl_cfg80211.c

static s32 wl_setup_wiphy(struct wireless_dev *wdev, struct device
*sdiofunc_dev)
{
	// ...
	wdev->wiphy->interface_modes =
		BIT(NL80211_IFTYPE_STATION) | BIT(NL80211_IFTYPE_ADHOC)
		| BIT(NL80211_IFTYPE_AP) | BIT(NL80211_IFTYPE_MONITOR);
	// ...
}


Yes, like Serval we also disable the wifi at the Android level.

SPAN's interest goes beyond enabling ad-hoc mode. We're interested in
providing a secure and transparent ad-hoc networking capability on the
Android and iOS platform. We're also interested in developing
mesh-aware apps, such as group voice chat and bit-torrent-like data
sharing.

I think that single ad-hoc management service would be best. We have a
management app that's simply a UI which makes calls to the service.
The advantage of a service over an app is that:
- other apps can send commands to it to start / stop the mesh
- other apps configure the MANET programmatically
- other apps can query the service for mesh-related information, like
a peer listing
- it can be configured to automatically restart if it's killed by the
Android platform (it will also run longer than an app before being
killed)

Apps which make use of the SPAN Manet Service simply make calls to a
ManetHelper class that's packaged in a JAR library. Those apps can
then implement the ManetObservable interface and register for event
callbacks when the peer listing changes, the device switches out of
ad-hoc mode, etc. Note that apps don't need to use the service to use
the ad-hoc network. The service provides a tool for mesh-aware apps.

Both SPAN and Serval are based on the Wireless Tether for Root Users
app. so there's probably a lot of overlap in the way we flip the
device into ad-hoc mode.


On Mon, Jan 7, 2013 at 3:24 PM, Paul Gardner-Stephen
<paul at servalproject.org> wrote:
> Hello Hans,
>
> On Tue, Jan 8, 2013 at 5:14 AM, Hans-Christoph Steiner
> <hans at guardianproject.info> wrote:
"
971,Commotion-dev," Commotion-dev Digest, Vol 21, Issue 5","Tue, 8 Jan 2013 09:44:51 +0000",+0000,Eric de Vries,"
Hi Hans,

afaik there is no specific documentation regarding the blocking of ad-hoc mode on the devices that use a custom kernel, obviously only in the specific case that NO custom kernel is used...
Everything is simply based on testing on the devices themselves... To be more specific : in our case we discovered that MeshTether simply did not work anymore when we received our new test-devices (Samsung Galaxy Nexus). Beforehand MeshTether did work on an older device (HTC Desire running android 2.3) and on some older tablets (Samsung Tabs running Android 3.2). 
We discovered for example that some custom kernel's (like the Franco kernel for the GNex) actually made it possible to flip the wifi-chipset in ad-hoc mode on our new test device... In the end it's as simple as this :
- from android 4.x.x the used kernels do not support wext (wireless extensions) by default, which makes results in not being able to flip the chip in adhoc mode (just as stoker mentioned in his post)...

>From your accounts it sounds as if MeshTether is able to do that : so I was simply curious if you had a chance to run MesTether and/or setting the network config on a 4.x.x device, and have seen that working as well ?
Unfortunately the situation is changed since ICS, so I was wondering if your experiences are based on pre-ICS or if you had everything up and running on a non-rooted, non custom-kernel running device ?

Also a question for stoker : do you also have the ""customized"" ptttdroid app hosted somewhere so that we could test it as well ? Also do you have the multicast (via UDP) mode running ? The standard version actually crashes whenever multicast is selected instead of broadcast...

On 07/01/2013 13:44 PM, Hans wrote

> I'm happy to see you got adhoc working on some Samsung devices.  For the goals
> of Commotion MeshTether, custom kernels are not an option.  Do you have
> documentation on the specific issues that block adhoc mode on the devices
> where you used a custom kernel?  I ask because that is something that ideally
> we'd like to address for a popular devices.
>
> When setting up adhoc mode on the Linux level, do you disable the wifi on the
> Android level?  This is what Serval does, but that doesn't work for MeshTether
> since the goal is to provide transparent TCP/IP networking.  Many if not most
> Android apps will check with Android whether the phone has a network
> connection before trying to use it.  So if the mesh app first tells Android to
> disable wifi, then uses the Linux tools to setup the network, Android will
> report there is no networking, all apps using this check will think there is
> no networking.

> I was able to get this working in MeshTether by setting the network config in
> both Android level and the Linux level.  Then the settings are in sync, and
> Android will report them properly to apps that ask.
>
> Last question from me: what kind of integration with Serval and MeshTether are
> you interested in?  IMHO, I think it would be great if we all joined efforts
> on the core bits, like an adhoc framework that includes the MethTether trick.
> Also olsrd/batmand/etc. wrapping code.
>
> .hc



________________________________________
Van: Commotion-dev [commotion-dev-bounces at lists.chambana.net] namens commotion-dev-request at lists.chambana.net [commotion-dev-request at lists.chambana.net]
Verzonden: maandag 7 januari 2013 21:48
Aan: commotion-dev at lists.chambana.net
Onderwerp: Commotion-dev Digest, Vol 21, Issue 5

Send Commotion-dev mailing list submissions to
        commotion-dev at lists.chambana.net

To subscribe or unsubscribe via the World Wide Web, visit
        https://lists.chambana.net/mailman/listinfo/commotion-dev
or, via email, send a message with subject or body 'help' to
        commotion-dev-request at lists.chambana.net

You can reach the person managing the list at
        commotion-dev-owner at lists.chambana.net

When replying, please edit your Subject line so it is more specific
than ""Re: Contents of Commotion-dev digest...""


Today's Topics:

   1. Re: Unifying Serval and Commotion Mesh (Paul      Gardner-Stephen)
      (Hans-Christoph Steiner)
   2. Re: Unifying Serval and Commotion Mesh (Paul      Gardner-Stephen)
      (Paul Gardner-Stephen)
   3. Re: MeshTether to the Play Store (Dan Staples)
   4. Re: MeshTether to the Play Store (Hans-Christoph Steiner)


"
972,Commotion-dev," Commotion-dev Digest, Vol 21, Issue 5","Tue, 8 Jan 2013 08:05:09 -0500",-0500,stoker,"Hi Eric,

Here's a link to the Manet Voice Chat app. based on pttdroid:
https://github.com/ProjectSPAN/android-manet-ptt/tree/master/builds

It took a little tinkering to get multicast working in the original
pttdroid app. As you said, it doesn't work out of the box. I should
not that the Manet Voice Chat app. doesn't use multicast at this time.

While the Manet Voice Chat app. does support group chat, it actually
opens up a UDP socket to each individual peer rather than a multicast
socket. I'm not a multicast guru, but using multicast in a mesh seems
to present a few problems:

- The official ipv4 multicast address range is 224.0.0.0 through
239.255.255.255. I'm not sure what will happen if you try to use an
address outside this range. It probably won't work. What if the mesh
subnet is 192.168.11.x? How would you setup a multicast group inside
that subnet? Maybe you don't need to.

- How do peers in your group know which multicast address to use? How
would we ensure that no other groups are using the same multicast
address? We might need to implement some sort of multicast address
resolution handshake system.

- How would multicast work over P2P VPN links? With tinc, a tun
interface is created for each link. If peer A has a link to peer B,
and a separate link to peer C, it's easiest for A to open a separate
socket for B and C. An alternative idea is to create VPN subnets or
groupings overlaying the mesh, and broadcast voice packets within the
subnet, but then the question becomes a matter of how those subnets
are created on-the-fly as new groups are created.

These are open questions we're still thinking about. Any ideas?


On Tue, Jan 8, 2013 at 4:44 AM, Eric de Vries <Eric.de.Vries at ict.nl> wrote:
>
> Hi Hans,
>
> afaik there is no specific documentation regarding the blocking of ad-hoc mode on the devices that use a custom kernel, obviously only in the specific case that NO custom kernel is used...
> Everything is simply based on testing on the devices themselves... To be more specific : in our case we discovered that MeshTether simply did not work anymore when we received our new test-devices (Samsung Galaxy Nexus). Beforehand MeshTether did work on an older device (HTC Desire running android 2.3) and on some older tablets (Samsung Tabs running Android 3.2).
> We discovered for example that some custom kernel's (like the Franco kernel for the GNex) actually made it possible to flip the wifi-chipset in ad-hoc mode on our new test device... In the end it's as simple as this :
> - from android 4.x.x the used kernels do not support wext (wireless extensions) by default, which makes results in not being able to flip the chip in adhoc mode (just as stoker mentioned in his post)...
>
> From your accounts it sounds as if MeshTether is able to do that : so I was simply curious if you had a chance to run MesTether and/or setting the network config on a 4.x.x device, and have seen that working as well ?
> Unfortunately the situation is changed since ICS, so I was wondering if your experiences are based on pre-ICS or if you had everything up and running on a non-rooted, non custom-kernel running device ?
>
> Also a question for stoker : do you also have the ""customized"" ptttdroid app hosted somewhere so that we could test it as well ? Also do you have the multicast (via UDP) mode running ? The standard version actually crashes whenever multicast is selected instead of broadcast...
>
> On 07/01/2013 13:44 PM, Hans wrote
>
"
973,Commotion-dev, MeshTether to the Play Store,"Tue, 08 Jan 2013 11:37:59 -0500",-0500,Nat Meysenburg,"Jeremy Lakeman <Jeremy.Lakeman at gmail.com> writes:

> You may also wish to deploy via http://f-droid.org.

Distributing via F-Droid is very simple.

The way that F-Droid works (as I understand it) is that they build all
of their apks from source as a way of ensuring that the software is
indeed distributing all the needed code to build.

Adding apps to F-Droid consists of cloning their repo from gitorious,
editing or creating a meta data file and then asking the maintainers to
review and pull your changes.

I did this once to get Orweb into F-Droid, and would be happy to do it
again for Commotion, or walk others through the process.

Best,
~~Nat
"
974,Commotion-dev," Commotion-dev Digest, Vol 21, Issue 5","Tue, 8 Jan 2013 16:43:57 +0100",+0100,Teco Boot,"I'll jump in inline.

Op 8 jan. 2013, om 14:05 heeft stoker het volgende geschreven:

> Hi Eric,
> 
> Here's a link to the Manet Voice Chat app. based on pttdroid:
> https://github.com/ProjectSPAN/android-manet-ptt/tree/master/builds
> 
> It took a little tinkering to get multicast working in the original
> pttdroid app. As you said, it doesn't work out of the box.
I remember testing it with multicast, on WiFi-Direct. No multihop, 
other than via soft-AP. Maybe mcast route was missing in your setup.
(check default or 224/4 to wlan0)

I planned to test olsr with bmf plugin. It should work, I think. 

> I should
> not that the Manet Voice Chat app. doesn't use multicast at this time.
> 
> While the Manet Voice Chat app. does support group chat, it actually
> opens up a UDP socket to each individual peer rather than a multicast
> socket. I'm not a multicast guru, but using multicast in a mesh seems
> to present a few problems:
> 
> - The official ipv4 multicast address range is 224.0.0.0 through
> 239.255.255.255. I'm not sure what will happen if you try to use an
> address outside this range.
Then, it is not IPv4 multicast :-)

> It probably won't work. What if the mesh
> subnet is 192.168.11.x?
Source IP address is your configured address, in this subnet. Mcast 
addresses are destinations only.

> How would you setup a multicast group inside
> that subnet? Maybe you don't need to.
Multicast addresses are by definition application specific. Similar to
TV channel (which was tuning on a frequency setting).

> 
> - How do peers in your group know which multicast address to use?
This needs out-of-band hints. Could be URL, NFC of use a keyboard.

> How
> would we ensure that no other groups are using the same multicast
> address?
Random addresses and UDP port numbers would not collide that much.
Crypto would help to guarantee something.
Current PTT users have procedures for channel selection. Often, there 
are much less channels than ""private"" mcast IP addresses (239/8).

> We might need to implement some sort of multicast address
> resolution handshake system.
Yes.
Or just use a dictionary. 

> 
> - How would multicast work over P2P VPN links? With tinc, a tun
> interface is created for each link. If peer A has a link to peer B,
> and a separate link to peer C, it's easiest for A to open a separate
> socket for B and C.
The OLSR BMF plugin can run in pseudo-broadcast mode. And still use
MPR flooding. We need to patch the MPR problem in olsrd. It is 
disabled because ETX link metics. Plan is to have it fixed in OLSRv2 
release.
(BMF is non-selective, thus broadcast type of distribution)

> An alternative idea is to create VPN subnets or
> groupings overlaying the mesh, and broadcast voice packets within the
> subnet, but then the question becomes a matter of how those subnets
> are created on-the-fly as new groups are created.
I don't like the crypto tunnels, too much overhead and addressing 
problems. If crypto is needed, just crypt payload. Use transport mode
or something similar.

> 
> These are open questions we're still thinking about. Any ideas?
More ideas than solutions....

I've have to catch up getting my test phone up and running. I'll connect
to Eric's phone.

Teco

> 
> 
> On Tue, Jan 8, 2013 at 4:44 AM, Eric de Vries <Eric.de.Vries at ict.nl> wrote:
"
975,Commotion-dev," Commotion-dev Digest, Vol 21, Issue 5","Tue, 8 Jan 2013 17:22:03 +0100",+0100,Teco Boot,"I'll jump in inline.

Op 8 jan. 2013, om 14:05 heeft stoker het volgende geschreven:

> Hi Eric,
> 
> Here's a link to the Manet Voice Chat app. based on pttdroid:
> https://github.com/ProjectSPAN/android-manet-ptt/tree/master/builds
> 
> It took a little tinkering to get multicast working in the original
> pttdroid app. As you said, it doesn't work out of the box.
I remember testing it with multicast, on WiFi-Direct. No multihop, 
other than via soft-AP. Maybe mcast route was missing in your setup.
(check default or 224/4 or default to wlan0)

I planned to test olsr with bmf plugin. It should work, I think. 

> I should
> not that the Manet Voice Chat app. doesn't use multicast at this time.
> 
> While the Manet Voice Chat app. does support group chat, it actually
> opens up a UDP socket to each individual peer rather than a multicast
> socket. I'm not a multicast guru, but using multicast in a mesh seems
> to present a few problems:
> 
> - The official ipv4 multicast address range is 224.0.0.0 through
> 239.255.255.255. I'm not sure what will happen if you try to use an
> address outside this range.
Then, it is not IPv4 multicast :-)

> It probably won't work. What if the mesh
> subnet is 192.168.11.x?
Source IP address is your configured address, in this subnet. Mcast 
addresses are destinations only.

> How would you setup a multicast group inside
> that subnet? Maybe you don't need to.
Multicast addresses are by definition application specific. Similar 
to TV channel (which was tuning on a frequency setting, for 
selecting a TV channel).

> 
> - How do peers in your group know which multicast address to use?
This needs out-of-band hints. Could be URL, NFC or a keyboard strokes.

> How
> would we ensure that no other groups are using the same multicast
> address?
Random addresses and UDP port numbers would not collide that much.
Crypto would help to guarantee something.
Current PTT users have procedures for channel selection. Often, there 
are much less channels than ""private"" mcast IP addresses (239/8).

> We might need to implement some sort of multicast address
> resolution handshake system.
Yes.
Or just use a directory. 

> 
> - How would multicast work over P2P VPN links? With tinc, a tun
> interface is created for each link. If peer A has a link to peer B,
> and a separate link to peer C, it's easiest for A to open a separate
> socket for B and C.
The OLSR BMF plugin can run in pseudo-broadcast mode. And still use
MPR flooding. We need to patch the MPR problem in olsrd. It is 
disabled because ETX link metics. Plan is to have it fixed in OLSRv2 
release.
(BMF is non-selective, thus broadcast type of distribution)

> An alternative idea is to create VPN subnets or
> groupings overlaying the mesh, and broadcast voice packets within the
> subnet, but then the question becomes a matter of how those subnets
> are created on-the-fly as new groups are created.
I don't like the crypto *tunnels*, too much overhead and addressing 
problems. If crypto is needed, just crypt payload. Use transport mode
or something similar.

> 
> These are open questions we're still thinking about. Any ideas?
More ideas than solutions....

I've have to catch up getting my test phone up and running. I'll connect
to Eric's phone soon.

Teco

> 
> 
> On Tue, Jan 8, 2013 at 4:44 AM, Eric de Vries <Eric.de.Vries at ict.nl> wrote:
"
976,Commotion-dev, Commotion OpenWRT on Dragino Build Problems,"Fri, 11 Jan 2013 09:28:04 -0600",-0600,Ben West,"Hi Paul and listerv,

I just recently checked in a new version of the Commotion-OpenWRT branch
for ath5k, but with kernel v3.3.8 and compat-wireless-2012-09-07 backported
for stability improvements, in case you like like to try compiling this for
your dragino.  I've also added a patch to resolve the lacking io.h header
mentioned by Paul below.

https://code.commotionwireless.net/projects/commotion-openwrt/repository/show?rev=ath5kMinimal_new

I've been running a compiled image with the backported kernel and wifi
drivers for about 48hours now w/o problem.

(I will be posting to this listerv soon asking about how to get the
backported kernel and newer wifi drivers tested by the community and
adopted into the master branch,)

On Wed, Dec 19, 2012 at 6:34 PM, Paul Gardner-Stephen <
paul at servalproject.org> wrote:

> Hello,
>
> Actually, the config option was already disabled, and it still
> happened, because for some reason it was still building the leds-gpio
> module.
>
> I got it to build with:
>
> "
977,Commotion-dev, Commotion OpenWRT on Dragino Build Problems,"Mon, 14 Jan 2013 07:06:51 +1030",+1030,Paul Gardner-Stephen,"Hi Ben,

Sounds great -- will give it a try.

Do you want to give it a try pulling in the package for building
servald as part of the image (optional module initially)?  My feeling
is that we will want this at some point anyway, and now is as good a
time as any.

Paul.

On Sat, Jan 12, 2013 at 1:58 AM, Ben West <ben at gowasabi.net> wrote:
> Hi Paul and listerv,
>
> I just recently checked in a new version of the Commotion-OpenWRT branch for
> ath5k, but with kernel v3.3.8 and compat-wireless-2012-09-07 backported for
> stability improvements, in case you like like to try compiling this for your
> dragino.  I've also added a patch to resolve the lacking io.h header
> mentioned by Paul below.
>
> https://code.commotionwireless.net/projects/commotion-openwrt/repository/show?rev=ath5kMinimal_new
>
> I've been running a compiled image with the backported kernel and wifi
> drivers for about 48hours now w/o problem.
>
> (I will be posting to this listerv soon asking about how to get the
> backported kernel and newer wifi drivers tested by the community and adopted
> into the master branch,)
>
>
> On Wed, Dec 19, 2012 at 6:34 PM, Paul Gardner-Stephen
> <paul at servalproject.org> wrote:
"
978,Commotion-dev, Lab setup and initial test results,"Tue, 15 Jan 2013 14:44:26 -0500",-0500,Will Hawkins,"Hello everyone!

As Andrew mentioned in previous emails, we have partnered with a local
organization to help us create a physical laboratory testbed for doing
performance and Q/A testing on Commotion.

The testbed consists of several RF-isolating enclosures connected
together with a special RF switch. Each enclosure contains a single
Ubiquity Picostation running Commotion. Wireless connections (and their
quality) among the Commotion nodes are determined by the RF switch. We
have deployed 8 nodes in this environment.

The enclosures are made by Ramsey and the RF Switch is made by JFW
Industries
(http://www.jfwindustries.com/catalog/Programmable_Attenuator_Assemblies_19_Rack-48-1.html).


The RF switch is programmed with a series of XML documents. These XML
documents can represent either
a) Literal attenuation values for the RF signal between nodes, or
b) ""Geographic"" location of nodes in 2D space where attenuation values
are determined using a freespace loss model.

The following is an example of an XML document that configures the
switch with literal attentuation values (a):

<MESHTEST>
  <PATHLOSS>
    <INPUTS>1 2 3 4 5 6 7 8</INPUTS>
    <MATRIX>
200	25 	200 	200 	200 	200 	200 	200
25	200 	25 	200 	200 	200 	200 	200
200	25 	200 	200 	200 	200 	25 	200
200	200 	200 	200 	200 	200 	200 	200
200	200 	200 	200 	200 	200 	200 	200
200	200 	200 	200 	200 	200 	200 	200
200	200 	25 	200 	200 	200 	200 	25
200	200 	200 	200 	200 	200 	25 	200
    </MATRIX>
  </PATHLOSS>
</MESHTEST"
979,Commotion-dev, Do you have a bunch of old DirectTV-style dish,"Tue, 15 Jan 2013 15:01:34 -0600",-0600,Ben West,"This exterior wall mount for 2 access points came together quite nicely.
 It's the angled mounting bracket for a Direct TV dish, minus the dish.  I
used an ~18inch piece of 0.5inch metal conduit to lash the APs to.

https://picasaweb.google.com/111527167238510651213/WasabiNetOnYourRooftop#5833782534554801042

Abandoned dishes like this one are practically a dime a dozen here in St.
Louis.  So many apartment tenants sign up satellite TV, and then abandon
it.  Frequently, the landlords are more than happy to let you remove the
orphaned equipment for free.

-- 
Ben West
http://gowasabi.net
ben at gowasabi.net
314-246-9434
"
980,Commotion-dev, Lab setup and initial test results,"Wed, 16 Jan 2013 07:52:32 +1030",+1030,Paul Gardner-Stephen,"This is really interesting.

Did they create the facility specially, or is it a facility that
already exists, and they have given you access to?

Paul.

On Wed, Jan 16, 2013 at 6:14 AM, Will Hawkins
<hawkinsw at opentechinstitute.org> wrote:
> Hello everyone!
>
> As Andrew mentioned in previous emails, we have partnered with a local
> organization to help us create a physical laboratory testbed for doing
> performance and Q/A testing on Commotion.
>
> The testbed consists of several RF-isolating enclosures connected
> together with a special RF switch. Each enclosure contains a single
> Ubiquity Picostation running Commotion. Wireless connections (and their
> quality) among the Commotion nodes are determined by the RF switch. We
> have deployed 8 nodes in this environment.
>
> The enclosures are made by Ramsey and the RF Switch is made by JFW
> Industries
> (http://www.jfwindustries.com/catalog/Programmable_Attenuator_Assemblies_19_Rack-48-1.html).
>
>
> The RF switch is programmed with a series of XML documents. These XML
> documents can represent either
> a) Literal attenuation values for the RF signal between nodes, or
> b) ""Geographic"" location of nodes in 2D space where attenuation values
> are determined using a freespace loss model.
>
> The following is an example of an XML document that configures the
> switch with literal attentuation values (a):
>
> <MESHTEST>
>   <PATHLOSS>
>     <INPUTS>1 2 3 4 5 6 7 8</INPUTS>
>     <MATRIX>
> 200     25      200     200     200     200     200     200
> 25      200     25      200     200     200     200     200
> 200     25      200     200     200     200     25      200
> 200     200     200     200     200     200     200     200
> 200     200     200     200     200     200     200     200
> 200     200     200     200     200     200     200     200
> 200     200     25      200     200     200     200     25
> 200     200     200     200     200     200     25      200
>     </MATRIX>
>   </PATHLOSS>
> </MESHTEST>
>
> The following is an example of an XML document that configures the
> switch using geographic node locations (b):
> <MESHTEST>
>   <PHYSICAL UNITS=""meters"" DIMENSION=""2"" MODEL=""freespace"">
>     <NODE INPUT=""1"" X=""400"" Y=""549""></NODE>
>     <NODE INPUT=""2"" X=""806"" Y=""64""></NODE>
>     <NODE INPUT=""3"" X=""919"" Y=""82"" DISABLE=""true""></NODE>
>     <NODE INPUT=""4"" X=""150"" Y=""844"" DISABLE=""true""></NODE>
>     <NODE INPUT=""5"" X=""910"" Y=""151"" DISABLE=""true""></NODE>
>     <NODE INPUT=""6"" X=""582"" Y=""807"" DISABLE=""true""></NODE>
>     <NODE INPUT=""7"" X=""286"" Y=""217"" DISABLE=""true""></NODE>
>     <NODE INPUT=""8"" X=""50"" Y=""285"" DISABLE=""true""></NODE>
>     <NODE INPUT=""9"" X=""26"" Y=""730"" DISABLE=""true""></NODE>
>     <NODE INPUT=""10"" X=""24"" Y=""710"" DISABLE=""true""></NODE>
>     <NODE INPUT=""11"" X=""797"" Y=""110"" DISABLE=""true""></NODE>
>     <NODE INPUT=""12"" X=""105"" Y=""653"" DISABLE=""true""></NODE>
>   </PHYSICAL>
> </MESHTEST>
>
> We are going to post some additional information about the environment
> itself (and pictures!) on the blog. I will send a link when that post is
> available.
>
> For our first test, we configured 5 Commotion nodes in a ""line"" and
> taken performance measurements using iperf (tcp):
> a < - > b < - > c < - > g < - > h
> a <"
981,Commotion-dev, Lab setup and initial test results,"Tue, 15 Jan 2013 17:28:26 -0500",-0500,Will Hawkins,"It is a facility that does lots of RF testing and we were able to work
out a cooperative agreement. It's a really neat lab. We'll send around
pictures and things (via that promised blog post) that will give a
better sense of what the lab looks like and how it works.



Will

On 01/15/2013 04:22 PM, Paul Gardner-Stephen wrote:
> This is really interesting.
> 
> Did they create the facility specially, or is it a facility that
> already exists, and they have given you access to?
> 
> Paul.
> 
> On Wed, Jan 16, 2013 at 6:14 AM, Will Hawkins
> <hawkinsw at opentechinstitute.org> wrote:
"
982,Commotion-dev, Lab setup and initial test results,"Thu, 17 Jan 2013 14:46:39 +1030",+1030,Paul Gardner-Stephen,"Cool.

Paul.

On Wed, Jan 16, 2013 at 8:58 AM, Will Hawkins
<hawkinsw at opentechinstitute.org> wrote:
> It is a facility that does lots of RF testing and we were able to work
> out a cooperative agreement. It's a really neat lab. We'll send around
> pictures and things (via that promised blog post) that will give a
> better sense of what the lab looks like and how it works.
>
>
>
> Will
>
> On 01/15/2013 04:22 PM, Paul Gardner-Stephen wrote:
"
983,Commotion-dev, Lab setup and initial test results,"Thu, 17 Jan 2013 10:29:41 +0400",+0400,Alexander Chemeris,"Hi Will,

Great thing! We've been looking to have something similar for OpenBTS
testing. It would be great to learn more about the hardware and software
setup they use, hopefully it could help us to build a good testbed for
OpenBTS.

Please excuse typos. Written with a touchscreen keyboard.

--
Regards,
Alexander Chemeris
CEO/Founder Fairwaves LLC
http://fairwaves.ru
On Jan 16, 2013 2:28 AM, ""Will Hawkins"" <hawkinsw at opentechinstitute.org>
wrote:

> It is a facility that does lots of RF testing and we were able to work
> out a cooperative agreement. It's a really neat lab. We'll send around
> pictures and things (via that promised blog post) that will give a
> better sense of what the lab looks like and how it works.
>
>
>
> Will
>
> On 01/15/2013 04:22 PM, Paul Gardner-Stephen wrote:
> > This is really interesting.
> >
> > Did they create the facility specially, or is it a facility that
> > already exists, and they have given you access to?
> >
> > Paul.
> >
> > On Wed, Jan 16, 2013 at 6:14 AM, Will Hawkins
> > <hawkinsw at opentechinstitute.org> wrote:
> "
984,Commotion-dev, Lab setup and initial test results,"Thu, 17 Jan 2013 13:01:10 -0500",-0500,Dan Staples,"If I recall correctly, the lab does have a couple BTS units. Can you 
verify this, Will?

Dan

On Thu 17 Jan 2013 01:29:41 AM EST, Alexander Chemeris wrote:
> Hi Will,
>
> Great thing! We've been looking to have something similar for OpenBTS
> testing. It would be great to learn more about the hardware and
> software setup they use, hopefully it could help us to build a good
> testbed for OpenBTS.
>
> Please excuse typos. Written with a touchscreen keyboard.
>
> --
> Regards,
> Alexander Chemeris
> CEO/Founder Fairwaves LLC
> http://fairwaves.ru
>
> On Jan 16, 2013 2:28 AM, ""Will Hawkins""
> <hawkinsw at opentechinstitute.org
> <mailto:hawkinsw at opentechinstitute.org"
985,Commotion-dev, Lab setup and initial test results,"Thu, 17 Jan 2013 14:13:50 -0500",-0500,Will Hawkins,"If by lab you are referring to our partner, I'm not sure. We did talk to
them about being able to test BTS w/in their setup, but I can't say for
sure. It's definitely something worth investigating. Andrew may have
more to add.

Will

On 01/17/2013 01:01 PM, Dan Staples wrote:
> If I recall correctly, the lab does have a couple BTS units. Can you 
> verify this, Will?
> 
> Dan
> 
> On Thu 17 Jan 2013 01:29:41 AM EST, Alexander Chemeris wrote:
"
986,Commotion-dev, Lab setup and initial test results,"Thu, 17 Jan 2013 14:28:56 -0500",-0500,Andrew Reynolds,"Nothing of substance. They had a couple of USRPs out on the bench, but
we mostly focused on setting up the routers and learning to use the
software.

We're developing a laundry list of questions for future testing, though,
including how we might add a BTS or two to the setup. If you have any
specific questions we would be happy to pass them along.

-andrew

On 01/17/2013 02:13 PM, Will Hawkins wrote:
> If by lab you are referring to our partner, I'm not sure. We did talk to
> them about being able to test BTS w/in their setup, but I can't say for
> sure. It's definitely something worth investigating. Andrew may have
> more to add.
> 
> Will
> 
> On 01/17/2013 01:01 PM, Dan Staples wrote:
"
987,Commotion-dev, Lab setup and initial test results,"Thu, 17 Jan 2013 23:36:53 +0400",+0400,Alexander Chemeris,"Nothing specific in mind yet.

Note, that to test OpenBTS you also need phones. And preferably ones you
could control over USB, like modems.


On Thu, Jan 17, 2013 at 11:28 PM, Andrew Reynolds <
andrew at opentechinstitute.org> wrote:

> Nothing of substance. They had a couple of USRPs out on the bench, but
> we mostly focused on setting up the routers and learning to use the
> software.
>
> We're developing a laundry list of questions for future testing, though,
> including how we might add a BTS or two to the setup. If you have any
> specific questions we would be happy to pass them along.
>
> -andrew
>
> On 01/17/2013 02:13 PM, Will Hawkins wrote:
> > If by lab you are referring to our partner, I'm not sure. We did talk to
> > them about being able to test BTS w/in their setup, but I can't say for
> > sure. It's definitely something worth investigating. Andrew may have
> > more to add.
> >
> > Will
> >
> > On 01/17/2013 01:01 PM, Dan Staples wrote:
> "
988,Commotion-dev, Lab setup and initial test results,"Thu, 17 Jan 2013 14:57:48 -0500",-0500,Andrew Reynolds,"Oh duh, modems. I had been thinking some kind of adb-style setup with a
phone and netbook but wasn't sure whether any of the developer toolkits
included programmatic dialing/pickup.

Regardless, that's why we didn't dive too deep into OpenBTS testing. It
seemed more productive to think through the testing scenario and
requirements, then start asking questions.


On 01/17/2013 02:36 PM, Alexander Chemeris wrote:
> Nothing specific in mind yet.
> 
> Note, that to test OpenBTS you also need phones. And preferably ones you
> could control over USB, like modems.
> 
> 
> On Thu, Jan 17, 2013 at 11:28 PM, Andrew Reynolds <
> andrew at opentechinstitute.org> wrote:
> 
"
989,Commotion-dev, Lab setup and initial test results,"Fri, 18 Jan 2013 00:17:26 +0400",+0400,Alexander Chemeris,"For simple load testing and some parts of regression testing a usual modem
bank should work fine. We have one of those here, which we want to put to
work:
http://shop.sysmocom.de/products/load-tester16

Good things about a modem bank is that (1) you could use simple AT commands
to control it (many phones could do too, though) and (2) you could connect
it directly to your splitter, as they have antenna connectors.


On Thu, Jan 17, 2013 at 11:57 PM, Andrew Reynolds <
andrew at opentechinstitute.org> wrote:

> Oh duh, modems. I had been thinking some kind of adb-style setup with a
> phone and netbook but wasn't sure whether any of the developer toolkits
> included programmatic dialing/pickup.
>
> Regardless, that's why we didn't dive too deep into OpenBTS testing. It
> seemed more productive to think through the testing scenario and
> requirements, then start asking questions.
>
>
> On 01/17/2013 02:36 PM, Alexander Chemeris wrote:
> > Nothing specific in mind yet.
> >
> > Note, that to test OpenBTS you also need phones. And preferably ones you
> > could control over USB, like modems.
> >
> >
> > On Thu, Jan 17, 2013 at 11:28 PM, Andrew Reynolds <
> > andrew at opentechinstitute.org> wrote:
> >
> "
990,Commotion-dev, SPAN Apps Published to Google Play,"Fri, 18 Jan 2013 17:09:30 -0500",-0500,stoker,"Hi All,

For those who want to get geeky, I just posted three apps to Google
Play: https://play.google.com/store/apps/developer?id=stoker

Try 'em out.

Both the Manet Visualizer and Manet Voice Chat apps make use of a
common API for interacting with the Manet Service that comes bundled
with the Manet Manager app. I believe that the idea of a common API
for making use of the mesh platform may be one of the aspects that
sets SPAN apart from other projects.

- stoker

"
991,Commotion-dev, SPAN Apps Published to Google Play,"Sat, 19 Jan 2013 09:27:37 -0500",-0500,Outback Dingo,"Ive downloaded them and installed the on an HTC One X seems the manager
cannot get into adhoc.... phone is rooted, so what did i miss


On Fri, Jan 18, 2013 at 5:09 PM, stoker <mistr.stoker at gmail.com> wrote:

> Hi All,
>
> For those who want to get geeky, I just posted three apps to Google
> Play: https://play.google.com/store/apps/developer?id=stoker
>
> Try 'em out.
>
> Both the Manet Visualizer and Manet Voice Chat apps make use of a
> common API for interacting with the Manet Service that comes bundled
> with the Manet Manager app. I believe that the idea of a common API
> for making use of the mesh platform may be one of the aspects that
> sets SPAN apart from other projects.
>
> - stoker
>
> _______________________________________________
> Commotion-dev mailing list
> Commotion-dev at lists.chambana.net
> https://lists.chambana.net/mailman/listinfo/commotion-dev
>
>
"
992,Commotion-dev, SPAN Apps Published to Google Play,"Sat, 19 Jan 2013 11:43:56 -0500",-0500,stoker,">From the Manet Manager Google Play page:

""Requirements:
- Root access
- Kernel which supports wireless extensions (wext)
- Wireless device driver which supports ad-hoc mode (Broadcom works well)

Supported devices:
- Samsung Galaxy Tab 10.1
- Samsung Galaxy S II Epic Touch 4G SPH-D710
- Samsung Galaxy Nexus SCH-i515 (custom kernel)
- ASUS Transformer Prime TF201 (custom kernel)
- ASUS Nexus 7 (custom kernel)""

We haven't tested the Manet Manager on the HTC One X yet, but we
encourage people to try it out on their own devices.

Does the HTC One X have wext support built into the kernel?

Does the HTC One X wireless device driver support ad-hoc mode?

Let us know which version of the HTC One X you have (international /
US, carrier) and we can work with you to get SPAN up and running on
it.

- stoker


On Sat, Jan 19, 2013 at 9:27 AM, Outback Dingo <outbackdingo at gmail.com> wrote:
> Ive downloaded them and installed the on an HTC One X seems the manager
> cannot get into adhoc.... phone is rooted, so what did i miss
>
>
> On Fri, Jan 18, 2013 at 5:09 PM, stoker <mistr.stoker at gmail.com> wrote:
"
993,Commotion-dev, Lab setup and initial test results,"Thu, 17 Jan 2013 14:09:18 -0500",-0500,Andy Gunn,"They definitely had a number of Ettus Research USRP units that didn't
look to be in active use.



On 01/17/2013 01:01 PM, Dan Staples wrote:
> If I recall correctly, the lab does have a couple BTS units. Can you 
> verify this, Will?
> 
> Dan
> 
> On Thu 17 Jan 2013 01:29:41 AM EST, Alexander Chemeris wrote:
"
994,Commotion-dev, SPAN Apps Published to Google Play,"Sun, 20 Jan 2013 07:14:12 +1030",+1030,Paul Gardner-Stephen,"Hi Stoker,


On Sat, Jan 19, 2013 at 8:39 AM, stoker <mistr.stoker at gmail.com> wrote:
> Hi All,
>
> For those who want to get geeky, I just posted three apps to Google
> Play: https://play.google.com/store/apps/developer?id=stoker
>
> Try 'em out.
>
> Both the Manet Visualizer and Manet Voice Chat apps make use of a
> common API for interacting with the Manet Service that comes bundled
> with the Manet Manager app. I believe that the idea of a common API
> for making use of the mesh platform may be one of the aspects that
> sets SPAN apart from other projects.

This is great.

The Serval Mesh app (which is about to get a HEAVY update) also offers
some APIs, but probably mostly in complementary areas to your Manet
Manager.  We will endeavour to take a look at your apps soon.

With regard to handset support, it might be worth taking a look at our
handset detection and support code
(https://github.com/servalproject/batphone), as we have already built
support for a number of other handsets, and an automatic guessing
engine that can build support scripts for some new handsets it
encounters.  It's not perfect, but it may be useful to incorporate
into Manet Manager.

Paul.

> - stoker
>
> _______________________________________________
> Commotion-dev mailing list
> Commotion-dev at lists.chambana.net
> https://lists.chambana.net/mailman/listinfo/commotion-dev
"
995,Commotion-dev, SPAN Apps Published to Google Play,"Sun, 20 Jan 2013 16:06:14 -0500",-0500,stoker,"Hi Paul,

We look forward to trying out the Serval Mesh app update. The current
app supports a number of features, including text chat, placing calls,
sharing files, and mapping. Does your team have plans to separate each
of those features out into separate app? I believe that will make
matters simpler from a developer's as well as from a user's
perspective.

Thanks for pointing us to your handset detection and support code.
Since both of our projects are using the edify approach, I believe it
won't be difficult to integrate our code. However, I believe that it
would be best for the Commotion team to integrate all of our
mesh-enabling code into their Mesh Tether app.

As I see it, there are three kinds of devices that the teams are
primarily targeting:
- devices which support wext and can be put into ad-hoc mode without
kernel mods (Serval)
- devices which don't support wext and can be put into ad-hoc mode
without kernel mods (Commotion)
- devices which require kernel mods (SPAN)

I believe we'd all like to see one app which can support all three. I
believe that the Commotion team is best suited for the task
considering their focus and large developer base. More developers
means a wider array of devices to test on and more long-term support.

- stoker


On Sat, Jan 19, 2013 at 3:44 PM, Paul Gardner-Stephen
<paul at servalproject.org> wrote:
> Hi Stoker,
>
>
> On Sat, Jan 19, 2013 at 8:39 AM, stoker <mistr.stoker at gmail.com> wrote:
"
996,Commotion-dev, SPAN Apps Published to Google Play,"Mon, 21 Jan 2013 08:33:46 +1030",+1030,Paul Gardner-Stephen,"Hello,

On Mon, Jan 21, 2013 at 7:36 AM, stoker <mistr.stoker at gmail.com> wrote:
> Hi Paul,
>
> We look forward to trying out the Serval Mesh app update. The current
> app supports a number of features, including text chat, placing calls,
> sharing files, and mapping. Does your team have plans to separate each
> of those features out into separate app? I believe that will make
> matters simpler from a developer's as well as from a user's
> perspective.

Maps is already a separate app for this reason.  However, the calling,
text messaging and file exchange are all based on the core Serval
protocols, and past experience has shown that having (at least the
core function of) those in separate apps that require installation is
disadvantageous, because they are naturally closely coupled, calls and
MeshMS in particular.  The Rhizome protocol that facilitates the file
sharing is used under the hood to power MeshMS and software updates as
well as regular file exchange.

> Thanks for pointing us to your handset detection and support code.
> Since both of our projects are using the edify approach, I believe it
> won't be difficult to integrate our code. However, I believe that it
> would be best for the Commotion team to integrate all of our
> mesh-enabling code into their Mesh Tether app.
>
> As I see it, there are three kinds of devices that the teams are
> primarily targeting:
> - devices which support wext and can be put into ad-hoc mode without
> kernel mods (Serval)
> - devices which don't support wext and can be put into ad-hoc mode
> without kernel mods (Commotion)
> - devices which require kernel mods (SPAN)
>
> I believe we'd all like to see one app which can support all three. I
> believe that the Commotion team is best suited for the task
> considering their focus and large developer base. More developers
> means a wider array of devices to test on and more long-term support.

I totally agree. We would love to see a single app that just provides
ad-hoc wifi and the related functions, and has wide support as you
envisage.

Paul.

> - stoker
>
>
> On Sat, Jan 19, 2013 at 3:44 PM, Paul Gardner-Stephen
> <paul at servalproject.org> wrote:
"
997,Commotion-dev, SPAN Apps Published to Google Play,"Mon, 21 Jan 2013 11:09:44 +0100",+0100,Teco Boot,"Hi,

I would love a flexible ad hoc / manet management app. And have 
integrated network setting functions in ""user apps"" as optional, 
or taken out there.

I use scripts myself, where I configure and start/stop what I need. 
I have a wlan nic settings script, a script for olsrd, for openvpn 
and iptables. I expect more to come (e.g.DNS). 
Reasoning behind scripts: in Linux, daemons are managed with scripts, 
this provides custom modifications.
What about having scripts for each sub-task and an app as interface 
to the scripts? 

Another thought for longer term: have a non-rooted custom rom with 
all of this. Scripts have root privilege, needed for for example 
managing routing table.

I use Galaxy Nexus, adjusted CM10. I have ipip enabled (for olsrd 
smartgateway). The bmf plugin is fixed for tuntap (to be included 
in next olsrd version). 
Shall we try to update CM10, with wext and ipip?

Teco


Op 20 jan. 2013, om 23:03 heeft Paul Gardner-Stephen het volgende geschreven:

> Hello,
> 
> On Mon, Jan 21, 2013 at 7:36 AM, stoker <mistr.stoker at gmail.com> wrote:
"
998,Commotion-dev, SPAN Apps Published to Google Play,"Mon, 21 Jan 2013 13:08:29 -0500",-0500,stoker,"Hi Teco,

The Manet Manager app has an integrated Manet Service that lets other
apps configure the network through an API call. Another app can create
a ManetConfig object, set all of the parameters, and pass it down to
the service. It's optional. A user can also configure the mesh through
the Manet Manager UI.

I understand your use of scripts. Under the hood both the Manet
Manager and Serval Mesh apps use edify scripts to detect devices and
configure them for ad-hoc mode. The apps execute the edify scripts in
a native process. The edify scripts provide some additional Android
functions versus shell scripts, such as loading/unloading the wifi
module. When the Manet Manager needs to execute other native commands
with elevated privileges (like starting olsrd) it writes those
commands to a script on the fly and executes the script with su.

Creating a set of scripts and limiting their access to the Manet
Manager / Serval Mesh app in a custom ROM is an interesting idea.
We've thought about creating a ROM where the Manet Manager would be a
system app and therefore have advanced privileges and not be randomly
killed off by the performance manager.

I highly encourage updating / branching CyanogenMod. Certain devices
require certain modifications to enable wext support and enable ad-hoc
mode. At this time my team doesn't have a large enough developer base
to make custom modifications to each CyanogenMod kernel, so it's a
task we haven't addressed. Maybe it would be best to select one device
at first and go from there? If that's the case, I support choosing the
Galaxy Nexus or Nexus 7.

- stoker


On Mon, Jan 21, 2013 at 5:09 AM, Teco Boot <teco at inf-net.nl> wrote:
> Hi,
>
> I would love a flexible ad hoc / manet management app. And have
> integrated network setting functions in ""user apps"" as optional,
> or taken out there.
>
> I use scripts myself, where I configure and start/stop what I need.
> I have a wlan nic settings script, a script for olsrd, for openvpn
> and iptables. I expect more to come (e.g.DNS).
> Reasoning behind scripts: in Linux, daemons are managed with scripts,
> this provides custom modifications.
> What about having scripts for each sub-task and an app as interface
> to the scripts?
>
> Another thought for longer term: have a non-rooted custom rom with
> all of this. Scripts have root privilege, needed for for example
> managing routing table.
>
> I use Galaxy Nexus, adjusted CM10. I have ipip enabled (for olsrd
> smartgateway). The bmf plugin is fixed for tuntap (to be included
> in next olsrd version).
> Shall we try to update CM10, with wext and ipip?
>
> Teco
>
>
> Op 20 jan. 2013, om 23:03 heeft Paul Gardner-Stephen het volgende geschreven:
>
"
999,Commotion-dev, SPAN Apps Published to Google Play,"Tue, 22 Jan 2013 07:11:02 +1030",+1030,Paul Gardner-Stephen,"Hi,

As CyanogenMod seems to be using github these days, it would make it
much easier to implement something like this.  It would require some
committed developer resource to progressively target various devices.
I fear that it might be a perpetual game of catch up to make the ROMs,
and there is a question of cost-effectiveness.

This is why Serval has been thinking for a while now about making a
mesh helper device instead.  Basically, people keep using their
existing android (or other platform phone), and it associates to the
mesh helper as a WiFi client, and they run only a ""normal"" non-root
application on their phone.

The mesh helper simultaneously runs a WiFi AP and ad-hoc interface,
thus offloading the ad-hoc WiFi from the phone where support is hard,
but also reducing the power requirements for the user's phone, because
client mode is more energy efficient than ad-hoc mode.  The helper
device would itself be mobile-phone hardware derived, as this is the
cheapest way to make it.

Another nice thing about the helper device is that one helper can be
shared by a number of people in its range. It can also serve up the
APKs for the various mesh applications that people might want to use.

We are also planning that the mesh helper device should have an
Arduino or similar built in, so that we can add arbitrary RF front
ends to allow long-range mesh communications.  For example in
countries where the ISM 915MHz band is available (USA, AU, NZ, ZA,
Israel and a number of others, but not Europe), we can use a HopeRF
RFM23BP to transmit at 1W with a simple wave form at 128kbit/sec,
gaining approximately 25db -- 29db over 2.4GHz WiFi, resulting in 16x
- 30x range compared with WiFi.

We have some initial funding from NLnet Foundation to prototype this
using Draginos, and have made some progress, and once we have a few
other blocking tasks out the way, will begin to work on integrating an
RFM23BP as a 915MHz frontend.  See the following URL for some
information on what we have been doing and plan to do over the next
few months:

http://developer.servalproject.org/dokuwiki/doku.php?id=content:meshhelper:main_page

Paul.

On Tue, Jan 22, 2013 at 4:38 AM, stoker <mistr.stoker at gmail.com> wrote:
> Hi Teco,
>
> The Manet Manager app has an integrated Manet Service that lets other
> apps configure the network through an API call. Another app can create
> a ManetConfig object, set all of the parameters, and pass it down to
> the service. It's optional. A user can also configure the mesh through
> the Manet Manager UI.
>
> I understand your use of scripts. Under the hood both the Manet
> Manager and Serval Mesh apps use edify scripts to detect devices and
> configure them for ad-hoc mode. The apps execute the edify scripts in
> a native process. The edify scripts provide some additional Android
> functions versus shell scripts, such as loading/unloading the wifi
> module. When the Manet Manager needs to execute other native commands
> with elevated privileges (like starting olsrd) it writes those
> commands to a script on the fly and executes the script with su.
>
> Creating a set of scripts and limiting their access to the Manet
> Manager / Serval Mesh app in a custom ROM is an interesting idea.
> We've thought about creating a ROM where the Manet Manager would be a
> system app and therefore have advanced privileges and not be randomly
> killed off by the performance manager.
>
> I highly encourage updating / branching CyanogenMod. Certain devices
> require certain modifications to enable wext support and enable ad-hoc
> mode. At this time my team doesn't have a large enough developer base
> to make custom modifications to each CyanogenMod kernel, so it's a
> task we haven't addressed. Maybe it would be best to select one device
> at first and go from there? If that's the case, I support choosing the
> Galaxy Nexus or Nexus 7.
>
> - stoker
>
>
> On Mon, Jan 21, 2013 at 5:09 AM, Teco Boot <teco at inf-net.nl> wrote:
"
1000,Commotion-dev, Ok to commit to master OpenWRT branch default root,"Mon, 21 Jan 2013 15:15:36 -0600",-0600,Ben West,"Hi All,

Any objections to my committing a change to the master Commotion-OpenWRT
branch that sets the default root password for compiled images to be
r0ot56c0MM0t10N ?

My experience with this showed that having the root password set by default
makes the pre-init process on newly-flashed nodes easier, but I wasn't sure
if this would interfere with specific use cases for the meshconfig tool.

-- 
Ben West
http://gowasabi.net
ben at gowasabi.net
314-246-9434
"
1001,Commotion-dev, Do please give these Commotion-OpenWRT images with,"Mon, 21 Jan 2013 16:20:16 -0600",-0600,Ben West,"Hi All,

I've been busy trying out backports to the current Commotion-OpenWRT
codebase to incorporate the newer v3.3.8 kernel on all platforms (ar71xx,
atheros, and x86), along with updated radio drivers from
compat-wireless-2012-09-07.  These backports were adapted from the current
'Atttitude Adjustment v12.09' branch of OpenWRT, and they would have been
near impossible to create without help from VirtualBox/VMware.

It is expected that the newer kernel, and especially the newer radio
drivers, will yield noticeable speed and stability improvements!

Here are the branches in the Commotion git repo, where I had been
collecting the various patches needed to apply these backports.  If you
wish to build images from these repos, you will likely need to do a 'make
dirclean' to clear out old binaries!

https://code.commotionwireless.net/projects/commotion-openwrt/repository/show?rev=ath9k_new
https://code.commotionwireless.net/projects/commotion-openwrt/repository/show?rev=ath5kMinimal_new
https://code.commotionwireless.net/projects/commotion-openwrt/repository/show?rev=x86_new

Next, here are pre-compiled image that I made today.  The default root
password on these images is r0ot56c0MM0t10N , but you should also be able
to use the sysupgrade tool to re-flash your nodes in-place, and preserve
their existing configuration.

http://info.gowasabi.net/commotion-openwrt-new/
http://info.gowasabi.net/commotion-openwrt-new/openwrt/bin/ar71xx/
http://info.gowasabi.net/commotion-openwrt-new/openwrt/bin/atheros/
http://info.gowasabi.net/commotion-openwrt-new/openwrt/bin/atheros-ar2315-minimal/
http://info.gowasabi.net/commotion-openwrt-new/openwrt/bin/x86/

I've tried my best to verify these images work on my end, and that they can
be drop-in replacements for the current version of Commotion.  However, I
would still recommend first flashing a node where you have access to its
reset button, just in case.

The 'minimal' images referred to above are my best attempt to compile for
low-memory devices like a FONera.  *However*, do be warned that OpenWRT
devs insist the v3.3+ kernel will *not* run reliably under 16MB of RAM.
Indeed my own attempt at flashing a FONera just yielded kernel errors from
insufficient memory.  It may finally be time to put those FONeras and
pre-802.11n Nanostations out to pasture.

The purpose of making these images is to let the Commotion community at
large benefit from kernel and radio driver improvements right now, while
giving the firmware developers time to upgrade Commotion-OpenWRT itself to
support the new netifd API in OpenWRT v12.09.

Finally, and w.r.t. to stability improvements, I would recommend trying the
new images for these support requests that were filed over the past few
months.

https://code.commotionwireless.net/issues/330
https://code.commotionwireless.net/issues/342
https://code.commotionwireless.net/issues/403

Ideally, if everyone's testing goes well, these backports can be merged
into the master Commotion-OpenWRT branch!

-- 
Ben West
http://gowasabi.net
ben at gowasabi.net
314-246-9434
"
1002,Commotion-dev, Ok to commit to master OpenWRT branch default,"Mon, 21 Jan 2013 23:31:18 +0100",+0100,L. Aaron Kaplan,"
On Jan 21, 2013, at 10:15 PM, Ben West <ben at gowasabi.net> wrote:

> Hi All,
> 
> Any objections to my committing a change to the master Commotion-OpenWRT branch that sets the default root password for compiled images to be r0ot56c0MM0t10N ?
> 

And that's going to be deployed like that?


a.


"
1003,Commotion-dev, Ok to commit to master OpenWRT branch default,"Mon, 21 Jan 2013 16:34:25 -0600",-0600,Ben West,"This is why I ask.  What is preferred method for letting users specify a
root password?

OpenWRT by default has no root password set, expecting you first telnet in
to set the password.  This doesn't seem to play nicely with the automated
configuration that the meshconfig tool tries to do.  I had thought that
compiling in a default root password into images did not change the (lack
of) security of this arrangement any all, while at least letting meshconfig
run to completion.

On Mon, Jan 21, 2013 at 4:31 PM, L. Aaron Kaplan <aaron at lo-res.org> wrote:

>
> On Jan 21, 2013, at 10:15 PM, Ben West <ben at gowasabi.net> wrote:
>
> > Hi All,
> >
> > Any objections to my committing a change to the master Commotion-OpenWRT
> branch that sets the default root password for compiled images to be
> r0ot56c0MM0t10N ?
> >
>
> And that's going to be deployed like that?
>
>
> a.
>
"
1004,Commotion-dev, Ok to commit to master OpenWRT branch default,"Tue, 22 Jan 2013 01:10:24 +0100",+0100,L. Aaron Kaplan,"
On Jan 21, 2013, at 11:34 PM, Ben West <ben at gowasabi.net> wrote:

> This is why I ask.  What is preferred method for letting users specify a root password?

Yeah, a hard problem.

Ideally you generate one initially and display it on some LCD once ;-)

The problem that I see with having the password a well known default password is that usually people forget to change it. Search engines then find those devices on the internet. And they are sort of p0wned by definition then :)

> 
> OpenWRT by default has no root password set, expecting you first telnet in to set the password.  This doesn't seem to play nicely with the automated configuration that the meshconfig tool tries to do.  I had thought that compiling in a default root password into images did not change the (lack of) security of this arrangement any all, while at least letting meshconfig run to completion.
> 
Well.... I did discover some openwrts in the wild which are default, unconfigured and once you greet them with a telnet login attempt, they will greet you back with a prompt (""#"") sign. No password required. Yikes.


Personally I recommend the following:
Step 1: an unconfigured mesh node generates a random password
Step 2: it connects to some central server and fetches its configuration.
Step 3: It reconfigures itself based on the configuration stored in the nodeDB. The user can change the pwd from a nodeDB/dashboard.

(I know this conflicts with the totally distributed approach of commotion, but that's how we will do it initially with our new nodeDB at Funkfeuer)

That's one way to do it. ssh keys are a different one. X509 certificates also come to mind.
I am open to better suggestions.

a.


"
1005,Commotion-dev, Ok to commit to master OpenWRT branch default,"Mon, 21 Jan 2013 20:38:16 -0500",-0500,Dan Staples,"We actually have an entire quick start wizard in the works now for the 
Commotion DR1 release candidate, which should be released shortly. This 
will walk the user through all the steps of configuring a device, 
including root password, or uploading a configuration file, upon first 
boot. So I would say setting a default password would probably not be 
needed in this case.

Dan

On Mon 21 Jan 2013 07:10:24 PM EST, L. Aaron Kaplan wrote:
>
> On Jan 21, 2013, at 11:34 PM, Ben West <ben at gowasabi.net> wrote:
>
"
1006,Commotion-dev, Ok to commit to master OpenWRT branch default,"Mon, 21 Jan 2013 20:29:28 -0600",-0600,Ben West,"This is encouraging to hear.  Is the code base for DR1 RC somewhere on the
git repo at code.commotionwireless.net at present, or is that also pending
release soon too?

At any rate I won't commit anything to the master branch for a default root
password.

(Also, I hope the back ports for the newer kernel and compat-wireless
drivers mentioned in the other thread are still of use. Or maybe they're
now already obsolete ...)

On Monday, January 21, 2013, Dan Staples wrote:

> We actually have an entire quick start wizard in the works now for the
> Commotion DR1 release candidate, which should be released shortly. This
> will walk the user through all the steps of configuring a device,
> including root password, or uploading a configuration file, upon first
> boot. So I would say setting a default password would probably not be
> needed in this case.
>
> Dan
>
> On Mon 21 Jan 2013 07:10:24 PM EST, L. Aaron Kaplan wrote:
> >
> > On Jan 21, 2013, at 11:34 PM, Ben West <ben at gowasabi.net <javascript:;"
1007,Commotion-dev, Ok to commit to master OpenWRT branch default,"Mon, 21 Jan 2013 22:52:32 -0500",-0500,Dan Staples,"Right now a most of the new code for DR1 that we've been working on is 
in various repos on the OTI github account: 
https://github.com/opentechinstitute. Everything has yet to be compiled 
into a single source tree, since plenty of it isn't finished yet.

As for the backports, I really have no idea. I know Josh King has been 
working on bringing Commotion-OpenWRT up to Attitude Adjustment, and 
I'm not sure what kernel version that uses. I apologize that our DR1 
efforts haven't been well documented or announced. I think in the 
future, it would be good for us Commotion developers at OTI to be more 
transparent with what we're working on, at least for the reason that 
it's important for everyone to be on the same page...it would be crummy 
for someone to be working on something that is then made obsolete by 
something someone else is working on!

We've been pretty good about tracking our DR1 efforts on the Commotion 
issue tracker. You can check out the DR1-specific stuff here: 
https://code.commotionwireless.net/projects/commotion/issues?set_filter=1&f[]=fixed_version_id&op[fixed_version_id]=%3D&v[fixed_version_id][]=2&f[]=&c[]=tracker&c[]=status&c[]=priority&c[]=subject&c[]=assigned_to&c[]=updated_on&group_by=.

Here are some highlights of what we've been working on for DR1:

* A cross-platform Commotion daemon written in C, to manage all the 
Commotion components and handle configuration
* Quick Start wizard to guide the user through setting up a node on 
first boot
* Application advertisement and discovery (using mDNS/DNSSD) and 
OpenWRT application web portal
* Enhanced security features, such as AuthSAE and a OLSRd-secure plugin 
to sign routing traffic with Serval keys
* A new LuCI theme to match commotionwireless.net
* A Commotion-OpenBTS live distro with Serval integration

Dan

On Mon 21 Jan 2013 09:29:28 PM EST, Ben West wrote:
> This is encouraging to hear.  Is the code base for DR1 RC somewhere on
> the git repo at code.commotionwireless.net
> <http://code.commotionwireless.net> at present, or is that also
> pending release soon too?
>
> At any rate I won't commit anything to the master branch for a default
> root password.
>
> (Also, I hope the back ports for the newer kernel and compat-wireless
> drivers mentioned in the other thread are still of use. Or maybe
> they're now already obsolete ...)
>
> On Monday, January 21, 2013, Dan Staples wrote:
>
>     We actually have an entire quick start wizard in the works now for the
>     Commotion DR1 release candidate, which should be released shortly.
>     This
>     will walk the user through all the steps of configuring a device,
>     including root password, or uploading a configuration file, upon first
>     boot. So I would say setting a default password would probably not be
>     needed in this case.
>
>     Dan
>
>     On Mon 21 Jan 2013 07:10:24 PM EST, L. Aaron Kaplan wrote:
>     >
>     > On Jan 21, 2013, at 11:34 PM, Ben West <ben at gowasabi.net
>     <javascript:;"
1008,Commotion-dev, Ok to commit to master OpenWRT branch default,"Mon, 21 Jan 2013 22:06:46 -0600",-0600,Ben West,"If it helps, I believe the specific backports I created for kernel v3.3.8
and compat-wireless-2012-09-07 are generally independent of application
layer within OpenWRT.

So, whenever the DR1 release candidate is assembled into a coherent whole,
if the underlying OS doesn't already have the kernel and radio drivers from
Attitude Adjustment, then these backports may work on that too:

https://code.commotionwireless.net/projects/commotion-openwrt/repository/revisions/ath9k_new/changes/patches/backport_kernel_3.3.8.patch
https://code.commotionwireless.net/projects/commotion-openwrt/repository/revisions/ath9k_new/changes/patches/backport_compat_wireless_09-07-12.patch

My original motivation for creating the backports was that the
compat-wireless drivers included with the version of Commotion pinned to
trunk r31639 didn't work very well with the ath9k_htc USB wifi adapters I'd
been using.  That, and the fact that I too had a personal copy of Attitude
Adjustment that I had been toying around with for purposes vaguely
tangential to Commotion.

Perhaps one day everyone's secret copies of Attitude Adjustment will be
merged together . :)

On Mon, Jan 21, 2013 at 9:52 PM, Dan Staples <
danstaples at opentechinstitute.org> wrote:

> Right now a most of the new code for DR1 that we've been working on is
> in various repos on the OTI github account:
> https://github.com/opentechinstitute. Everything has yet to be compiled
> into a single source tree, since plenty of it isn't finished yet.
>
> As for the backports, I really have no idea. I know Josh King has been
> working on bringing Commotion-OpenWRT up to Attitude Adjustment, and
> I'm not sure what kernel version that uses. I apologize that our DR1
> efforts haven't been well documented or announced. I think in the
> future, it would be good for us Commotion developers at OTI to be more
> transparent with what we're working on, at least for the reason that
> it's important for everyone to be on the same page...it would be crummy
> for someone to be working on something that is then made obsolete by
> something someone else is working on!
>
> We've been pretty good about tracking our DR1 efforts on the Commotion
> issue tracker. You can check out the DR1-specific stuff here:
>
> https://code.commotionwireless.net/projects/commotion/issues?set_filter=1&f[]=fixed_version_id&op[fixed_version_id]=%3D&v[fixed_version_id][]=2&f[]=&c[]=tracker&c[]=status&c[]=priority&c[]=subject&c[]=assigned_to&c[]=updated_on&group_by=
> .
>
> Here are some highlights of what we've been working on for DR1:
>
> * A cross-platform Commotion daemon written in C, to manage all the
> Commotion components and handle configuration
> * Quick Start wizard to guide the user through setting up a node on
> first boot
> * Application advertisement and discovery (using mDNS/DNSSD) and
> OpenWRT application web portal
> * Enhanced security features, such as AuthSAE and a OLSRd-secure plugin
> to sign routing traffic with Serval keys
> * A new LuCI theme to match commotionwireless.net
> * A Commotion-OpenBTS live distro with Serval integration
>
> Dan
>
> On Mon 21 Jan 2013 09:29:28 PM EST, Ben West wrote:
> > This is encouraging to hear.  Is the code base for DR1 RC somewhere on
> > the git repo at code.commotionwireless.net
> > <http://code.commotionwireless.net> at present, or is that also
> > pending release soon too?
> >
> > At any rate I won't commit anything to the master branch for a default
> > root password.
> >
> > (Also, I hope the back ports for the newer kernel and compat-wireless
> > drivers mentioned in the other thread are still of use. Or maybe
> > they're now already obsolete ...)
> >
> > On Monday, January 21, 2013, Dan Staples wrote:
> >
> >     We actually have an entire quick start wizard in the works now for
> the
> >     Commotion DR1 release candidate, which should be released shortly.
> >     This
> >     will walk the user through all the steps of configuring a device,
> >     including root password, or uploading a configuration file, upon
> first
> >     boot. So I would say setting a default password would probably not be
> >     needed in this case.
> >
> >     Dan
> >
> >     On Mon 21 Jan 2013 07:10:24 PM EST, L. Aaron Kaplan wrote:
> >     >
> >     > On Jan 21, 2013, at 11:34 PM, Ben West <ben at gowasabi.net
> >     <javascript:;"
1009,Commotion-dev, SPAN Apps Published to Google Play,"Tue, 22 Jan 2013 07:36:26 +0100",+0100,Teco Boot,"Hi Paul,

Using an external radio for longer range ad hoc connections makes 
sense. Question is how to connect the smartphone to such device. I'm
not so sure WiFi AP is the right solution. The helper acting as AP 
would be power hungry, where the smartphone as station can use the 
power saving modes. Maybe bluetooth tethering can help.

I still like the wlan ad hoc mode, for short range / high data rate. 
Energy consumption shouldn't be a problem when the MANET protocol and 
beaconing is quit. Maybe take the reactive approach. Do you use the 
RF22 mesh protocol?

Teco


Op 21 jan. 2013, om 21:41 heeft Paul Gardner-Stephen het volgende geschreven:

> Hi,
> 
> As CyanogenMod seems to be using github these days, it would make it
> much easier to implement something like this.  It would require some
> committed developer resource to progressively target various devices.
> I fear that it might be a perpetual game of catch up to make the ROMs,
> and there is a question of cost-effectiveness.
> 
> This is why Serval has been thinking for a while now about making a
> mesh helper device instead.  Basically, people keep using their
> existing android (or other platform phone), and it associates to the
> mesh helper as a WiFi client, and they run only a ""normal"" non-root
> application on their phone.
> 
> The mesh helper simultaneously runs a WiFi AP and ad-hoc interface,
> thus offloading the ad-hoc WiFi from the phone where support is hard,
> but also reducing the power requirements for the user's phone, because
> client mode is more energy efficient than ad-hoc mode.  The helper
> device would itself be mobile-phone hardware derived, as this is the
> cheapest way to make it.
> 
> Another nice thing about the helper device is that one helper can be
> shared by a number of people in its range. It can also serve up the
> APKs for the various mesh applications that people might want to use.
> 
> We are also planning that the mesh helper device should have an
> Arduino or similar built in, so that we can add arbitrary RF front
> ends to allow long-range mesh communications.  For example in
> countries where the ISM 915MHz band is available (USA, AU, NZ, ZA,
> Israel and a number of others, but not Europe), we can use a HopeRF
> RFM23BP to transmit at 1W with a simple wave form at 128kbit/sec,
> gaining approximately 25db -- 29db over 2.4GHz WiFi, resulting in 16x
> - 30x range compared with WiFi.
> 
> We have some initial funding from NLnet Foundation to prototype this
> using Draginos, and have made some progress, and once we have a few
> other blocking tasks out the way, will begin to work on integrating an
> RFM23BP as a 915MHz frontend.  See the following URL for some
> information on what we have been doing and plan to do over the next
> few months:
> 
> http://developer.servalproject.org/dokuwiki/doku.php?id=content:meshhelper:main_page
> 
> Paul.
> 
> On Tue, Jan 22, 2013 at 4:38 AM, stoker <mistr.stoker at gmail.com> wrote:
"
1010,Commotion-dev, SPAN Apps Published to Google Play,"Tue, 22 Jan 2013 21:23:38 +1030",+1030,Paul Gardner-Stephen,"Hello Teco,

On Tue, Jan 22, 2013 at 5:06 PM, Teco Boot <teco at inf-net.nl> wrote:
> Hi Paul,
>
> Using an external radio for longer range ad hoc connections makes
> sense. Question is how to connect the smartphone to such device. I'm
> not so sure WiFi AP is the right solution. The helper acting as AP
> would be power hungry, where the smartphone as station can use the
> power saving modes. Maybe bluetooth tethering can help.

But remember that the helper device can actually have a larger battery.
Also, AP mode is still less power hungry than ad-hoc mode on most hardware.
We would need to investigate all this more thoroughly.

> I still like the wlan ad hoc mode, for short range / high data rate.

As do we.

> Energy consumption shouldn't be a problem when the MANET protocol and
> beaconing is quit. Maybe take the reactive approach.

Actually, ad-hoc consumes almost as much power listening as it does
transmitting, due to the waveforms used in WiFi.

> Do you use the RF22 mesh protocol?

No. We are creating a new protocol that we call ""multi-threaded radio""
and is designed with the frequency hopping requirements of the ISM915
band in mind.

Once synchronised (which has some interesting but solvable
challenges), then the radios will follow the same sequence of channels
to listen on, with a channel dwell time of 1ms - 2ms, and a bit rate
of 128kbit.

Each radio will only listen on 1/4 of the slots, reducing RX duty
cycle to 25%, reducing energy consumption.  Even when listening,
energy consumption will be much lower than WiFi due to the simpler
waveform decoding.

When a radio hears a packet for itself, it keeps listening on the same
channel to receive the whole packet.  This will likely be ~10s of ms.
Meanwhile, the other nodes will have hopped along to other channels to
listen if there is any traffic for them.  Thus we can get 128kbit on
each channel, with many channels carrying traffic at the same time.
Or at least that is the theory, we will find out when we get to
implement it :)

Paul.

> Teco
>
>
> Op 21 jan. 2013, om 21:41 heeft Paul Gardner-Stephen het volgende geschreven:
>
"
1011,Commotion-dev, Serval Mesh (aka Batphone) 0.90 Release Candidate 1,"Tue, 22 Jan 2013 22:23:03 +1030",+1030,Paul Gardner-Stephen,"Hello,

See http://servalpaul.blogspot.com.au/2013/01/serval-mesh-090-release-candidate-1-is.html
for details.

Testing by your community would be of great value to us to help
identify any issues with the release candidate before we move to full
release, including on Google Play.

Thanks,
Paul Gardner-Stephen,
Founder Serval Project.

"
1012,Commotion-dev, SPAN Apps Published to Google Play,"Tue, 22 Jan 2013 14:46:30 +0100",+0100,Teco Boot,"Hi Paul,

Op 22 jan. 2013, om 11:53 heeft Paul Gardner-Stephen het volgende geschreven:

> Hello Teco,
> 
> On Tue, Jan 22, 2013 at 5:06 PM, Teco Boot <teco at inf-net.nl> wrote:
"
1013,Commotion-dev, SPAN Apps Published to Google Play,"Wed, 23 Jan 2013 07:34:35 +1030",+1030,Paul Gardner-Stephen,"Hello Teco,

On Wed, Jan 23, 2013 at 12:16 AM, Teco Boot <teco at inf-net.nl> wrote:
> Hi Paul,
>
> Op 22 jan. 2013, om 11:53 heeft Paul Gardner-Stephen het volgende geschreven:
>
"
1014,Commotion-dev, What would you do with the USB port on your,"Tue, 22 Jan 2013 15:15:21 -0600",-0600,Ben West,"Hi All,

For the past few months, I've been using a heavily modified derivative of
Commotion-OpenWRT on Buffalo WZR-HP-G300NH units which I use as gateway
routers in WasabiNet.  These units happen to have a USB port, which works
just fine and dandy under OpenWRT, both for USB peripherals and mounting
USB disks (presumably both solid state or HD).

I'm using these USB ports to monitor APC battery back-up supplies on the
gateway routers, but that's pretty boring.  I've tried asking a couple
times at the hacker space here in St. Louis what neat uses folks may have
for a USB port on their Internet router, e.g. file server, or miscellaneos
remote control, but the interest there hasn't been strong.

The Buffalo routers are neat, but even neater looks to be this 40$US unit,
a TP-Link TL-MR3020 :
http://www.microcenter.com/product/379216/Portable_3G-375G_Wireless-N_Router

I do believe Musti was showing off something similar to this at the IS4CWN
last year.  Don't let the '3G connectivity' nonsense distract you; this is
a cute little 802.11n ath9k-based radio with a USB port, and it looks like
it will run OpenWRT with some encouragement.  Furthermore, a 2nd USB port
can be had with some soldering and elbow grease.
http://wiki.openwrt.org/toh/tp-link/tl-mr3020

Likewise, the TL-WR703N is an equivalent unit:
http://wiki.openwrt.org/toh/tp-link/tl-wr703n

What could this USB port do for you?

- Filesystem for squid proxy? (Probably not very practical)
- 3G/4G modem for Internet gateway?
- USB sound adapter for streaming MP3 applications?
- Control this desktop rocket launcher
http://www.thinkgeek.com/product/8a0f/ ?

-- 
Ben West
http://gowasabi.net
ben at gowasabi.net
314-246-9434
"
1015,Commotion-dev, SPAN Apps Published to Google Play,"Tue, 22 Jan 2013 22:32:47 +0100",+0100,Teco Boot,"
Op 22 jan. 2013, om 22:04 heeft Paul Gardner-Stephen het volgende geschreven:

/skipped/

on RFM23BP:

> In principle it should be possible to run OLSRd or similar over the
> long range mesh, although the limited bandwidth would not be very nice
> for IP-based applications.  The concept has really been designed with
> MDP, VoMP and Rhizome in mind, that can tolerate low-bandwidth
> situations.
> 
> But back to OLSRd, that should not be a big problem, provided that you
> can reduce the heart rate from the typical 1Hz - 2Hz to, say, 0.01Hz -
> 0.05Hz, which should be possible because of the 16x - 30x range
> increase, which means that nodes should move in and out of range 16x -
> 30x more slowly.  In fact, node transit times may in fact average more
> than 16x - 30x for a variety of reasons.

With OLSR/OLSRv2, it is not possible to set the update rate on a link.
The originator of for example TC messages defines the rate. If it is
a higher frequency, e.g. mains powered router on high rate links, a next
hop link faces this high rate.

> 
> Really the biggest challenge to carrying IP traffic over our
> long-range-mesh concept is that it will not appear to the OS as a
> network interface -- the network functions will be provided solely as
> part of the Serval Overlay Mesh functions of the Serval Daemon.  Thus
> you would need a TCP to MDP tunnel/socks-proxy type thing to
> encapsulate the IP packets.

Yes, routing at middleware layer or proxy.
I assume these links are fall back. That would be try 1st end-to-end IP,
and fall back to these non-IP links when no IP path is available.

Teco


"
1016,Commotion-dev, SPAN Apps Published to Google Play,"Wed, 23 Jan 2013 00:24:41 +0100",+0100,L. Aaron Kaplan,"
On Jan 22, 2013, at 10:32 PM, Teco Boot <teco at inf-net.nl> wrote:

> 
> Op 22 jan. 2013, om 22:04 heeft Paul Gardner-Stephen het volgende geschreven:
> 
> /skipped/
> 
> on RFM23BP:
> 
"
1017,Commotion-dev, SPAN Apps Published to Google Play,"Tue, 22 Jan 2013 18:39:23 -0500",-0500,stoker,"Hi Paul,

I just want to say that the mesh helper is a very cool idea. It
reminds me of the Persistent Systems Man Portable Unit (MPU):
http://www.persistentsystems.com/products_7a.php

Essentially the MPU acts as an AP which lets devices send data over
the Persistant Systems high powered long distance 2.4 / 5 GHz MANET.

A cheaper, open source, developer-friendly solution would be great.
Using an available ISM band for long distance comms makes sense.

- stoker


On Mon, Jan 21, 2013 at 3:41 PM, Paul Gardner-Stephen
<paul at servalproject.org> wrote:
> Hi,
>
> As CyanogenMod seems to be using github these days, it would make it
> much easier to implement something like this.  It would require some
> committed developer resource to progressively target various devices.
> I fear that it might be a perpetual game of catch up to make the ROMs,
> and there is a question of cost-effectiveness.
>
> This is why Serval has been thinking for a while now about making a
> mesh helper device instead.  Basically, people keep using their
> existing android (or other platform phone), and it associates to the
> mesh helper as a WiFi client, and they run only a ""normal"" non-root
> application on their phone.
>
> The mesh helper simultaneously runs a WiFi AP and ad-hoc interface,
> thus offloading the ad-hoc WiFi from the phone where support is hard,
> but also reducing the power requirements for the user's phone, because
> client mode is more energy efficient than ad-hoc mode.  The helper
> device would itself be mobile-phone hardware derived, as this is the
> cheapest way to make it.
>
> Another nice thing about the helper device is that one helper can be
> shared by a number of people in its range. It can also serve up the
> APKs for the various mesh applications that people might want to use.
>
> We are also planning that the mesh helper device should have an
> Arduino or similar built in, so that we can add arbitrary RF front
> ends to allow long-range mesh communications.  For example in
> countries where the ISM 915MHz band is available (USA, AU, NZ, ZA,
> Israel and a number of others, but not Europe), we can use a HopeRF
> RFM23BP to transmit at 1W with a simple wave form at 128kbit/sec,
> gaining approximately 25db -- 29db over 2.4GHz WiFi, resulting in 16x
> - 30x range compared with WiFi.
>
> We have some initial funding from NLnet Foundation to prototype this
> using Draginos, and have made some progress, and once we have a few
> other blocking tasks out the way, will begin to work on integrating an
> RFM23BP as a 915MHz frontend.  See the following URL for some
> information on what we have been doing and plan to do over the next
> few months:
>
> http://developer.servalproject.org/dokuwiki/doku.php?id=content:meshhelper:main_page
>
> Paul.
>
> On Tue, Jan 22, 2013 at 4:38 AM, stoker <mistr.stoker at gmail.com> wrote:
"
1018,Commotion-dev, What would you do with the USB port on your,"Wed, 23 Jan 2013 11:56:35 +1030",+1030,Paul Gardner-Stephen,"Hi Ben, All,

Do check out the 2nd generation MeshPotato that VillageTelco are commissioning.
It is based on the same chipset, and has a USB port, and will come in
indoor and outdoor ready varieties.  See below for the announcement
yesterday from Steve Song from
https://groups.google.com/forum/?fromgroups=#!topic/village-telco-mp20/TpceSRIiUr4

The main interesting points for me, apart from it being an
open-hardware project, and will come running OpenWRT, are the
relatively generous flash (16MB) and RAM (64MB), plus 11 exposed GPIO
lines.  We hope to use those to connect Arduinos connected to RF front
ends for long-range meshing as part of our mesh helper device project.

We have asked for 10 of the initial batch, and will be happy to try
flash images that people provide.

Paul.

"
1019,Commotion-dev, What would you do with the USB port on your,"Wed, 23 Jan 2013 09:46:25 +0100",+0100,Christian Huldt,"Ben West skrev 2013-01-22 22:15:
>
> What could this USB port do for you?
>
> - Filesystem for squid proxy? (Probably not very practical)
> - 3G/4G modem for Internet gateway?
> - USB sound adapter for streaming MP3 applications?
> - Control this desktop rocket launcher
> http://www.thinkgeek.com/product/8a0f/ ?

3G/4G modem and/or a tellstick to control some equipment
http://www.telldus.se/products/tellstick


"
1020,Commotion-dev, What would you do with the USB port on your,"Wed, 23 Jan 2013 09:09:55 -0500",-0500,Dan Staples,"A USRP for OpenBTS! Although I doubt a router has the processing power
needed to encode voice data and the like... A HackRF would also be a
great peripheral to use once those are publicly available:
http://ossmann.blogspot.com/2012/06/introducing-hackrf.html.

I currently have a router with a USB port, that I run DD-WRT on. I have
a 250GB HDD plugged into it, which I use for automated backups of a
website I run, plus a SFTP server. A USB port was a deciding factor in
the router I decided to buy...It's an ASUS WL-520GU. But I could also
see a 3G dongle as a big appeal for a USB port.

Another idea is to use a USB drive as a crypto device. Insert the USB
flash drive to unlock a keyring or some private key material. That would
be an easy way to deploy multiple routers on a network that need to use
a common encryption key(s).

Dan

On Wed 23 Jan 2013 03:46:25 AM EST, Christian Huldt wrote:
>
> Ben West skrev 2013-01-22 22:15:
"
1021,Commotion-dev, What would you do with the USB port on your,"Wed, 23 Jan 2013 09:22:00 -0500",-0500,Josh King,"Probably an Entropy Key or other RNG for stronger crypto?

http://www.entropykey.co.uk/

On Wed 23 Jan 2013 09:09:55 AM EST, Dan Staples wrote:
> A USRP for OpenBTS! Although I doubt a router has the processing power
> needed to encode voice data and the like... A HackRF would also be a
> great peripheral to use once those are publicly available:
> http://ossmann.blogspot.com/2012/06/introducing-hackrf.html.
>
> I currently have a router with a USB port, that I run DD-WRT on. I have
> a 250GB HDD plugged into it, which I use for automated backups of a
> website I run, plus a SFTP server. A USB port was a deciding factor in
> the router I decided to buy...It's an ASUS WL-520GU. But I could also
> see a 3G dongle as a big appeal for a USB port.
>
> Another idea is to use a USB drive as a crypto device. Insert the USB
> flash drive to unlock a keyring or some private key material. That would
> be an easy way to deploy multiple routers on a network that need to use
> a common encryption key(s).
>
> Dan
>
> On Wed 23 Jan 2013 03:46:25 AM EST, Christian Huldt wrote:
"
1022,Commotion-dev, Fwd: Opensource SDK for SIM hacking,"Wed, 23 Jan 2013 09:31:03 -0500",-0500,Dan Staples,"I'm throwing this out to the Commotion list to see if anyone has any
familiarity with this project. I just saw it posted on LibTech. Several
of the goals of the project align with goals of Commotion, especially
around our OpenBTS work. It's particularly interesting that they are
focused on making this an accessible tool for general users, and that it
runs on Windows.

This page mentions a pilot program they did in Uganda using the
software, using SIM cards to discreetly share information:
https://github.com/abayima/opensimkit

One thing that does make me hesitate though, is that their software
""phones home"" to their servers to let them (and their funders) know who
is using the software and where:
http://dev.opensimkit.com/index.php/User_Guide

Dan


"
1023,Commotion-dev, What would you do with the USB port on your,"Wed, 23 Jan 2013 10:37:31 -0500",-0500,Seamus Tuohy,"The use cases I have for a router with a usb port are:
File Server (my github account has a basic luci implementation of a
file-server)
I keep meaning to implement a very tiny bbs server to put on a router
and lastly, a set of various usb sensors that can be connected to a
simple sensor-socket library would be awesome. I can only imagine what
we could accomplish by crating a literal plug-and-sense library for any
sensor to start propagating its data immediately.

s2e


I have been having a hellish time getting the usb on Buffalo's to work
with the PR3 release of commotion. This gives me hope.



On 01/22/2013 04:15 PM, Ben West wrote:
> Hi All,
> 
> For the past few months, I've been using a heavily modified derivative of
> Commotion-OpenWRT on Buffalo WZR-HP-G300NH units which I use as gateway
> routers in WasabiNet.  These units happen to have a USB port, which works
> just fine and dandy under OpenWRT, both for USB peripherals and mounting
> USB disks (presumably both solid state or HD).
> 
> I'm using these USB ports to monitor APC battery back-up supplies on the
> gateway routers, but that's pretty boring.  I've tried asking a couple
> times at the hacker space here in St. Louis what neat uses folks may have
> for a USB port on their Internet router, e.g. file server, or miscellaneos
> remote control, but the interest there hasn't been strong.
> 
> The Buffalo routers are neat, but even neater looks to be this 40$US unit,
> a TP-Link TL-MR3020 :
> http://www.microcenter.com/product/379216/Portable_3G-375G_Wireless-N_Router
> 
> I do believe Musti was showing off something similar to this at the IS4CWN
> last year.  Don't let the '3G connectivity' nonsense distract you; this is
> a cute little 802.11n ath9k-based radio with a USB port, and it looks like
> it will run OpenWRT with some encouragement.  Furthermore, a 2nd USB port
> can be had with some soldering and elbow grease.
> http://wiki.openwrt.org/toh/tp-link/tl-mr3020
> 
> Likewise, the TL-WR703N is an equivalent unit:
> http://wiki.openwrt.org/toh/tp-link/tl-wr703n
> 
> What could this USB port do for you?
> 
> - Filesystem for squid proxy? (Probably not very practical)
> - 3G/4G modem for Internet gateway?
> - USB sound adapter for streaming MP3 applications?
> - Control this desktop rocket launcher
> http://www.thinkgeek.com/product/8a0f/ ?
> 
> 
> 
> _______________________________________________
> Commotion-dev mailing list
> Commotion-dev at lists.chambana.net
> https://lists.chambana.net/mailman/listinfo/commotion-dev
> 

"
1024,Commotion-dev, What would you do with the USB port on your,"Wed, 23 Jan 2013 10:57:55 -0500",-0500,Benjamin Chodoroff,"i've used mine for sensor networks: 
http://jeelabs.com/products/jeenode-usb

i <3 jeenodes

"
1025,Commotion-dev, DR1 Quickstart,"Wed, 23 Jan 2013 11:24:15 -0500",-0500,Seamus Tuohy,"Hello All,

A quick update on the quickstart interface I am putting together for
developer-release one. The quickstart is a ""on first boot"" interface
that walks a user through customizing a node. This is intended to make
the initial setup of a node trivial for a new user. The current version
is missing the ""one-button"" setup. This should be added by the start of
next week.

Version 001 of this quickstart was a ""mostly"" functional luci interface
which set the various configuration files on the node. Version 002 (the
current branch) only configures a nodeConf uci file which the upcoming
commotion daemon will use to configure the node at the conclusion of the
quickstart. As such, the current version will spend of its time
customizing uci files and making ubus calls to the commotion daemon to
fetch data.

You can find the controlling code at
https://github.com/opentechinstitute/commotion-quick-start/tree/Version02 .
If you want to run it you will have to also grab the www directory from
the main branch at
https://github.com/opentechinstitute/commotion-quick-start which
contains the icons, etc.

To put it on a router you simply copy the www folder into the main repo
directory (I will update the repo later today to include this) and then
scp it over to the routers root directory recursively. Once you have
done this you can go to IPADDRESS/cgi-bin/luci/QuickStart to start the
quickstart.

The whole quickstart configuration can be found in
/etc/config/quickstart. This contains one ""quickstart"" section titled
""options"" and multiple ""page"" sections. ""options"" holds the current and
last pages as well as a variable that controls weather the Quickstart
page is accessible. We disable it after completion because it allows
non-admin users to manipulate root level controls. A ""page"" contains
title that is either a number (this is how the controller iterates
through the quickstart) or a title that represents a side page.

Each page has set of title information for its display. The page also
contains a ""buttonText"" item that specifies the text to be placed on any
button that links to it in the quickstart. A ""page"" can contain up to
two lists. The first list is modules. This list pulls content to
populate the main section. In our quickstart I have separated most pages
to include only one content section. There is nothing to stop someone
from customizing a page that holds multiple content items. Modules call
a <modulename>Renderer function in the controller when the page is
initially rendered, and a <modulename>Parser function when data from a
page is submitted. This means that if you want your own module you
simple add it to a page and create a renderer and a parser function.
Renderer's send initial variables to the page and parsers process user
input and send back errors that possible occur in the page.They stack
quite well. Lastly a ""page"" can contain a button list. Buttons call
<buttonname>Button functions when pressed that load up side pages.
noBack and noNext buttons remove the auto-generated last and next
buttons to allow for specialized pages.

Lastly, when you get to the ""this node will reset page"" on version two
you will have to refresh your browser, as I have removed the actual
reset functionality from the quickstart to give more control to the
daemon. Refreshing the router here will take you to the next page.

We still have a ways to go on ""prettifying"" the quickstart and updating
the language, and I have yet to implement the ubus calls or to upload
the patches I have made to take over the captive portal. But, please let
me know any feedback you may have. I will send the updated ux map and
language when it finishes our current round of feedback.


Thanks
s2e



"
1026,Commotion-dev, What would you do with the USB port on your,"Thu, 24 Jan 2013 04:42:48 +1030",+1030,Paul Gardner-Stephen,"Hi,

On Thu, Jan 24, 2013 at 12:39 AM, Dan Staples
<danstaples at opentechinstitute.org> wrote:
> A USRP for OpenBTS! Although I doubt a router has the processing power
> needed to encode voice data and the like... A HackRF would also be a
> great peripheral to use once those are publicly available:
> http://ossmann.blogspot.com/2012/06/introducing-hackrf.html.

Well, remember the Mesh Potato ran a full asterisk install on a 180MHz
MIPS, which is about as slow as any router.  So OpenBTS is not out of
the question.

> I currently have a router with a USB port, that I run DD-WRT on. I have
> a 250GB HDD plugged into it, which I use for automated backups of a
> website I run, plus a SFTP server. A USB port was a deciding factor in
> the router I decided to buy...It's an ASUS WL-520GU. But I could also
> see a 3G dongle as a big appeal for a USB port.
>
> Another idea is to use a USB drive as a crypto device. Insert the USB
> flash drive to unlock a keyring or some private key material. That would
> be an easy way to deploy multiple routers on a network that need to use
> a common encryption key(s).

Related to that, I would use it for connecting mass storage for
Rhizome caching.

Also, once we get the code written, to connect an Arduino+HopeRFM23BP
for long-range meshing.  We are going to try this with a pile of
TP-LINK WR703N's that we have.

Paul.

> Dan
>
> On Wed 23 Jan 2013 03:46:25 AM EST, Christian Huldt wrote:
"
1027,Commotion-dev, Fwd: Opensource SDK for SIM hacking,"Thu, 24 Jan 2013 04:49:37 +1030",+1030,Paul Gardner-Stephen,"Just poked them on two points:

1. We have written a new open-source SMS compressor that is at least as
good if not better than the commercial options, and they were asking about
compression technologies.
2. I have suggested they remove the phone-home ""feature"".

Paul.

On Thu, Jan 24, 2013 at 1:01 AM, Dan Staples <
danstaples at opentechinstitute.org> wrote:

>  I'm throwing this out to the Commotion list to see if anyone has any
> familiarity with this project. I just saw it posted on LibTech. Several of
> the goals of the project align with goals of Commotion, especially around
> our OpenBTS work. It's particularly interesting that they are focused on
> making this an accessible tool for general users, and that it runs on
> Windows.
>
> This page mentions a pilot program they did in Uganda using the software,
> using SIM cards to discreetly share information:
> https://github.com/abayima/opensimkit
>
> One thing that does make me hesitate though, is that their software
> ""phones home"" to their servers to let them (and their funders) know who is
> using the software and where:
> http://dev.opensimkit.com/index.php/User_Guide
>
> Dan
>
>
> "
1028,Commotion-dev, What would you do with the USB port on your,"Thu, 24 Jan 2013 14:34:00 -0500",-0500,The Doctor,
1029,Commotion-dev, What would you do with the USB port on your,"Fri, 25 Jan 2013 08:55:31 -0500",-0500,Joshua Breitbart,"I love this discussion. I want all of these things.

I like to think of my Commotion network as a way to speak with my
neighbors, so I'd love to see a kind of profile device. I imagine the
smallest piece of hardware that could host a super simple page with a
standard set of profile information, and with easy-to-follow
instructions for how to load it up. This page would be advertised like a
service on the network, so you could click on it in the applications
list and it would open a page in a browser that tells you a little bit
about the node host (in this case, me).

It would basically present the social complement to the technical
information the router itself is broadcasting. Could be a short video, a
profile photo, and a few lines of text. An application on a client
device could pull the information and present it in a more pleasing
format, maybe something that looked like http://cassco.co/

Ideally, this would cost only marginally more than the router itself, so
every host could also participate as a presenter on the network. Many of
the things people are talking about in this thread are also acts of
self-expression, using different kinds of data or protocols. My ideal is
the one that speaks the most basic form of expression possible. So,
bonus points if an LED on the ""profile device"" flashes every time
someone views your profile, or if on the profile page was a button
someone could click to make the LED turn on and off.


Josh
 

On 1/23/13 1:12 PM, Paul Gardner-Stephen wrote:
> Hi,
>
> On Thu, Jan 24, 2013 at 12:39 AM, Dan Staples
> <danstaples at opentechinstitute.org> wrote:
"
1030,Commotion-dev, Throughput advantage to 802.11s support,"Tue, 5 Feb 2013 15:38:15 -0600",-0600,Ben West,"Hi All,

I'm happy to read that the Hackday just past went well!  The roadmap wiki
page<https://code.commotionwireless.net/projects/commotion/wiki/Hackday-Roadmap-Notes>looks
pretty dense, although unfortunately my suggestion would be to
increase its density by adding *802.11s support*.  My recent work to
extract Robin/Cloudtrax dashboard stuff into a standalone package was part
of a larger effort to get a modern replacement for a Robin nodes.  And,
this is what is now prompting my recommendation for 802.11s support.

Since I have the expectation of remotely re-flashing all the Robin nodes in
the field sometime soon, I did throughput tests for old vs new to make sure
I wouldn't be deploying a regression.  And, looks like 802.11g adhoc
meshing, even under Attitude Adjustment with the latest atheros drivers, is
*15% to 20% slower* than the ahdemo meshing done by Kamikaze+madwifi based
Robin firmware!  This performance penalty appears to come from the fact
adhoc mode require beacons, while ah-demo does not, hence it not being
supported by the 802.11 standard.  Furthermore, the mac80211 /
compat-wireless radio drivers currently packaged into OpenWRT appear to
enforce a maximum 1000ms interval for such beacons.

For 5.8GHz adhoc, a potential work-around is to use short slot-times as
implemented in this patch:

https://patchwork.kernel.org/patch/1835531/

2.8GHz adhoc, however, must still use long slot times to remain
standards-compliant.  The work-around is that 802.11s meshing can use short
slot times, which this patch implements:

https://patchwork.kernel.org/patch/2050741/

While I do admit that doing speed tests on near-obsolete platforms like
ath5k would normally yield diminishing returns, these slot-time
enhancements should apply just as well to ath9k, too.


-- 
Ben West
http://gowasabi.net
ben at gowasabi.net
314-246-9434
"
1031,Commotion-dev, windows GUI,"Tue, 05 Feb 2013 16:51:42 -0500",-0500,Hans-Christoph Steiner,"
hey all,

I forget whether I brought up this topic here: we (Guardian Project) initially
did not take on the Windows GUI work because we did not have anyone with the
skills and interest who could take it on.  Now we do have someone with both.
Is the windows GUI work still of interest to Commotion?

.hc

"
1032,Commotion-dev, windows GUI,"Tue, 05 Feb 2013 17:00:40 -0500",-0500,Andrew Reynolds,"Yes!

Renewing the push for a Windows GUI was one of the action items from
Friday's hackday.

Here's the original RFP (which we recently extended the deadline on)
https://commotionwireless.net/jobs/windows-client-rfp

-andrew

On 02/05/2013 04:51 PM, Hans-Christoph Steiner wrote:
> 
> hey all,
> 
> I forget whether I brought up this topic here: we (Guardian Project) initially
> did not take on the Windows GUI work because we did not have anyone with the
> skills and interest who could take it on.  Now we do have someone with both.
> Is the windows GUI work still of interest to Commotion?
> 
> .hc
> 
> _______________________________________________
> Commotion-dev mailing list
> Commotion-dev at lists.chambana.net
> https://lists.chambana.net/mailman/listinfo/commotion-dev
> 


"
1033,Commotion-dev, Serval Mesh Helper Device / ISM long-range meshing,"Thu, 7 Feb 2013 15:30:52 +1030",+1030,Paul Gardner-Stephen,"Hi All,

Just a heads up on some stuff we are doing at Serval that I think will
be of interest to Commotion deployments more generally.

We are now actively working on what we call our ""Mesh Helper Device"",
the prototype of which will consist of a TP-LINK WR703N running
Commotion OpenWRT + servald, connected to an RFD900 ISM 915MHz band
packet radio and a rechargeable battery.

This gives the potential for much greater range than just WiFi, as
well as offering some resistance for 2.4GHz jamming in places where
that is a problem.

The RFD900s with current firmware in urban settings offer 5x to 10x
range compared with WiFi.  For example, I could receive a decent
signal with one radio sitting on my lounge, and the other radio with
me walking around the block, up to about 150m away -- with the signal
path obliquely through perhaps 8 or 10 houses, fences, cats, dogs,
trees and everything else.

With good clear line of sight, and a low noise floor, ranges of 10km
or more are possible, with some evidence pointing to the actual limit
being around 80km - 120km in very ideal conditions.

We have already managed to get Serval Mesh traffic, including some
Rhizome transfers (but not yet voice) running over one of these links:

servalpaul.blogspot.com.au/2013/02/breaking-wifi-barrier-serval-mesh.html

We think a complete Mesh Helper Device, including these really nice
radios could be built and sell for <US$200.  It may also be possible
to use a cheaper compatible (but slightly lower performance) radio and
get the price down to <US$100.

The RFD900 firmware only does point-to-point communications, but it is
entirely possible to make it do ""ad-hoc"" point-to-multipoint
communications.  Perhaps this is something for us to look at as a
follow on after our current work block is complete.

We are hoping to have a couple of these with us in New Zealand in a
couple of weeks for the KiwiEx field trial. General outline of our
thinking for KiwiEx at present is at:

http://developer.servalproject.org/dokuwiki/doku.php?id=content:exercises:kiwiex2013

If there are other things people would like tested while we are there,
let me know, and we will endeavour to cover them.

Paul.

"
1034,Commotion-dev, Serval Mesh Helper Device / ISM long-range,"Thu, 07 Feb 2013 09:12:46 -0500",-0500,Seamus Tuohy,"Hey Paul,

This sounds great. I would be quite interested in seeing what kind of
QOS and energy consumption you get running various types of traffic over
this device. Having some clearer idea of the throughput, jitter, and
delay would be a great starting point for conversations around use cases.

s2e

On 02/07/2013 12:00 AM, Paul Gardner-Stephen wrote:
> Hi All,
> 
> Just a heads up on some stuff we are doing at Serval that I think will
> be of interest to Commotion deployments more generally.
> 
> We are now actively working on what we call our ""Mesh Helper Device"",
> the prototype of which will consist of a TP-LINK WR703N running
> Commotion OpenWRT + servald, connected to an RFD900 ISM 915MHz band
> packet radio and a rechargeable battery.
> 
> This gives the potential for much greater range than just WiFi, as
> well as offering some resistance for 2.4GHz jamming in places where
> that is a problem.
> 
> The RFD900s with current firmware in urban settings offer 5x to 10x
> range compared with WiFi.  For example, I could receive a decent
> signal with one radio sitting on my lounge, and the other radio with
> me walking around the block, up to about 150m away -- with the signal
> path obliquely through perhaps 8 or 10 houses, fences, cats, dogs,
> trees and everything else.
> 
> With good clear line of sight, and a low noise floor, ranges of 10km
> or more are possible, with some evidence pointing to the actual limit
> being around 80km - 120km in very ideal conditions.
> 
> We have already managed to get Serval Mesh traffic, including some
> Rhizome transfers (but not yet voice) running over one of these links:
> 
> servalpaul.blogspot.com.au/2013/02/breaking-wifi-barrier-serval-mesh.html
> 
> We think a complete Mesh Helper Device, including these really nice
> radios could be built and sell for <US$200.  It may also be possible
> to use a cheaper compatible (but slightly lower performance) radio and
> get the price down to <US$100.
> 
> The RFD900 firmware only does point-to-point communications, but it is
> entirely possible to make it do ""ad-hoc"" point-to-multipoint
> communications.  Perhaps this is something for us to look at as a
> follow on after our current work block is complete.
> 
> We are hoping to have a couple of these with us in New Zealand in a
> couple of weeks for the KiwiEx field trial. General outline of our
> thinking for KiwiEx at present is at:
> 
> http://developer.servalproject.org/dokuwiki/doku.php?id=content:exercises:kiwiex2013
> 
> If there are other things people would like tested while we are there,
> let me know, and we will endeavour to cover them.
> 
> Paul.
> 
> _______________________________________________
> Commotion-dev mailing list
> Commotion-dev at lists.chambana.net
> https://lists.chambana.net/mailman/listinfo/commotion-dev
> 
> 

"
1035,Commotion-dev, Serval Mesh Helper Device / ISM long-range,"Thu, 7 Feb 2013 08:46:10 -0600",-0600,Ben West,"Likewise, Ubiquiti also sells 900MHz versions of their Nanostation and
Bullet access points.  I understanding these units essentially just have
2.4/5.8GHz chipsets that have been translated to a different band, and with
some consequent penalty in spectral efficiency.

E.g.
http://www.wirelessnetworkproducts.com/locom900.aspx

I would like to assume OpenWRT and derivatives will run w/o complaint on
such 900MHz units, but I'm guessing it's not that simple.

On Wed, Feb 6, 2013 at 11:00 PM, Paul Gardner-Stephen <
paul at servalproject.org> wrote:

> Hi All,
>
> Just a heads up on some stuff we are doing at Serval that I think will
> be of interest to Commotion deployments more generally.
>
> We are now actively working on what we call our ""Mesh Helper Device"",
> the prototype of which will consist of a TP-LINK WR703N running
> Commotion OpenWRT + servald, connected to an RFD900 ISM 915MHz band
> packet radio and a rechargeable battery.
>
> This gives the potential for much greater range than just WiFi, as
> well as offering some resistance for 2.4GHz jamming in places where
> that is a problem.
>
> The RFD900s with current firmware in urban settings offer 5x to 10x
> range compared with WiFi.  For example, I could receive a decent
> signal with one radio sitting on my lounge, and the other radio with
> me walking around the block, up to about 150m away -- with the signal
> path obliquely through perhaps 8 or 10 houses, fences, cats, dogs,
> trees and everything else.
>
> With good clear line of sight, and a low noise floor, ranges of 10km
> or more are possible, with some evidence pointing to the actual limit
> being around 80km - 120km in very ideal conditions.
>
> We have already managed to get Serval Mesh traffic, including some
> Rhizome transfers (but not yet voice) running over one of these links:
>
> servalpaul.blogspot.com.au/2013/02/breaking-wifi-barrier-serval-mesh.html
>
> We think a complete Mesh Helper Device, including these really nice
> radios could be built and sell for <US$200.  It may also be possible
> to use a cheaper compatible (but slightly lower performance) radio and
> get the price down to <US$100.
>
> The RFD900 firmware only does point-to-point communications, but it is
> entirely possible to make it do ""ad-hoc"" point-to-multipoint
> communications.  Perhaps this is something for us to look at as a
> follow on after our current work block is complete.
>
> We are hoping to have a couple of these with us in New Zealand in a
> couple of weeks for the KiwiEx field trial. General outline of our
> thinking for KiwiEx at present is at:
>
>
> http://developer.servalproject.org/dokuwiki/doku.php?id=content:exercises:kiwiex2013
>
> If there are other things people would like tested while we are there,
> let me know, and we will endeavour to cover them.
>
> Paul.
>
> _______________________________________________
> Commotion-dev mailing list
> Commotion-dev at lists.chambana.net
> https://lists.chambana.net/mailman/listinfo/commotion-dev
>
"
1036,Commotion-dev, Serval Mesh Helper Device / ISM long-range,"Thu, 07 Feb 2013 15:20:28 -0500",-0500,Dan Staples,"Paul, that is very interesting! I am particularly interested in what
kind of throughput you can get on that frequency. Do you attach an
external antenna to one of the RP-SMA connectors?

As for battery power, I've been experimenting with providing power to a
Raspberry Pi using a series of D-cell batteries. D-cells have the most
energy capacity per density/size than any other common consumer battery,
from my investigation. For the RPi, which uses 5V USB power, drawing
500-1000 mA, a couple alkaline D-cells could last 2-3 days. I bet this
could work for your Mesh Helper as well. All I needed to get that
working was a simple step-down DC-DC converter, which costs US$2 max. A
handful of D-cells aren't exactly pocket-sized, but certainly something
you could stash in a backpack. I'm about to buy a high-current solar
cell as well, to try to make an always-on solar-powered device.

Let us know of your progress!

Dan

On 02/07/2013 09:46 AM, Ben West wrote:
> Likewise, Ubiquiti also sells 900MHz versions of their Nanostation and
> Bullet access points.  I understanding these units essentially just
> have 2.4/5.8GHz chipsets that have been translated to a different
> band, and with some consequent penalty in spectral efficiency.
>
> E.g.
> http://www.wirelessnetworkproducts.com/locom900.aspx
>
> I would like to assume OpenWRT and derivatives will run w/o complaint
> on such 900MHz units, but I'm guessing it's not that simple.
>
> On Wed, Feb 6, 2013 at 11:00 PM, Paul Gardner-Stephen
> <paul at servalproject.org <mailto:paul at servalproject.org"
1037,Commotion-dev, Serval Mesh Helper Device / ISM long-range,"Fri, 8 Feb 2013 06:52:36 +1030",+1030,Paul Gardner-Stephen,"Hello,

On Fri, Feb 8, 2013 at 1:16 AM, Ben West <ben at gowasabi.net> wrote:
> Likewise, Ubiquiti also sells 900MHz versions of their Nanostation and
> Bullet access points.  I understanding these units essentially just have
> 2.4/5.8GHz chipsets that have been translated to a different band, and with
> some consequent penalty in spectral efficiency.
>
> E.g.
> http://www.wirelessnetworkproducts.com/locom900.aspx

These sorts of units are quite interesting.  The range is in part due
to the +7.5db gain on the directional antennae at each end, and
perhaps more importantly, the front-to-back ratio that this affords to
help reject interference.  If they have done the band translation
""right"", then the spectral efficiency could well be better rather than
worse, as 900MHz has substantially better propagation characteristics,
and over typical distances yields about +9db compared with similar
2.4GHz transmissions.

900MHz NanoStations and similar would be a useful addition to a
Commotion network, and you (or we) may wish to obtain some to test
out, but there are a few caveats, some common to all 900MHz
communications, and some specific to a NanoStation type product:

1. The ISM 915 band is only available in the Americas, Australia, New
Zealand, Israel and a few other countries.
2. The regulations on the use of this band, and its frequency range
vary substantially even among those countries. For example the US
requires 50 channels in the hopping scheme, while Australia requires
only 20, but the band in the US is almost twice as wide.
3. The power consumption of the unit will be relatively high if
transmitting at 1W.  This is perhaps more an issue for Serval-inspired
use-cases where mains power is assumed to be absent.
4. The higher bit-rates that the unit will use (compared to what we
are experimenting with) will reduce the maximum range that can be
achieved.

This is why we are looking at a solution where the radio is field
replaceable with one that is legal wherever the unit is to be used. It
is also why we are looking at a hand-held portable device that you
just shove in your other pocket, and any phone within WiFi range can
make use of it.

> I would like to assume OpenWRT and derivatives will run w/o complaint on
> such 900MHz units, but I'm guessing it's not that simple.

I imagine that it shouldn't be hard to put OpenWRT on the 900MHz NanoStations.

Paul.

> On Wed, Feb 6, 2013 at 11:00 PM, Paul Gardner-Stephen
> <paul at servalproject.org> wrote:
"
1038,Commotion-dev, Serval Mesh Helper Device / ISM long-range,"Fri, 8 Feb 2013 06:53:08 +1030",+1030,Paul Gardner-Stephen,"Hello,

On Fri, Feb 8, 2013 at 12:42 AM, Seamus Tuohy <s2e at opentechinstitute.org> wrote:
> Hey Paul,
>
> This sounds great. I would be quite interested in seeing what kind of
> QOS and energy consumption you get running various types of traffic over
> this device. Having some clearer idea of the throughput, jitter, and
> delay would be a great starting point for conversations around use cases.

Our focus at present is on long-range communications, in particular
for Rhizome bundle-oriented traffic.  As such we have done nothing as
yet to minimise latency and jitter.  Nonetheless, MDP pings have been
as low as a few hundred milliseconds.

>From a Commotion perspective, I would imagine that some of the more
interesting use-cases that come immediately to mind include (all
sitting on top of Serval Rhizome):

1. Distribution of updates to Commotion project and related software
2. A Twitter-like mesh-based micro-blogging service (possibly with a
gateway to Twitter itself)
3. Distribution of either introduced or locally produced news/content
4. Delivery of voicemail and SMS traffic between commotion OpenBTS's
and mesh nodes

Essentially it is best to think of it as a courier service between
nodes, like an inter-campus mail service, rather than a bulk real-time
transport. Of course, in many instances it can do better than that,
but this perspective will, I think, help with the exploration of the
kind of service that it can enable.

Paul.

> s2e
>
> On 02/07/2013 12:00 AM, Paul Gardner-Stephen wrote:
"
1039,Commotion-dev, Serval Mesh Helper Device / ISM long-range,"Fri, 8 Feb 2013 07:06:02 +1030",+1030,Paul Gardner-Stephen,"Hello Dan,

On Fri, Feb 8, 2013 at 6:50 AM, Dan Staples
<danstaples at opentechinstitute.org> wrote:
> Paul, that is very interesting! I am particularly interested in what kind of
> throughput you can get on that frequency.

In principle up to about 128Kbit.  To really achieve that, we need to
rewrite the radio firmware, which needs to happen if we want them to
mesh, anyway. For now we are getting about 30Kbit, which is still
enough to do useful things with Rhizome (MeshMS, software updates,
voice-mail when we finish writing it, and other things).

> Do you attach an external antenna
> to one of the RP-SMA connectors?

It has two antennae connectors for diversity (but not MIMO), and I put
two antennae at 90 degrees on those to give some polarity diversity
and resilience, especially since we intend the thing to end up in
peoples pockets/desks/wherever. We have bought a couple of +6db yagis
as well for some more directional testing.

> As for battery power, I've been experimenting with providing power to a
> Raspberry Pi using a series of D-cell batteries. D-cells have the most
> energy capacity per density/size than any other common consumer battery,
> from my investigation. For the RPi, which uses 5V USB power, drawing
> 500-1000 mA, a couple alkaline D-cells could last 2-3 days. I bet this could
> work for your Mesh Helper as well. All I needed to get that working was a
> simple step-down DC-DC converter, which costs US$2 max. A handful of D-cells
> aren't exactly pocket-sized, but certainly something you could stash in a
> backpack. I'm about to buy a high-current solar cell as well, to try to make
> an always-on solar-powered device.

I spoke with Alex from the Pi foundation at LCA, and he says that it
is possible to get the current on a Pi down to about 50mA in sleep
mode, so some substantial gains over your initial efforts are
possible.

I need to do a blog-post on our battery solution we are using for
these prototypes, as we have ordered some samples from OptimaBattery
in China (who make lots of EV batteries).  The ones we got are a bit
of an overkill, being 10AH 12v LiFePO4 batteries, but at 120WH, they
can run stuff for quite a while.  These are US$66 in sample quantities
(plus about the same in freight!), but should run a mesh helper
prototype for about a week between recharges.

We are trying to get a flexible solar panel intime for KiwiEx, but it
is proving hard with the short lead-time due to Chinese New Year. The
other option is to get one locally for about 3x price.

> Let us know of your progress!

Will do.

Paul.

> Dan
>
>
> On 02/07/2013 09:46 AM, Ben West wrote:
>
> Likewise, Ubiquiti also sells 900MHz versions of their Nanostation and
> Bullet access points.  I understanding these units essentially just have
> 2.4/5.8GHz chipsets that have been translated to a different band, and with
> some consequent penalty in spectral efficiency.
>
> E.g.
> http://www.wirelessnetworkproducts.com/locom900.aspx
>
> I would like to assume OpenWRT and derivatives will run w/o complaint on
> such 900MHz units, but I'm guessing it's not that simple.
>
> On Wed, Feb 6, 2013 at 11:00 PM, Paul Gardner-Stephen
> <paul at servalproject.org> wrote:
"
1040,Commotion-dev, Serval Mesh Helper Device / ISM long-range,"Fri, 8 Feb 2013 08:38:33 +1030",+1030,Jeremy Lakeman,"The stock firmware's time division scheme splits the time on each
channel in half and gives each device that time to send packets. This
is probably the main reason why the round trip latency seems to be
between 100-300ms.

Andrew Tridgell gave a talk on his firmware at linux conf last week.
Here's the talk details and video if you are interested.

http://linux.conf.au/schedule/30080/view_talk?day=thursday
http://mirror.linux.org.au/linux.conf.au/2013/mp4/Building_a_free_software_telemetry_radio_system.mp4

On Fri, Feb 8, 2013 at 6:53 AM, Paul Gardner-Stephen
<paul at servalproject.org> wrote:
> Hello,
>
> On Fri, Feb 8, 2013 at 12:42 AM, Seamus Tuohy <s2e at opentechinstitute.org> wrote:
"
1041,Commotion-dev, MeshTether to the Play Store,"Thu, 07 Feb 2013 19:29:06 -0500",-0500,Hans-Christoph Steiner,"
On 01/08/2013 11:37 AM, Nat Meysenburg wrote:
> Jeremy Lakeman <Jeremy.Lakeman at gmail.com> writes:
> 
"
1042,Commotion-dev, MeshTether to the Play Store,"Fri, 08 Feb 2013 10:20:25 +0700",+0700,Nathan of Guardian,
1043,Commotion-dev, Verifying an apk has been built from this source,"Fri, 8 Feb 2013 14:27:22 +1030",+1030,Jeremy Lakeman,"Which raises another interesting topic; in the general case, how would
you verify that an apk has been built from a particular source
archive.

Serval would like to create a distributed group of reviewers who would
be tasks with signing our apk. And if a quorum of them agree that the
software is valid (for some measure of validity eg it functions
properly and has no backdoors or built in shutoff code), then the apk
would be offered to install. Hopefully this would prevent a Limewire
style death by court order.

The basic problem as I see it, is that the contents of the apk is not
quite deterministic. I have wondered about forking a tool like
ApkAnalyser, to perform an automated comparison of two compiled apk's
to highlight any important differences. So you can build the
application from source and compare to the version that I built. Then
when you are satisfied you would add a signature to my binary.

Any other suggestions about how we might go about it?

On Fri, Feb 8, 2013 at 1:50 PM, Nathan of Guardian
<nathan at guardianproject.info> wrote:
> "
1044,Commotion-dev, Verifying an apk has been built from this source,"Fri, 08 Feb 2013 11:28:24 +0700",+0700,Nathan of Guardian,"On 02/08/2013 10:57 AM, Jeremy Lakeman wrote:
> Which raises another interesting topic; in the general case, how would
> you verify that an apk has been built from a particular source
> archive.

We are hoping to implement Gitian ( http://gitian.org/) soon, which is a
side project by one of our main contributors.

"" Gitian is a secure source-control oriented software distribution
method. This means you can download trusted binaries that are verified
by multiple builders.

Gitian uses a deterministic build process to allow multiple builders to
create identical binaries. This allows multiple parties to sign the
resulting binaries, guaranteeing that the binaries and tool chain were
not tampered with and that the same source was used. It remove the build
and distribution process as a single point of failure.""

"
1045,Commotion-dev," Fwd: [arig-discuss] Heads up,","Fri, 8 Feb 2013 12:06:45 +0100",+0100,L. Aaron Kaplan,"
Hi Commotion,

It would be really nice to meet some of you at the WBM in Denmark.

Begin forwarded message:

> From: ""L. Aaron Kaplan"" <aaron at lo-res.org>
> Subject: [arig-discuss] Heads up, wireless battlemesh v6 upcoming, mark the date
> Date: February 8, 2013 11:46:19 AM GMT+01:00
> To: OLSR discussion and development <olsr-users at olsr.org>, ""olsr-dev at lists.olsr.org Development List"" <olsr-dev at lists.olsr.org>
> Cc: Arig list discussion <arig-discuss at lists.subsignal.org>
> Reply-To: Arig discussion list <arig-discuss at lists.subsignal.org>
> 
> Hello dear OLSR users and developers,
> 
> 
> The Wireless Battle of the Mesh[1] is an event that aims to bring together
> people from across the globe to test the performance of different routing
> protocols for ad-hoc networks, like Babel, B.A.T.M.A.N., BMX, OLSR, and
> 802.11s. Of course, new protocols (working on OpenWRT[2]) are always welcome!
> 
> This year the even will take place from Monday 15th till Sunday 21st of April
> at the University of Aalborg, Denmark.
> 
> 
> The event originally went back to an intensive discussion between some BATMAN 
> folks and me (on the OLSR side) about which routing protocol approach was 
> truly the better choice specifically for community wireless networks.
> 
> According to my memory, in response to this mail exchange, Xavier and a few 
> others from the openwrt team initiated the first wireless battle mesh: a week of 
> testing protocols against each other at TMPLab in Paris.
> 
> Of course, we never came to a decisive conclusion, but it turned out to 
> be really fun anyway :) The discussions were super helpful in order to enhance
> all participating protocols.
> But that was then, things evolved since then.
> 
> 
> In the last years, the WBM events have been growing steadily into a successful
> hackathon for community wireless networks across the world. 
> 
> If you decide to participate, you will a) meet OLSR developers b) be able to 
> discuss and test your meshing ideas with like-minded people c) have lots of 
> fun on the way. And it is a hell of a learning experience.
> 
> And new community wireless networks get created on the way. For example, ~ two 
> years ago, Arig [3] started to appeared after Amir visited the WBM in Catalunya.
> Congratulations!
> 
> 
> OLSR.org will support the event by:
> 
> 	? help to promote the event
> 	? bring members of the community to the event
> 	? give talks about advancement of our community in certain aspects
> 	? provide hardware for the routing protocol testing
> 
> 
> May your packets never get lost, may your TTL be high enough to reach Aalborg,
> Aaron.
> (for the OLSR.org team)
> 
> 
> [1] http://battlemesh.org/
> [2] http://openwrt.org/
> [3] http://arig.org.il/
> 
> _______________________________________________
> arig-discuss mailing list
> arig-discuss at lists.subsignal.org
> https://lists.subsignal.org/mailman/listinfo/arig-discuss

"
1046,Commotion-dev, Serval Mesh Helper Device / ISM long-range,"Fri, 08 Feb 2013 09:25:39 -0500",-0500,The Doctor,
1047,Commotion-dev, Throughput advantage to 802.11s support,"Fri, 08 Feb 2013 10:10:32 -0500",-0500,Dan Staples,"Are those patches for ad-hoc, or are they for 802.11s? If they speed up
ad-hoc throughput, I see no reason not to implement them into Commotion.
But in general, I would be interested in pursuing 802.11s for Commotion
down the line. Do you know how widespread is 802.11s support is?

Dan

On 02/05/2013 04:38 PM, Ben West wrote:
> Hi All,
>
> I'm happy to read that the Hackday just past went well!  The roadmap
> wiki page
> <https://code.commotionwireless.net/projects/commotion/wiki/Hackday-Roadmap-Notes>
> looks pretty dense, although unfortunately my suggestion would be to
> increase its density by adding *802.11s support*.  My recent work to
> extract Robin/Cloudtrax dashboard stuff into a standalone package was
> part of a larger effort to get a modern replacement for a Robin
> nodes.  And, this is what is now prompting my recommendation for
> 802.11s support.
>
> Since I have the expectation of remotely re-flashing all the Robin
> nodes in the field sometime soon, I did throughput tests for old vs
> new to make sure I wouldn't be deploying a regression.  And, looks
> like 802.11g adhoc meshing, even under Attitude Adjustment with the
> latest atheros drivers, is /15% to 20% slower/ than the ahdemo meshing
> done by Kamikaze+madwifi based Robin firmware!  This performance
> penalty appears to come from the fact adhoc mode require beacons,
> while ah-demo does not, hence it not being supported by the 802.11
> standard.  Furthermore, the mac80211 / compat-wireless radio drivers
> currently packaged into OpenWRT appear to enforce a maximum 1000ms
> interval for such beacons.
>
> For 5.8GHz adhoc, a potential work-around is to use short slot-times
> as implemented in this patch:
>
> https://patchwork.kernel.org/patch/1835531/
>
> 2.8GHz adhoc, however, must still use long slot times to remain
> standards-compliant.  The work-around is that 802.11s meshing can use
> short slot times, which this patch implements:
>
> https://patchwork.kernel.org/patch/2050741/
>
> While I do admit that doing speed tests on near-obsolete platforms
> like ath5k would normally yield diminishing returns, these slot-time
> enhancements should apply just as well to ath9k, too.
>
>
> -- 
> Ben West
> http://gowasabi.net
> ben at gowasabi.net <mailto:ben at gowasabi.net>
> 314-246-9434
>
>
> _______________________________________________
> Commotion-dev mailing list
> Commotion-dev at lists.chambana.net
> https://lists.chambana.net/mailman/listinfo/commotion-dev

-- 
Dan Staples

Open Technology Institute
https://commotionwireless.net

"
1048,Commotion-dev, Serval Mesh Helper Device / ISM long-range,"Fri, 08 Feb 2013 10:26:17 -0500",-0500,Dan Staples,"
On 02/08/2013 09:25 AM, The Doctor wrote:
> Project Byzantium is considering a CouchApp called Toast for this
> purpose.  It's built on top of CouchDB, so we think it should be
> possible to distribute across arbitrary numbers of CouchDB nodes with
> a little hackery under the hood:
>
> - Avahi/mDNS to collect IP addresses of other nodes (or,
> alternatively, scrape the node's routing table for
> /^192\.168\.[0-9]*\.[1-9][0-9]?/
> - A shell script that runs every minute or two that pings the
> CouchApp's replication URI with those IP addresses.
"
1049,Commotion-dev, Verifying an apk has been built from this source,"Fri, 08 Feb 2013 11:08:02 -0500",-0500,Hans-Christoph Steiner,"

On 02/07/2013 11:28 PM, Nathan of Guardian wrote:
> On 02/08/2013 10:57 AM, Jeremy Lakeman wrote:
"
1050,Commotion-dev, Throughput advantage to 802.11s support,"Fri, 8 Feb 2013 10:42:04 -0600",-0600,Ben West,"Hi Dan,

First off, I believe all of these patches were made against the current
version of the compat-wireless library.  The first patch did happen to
apply cleanly to compat-wireless-2012-09-07 integrated into Attitude
Adjustment, but the second patch failed.

This first patch is to add short slot time support to 802.11a adhoc mode
(i.e. 5GHz only).  Long slots are required for 802.11b/g adhoc mode (i.e.
2.4GHz) to maintain compliant with the standard.

https://patchwork.kernel.org/patch/1835531/

This second patch, on the other hand, will allow short slot slots in
802.11s mode in 2.4GHz and 5.8GHz, which the standard allows.

https://patchwork.kernel.org/patch/2050741/

I do understand Sascha, et al, have expressed criticism for the fact that
the 802.11s draft stipulates an arbitrary maximum of 32 nodes per mesh.
(Thanks to whichever dastardly telco lobbyist...)  However, Antonio of the
Robin Mesh project, who has already incorporated 802.11s into this new
Meshroot firmware stack, mentioned how this limitation is actually 50 nodes
as implemented (??), and that it only applies to the number of neighboring
nodes that a particular node can keep in its local table, not that it is a
limitation on the total # of nodes in a mesh.  I'm still seeking
confirmation on this.

Finally, please do note that I have not had the opportunity to test the
operation of these patches yet.  As for the degree of adoption of 802.11s,
besides in the mac80211 / compat-wireless ecosystem of OpenWRT, indeed that
is still a work in progress.

On Fri, Feb 8, 2013 at 9:10 AM, Dan Staples <
danstaples at opentechinstitute.org> wrote:

>  Are those patches for ad-hoc, or are they for 802.11s? If they speed up
> ad-hoc throughput, I see no reason not to implement them into Commotion.
> But in general, I would be interested in pursuing 802.11s for Commotion
> down the line. Do you know how widespread is 802.11s support is?
>
> Dan
>
>
> On 02/05/2013 04:38 PM, Ben West wrote:
>
> Hi All,
>
> I'm happy to read that the Hackday just past went well!  The roadmap wiki
> page<https://code.commotionwireless.net/projects/commotion/wiki/Hackday-Roadmap-Notes>looks pretty dense, although unfortunately my suggestion would be to
> increase its density by adding *802.11s support*.  My recent work to
> extract Robin/Cloudtrax dashboard stuff into a standalone package was part
> of a larger effort to get a modern replacement for a Robin nodes.  And,
> this is what is now prompting my recommendation for 802.11s support.
>
> Since I have the expectation of remotely re-flashing all the Robin nodes
> in the field sometime soon, I did throughput tests for old vs new to make
> sure I wouldn't be deploying a regression.  And, looks like 802.11g adhoc
> meshing, even under Attitude Adjustment with the latest atheros drivers, is
> *15% to 20% slower* than the ahdemo meshing done by Kamikaze+madwifi
> based Robin firmware!  This performance penalty appears to come from the
> fact adhoc mode require beacons, while ah-demo does not, hence it not being
> supported by the 802.11 standard.  Furthermore, the mac80211 /
> compat-wireless radio drivers currently packaged into OpenWRT appear to
> enforce a maximum 1000ms interval for such beacons.
>
> For 5.8GHz adhoc, a potential work-around is to use short slot-times as
> implemented in this patch:
>
> https://patchwork.kernel.org/patch/1835531/
>
> 2.8GHz adhoc, however, must still use long slot times to remain
> standards-compliant.  The work-around is that 802.11s meshing can use short
> slot times, which this patch implements:
>
> https://patchwork.kernel.org/patch/2050741/
>
> While I do admit that doing speed tests on near-obsolete platforms like
> ath5k would normally yield diminishing returns, these slot-time
> enhancements should apply just as well to ath9k, too.
>
>
> --
> Ben West
> http://gowasabi.net
> ben at gowasabi.net
> 314-246-9434
>
>
> _______________________________________________
> Commotion-dev mailing listCommotion-dev at lists.chambana.nethttps://lists.chambana.net/mailman/listinfo/commotion-dev
>
>
> --
> Dan Staples
>
> Open Technology Institutehttps://commotionwireless.net
>
"
1051,Commotion-dev, Throughput advantage to 802.11s support,"Fri, 8 Feb 2013 18:47:14 +0100",+0100,L. Aaron Kaplan,"
On Feb 8, 2013, at 5:42 PM, Ben West <ben at gowasabi.net> wrote:

> Hi Dan,
> 
> First off, I believe all of these patches were made against the current version of the compat-wireless library.  The first patch did happen to apply cleanly to compat-wireless-2012-09-07 integrated into Attitude Adjustment, but the second patch failed.
> 
> This first patch is to add short slot time support to 802.11a adhoc mode (i.e. 5GHz only).  Long slots are required for 802.11b/g adhoc mode (i.e. 2.4GHz) to maintain compliant with the standard.
> 
> https://patchwork.kernel.org/patch/1835531/
> 
> This second patch, on the other hand, will allow short slot slots in 802.11s mode in 2.4GHz and 5.8GHz, which the standard allows.
> 
> https://patchwork.kernel.org/patch/2050741/
> 
> I do understand Sascha, et al, have expressed criticism for the fact that the 802.11s draft stipulates an arbitrary maximum of 32 nodes per mesh.  (Thanks to whichever dastardly telco lobbyist...)

That's partly correct today. Initially the node_id field was 5 bit long -> hence allowed for a maximum of 32 nodes.
I was told cozybit changed that in the mean time (are they then standard conforming?)

What I was told behind the scenes: it was not a telco lobbyist, but actually the companies involved in standardising 802.11s themselves, which did not want it to be much of a success since all of them already had their proprietary protocol implementation :(
I have no idea if this was a mere opinion of this IEEE forum participant or if it really reflected the situation at the IEEE at that time. However, it would explain brain dead ideas like a ""32 bits are enough"".

Do you remember the 802.11s implementation at OLPC? That was terrible...they had to revert to fixed APs.

>  However, Antonio of the Robin Mesh project, who has already incorporated 802.11s into this new Meshroot firmware stack, mentioned how this limitation is actually 50 nodes as implemented (??),

... in any case... is 50 nodes much better than 32 nodes?
Not really. Come one :) 

I'd like to see an 802.11s network with > 1000 nodes!
(Probably will never exist since it is one single collision domain).
To sum it up: I am very doubtful of its scalability. 

For small, local layer 2 meshes it might be OK after it got lots of massaging from cozybit - don't know.
We could test it at the WBM in Denmark.
Try it out and tell us about it :)

a.


"
1052,Commotion-dev, Serval Mesh Helper Device / ISM long-range,"Fri, 08 Feb 2013 12:58:11 -0500",-0500,The Doctor,
1053,Commotion-dev, Serval Mesh Helper Device / ISM long-range,"Sat, 9 Feb 2013 06:10:11 +1030",+1030,Paul Gardner-Stephen,"Hello,

On Sat, Feb 9, 2013 at 12:55 AM, The Doctor <drwho at virtadpt.net> wrote:
> "
1054,Commotion-dev, Serval Mesh Helper Device / ISM long-range,"Fri, 08 Feb 2013 14:57:55 -0500",-0500,The Doctor,
1055,Commotion-dev, Serval Mesh Helper Device / ISM long-range,"Sat, 9 Feb 2013 07:19:09 +1030",+1030,Paul Gardner-Stephen,"Hello,

On Sat, Feb 9, 2013 at 6:27 AM, The Doctor <drwho at virtadpt.net> wrote:
> "
1056,Commotion-dev, MeshTether to the Play Store,"Fri, 08 Feb 2013 16:42:42 -0500",-0500,Nat Meysenburg,"Hans-Christoph Steiner <hans at guardianproject.info> writes:
> Are you still up for adding Commotion MeshTether to F-Droid?  I can help you
> out with anything that comes up.

When MeshTether is ready to be distributed, I can help with getting it
onto F-droid. Though the process is simple as a I recall:

0: Set up a gitorious account if you don't have one.
1: Clone the F-droid app repo
2: Create and git add file with MeshTether's meta data (you can use
another file in the repo as a guide).
3: Commit and then push to your gitorious account
4: Submit a pull request to F-droid

Let me know if you want a hand with that.

~~nat
"
1057,Commotion-dev, MeshTether to the Play Store,"Fri, 08 Feb 2013 17:36:22 -0500",-0500,Nat Meysenburg,"Nathan of Guardian <nathan at guardianproject.info> writes:
> Ah ha! You are the one that created multiple versions of Orweb in the
> wild, signed by keys that aren't ours! :)

Indeed, I am...    :)

> Seriously though, this is my main issue with using the F-Droid
> shared/public repo for software related to activism or that could
> potentially have malicious versions out there. If someone installs
> from F-Droid, then they can't override that install with the version
> of the APK distributed by Commotion/OTI directly.
>
> I suppose if someone was using F-Droid then they should just keep
> using that version, but we take a lot of care at Guardian with
> building/signing our apps in a relatively safe and secure environment,
> and promoting a version of our app that is built in some other unknown
> shared environment always gives me cause for pause.

I agree. I find this to be a problem with F-Droid, and one that I am
torn on.

On the one hand, I think that there is immense value in F-Droid's
decision to build all apks themselves. The reasoning that I've read is
basically that they do it to ensure that all the software that F-Droid
distributes is actually free enough that it can be built from
source. 

However what you are doing there is replacing trust in the app
developer with trust in the maintainers of F-Droid. This has been a
problem for other devs, notably Moxie with TextSecure[0][1].

I am sympathetic to both sides of the argument. F-Droid maintains a Free
Software purism that I respect. They use gitorious over github, they
build all software they distribute from source, the don't include any ad
supported software that doesn't allow you to exclude the ads.

In general though, I really want to hold the developers of applications
directly responsible for issues, particularly security issues with
software aimed at activists. I want people living the US (and other
relatively less repressive countries) and claiming something to be
secure to put their real names on the software they're expecting people
to entrust their lives to. That's why I like signed software.

I think the real long term solution is to push F-Droid in the direction
of allowing signed APKs from the developer, and just having their server
side implementation build and verify that the built apks have matching
checksums (or some such similar mechanism); as a short cut to verifying
how free the code is.

Like all of this stuff, it is about who you delegate trust to. For
example, I have not met the majority of Debian developers and
maintainers who sign the software that I run on my machine. However,
I've delegated trust to Debian's system of raising maintainers and
developers, and establishing clear trust chains to people that I do know
and trust. I would say (and just say, since I have no data to back this
up) that the majority of people running Debian, much less its
derivations, don't have any connection or trust path to the people that
signed the software on their system. This is not wholly dissimilar to
the F-Droid situation.

Anyway, assuming things stay the way they are currently, as long as you
stay on top of pull requests for the F-Droid listing, MeshTether (or
other apps) can be kept up to date. But it is definitely an extra step
in the distribution chain. It is also not signed by one of the original
devs in any way which is a bummer.

I'm curious to hear other thoughts on this ? as I'm obviously torn.

Best,
~~nat

[0] http://f-droid.org/posts/security-notice-textsecure/
[1] https://github.com/WhisperSystems/TextSecure/issues/53
"
1058,Commotion-dev, Throughput advantage to 802.11s support,"Fri, 8 Feb 2013 18:30:05 -0600",-0600,Ben West,"I agree with Aaron than for uses beyond meshes limited to a single channel,
max 32 or max 50 nodes is still the same arbitrarily low limit.

I am curious, tho, which approach would be more effective in getting this
limitation (and its implementations) amended: A) don't use 802.11s at all,
or B) use 802.11s as-is and push for more adoption of 802.11s among your
peers nevertheless, so that the number of people potentially demanding this
amendment increases.

As for meshing across multiple channels (or media, for that matter), I
started a thread<https://lists.olsr.org/pipermail/olsr-users/2013-February/005434.html>on
the olsr-users list asking about good approaches to building efficient
bridges for hybrid mesh topologies.  The
trelay<https://dev.openwrt.org/browser/trunk/package/trelay?order=name>package
recently added to OpenWRT looks especially useful for this, and I
think that tool was also mentioned in recent Battlemesh announcements.

On Fri, Feb 8, 2013 at 6:15 PM, Jeremy Lakeman <Jeremy.Lakeman at gmail.com>wrote:

> On Sat, Feb 9, 2013 at 4:17 AM, L. Aaron Kaplan <aaron at lo-res.org> wrote:
> > That's partly correct today. Initially the node_id field was 5 bit long
> -> hence allowed for a maximum of 32 nodes.
> > I was told cozybit changed that in the mean time (are they then standard
> conforming?)
> >
> > What I was told behind the scenes: it was not a telco lobbyist, but
> actually the companies involved in standardising 802.11s themselves, which
> did not want it to be much of a success since all of them already had their
> proprietary protocol implementation :(
> > I have no idea if this was a mere opinion of this IEEE forum participant
> or if it really reflected the situation at the IEEE at that time. However,
> it would explain brain dead ideas like a ""32 bits are enough"".
> >
> > Do you remember the 802.11s implementation at OLPC? That was
> terrible...they had to revert to fixed APs.
> >
> "
1059,Commotion-dev, Throughput advantage to 802.11s support,"Sat, 9 Feb 2013 10:45:53 +1030",+1030,Jeremy Lakeman,"On Sat, Feb 9, 2013 at 4:17 AM, L. Aaron Kaplan <aaron at lo-res.org> wrote:
> That's partly correct today. Initially the node_id field was 5 bit long -> hence allowed for a maximum of 32 nodes.
> I was told cozybit changed that in the mean time (are they then standard conforming?)
>
> What I was told behind the scenes: it was not a telco lobbyist, but actually the companies involved in standardising 802.11s themselves, which did not want it to be much of a success since all of them already had their proprietary protocol implementation :(
> I have no idea if this was a mere opinion of this IEEE forum participant or if it really reflected the situation at the IEEE at that time. However, it would explain brain dead ideas like a ""32 bits are enough"".
>
> Do you remember the 802.11s implementation at OLPC? That was terrible...they had to revert to fixed APs.
>
"
1060,Commotion-dev, Throughput advantage to 802.11s support,"Sat, 9 Feb 2013 01:40:43 +0100",+0100,L. Aaron Kaplan,"
On Feb 9, 2013, at 1:30 AM, Ben West <ben at gowasabi.net> wrote:

> I agree with Aaron than for uses beyond meshes limited to a single channel, max 32 or max 50 nodes is still the same arbitrarily low limit.
> 
> I am curious, tho, which approach would be more effective in getting this limitation (and its implementations) amended: A) don't use 802.11s at all, or B) use 802.11s as-is and push for more adoption of 802.11s among your peers nevertheless, so that the number of people potentially demanding this amendment increases.

I would rephrase your question:
""In which situations does 802.11s or any other layer-2 mesh make sense""?

There are advantages to having a layer 2 mesh: 
 * zeroconf works out of the box
 * your windows shares will appear everywhere (is that good or bad? ;-) 
 * the whole thing is essentially one big LAN -> this reduces complexity

Of course, you have the disadvantage of potentially lower scalability.

Maybe the combination of layer 2 and 3 meshes can become really interesting...

> 
> As for meshing across multiple channels (or media, for that matter), I started a thread on the olsr-users list asking about good approaches to building efficient bridges for hybrid mesh topologies.  The trelay package recently added to OpenWRT looks especially useful for this, and I think that tool was also mentioned in recent Battlemesh announcements.
> 
Indeed!
I think we should test it there. trelay came out of a discussion Xavier, Felix, Henning and me at the last WBM in the Bus from the mountains back to Athens.
Felix then hacked the solution in 30 minutes in the bus ;)
It is somewhat a shame that we did not try it yet, it has so much potential.
Especially the combination DLEP + trelay.


a.



"
1061,Commotion-dev, Throughput advantage to 802.11s support,"Sat, 09 Feb 2013 09:09:44 -0500",-0500,Dan Staples,"On 02/08/2013 07:40 PM, L. Aaron Kaplan wrote:
> There are advantages to having a layer 2 mesh: 
>  * zeroconf works out of the box
>  * your windows shares will appear everywhere (is that good or bad? ;-) 
>  * the whole thing is essentially one big LAN -> this reduces complexity
>
> Of course, you have the disadvantage of potentially lower scalability.
The one thing I worry about with a layer 2 mesh, like you describe, is a
lack of control over how far you want certain traffic to go. For
instance, I recently wrote a service advertisement system for Commotion
that uses Avahi/mDNS. Since certain services won't work well over
several hops (like streaming media, perhaps), I'm writing a OLSRd plugin
that sets the OLSR packet's TTL value to be the max number of hops the
service wants to be seen. In other words, an application that only wants
to be seen a maximum of 3 hops away will have its mDNS advertisement
sent in an OLSR packet with TTL=3. That way the service advertisement
won't be seen by any and all nodes that the host node can make a route
to, rather only the ones within a specific radius. (For reference, we
currently use the p2pd plugin to propagate multicast traffic, which has
a hardcoded TTL value of 5, I think).

Would a layer 2 mesh, with everyone on ""one big LAN"", be able to control
traffic propagation in this way?

And having your windows shares available everywhere on the mesh sounds
like a ne'er-do-well's dream ;)

Dan

-- 
Dan Staples

Open Technology Institute
https://commotionwireless.net

"
1062,Commotion-dev, OLSRd plugin for service discovery,"Sun, 10 Feb 2013 00:37:01 -0500",-0500,Dan Staples,"I just finished an initial version of a plugin for OLSRd that propagates
mDNS/DNS-SD advertisements based on a service's TTL value. So basically,
local services are advertised over the mesh according to custom TTL
values declared in their Avahi service files. For example, a service
that has a TTL value of 3 will be advertised a maximum of 3 hops away.
This is useful for limiting application visibility on a mesh, when
service quality would degrade based on the number of hops. For instance,
an application with streaming voice or video might only want to be
advertised to nodes within two hops.

TTL values are specified as a txt-record in a service file, like so:

<?xml version=""1.0"" standalone='no'?><!--*-nxml-*-->
<!DOCTYPE service-group SYSTEM ""avahi-service.dtd"">
<service-group>
<name replace-wildcards=""yes"">Example service on %h</name>
<service>
<type>_http._tcp</type>
<domain-name>mesh.local</domain-name>
<port>80</port>
<txt-record>application=Example service</txt-record>
<txt-record>*ttl=3*</txt-record>
<txt-record>ipaddr=10.1.1.1</txt-record>
</service>
</service-group"
1063,Commotion-dev, OLSRd plugin for service discovery,"Sun, 10 Feb 2013 15:02:43 +0100",+0100,L. Aaron Kaplan,"

On Feb 10, 2013, at 6:37 AM, Dan Staples <danstaples at opentechinstitute.org> wrote:

> I just finished an initial version of a plugin for OLSRd that propagates mDNS/DNS-SD advertisements based on a service's TTL value. So basically, local services are advertised over the mesh according to custom TTL values declared in their Avahi service files. For example, a service that has a TTL value of 3 will be advertised a maximum of 3 hops away. This is useful for limiting application visibility on a mesh, when service quality would degrade based on the number of hops. For instance, an application with streaming voice or video might only want to be advertised to nodes within two hops. 
> 
> TTL values are specified as a txt-record in a service file, like so:
> 
> <?xml version=""1.0"" standalone='no'?><!--*-nxml-*-->
> <!DOCTYPE service-group SYSTEM ""avahi-service.dtd"">
> <service-group>
> <name replace-wildcards=""yes"">Example service on %h</name>
> <service>
> <type>_http._tcp</type>
> <domain-name>mesh.local</domain-name>
> <port>80</port>
> <txt-record>application=Example service</txt-record>
> <txt-record>ttl=3</txt-record>
> <txt-record>ipaddr=10.1.1.1</txt-record>
> </service>
> </service-group>
> 
> The plugin is based on a previous OLSR plugin, P2PD, which used fixed TTL values for all multicast traffic.
> 
> I'll send this out to the OLSR dev community soon, but I wanted to see if anyone had any initial feedback first. It's kind of hard to test without a large enough mesh to try it out on, but please try it out if you're inclined: https://github.com/opentechinstitute/olsrd-dnssd.

Dan,

Question & feedback:

Were you aware of the previous mDNS plugins for OLSR? (BMF and ninux's mDNS plugin)?
I did not compare your version with theirs yet, but I would be curious what the differences were and why you chose to re-implement it. Was it the reduced TTL ? Was there some problem with the existing mDNS plugins?
Just curious - I don't use mDNS over here at all so I really don't know.

a.



"
1064,Commotion-dev, OLSRd plugin for service discovery,"Sun, 10 Feb 2013 09:32:00 -0500",-0500,Dan Staples,"Yes, I am aware of the BMF and mDNS plugins. The P2PD plugin which I
based my plugin on was actually based on the mDNS plugin, but with some
optimization and added configuration options. Mine then further refines
it with custom TTL values for local service advertisements. It does this
by stripping resource record entries out of mDNS packets sent to the
mesh and re-encapsulating them in new packets with TTL values
corresponding to the TTL values set by the local services.

So in that way, it's kind of a lineage from the mDNS plugin...  And BMF
just seemed to fit my purposes less than the P2PD plugin.

On 02/10/2013 09:02 AM, L. Aaron Kaplan wrote:
>
> On Feb 10, 2013, at 6:37 AM, Dan Staples <danstaples at opentechinstitute.org> wrote:
>
"
1065,Commotion-dev, OLSRd plugin for service discovery,"Sun, 10 Feb 2013 15:39:55 +0100",+0100,L. Aaron Kaplan,"
On Feb 10, 2013, at 3:32 PM, Dan Staples <danstaples at opentechinstitute.org> wrote:

> Yes, I am aware of the BMF and mDNS plugins. The P2PD plugin which I
> based my plugin on was actually based on the mDNS plugin, but with some
> optimization and added configuration options. Mine then further refines
> it with custom TTL values for local service advertisements. It does this
> by stripping resource record entries out of mDNS packets sent to the
> mesh and re-encapsulating them in new packets with TTL values
> corresponding to the TTL values set by the local services.
> 
> So in that way, it's kind of a lineage from the mDNS plugin...  And BMF
> just seemed to fit my purposes less than the P2PD plugin.
> 

I see! Thanks for the clarification.



"
1066,Commotion-dev, OLSRd plugin for service discovery,"Sun, 10 Feb 2013 20:20:32 +0100",+0100,Christian Huldt,"Dan Staples skrev 2013-02-10 06:37:
> I just finished an initial version of a plugin for OLSRd that propagates
> mDNS/DNS-SD advertisements based on a service's TTL value. 

I can see a use-case for this at exhibitions and museums which probably
is a bit out of line for the original purpose of this project, but could
perhaps give some more users and hence testing?


"
1067,Commotion-dev, OLSRd plugin for service discovery,"Mon, 11 Feb 2013 17:29:19 +0100",+0100,Teco Boot,"Blame me for P2PD, which was cloned from mDNS. I prefer a merge of mDNS and P2PD, maybe also with BMF. Not on my priority list. 

@Dan: I welcome the TTL enhancement, can it be pushed to the olsrd repository?

Other topic: it would be nice if BMF had filters also (such as P2PD). BTW, I use BMF for pttdroid. Still some problems, maybe because BMF uses MPRs. I'll find out whats wrong. Needed patch on BMF for Android (tuntap control filename) is in next olsrd release.

Teco 

Op 10 feb. 2013, om 15:39 heeft L. Aaron Kaplan het volgende geschreven:

> 
> On Feb 10, 2013, at 3:32 PM, Dan Staples <danstaples at opentechinstitute.org> wrote:
> 
"
1068,Commotion-dev, OLSRd plugin for service discovery,"Mon, 11 Feb 2013 14:24:04 -0500",-0500,Seamus Tuohy,"I can't speak for Dan, but i think that exhibitions and museums are
exactly the kind of use cases that would interesting to see for mesh
service advertisement with TTL. Could you expand on your use-cases. I
would be interested in what you have in mind.


s2e


On 02/10/2013 02:20 PM, Christian Huldt wrote:
> Dan Staples skrev 2013-02-10 06:37:
"
1069,Commotion-dev, OLSRd plugin for service discovery,"Mon, 11 Feb 2013 14:36:51 -0500",-0500,Dan Staples,"
On 02/11/2013 11:29 AM, Teco Boot wrote:
> Blame me for P2PD, which was cloned from mDNS. I prefer a merge of mDNS and P2PD, maybe also with BMF. Not on my priority list. 
>
> @Dan: I welcome the TTL enhancement, can it be pushed to the olsrd repository?
>
> Other topic: it would be nice if BMF had filters also (such as P2PD). BTW, I use BMF for pttdroid. Still some problems, maybe because BMF uses MPRs. I'll find out whats wrong. Needed patch on BMF for Android (tuntap control filename) is in next olsrd release.
>
> Teco 
Yeah one of the reasons I didn't use BMF was that it used MPRs, and, if
I'm not mistaken, those aren't used by OLSRd anymore? Plus the code
seemed to be much bigger and more complicated than I could wrap my head
around! But I think your wish for an integration of the existing
multicast plugins is a good idea.

I'm not sure of the procedure for pushing it to the olsrd repo, and plus
I'd like to give it some more testing to make sure I'm reconstructing
mDNS packets correctly. I'll send it out to the olsrd dev list after I'm
done that. Thanks for your work on P2PD!
>
> Op 10 feb. 2013, om 15:39 heeft L. Aaron Kaplan het volgende geschreven:
>
"
1070,Commotion-dev, OLSRd plugin for service discovery,"Mon, 11 Feb 2013 23:15:51 +0100",+0100,Christian Huldt,"Well, the main point is that some local information is more interesting
in the local neighbourhood.

My first (in some kind of ordering, probably chronological) idea was an
old museum with thick stone walls (namely the Swedish national museum
with paintings and sculptures), and one access point per room with a
small webserver - advertised by avahi with att TTL of zero hops - with
information of the pieces in that particular room.

And then - out of annoyance with the seemingly weak community spirit
around here - I was thinking of a mesh along some street with lots of
tourists payed for by local shop owners hosting their own access point
with some presentation/hours/offers advertised by some rather low TTL

I think there are quite a few areas where local information has a
certain quality, that's why I tried to propose a ""radius of interest""
parameter to rss version <something> back in the day... (because I would
love to zoom into Paris before going there and see local shows,
happenings, whatever the week before I go there (went to Amsterdam in
the 80's just to find that I missed a Burning Spear concert by one day
just because I didn't see the poster in time)


Seamus Tuohy skrev 2013-02-11 20:24:
> I can't speak for Dan, but i think that exhibitions and museums are
> exactly the kind of use cases that would interesting to see for mesh
> service advertisement with TTL. Could you expand on your use-cases. I
> would be interested in what you have in mind.
> 
> 
> s2e
> 
> 
> On 02/10/2013 02:20 PM, Christian Huldt wrote:
"
1071,Commotion-dev, OLSRd plugin for service discovery,"Tue, 12 Feb 2013 10:30:40 +1030",+1030,Paul Gardner-Stephen,"Hello,

This whole idea of locality of information, and value being related to
proximity to some area is something that we very much agree with.

I think that there are a variety of complementary ways that it can be
supported by the network.  This TTL concept is a great one. In Serval
Rhizome, we also have implemented a geobounding box, as well as just
allowing the natural localised diffusion of bundles to allow
localisation of information.

Paul.

On Tue, Feb 12, 2013 at 8:45 AM, Christian Huldt <christian at solvare.se> wrote:
> Well, the main point is that some local information is more interesting
> in the local neighbourhood.
>
> My first (in some kind of ordering, probably chronological) idea was an
> old museum with thick stone walls (namely the Swedish national museum
> with paintings and sculptures), and one access point per room with a
> small webserver - advertised by avahi with att TTL of zero hops - with
> information of the pieces in that particular room.
>
> And then - out of annoyance with the seemingly weak community spirit
> around here - I was thinking of a mesh along some street with lots of
> tourists payed for by local shop owners hosting their own access point
> with some presentation/hours/offers advertised by some rather low TTL
>
> I think there are quite a few areas where local information has a
> certain quality, that's why I tried to propose a ""radius of interest""
> parameter to rss version <something> back in the day... (because I would
> love to zoom into Paris before going there and see local shows,
> happenings, whatever the week before I go there (went to Amsterdam in
> the 80's just to find that I missed a Burning Spear concert by one day
> just because I didn't see the poster in time)
>
>
> Seamus Tuohy skrev 2013-02-11 20:24:
"
1072,Commotion-dev, OLSRd plugin for service discovery,"Mon, 11 Feb 2013 20:09:37 -0500",-0500,Dan Staples,"Geobounding is a great idea. I assume that requires some sort of
location tagging, perhaps via GPS?

And can you explain a little more what you mean by ""allowing the natural
localised diffusion of bundles to allow localisation of information""?

On 02/11/2013 07:00 PM, Paul Gardner-Stephen wrote:
> Hello,
>
> This whole idea of locality of information, and value being related to
> proximity to some area is something that we very much agree with.
>
> I think that there are a variety of complementary ways that it can be
> supported by the network.  This TTL concept is a great one. In Serval
> Rhizome, we also have implemented a geobounding box, as well as just
> allowing the natural localised diffusion of bundles to allow
> localisation of information.
>
> Paul.
>
> On Tue, Feb 12, 2013 at 8:45 AM, Christian Huldt <christian at solvare.se> wrote:
"
1073,Commotion-dev, What would you do with the USB port on your,"Mon, 11 Feb 2013 22:16:55 -0600",-0600,Ben West,"Leading on Josh's excellent suggestion for attaching an entropy key to an
access point's spare USB port (whether TP-Link, Buffalo, or some other USB
capable device), what are thoughts about using a *single* such entropy key
within a mesh to improve the entire mesh's encryption strength?

That is, imagine a mesh which begins with no encryption (whether IBSS-RSN
on the adhoc or WPA2 on the virtual APs).  Now, add a single TP-Link box
with the entropy key to the mesh.  Next, systematically use the output of
that key to regenerate the DSA hostkeys of all nodes w/in the mesh
(administered via SSH sessions).  Then turn on IBSS-RSN on the adhoc mesh,
along with WPA2 on all nodes' virtual access points, again using the output
of the entropy key.  Next, have all nodes regenerate their hostkeys *again*,
and the iterate so forth until an appealing degree encryption has been
reached.  At this point, the nodes then could mutually adhere to a regular
schedule of renewing their WPA2 and RSN keys.

Whenever an event occurs where the mesh's security have been deemed
compromised (e.g. an unknown MAC address joins the IBSS-RSN encrypted
mesh), all mesh users could be alerted of this event, the mesh could switch
to 'insecure' mode, and this process of renewing all keys could start from
scratch.

Such a scheme would still have the fundamental weakness that having an
""untrusted"" node within the mesh at t = 0 undermines any subsequent effort
at maintaining security via encryption, and really this limitation is going
to be inherent to the social nature of a community mesh.  However, could an
automated, mesh-wide process of repeatedly renewing nodes' encryption keys
using the output of a single device like the entropy key still yield a
usable degree of encryption?

On Wed, Jan 23, 2013 at 8:22 AM, Josh King <jking at chambana.net> wrote:

> Probably an Entropy Key or other RNG for stronger crypto?
>
> http://www.entropykey.co.uk/
>
> On Wed 23 Jan 2013 09:09:55 AM EST, Dan Staples wrote:
> > A USRP for OpenBTS! Although I doubt a router has the processing power
> > needed to encode voice data and the like... A HackRF would also be a
> > great peripheral to use once those are publicly available:
> > http://ossmann.blogspot.com/2012/06/introducing-hackrf.html.
> >
> > I currently have a router with a USB port, that I run DD-WRT on. I have
> > a 250GB HDD plugged into it, which I use for automated backups of a
> > website I run, plus a SFTP server. A USB port was a deciding factor in
> > the router I decided to buy...It's an ASUS WL-520GU. But I could also
> > see a 3G dongle as a big appeal for a USB port.
> >
> > Another idea is to use a USB drive as a crypto device. Insert the USB
> > flash drive to unlock a keyring or some private key material. That would
> > be an easy way to deploy multiple routers on a network that need to use
> > a common encryption key(s).
> >
> > Dan
> >
> > On Wed 23 Jan 2013 03:46:25 AM EST, Christian Huldt wrote:
> "
1074,Commotion-dev, OLSRd plugin for service discovery,"Tue, 12 Feb 2013 07:59:03 +0100",+0100,Christian Huldt,"Paul Gardner-Stephen skrev 2013-02-12 01:00:
> Hello,
> 
> This whole idea of locality of information, and value being related to
> proximity to some area is something that we very much agree with.

And that's  why I got  interested in Rhizome

> 
> I think that there are a variety of complementary ways that it can be
> supported by the network.  This TTL concept is a great one. In Serval
> Rhizome, we also have implemented a geobounding box, as well as just
> allowing the natural localised diffusion of bundles to allow
> localisation of information.

The geobounding box is exactly what I  wanted for rss, to have an
alternative for news agencies not to say ""this in not important"" but to
say ""this is important within 10 meters of this locality""

> 
> Paul.
> 
> On Tue, Feb 12, 2013 at 8:45 AM, Christian Huldt <christian at solvare.se> wrote:
"
1075,Commotion-dev, OLSRd plugin for service discovery,"Tue, 12 Feb 2013 21:22:23 +1030",+1030,Paul Gardner-Stephen,"Hello,

On Tue, Feb 12, 2013 at 11:39 AM, Dan Staples
<danstaples at opentechinstitute.org> wrote:
> Geobounding is a great idea. I assume that requires some sort of
> location tagging, perhaps via GPS?

Yes, so at present we have the capacity to advertise the geobounding
boxes of bundles, which would naturally require a GPS fix to include
in a bundle's manifest.  Similarly nodes would need a recent GPS fix
to decide whether to accept a geofenced bundle.  We do not currently
add the geotags, nor do we check them, but the facility is there,
albiet untested.

> And can you explain a little more what you mean by ""allowing the natural
> localised diffusion of bundles to allow localisation of information""?

Data will tend to distribute from where it is released on the mesh.
If there are more bundles than can be synchronised across the entire
mesh, then it is expected (but not proven) that data will be more
likely to be available nearer where it was produced.

Paul.

> On 02/11/2013 07:00 PM, Paul Gardner-Stephen wrote:
"
1076,Commotion-dev, txtinfo plugin question,"Tue, 12 Feb 2013 09:48:03 -0500",-0500,Andy Gunn,"Hi all - I have a few quick questions about the olsrd txtinfo plugin.

Is it enabled by default in Commotion? If so, what are the most useful
commands to send it via command line to retrieve link information,
particularly neighbour link quality?

For instance, will:
$ curl http://localhost:2006/links/interfaces
work? (i.e. is curl installed on Commotion?)

Thanks!
-A


-- 

Andy Gunn
Field Engineer, Open Technology Institute
New America Foundation
202-596-3484
http://oti.newamerica.net
"
1077,Commotion-dev, txtinfo plugin question,"Tue, 12 Feb 2013 09:51:46 -0500",-0500,Hans-Christoph Steiner,"
I don't think commotion is really using txtinfo any more because its hard to
scrape with code, but it is human readable.  I believe that the jsoninfo
plugin is what commotion is using in general.  Its JSON, so its very easy to
scrape, and has a very similar query style via URLs, but a different port number:

http://localhost:9090/links/neighbors

.hc

On 02/12/2013 09:48 AM, Andy Gunn wrote:
> Hi all - I have a few quick questions about the olsrd txtinfo plugin.
> 
> Is it enabled by default in Commotion? If so, what are the most useful
> commands to send it via command line to retrieve link information,
> particularly neighbour link quality?
> 
> For instance, will:
> $ curl http://localhost:2006/links/interfaces
> work? (i.e. is curl installed on Commotion?)
> 
> Thanks!
> -A
> 
> 

"
1078,Commotion-dev, txtinfo plugin question,"Tue, 12 Feb 2013 11:31:29 -0500",-0500,Andy Gunn,"Thanks Hans - do you know if you can query that via curl on the command
line? Or another method?


On 02/12/2013 09:51 AM, Hans-Christoph Steiner wrote:
> 
> I don't think commotion is really using txtinfo any more because its hard to
> scrape with code, but it is human readable.  I believe that the jsoninfo
> plugin is what commotion is using in general.  Its JSON, so its very easy to
> scrape, and has a very similar query style via URLs, but a different port number:
> 
> http://localhost:9090/links/neighbors
> 
> .hc
> 
> On 02/12/2013 09:48 AM, Andy Gunn wrote:
"
1079,Commotion-dev, txtinfo plugin question,"Tue, 12 Feb 2013 11:40:29 -0500",-0500,Josh King,"Hi Andy,

Actually both jsoninfo and txtinfo are enabled on Commotion; the latter 
is required by some luci modules we incorporate, and also I believe by 
the olsr-viz.js javascript visualizer, which we have not gotten around 
to tweaking yet. I don't believe curl is installed by default, but you 
can also access txtinfo from the commandline using netcat:

watch -d -n1 ""echo '/all' | nc localhost 2006""

This is the method I usually use.

On Tue 12 Feb 2013 11:31:29 AM EST, Andy Gunn wrote:
> Thanks Hans - do you know if you can query that via curl on the command
> line? Or another method?
>
>
> On 02/12/2013 09:51 AM, Hans-Christoph Steiner wrote:
"
1080,Commotion-dev, txtinfo plugin question,"Tue, 12 Feb 2013 10:41:32 -0600",-0600,Ben West,"FWIW, this is what I get on a Nanostatio Loco M5 running Attutide
Adjustment r35298 and olsrd - 0.6.3-3.  Note this is just on a stand-alone
node, not in mesh, but the txtinfo plugin does respond to curl.

root at locom5-q:/tmp# curl http://localhost:2006/links/interfaces
Table: Links
Local IP    Remote IP    Hyst.    LQ    NLQ    Cost

Table: Interfaces
Name    State    MTU    WLAN    Src-Adress    Mask    Dst-Adress
wlan0    UP    1472    Yes    10.12.1.19    255.255.255.0    255.255.255.255

curl: (56) Recv failure: Connection reset by peer


On Tue, Feb 12, 2013 at 10:31 AM, Andy Gunn
<andygunn at opentechinstitute.org>wrote:

> Thanks Hans - do you know if you can query that via curl on the command
> line? Or another method?
>
>
> On 02/12/2013 09:51 AM, Hans-Christoph Steiner wrote:
> >
> > I don't think commotion is really using txtinfo any more because its
> hard to
> > scrape with code, but it is human readable.  I believe that the jsoninfo
> > plugin is what commotion is using in general.  Its JSON, so its very
> easy to
> > scrape, and has a very similar query style via URLs, but a different
> port number:
> >
> > http://localhost:9090/links/neighbors
> >
> > .hc
> >
> > On 02/12/2013 09:48 AM, Andy Gunn wrote:
> "
1081,Commotion-dev, txtinfo plugin question,"Tue, 12 Feb 2013 13:50:03 -0500",-0500,Andy Gunn,"Cool - thanks to all! I will try some of these out and see how they go.


On 02/12/2013 11:41 AM, Ben West wrote:
> FWIW, this is what I get on a Nanostatio Loco M5 running Attutide
> Adjustment r35298 and olsrd - 0.6.3-3.  Note this is just on a stand-alone
> node, not in mesh, but the txtinfo plugin does respond to curl.
> 
> root at locom5-q:/tmp# curl http://localhost:2006/links/interfaces
> Table: Links
> Local IP    Remote IP    Hyst.    LQ    NLQ    Cost
> 
> Table: Interfaces
> Name    State    MTU    WLAN    Src-Adress    Mask    Dst-Adress
> wlan0    UP    1472    Yes    10.12.1.19    255.255.255.0    255.255.255.255
> 
> curl: (56) Recv failure: Connection reset by peer
> 
> 
> On Tue, Feb 12, 2013 at 10:31 AM, Andy Gunn
> <andygunn at opentechinstitute.org>wrote:
> 
"
1082,Commotion-dev, Commotion on Ubiquiti UniFi Outdoor units?,"Tue, 12 Feb 2013 16:55:38 -0500",-0500,Andy Gunn,"For future networks, what do folks think about the UniFi AP outdoor
units? I'm very interested in these for replacing PicoStations for
higher-throughput outdoor installations...
http://www.ubnt.com/unifi#apout
http://store.wisp-router.com/UAP-Outdoor-US

They appear to have the ar71xx chipset, but I'm not sure if the indoor
and outdoor units are identical inside.

Thoughts?


-- 

Andy Gunn
Field Engineer, Open Technology Institute
New America Foundation
202-596-3484
http://oti.newamerica.net
"
1083,Commotion-dev, Commotion on Ubiquiti UniFi Outdoor units?,"Tue, 12 Feb 2013 18:23:50 -0500",-0500,Dan Staples,"I think it's a great idea. We should try to get Commotion working on as
many devices as possible, and keep a list of what works. The UniFi
outdoor looks like it has great capabilities.

On 02/12/2013 04:55 PM, Andy Gunn wrote:
> For future networks, what do folks think about the UniFi AP outdoor
> units? I'm very interested in these for replacing PicoStations for
> higher-throughput outdoor installations...
> http://www.ubnt.com/unifi#apout
> http://store.wisp-router.com/UAP-Outdoor-US
>
> They appear to have the ar71xx chipset, but I'm not sure if the indoor
> and outdoor units are identical inside.
>
> Thoughts?
>
"
1084,Commotion-dev, Building a Wireless Network for a High Density of,"Tue, 12 Feb 2013 17:32:31 -0800",-0800,Commotion-dev.NeoPhyte_Rep at OrdinaryAmerican.net,"David Lang has some practical experience setting up WiFi access for up
to 2000 simultaneous users:
https://www.usenix.org/conference/lisa12/building-wireless-network-high-density-users


"
1085,Commotion-dev, Building a Wireless Network for a High Density,"Tue, 12 Feb 2013 22:12:21 -0600",-0600,Ben West,"The suggestion to use a prime number for the beacon interval to avoid
clients from becoming synchronized is pretty clever.  Seems like that would
work as desired, although I wonder if the speaker actually had a chance to
test that.  I think some of the ath5k and ath9k chipsets, as their
compat-wireless drivers are implemented, enforce a maximum 1000ms beacon
interval, so *997* will have to be your friend.

I'm also surprised he was successfully running APs at just 4mW transmit
power for roughly room-wide coverage.  He did mention his preference for
high-gain antennas over increased power, implying that low power could have
been in conjunction with large (e.g. ~10db) dipoles.

There is also this PDF from Bastian Bittorf / Freifunk that was published 2
years ago.  Similar advice, including tips specifically gears towards adhoc
mesh operation.
http://wiki.freifunk.net/images/7/73/Vortrag.pdf

Bastian's presentation also encourages adoption of zram for more efficient
memory footprint on RAM-limited devices.  This is now in OpenWRT trunk, and
I'm curious if such might permit operation of minimal Commotion-OpenWRT
(but with the luci-splash package) on 16MB devices, like those hundreds of
FONeras Sascha still has sitting around. ;)
https://dev.openwrt.org/changeset/35025/

On Tuesday, February 12, 2013, wrote:

> David Lang has some practical experience setting up WiFi access for up
> to 2000 simultaneous users:
>
> https://www.usenix.org/conference/lisa12/building-wireless-network-high-density-users
>
>
> _______________________________________________
> Commotion-dev mailing list
> Commotion-dev at lists.chambana.net
> https://lists.chambana.net/mailman/listinfo/commotion-dev
>
>
"
1086,Commotion-dev, 2013 Commotion Development Roadmap,"Wed, 13 Feb 2013 12:06:26 -0500",-0500,Andrew Reynolds,"Hi all,

Just a quick note to let you know OTI rolled out Commotion's 2013
development roadmap a couple of days ago:
https://code.commotionwireless.net/projects/commotion/wiki/Hackday-Roadmap-Notes

-andrew

"
1087,Commotion-dev, first test version of NetworkManager integration,"Thu, 14 Feb 2013 14:21:14 -0500",-0500,Hans-Christoph Steiner,"
Hey all,

I got the core of my 'dispatcher script' NetworkManager integration working,
its called 'nm-dispatcher-olsrd' for now.  It uses the very simple
'dispatcher' script API to launch a python script in respond to network
changes (interface up/down), then that python script talks to NetworkManager
over dbus to get the whole picture. It then parses any profiles that are in
/etc/nm-dispatcher-olsrd and if a new wifi connection matches one of the
profiles, it sets up olsrd properly.

The profiles are the same format as the MethTether profile, and the
nm-dispatcher-olsrd Ubuntu packages I created include a profile for
commotionwireless.net/02:ca:ff:ee:ba:be/channel 5.  So if you are within range
of another commotionwireless.net node, you should just be able to install
nm-dispatcher-olsrd, click commotionwireless.net in the NetworkManager wifi
browser panel applet, then have working OLSR mesh!


To try this on Ubuntu/Mint and probably Debian, do:

sudo add-apt-repository ppa:guardianproject/commotion
sudo apt-get install nm-dispatcher-olsrd


Here are the repos:

Ubuntu packages:
https://launchpad.net/~guardianproject/+archive/commotion

sources:
https://github.com/eighthave/nm-dispatcher-olsrd
https://github.com/eighthave/python-networkmanager
http://pypi.python.org/pypi/pyjavaproperties

Coming soon:
* a panel applet to represent the status of the mesh
* hopefully more automation of profiles

.hc

"
1088,Commotion-dev, first test version of NetworkManager,"Fri, 15 Feb 2013 03:54:43 +0000",+0000,Nathan of Guardian,"Hans-Christoph Steiner:
> To try this on Ubuntu/Mint and probably Debian, do:
> 
> sudo add-apt-repository ppa:guardianproject/commotion
> sudo apt-get install nm-dispatcher-olsrd

I had to insert a

> sudo apt-get update

between those two commands, fyi.

+n





"
1089,Commotion-dev, first test version of NetworkManager,"Fri, 15 Feb 2013 13:18:10 -0500",-0500,Dan Staples,"That's excellent. I'd like to try it out in our Commotion-OpenBTS live
images, since they are based on Ubuntu.

On 02/14/2013 02:21 PM, Hans-Christoph Steiner wrote:
> Hey all,
>
> I got the core of my 'dispatcher script' NetworkManager integration working,
> its called 'nm-dispatcher-olsrd' for now.  It uses the very simple
> 'dispatcher' script API to launch a python script in respond to network
> changes (interface up/down), then that python script talks to NetworkManager
> over dbus to get the whole picture. It then parses any profiles that are in
> /etc/nm-dispatcher-olsrd and if a new wifi connection matches one of the
> profiles, it sets up olsrd properly.
>
> The profiles are the same format as the MethTether profile, and the
> nm-dispatcher-olsrd Ubuntu packages I created include a profile for
> commotionwireless.net/02:ca:ff:ee:ba:be/channel 5.  So if you are within range
> of another commotionwireless.net node, you should just be able to install
> nm-dispatcher-olsrd, click commotionwireless.net in the NetworkManager wifi
> browser panel applet, then have working OLSR mesh!
>
>
> To try this on Ubuntu/Mint and probably Debian, do:
>
> sudo add-apt-repository ppa:guardianproject/commotion
> sudo apt-get install nm-dispatcher-olsrd
>
>
> Here are the repos:
>
> Ubuntu packages:
> https://launchpad.net/~guardianproject/+archive/commotion
>
> sources:
> https://github.com/eighthave/nm-dispatcher-olsrd
> https://github.com/eighthave/python-networkmanager
> http://pypi.python.org/pypi/pyjavaproperties
>
> Coming soon:
> * a panel applet to represent the status of the mesh
> * hopefully more automation of profiles
>
> .hc
>
> _______________________________________________
> Commotion-dev mailing list
> Commotion-dev at lists.chambana.net
> https://lists.chambana.net/mailman/listinfo/commotion-dev
"
1090,Commotion-dev, first test version of NetworkManager,"Fri, 15 Feb 2013 14:05:00 -0500",-0500,Hans-Christoph Steiner,"
Its still pretty raw, but if you're up for diving in, I'm happy to have
feedback.  I added a hack to configure the commotionwireless.net connection in
NetworkManager but it doesn't really seem to work, so you might need to
manually configure the adhoc wireless settings in NetworkManager for now,
until I figure out how to automate it.

.hc

On 02/15/2013 01:18 PM, Dan Staples wrote:
> That's excellent. I'd like to try it out in our Commotion-OpenBTS live
> images, since they are based on Ubuntu.
> 
> On 02/14/2013 02:21 PM, Hans-Christoph Steiner wrote:
"
1091,Commotion-dev, Olsrd OSX App update,"Fri, 15 Feb 2013 11:01:05 -0800",-0800,Bradley Greenwood,"Hi all,

I'm Brad, the person working on the osx app.    The github repo for the project can be found here:

   https://github.com/bmgdev/meshbook

I'll be committing a sizable update later today that contains profile management, but the current rev looks like the image attached.




I still have much to do but will be working over the weekend so will update with another status soon.  

Please let me know if you have questions.
-b

Bradley Greenwood | bradley at scal.io | Scal.io


"
1092,Commotion-dev, Olsrd OSx App Update,"Fri, 15 Feb 2013 11:12:05 -0800",-0800,Bradley Greenwood,"Hi all,

I'm Brad, the person working on the osx app. The github repo for the project can be found here:

   https://github.com/bmgdev/meshbook

I'll be committing a sizable update later today that contains profile management, but the current rev looks like the image attached.

I still have much to do but will be working over the weekend so will update with another status soon.  

Please let me know if you have questions.
-b

Bradley Greenwood | bradley at scal.io | Scal.io


"
1093,Commotion-dev, Olsrd OSx App Update,"Fri, 15 Feb 2013 14:20:44 -0500",-0500,Hans-Christoph Steiner,"
We've got the kinks sorted out on starting up olsrd reliably on Mac OS X,
turns out that 255.255.255.255 broadcasts work oddly on Mac OS X, so we can't
use them.  They only go out the ""first"" interface, not all interfaces, so if
the ""first"" interface is the wired ethernet, then the broadcast never goes out
to the wifi.  By not setting Ip4Broadcast in olsrd.conf, olsrd choose the
broadcast address that's configured in the interface, so that should work
reasonably well.

Also, the dyn_gw plugin only works with the Linux kernel (and maybe FreeBSD if
you use the linprocfs to provide a Linux compatible /proc).  If that's an
essential part of the commotion mesh, then something will have to change there
to support non-Linux systems.

.hc

On 02/15/2013 02:12 PM, Bradley Greenwood wrote:
> Hi all,
> 
> I'm Brad, the person working on the osx app. The github repo for the project can 
> be found here:
> 
> https://github.com/bmgdev/meshbook
> 
> I'll be committing a sizable update later today that contains profile 
> management, but the current rev looks like the image attached.
> 
> I still have much to do but will be working over the weekend so will update with 
> another status soon.
> 
> Please let me know if you have questions.
> -b
> 
> Bradley Greenwood | bradley at scal.io <mailto:bradley at scal.io> | Scal.io
> 
> 
> 
> 
> _______________________________________________
> Commotion-dev mailing list
> Commotion-dev at lists.chambana.net
> https://lists.chambana.net/mailman/listinfo/commotion-dev
> 

"
1094,Commotion-dev, my failed deploy report,"Sat, 16 Feb 2013 20:43:24 -0500",-0500,Sean McIntyre,"Hey list,

I went out yesterday to set up some NanoStation M2's but overall failed
wholly. Wanted to report back on the experience for everybody's benefit.
I'm interested to hear if I did anything wrong so I can adjust my
techniques for next time.

A major usability field ops feature I would love is the NanoStation M2
reset button to do a ""manufacturer reset"" on the firmware. That would have
saved me some headaches. Let me know if it actually does that and I'm doing
it wrong. (Also let me know if I just volunteered to implement this. ;))

Okay, here we go:

Router #1 issue: Could not log in to web interface / unknown password

Version: ""Powered by LuCI Trunk (trunk+svn8676) CommotionWRT Pre-Release
PR3""

It could be a case of forgetfulness, but I became unable access this router
via the web interface. The password prompt always failed, despite trying
every password I know. ;)

So time to reset! But holding the master reset button (powered on) doesn't
seem to have any effect, the configuration doesn't wipe / allow me to set a
new password. I reflashed it.

This one has been left outdoors for the last month.

Luckily I brought a second router with me, so I swapped the device, but...

Router #2 issue: Adding bridge interface between mesh and LAN interfaces
made device inaccessible over LAN interface

Version (same): ""Powered by LuCI Trunk (trunk+svn8676) CommotionWRT
Pre-Release PR3""

This could also be operator error, but here's the scenario:

1. Nanostation M2 (call it ""A"") setup with stock Commotion on my roof
2. Nanostation M2 (call it ""B"") setup with stock Commotion on target roof
3. Station A was connected to my home router with an Internet uplink
4. Station B was successfully connected to Internet from Station A via the
mesh interface, and its LAN port was connected to an Ethernet hub (not
router)
5. My computer (OS X) was connected to the Ethernet hub via Ethernet cable
and could access the LAN interface (192.168.1.x). Set up a default route on
my computer to send upstream packets to Station B, but the default setup
didn't pass packets from my laptop, through the hub, through Station B, to
Station A (and to the Internet)

My next move was to set up a new bridge interface over Station B's LAN
interface and mesh interface in hopes this would pass along the packets.
Saved, waited, and could no longer connect to Station B's LAN interface.

Tried to reset device with reset button and revert back to original config,
but like before, this did not reset the configuration.

Had to give up, came home with the device and saw that the device was
accessible over the WiFi interface and successfully logged in. So that
makes me think that it could be my error, would love to know if so.

Anyways, looking forward to hearing back!

Thanks,

Sean
"
1095,Commotion-dev, How will servald be implemented in Commotion?,"Mon, 18 Feb 2013 16:09:10 -0500",-0500,Andy Gunn,"Hi all - I had a (possibly) quick question when folks have a few minutes
to respond. What is the plan for how servald will plug in to the
Commotion framework?

Will it be implemented as a plugin, or a completely separate build? Will
it be on by default, or off by default?

Thanks!
-Andy


-- 

Andy Gunn, Field Engineer
Open Technology Institute, New America Foundation
Office: 202-596-3484
"
1096,Commotion-dev, first test version of NetworkManager,"Mon, 18 Feb 2013 21:48:59 -0500",-0500,Hans-Christoph Steiner,"
Ok, I've done a bunch more testing, and have it reliably working on two Linux
Mint/Maya aka Ubuntu/Precise machines.  I have been testing on a
Ubuntu/quantal machine, and its NetworkManager seems to ignore the channel and
hardcoded BSSID, so it tries repeated on channel 1 and fails.   arg...

Right now, it includes a pre-configured NetworkManager connection for
'commotionwireless.net'.  Are there any other mesh profiles that should be
included by default?

.hc

On 02/15/2013 01:18 PM, Dan Staples wrote:
> That's excellent. I'd like to try it out in our Commotion-OpenBTS live
> images, since they are based on Ubuntu.
> 
> On 02/14/2013 02:21 PM, Hans-Christoph Steiner wrote:
"
1097,Commotion-dev, How will servald be implemented in Commotion?,"Mon, 18 Feb 2013 22:40:14 -0500",-0500,Dan Staples,"The servald daemon will be included and turned on by default on 
Commotion DR1. The primary use for it is in the service advertisement 
and discovery component of Commotion, and for that it only really uses 
the Serval cryptographic functions and keyring. But it will have all of 
the regular Serval functionality available as well, such as Rhizome and 
Voice-over-mesh protocol (VoMP).

More specifically, the servald daemon will run as a standalone process, 
and the Serval shared library will be available for other Commotion 
processes to use. I hope this is clear enough; let me know if you have 
any other questions about it!

cheers,
Dan

On Mon 18 Feb 2013 04:09:10 PM EST, Andy Gunn wrote:
> Hi all - I had a (possibly) quick question when folks have a few minutes
> to respond. What is the plan for how servald will plug in to the
> Commotion framework?
>
> Will it be implemented as a plugin, or a completely separate build? Will
> it be on by default, or off by default?
>
> Thanks!
> -Andy
>
"
1098,Commotion-dev, first test version of NetworkManager,"Mon, 18 Feb 2013 22:55:07 -0500",-0500,Hans-Christoph Steiner,"
I'm pretty sure I figured out the Ubuntu/quantal issue: that machine has a
binary blob wifi driver that does not handle adhoc well at all...  hopefully
this is not a common scenario.

.hc

On 02/18/2013 09:48 PM, Hans-Christoph Steiner wrote:
> 
> Ok, I've done a bunch more testing, and have it reliably working on two Linux
> Mint/Maya aka Ubuntu/Precise machines.  I have been testing on a
> Ubuntu/quantal machine, and its NetworkManager seems to ignore the channel and
> hardcoded BSSID, so it tries repeated on channel 1 and fails.   arg...
> 
> Right now, it includes a pre-configured NetworkManager connection for
> 'commotionwireless.net'.  Are there any other mesh profiles that should be
> included by default?
> 
> .hc
> 
> On 02/15/2013 01:18 PM, Dan Staples wrote:
"
1099,Commotion-dev," OSX ""Meshbook"" app: UX, Tech, and Status","Tue, 19 Feb 2013 00:02:43 -0800",-0800,Bradley Greenwood,"Hi all,

Things are moving along.  I'd like to give project status and possibly ask for some feedback / guidance / direction on the UI/UX front (being the ui/ux lover that I am).

UI/UX
I've read through the ""Human Interface Guidelines"" docs on the Commotion website and i'd like to tailor the user experience as closely as I can to:

   https://commotionwireless.net/docs/hig/key-processes

Mobile and desktop are (obviously) much different experiences in this realm so its taken me a while to wrap my head around the best course of action on this project.   Heres the breakdown of my current user experience (see attached screenshot):

1) User opens app and is displayed a menu(let) with tabbed window.
2) A list of available adhoc networks is displayed that a user may connect to. (Its my understanding there is no way to tell from a network scan that olsrd is running on a remote adhoc).
3) The user may choose to connect to an existing adhoc: in this case, the network connection is made and the bundled olsrd binary is started.
4) The user may also choose to start his/her own mesh network (adhoc): in this case, the user has the ability to connect through a given/managed profile or he/she can create a new connection ""on the fly"" (by adding settings). *note: this can be seen in screenshot.

Side note: I was able to find a slew of vector images I modified and reused for the app.  The pin-style icons I believe you used in the android app so I tried to stick with the same idea/flow (just placeholders for now). 

Now, please clarify for me (and kindly forgive my ignorance, i'm new)? Its my understanding that a profile is for creating a new mesh (adhoc) network that people can associate to. I'm also under the assumption that the only way for a person to connect to an adhoc network is for me to scan for a list of available (open) IBSS networks. Are the profiles used for both creating and joining a mesh network? Are there cases where an adhoc network wouldnt be detected on a scan (no olsrd)?

If it fits within this scope, i'd like to make the process (experience) of connecting to an adhoc->mesh a little more intuitive by using connection ""walk-thru"" screens for the user. More along the lines of: https://commotionwireless.net/docs/hig/key-processes
   
Please tell me if this would be beneficial (or if that is even in scope).  IMO, the user needs a helpful way/guide of knowing what to do on program launch (connecting to an available adhoc network, knowing what to do when he/she is connected to the mesh, what to do after that, etc)? just thinking through this.  It appears that you've nailed this nicely for mobile but I didn't see any commotion HI guidelines for desktop.

TECH
As for the tech side of things, here's the rundown on how i've implemented.  For the Cocoa geeks that are reading, as you know, there are some big differences in osx versions between 10.5 and 10.8, especially for the apis we're needing to use.  I chose apis (non-private) that we'll be able to refactor if/when we need to support 10.5 or 10.8.  I focused primarily on 10.6+10.7 compatibility.

On application launch, I immediately fire a notification to a sharedInstance (singleton) that does 3 primary things: a) gets a pid, kills a pid (as root), and executes command line with args (as root). I kill off any processes named olsrd and execute the bundled olsrd binary.  I originally had tried sending the kill signal to olsrd but found that it wouldn't always terminate.  kill -9 seems to be the only reliable way to terminate the process but am afraid this might lead to a zombie open port?  I'm also passing the interface en1 as a param to olsrd -- should this be user configurable?  

Also to note, I start olsrd BEFORE connecting adhoc.  I do this because olsrd has some startup overhead in terms of time it takes to load it's json plugin.  Why does that matter?  Because we're executing olsrd as a shell script, there are no callbacks and I cannot inform my data sync poller to begin fetching json from localhost:9090 until olsrd has begun running.  We must wait for olsrd to fully load so we're able to begin polling.  Why are we using a shell script?  In order to run as root, we're severely limited as to how we can auth on 10.4-10.8.  The 3 options are a) sign our app and use SMJobBless() if >= 10.6, b) use applescript (deprecated methods that partially work) or c) use AuthorizationExecuteWithPrivileges (now deprecated but fully usable).  I chose the lesser of the 3 evils and went with ""AuthorizationExecuteWithPrivileges"" .  As of 10.7,  unfortunately, the ""right"" (and really only) way to auth as root is to sign the app and use SMJobBless() or equivalent.  We'll need to figure something out if wanting to support 10.8.

Once olsrd is humming, we're able to fire-up our ""MeshDataSync"" delegate.  We use this for polling localhost:9090 using NSTask, NSTimer, NSURLConnection, and operation queues.  This allows us to queue up requests on a different thread (run loop) so we don't block the main thread (8 second intervals).  Yes, we're using multi-threading for this but I may rethink it at a later time.  

Next, we use a great lib (CoreWLAN) for network connection and management.  This allows us to display and manage WiFi/IBSS data from our interface.  If we want to support versions earlier than 10.6, the best way would be to use Apple's 80211b.h (private apis).  They aren't very well documented, but in my opinion, better than using shell scripts.

"
1100,Commotion-dev, How will servald be implemented in Commotion?,"Tue, 19 Feb 2013 08:23:43 -0500",-0500,Dan Staples,"And I forgot to mention the olsr-mdp plugin that uses the Serval crypto 
functions and keyring as well to secure traffic on the mesh.

On Mon 18 Feb 2013 10:40:14 PM EST, Dan Staples wrote:
> The servald daemon will be included and turned on by default on
> Commotion DR1. The primary use for it is in the service advertisement
> and discovery component of Commotion, and for that it only really uses
> the Serval cryptographic functions and keyring. But it will have all of
> the regular Serval functionality available as well, such as Rhizome and
> Voice-over-mesh protocol (VoMP).
>
> More specifically, the servald daemon will run as a standalone process,
> and the Serval shared library will be available for other Commotion
> processes to use. I hope this is clear enough; let me know if you have
> any other questions about it!
>
> cheers,
> Dan
>
> On Mon 18 Feb 2013 04:09:10 PM EST, Andy Gunn wrote:
"
1101,Commotion-dev," OSX ""Meshbook"" app: UX, Tech, and Status","Tue, 19 Feb 2013 08:50:42 -0500",-0500,Seamus Tuohy,"Hey Brad,

On 02/19/13 03:02, Bradley Greenwood wrote:
> Hi all,
>
> Things are moving along.  I'd like to give project status and possibly ask for
> some feedback / guidance / direction on the UI/UX front (being the ui/ux lover
> that I am).
>
> UI/UX
> I've read through the ""Human Interface Guidelines"" docs on the Commotion website
> and i'd like to tailor the user experience as closely as I can to:
>
> https://commotionwireless.net/docs/hig/key-processes
> Mobile and desktop are (obviously) much different experiences in this realm so
> its taken me a while to wrap my head around the best course of action on this
> project.   Heres the breakdown of my current user experience (see attached
> screenshot):
>
> 1) User opens app and is displayed a menu(let) with tabbed window.
> 2) A list of available adhoc networks is displayed that a user may connect to.
> (Its my understanding there is no way to tell from a network scan that olsrd is
> running on a remote adhoc).

Josh, can you shoot out a brief overview of what you will gather from 
the current scan function, and possibly an idea of what you see from 
scanning plug-ins in the future?

> 3) The user may choose to connect to an existing adhoc: in this case, the
> network connection is made and the bundled olsrd binary is started.
> 4) The user may also choose to start his/her own mesh network (adhoc): in this
> case, the user has the ability to connect through a given/managed profile or
> he/she can create a new connection ""on the fly"" (by adding settings). *note:
> this can be seen in screenshot.
>
> Side note: I was able to find a slew of vector images I modified and reused for
> the app.  The pin-style icons I believe you used in the android app so I tried
> to stick with the same idea/flow (just placeholders for now).
>
> Now, please clarify for me (and kindly forgive my ignorance, i'm new)? Its my
> understanding that a profile is for creating a new mesh (adhoc) network that
> people can associate to. I'm also under the assumption that the only way for a
> person to connect to an adhoc network is for me to scan for a list of available
> (open) IBSS networks. Are the profiles used for both creating and joining a mesh
> network? Are there cases where an adhoc network wouldnt be detected on a scan
> (no olsrd)?

In-house we have been thinking of profiles as sets of settings for 
various use-cases. This way a setting file might be a backhaul node, a 
gateway, an application server, a tor-gateway, etc. In this way if a 
user has the correct settings for another network, or scans and gets 
enough information, they can use a profile to connect to a network as a 
specific type of node. I am more than willing to go into much more depth 
if you desire. There are use cases where a user is setting up the node 
outside of range of a network and, as such, won't see a network. 
Otherwise a scan should detect all ad-hoc networks. (I am not 100% on 
this with the current version of the daemon, so Josh correct me if I am 
wrong)

>
> If it fits within this scope, i'd like to make the process (experience) of
> connecting to an adhoc->mesh a little more intuitive by using connection
> ""walk-thru"" screens for the user. More along the lines of:
> https://commotionwireless.net/docs/hig/key-processes
>
>
> Please tell me if this would be beneficial (or if that is even in scope).  IMO,
> the user needs a helpful way/guide of knowing what to do on program launch
> (connecting to an available adhoc network, knowing what to do when he/she is
> connected to the mesh, what to do after that, etc)? just thinking through this.
> It appears that you've nailed this nicely for mobile but I didn't see any
> commotion HI guidelines for desktop.

Funny you mention this... We are in the first round of testing on the 
""Commotion Quick Start"" for the OpenWRT instance. You can find an 
overview here - > 
https://code.commotionwireless.net/projects/commotion/wiki/QuickStart . 
This has been my rabbit hole for a little over a month, and our field 
team is working on creating the best pathing for new users who want to 
set up a network right now. I will make sure that I put up the notes 
from our sessions so you can see them. Also, shoot me an e-mail and we 
can set up a skype call to go over what we have, give a demo, and can 
get your ideas and what you have done so far. (I know, I know, never go 
off list. I will summarize our conversation and put it on the list after 
the fact.)

> TECH
> As for the tech side of things, here's the rundown on how i've implemented.  For
> the Cocoa geeks that are reading, as you know, there are some big differences in
> osx versions between 10.5 and 10.8, especially for the apis we're needing to
> use.  I chose apis (non-private) that we'll be able to refactor if/when we need
> to support 10.5 or 10.8.  I focused primarily on 10.6+10.7 compatibility.
>
> On application launch, I immediately fire a notification to a sharedInstance
> (singleton) that does 3 primary things: a) gets a pid, kills a pid (as root),
> and executes command line with args (as root). I kill off any processes named
> olsrd and execute the bundled olsrd binary.  I originally had tried sending the
> kill signal to olsrd but found that it wouldn't always terminate.  kill -9 seems
> to be the only reliable way to terminate the process but am afraid this might
> lead to a zombie open port?  I'm also passing the interface en1 as a param to
> olsrd -- should this be user configurable?
>
> Also to note, I start olsrd BEFORE connecting adhoc.  I do this because olsrd
> has some startup overhead in terms of time it takes to load it's json plugin.
> Why does that matter?  Because we're executing olsrd as a shell script, there
> are no callbacks and I cannot inform my data sync poller to begin fetching json
> from localhost:9090 until olsrd has begun running.  We must wait for olsrd to
> fully load so we're able to begin polling.  Why are we using a shell script?  In
> order to run as root, we're severely limited as to how we can auth on
> 10.4-10.8.  The 3 options are a) sign our app and use SMJobBless() if >= 10.6,
> b) use applescript (deprecated methods that partially work) or c) use
> AuthorizationExecuteWithPrivileges (now deprecated but fully usable).  I chose
> the lesser of the 3 evils and went with ""AuthorizationExecuteWithPrivileges"" .
> As of 10.7,  unfortunately, the ""right"" (and really only) way to auth as root is
> to sign the app and use SMJobBless() or equivalent.  We'll need to figure
> something out if wanting to support 10.8.
>
> Once olsrd is humming, we're able to fire-up our ""MeshDataSync"" delegate.  We
> use this for polling localhost:9090 using NSTask, NSTimer, NSURLConnection, and
> operation queues.  This allows us to queue up requests on a different thread
> (run loop) so we don't block the main thread (8 second intervals).  Yes, we're
> using multi-threading for this but I may rethink it at a later time.
>
> Next, we use a great lib (CoreWLAN) for network connection and management.  This
> allows us to display and manage WiFi/IBSS data from our interface.  If we want
> to support versions earlier than 10.6, the best way would be to use Apple's
> 80211b.h (private apis).  They aren't very well documented, but in my opinion,
> better than using shell scripts.
>
> "
1102,Commotion-dev," OSX ""Meshbook"" app: UX, Tech, and Status","Tue, 19 Feb 2013 10:18:33 -0500",-0500,Andrew Reynolds,"It sounds like you and Seamus have started the right discussions, so I
will just add a couple of points related to the HIG.

As you work through the interface, please feel free to ask questions or
suggest improvements to the HIG. The existing doc came out with the
first generation of Commotion, and the project has evolved quite a bit
since then. We have always seen it as a living document, so if something
seems confusing or forced, please bring it to the dev list.

We expect to find idiomatic differences as we add new platforms,
applications, and use cases. Our goal is not really to create identical
implementations, but to provide the tools to build a recognizable
Commotion widget that also works within the widget's native framework.

For instance, if the pin-style icons are too big or the borders are too
heavy for your application (as is often the case in mobile apps with
small screens), you can scale them or suggest alternatives. We just ask
that you bring it to the list so we can update the HIG as needed.

You can see some of this evolution in the new OpenWRT theme:
https://code.commotionwireless.net/attachments/download/240/screenshot24.png

https://code.commotionwireless.net/attachments/download/241/screenshot25.png

https://code.commotionwireless.net/attachments/download/242/screenshot26.png

https://code.commotionwireless.net/attachments/download/243/screenshot27.png

-andrew

On 02/19/2013 08:50 AM, Seamus Tuohy wrote:
> Hey Brad,
> 
> On 02/19/13 03:02, Bradley Greenwood wrote:
"
1103,Commotion-dev, olsrd plugin config for GNU/Linux and Mac OS X,"Tue, 19 Feb 2013 11:32:41 -0500",-0500,Hans-Christoph Steiner,"
For the Mac OS X and GNU/Linux clients, I'm wondering how the olsrd.conf
should be configured for the default commotionwireless.net profile.  dyn_gw
only works on the Linux kernel, so that's out on Mac OS X.  arprefresh,
nameservice, and p2pd seem to only be built on GNU/Linux and Android, so I
guess they also only work with the Linux kernel.

For GNU/Linux, there is then the question of how to configure nameservice and
p2pd.  It looks like 'name' should be unique per-host:

LoadPlugin ""olsrd_nameservice.so.0.3""
{
        PlParam ""name"" ""commotion-7814921""
        PlParam ""sighup-pid-file"" ""/var/run/dnsmasq.pid""
        PlParam ""suffix"" "".mesh""
}

And with p2pd, it looks like NonOlsrIf needs to be updated based on the
interface names of the machine that it is currently running on.  Is there a
way to handle that in the olsrd.conf?  Otherwise I guess that the conf file
will have to be rewritten based on the network devices on the installed machine.

LoadPlugin ""olsrd_p2pd.so.0.1.0""
{
        PlParam ""NonOlsrIf"" ""eth0""
        PlParam ""P2pdTtl"" ""5""
        PlParam ""UdpDestPort"" ""224.0.0.251 5353""
}

.hc

"
1104,Commotion-dev, olsrd plugin config for GNU/Linux and Mac OS X,"Tue, 19 Feb 2013 12:09:32 -0500",-0500,Dan Staples,"Yes, those both seem to be dynamically determined options that can't
exactly be hard-coded. One option could be to patch or customize the
namservice plugin so that it just uses the machine's hostname; that
would be simple to implement.

Can anyone shed some light on what we use p2pd for currently? I started
customizing p2pd for use with service advertisement and discovery, and
if there aren't any other uses for it, I think we should adopt the DNSSD
plugin I put together and drop p2pd. It's highly unlikely that DNSSD
will ever make its way into the official OLSRd code, but I don't see a
reason why we can't include from our own repo.

DNSSD uses the same plugin params as p2pd, but with some added options.
For service advertisement and discovery, we just need to capture any
outgoing mDNS traffic. I know that on Linux & OpenWRT, Avahi-daemon by
default sends outgoing advertisements on all local interfaces...so the
""NonOlsrIf"" option could really be any non-mesh interface name. I'm not
sure how mDNS is implemented on Android, but the same principle applies:
NonOlsrIf should be set to a non-mesh interface used by mDNS.

If there's a way to determine this in a way that could be coded into the
DNSSD plugin, that might be a good way to go. Do you think that would be
possible? Without a way to do that, I suspect the conf file (with p2pd
or DNSSD) will have to be rewritten based on the network configuration
of the device.

On 02/19/2013 11:32 AM, Hans-Christoph Steiner wrote:
> For the Mac OS X and GNU/Linux clients, I'm wondering how the olsrd.conf
> should be configured for the default commotionwireless.net profile.  dyn_gw
> only works on the Linux kernel, so that's out on Mac OS X.  arprefresh,
> nameservice, and p2pd seem to only be built on GNU/Linux and Android, so I
> guess they also only work with the Linux kernel.
>
> For GNU/Linux, there is then the question of how to configure nameservice and
> p2pd.  It looks like 'name' should be unique per-host:
>
> LoadPlugin ""olsrd_nameservice.so.0.3""
> {
>         PlParam ""name"" ""commotion-7814921""
>         PlParam ""sighup-pid-file"" ""/var/run/dnsmasq.pid""
>         PlParam ""suffix"" "".mesh""
> }
>
> And with p2pd, it looks like NonOlsrIf needs to be updated based on the
> interface names of the machine that it is currently running on.  Is there a
> way to handle that in the olsrd.conf?  Otherwise I guess that the conf file
> will have to be rewritten based on the network devices on the installed machine.
>
> LoadPlugin ""olsrd_p2pd.so.0.1.0""
> {
>         PlParam ""NonOlsrIf"" ""eth0""
>         PlParam ""P2pdTtl"" ""5""
>         PlParam ""UdpDestPort"" ""224.0.0.251 5353""
> }
>
> .hc
>
> _______________________________________________
> Commotion-dev mailing list
> Commotion-dev at lists.chambana.net
> https://lists.chambana.net/mailman/listinfo/commotion-dev
"
1105,Commotion-dev, olsrd plugin config for GNU/Linux and Mac OS X,"Tue, 19 Feb 2013 19:21:59 +0100",+0100,Teco Boot,"The dyn_gw plugin is for Internet border routers. Limitation for Android/Linux looks OK to me. Or would iMac/macBook act as gateway? (run Linux in virtual box?)

The (extended) SmartGateway is far more important. 0.6.6 can set up multiple tunnels, where for new connections the best gateway is pinpointed. Moving nodes keep the selected gateway for existing connections. Does ipip tunnels work on OSX? (hmm, typing on Macbook, few meters from my Linux olsrd gateway _with WiFi AP_, no time to verify...).

We have built the PUD plugin for position update distribution. It distributes dynamic (GPS) positions and ID (type&ID) field in compact messages. DNS names is one of the supported ID types. An extended version could update name server resolve cache.

On p2pd, I use the lo interface for forwarding local host multicast/broadcast packages. Tested on Android only, with BMF. It should work on p2pd and mdns also.

On dynamic config: when I need such, I usually use a start script that copies template to a /var/run (or whatever rw folder) and update it as needed before starting the daemon. 

Teco

Op 19 feb. 2013, om 17:32 heeft Hans-Christoph Steiner <hans at guardianproject.info> het volgende geschreven:

> 
> For the Mac OS X and GNU/Linux clients, I'm wondering how the olsrd.conf
> should be configured for the default commotionwireless.net profile.  dyn_gw
> only works on the Linux kernel, so that's out on Mac OS X.  arprefresh,
> nameservice, and p2pd seem to only be built on GNU/Linux and Android, so I
> guess they also only work with the Linux kernel.
> 
> For GNU/Linux, there is then the question of how to configure nameservice and
> p2pd.  It looks like 'name' should be unique per-host:
> 
> LoadPlugin ""olsrd_nameservice.so.0.3""
> {
>        PlParam ""name"" ""commotion-7814921""
>        PlParam ""sighup-pid-file"" ""/var/run/dnsmasq.pid""
>        PlParam ""suffix"" "".mesh""
> }
> 
> And with p2pd, it looks like NonOlsrIf needs to be updated based on the
> interface names of the machine that it is currently running on.  Is there a
> way to handle that in the olsrd.conf?  Otherwise I guess that the conf file
> will have to be rewritten based on the network devices on the installed machine.
> 
> LoadPlugin ""olsrd_p2pd.so.0.1.0""
> {
>        PlParam ""NonOlsrIf"" ""eth0""
>        PlParam ""P2pdTtl"" ""5""
>        PlParam ""UdpDestPort"" ""224.0.0.251 5353""
> }
> 
> .hc
> 
> _______________________________________________
> Commotion-dev mailing list
> Commotion-dev at lists.chambana.net
> https://lists.chambana.net/mailman/listinfo/commotion-dev
> 


"
1106,Commotion-dev, olsrd plugin config for GNU/Linux and Mac OS X,"Tue, 19 Feb 2013 19:31:11 +0100",+0100,Teco Boot,"Please post DNSSD on upstream olsrd. Start with own branch. We'll see what happens.

Should mans packets be blocked on mesh interfaces?

Would a (static) ""NonOlsrIf"" ""lo"" work for Avahi? Maybe it needs a 224/4 mroute to lo.

p2pd is for broadcast/multicast packets that have to be flooded, such as MS Groove (hmm, I know). The good thing about Groove: it uses the links to neighbors whenever possible.

Teco

Op 19 feb. 2013, om 18:09 heeft Dan Staples <danstaples at opentechinstitute.org> het volgende geschreven:

> Yes, those both seem to be dynamically determined options that can't
> exactly be hard-coded. One option could be to patch or customize the
> namservice plugin so that it just uses the machine's hostname; that
> would be simple to implement.
> 
> Can anyone shed some light on what we use p2pd for currently? I started
> customizing p2pd for use with service advertisement and discovery, and
> if there aren't any other uses for it, I think we should adopt the DNSSD
> plugin I put together and drop p2pd. It's highly unlikely that DNSSD
> will ever make its way into the official OLSRd code, but I don't see a
> reason why we can't include from our own repo.
> 
> DNSSD uses the same plugin params as p2pd, but with some added options.
> For service advertisement and discovery, we just need to capture any
> outgoing mDNS traffic. I know that on Linux & OpenWRT, Avahi-daemon by
> default sends outgoing advertisements on all local interfaces...so the
> ""NonOlsrIf"" option could really be any non-mesh interface name. I'm not
> sure how mDNS is implemented on Android, but the same principle applies:
> NonOlsrIf should be set to a non-mesh interface used by mDNS.
> 
> If there's a way to determine this in a way that could be coded into the
> DNSSD plugin, that might be a good way to go. Do you think that would be
> possible? Without a way to do that, I suspect the conf file (with p2pd
> or DNSSD) will have to be rewritten based on the network configuration
> of the device.
> 
> On 02/19/2013 11:32 AM, Hans-Christoph Steiner wrote:
"
1107,Commotion-dev, [Compile] Android OLSRD-0.6.5.1,"Wed, 20 Feb 2013 19:13:06 -0800",-0800,Matteo,"Hi all,

I tried to compile the last version OLSRD-0.6.5.1 for Android how you suggested:

make OS=android NDK_BASE=/path/to/your/android-ndk-r8 build_all

I think that it worked fine, but I didn't find the files arranged like in the precompiled version.

Do I have to arrange files into the directories like in the precompiled version or there are any mistakes?
Moreover I didn't find the file ff. Is it necessary? 

Thanks a lot
Matteo
"
1108,Commotion-dev, [Compile] Android OLSRD-0.6.5.1,"Wed, 20 Feb 2013 23:55:38 -0500",-0500,Will Hawkins,"Hello Mateo,

Thanks for your interest in olsrd on Android. See my responses inline. 

On Wednesday, February 20, 2013 22:13 EST, Matteo <matteo.danieletto at gmail.com> wrote: 
 
> Hi all,
> 
> I tried to compile the last version OLSRD-0.6.5.1 for Android how you suggested:
> 
> make OS=android NDK_BASE=/path/to/your/android-ndk-r8 build_all

When you ran this command, did you replace '/path/to/your/android-ndk-r8' with the actual path to your local installation of the Android NDK? 

> 
> I think that it worked fine, but I didn't find the files arranged like in the precompiled version.

Do you mean that you did not find the files in the place where the precompiled version installs them? 

> 
> Do I have to arrange files into the directories like in the precompiled version or there are any mistakes?
> Moreover I didn't find the file ff. Is it necessary? 

I'm sorry that I'm not able to read this from the context of your email, but are you attempting to compile olsrd for Android or the Mesh Tether application for Android? The answer to that will definitely help us debug!

Thanks again for your interest in the project. I hope that we can get you up and running quickly!

Will

> 
> Thanks a lot
> Matteo 
 
 
 


"
1109,Commotion-dev, Is code.commotionwireless.net down again?,"Thu, 21 Feb 2013 13:15:43 -0600",-0600,Ben West,"?

-- 
Ben West
http://gowasabi.net
ben at gowasabi.net
314-246-9434
"
1110,Commotion-dev, Is code.commotionwireless.net down again?,"Thu, 21 Feb 2013 13:18:07 -0600",-0600,Ben West,"Nope, it looks to be back now.  Sorry for cluttering the list.

On Thu, Feb 21, 2013 at 1:15 PM, Ben West <ben at gowasabi.net> wrote:

> ?
>
> --
> Ben West
> http://gowasabi.net
> ben at gowasabi.net
> 314-246-9434
"
1111,Commotion-dev, Need guest to discuss/explain Commotion on The,"Thu, 21 Feb 2013 14:30:40 -0500",-0500,theprimedirective at me.com,"I would like a guest to appear on my Internet radio talk show to explain the Commotion project, 10 PM Easter time on a Friday, or 6 PM on a Sunday of your choosing. If you are interested, please reply by email to ThePrimeDirective at me.com
-- 
Larry Bavry
Editor, ThePrimeDirective.net
Owner, BAVMAR Media LLC

"
1112,Commotion-dev, [OLSRD-Android] Step by Step,"Thu, 21 Feb 2013 12:54:58 -0800",-0800,Matteo,"Hi all,

I have just pushed the olsrd for  Android on my tablets Galaxy tab2 10.1 .

I would like know if I am following  the right steps necessary to run olsrd.

First step:
I configured olsrd.conf with the wifi interface label ""wifi0"" and I modified the ip range.

Second step:
I assigned statically an IP address for each tablet 

Third:
create the adhoc network 
(I don't know how I can do in Android)
In this step I have again problem with wpa_supplicant

Fourth:
launch olsrd 
olsrd -f /data/local/etc/olsrd.conf -d 1

What does -d means?
Are all the necessary steps to launch olsrd?

Have you tried olsrd on Galaxy tab2 10.1?


Thanks a lot
Matteo






"
1113,Commotion-dev, [OLSRD-Android] Step by Step,"Thu, 21 Feb 2013 16:15:46 -0500",-0500,Hans-Christoph Steiner,"
Those are the right steps.  Adhoc mode is essential.  Focus entirely on that
first.  Android 4.x devices are proving quite difficult to get into adhoc mode.

If you are familiar with Debian or GNU/Linux in general, I'd recommend
installing Lil' Debian on your tablet, then using 'iwconfig' or 'iw' to work
more directly on getting adhoc mode.  Once you have Debian setup, you can use
Terminal Emulator on the device, or I find it easier to do 'adb shell' then
run /debian/shell, and do it all from a full size screen and keyboard :)

https://play.google.com/store/search?q=lildebi

.hc

On 02/21/2013 03:54 PM, Matteo wrote:
> Hi all,
> 
> I have just pushed the olsrd for  Android on my tablets Galaxy tab2 10.1 .
> 
> I would like know if I am following  the right steps necessary to run olsrd.
> 
> First step:
> I configured olsrd.conf with the wifi interface label ""wifi0"" and I modified the ip range.
> 
> Second step:
> I assigned statically an IP address for each tablet 
> 
> Third:
> create the adhoc network 
> (I don't know how I can do in Android)
> In this step I have again problem with wpa_supplicant
> 
> Fourth:
> launch olsrd 
> olsrd -f /data/local/etc/olsrd.conf -d 1
> 
> What does -d means?
> Are all the necessary steps to launch olsrd?
> 
> Have you tried olsrd on Galaxy tab2 10.1?
> 
> 
> Thanks a lot
> Matteo
> 
> 
> 
> 
> 
> 
> 
> 
> 
> _______________________________________________
> Commotion-dev mailing list
> Commotion-dev at lists.chambana.net
> https://lists.chambana.net/mailman/listinfo/commotion-dev
> 

"
1114,Commotion-dev, DR1 Quickstart,"Thu, 21 Feb 2013 16:02:11 -0600",-0600,Ben West,"Hi Seamus,

Thank you for writing such a thorough introduction on Quickstart, and
thanks for all your hard work!

I'm working to get compile, working versions of Commotion DR1 /
Quickstart on my end for ar71xx, atheros, and x86.  The latter
platform is to permit simulation of nodes under VirtualBox/VMware.

I see these repository URLs for the Quickstart tool:
https://code.commotionwireless.net/projects/commotion-quick-start/repository
https://code.commotionwireless.net/projects/commotion-quick-start/repository/show?rev=Version02

Likewise this wiki page:
https://code.commotionwireless.net/projects/commotion/wiki/QuickStart

May I pepper you with assorted questions to help started quicker?

1. Does Quickstart depend on a specific revision of OpenWRT 12.09, or
is whatever current revision of Attitude Adjustment so far OK?

2. Does Quickstart still have any lingering dependencies on the
commotionbase, luci-commotion, and luci-theme-commotion packages from
the previous iteration of Commotion-OpenWRT?
https://code.commotionwireless.net/projects/commotion-openwrt/repository/revisions/master/show/commotionfeed/commotionbase
https://code.commotionwireless.net/projects/commotion-openwrt/repository/revisions/master/show/commotionfeed/luci-commotion
https://code.commotionwireless.net/projects/commotion-openwrt/repository/revisions/master/show/commotionfeed/luci-theme-commotion

3. Likewise, is this collectd patch still needed?
https://code.commotionwireless.net/projects/commotion-openwrt/repository/revisions/master/changes/patches/910-fix-out-of-bounds-index.patch

4. Is Quickstart intended to completely replace the meshconfig tool
from the commotionbase package?

5. Does Quickstart have any integration with the luci-splash package, yet?

6. Finally, is the Version02 branch of Quickstart missing a Makefile?
https://code.commotionwireless.net/projects/commotion-quick-start/repository/show?rev=Version02

On Wed, Jan 23, 2013 at 10:24 AM, Seamus Tuohy
<s2e at opentechinstitute.org> wrote:
> Hello All,
>
> A quick update on the quickstart interface I am putting together for
> developer-release one. The quickstart is a ""on first boot"" interface
> that walks a user through customizing a node. This is intended to make
> the initial setup of a node trivial for a new user. The current version
> is missing the ""one-button"" setup. This should be added by the start of
> next week.
>
> Version 001 of this quickstart was a ""mostly"" functional luci interface
> which set the various configuration files on the node. Version 002 (the
> current branch) only configures a nodeConf uci file which the upcoming
> commotion daemon will use to configure the node at the conclusion of the
> quickstart. As such, the current version will spend of its time
> customizing uci files and making ubus calls to the commotion daemon to
> fetch data.
>
> You can find the controlling code at
> https://github.com/opentechinstitute/commotion-quick-start/tree/Version02 .
> If you want to run it you will have to also grab the www directory from
> the main branch at
> https://github.com/opentechinstitute/commotion-quick-start which
> contains the icons, etc.
>
> To put it on a router you simply copy the www folder into the main repo
> directory (I will update the repo later today to include this) and then
> scp it over to the routers root directory recursively. Once you have
> done this you can go to IPADDRESS/cgi-bin/luci/QuickStart to start the
> quickstart.
>
> The whole quickstart configuration can be found in
> /etc/config/quickstart. This contains one ""quickstart"" section titled
> ""options"" and multiple ""page"" sections. ""options"" holds the current and
> last pages as well as a variable that controls weather the Quickstart
> page is accessible. We disable it after completion because it allows
> non-admin users to manipulate root level controls. A ""page"" contains
> title that is either a number (this is how the controller iterates
> through the quickstart) or a title that represents a side page.
>
> Each page has set of title information for its display. The page also
> contains a ""buttonText"" item that specifies the text to be placed on any
> button that links to it in the quickstart. A ""page"" can contain up to
> two lists. The first list is modules. This list pulls content to
> populate the main section. In our quickstart I have separated most pages
> to include only one content section. There is nothing to stop someone
> from customizing a page that holds multiple content items. Modules call
> a <modulename>Renderer function in the controller when the page is
> initially rendered, and a <modulename>Parser function when data from a
> page is submitted. This means that if you want your own module you
> simple add it to a page and create a renderer and a parser function.
> Renderer's send initial variables to the page and parsers process user
> input and send back errors that possible occur in the page.They stack
> quite well. Lastly a ""page"" can contain a button list. Buttons call
> <buttonname>Button functions when pressed that load up side pages.
> noBack and noNext buttons remove the auto-generated last and next
> buttons to allow for specialized pages.
>
> Lastly, when you get to the ""this node will reset page"" on version two
> you will have to refresh your browser, as I have removed the actual
> reset functionality from the quickstart to give more control to the
> daemon. Refreshing the router here will take you to the next page.
>
> We still have a ways to go on ""prettifying"" the quickstart and updating
> the language, and I have yet to implement the ubus calls or to upload
> the patches I have made to take over the captive portal. But, please let
> me know any feedback you may have. I will send the updated ux map and
> language when it finishes our current round of feedback.
>
>
> Thanks
> s2e
>
>
>
> _______________________________________________
> Commotion-dev mailing list
> Commotion-dev at lists.chambana.net
> https://lists.chambana.net/mailman/listinfo/commotion-dev
"
1115,Commotion-dev, DR1 Quickstart,"Thu, 21 Feb 2013 17:26:41 -0500",-0500,Seamus Tuohy,"Hey Ben,

See in-line comments below.

On 02/21/13 17:02, Ben West wrote:
> Hi Seamus,
>
> Thank you for writing such a thorough introduction on Quickstart, and
> thanks for all your hard work!
"
1116,Commotion-dev, [OLSRD-Android] Step by Step,"Thu, 21 Feb 2013 18:02:56 -0500",-0500,Hans-Christoph Steiner,"
I personally have it working on:

 HTC Wildfire running CM
 Google Nexus One running stock 2.3.3
 Motorola Droid running CM7

And sometimes it works on:

 Samsung Galaxy Player 5.0 running stock 2.3.3

There are known issues with most 4.x devices.  There are various approaches to
getting around them, including replacing the kernel and replacing the
wpa_supplicant.  You can find more info in the archives of this list.

.hc

On 02/21/2013 05:53 PM, Matteo wrote:
> Thanks a lot.
> I have just downloaded.
> 
> 
> Now I am trying to use,but there are some problem with cyanogenmod 10.1
> 
> Which are the devices/android that you have tried olsrd?
> 
> Thanks
> Matteo
> On Feb 21, 2013, at 1:15 PM, Hans-Christoph Steiner <hans at guardianproject.info> wrote:
> 
"
1117,Commotion-dev, DR1 Quickstart,"Thu, 21 Feb 2013 18:43:22 -0600",-0600,Ben West,"Hi Saemus,

Thank you for the detailed response.

I do see the commotionDaemon() function here, and it looks like it is
indeed piping hot (i.e. last changes committed w/in hours).
https://code.commotionwireless.net/projects/commotion-quick-start/repository/entry/usr/lib/lua/luci/controller/QS/QS.lua?rev=Version02

Indeed, I'm glad to see Josh has managed to get himself incorporeally
ported into luci.  That's pretty awesome. ;)

   elseif request == 'I NEED A CONFIG JOSH' then
      return nil
   elseif request == 'engage' then
      --TODO incorporate the final ubus add/select sections here
...

Is the Quickstart presently in either the master or Version02 branch OK to
run w/o the commotionDaemon component?  I.e. could one just manually enter
all config via www UI?

Also, do please respond if there is anything I could do to help.

On Thu, Feb 21, 2013 at 4:26 PM, Seamus Tuohy <s2e at opentechinstitute.org>
wrote:
> Hey Ben,
>
> See in-line comments below.
>
>
> On 02/21/13 17:02, Ben West wrote:
"
1118,Commotion-dev, Commotion Mesh Panel's menu,"Thu, 21 Feb 2013 21:11:26 -0500",-0500,Hans-Christoph Steiner,"
I attached a screenshot of the menu of Commotion Mesh Panel for GNOME/MATE.
It shows the active, selected mesh profile, then also all available profiles.
 If one of the available profiles is within range, the signal strength is also
shown in the menu, like NetworkManager does.  The Mac OS X menu will behave
quite similarly.

I'll nail down all the behaviors tomorrow.  But here's the idea:

* clicking on an adhoc wifi in NetworkManager that matches one of the profiles
will trigger
  the mesh association process.  That happens in the nm-dispatcher-olsrd
script, with or
  without the Mesh Panel.

* clicking on an inactive profile in Commotion Mesh Panel will setup that
profile regardless
  of whether there are any other nodes within range or not

* all profiles are in /etc/nm-dispatcher-olsrd. They are added to
NetworkManager any time
  there is a change in network status, which triggers the dispatcher script.
that script
  runs as root and automatically does the work whenever its called by
NetworkManager

* ""Show Mesh Status"" gives a list of nodes like MeshTether's

* ""Save Mesh Status As File..."" saves a complete jsoninfo dump to a file (not
in screenshot,
   but it'll be below ""Show Mesh Status""

Feedback, comments, flames, etc. welcome!

.hc
"
1119,Commotion-dev, Commotion Mesh Panel's menu,"Thu, 21 Feb 2013 21:05:10 -0600",-0600,Ben West,"Hi Hans!

Looks great!

I have an Ubuntu VM guest that had been sitting around not doing much, with
the ultimate goal of letting it serve as a handy testbed for precisely this
application.  That is, I hadn't uploaded the VM file to
code.commotionwireless.net yet, since there wasn't much to with it, until
now.

Could you confirm this is still the active and up-to-date repo for the
Ubuntu/debian commotion package?

https://launchpad.net/~guardianproject/+archive/commotion

On Thu, Feb 21, 2013 at 8:11 PM, Hans-Christoph Steiner <
hans at guardianproject.info> wrote:

>
> I attached a screenshot of the menu of Commotion Mesh Panel for GNOME/MATE.
> It shows the active, selected mesh profile, then also all available
> profiles.
>  If one of the available profiles is within range, the signal strength is
> also
> shown in the menu, like NetworkManager does.  The Mac OS X menu will behave
> quite similarly.
>
> I'll nail down all the behaviors tomorrow.  But here's the idea:
>
> * clicking on an adhoc wifi in NetworkManager that matches one of the
> profiles
> will trigger
>   the mesh association process.  That happens in the nm-dispatcher-olsrd
> script, with or
>   without the Mesh Panel.
>
> * clicking on an inactive profile in Commotion Mesh Panel will setup that
> profile regardless
>   of whether there are any other nodes within range or not
>
> * all profiles are in /etc/nm-dispatcher-olsrd. They are added to
> NetworkManager any time
>   there is a change in network status, which triggers the dispatcher
> script.
> that script
>   runs as root and automatically does the work whenever its called by
> NetworkManager
>
> * ""Show Mesh Status"" gives a list of nodes like MeshTether's
>
> * ""Save Mesh Status As File..."" saves a complete jsoninfo dump to a file
> (not
> in screenshot,
>    but it'll be below ""Show Mesh Status""
>
> Feedback, comments, flames, etc. welcome!
>
> .hc
>
> _______________________________________________
> Commotion-dev mailing list
> Commotion-dev at lists.chambana.net
> https://lists.chambana.net/mailman/listinfo/commotion-dev
>
"
1120,Commotion-dev, Commotion Mesh Panel's menu,"Thu, 21 Feb 2013 23:24:34 -0500",-0500,Hans-Christoph Steiner,"
That's the one! Aka

add-apt-repository ppa:guardianproject/commotion

.hc

On 02/21/2013 10:05 PM, Ben West wrote:
> Hi Hans!
> 
> Looks great!
> 
> I have an Ubuntu VM guest that had been sitting around not doing much, with
> the ultimate goal of letting it serve as a handy testbed for precisely this
> application.  That is, I hadn't uploaded the VM file to
> code.commotionwireless.net yet, since there wasn't much to with it, until
> now.
> 
> Could you confirm this is still the active and up-to-date repo for the
> Ubuntu/debian commotion package?
> 
> https://launchpad.net/~guardianproject/+archive/commotion
> 
> On Thu, Feb 21, 2013 at 8:11 PM, Hans-Christoph Steiner <
> hans at guardianproject.info> wrote:
> 
"
1121,Commotion-dev," Commotion-dev Digest, Vol 22, Issue 27","Fri, 22 Feb 2013 08:27:44 +0000",+0000,Eric de Vries,"
We have it working on the Galaxy Nexus, running a custom CM 10 (thus 4.1.2).
Also the kernel has been tweaked to support wireless extensions (and some other tweaks)...
Just installing CM 10.1 won't work is our experience, some people were of the opinion that adhoc would work out of the box with CM, but when you ask if that's based on first hand experience the answer would be a definite no. We tried and it did not work out of the box (CM 10 that is) on the Galaxy Nexus.


________________________________________
Van: Commotion-dev [commotion-dev-bounces at lists.chambana.net] namens commotion-dev-request at lists.chambana.net [commotion-dev-request at lists.chambana.net]
Verzonden: vrijdag 22 februari 2013 1:43
Aan: commotion-dev at lists.chambana.net
Onderwerp: Commotion-dev Digest, Vol 22, Issue 27

Send Commotion-dev mailing list submissions to
        commotion-dev at lists.chambana.net

To subscribe or unsubscribe via the World Wide Web, visit
        https://lists.chambana.net/mailman/listinfo/commotion-dev
or, via email, send a message with subject or body 'help' to
        commotion-dev-request at lists.chambana.net

You can reach the person managing the list at
        commotion-dev-owner at lists.chambana.net

When replying, please edit your Subject line so it is more specific
than ""Re: Contents of Commotion-dev digest...""


Today's Topics:

   1. Re: [OLSRD-Android] Step by Step (Hans-Christoph Steiner)
   2. Re: DR1 Quickstart (Ben West)


"
1122,Commotion-dev, my failed deploy report,"Fri, 22 Feb 2013 11:39:36 -0500",-0500,seamus tuohy,"Hi Sean,

see comments in-line below.

On 02/16/13 20:43, Sean McIntyre wrote:
> Hey list,
>
> I went out yesterday to set up some NanoStation M2's but overall 
> failed wholly. Wanted to report back on the experience for everybody's 
> benefit. I'm interested to hear if I did anything wrong so I can 
> adjust my techniques for next time.
>
> A major usability field ops feature I would love is the NanoStation M2 
> reset button to do a ""manufacturer reset"" on the firmware. That would 
> have saved me some headaches. Let me know if it actually does that and 
> I'm doing it wrong. (Also let me know if I just volunteered to 
> implement this. ;))

So would we, this is on the hardware level and sadly out of our code 
range. OpenWRT has a hard reset into the default OpenWRT, but until you 
have loaded OpenWRT this functionality is not baked into the router.

>
> Okay, here we go:
>
> Router #1 issue: Could not log in to web interface / unknown password
>
The OpenWRT initial flash does not have a password. Did you try logging 
in without entering a password? That is the only way to get past that 
interface before you have set a password. You can also set the password 
by logging in over telnet.

> Version: ""Powered by LuCI Trunk (trunk+svn8676) CommotionWRT 
> Pre-Release PR3""
>
> It could be a case of forgetfulness, but I became unable access this 
> router via the web interface. The password prompt always failed, 
> despite trying every password I know. ;)
>
> So time to reset! But holding the master reset button (powered on) 
> doesn't seem to have any effect, the configuration doesn't wipe / 
> allow me to set a new password. I reflashed it.
"
1123,Commotion-dev, my failed deploy report,"Fri, 22 Feb 2013 10:52:29 -0600",-0600,Ben West,"Hi All,

Quick notes about putting the Nanosation M2 into tftp (aka recovery mode),
and about bridging the adhoc mesh with a wired LAN, below in green.

On Fri, Feb 22, 2013 at 10:39 AM, seamus tuohy <s2e at opentechinstitute.org>wrote:
>
> It could be a case of forgetfulness, but I became unable access this
> router via the web interface. The password prompt always failed, despite
> trying every password I know. ;)
>
>  So time to reset! But holding the master reset button (powered on)
> doesn't seem to have any effect, the configuration doesn't wipe / allow me
> to set a new password. I reflashed it.
>
>
> The reset button simply re-boots a router. It can also be used to put the
> router into tftp mode or with the right combination into the default
> OpenWRT image. You will have to look at the openwrt site for the
> instructions for various routers.
>
>
To my knowledge, it isn't possible to put a UBNT unit into recovery mode
via the firmware, or at least not via 3rd party firmware.  The best you can
do (besides holding down the reset button manually on power-up), is to use
the larger 1Amp POE adapter that comes with an out-board reset button.
I.e. so that you can put the unit into recovery mode after it has been
mounted at the inconvenient end of a 100m long cable.


>
>   This one has been left outdoors for the last month.
>
>  Luckily I brought a second router with me, so I swapped the device,
> but...
>
>  Router #2 issue: Adding bridge interface between mesh and LAN interfaces
> made device inaccessible over LAN interface
>
> Do be aware that 'bridging' different interfaces in the traditional sense
is not possible under OpenWRT between an adhoc radio and a wired LAN.  This
is an intentional limitation of OpenWRT, although Attitude Adjustment now
includes the 'trelay' package, which could be used to build virtual bridges.

Besides, I think you're referring not to bridging but adjusting firewall
setting so that new incoming connections from the adhoc mesh can reach
devices on a the Nanostation's local LAN.  Allowing all such connections
could definitely be a security concern, so adding means to selectively
whitelist which LAN clients have this connectivity is ideal.


-- 
Ben West
http://gowasabi.net
ben at gowasabi.net
314-246-9434
"
1124,Commotion-dev, my failed deploy report,"Fri, 22 Feb 2013 12:00:18 -0500",-0500,Will Hawkins,"Hi Sean,

On 02/22/2013 11:39 AM, seamus tuohy wrote:
> Hi Sean,
> 
> see comments in-line below.
> 
> On 02/16/13 20:43, Sean McIntyre wrote:
"
1125,Commotion-dev, What would you do with the USB port on your,"Fri, 22 Feb 2013 16:49:49 -0500",-0500,Dan Staples,"That's an interesting (and complicated) idea! :)

Would the risk of relying on a single node for entropy outweigh the 
limitations of having individual nodes generate their own keys with 
less-than-ideal entropy?

On Mon 11 Feb 2013 11:16:55 PM EST, Ben West wrote:
> Leading on Josh's excellent suggestion for attaching an entropy key to
> an access point's spare USB port (whether TP-Link, Buffalo, or some
> other USB capable device), what are thoughts about using a /single/
> such entropy key within a mesh to improve the entire mesh's encryption
> strength?
>
> That is, imagine a mesh which begins with no encryption (whether
> IBSS-RSN on the adhoc or WPA2 on the virtual APs).  Now, add a single
> TP-Link box with the entropy key to the mesh.  Next, systematically
> use the output of that key to regenerate the DSA hostkeys of all nodes
> w/in the mesh (administered via SSH sessions).  Then turn on IBSS-RSN
> on the adhoc mesh, along with WPA2 on all nodes' virtual access
> points, again using the output of the entropy key.  Next, have all
> nodes regenerate their hostkeys /again/, and the iterate so forth
> until an appealing degree encryption has been reached.  At this point,
> the nodes then could mutually adhere to a regular schedule of renewing
> their WPA2 and RSN keys.
>
> Whenever an event occurs where the mesh's security have been deemed
> compromised (e.g. an unknown MAC address joins the IBSS-RSN encrypted
> mesh), all mesh users could be alerted of this event, the mesh could
> switch to 'insecure' mode, and this process of renewing all keys could
> start from scratch.
>
> Such a scheme would still have the fundamental weakness that having an
> ""untrusted"" node within the mesh at t = 0 undermines any subsequent
> effort at maintaining security via encryption, and really this
> limitation is going to be inherent to the social nature of a community
> mesh.  However, could an automated, mesh-wide process of repeatedly
> renewing nodes' encryption keys using the output of a single device
> like the entropy key still yield a usable degree of encryption?
>
> On Wed, Jan 23, 2013 at 8:22 AM, Josh King <jking at chambana.net
> <mailto:jking at chambana.net"
1126,Commotion-dev, What would you do with the USB port on your,"Fri, 22 Feb 2013 16:56:40 -0500",-0500,Josh King,"Speaking of entropy, saw this not too long ago, it'll be interesting to 
see if it could help with some of our entropy problems:

http://www.phoronix.com/scan.php?page=news_item&px=MTI5NzY

On Fri 22 Feb 2013 04:49:49 PM EST, Dan Staples wrote:
> That's an interesting (and complicated) idea! :)
>
> Would the risk of relying on a single node for entropy outweigh the
> limitations of having individual nodes generate their own keys with
> less-than-ideal entropy?
>
> On Mon 11 Feb 2013 11:16:55 PM EST, Ben West wrote:
"
1127,Commotion-dev, Serval Mesh Helper Device / ISM long-range,"Sat, 23 Feb 2013 11:20:22 -0600",-0600,Ben West,"Hi Paul,

Thank you for your detailed response about the UBNT M900 units, and my
apologies for the delay in posing follow-up comments questions.

I've had off-and-on curiosity about radios like the M900 products, i.e.
mount a Nanostation M2 and Nanostation Loco M900 on the same mast, with the
Loco powered by the M2's secondary POE port and providing backhaul for NLOS
situations.

I am assuming the 915MHz radios have better ability to handle NLOS than
2.4GHz and 5.8GHz radios.  That is, in a environment where you can't mount
radios very high above the ground (10-15m max) and where there is lots of
ground clutter (trees, buildings), would the M900 perform better?  This is
the very benefit being touted for the nascent 700MHz TV White Space radios
here in the US, and so I'm curious if the 915MHz band might also have some
of that same inherent benefit over the GHz ISM bands, although to a lesser
degree.

Nevertheless, casual snooping around forum.ubnt.com suggests that the
maximum real throughput anyone is getting from the M900 radios in P2P
installations (using stock firmware) is only the order of 10Mbit/s.

Finally, addressing your comment below, I'm not sure the M900 units would
have that much higher power consumption compared to their M2 and M5
brethren.  Even 1Watt TX power is almost an order of magnitude less than
the AP's overall power consumption.  Indeed, UBNT claims 6.5W max power for
the Loco M900 compared to 5.5W for the Loco M2/M5.

On Thu, Feb 7, 2013 at 2:22 PM, Paul Gardner-Stephen <paul at servalproject.org
> wrote:

> Hello,
>
> On Fri, Feb 8, 2013 at 1:16 AM, Ben West <ben at gowasabi.net> wrote:
> > Likewise, Ubiquiti also sells 900MHz versions of their Nanostation and
> > Bullet access points.  I understanding these units essentially just have
> > 2.4/5.8GHz chipsets that have been translated to a different band, and
> with
> > some consequent penalty in spectral efficiency.
> >
> > E.g.
> > http://www.wirelessnetworkproducts.com/locom900.aspx
>
> These sorts of units are quite interesting.  The range is in part due
> to the +7.5db gain on the directional antennae at each end, and
> perhaps more importantly, the front-to-back ratio that this affords to
> help reject interference.  If they have done the band translation
> ""right"", then the spectral efficiency could well be better rather than
> worse, as 900MHz has substantially better propagation characteristics,
> and over typical distances yields about +9db compared with similar
> 2.4GHz transmissions.
>
> 900MHz NanoStations and similar would be a useful addition to a
> Commotion network, and you (or we) may wish to obtain some to test
> out, but there are a few caveats, some common to all 900MHz
> communications, and some specific to a NanoStation type product:
>
> 1. The ISM 915 band is only available in the Americas, Australia, New
> Zealand, Israel and a few other countries.
> 2. The regulations on the use of this band, and its frequency range
> vary substantially even among those countries. For example the US
> requires 50 channels in the hopping scheme, while Australia requires
> only 20, but the band in the US is almost twice as wide.
> 3. The power consumption of the unit will be relatively high if
> transmitting at 1W.  This is perhaps more an issue for Serval-inspired
> use-cases where mains power is assumed to be absent.
> 4. The higher bit-rates that the unit will use (compared to what we
> are experimenting with) will reduce the maximum range that can be
> achieved.
>
> This is why we are looking at a solution where the radio is field
> replaceable with one that is legal wherever the unit is to be used. It
> is also why we are looking at a hand-held portable device that you
> just shove in your other pocket, and any phone within WiFi range can
> make use of it.
>
> > I would like to assume OpenWRT and derivatives will run w/o complaint on
> > such 900MHz units, but I'm guessing it's not that simple.
>
> I imagine that it shouldn't be hard to put OpenWRT on the 900MHz
> NanoStations.
>
> Paul.
>
> > On Wed, Feb 6, 2013 at 11:00 PM, Paul Gardner-Stephen
> > <paul at servalproject.org> wrote:
> "
1128,Commotion-dev, DR1 Quickstart,"Sat, 23 Feb 2013 17:43:05 +0000",+0000,seamus tuohy,"Hello,

See below:

On 02/22/13 00:43, Ben West wrote:
> Hi Saemus,
>
> Thank you for the detailed response.
>
> I do see the commotionDaemon() function here, and it looks like it is
> indeed piping hot (i.e. last changes committed w/in hours).
> https://code.commotionwireless.net/projects/commotion-quick-start/repository/entry/usr/lib/lua/luci/controller/QS/QS.lua?rev=Version02
>
> Indeed, I'm glad to see Josh has managed to get himself incorporeally
> ported into luci.  That's pretty awesome. ;)
>
>    elseif request == 'I NEED A CONFIG JOSH' then
>       return nil
>    elseif request == 'engage' then
>       --TODO incorporate the final ubus add/select sections here
> ...
"
1129,Commotion-dev, Best linux GUI framework?,"Sat, 23 Feb 2013 13:24:32 -0500",-0500,Dan Staples,"I'd like to create a very simple GUI program for the Commotion-OpenBTS
live image that will ask the user what type of radio hardware they are
using on first boot, and will then configure and install the proper
transceiver driver. I've got a shell script that will do that now, but
in order to make it easier and more familiar for non-technical users, I
thought a point-and-click GUI would be better than an interactive
terminal script.

>From my initial research, I've narrowed it down to Qt and wxWidgets. Any
suggestions either way? It looks like they both have Python bindings,
which I figured I'd use to make things easier for myself.

Dan

-- 
Dan Staples

Open Technology Institute
https://commotionwireless.net

"
1130,Commotion-dev, Serval Mesh Helper Device / ISM long-range,"Sun, 24 Feb 2013 18:00:24 +1300",+1300,Paul Gardner-Stephen,"Hello Ben,

On Sun, Feb 24, 2013 at 6:20 AM, Ben West <ben at gowasabi.net> wrote:
> Hi Paul,
>
> Thank you for your detailed response about the UBNT M900 units, and my
> apologies for the delay in posing follow-up comments questions.
>
> I've had off-and-on curiosity about radios like the M900 products, i.e.
> mount a Nanostation M2 and Nanostation Loco M900 on the same mast, with the
> Loco powered by the M2's secondary POE port and providing backhaul for NLOS
> situations.
>
> I am assuming the 915MHz radios have better ability to handle NLOS than
> 2.4GHz and 5.8GHz radios.  That is, in a environment where you can't mount
> radios very high above the ground (10-15m max) and where there is lots of
> ground clutter (trees, buildings), would the M900 perform better?  This is
> the very benefit being touted for the nascent 700MHz TV White Space radios
> here in the US, and so I'm curious if the 915MHz band might also have some
> of that same inherent benefit over the GHz ISM bands, although to a lesser
> degree.

Talking with one of the radio guys here at KiwiEx:

1. 700MHz, 915MHz, 2.4GHz and 5.8GHz bands will all be primarily LOS.
2. Lower frequencies perform better than high frequencies, but 700MHz
is still too high to get real bending.  You need sub 50MHz or so to
get serious bending.
3. The performance difference between 700MHz & 915MHz will not be
great, for equivalent power.
4. The performance of <1GHz vs >2GHz in the face of ground clutter
will potentially be significant due to the difference in wave length.
5. Power/antennae will always make a difference.

> Nevertheless, casual snooping around forum.ubnt.com suggests that the
> maximum real throughput anyone is getting from the M900 radios in P2P
> installations (using stock firmware) is only the order of 10Mbit/s.

Yes, data rates tend to be much lower, in part due to the licensing regulations.
However, for carefully thought out networks (and this does not
necessarily mean IP networks), then even a low bit rate link can be
useful.  For example, we are pushing data over links with effective
link speeds of about 48kbits.

> Finally, addressing your comment below, I'm not sure the M900 units would
> have that much higher power consumption compared to their M2 and M5
> brethren.  Even 1Watt TX power is almost an order of magnitude less than the
> AP's overall power consumption.  Indeed, UBNT claims 6.5W max power for the
> Loco M900 compared to 5.5W for the Loco M2/M5.

Our 915MHz radios consume 4W @ 1W TX, but of course the transmit duty
cycle will be <=50%, so 2W is the realistic maximum average
consumption.  A small WiFi router like the WR703N consumes about 0.3W
by our estimates.  With power scaling, we expect average power
consumption <1W, and possibly around 0.4W -- low enough to run from a
mobile-phone sized package for a couple of days or so.

Paul.

>
> On Thu, Feb 7, 2013 at 2:22 PM, Paul Gardner-Stephen
> <paul at servalproject.org> wrote:
"
1131,Commotion-dev, Problem create/join adhoc network,"Mon, 25 Feb 2013 00:27:35 -0800",-0800,Matteo Danieletto,"Hi all,

I have for my test both galaxy tab 10.1 and galaxy tab 7.0.
I would like to use olsrd for my project/App, but I cannot create/join with
an adhoc network.

I tried to install even lil' debi, but I didn't understand how I could
exploit it to join an adhoc network.

I tried to substitute the wpa_supplicant with more 4/5 files, but nothing.
Do you have any suggestions? Can you suggest which are the devices that
work in ad hoc mode and olsrd?


Thank a lot
Cheers
Matteo
"
1132,Commotion-dev, commotiond daemon,"Mon, 25 Feb 2013 11:14:44 -0500",-0500,Josh King,"Hey all,

I just posted the initial framework for the embedded daemon and library
I've been writing. It's called commotiond, and you can find it on my github:

https://github.com/jheretic/commotiond

It doesn't do a whole lot right now and I'm rapidly adding to it, but
the idea is that it is an event-driven socket server that manages
configuration profiles and settings for connecting to a wide variety of
different networks, and will replace in the imminent DR1 release the set
of bash libraries and scripts that currently comprise most of
Commotion's automation and configuration functionality on the OpenWRT
platform. Eventually, I hope that it will support a unified and
comprehensive API for managing community wireless mesh networks. What's
in github right now is just the initial socket server, client, and
supporting library themselves, which include a variety of tools for
managing profiles, network sockets, and processes, but the actual
commands bringing it together are still being created. I think it's
pretty cleanly written, but I'll be posting a bunch of Doxygen docs for
it as well over the next day.
-- 
Josh King

""I am an Anarchist not because I believe Anarchism is the final goal,
but because there is no such thing as a final goal."" -Rudolf Rocker

"
1133,Commotion-dev, Problem create/join adhoc network,"Mon, 25 Feb 2013 13:20:28 -0500",-0500,Hans of Guardian,"
Any Android device will run olsrd, the question is really which devices support adhoc mode.  If you want to find an Android device that supports adhoc mode, the safest bet is to use an HTC device that runs Android 2.x.  As far as I have heard, no one has gotten a stock Android 4.x device to do adhoc, but you can get it working on Android 4.x by installing a custom kernel.

As for Lil' Debi, you can use the same command line tools to setup adhoc mode as you would any Debian/Ubuntu/etc. box.  If you are not familiar with those commands (iwconfig, iw, etc), you can learn about them following Ubuntu, Fedora, etc. tutorials and it will apply to Lil' Debi on Android.

.hc

On Feb 25, 2013, at 3:27 AM, Matteo Danieletto wrote:

> Hi all,
> 
> I have for my test both galaxy tab 10.1 and galaxy tab 7.0.
> I would like to use olsrd for my project/App, but I cannot create/join with an adhoc network.
> 
> I tried to install even lil' debi, but I didn't understand how I could exploit it to join an adhoc network.
> 
> I tried to substitute the wpa_supplicant with more 4/5 files, but nothing.
> Do you have any suggestions? Can you suggest which are the devices that work in ad hoc mode and olsrd?
> 
> 
> Thank a lot
> Cheers
> Matteo
> _______________________________________________
> Commotion-dev mailing list
> Commotion-dev at lists.chambana.net
> https://lists.chambana.net/mailman/listinfo/commotion-dev

"
1134,Commotion-dev, Warning Label Development,"Mon, 25 Feb 2013 14:28:16 -0500",-0500,Dan Staples,"We just posted two blog posts on the Commotion website about the process
of developing warning labels for Commotion, written by Seamus Tuohy. You
can see the warning label on the Commotion Download page.

https://commotionwireless.net/blog/warning-label-development-part-1
https://commotionwireless.net/blog/warning-label-development-part-2

-- 
Dan Staples

Open Technology Institute
https://commotionwireless.net

"
1135,Commotion-dev, Looking for blog editors,"Tue, 26 Feb 2013 09:58:29 -0500",-0500,Dan Staples,"The Commotion blog <https://commotionwireless.net/blog> is a place for
developers, tinkerers, and users of Commotion to talk about what they're
working on and what's interesting to them in the world of mesh
networking. We are currently looking for volunteers to help us edit the
Commotion blog. This would include reviewing and editing content to be
published. If you would be able to help out with this, please let us know!

thanks,
Dan

-- 
Dan Staples

Open Technology Institute
https://commotionwireless.net

"
1136,Commotion-dev, DR1 Quickstart,"Tue, 26 Feb 2013 11:06:44 -0500",-0500,Andrew Reynolds,"Ben,

Did you ever get an answer to this?

Both master and Version02 should work for now, since Seamus has not yet
begun hooking it up to commotiond. Use Version02 if you can. It's a
whole different beast than master.

I'm about to redo the quickstart template to improve the language and
take advantage of the new OpenWRT theme.

-andrew

On 02/21/2013 07:43 PM, Ben West wrote:
> Hi Saemus,
> 
> Thank you for the detailed response.
> 
> I do see the commotionDaemon() function here, and it looks like it is
> indeed piping hot (i.e. last changes committed w/in hours).
> https://code.commotionwireless.net/projects/commotion-quick-start/repository/entry/usr/lib/lua/luci/controller/QS/QS.lua?rev=Version02
> 
> Indeed, I'm glad to see Josh has managed to get himself incorporeally
> ported into luci.  That's pretty awesome. ;)
> 
>    elseif request == 'I NEED A CONFIG JOSH' then
>       return nil
>    elseif request == 'engage' then
>       --TODO incorporate the final ubus add/select sections here
> ...
> 
> Is the Quickstart presently in either the master or Version02 branch OK to
> run w/o the commotionDaemon component?  I.e. could one just manually enter
> all config via www UI?
> 
> Also, do please respond if there is anything I could do to help.
> 
> On Thu, Feb 21, 2013 at 4:26 PM, Seamus Tuohy <s2e at opentechinstitute.org>
> wrote:
"
1137,Commotion-dev, first test version of NetworkManager,"Tue, 26 Feb 2013 12:12:06 -0500",-0500,Dan Staples,"I suppose it's all dependent upon the wireless driver supporting ad-hoc.
We've had enormous difficulty getting our Asus netbooks to do ad-hoc.

Will this network manager also ethernet interfaces to join a mesh? How
about if the computer has multiple wireless interfaces, such as a USB
wireless device?

And I think at the moment we only have the commotionwireless.net profile
to work from.

On 02/18/2013 10:55 PM, Hans-Christoph Steiner wrote:
> I'm pretty sure I figured out the Ubuntu/quantal issue: that machine has a
> binary blob wifi driver that does not handle adhoc well at all...  hopefully
> this is not a common scenario.
>
> .hc
>
> On 02/18/2013 09:48 PM, Hans-Christoph Steiner wrote:
"
1138,Commotion-dev, olsrd plugin config for GNU/Linux and Mac OS X,"Tue, 26 Feb 2013 12:19:21 -0500",-0500,Dan Staples,"I haven't been able to capture traffic on the loopback interface for
dnssd/p2pd...It seems like Avahi won't use it for advertising. Not sure why.

Also, Hans-Christoph, the new Commotion daemon that Josh K just released
will start up olsrd with the correct interfaces and configuration based
on the device, so it may solve your problem. You should ask him for more
specifics.

On 02/19/2013 01:31 PM, Teco Boot wrote:
> Please post DNSSD on upstream olsrd. Start with own branch. We'll see what happens.
>
> Should mans packets be blocked on mesh interfaces?
>
> Would a (static) ""NonOlsrIf"" ""lo"" work for Avahi? Maybe it needs a 224/4 mroute to lo.
>
> p2pd is for broadcast/multicast packets that have to be flooded, such as MS Groove (hmm, I know). The good thing about Groove: it uses the links to neighbors whenever possible.
>
> Teco
>
> Op 19 feb. 2013, om 18:09 heeft Dan Staples <danstaples at opentechinstitute.org> het volgende geschreven:
>
"
1139,Commotion-dev, first test version of NetworkManager,"Tue, 26 Feb 2013 11:33:07 -0600",-0600,Ben West,"Hi All,

W/r/t to driver support for adhoc + multiple VAPs, I've been fiddling with
an Ubuntu VM guest and a TP-Link TL-WN722N USB radio.  I've been able to
get the TP-Link to broadcast the adhoc mesh + public VAP using
Commotion-OpenWRT as a VM guest, so maybe Ubuntu can be coaxed similarly.

However, considering that the known working ath9k driver for TP-Link is
from compat-wireless-2012-0907 and newer, it could also be that the driver
provided even with Ubuntu Quantal is still too old.

On Tue, Feb 26, 2013 at 11:12 AM, Dan Staples <
danstaples at opentechinstitute.org> wrote:

> I suppose it's all dependent upon the wireless driver supporting ad-hoc.
> We've had enormous difficulty getting our Asus netbooks to do ad-hoc.
>
> Will this network manager also ethernet interfaces to join a mesh? How
> about if the computer has multiple wireless interfaces, such as a USB
> wireless device?
>
> And I think at the moment we only have the commotionwireless.net profile
> to work from.
>
> On 02/18/2013 10:55 PM, Hans-Christoph Steiner wrote:
> > I'm pretty sure I figured out the Ubuntu/quantal issue: that machine has
> a
> > binary blob wifi driver that does not handle adhoc well at all...
>  hopefully
> > this is not a common scenario.
> >
> > .hc
> >
> > On 02/18/2013 09:48 PM, Hans-Christoph Steiner wrote:
> "
1140,Commotion-dev, DR1 Quickstart,"Tue, 26 Feb 2013 11:36:31 -0600",-0600,Ben West,"Hi Andrew,

Thanks for following up, and yes, I've been playing around with the
Version02 branch.

I guess I didn't yet get a firm answer on this question, although naturally
I understand everything here is still a moving target:

- In the absence of a working commotiond, can you configure a node fully
via Quickstart, if you simply paste all needed config values into the www
UI?

On Tue, Feb 26, 2013 at 10:06 AM, Andrew Reynolds <
andrew at opentechinstitute.org> wrote:

> Ben,
>
> Did you ever get an answer to this?
>
> Both master and Version02 should work for now, since Seamus has not yet
> begun hooking it up to commotiond. Use Version02 if you can. It's a
> whole different beast than master.
>
> I'm about to redo the quickstart template to improve the language and
> take advantage of the new OpenWRT theme.
>
> -andrew
>
> On 02/21/2013 07:43 PM, Ben West wrote:
> > Hi Saemus,
> >
> > Thank you for the detailed response.
> >
> > I do see the commotionDaemon() function here, and it looks like it is
> > indeed piping hot (i.e. last changes committed w/in hours).
> >
> https://code.commotionwireless.net/projects/commotion-quick-start/repository/entry/usr/lib/lua/luci/controller/QS/QS.lua?rev=Version02
> >
> > Indeed, I'm glad to see Josh has managed to get himself incorporeally
> > ported into luci.  That's pretty awesome. ;)
> >
> >    elseif request == 'I NEED A CONFIG JOSH' then
> >       return nil
> >    elseif request == 'engage' then
> >       --TODO incorporate the final ubus add/select sections here
> > ...
> >
> > Is the Quickstart presently in either the master or Version02 branch OK
> to
> > run w/o the commotionDaemon component?  I.e. could one just manually
> enter
> > all config via www UI?
> >
> > Also, do please respond if there is anything I could do to help.
> >
> > On Thu, Feb 21, 2013 at 4:26 PM, Seamus Tuohy <s2e at opentechinstitute.org
> >
> > wrote:
> "
1141,Commotion-dev, DR1 Quickstart,"Tue, 26 Feb 2013 12:48:49 -0500",-0500,Andrew Reynolds,"For the most part, yes. Last I looked, I think the service sharing
screen was the only screen that was pure mockup.


On 02/26/2013 12:36 PM, Ben West wrote:
> Hi Andrew,
> 
> Thanks for following up, and yes, I've been playing around with the
> Version02 branch.
> 
> I guess I didn't yet get a firm answer on this question, although naturally
> I understand everything here is still a moving target:
> 
> - In the absence of a working commotiond, can you configure a node fully
> via Quickstart, if you simply paste all needed config values into the www
> UI?
> 
> On Tue, Feb 26, 2013 at 10:06 AM, Andrew Reynolds <
> andrew at opentechinstitute.org> wrote:
> 
"
1142,Commotion-dev, first test version of NetworkManager,"Tue, 26 Feb 2013 13:02:32 -0500",-0500,Hans-Christoph Steiner,"
It only handles wifi devices.  The dispatcher script/dbus approach used here
would not really handle the complexity of also meshing over ethernet well.
That should wait until there is actual work on the core of NetworkManager to
support mesh plugins.

.hc



On 02/26/2013 12:12 PM, Dan Staples wrote:
> I suppose it's all dependent upon the wireless driver supporting ad-hoc.
> We've had enormous difficulty getting our Asus netbooks to do ad-hoc.
> 
> Will this network manager also ethernet interfaces to join a mesh? How
> about if the computer has multiple wireless interfaces, such as a USB
> wireless device?
> 
> And I think at the moment we only have the commotionwireless.net profile
> to work from.
> 
> On 02/18/2013 10:55 PM, Hans-Christoph Steiner wrote:
"
1143,Commotion-dev, first test version of NetworkManager,"Tue, 26 Feb 2013 13:06:09 -0500",-0500,Hans-Christoph Steiner,"
The issue that I had on Ubuntu/quantal was really related to the wifi driver
(broadcom binary blob wl.o).  I suspect that basically all issues with adhoc
are going to be related to flaky or bad wifi drivers or hardware.

I forgot to mention: the nm-dispatcher-olsrd script has no awareness of
whether a wifi device is USB, built-in, or whatever.  It just handles wifi as
wifi.  I haven't tested it on setups with multiple wifi devices, but I tried
to make the code work in that situation.

.hc

On 02/26/2013 12:33 PM, Ben West wrote:
> Hi All,
> 
> W/r/t to driver support for adhoc + multiple VAPs, I've been fiddling with
> an Ubuntu VM guest and a TP-Link TL-WN722N USB radio.  I've been able to
> get the TP-Link to broadcast the adhoc mesh + public VAP using
> Commotion-OpenWRT as a VM guest, so maybe Ubuntu can be coaxed similarly.
> 
> However, considering that the known working ath9k driver for TP-Link is
> from compat-wireless-2012-0907 and newer, it could also be that the driver
> provided even with Ubuntu Quantal is still too old.
> 
> On Tue, Feb 26, 2013 at 11:12 AM, Dan Staples <
> danstaples at opentechinstitute.org> wrote:
> 
"
1144,Commotion-dev, Best linux GUI framework?,"Tue, 26 Feb 2013 13:24:54 -0500",-0500,Hans-Christoph Steiner,"
It really depends a lot on what platforms you aim to support.  Qt will feed
native on KDE, close to native on GNOME and Windows, and not so native on Mac
OS X.  GTK will feel native on GNOME, XFCE, and derivs, close to native on
GNOME and Windows, and like an odd transplant on Mac OS X. wx will be close to
native on GNOME, KDE, Windows and not so native on Mac OS X.

For what its worth, I'm using pygtk for the Commotion Mesh Panel.

.hc

On 02/23/2013 01:24 PM, Dan Staples wrote:
> I'd like to create a very simple GUI program for the Commotion-OpenBTS
> live image that will ask the user what type of radio hardware they are
> using on first boot, and will then configure and install the proper
> transceiver driver. I've got a shell script that will do that now, but
> in order to make it easier and more familiar for non-technical users, I
> thought a point-and-click GUI would be better than an interactive
> terminal script.
> 
> From my initial research, I've narrowed it down to Qt and wxWidgets. Any
> suggestions either way? It looks like they both have Python bindings,
> which I figured I'd use to make things easier for myself.
> 
> Dan
> 
"
1145,Commotion-dev, olsrd plugin config for GNU/Linux and Mac OS X,"Tue, 26 Feb 2013 13:31:19 -0500",-0500,The Doctor,
1146,Commotion-dev, olsrd plugin config for GNU/Linux and Mac OS X,"Tue, 26 Feb 2013 13:33:39 -0500",-0500,Dan Staples,"I had previously tried specifying lo with the allow-interfaces 
directive, but wireshark still showed no mDNS traffic on the loopback 
interface. It could be I'm overlooking something....

On Tue 26 Feb 2013 01:31:19 PM EST, The Doctor wrote:
> ********* *BEGIN ENCRYPTED or SIGNED PART* *********
>
> On 02/26/2013 12:19 PM, Dan Staples wrote:
"
1147,Commotion-dev, DR1 Quickstart,"Tue, 26 Feb 2013 14:02:02 -0500",-0500,seamus tuohy,"On 02/26/2013 12:36 PM, Ben West wrote:
> Hi Andrew,
>
> Thanks for following up, and yes, I've been playing around with the 
> Version02 branch.
>
> I guess I didn't yet get a firm answer on this question, although 
> naturally I understand everything here is still a moving target:
>
> - In the absence of a working commotiond, can you configure a node 
> fully via Quickstart, if you simply paste all needed config values 
> into the www UI?

Nope, not without custom uci calls. The CBI system does not support 
stacking or procedurally generated uci maps. To compensate for this I 
integrated the appropriate UCI calls into each modules ""parsing"" 
function if it is desired. We have pushed most of this over to the 
daemon in the current version.

Many custom uci calls for modifying the various aspects of the node 
exist further back in the repo. You can look at the set_uci function at 
commit 79c23225c259e1adb296d620d7c2b27b83363c55 ""finalized alpha demo 
version of the Quickstart wizard"" for an example of how I handled that. 
Please forgive the abhorrent case statement structure I cobbled together 
to handle this.

Version 003 will build upon version 001 to allow for mini-quickstarts 
for individual luci pages. This will abandon the case-statement style of 
version one and use a uci modification template much like the cbi 
system, but with a greater ability for customization on the fly. This 
will also allow us to start to build up a cohesive set of functions for 
various uci files. This will be after DR1 is released and tested though.

s2e

>
> On Tue, Feb 26, 2013 at 10:06 AM, Andrew Reynolds 
> <andrew at opentechinstitute.org <mailto:andrew at opentechinstitute.org"
1148,Commotion-dev, olsrd plugin config for GNU/Linux and Mac OS X,"Tue, 26 Feb 2013 20:03:29 +0100",+0100,Teco Boot,"
Op 26 feb. 2013, om 18:19 heeft Dan Staples het volgende geschreven:

> I haven't been able to capture traffic on the loopback interface for
> dnssd/p2pd...It seems like Avahi won't use it for advertising. Not sure why.

Linux?
Maybe check your 224/4 route. Or add a non-loopback IP address on lo. I'll check p2pd on Android tomorrow.

Teco

> 
> Also, Hans-Christoph, the new Commotion daemon that Josh K just released
> will start up olsrd with the correct interfaces and configuration based
> on the device, so it may solve your problem. You should ask him for more
> specifics.
> 
> On 02/19/2013 01:31 PM, Teco Boot wrote:
"
1149,Commotion-dev, DR1 Quickstart,"Tue, 26 Feb 2013 14:05:37 -0500",-0500,seamus tuohy,"On 02/26/2013 12:48 PM, Andrew Reynolds wrote:
> For the most part, yes. Last I looked, I think the service sharing
> screen was the only screen that was pure mockup.
"
1150,Commotion-dev, DR1 Quickstart,"Tue, 26 Feb 2013 14:07:16 -0500",-0500,Andrew Reynolds,"Yeah, I forgot I was using the master branch in our DR1 build tests.

On 02/26/2013 02:05 PM, seamus tuohy wrote:
> On 02/26/2013 12:48 PM, Andrew Reynolds wrote:
"
1151,Commotion-dev, commotion mesh applet - first test package,"Tue, 26 Feb 2013 23:01:45 -0500",-0500,Hans-Christoph Steiner,"
Wow, building a panel applet is quite a project these days because there is a
different API for each environment: GNOME2, GNOME3, MATE, Xfce, Cinnamon, KDE,
OpenBox, etc.

I have this applet working well on my MATE laptop, but not yet working on
GNOME3.  It should work on GNOME2 (i.e. Debian squeeze), and my guess is Xfce
will not be much work.  I don't know about Cinnamon, KDE, OpenBox, whatever
else...  patches welcome!

Here is the code:
https://github.com/eighthave/commotion-mesh-applet

And here are the Ubuntu packages:
https://launchpad.net/~guardianproject/+archive/commotion/+packages

Or:
sudo add-apt-repository ppa:guardianproject/commotion
  (fingerprint: F50E ADDD 2234 F563)
sudo apt-get install commotion-mesh-applet

.hc

"
1152,Commotion-dev, other potential approaches to adhoc on Android 4.x,"Thu, 28 Feb 2013 14:03:29 -0500",-0500,Hans-Christoph Steiner,"
I was checking in with the Google crew about official Adhoc support in
Android, and got this trove of interesting information, which Lucas said I
could forward:

"
1153,Commotion-dev, other potential approaches to adhoc on Android,"Thu, 28 Feb 2013 14:11:18 -0500",-0500,Josh King,"Hey Hans,

Thanks for forwarding that along, that's very interesting and way more
positive than I expected. Do you know what the best avenue is to get
involved with the effort to 'bring engineering muscle to the problem'?

On 02/28/2013 02:03 PM, Hans-Christoph Steiner wrote:
> 
> I was checking in with the Google crew about official Adhoc support in
> Android, and got this trove of interesting information, which Lucas said I
> could forward:
> 
> "
1154,Commotion-dev, other potential approaches to adhoc on Android,"Thu, 28 Feb 2013 15:21:39 -0500",-0500,Hans-Christoph Steiner,"
At this point, they know we are ready, willing, and able.  They just need to
figure out if and how they can use outside devs.

.hc

On 02/28/2013 02:11 PM, Josh King wrote:
> Hey Hans,
> 
> Thanks for forwarding that along, that's very interesting and way more
> positive than I expected. Do you know what the best avenue is to get
> involved with the effort to 'bring engineering muscle to the problem'?
> 
> On 02/28/2013 02:03 PM, Hans-Christoph Steiner wrote:
"
1155,Commotion-dev, Problem create/join adhoc network,"Thu, 28 Feb 2013 15:28:59 -0500",-0500,Hans-Christoph Steiner,"
Here's someone who claims success with adhoc on Galaxy Tab 10.1 using a custom
wpa_supplicant:
http://androidtablethacks.com/android-tablet-hacks/how-to-enable-adhoc-wifi-on-android-tablets/

Here's someone doing it on another 4.x tablet:
http://forum.xda-developers.com/showthread.php?t=2163363

I'd be very curious to here whether this works.  If it does, that means we
could support some 4.x devices without modifying them by including our own
wpa_supplicant in MeshTether.

.hc

On 02/25/2013 01:20 PM, Hans of Guardian wrote:
> 
> Any Android device will run olsrd, the question is really which devices support adhoc mode.  If you want to find an Android device that supports adhoc mode, the safest bet is to use an HTC device that runs Android 2.x.  As far as I have heard, no one has gotten a stock Android 4.x device to do adhoc, but you can get it working on Android 4.x by installing a custom kernel.
> 
> As for Lil' Debi, you can use the same command line tools to setup adhoc mode as you would any Debian/Ubuntu/etc. box.  If you are not familiar with those commands (iwconfig, iw, etc), you can learn about them following Ubuntu, Fedora, etc. tutorials and it will apply to Lil' Debi on Android.
> 
> .hc
> 
> On Feb 25, 2013, at 3:27 AM, Matteo Danieletto wrote:
> 
"
1156,Commotion-dev, other potential approaches to adhoc on Android,"Thu, 28 Feb 2013 16:00:04 -0500",-0500,Will Hawkins,
1157,Commotion-dev, commotion mesh applet - first test package,"Thu, 28 Feb 2013 19:12:07 -0500",-0500,Hans-Christoph Steiner,"
Ok, I found an approach that is working on GNOME 3, GNOME 3 Classic, Cinnamon,
and MATE.  Those are the environments I have easy access too.  I'll test on
Unity tomorrow, it should work there too.  It should also work on KDE and
GNOME2, if anyone can test there.  I've posted the builds now, Launchpad tells
me they'll be built in 45 minutes.

See below for instructions on getting the packages:

.hc

On 02/26/2013 11:01 PM, Hans-Christoph Steiner wrote:
> 
> Wow, building a panel applet is quite a project these days because there is a
> different API for each environment: GNOME2, GNOME3, MATE, Xfce, Cinnamon, KDE,
> OpenBox, etc.
> 
> I have this applet working well on my MATE laptop, but not yet working on
> GNOME3.  It should work on GNOME2 (i.e. Debian squeeze), and my guess is Xfce
> will not be much work.  I don't know about Cinnamon, KDE, OpenBox, whatever
> else...  patches welcome!
> 
> Here is the code:
> https://github.com/eighthave/commotion-mesh-applet
> 
> And here are the Ubuntu packages:
> https://launchpad.net/~guardianproject/+archive/commotion/+packages
> 
> Or:
> sudo add-apt-repository ppa:guardianproject/commotion
>   (fingerprint: F50E ADDD 2234 F563)
> sudo apt-get install commotion-mesh-applet
> 
> .hc
> 

"
1158,Commotion-dev, commotion mesh applet - first test package,"Thu, 28 Feb 2013 21:37:31 -0600",-0600,Ben West,"Hi Hans,

Sorry for lurking, but I've been fiddling with your brand spanking new
commotion-mesh-applet.  Seems the version just published to launchpad a few
hours ago won't load.

Launching the applet manually at the command line produces an error about a
missing module commotion_mesh_support.  The version of the applet
immediately preceding would at least load the indicator icon into the panel.

P.S. Great work!

On Thu, Feb 28, 2013 at 6:12 PM, Hans-Christoph Steiner <
hans at guardianproject.info> wrote:

>
> Ok, I found an approach that is working on GNOME 3, GNOME 3 Classic,
> Cinnamon,
> and MATE.  Those are the environments I have easy access too.  I'll test on
> Unity tomorrow, it should work there too.  It should also work on KDE and
> GNOME2, if anyone can test there.  I've posted the builds now, Launchpad
> tells
> me they'll be built in 45 minutes.
>
> See below for instructions on getting the packages:
>
> .hc
>
> On 02/26/2013 11:01 PM, Hans-Christoph Steiner wrote:
> >
> > Wow, building a panel applet is quite a project these days because there
> is a
> > different API for each environment: GNOME2, GNOME3, MATE, Xfce,
> Cinnamon, KDE,
> > OpenBox, etc.
> >
> > I have this applet working well on my MATE laptop, but not yet working on
> > GNOME3.  It should work on GNOME2 (i.e. Debian squeeze), and my guess is
> Xfce
> > will not be much work.  I don't know about Cinnamon, KDE, OpenBox,
> whatever
> > else...  patches welcome!
> >
> > Here is the code:
> > https://github.com/eighthave/commotion-mesh-applet
> >
> > And here are the Ubuntu packages:
> > https://launchpad.net/~guardianproject/+archive/commotion/+packages
> >
> > Or:
> > sudo add-apt-repository ppa:guardianproject/commotion
> >   (fingerprint: F50E ADDD 2234 F563)
> > sudo apt-get install commotion-mesh-applet
> >
> > .hc
> >
>
>
> _______________________________________________
> Commotion-dev mailing list
> Commotion-dev at lists.chambana.net
> https://lists.chambana.net/mailman/listinfo/commotion-dev
>
"
1159,Commotion-dev, Problem create/join adhoc network,"Thu, 28 Feb 2013 20:38:21 -0800",-0800,Matteo,"Hi Hans,
I just found this email among the really huge heap of email I receive
thanks a lot for the response. Now I will try test and report :)

Moreover I found a way to set up an ad hoc network among Samsung tab2 7.0 model P6210 with cyanogenmod 10.1
So kernel 3.0.15 and Android 4.2.1

The easiest way was to bypass wpa supplicant so I compiled and installed iwconfig.
With iwconfig I could created  an adhoc network in a standard way:

iwconfig wlan0 mode ad-hoc essid matteo 

I tried the same solution with samsung 10.1 p5113 but it was impossible enter in  adhoc mode.
There is a problem with Kernel and/or Broadcom driver.

It is really important to understand which is the chipset for each device. Google/Vendors sometimes blocks the adhoc mode
in Kernel space, so even you change wpa supplicant you cannot enter in adhoc mode.


Cheers
Matteo


On Feb 28, 2013, at 12:28 PM, Hans-Christoph Steiner <hans at guardianproject.info> wrote:

> 
> Here's someone who claims success with adhoc on Galaxy Tab 10.1 using a custom
> wpa_supplicant:
> http://androidtablethacks.com/android-tablet-hacks/how-to-enable-adhoc-wifi-on-android-tablets/
> 
> Here's someone doing it on another 4.x tablet:
> http://forum.xda-developers.com/showthread.php?t=2163363
> 
> I'd be very curious to here whether this works.  If it does, that means we
> could support some 4.x devices without modifying them by including our own
> wpa_supplicant in MeshTether.
> 
> .hc
> 
> On 02/25/2013 01:20 PM, Hans of Guardian wrote:
"
1160,Commotion-dev, Kernel which supports wireless extensions,"Fri, 1 Mar 2013 15:59:07 +0100",+0100,Magnus Wennberg,"Dear everybody!

We are two students that are currently working on our master thesis at the
University of Agder in Norway. We want to install olsr on two Android HTC
One V phones. We are trying to use the SPAN application and are currently
working on building our own custom kernel. However we are having some
trouble getting the wireless extension support working. We have asked the
SPAN project group for help, but we cant figure out where the problem is.

Is there anybody that have done similar work? With HTC phones?

We found this site through a post in your archives. In this post you
described how to take chip out of managed mode for Nexus one and Galaxy S
2. If we can do this with our HTC phones it will help us towards reaching
our goal. However, we are not sure how to use it, can anyone point us in
the right direction of where to start?
http://bcmon.blogspot.co.il/2012/09/working-monitor-mode-on-nexus-one.html

-- 
Best regards
Nils Erik Skj?nsberg & Magnus Wennberg
"
1161,Commotion-dev, commotion mesh applet - first test package,"Fri, 1 Mar 2013 12:21:11 -0500",-0500,Hans of Guardian,"
Ok, I just pushed an update to fix the non-loading, its building on launchpad now, so if you already have it installed, then 'apt-get update; apt-get upgrade"" should give you the new version.

Right now the Commotion menu applet is just a display of info, but today I'm going to hook up the control to let you initiate the mesh connection there.  For now, you should be able to click on 'commotionwireless.net' in the standard NetworkManager menu applet, and it should set up the adhoc and start olsrd.

.hc

On Feb 28, 2013, at 11:04 PM, Ben West wrote:

> Hi Hans,
> 
> I think was just able to install commotion-mesh-applet successfully on an Ubuntu Quantal VMware guest, and furthermore successfully initialize a USB TP-Link WN821N radio connected to that guest.  This is the same radio which I've been able to get to work in adhoc + unecrypted VAP mode under Commotion-OpenWRT, using the ath9k_htc module, and I installed the linux-backports-modules-cw-3.6-quantal-generic package to get the most current wireless drivers.
> 
> However, I'm not sure how to actually get the applet to configure the radio (or if I must manually configure the radio).
> 
> What's next?
> 
> P.S. Note I'm using the 2nd to last release of commotion-mesh-applet, due to the error mentioned in my previous email.
> https://launchpad.net/~guardianproject/+archive/commotion/+build/4330501
> 
> On Tue, Feb 26, 2013 at 10:01 PM, Hans-Christoph Steiner <hans at guardianproject.info> wrote:
> 
> Wow, building a panel applet is quite a project these days because there is a
> different API for each environment: GNOME2, GNOME3, MATE, Xfce, Cinnamon, KDE,
> OpenBox, etc.
> 
> I have this applet working well on my MATE laptop, but not yet working on
> GNOME3.  It should work on GNOME2 (i.e. Debian squeeze), and my guess is Xfce
> will not be much work.  I don't know about Cinnamon, KDE, OpenBox, whatever
> else...  patches welcome!
> 
> Here is the code:
> https://github.com/eighthave/commotion-mesh-applet
> 
> And here are the Ubuntu packages:
> https://launchpad.net/~guardianproject/+archive/commotion/+packages
> 
> Or:
> sudo add-apt-repository ppa:guardianproject/commotion
>   (fingerprint: F50E ADDD 2234 F563)
> sudo apt-get install commotion-mesh-applet
> 
> .hc
> 
> 
> _______________________________________________
> Commotion-dev mailing list
> Commotion-dev at lists.chambana.net
> https://lists.chambana.net/mailman/listinfo/commotion-dev
> 
> 
> 
> 
> -- 
> Ben West
> http://gowasabi.net
> ben at gowasabi.net
> 314-246-9434
> <nm-dispatcher-olsrd.log><Screenshot.png"
1162,Commotion-dev, Kernel which supports wireless extensions,"Fri, 1 Mar 2013 12:32:21 -0500",-0500,Hans of Guardian,"
Hey Magnus,

Glad to have more people working on this stuff, it can be painful.

The Nexus One has working adhoc with the stock kernel and OS, so its probably not a good example for getting this stuff working on other devices.  Also, you don't need monitor mode for OLSR, just plain on adhoc IBSS mode.

I think the key is to figure out where adhoc mode is disabled in the HTC One V.  Have you tried running Commotion MeshTether on it?  The debug log from the menu of that app could provide useful info.  The other thing I'd do is try directly messing with the wpa_supplicant from the terminal to see if it returns adhoc/IBSS networks in the scans.

I do this kind of debugging using Lil Debi (in the Play store) so that I have a full Debian shell to work in, either via adb shell or ssh.

.hc


On Mar 1, 2013, at 9:59 AM, Magnus Wennberg wrote:

> Dear everybody! 
> 
> We are two students that are currently working on our master thesis at the University of Agder in Norway. We want to install olsr on two Android HTC One V phones. We are trying to use the SPAN application and are currently working on building our own custom kernel. However we are having some trouble getting the wireless extension support working. We have asked the SPAN project group for help, but we cant figure out where the problem is. 
> 
> Is there anybody that have done similar work? With HTC phones? 
> 
> We found this site through a post in your archives. In this post you described how to take chip out of managed mode for Nexus one and Galaxy S 2. If we can do this with our HTC phones it will help us towards reaching our goal. However, we are not sure how to use it, can anyone point us in the right direction of where to start? 
> http://bcmon.blogspot.co.il/2012/09/working-monitor-mode-on-nexus-one.html 
> 
> -- 
> Best regards
> Nils Erik Skj?nsberg & Magnus Wennberg
> _______________________________________________
> Commotion-dev mailing list
> Commotion-dev at lists.chambana.net
> https://lists.chambana.net/mailman/listinfo/commotion-dev

"
1163,Commotion-dev, commotion mesh applet - first test package,"Thu, 28 Feb 2013 22:04:38 -0600",-0600,Ben West,"Hi Hans,

I think was just able to install commotion-mesh-applet successfully on an
Ubuntu Quantal VMware guest, and furthermore successfully initialize a USB
TP-Link WN821N radio connected to that guest.  This is the same radio which
I've been able to get to work in adhoc + unecrypted VAP mode under
Commotion-OpenWRT, using the ath9k_htc module, and I installed the
linux-backports-modules-cw-3.6-quantal-generic package to get the most
current wireless drivers.

However, I'm not sure how to actually get the applet to configure the radio
(or if I must manually configure the radio).

What's next?

P.S. Note I'm using the 2nd to last release of commotion-mesh-applet, due
to the error mentioned in my previous email.
https://launchpad.net/~guardianproject/+archive/commotion/+build/4330501

On Tue, Feb 26, 2013 at 10:01 PM, Hans-Christoph Steiner <
hans at guardianproject.info> wrote:

>
> Wow, building a panel applet is quite a project these days because there
> is a
> different API for each environment: GNOME2, GNOME3, MATE, Xfce, Cinnamon,
> KDE,
> OpenBox, etc.
>
> I have this applet working well on my MATE laptop, but not yet working on
> GNOME3.  It should work on GNOME2 (i.e. Debian squeeze), and my guess is
> Xfce
> will not be much work.  I don't know about Cinnamon, KDE, OpenBox, whatever
> else...  patches welcome!
>
> Here is the code:
> https://github.com/eighthave/commotion-mesh-applet
>
> And here are the Ubuntu packages:
> https://launchpad.net/~guardianproject/+archive/commotion/+packages
>
> Or:
> sudo add-apt-repository ppa:guardianproject/commotion
>   (fingerprint: F50E ADDD 2234 F563)
> sudo apt-get install commotion-mesh-applet
>
> .hc
>
>
> _______________________________________________
> Commotion-dev mailing list
> Commotion-dev at lists.chambana.net
> https://lists.chambana.net/mailman/listinfo/commotion-dev
>
"
1164,Commotion-dev, commotion mesh applet - first test package,"Fri, 1 Mar 2013 13:56:27 -0600",-0600,Ben West,"Hi Hans,

Thanks for the follow-up.  I can confirm my copy of Ubuntu Quantal (with
the MATE desktop) now launches the latest version of commotion-mesh-applet
OK.

It looks like I may not be getting the desired behavior from
NetworkManager; the entry ""commotionwireless.net"" simply does not appear.
I verified this instance of does have nm-dispatcher-olsrd
0.0.20130218-1~quantal.  I'm sharing a screenshot of what I see in the NM
applet drop-down menu.  Indeed, ""commotionwireless.net"" does appear as a
profile.

(Sorry for low-res JPG attachments. The listserv has a 40kB cap on message
body size.)

Could you share more about what you see on your end?

On Fri, Mar 1, 2013 at 11:21 AM, Hans of Guardian <hans at guardianproject.info
> wrote:

>
> Ok, I just pushed an update to fix the non-loading, its building on
> launchpad now, so if you already have it installed, then 'apt-get update;
> apt-get upgrade"" should give you the new version.
>
> Right now the Commotion menu applet is just a display of info, but today
> I'm going to hook up the control to let you initiate the mesh connection
> there.  For now, you should be able to click on 'commotionwireless.net'
> in the standard NetworkManager menu applet, and it should set up the adhoc
> and start olsrd.
>
> .hc
>
> On Feb 28, 2013, at 11:04 PM, Ben West wrote:
>
> Hi Hans,
>
> I think was just able to install commotion-mesh-applet successfully on an
> Ubuntu Quantal VMware guest, and furthermore successfully initialize a USB
> TP-Link WN821N radio connected to that guest.  This is the same radio which
> I've been able to get to work in adhoc + unecrypted VAP mode under
> Commotion-OpenWRT, using the ath9k_htc module, and I installed the
> linux-backports-modules-cw-3.6-quantal-generic package to get the most
> current wireless drivers.
>
> However, I'm not sure how to actually get the applet to configure the
> radio (or if I must manually configure the radio).
>
> What's next?
>
> P.S. Note I'm using the 2nd to last release of commotion-mesh-applet, due
> to the error mentioned in my previous email.
> https://launchpad.net/~guardianproject/+archive/commotion/+build/4330501
>
> On Tue, Feb 26, 2013 at 10:01 PM, Hans-Christoph Steiner <
> hans at guardianproject.info> wrote:
>
"
1165,Commotion-dev, commotion mesh applet - first test package,"Fri, 1 Mar 2013 15:34:44 -0500",-0500,Hans of Guardian,"
Thanks for you testing and feedback!

Looks like NetworkManager is not finding any commotionwireless.net nodes in its wifi scan.  Are there any active nodes called 'commotionwireless.net' nearby?  

Creating the first node will happen via the Commotion Mesh Applet by choosing the profile there.  I'm working on hooking that up today.  As things are now, you'll need to associate with an existing mesh.

.hc

On Mar 1, 2013, at 2:56 PM, Ben West wrote:

> Hi Hans,
> 
> Thanks for the follow-up.  I can confirm my copy of Ubuntu Quantal (with the MATE desktop) now launches the latest version of commotion-mesh-applet OK.
> 
> It looks like I may not be getting the desired behavior from NetworkManager; the entry ""commotionwireless.net"" simply does not appear.  I verified this instance of does have nm-dispatcher-olsrd 0.0.20130218-1~quantal.  I'm sharing a screenshot of what I see in the NM applet drop-down menu.  Indeed, ""commotionwireless.net"" does appear as a profile.
> 
> (Sorry for low-res JPG attachments. The listserv has a 40kB cap on message body size.)
> 
> Could you share more about what you see on your end?
> 
> On Fri, Mar 1, 2013 at 11:21 AM, Hans of Guardian <hans at guardianproject.info> wrote:
> 
> Ok, I just pushed an update to fix the non-loading, its building on launchpad now, so if you already have it installed, then 'apt-get update; apt-get upgrade"" should give you the new version.
> 
> Right now the Commotion menu applet is just a display of info, but today I'm going to hook up the control to let you initiate the mesh connection there.  For now, you should be able to click on 'commotionwireless.net' in the standard NetworkManager menu applet, and it should set up the adhoc and start olsrd.
> 
> .hc
> 
> On Feb 28, 2013, at 11:04 PM, Ben West wrote:
> 
"
1166,Commotion-dev, commotion mesh applet - first test package,"Fri, 01 Mar 2013 23:27:25 -0500",-0500,Hans-Christoph Steiner,"
I just pushed a big update to Commotion Mesh Applet, you can now connect to a
profile by clicking on it, and the menu and mesh status window dynamically
update.  Attached is a shot of my mesh status window.  It should be built and
available in the launchpad PPA in a couple hours, so 'apt-get upgrade' should
get it.

For those installing for the first time:

sudo add-apt-repository ppa:guardianproject/commotion
   (fingerprint: F50E ADDD 2234 F563)
sudo apt-get install commotion-mesh-applet

.hc

On 03/01/2013 03:34 PM, Hans of Guardian wrote:
> 
> Thanks for you testing and feedback!
> 
> Looks like NetworkManager is not finding any commotionwireless.net nodes in its wifi scan.  Are there any active nodes called 'commotionwireless.net' nearby?  
> 
> Creating the first node will happen via the Commotion Mesh Applet by choosing the profile there.  I'm working on hooking that up today.  As things are now, you'll need to associate with an existing mesh.
> 
> .hc
> 
> On Mar 1, 2013, at 2:56 PM, Ben West wrote:
> 
"
1167,Commotion-dev, commotion mesh applet - first test package,"Sat, 2 Mar 2013 17:42:15 -0600",-0600,Ben West,"Hi Hans,

I can now confirm the latest commotion-mesh-applet package from your PPA
works on my VMware guest copy of Ubuntu Quantal, with a TP-Link TL-WN821N
USB adapter.  That is, virtual Ubuntu with real 802.11n radio, same as what
I had working with the virtualized copy of Commotion-OpenWRT mentioned
earlier on this list.

The instance of Ubuntu did successfully mesh with a Nanostation Loco M2
running Commotion PR3, although the Ubuntu node would not select the Nano
M2 as its gateway node for reasons that I have not yet diagnosed.  It could
be the Nanostation was not properly configured, due to running an older
version of Commotion.

The tarball containing this VM guest copy of Ubuntu is 1.6GBytes, and I'm
hoping to be able to upload it soon here.
https://code.commotionwireless.net/projects/commotion/files

Would anyone on this list have use for a virtualized copy of Ubuntu with
commotion-mesh-applet, for their own testing?  You would need a USB adapter
known to work, e.g. TP-Link TL-WN821N v3 or TP-Link TL-WN721N.

On Fri, Mar 1, 2013 at 10:27 PM, Hans-Christoph Steiner <
hans at guardianproject.info> wrote:

>
> I just pushed a big update to Commotion Mesh Applet, you can now connect
> to a
> profile by clicking on it, and the menu and mesh status window dynamically
> update.  Attached is a shot of my mesh status window.  It should be built
> and
> available in the launchpad PPA in a couple hours, so 'apt-get upgrade'
> should
> get it.
>
> For those installing for the first time:
>
> sudo add-apt-repository ppa:guardianproject/commotion
>    (fingerprint: F50E ADDD 2234 F563)
> sudo apt-get install commotion-mesh-applet
>
> .hc
>
> On 03/01/2013 03:34 PM, Hans of Guardian wrote:
> >
> > Thanks for you testing and feedback!
> >
> > Looks like NetworkManager is not finding any commotionwireless.netnodes in its wifi scan.  Are there any active nodes called '
> commotionwireless.net' nearby?
> >
> > Creating the first node will happen via the Commotion Mesh Applet by
> choosing the profile there.  I'm working on hooking that up today.  As
> things are now, you'll need to associate with an existing mesh.
> >
> > .hc
> >
> > On Mar 1, 2013, at 2:56 PM, Ben West wrote:
> >
> "
1168,Commotion-dev, Kernel which supports wireless extensions,"Tue, 5 Mar 2013 15:53:46 +0100",+0100,Magnus Wennberg,"Hi Hans

We are having some problems with the Commotion MeshTether, and was hoping
maybe you can help us?
When we press ""Start"" we get these messages:

Starting...
no active WAN interface found
running /data/data/net.szym.barnacle/app_bin/run
./wifi[2]: ../native/libs/armeabi/wifi: not found
./wifi[2]: ../native/libs/armeabi/wifi: not found
OLSR on http://172.29.133.196:8080
./wifi[2]: ../native/libs/armeabi/wifi: not found
./wifi[2]: ../native/libs/armeabi/wifi: not found
Stopped unexpectedly!

We think we might not have built the native code correct? What do you think?

Best regards
Magnus


On Fri, Mar 1, 2013 at 6:32 PM, Hans of Guardian
<hans at guardianproject.info>wrote:

>
> Hey Magnus,
>
> Glad to have more people working on this stuff, it can be painful.
>
> The Nexus One has working adhoc with the stock kernel and OS, so its
> probably not a good example for getting this stuff working on other
> devices.  Also, you don't need monitor mode for OLSR, just plain on adhoc
> IBSS mode.
>
> I think the key is to figure out where adhoc mode is disabled in the HTC
> One V.  Have you tried running Commotion MeshTether on it?  The debug log
> from the menu of that app could provide useful info.  The other thing I'd
> do is try directly messing with the wpa_supplicant from the terminal to see
> if it returns adhoc/IBSS networks in the scans.
>
> I do this kind of debugging using Lil Debi (in the Play store) so that I
> have a full Debian shell to work in, either via adb shell or ssh.
>
> .hc
>
>
> On Mar 1, 2013, at 9:59 AM, Magnus Wennberg wrote:
>
> Dear everybody!
>
> We are two students that are currently working on our master thesis at the
> University of Agder in Norway. We want to install olsr on two Android HTC
> One V phones. We are trying to use the SPAN application and are currently
> working on building our own custom kernel. However we are having some
> trouble getting the wireless extension support working. We have asked the
> SPAN project group for help, but we cant figure out where the problem is.
>
> Is there anybody that have done similar work? With HTC phones?
>
> We found this site through a post in your archives. In this post you
> described how to take chip out of managed mode for Nexus one and Galaxy S
> 2. If we can do this with our HTC phones it will help us towards reaching
> our goal. However, we are not sure how to use it, can anyone point us in
> the right direction of where to start?
> http://bcmon.blogspot.co.il/2012/09/working-monitor-mode-on-nexus-one.html
>
>
> --
> Best regards
> Nils Erik Skj?nsberg & Magnus Wennberg
>  _______________________________________________
> Commotion-dev mailing list
> Commotion-dev at lists.chambana.net
> https://lists.chambana.net/mailman/listinfo/commotion-dev
>
>
"
1169,Commotion-dev, Kernel which supports wireless extensions,"Tue, 05 Mar 2013 12:06:04 -0500",-0500,Hans-Christoph Steiner,"
Yes, 'wifi' is a little terminal executable written in C.  It does the adhoc
work, so its essential.  There are ARM APKs available:
https://commotionwireless.net/download

.hc

On 03/05/2013 09:53 AM, Magnus Wennberg wrote:
> Hi Hans
> 
> We are having some problems with the Commotion MeshTether, and was hoping
> maybe you can help us?
> When we press ""Start"" we get these messages:
> 
> Starting...
> no active WAN interface found
> running /data/data/net.szym.barnacle/app_bin/run
> ./wifi[2]: ../native/libs/armeabi/wifi: not found
> ./wifi[2]: ../native/libs/armeabi/wifi: not found
> OLSR on http://172.29.133.196:8080
> ./wifi[2]: ../native/libs/armeabi/wifi: not found
> ./wifi[2]: ../native/libs/armeabi/wifi: not found
> Stopped unexpectedly!
> 
> We think we might not have built the native code correct? What do you think?
> 
> Best regards
> Magnus
> 
> 
> On Fri, Mar 1, 2013 at 6:32 PM, Hans of Guardian
> <hans at guardianproject.info>wrote:
> 
"
1170,Commotion-dev, iOS development,"Tue, 5 Mar 2013 12:38:20 -0600",-0600,Nate Glenn,"Hi Everyone,

I'm Nate Glenn, I'm an iOS developer, I'd like to contribute to this project, how can I get started?  Thanks,

Nate
"
1171,Commotion-dev, iOS development,"Tue, 05 Mar 2013 15:05:49 -0500",-0500,Andrew Reynolds,"Welcome aboard!

We haven't started any iphone development yet, so the biggest step would
be implementing a proof of concept in the form of a working olsrd build
for iphone.

We have a couple of developers on the list who are working on a mac
port. You may be able to crib some of their notes. I suspect, though,
that the biggest hurdle will be having to root the phone.

-andrew

On 03/05/2013 01:38 PM, Nate Glenn wrote:
> Hi Everyone,
> 
> I'm Nate Glenn, I'm an iOS developer, I'd like to contribute to this project, how can I get started?  Thanks,
> 
> Nate
> _______________________________________________
> Commotion-dev mailing list
> Commotion-dev at lists.chambana.net
> https://lists.chambana.net/mailman/listinfo/commotion-dev
> 


"
1172,Commotion-dev, iOS development,"Tue, 05 Mar 2013 15:06:35 -0500",-0500,Hans-Christoph Steiner,"
There is a Mac client in the works that you might be interested in:
https://github.com/bmgdev/meshbook

Making builds and testing the client would be one good way to start.  I
imagine there will be a lot of similarities between iOS and OSX.

.hc

On 03/05/2013 01:38 PM, Nate Glenn wrote:
> Hi Everyone,
> 
> I'm Nate Glenn, I'm an iOS developer, I'd like to contribute to this project, how can I get started?  Thanks,
> 
> Nate
> _______________________________________________
> Commotion-dev mailing list
> Commotion-dev at lists.chambana.net
> https://lists.chambana.net/mailman/listinfo/commotion-dev
> 
"
1173,Commotion-dev, iOS development,"Tue, 05 Mar 2013 15:09:12 -0500",-0500,Hans-Christoph Steiner,"
Yeah, root is non-negotiable, olsrd needs root to get a socket on port 698 and
change the routing table.  That's the tricky part.  But it could make sense to
have a Commotion iOS client in the Cydia app store, or things like that.

.hc

On 03/05/2013 03:05 PM, Andrew Reynolds wrote:
> Welcome aboard!
> 
> We haven't started any iphone development yet, so the biggest step would
> be implementing a proof of concept in the form of a working olsrd build
> for iphone.
> 
> We have a couple of developers on the list who are working on a mac
> port. You may be able to crib some of their notes. I suspect, though,
> that the biggest hurdle will be having to root the phone.
> 
> -andrew
> 
> On 03/05/2013 01:38 PM, Nate Glenn wrote:
"
1174,Commotion-dev, OSX Meshbook update,"Tue, 5 Mar 2013 16:42:10 -0800",-0800,Bradley Greenwood,"Hi All,

The major pieces of the osx app are in place.  With the new Profile Manager, one can now manage Profile settings through the UI and/or manage settings through the file system.  In addition, I've reverse engineered the Wifi Menu app so now our Profile updates will be immediately reflected in the menu bar and the user is able to make a selection there.  Latest source here:

   https://github.com/bmgdev/meshbook

A few remaining todos. I need to add UI around the app window for Status, Log, and Help.  As you know, we also discovered at the end of this process that there is no way to set bssid or channel on any version of osx (10.5+).  I'm still investigating some options.  For the time being, I'll add functionality to scan for ibss networks that match those of the Profile list.  Iconography to distinguish a node in range will help a user to know which of those nodes are closest.  

Much of my testing has been in 10.7 and 10.8.  I was able to get a Snow Leopard install up last night (10.6) so I'll be able to resolve issues for that version as well.

-b

Bradley Greenwood | bradley at scal.io | Scal.io


"
1175,Commotion-dev, Can't talk between desktop OLSRd and Commotion,"Wed, 06 Mar 2013 14:14:20 +0100",+0100,Mikael Nordfeldth,"Hi, I tried asking this on IRC and

<MMN-o> Heyho, I was wondering if anyone here has used the olsrd (and 
commotion network manager stuff) in GNU/Linux
<MMN-o> because I'm having trouble syncing with some openwrt commotion 
nodes
<MMN-o> the openwrt side won't list my desktop client in the neighbors 
list (but the desktop client does it, increasing the LQ received count, 
but not the NLQ successful transmission count)
<MMN-o> ...and I have no problem connecting to the openwrt node through 
the adhoc network via its published ip
<MMN-o> Hm, two desktop linux olsrd's  don't seem to speak with each 
other as well


I've made sure the essid and bssid stuff are identical, that I run on 
the same channel etc. My two testing chipsets (one at least is a Ralink 
RT2070 USB dongle) will find and communicate with TCP/IP to the other 
nodes, but I can't seem to get olsrd announcement stuff to go through 
it. (i.e. I receive a bunch of data about other nodes, but I can't seem 
to announce my own presence?)

If it matters, the olsrd on desktop is 
0.6.3-git_-hash_10502a6208c4143be6a4f9288f59de16 (Ubuntu 
ppa:guardianproject/commotion) and I run the Nanostation firmware on my 
Ubiquiti hardware which uses olsrd 
0.6.1-git_f2308e2-hash_9aafa10165e89a5f1a11ddd87fc8d01d

The configs have been tried both with default configuration (when 
running olsrd-adhoc-setup and olsrd manually, I've tried both olsrd.conf 
and the /etc/nm-dispatcher-olsrd/commotionwireless.net.conf) and have 
done a couple of changes here and there.

Any ideas on why my desktop can't announce to the openwrt nodes?


Probably not related I also have some trouble when doing this on my 
desktop machines _without_ network-manager, where my wifi interface 
doesn't get the ""RUNNING"" flag enabled in ifconfig. But that's probably 
secondary.

-- 
Mikael Nordfeldth
http://blog.mmn-o.se/
Xmpp/mail: mmn at hethane.se
"
1176,Commotion-dev, Can't talk between desktop OLSRd and Commotion,"Wed, 06 Mar 2013 15:10:19 +0100",+0100,Mikael Nordfeldth,"2013-03-06 14:14 skrev Mikael Nordfeldth:
> Any ideas on why my desktop can't announce to the openwrt nodes?

Adding some debug data and stuff, I guess the ""Table: Neighbors"" shows 
what is wrong (or is it a result of not announcing my node?)
(the commotion openwrt boxes' firmware show YES under SYM and MPRS for 
their linked neighbors)

Table: Links
Local IP        Remote IP       Hyst.   LQ      NLQ     Cost
5.1.89.123      5.8.83.72       0.00    0.819   0.000   INFINITE
5.1.89.123      5.14.192.187    0.00    1.000   0.000   INFINITE

Table: Neighbors
IP address      SYM     MPR     MPRS    Will.   2 Hop Neighbors
5.14.192.187    NO      NO      NO      3       2
5.8.83.72       NO      NO      NO      3       2

Table: Topology
Dest. IP        Last hop IP     LQ      NLQ     Cost

Table: HNA
Destination     Gateway
0.0.0.0/0       5.1.89.123

Table: MID
IP address      Aliases

Table: Routes
Destination     Gateway IP      Metric  ETX     Interface


If there's any other good data I can supply, please let me know. Or a 
debugging guide :)

-- 
Mikael Nordfeldth
http://blog.mmn-o.se/
Xmpp/mail: mmn at hethane.se
"
1177,Commotion-dev, Can't talk between desktop OLSRd and Commotion,"Wed, 06 Mar 2013 09:23:39 -0500",-0500,Dan Staples,"Hi Mikael,

I haven't tried out the network-manager functionality yet, but olsrd
itself hasn't given me problems as long as I've got ad-hoc mode working
on all the devices. Someone with more olsrd knowledge than myself could
help you debug the tables. I would suggest though trying the same
version of olsrd on the devices and see if that helps. We have a fork of
the latest release of olsrd you could try building and running on the
devices: https://github.com/opentechinstitute/olsrd.

Another thing I would suggest is doing a packet capture on the devices
and look for the HELLO messages, to see if the devices are announcing
themselves properly.

Dan

On 03/06/2013 09:10 AM, Mikael Nordfeldth wrote:
> 2013-03-06 14:14 skrev Mikael Nordfeldth:
"
1178,Commotion-dev, [Commotion-discuss] Qaul.net,"Wed, 06 Mar 2013 10:43:44 -0500",-0500,Andrew Reynolds,"That project is new to me.

Based on only a cursory look through the repos, it seems like a
cross-platform port of OLSRd with some front end work and maybe a voip
client.

That would make it similar in scope to the PR3 commotion release, but
with a focus on platforms and language (qual) instead of local
applications and security (commotion).

-andrew

On 03/06/2013 08:56 AM, Fran?ois Huguet wrote:
> Hi folks,
> 
> Since yesterday, I'm watching this website and wondering where is the
> difference with Commotion
> 
> https://github.com/WachterJud/qaul.net
> 
> Apparently, Qaul.net ""implements a redundant, open communication principle,
> in which wireless-enabled computers and mobile devices can directly form a
> spontaneous network. Text messaging, file sharing and voice calls are
> possible independent of internet and cellular networks. Qaul.net can spread
> like a virus, and an Open Source Community can modify it freely.
> 
> Anyone here knows about this project, have worked with them?
> 
> Regards.
> 
> Fran?ois
> 
> 
> 
> _______________________________________________
> Commotion-discuss mailing list
> Commotion-discuss at lists.chambana.net
> https://lists.chambana.net/mailman/listinfo/commotion-discuss
> 


"
1179,Commotion-dev, iOS development,"Wed, 06 Mar 2013 10:48:59 -0500",-0500,Dan Staples,"Thanks for reaching out to us, Nate!

Another place to look for reference is qaul.net. They apparently have
olsrd on their iOS client: https://github.com/WachterJud/qaul.net

Dan

On 03/05/2013 03:09 PM, Hans-Christoph Steiner wrote:
> Yeah, root is non-negotiable, olsrd needs root to get a socket on port 698 and
> change the routing table.  That's the tricky part.  But it could make sense to
> have a Commotion iOS client in the Cydia app store, or things like that.
>
> .hc
>
> On 03/05/2013 03:05 PM, Andrew Reynolds wrote:
"
1180,Commotion-dev, [Commotion-discuss] Qaul.net,"Wed, 06 Mar 2013 10:51:22 -0500",-0500,Dan Staples,"It is new to me as well. I emailed one of the developers asking if they
have ad-hoc working for Android and iOS. But I share Andrew's
assessment. It would be a useful to look at their Windows and iOS
clients when we get there.

Thanks for bringing it to our attention, Fran?ois.

On Wed 06 Mar 2013 10:43:44 AM EST, Andrew Reynolds wrote:
>
> That project is new to me.
>
> Based on only a cursory look through the repos, it seems like a
> cross-platform port of OLSRd with some front end work and maybe a voip
> client.
>
> That would make it similar in scope to the PR3 commotion release, but
> with a focus on platforms and language (qual) instead of local
> applications and security (commotion).
>
> -andrew
>
> On 03/06/2013 08:56 AM, Fran?ois Huguet wrote:
"
1181,Commotion-dev, Can't talk between desktop OLSRd and Commotion,"Wed, 06 Mar 2013 17:49:44 +0100",+0100,Mikael Nordfeldth,"2013-03-06 15:23 skrev Dan Staples:
> I would suggest though trying the same
> version of olsrd on the devices and see if that helps. We have a fork 
> of
> the latest release of olsrd you could try building and running on the
> devices: https://github.com/opentechinstitute/olsrd.
> 
> Another thing I would suggest is doing a packet capture on the devices
> and look for the HELLO messages, to see if the devices are announcing
> themselves properly.

I noticed now that the log (output from olsrd rather than the txtinfo 
plugin) reported ""sendto(v4): Invalid argument"" occasionally.
(and packet capturing shows no packages are sent _from_ my wlan 
interface by olsrd - keeping in mind that routing works and I can do ssh 
etc.)

I'll try compiling a new olsrd on my desktop and play around a bit 
more. Thanks for your input!

-- 
Mikael Nordfeldth
http://blog.mmn-o.se/
Xmpp/mail: mmn at hethane.se
"
1182,Commotion-dev, Can't talk between desktop OLSRd and Commotion,"Wed, 6 Mar 2013 10:58:04 -0600",-0600,Ben West,"I believe this was the same problem I encountered last week when briefly
testing the Ubuntu commotion-mesh-applet package and a Nanostation M2
running Commotion-OpenWRT PR3-ish.

I didn't have a change to diagnose problem, but my suspicion is
incompatible OLSR config on either side, in particular ...

- Incorrect or missing olsrd_secure key?
- OLSR smart_gateway feature not working as intended?  (Perhaps try
disabling it.)

If you can disable olsrd and have the nodes route to each other manually
(as I could), then that would indicate olsrd config issues.

On Wed, Mar 6, 2013 at 10:49 AM, Mikael Nordfeldth <mmn at hethane.se> wrote:

> 2013-03-06 15:23 skrev Dan Staples:
>
>  I would suggest though trying the same
"
1183,Commotion-dev, Can't talk between desktop OLSRd and Commotion,"Wed, 06 Mar 2013 18:19:08 +0100",+0100,Mikael Nordfeldth,"2013-03-06 17:58 skrev Ben West:
> I didn't have a change to diagnose problem, but my suspicion is
> incompatible OLSR config on either side, in particular ...
> 
> - Incorrect or missing olsrd_secure key?

The olsrd_secure plugin is not currently enabled, and when I enabled it 
on my desktop at least it did what it should ;)

[ENC]Rejecting packet from 5.14.192.187
[ENC]Adding signature for packet size 20
sendto(v4): Invalid argument
[ENC]Packet not sane!
[ENC]Rejecting packet from 5.14.192.187
[ENC]Rejecting packet from 5.8.83.72


(but seeing there that the ""Adding signature for packet size 20"" is 
immediately followed by a sendto() error, it is even more obvious that 
I'll look closer at why I can't send IPv4 packets...)

-- 
Mikael Nordfeldth
http://blog.mmn-o.se/
Xmpp/mail: mmn at hethane.se
"
1184,Commotion-dev, [Commotion-discuss] Qaul.net,"Wed, 06 Mar 2013 14:08:15 -0500",-0500,Will Hawkins,"I just browsed through the Android code and will take a more thorough look at it tomorrow. It seems like they have a considerable amount of hardware-specific code which might be useful to dissect. I will keep you posted.

Will

PS: I will begin looking through the iOS code too.
 
On Wednesday, March 6, 2013 10:51 EST, Dan Staples <danstaples at opentechinstitute.org> wrote: 
 
> It is new to me as well. I emailed one of the developers asking if they
> have ad-hoc working for Android and iOS. But I share Andrew's
> assessment. It would be a useful to look at their Windows and iOS
> clients when we get there.
> 
> Thanks for bringing it to our attention, Fran?ois.
> 
> On Wed 06 Mar 2013 10:43:44 AM EST, Andrew Reynolds wrote:
> >
> > That project is new to me.
> >
> > Based on only a cursory look through the repos, it seems like a
> > cross-platform port of OLSRd with some front end work and maybe a voip
> > client.
> >
> > That would make it similar in scope to the PR3 commotion release, but
> > with a focus on platforms and language (qual) instead of local
> > applications and security (commotion).
> >
> > -andrew
> >
> > On 03/06/2013 08:56 AM, Fran?ois Huguet wrote:
> "
1185,Commotion-dev, Can't talk between desktop OLSRd and Commotion,"Thu, 7 Mar 2013 08:13:43 +1030",+1030,Jeremy Lakeman,"If sendto is failing, then olsr is most likely using the wrong
destination address for outgoing packets.

On Thu, Mar 7, 2013 at 3:49 AM, Mikael Nordfeldth <mmn at hethane.se> wrote:
> 2013-03-06 17:58 skrev Ben West:
>
"
1186,Commotion-dev, Can't talk between desktop OLSRd and Commotion,"Wed, 06 Mar 2013 19:40:07 -0500",-0500,Hans-Christoph Steiner,"
You could try commotion-mesh-applet, its very easy to try if your are Ubuntu,
Mint or Debian.  It automates the whole process.  I have it working on a few
machines, and it won't mess with your olsrd config or network config
otherwise, and you can just remove it if it doesn't work.  It also plays nice
NetworkManager, indeed it requires it.

Here are the Ubuntu packages:
sudo add-apt-repository ppa:guardianproject/commotion
  (fingerprint: F50E ADDD 2234 F563)
sudo apt-get install commotion-mesh-applet

Or direct download here:
https://launchpad.net/~guardianproject/+archive/commotion/+packages

Here's the source code:
https://github.com/opentechinstitute/commotion-mesh-applet
https://github.com/opentechinstitute/nm-dispatcher-olsrd
https://github.com/eighthave/python-networkmanager
http://pypi.python.org/pypi/pyjavaproperties

.hc


On 03/06/2013 04:43 PM, Jeremy Lakeman wrote:
> If sendto is failing, then olsr is most likely using the wrong
> destination address for outgoing packets.
> 
> On Thu, Mar 7, 2013 at 3:49 AM, Mikael Nordfeldth <mmn at hethane.se> wrote:
"
1187,Commotion-dev, Can't talk between desktop OLSRd and Commotion,"Thu, 07 Mar 2013 13:28:46 +0100",+0100,Mikael Nordfeldth,
1188,Commotion-dev, Can't talk between desktop OLSRd and Commotion,"Thu, 07 Mar 2013 14:05:33 -0500",-0500,Hans-Christoph Steiner,"

On 03/07/2013 07:28 AM, Mikael Nordfeldth wrote:
> 2013-03-07 01:40, Hans-Christoph Steiner skrev:
> 
"
1189,Commotion-dev, minimum OSX version to support,"Thu, 07 Mar 2013 14:53:13 -0500",-0500,Hans-Christoph Steiner,"
So we have a Commotion Meshbook build working for 10.7 and 10.8, but not older
versions of Mac OS X.  We figure this is a good place to start.  How essential
is 10.6 support at this point?  Its feasible with the current code, but
tricky.  Older than 10.6 would require big changes to the app since the APIs
have changed a lot.

.hc
"
1190,Commotion-dev, Can't talk between desktop OLSRd and Commotion,"Thu, 07 Mar 2013 20:57:00 +0100",+0100,Mikael Nordfeldth,"2013-03-07 20:05 skrev Hans-Christoph Steiner:
> Thanks for the report, looks like a bug in the underlying
> python-networkmanager library.  Can you paste in the name of the 
> network that
> is causing this problem?

It's the sv_SE default name for a ""Wired connection"": Tr?dbunden 
anslutning

The ? is UTF-8 character 00E5, as represented in all relevant ways 
possible here: 
http://www.ltg.ed.ac.uk/~richard/utf-8.cgi?input=00E5&mode=hex

> The place to post the bug report is here:
> https://github.com/seveas/python-networkmanager

Posted an issue:
https://github.com/seveas/python-networkmanager/issues/3

I'll see if I can fix the issues on my end when I get back home to my 
own equipment :)

-- 
Mikael Nordfeldth
http://blog.mmn-o.se/
Xmpp/mail: mmn at hethane.se
"
1191,Commotion-dev, minimum OSX version to support,"Thu, 7 Mar 2013 22:04:25 +0100",+0100,L. Aaron Kaplan,"
On Mar 7, 2013, at 8:53 PM, Hans-Christoph Steiner <hans at guardianproject.info> wrote:

> 
> So we have a Commotion Meshbook build working for 10.7 and 10.8, but not older
> versions of Mac OS X.  We figure this is a good place to start.  How essential
> is 10.6 support at this point?  Its feasible with the current code, but
> tricky.  Older than 10.6 would require big changes to the app since the APIs
> have changed a lot.
> 

My experience is that Apple poorly supports older versions anyway.
Hence it does not make much sense to support 10.6 and lower.

my 2 cents,
a.

"
1192,Commotion-dev, Can't talk between desktop OLSRd and Commotion,"Fri, 08 Mar 2013 00:36:28 +0100",+0100,Mikael Nordfeldth,"2013-03-06 22:43 skrev Jeremy Lakeman:
> If sendto is failing, then olsr is most likely using the wrong
> destination address for outgoing packets.

I solved this now in the least debugging way possible. (compiling the 
latest git code and running it)

My nodes are now linking up properly! Awesome.

-- 
Mikael Nordfeldth
http://blog.mmn-o.se/
Xmpp/mail: mmn at hethane.se
"
1193,Commotion-dev, Can't talk between desktop OLSRd and Commotion,"Thu, 07 Mar 2013 19:34:03 -0500",-0500,Dan Staples,"Great news! Let us know if you run into any other difficulties.

On 03/07/2013 06:36 PM, Mikael Nordfeldth wrote:
> 2013-03-06 22:43 skrev Jeremy Lakeman:
"
1194,Commotion-dev, Kernel which supports wireless extensions,"Fri, 8 Mar 2013 15:36:47 +0100",+0100,Magnus Wennberg,"We downloaded the commotion mesh tether apk, is this the one you were
talking about? Annyway, the application is still not working. The commotion
mesh tether application gets stuck in the ""Aquiring  wifi lock"" state, and
the Olsr Mesh Tether application get stuck same place as before.
Any ideas of what we can do?

Regards
Magnus


On Tue, Mar 5, 2013 at 6:06 PM, Hans-Christoph Steiner <
hans at guardianproject.info> wrote:

>
> Yes, 'wifi' is a little terminal executable written in C.  It does the
> adhoc
> work, so its essential.  There are ARM APKs available:
> https://commotionwireless.net/download
>
> .hc
>
> On 03/05/2013 09:53 AM, Magnus Wennberg wrote:
> > Hi Hans
> >
> > We are having some problems with the Commotion MeshTether, and was hoping
> > maybe you can help us?
> > When we press ""Start"" we get these messages:
> >
> > Starting...
> > no active WAN interface found
> > running /data/data/net.szym.barnacle/app_bin/run
> > ./wifi[2]: ../native/libs/armeabi/wifi: not found
> > ./wifi[2]: ../native/libs/armeabi/wifi: not found
> > OLSR on http://172.29.133.196:8080
> > ./wifi[2]: ../native/libs/armeabi/wifi: not found
> > ./wifi[2]: ../native/libs/armeabi/wifi: not found
> > Stopped unexpectedly!
> >
> > We think we might not have built the native code correct? What do you
> think?
> >
> > Best regards
> > Magnus
> >
> >
> > On Fri, Mar 1, 2013 at 6:32 PM, Hans of Guardian
> > <hans at guardianproject.info>wrote:
> >
> "
1195,Commotion-dev, Community Wireless caucus at the Allied Media,"Fri, 08 Mar 2013 10:31:04 -0500",-0500,Andy Gunn,"Hi all - I wanted to start the conversation around bringing people
together at this year's Allied Media Conference. For those folks that
aren't familiar with the conference, its an excellent place to come
together with a lot of other individuals and organizations and discuss
organizing strategies for our projects and movements. If you want to
read more, check out the conference web site:
http://amc.alliedmedia.org/

Put it on your calendars! June 20th to 23rd.

The idea is to come together and discuss building and running Community
Wireless networks. What is working for folks, and what are the
challenges? How do we raise funds, or what is the business model in use
for keeping our networks sustainable?

I'm going to reach out directly to folks I have been in touch with over
the past year or so, but I certainly don't know or have contacts with
all of the community networks in the country (or world!). Please pass
this notice around and invite people to the AMC so we can have a larger
and more productive conversation.

You can read the text of what I proposed below, at the bottom of this
email. Obviously this is just a proposal to the AMC, I'm hoping that it
will be approved so we can have the space at the conference.

Just so you all know, there are a number of other wireless and community
technology sessions being proposed this year at the AMC. Please consider
submitting your own proposal if you would like to share your stories and
strategies around your projects:
http://talk.alliedmedia.org/amc2013/tpsngs

Let me know if y'all have thoughts, questions or concerns about this!
-Andy


"
1196,Commotion-dev, Kernel which supports wireless extensions,"Fri, 8 Mar 2013 12:04:25 -0500",-0500,Hans of Guardian,"
Yes, Commotion MeshTether is the most recent version of the OLSR app for Android.  Olsr Mesh Tether is the old name for that.

For debugging, the next thing I would do is install Lil Debi to get a Debian shell to work with:
https://play.google.com/store/apps/details?id=info.guardianproject.lildebi&hl=en

Then you can 'apt-get install' any software from debian, including 'wireless-tools', which provides iwconfig.  I use all the standard GNU/Linux tools via Lil Debi to setup adhoc mode on the hardware directly.  If that doesn't work, then most likely your devices kernel does not support wireless extensions for setting up adhoc mode.  In that case, you need to install a new kernel to get adhoc support.

.hc

On Mar 8, 2013, at 9:36 AM, Magnus Wennberg wrote:

> We downloaded the commotion mesh tether apk, is this the one you were talking about? Annyway, the application is still not working. The commotion mesh tether application gets stuck in the ""Aquiring  wifi lock"" state, and the Olsr Mesh Tether application get stuck same place as before.
> Any ideas of what we can do? 
> 
> Regards 
> Magnus
> 
> 
> On Tue, Mar 5, 2013 at 6:06 PM, Hans-Christoph Steiner <hans at guardianproject.info> wrote:
> 
> Yes, 'wifi' is a little terminal executable written in C.  It does the adhoc
> work, so its essential.  There are ARM APKs available:
> https://commotionwireless.net/download
> 
> .hc
> 
> On 03/05/2013 09:53 AM, Magnus Wennberg wrote:
> > Hi Hans
> >
> > We are having some problems with the Commotion MeshTether, and was hoping
> > maybe you can help us?
> > When we press ""Start"" we get these messages:
> >
> > Starting...
> > no active WAN interface found
> > running /data/data/net.szym.barnacle/app_bin/run
> > ./wifi[2]: ../native/libs/armeabi/wifi: not found
> > ./wifi[2]: ../native/libs/armeabi/wifi: not found
> > OLSR on http://172.29.133.196:8080
> > ./wifi[2]: ../native/libs/armeabi/wifi: not found
> > ./wifi[2]: ../native/libs/armeabi/wifi: not found
> > Stopped unexpectedly!
> >
> > We think we might not have built the native code correct? What do you think?
> >
> > Best regards
> > Magnus
> >
> >
> > On Fri, Mar 1, 2013 at 6:32 PM, Hans of Guardian
> > <hans at guardianproject.info>wrote:
> >
> "
1197,Commotion-dev, Can't talk between desktop OLSRd and Commotion,"Fri, 8 Mar 2013 12:09:36 -0500",-0500,Hans of Guardian,"
On Mar 7, 2013, at 7:34 PM, Dan Staples wrote:

> On 03/07/2013 06:36 PM, Mikael Nordfeldth wrote:
"
1198,Commotion-dev, Can't talk between desktop OLSRd and,"Fri, 08 Mar 2013 18:40:56 +0100",+0100,Mikael Nordfeldth,"On fre?  8 mar 2013 18:09:36, Hans of Guardian <hans at guardianproject.info> wrote:
> Any chance that you tried olsrd 0.6.2 or other olsrd versions? I'm
> curious when the bug was introduced and when it was fixed.

The olsrd I tried that didn't work was 0.6.3 (0.6.3-git_-hash_10502a6208c4143be6a4f9288f59de16 from Ubuntu 
ppa:guardianproject/commotion)

The nanostation was initially running olsrd v0.6.1 (Commotion PR2) but was updated to PR3 with v0.6.2 iirc. But that should be entirely unrelated.

The problem seems have been entirely on my Ubuntu 12.10 box and as mentioned was solved with an update to latest version (0.6.5+ at least).

I could try 0.6.4 (and self-compiled 0.6.3) and see if I can find the source of the problem.
"
1199,Commotion-dev, Can't talk between desktop OLSRd and Commotion,"Fri, 08 Mar 2013 13:27:38 -0500",-0500,Hans-Christoph Steiner,"

On 03/08/2013 12:40 PM, Mikael Nordfeldth wrote:
> On fre   8 mar 2013 18:09:36, Hans of Guardian <hans at guardianproject.info> wrote:
"
1200,Commotion-dev, Fwd: Re: [Announce] open ath9k_htc firmware,"Fri, 08 Mar 2013 22:42:33 -0500",-0500,Dan Staples,"This seems like important news for future efforts utilizing USB wifi
hardware with the ath9k_htc driver. It's a driver I've had great
experiences with, and Ben West has been doing work with it as well,
creating multiple virtual wireless interfaces in different modes.
Developments with this driver will benefit us in creating virtualized
Commotion nodes, or porting Commotion to devices like tablets and the
Raspberry Pi...really anything with a USB port.

Dan


"
1201,Commotion-dev, Fwd: Re: [Announce] open ath9k_htc firmware,"Fri, 08 Mar 2013 22:57:36 -0500",-0500,Dan Staples,"Ah, it appears I misspoke. The announcement is about the firmware, not
the driver. Still, an interesting development.

On 03/08/2013 10:42 PM, Dan Staples wrote:
> This seems like important news for future efforts utilizing USB wifi
> hardware with the ath9k_htc driver. It's a driver I've had great
> experiences with, and Ben West has been doing work with it as well,
> creating multiple virtual wireless interfaces in different modes.
> Developments with this driver will benefit us in creating virtualized
> Commotion nodes, or porting Commotion to devices like tablets and the
> Raspberry Pi...really anything with a USB port.
>
> Dan
>
>
> "
1202,Commotion-dev, iOS development,"Sat, 09 Mar 2013 17:28:25 +0100",+0100,Ufo,"some weeks ago i was looking for such apps. i was trying installing that 
qual.net App, with installed olsr but failed at some point when starting 
olsrd. but with some changes we should get it running at jailbrkn iphones.

another app i found was Freifunk M?nster. xcode-overview screenshot 
http://twitpic.com/bw8v13 and with a live-connection map: 
http://pbs.twimg.com/media/BAvlIG5CMAIk0gK.jpg#twimg

oh, the cloudtrax ios app looks very nice: 
https://itunes.apple.com/en/app/cloudtrax/id449746699?mt=8

another idea for ios app maybe WITHOUT olsr, only for wifi-dhcp-clients 
i was thinking about:
a possibility for visualize the olsr node data. (these are already 
existing at olsr nodes via json -> screenshot http://twitpic.com/bvr02y
the app could provide some lifestatistics about these values, and to 
""jump"" from host to host should be possible. (maybe a favourite list of 
nodes could be useful)

even much more wifi-data (snr to each wifi neighbor for each installed 
wifi-interface) is provided via json, but only with root-login (via web-gui)
so with live-updating all THAT data in a nice gui that app could be a 
very nice tool when sitting at rooftop and installing/moving antennas.

there could also be a possibility for having a favourite meshnetwork out 
of a list of wordwide community networks. so we could have one nice app 
with having local information about many, many different towns and areas 
with mesh communities. that could be done similair to the 
hackerspace-api, which is nice decentralized. of course with some other 
values.  have a look: http://hackerspaces.me/

but im not an advanced ios programmer to get this running.

greetings, ufo

Am 06.03.13 16:48, schrieb Dan Staples:
> Thanks for reaching out to us, Nate!
>
> Another place to look for reference is qaul.net. They apparently have
> olsrd on their iOS client: https://github.com/WachterJud/qaul.net
>
> Dan
>
> On 03/05/2013 03:09 PM, Hans-Christoph Steiner wrote:
"
1203,Commotion-dev, Can't talk between desktop OLSRd and Commotion,"Sat, 09 Mar 2013 19:34:43 +0100",+0100,Mikael Nordfeldth,"2013-03-08 19:27, Hans-Christoph Steiner skrev:
> That would be quite useful if you have the time!  Another thing that might the
> whole process easier is to 'git bisect', if you are familiar with that..
> Right now, Debian squeeze and wheezy have 0.6.2, and Ubuntu has 0.6.1 and 0.6.3:
> 
> http://packages.debian.org/search?keywords=olsrd
> http://packages.ubuntu.com/search?keywords=olsrd
> 
> So the idea is to find out which version of these we can rely on, and which we
> need to use replacements.

Gah. This seems way more advanced than what I can explain with my
knowledge. Nevertheless, I did find what caused my error, the -O2 gcc
optimization switch as patched by Debian package ""hardening fixes"":

1. I tried compiling various olsrd versions. All worked.
2. I tried compiling 0.6.3-5~quantal from 'apt-get source'. It didn't work.
3. I tried compiling the 0.6.3.orig source (same as above, without
debian patches) It worked.
4. None of the patches contained any networking code (except the json
plugin, but disabling it didn't have any effect anyway)
5. I found that removing the -O2 switch on line 227 in Makefile.inc, as
patched by 310-hardening-fixes.patch resolved my invalid argument
sendto(v4) issue:

 %.o: %.c
        @echo ""[CC] $<""
-       $(CC) $(CFLAGS) $(CPPFLAGS) -c -o $@ $<
+       $(CC) -O2 $(CFLAGS) $(CPPFLAGS) -fPIE -c -o $@ $<


Reverting this (and even leaving the -fPIE there but removing -O2) makes
the resulting binary functional.


So the specific problem was caused by the -O2 parameter to gcc, I guess
making it a compiling/linking issue. I don't know enough about this
myself though, so I'm attaching ('O2-opts') the output of what that
level of optimizations means if anyone is interested (gcc -c -Q -O2
--help=optimizers)

More info on my build environment is below:

$ gcc -v
Using built-in specs.
COLLECT_GCC=gcc
COLLECT_LTO_WRAPPER=/usr/lib/gcc/x86_64-linux-gnu/4.7/lto-wrapper
Target: x86_64-linux-gnu
Configured with: ../src/configure -v --with-pkgversion='Ubuntu/Linaro
4.7.2-2ubuntu1' --with-bugurl=file:///usr/share/doc/gcc-4.7/README.Bugs
--enable-languages=c,c++,go,fortran,objc,obj-c++ --prefix=/usr
--program-suffix=-4.7 --enable-shared --enable-linker-build-id
--with-system-zlib --libexecdir=/usr/lib --without-included-gettext
--enable-threads=posix --with-gxx-include-dir=/usr/include/c++/4.7
--libdir=/usr/lib --enable-nls --with-sysroot=/ --enable-clocale=gnu
--enable-libstdcxx-debug --enable-libstdcxx-time=yes
--enable-gnu-unique-object --enable-plugin --enable-objc-gc
--disable-werror --with-arch-32=i686 --with-tune=generic
--enable-checking=release --build=x86_64-linux-gnu
--host=x86_64-linux-gnu --target=x86_64-linux-gnu
Thread model: posix
gcc version 4.7.2 (Ubuntu/Linaro 4.7.2-2ubuntu1)


$ uname -a
Linux plexi 3.5.0-25-generic #39-Ubuntu SMP Mon Feb 25 18:26:58 UTC 2013
x86_64 x86_64 x86_64 GNU/Linux
"
1204,Commotion-dev, Fwd: Re: [Announce] open ath9k_htc firmware,"Sat, 9 Mar 2013 13:41:00 -0600",-0600,Ben West,"Hi All,

Indeed, as described in previous threads, I've had decent success using
TP-Link TL-WN722N and TL-WN821Nv2 radios with Commotion-OpenWRT and now
also with the commotion-mesh-applet for Ubuntu/Debian, both under VMware.
These radios are based on the ath9k_htc driver, with current generations of
Commotion-OpenWRT specifically incorporating the compat-wireless-2012-09-07
driver library.

My reason for using them was to permit running Commotion as a VMware guest,
but with access to a physical radio via USB.  However, as Dan alludes to,
this also permits *any* platform capable of running the v3 kernel and
ath9k_htc driver to conceivably run Commotion.
https://code.commotionwireless.net/projects/commotion/wiki/Vmware-Player#Configuring-the-Commotion-OpenWRT-Guest-with-USB

My understanding, also, is that the ath9k_htc driver is as open-source as
the ath9k driver, now that its firmware component is open-source.
http://linuxwireless.org/en/users/Drivers/ath9k_htc vs.
http://linuxwireless.org/en/users/Drivers/ath9k

On Fri, Mar 8, 2013 at 9:42 PM, Dan Staples <
danstaples at opentechinstitute.org> wrote:

>  This seems like important news for future efforts utilizing USB wifi
> hardware with the ath9k_htc driver. It's a driver I've had great
> experiences with, and Ben West has been doing work with it as well,
> creating multiple virtual wireless interfaces in different modes.
> Developments with this driver will benefit us in creating virtualized
> Commotion nodes, or porting Commotion to devices like tablets and the
> Raspberry Pi...really anything with a USB port.
>
> Dan
>
>
> "
1205,Commotion-dev, Open Source RF Board Myriad-RF,"Sat, 9 Mar 2013 14:14:56 -0600",-0600,Ben West,"Found this yesterday in the EE Times weekly headlines:

*RF board takes Arduino-like approach*

LONDON ? Lime Microsystems Ltd., a developer of configurable multi-band
radio transceiver ICs, has launched an open-source RF hardware project that
it says is intended to further innovation in wireless systems. The
non-profit initiative has been launched under the name
Myriad-RF<http://myriadrf.org/>with its own website and includes
pre-made RF boards with editable design
files that developers can freely download and use in their own designs.

...

Right now Myriad-RF is effectively based around Lime's LMS6002D
digital-to-RF transceiver. This chip, used in small cell basestations and
suitable to support all cellular wireless standards, includes integrated
ADCs DACs and low-noise amplifiers and covers the spectrum from 300-MHz to
3.8-GHz. Bushehri said Myriad-RF would be open to other suppliers of RF
transceivers if they could meet the objectives of furthering
software-defined radio and field-programmable RF (FPRF) over a similar
frequency range.

http://www.eetimes.com/design/microwave-rf-design/4408479/Lime-forms-open-source-soft-radio-initiative?cid=Newsletter+-+EETimes+Daily
http://myriadrf.org/

The $300 assembled board (not bad, considering the usual cost of PCB
reference designs), along with the option to fab the board yourself using
their KiCad files, looks pretty neat.  For talking to the outside (digital)
world, the board looks to have an SPI and an 80pin header.

Indeed, this looks like it isn't the only low-cost board targeted at
software-defined radio, based on the LMS6002D.  The one below includes an
FPGA and USB 3.0.
http://www.kickstarter.com/projects/1085541682/bladerf-usb-30-software-defined-radio


-- 
Ben West
http://gowasabi.net
ben at gowasabi.net
314-246-9434
"
1206,Commotion-dev, Open Source RF Board Myriad-RF,"Sat, 09 Mar 2013 16:14:28 -0500",-0500,Dan Staples,"Very interesting. It's good to see more efforts for open source hardware
SDR kits. I wonder how it will compare to Michael Ossmann's HackRF:
http://ossmann.blogspot.com/2012/06/introducing-hackrf.html. Myriad-RF
appears to support a smaller frequency range, but the price looks pretty
good for something so versatile.

On 03/09/2013 03:14 PM, Ben West wrote:
>
> Found this yesterday in the EE Times weekly headlines:
>
> *RF board takes Arduino-like approach*
>
> LONDON -- Lime Microsystems Ltd., a developer of configurable
> multi-band radio transceiver ICs, has launched an open-source RF
> hardware project that it says is intended to further innovation in
> wireless systems. The non-profit initiative has been launched under
> the name Myriad-RF <http://myriadrf.org/> with its own website and
> includes pre-made RF boards with editable design files that developers
> can freely download and use in their own designs.
>
> ...
>
> Right now Myriad-RF is effectively based around Lime's LMS6002D
> digital-to-RF transceiver. This chip, used in small cell basestations
> and suitable to support all cellular wireless standards, includes
> integrated ADCs DACs and low-noise amplifiers and covers the spectrum
> from 300-MHz to 3.8-GHz. Bushehri said Myriad-RF would be open to
> other suppliers of RF transceivers if they could meet the objectives
> of furthering software-defined radio and field-programmable RF (FPRF)
> over a similar frequency range.
>
> http://www.eetimes.com/design/microwave-rf-design/4408479/Lime-forms-open-source-soft-radio-initiative?cid=Newsletter+-+EETimes+Daily
> http://myriadrf.org/
>
> The $300 assembled board (not bad, considering the usual cost of PCB
> reference designs), along with the option to fab the board yourself
> using their KiCad files, looks pretty neat.  For talking to the
> outside (digital) world, the board looks to have an SPI and an 80pin
> header.
>
> Indeed, this looks like it isn't the only low-cost board targeted at
> software-defined radio, based on the LMS6002D.  The one below includes
> an FPGA and USB 3.0.
> http://www.kickstarter.com/projects/1085541682/bladerf-usb-30-software-defined-radio
>
>
> -- 
> Ben West
> http://gowasabi.net
> ben at gowasabi.net <mailto:ben at gowasabi.net>
> 314-246-9434
>
>
> _______________________________________________
> Commotion-dev mailing list
> Commotion-dev at lists.chambana.net
> https://lists.chambana.net/mailman/listinfo/commotion-dev

-- 
Dan Staples

Open Technology Institute
https://commotionwireless.net

"
1207,Commotion-dev, Commotion-OpenBTS ready for testing,"Tue, 12 Mar 2013 14:49:23 -0400",-0400,Dan Staples,"I've put together a custom x86 Ubuntu live image with the components
needed to make voice calls over a Commotion mesh. This includes Serval,
OLSRd, OpenBTS, and Asterisk. When you boot into the image, you are
presented with a configuration wizard that asks you to select which GSM
hardware you have, and it will automatically configure the proper
transceiver driver and start everything up. Supported hardware includes
the Range RAD1 and the Ettus USRP1, USRP2, N200 series, B100 series, and
E100 series.

After running the wizard, you should be able to make calls between GSM
phones, and between Serval and GSM phones.

If anyone with GSM hardware could test this, that would be very helpful.
I haven't been able to do testing due to lack of hardware. The image is
hosted here:
http://files.commotionwireless.net/Commotion-OpenBTS-x86.iso. Just put
it on a USB drive with unetbootin or the tool of your choice, and boot
from that.

cheers,
Dan

-- 
Dan Staples

Open Technology Institute
https://commotionwireless.net

"
1208,Commotion-dev, Commotion-OpenBTS ready for testing,"Tue, 12 Mar 2013 18:52:46 -0400",-0400,Dan Staples,"Also, the Fairwaves UmTRX is supported as well.

Dan

On Tue 12 Mar 2013 02:49:23 PM EDT, Dan Staples wrote:
> I've put together a custom x86 Ubuntu live image with the components
> needed to make voice calls over a Commotion mesh. This includes Serval,
> OLSRd, OpenBTS, and Asterisk. When you boot into the image, you are
> presented with a configuration wizard that asks you to select which GSM
> hardware you have, and it will automatically configure the proper
> transceiver driver and start everything up. Supported hardware includes
> the Range RAD1 and the Ettus USRP1, USRP2, N200 series, B100 series, and
> E100 series.
>
> After running the wizard, you should be able to make calls between GSM
> phones, and between Serval and GSM phones.
>
> If anyone with GSM hardware could test this, that would be very helpful.
> I haven't been able to do testing due to lack of hardware. The image is
> hosted here:
> http://files.commotionwireless.net/Commotion-OpenBTS-x86.iso. Just put
> it on a USB drive with unetbootin or the tool of your choice, and boot
> from that.
>
> cheers,
> Dan
"
1209,Commotion-dev, Commotion-OpenBTS ready for testing,"Wed, 13 Mar 2013 13:55:02 +1030",+1030,Paul Gardner-Stephen,"Hi Dan, All,

Fantastic work. I look forward to playing with this when I get a spare moment.

Not entirely related, and I can't remember what I have shared already,
but we have done further testing with our Mesh Helper devices.  This
includes links of >3KM, and almost a mile in a rural valley with trees
and general obstructions:

http://servalpaul.blogspot.com.au/2013/02/3km-mesh-link-using-mesh-helper.html
http://servalpaul.blogspot.com.au/2013/03/testing-serval-mesh-helper-prototypes.html

While we need to do more work on the firmware of the radios we are
using to get full ad-hoc style mesh operation, these ranges are _very_
encouraging, especially the 1.27KM in the valley, as this is a real
community with real rural obstacles and inter-dwelling distances.

We also had what looked like an almost-link at 27KM, which is not out
of the question with the link budget of these radios.  We think the
forward error correction let us down on that occasion, but further
testing will be required to know for sure.  We might have to go down
to the beach here, and see how far we can walk along the coast from a
mesh helper placed on a pier.

These ranges were all using omni antennae, so no careful aiming was
required.  This is a big advantage for setup.  In fact, one use-case
of the mesh helpers is to share the GPS location data of each unit, so
that WiFi point-to-point links can be aimed to establish high-bit-rate
links between them, where possible.

I say where possible, because in one test we were able to get link
through about 200m of vegetation with Mesh Helpers with omnis where it
was impossible to get 5GHz Ruckus directional units to establish link.
It took about 2 minutes to find a nice spot with good link strength
with the Mesh Helper, and about 3 hours to eventually give up with the
Ruckus unit.

It would be quite easy to add support for the Mesh Helper radios into
this OS image, as it is just a case of looking at any USB serial ports
that come up, and adding them to serval.conf, after optionally making
sure the radios are appropriately configured for local regulations
(frequency, TX power etc).

This would eventually allow SMS/MeshMS, voicemail and VoMP voice call
traffic between phones on the mesh, as well as provide a means for
pushing config/software updates among nodes distributed over a wide
area.

Together, this utility, along with the ease of setting up the links
over longer distances, including as a way to make it easier to setup
subsequent WiFi long-shots, strikes me as offering a big missing piece
to making the Commotion kit really easy to setup.

While the prototype units are currently ""bucket sized"" the core
electronics is pocket sized (TP-LINK WR703N + small radio,USB stick
and USB2serial adapter), and it would be possible to make pocket sized
units with similar ranges, just with a smaller battery (the current
big battery can last several days, and that is without us optimising
power consumption at all).  This, as well as improving the radio
firmware to offer true ""ad-hoc"" meshing are the two main areas that we
would like to work on to improve the Mesh Helpers.

Of course, this is my view from close-up and creating these things.
So I would be very interested in hearing others perspectives on this,
and whether you feel that it would make a valuable part of Commotion.

Paul.

On Wed, Mar 13, 2013 at 7:49 AM, Dan Staples
<danstaples at opentechinstitute.org> wrote:
> I've put together a custom x86 Ubuntu live image with the components
> needed to make voice calls over a Commotion mesh. This includes Serval,
> OLSRd, OpenBTS, and Asterisk. When you boot into the image, you are
> presented with a configuration wizard that asks you to select which GSM
> hardware you have, and it will automatically configure the proper
> transceiver driver and start everything up. Supported hardware includes
> the Range RAD1 and the Ettus USRP1, USRP2, N200 series, B100 series, and
> E100 series.
>
> After running the wizard, you should be able to make calls between GSM
> phones, and between Serval and GSM phones.
>
> If anyone with GSM hardware could test this, that would be very helpful.
> I haven't been able to do testing due to lack of hardware. The image is
> hosted here:
> http://files.commotionwireless.net/Commotion-OpenBTS-x86.iso. Just put
> it on a USB drive with unetbootin or the tool of your choice, and boot
> from that.
>
> cheers,
> Dan
>
> --
> Dan Staples
>
> Open Technology Institute
> https://commotionwireless.net
>
> _______________________________________________
> Commotion-dev mailing list
> Commotion-dev at lists.chambana.net
> https://lists.chambana.net/mailman/listinfo/commotion-dev
"
1210,Commotion-dev, Can't talk between desktop OLSRd and Commotion,"Wed, 13 Mar 2013 16:15:52 -0400",-0400,Hans-Christoph Steiner,"This is a super useful report!  Thanks for taking the time to do this.  Sounds
like something that we should take up on the olsr-dev list, since it affects
olsr directly.  Do you want to post this there?  Otherwise I'm happy to do it.

.hc

On 03/09/2013 01:34 PM, Mikael Nordfeldth wrote:
> 2013-03-08 19:27, Hans-Christoph Steiner skrev:
"
1211,Commotion-dev, Commotion DR1 is available for download,"Wed, 13 Mar 2013 19:29:52 -0400",-0400,seamus tuohy,"Commotion's first developer release (DR1) is now available for testing. 
This version replaces our September 2012 pre-release (PR3) and adds 
several new features. Though Commotion developers tested each component 
feature, we will begin extensive pre-release testing of the entire DR1 
suite in the coming weeks. We hope you will join us in testing the new 
components.

Pre-built Commotion packages for Ubiquiti routers and Android devices 
can be found at https://commotionwireless.net/download, with DR1 listed 
under Nightly Builds and PR3 listed as Stable. You can view the 
Commotion source code at 
https://github.com/opentechinstitute/commotion-openwrt . You will find 
links to many of the new packages in the Readme, as well as some quick 
notes on building an image for your own hardware.

The DR1 release brings a complete overhaul to the Commotion system while 
still ensuring compatibility with PR3 release Commotion nodes. 
Forward-facing features include a new theme, easy ""quickstart"" node 
configuration, application announcement and discovery, and a one-click 
troubleshooting tool. Behind the scenes, DR1 contains a core Commotion 
daemon and new cryptographic system.

The quickstart tool provides an easy interface for node configuration. 
The Commotion daemon provides a common mesh network management interface 
through an embedded library, and forms the core of future Commotion 
platform development. Commotion's new application suite uses mDNS to 
announce local applications across the network. Users can find local 
applications using the router?s web-based application portal. Node 
owners can easily manage and customize application portals for better 
community application support. The application portal integrates the 
Serval Project's key management daemon, which provides transparent 
message encryption and authentication. Finally, the debugging helper 
creates custom, downloadable documents for offline debugging by network 
administrators.

Each of these tools still requires thorough testing to ensure they are 
both stable and well documented. If you are an interested user, 
developer, hacker, or are just plain interested, we would love to hear 
your feedback. Following initial internal testing, DR1 will undergo lab 
testing on an eight-node physical test environment. Then we will install 
on the Open Technology Institute?s (OTI) 18-node testbed community 
network. Once the software is deemed stable, we will deploy it on an 
active six-node community wireless network for user testing. We have 
pre-built images for testing on Ubiquiti wireless hardware. The source 
code includes instructions for building Commotion?s test release on 
other hardware for those that wish to test on their own devices.

We will update the documentation to incorporate user feedback once 
testing is completed. After the build has been thoroughly tested and DR1 
has become stable, we will update the warning label on the downloads 
page to reflect the capabilities and limitations of this release. We 
will then bring the other Commotion platforms up to feature parity with 
the DR1 Commotion OpenWRT release.
"
1212,Commotion-dev, OSX Meshbook,"Tue, 12 Mar 2013 19:47:17 -0700",-0700,Bradley Greenwood,"Hi All,

For you 10.7 and 10.8 folk, please give this a test.  



I need to fix some pathing issues (dlopen with ld_lib_path on the olsrd execution), but the major pieces are here.  

-b

Bradley Greenwood | bradley at scal.io | Scal.io


"
1213,Commotion-dev, OSX Meshbook,"Thu, 14 Mar 2013 11:40:01 -0400",-0400,Andrew Reynolds,"Hi Bradley,

I've only had time for a quick test, but here's what I see so far:
1. The logo screen in the .dmg install folder reads
commotionwireless.net v1.0. This needs to read 0.1 asap to avoid
confusion. Commotion as a project is not at a 1.0 release yet.

Once meshbook has stabilized a bit, we can begin referencing the new
feature-based releases (e.g., PR3, DR1, etc.) as well.

2. The startup messages indicate that meshbook is killing an olsrd
process, starting a new process, and joining a network, but Settings >
Status doesn't seem to jive with that. Status shows IP address: (null)
and OLSRD: (null).

3. I occasionally get a Parameter error when attempting to join
commotionwireless.net. Settings > Log is empty.

I like where it's going though. We should begin talking about
supplemental feature sets for the desktop clients, so we have a
consistent interaction across platforms.

-andrew


On 03/12/2013 10:47 PM, Bradley Greenwood wrote:
> Hi All,
> 
> For you 10.7 and 10.8 folk, please give this a test.
> I need to fix some pathing issues (dlopen with ld_lib_path on the olsrd 
> execution), but the major pieces are here.
> 
> -b
> 
> Bradley Greenwood | bradley at scal.io <mailto:bradley at scal.io> | Scal.io
> 
> 
> 
> 
> _______________________________________________
> Commotion-dev mailing list
> Commotion-dev at lists.chambana.net
> https://lists.chambana.net/mailman/listinfo/commotion-dev
> 


"
1214,Commotion-dev, OSX Meshbook,"Thu, 14 Mar 2013 11:41:51 -0400",-0400,Andrew Reynolds,"Hi Bradley,

I've only had time for a quick test, but here's what I see so far:
1. The logo screen in the .dmg install folder reads
commotionwireless.net v1.0. This needs to read 0.1 asap to avoid
confusion. Commotion as a project is not at a 1.0 release yet.

Once meshbook has stabilized a bit, we can begin referencing the new
feature-based releases (e.g., PR3, DR1, etc.) as well.

2. The startup messages indicate that meshbook is killing an olsrd
process, starting a new process, and joining a network, but Settings >
Status doesn't seem to jive with that. Status shows IP address: (null)
and OLSRD: (null).

3. I occasionally get a Parameter error when attempting to join
commotionwireless.net. Settings > Log is empty.

I like where it's going though. We should begin talking about
supplemental feature sets for the desktop clients, so we have a
consistent interaction across platforms.

-andrew


On 03/12/2013 10:47 PM, Bradley Greenwood wrote:
> Hi All,
> 
> For you 10.7 and 10.8 folk, please give this a test.
> I need to fix some pathing issues (dlopen with ld_lib_path on the olsrd 
> execution), but the major pieces are here.
> 
> -b
> 
> Bradley Greenwood | bradley at scal.io <mailto:bradley at scal.io> | Scal.io
> 
> 
> 
> 
> _______________________________________________
> Commotion-dev mailing list
> Commotion-dev at lists.chambana.net
> https://lists.chambana.net/mailman/listinfo/commotion-dev
> 


"
1215,Commotion-dev, Python-based testing framework across Ubuntu/Debian,"Fri, 15 Mar 2013 13:48:38 -0500",-0500,Ben West,"Hi All,

In lieu of recent progress towards getting Commotion to a working state on
Android, Ubuntu/Debian. and now possibly OSX, what thoughts about building
a simple and (to whatever degree feasible) cross-platform testing framework
in Python?

The general idea is that python scripts could be used to start hitting the
test vectors listed here (note the server appears to be really slow):

https://code.commotionwireless.net/projects/commotion/wiki/Testing#Mesh-Routing-Tech-Evaluations
https://code.commotionwireless.net/projects/commotion/wiki/Testing#Testbed-Requirements-based-on-test-suite-defined-above
https://code.commotionwireless.net/projects/commotion/wiki/Testing#Release-Candidate-Test-Regimen

That is, assuming Ubuntu/Debian/OSX's python support as a starting point,
could these lighweight python implementations allow for some unified test
scripts across platforms?

http://qpython.com/ (for Android)
https://dev.openwrt.org/browser/packages/lang/python/Makefile (for OpenWRT,
to be compiled as module)

Has anyone on the list had good experience with these Python
implementations?

My original thought for such testing scripts was to do them in shell
scripting, but I'm guessing Python would be easier and more powerful.

-- 
Ben West
http://gowasabi.net
ben at gowasabi.net
314-246-9434
"
1216,Commotion-dev, Python-based testing framework across,"Fri, 15 Mar 2013 15:52:20 -0400",-0400,Hans of Guardian,"
Python is great for writing tests, and runs in many places.  If the tests themselves are based on TCP/IP and jsoninfo, and written in python, then I think they'll be quite portable, and should run fine on Windows too.

The tricky part is that each platform is going to have different ways of getting things into adhoc mode.  You can do something quite similar with Android and GNU/Linux since they both use the Linux kernel, but honestly, recent versions of NetworkManager are so much better to deal with for setting up adhoc than the low level stuff.  So that means Android and GNU/Linux would be handled differently.

.hc

On Mar 15, 2013, at 2:48 PM, Ben West wrote:

> Hi All,
> 
> In lieu of recent progress towards getting Commotion to a working state on Android, Ubuntu/Debian. and now possibly OSX, what thoughts about building a simple and (to whatever degree feasible) cross-platform testing framework in Python?
> 
> The general idea is that python scripts could be used to start hitting the test vectors listed here (note the server appears to be really slow):
> 
> https://code.commotionwireless.net/projects/commotion/wiki/Testing#Mesh-Routing-Tech-Evaluations
> https://code.commotionwireless.net/projects/commotion/wiki/Testing#Testbed-Requirements-based-on-test-suite-defined-above
> https://code.commotionwireless.net/projects/commotion/wiki/Testing#Release-Candidate-Test-Regimen
> 
> That is, assuming Ubuntu/Debian/OSX's python support as a starting point, could these lighweight python implementations allow for some unified test scripts across platforms?
> 
> http://qpython.com/ (for Android)
> https://dev.openwrt.org/browser/packages/lang/python/Makefile (for OpenWRT, to be compiled as module)
> 
> Has anyone on the list had good experience with these Python implementations?
> 
> My original thought for such testing scripts was to do them in shell scripting, but I'm guessing Python would be easier and more powerful.
> 
> -- 
> Ben West
> http://gowasabi.net
> ben at gowasabi.net
> 314-246-9434
> _______________________________________________
> Commotion-dev mailing list
> Commotion-dev at lists.chambana.net
> https://lists.chambana.net/mailman/listinfo/commotion-dev

"
1217,Commotion-dev, Python-based testing framework across,"Fri, 15 Mar 2013 15:03:03 -0500",-0500,Ben West,"Hi Hans,

Thanks for the response.  Indeed, each platform would have its own
eccentric way to establish the adhoc connection.  So writing any such test
scripts would have to account for that, even if one wasn't attempting to
share any portions of the test scripts.

My curiosity in leveraging the cross-platform nature of Python (albeit with
platform-specific hooks to radio mgmt) is that such would not be so easy
with tests written in shell scripting.  Likewise, script hooks for those
instances where we can rely on NetworkManager, instead of having the Python
script itself start the adhoc interface.

Since the list of desired tests is pretty exhaustive, I think *any* extent
to which portions of those tests could be implemented across multiple
platforms simultaneously indicates those tests that ever actually get
implemented. ;)

On Fri, Mar 15, 2013 at 2:52 PM, Hans of Guardian <hans at guardianproject.info
> wrote:

>
> Python is great for writing tests, and runs in many places.  If the tests
> themselves are based on TCP/IP and jsoninfo, and written in python, then I
> think they'll be quite portable, and should run fine on Windows too.
>
> The tricky part is that each platform is going to have different ways of
> getting things into adhoc mode.  You can do something quite similar with
> Android and GNU/Linux since they both use the Linux kernel, but honestly,
> recent versions of NetworkManager are so much better to deal with for
> setting up adhoc than the low level stuff.  So that means Android and
> GNU/Linux would be handled differently.
>
> .hc
>
> On Mar 15, 2013, at 2:48 PM, Ben West wrote:
>
> Hi All,
>
> In lieu of recent progress towards getting Commotion to a working state on
> Android, Ubuntu/Debian. and now possibly OSX, what thoughts about building
> a simple and (to whatever degree feasible) cross-platform testing framework
> in Python?
>
> The general idea is that python scripts could be used to start hitting the
> test vectors listed here (note the server appears to be really slow):
>
>
> https://code.commotionwireless.net/projects/commotion/wiki/Testing#Mesh-Routing-Tech-Evaluations
>
> https://code.commotionwireless.net/projects/commotion/wiki/Testing#Testbed-Requirements-based-on-test-suite-defined-above
>
> https://code.commotionwireless.net/projects/commotion/wiki/Testing#Release-Candidate-Test-Regimen
>
> That is, assuming Ubuntu/Debian/OSX's python support as a starting point,
> could these lighweight python implementations allow for some unified test
> scripts across platforms?
>
> http://qpython.com/ (for Android)
> https://dev.openwrt.org/browser/packages/lang/python/Makefile (for
> OpenWRT, to be compiled as module)
>
> Has anyone on the list had good experience with these Python
> implementations?
>
> My original thought for such testing scripts was to do them in shell
> scripting, but I'm guessing Python would be easier and more powerful.
>
> --
> Ben West
> http://gowasabi.net
> ben at gowasabi.net
> 314-246-9434
> _______________________________________________
> Commotion-dev mailing list
> Commotion-dev at lists.chambana.net
> https://lists.chambana.net/mailman/listinfo/commotion-dev
>
>
"
1218,Commotion-dev, Python-based testing framework across,"Fri, 15 Mar 2013 23:14:49 -0400",-0400,Andrew Reynolds,"It sounds reasonable. Could you sketch out what you have in mind? How
much of the network setup were you thinking of building into the test
framework vs. simply triggering and testing?

-andrew

On 03/15/2013 02:48 PM, Ben West wrote:
> Hi All,
> 
> In lieu of recent progress towards getting Commotion to a working state on
> Android, Ubuntu/Debian. and now possibly OSX, what thoughts about building
> a simple and (to whatever degree feasible) cross-platform testing framework
> in Python?
> 
> The general idea is that python scripts could be used to start hitting the
> test vectors listed here (note the server appears to be really slow):
> 
> https://code.commotionwireless.net/projects/commotion/wiki/Testing#Mesh-Routing-Tech-Evaluations
> https://code.commotionwireless.net/projects/commotion/wiki/Testing#Testbed-Requirements-based-on-test-suite-defined-above
> https://code.commotionwireless.net/projects/commotion/wiki/Testing#Release-Candidate-Test-Regimen
> 
> That is, assuming Ubuntu/Debian/OSX's python support as a starting point,
> could these lighweight python implementations allow for some unified test
> scripts across platforms?
> 
> http://qpython.com/ (for Android)
> https://dev.openwrt.org/browser/packages/lang/python/Makefile (for OpenWRT,
> to be compiled as module)
> 
> Has anyone on the list had good experience with these Python
> implementations?
> 
> My original thought for such testing scripts was to do them in shell
> scripting, but I'm guessing Python would be easier and more powerful.
> 
> 
> 
> _______________________________________________
> Commotion-dev mailing list
> Commotion-dev at lists.chambana.net
> https://lists.chambana.net/mailman/listinfo/commotion-dev
> 


"
1219,Commotion-dev, Device compatibility for Mesh Tether (and Serval?),"Sun, 17 Mar 2013 15:01:02 -0500",-0500,Ben West,"Hi All,

I've been surfing the listserv archive, and pestering poor Hans, in search
of a handset known to be compatible with the Mesh Tether app, and similarly
with Serval.  I would like to get such handset myself.

However, since Mesh Tether is known NOT to work with AndroidOS 4.x, I have
to locate older, used handsets, adding to the challenge.

Many devices have been reported on this listserv as possibly working.
However, I believe Hans clarified that only these devices are known to work
fully.

   - HTC Desire running android 2.3
   - HTC Wildfire running CyanogenMod 6.1.0
   - In general, HTC devices running 2.x (especially the Incredible)
   - Google Nexus One (stock 2.3.3), and *NOT* any newer Nexi

In contrast, these devices have been reported to work somewhat, but are
expected to be flakey:

   - HTC myTouch 3G (kind of works)
   - Samsung Tabs running Android 3.2
   - Samsung Galaxy S2
   - Samsung Galaxy Player 5.0 running stock 2.3.3 (works only sometimes)
   - Motorola Droid/Milestone running CyanogenMod 7 (mostly works)

Hans mentioned that although Samsung handsets appear work, and have been
tested to a small extent, they are expected to be quite flakey/unreliable.
Likewise, the Samsungs require custom kernels and/or custom kernel options
specified at boot, correct?

Please respond to this thread if you have successfully tested a handset,
and tested it for reasonable duration of time to ensure no flakiness.  Or,
please respond if any of the handset mentioned above is incorrectly listed
as working.

Ideally, the responses to this thread can be used to better populate this
list on the wiki:

https://code.commotionwireless.net/projects/commotion/wiki/Commotion_Android_Supported_Hardware

-- 
Ben West
http://gowasabi.net
ben at gowasabi.net
314-246-9434
"
1220,Commotion-dev, Device compatibility for Mesh Tether (and,"Sun, 17 Mar 2013 16:39:44 -0400",-0400,Andrew Reynolds,"Thanks for the prod.

The Motorola Atrix 4G on 2.3.6 works consistently.

-andrew

On 03/17/2013 04:01 PM, Ben West wrote:
> Hi All,
> 
> I've been surfing the listserv archive, and pestering poor Hans, in search
> of a handset known to be compatible with the Mesh Tether app, and similarly
> with Serval.  I would like to get such handset myself.
> 
> However, since Mesh Tether is known NOT to work with AndroidOS 4.x, I have
> to locate older, used handsets, adding to the challenge.
> 
> Many devices have been reported on this listserv as possibly working.
> However, I believe Hans clarified that only these devices are known to work
> fully.
> 
>    - HTC Desire running android 2.3
>    - HTC Wildfire running CyanogenMod 6.1.0
>    - In general, HTC devices running 2.x (especially the Incredible)
>    - Google Nexus One (stock 2.3.3), and *NOT* any newer Nexi
> 
> In contrast, these devices have been reported to work somewhat, but are
> expected to be flakey:
> 
>    - HTC myTouch 3G (kind of works)
>    - Samsung Tabs running Android 3.2
>    - Samsung Galaxy S2
>    - Samsung Galaxy Player 5.0 running stock 2.3.3 (works only sometimes)
>    - Motorola Droid/Milestone running CyanogenMod 7 (mostly works)
> 
> Hans mentioned that although Samsung handsets appear work, and have been
> tested to a small extent, they are expected to be quite flakey/unreliable.
> Likewise, the Samsungs require custom kernels and/or custom kernel options
> specified at boot, correct?
> 
> Please respond to this thread if you have successfully tested a handset,
> and tested it for reasonable duration of time to ensure no flakiness.  Or,
> please respond if any of the handset mentioned above is incorrectly listed
> as working.
> 
> Ideally, the responses to this thread can be used to better populate this
> list on the wiki:
> 
> https://code.commotionwireless.net/projects/commotion/wiki/Commotion_Android_Supported_Hardware
> 
> 
> 
> _______________________________________________
> Commotion-dev mailing list
> Commotion-dev at lists.chambana.net
> https://lists.chambana.net/mailman/listinfo/commotion-dev
> 


"
1221,Commotion-dev, Device compatibility for Mesh Tether (and,"Mon, 18 Mar 2013 08:21:22 +1030",+1030,Jeremy Lakeman,"Samsung Galaxy S2 running 2.3 work just fine with Serval. You should
be able to flash them with CyanogenMod 7.

On Mon, Mar 18, 2013 at 6:31 AM, Ben West <ben at gowasabi.net> wrote:
> Hi All,
>
> I've been surfing the listserv archive, and pestering poor Hans, in search
> of a handset known to be compatible with the Mesh Tether app, and similarly
> with Serval.  I would like to get such handset myself.
>
> However, since Mesh Tether is known NOT to work with AndroidOS 4.x, I have
> to locate older, used handsets, adding to the challenge.
>
> Many devices have been reported on this listserv as possibly working.
> However, I believe Hans clarified that only these devices are known to work
> fully.
>
> HTC Desire running android 2.3
> HTC Wildfire running CyanogenMod 6.1.0
> In general, HTC devices running 2.x (especially the Incredible)
> Google Nexus One (stock 2.3.3), and NOT any newer Nexi
>
> In contrast, these devices have been reported to work somewhat, but are
> expected to be flakey:
>
> HTC myTouch 3G (kind of works)
> Samsung Tabs running Android 3.2
> Samsung Galaxy S2
> Samsung Galaxy Player 5.0 running stock 2.3.3 (works only sometimes)
> Motorola Droid/Milestone running CyanogenMod 7 (mostly works)
>
> Hans mentioned that although Samsung handsets appear work, and have been
> tested to a small extent, they are expected to be quite flakey/unreliable.
> Likewise, the Samsungs require custom kernels and/or custom kernel options
> specified at boot, correct?
>
> Please respond to this thread if you have successfully tested a handset, and
> tested it for reasonable duration of time to ensure no flakiness.  Or,
> please respond if any of the handset mentioned above is incorrectly listed
> as working.
>
> Ideally, the responses to this thread can be used to better populate this
> list on the wiki:
>
> https://code.commotionwireless.net/projects/commotion/wiki/Commotion_Android_Supported_Hardware
>
> --
> Ben West
> http://gowasabi.net
> ben at gowasabi.net
> 314-246-9434
>
> _______________________________________________
> Commotion-dev mailing list
> Commotion-dev at lists.chambana.net
> https://lists.chambana.net/mailman/listinfo/commotion-dev
>
"
1222,Commotion-dev, Device compatibility for Mesh Tether (and,"Sun, 17 Mar 2013 17:52:51 -0400",-0400,Dan Staples,"I can confirm that the Samsung Galaxy Nexus does *not* work for Mesh
Tether. Though it appears to work with Serval.

Will Hawkins and I were talking about having a discussion soon to plan
how to improve Commotion-Android's adhoc support, now that DR1 is out.
There has been past discussion on this list about how Mesh Tether,
Serval, and SPAN all do ad-hoc differently, and we should figure out
concretely how we want to move forward on this. It would be beneficial
to get everyone's thoughts and expertise on this planning. Perhaps we
can start a separate thread about that, if you think that's needed.

On 03/17/2013 04:39 PM, Andrew Reynolds wrote:
> Thanks for the prod.
>
> The Motorola Atrix 4G on 2.3.6 works consistently.
>
> -andrew
>
> On 03/17/2013 04:01 PM, Ben West wrote:
"
1223,Commotion-dev, Merging adhoc tricks...,"Mon, 18 Mar 2013 09:23:01 +1030",+1030,Jeremy Lakeman,"While working to reduce the importance of root access in Serval Mesh,
which is more about educating users about our current capabilities
without root, I've been very tempted to replace all of our adhoc
control code. Our current process is very convoluted for the things
it's actually doing.

This is roughly the current process that Serval uses to find loadable
wifi modules, which is itself based on the old wifi-tether app. With a
couple of little tweaks we should implement;

Turn wifi client on and off through the SDK, compare the list of
loaded / running modules, look for known wifi module names &
interfaces.

If the wifi module has been compiled into the kernel, there's no point
trying to load it dynamically (eg most google android 4.0+ devices),
so just skip to configuring the interface and see it that works.

Look in the filesystem for a dozen or so known modules, firmware blobs
etc, matching against the above list of loadable modules.

Not one of those? Start scanning the filesystem;
- read libhardware_legacy.so looking for module path and parameters,
check that it matches the detected hardware
- find all .ko files
- read the contents of scripts and config files looking for module parameters

For tiwlan chipsets, find known wlan_loader & firmware paths, copy
tiwlan.ini and make a couple of changes.

For broadcom chipsets, copy nvram.txt and make sure the MAC address is
unique (for huawei ideos), make sure ""dhd_pkt_filter_enable=0"" is in
the module parameters or the mesh will be useless when the screen
turns off.

Try loading each module found above and attempt to configure the interface.

If setting adhoc mode fails, you'll probably need a custom kernel.

If at any time we receive a broadcast Intent indicating that wifi
client or hotspot failed to start; bring the interface down, unload
the wifi module and start the operation again.

On Mon, Mar 18, 2013 at 8:22 AM, Dan Staples
<danstaples at opentechinstitute.org> wrote:
> I can confirm that the Samsung Galaxy Nexus does *not* work for Mesh Tether.
> Though it appears to work with Serval.
>
> Will Hawkins and I were talking about having a discussion soon to plan how
> to improve Commotion-Android's adhoc support, now that DR1 is out. There has
> been past discussion on this list about how Mesh Tether, Serval, and SPAN
> all do ad-hoc differently, and we should figure out concretely how we want
> to move forward on this. It would be beneficial to get everyone's thoughts
> and expertise on this planning. Perhaps we can start a separate thread about
> that, if you think that's needed.
>
>
> On 03/17/2013 04:39 PM, Andrew Reynolds wrote:
>
> Thanks for the prod.
>
> The Motorola Atrix 4G on 2.3.6 works consistently.
>
> -andrew
>
> On 03/17/2013 04:01 PM, Ben West wrote:
>
> Hi All,
>
> I've been surfing the listserv archive, and pestering poor Hans, in search
> of a handset known to be compatible with the Mesh Tether app, and similarly
> with Serval.  I would like to get such handset myself.
>
> However, since Mesh Tether is known NOT to work with AndroidOS 4.x, I have
> to locate older, used handsets, adding to the challenge.
>
> Many devices have been reported on this listserv as possibly working.
> However, I believe Hans clarified that only these devices are known to work
> fully.
>
>    - HTC Desire running android 2.3
>    - HTC Wildfire running CyanogenMod 6.1.0
>    - In general, HTC devices running 2.x (especially the Incredible)
>    - Google Nexus One (stock 2.3.3), and *NOT* any newer Nexi
>
> In contrast, these devices have been reported to work somewhat, but are
> expected to be flakey:
>
>    - HTC myTouch 3G (kind of works)
>    - Samsung Tabs running Android 3.2
>    - Samsung Galaxy S2
>    - Samsung Galaxy Player 5.0 running stock 2.3.3 (works only sometimes)
>    - Motorola Droid/Milestone running CyanogenMod 7 (mostly works)
>
> Hans mentioned that although Samsung handsets appear work, and have been
> tested to a small extent, they are expected to be quite flakey/unreliable.
> Likewise, the Samsungs require custom kernels and/or custom kernel options
> specified at boot, correct?
>
> Please respond to this thread if you have successfully tested a handset,
> and tested it for reasonable duration of time to ensure no flakiness.  Or,
> please respond if any of the handset mentioned above is incorrectly listed
> as working.
>
> Ideally, the responses to this thread can be used to better populate this
> list on the wiki:
>
> https://code.commotionwireless.net/projects/commotion/wiki/Commotion_Android_Supported_Hardware
>
>
>
> _______________________________________________
> Commotion-dev mailing list
> Commotion-dev at lists.chambana.net
> https://lists.chambana.net/mailman/listinfo/commotion-dev
>
>
>
>
> _______________________________________________
> Commotion-dev mailing list
> Commotion-dev at lists.chambana.net
> https://lists.chambana.net/mailman/listinfo/commotion-dev
>
>
> --
> Dan Staples
>
> Open Technology Institute
> https://commotionwireless.net
>
>
> _______________________________________________
> Commotion-dev mailing list
> Commotion-dev at lists.chambana.net
> https://lists.chambana.net/mailman/listinfo/commotion-dev
>
"
1224,Commotion-dev, Device compatibility for Mesh Tether (and,"Mon, 18 Mar 2013 13:30:33 -0500",-0500,Ben West,"Looks like this thread has prompted more detail to appear on the Mesh
Tether compatibility list.  Awesome!

I also added a blurb that the Motorola Atrix 2 probably would *not* work,
since it is (naturally) a completely different chipset than the Atrix 4G.
https://code.commotionwireless.net/projects/commotion/wiki/Commotion_Android_Supported_Hardware

On Sun, Mar 17, 2013 at 3:39 PM, Andrew Reynolds <
andrew at opentechinstitute.org> wrote:

> Thanks for the prod.
>
> The Motorola Atrix 4G on 2.3.6 works consistently.
>
> -andrew
>
> On 03/17/2013 04:01 PM, Ben West wrote:
> > Hi All,
> >
> > I've been surfing the listserv archive, and pestering poor Hans, in
> search
> > of a handset known to be compatible with the Mesh Tether app, and
> similarly
> > with Serval.  I would like to get such handset myself.
> >
> > However, since Mesh Tether is known NOT to work with AndroidOS 4.x, I
> have
> > to locate older, used handsets, adding to the challenge.
> >
> > Many devices have been reported on this listserv as possibly working.
> > However, I believe Hans clarified that only these devices are known to
> work
> > fully.
> >
> >    - HTC Desire running android 2.3
> >    - HTC Wildfire running CyanogenMod 6.1.0
> >    - In general, HTC devices running 2.x (especially the Incredible)
> >    - Google Nexus One (stock 2.3.3), and *NOT* any newer Nexi
> >
> > In contrast, these devices have been reported to work somewhat, but are
> > expected to be flakey:
> >
> >    - HTC myTouch 3G (kind of works)
> >    - Samsung Tabs running Android 3.2
> >    - Samsung Galaxy S2
> >    - Samsung Galaxy Player 5.0 running stock 2.3.3 (works only sometimes)
> >    - Motorola Droid/Milestone running CyanogenMod 7 (mostly works)
> >
> > Hans mentioned that although Samsung handsets appear work, and have been
> > tested to a small extent, they are expected to be quite
> flakey/unreliable.
> > Likewise, the Samsungs require custom kernels and/or custom kernel
> options
> > specified at boot, correct?
> >
> > Please respond to this thread if you have successfully tested a handset,
> > and tested it for reasonable duration of time to ensure no flakiness.
>  Or,
> > please respond if any of the handset mentioned above is incorrectly
> listed
> > as working.
> >
> > Ideally, the responses to this thread can be used to better populate this
> > list on the wiki:
> >
> >
> https://code.commotionwireless.net/projects/commotion/wiki/Commotion_Android_Supported_Hardware
> >
> >
> >
> > _______________________________________________
> > Commotion-dev mailing list
> > Commotion-dev at lists.chambana.net
> > https://lists.chambana.net/mailman/listinfo/commotion-dev
> >
>
>
>
> _______________________________________________
> Commotion-dev mailing list
> Commotion-dev at lists.chambana.net
> https://lists.chambana.net/mailman/listinfo/commotion-dev
>
"
1225,Commotion-dev, Device compatibility for Mesh Tether (and,"Tue, 19 Mar 2013 06:05:08 +1030",+1030,Paul Gardner-Stephen,"Hello,

On Mon, Mar 18, 2013 at 8:22 AM, Dan Staples
<danstaples at opentechinstitute.org> wrote:
> I can confirm that the Samsung Galaxy Nexus does *not* work for Mesh Tether.
> Though it appears to work with Serval.
>
> Will Hawkins and I were talking about having a discussion soon to plan how
> to improve Commotion-Android's adhoc support, now that DR1 is out. There has
> been past discussion on this list about how Mesh Tether, Serval, and SPAN
> all do ad-hoc differently, and we should figure out concretely how we want
> to move forward on this. It would be beneficial to get everyone's thoughts
> and expertise on this planning. Perhaps we can start a separate thread about
> that, if you think that's needed.

I think the best step is to start combining the strengths of each into
a single dedicated ad-hoc on android application.  That application
may well be one of the above, rather than creating yet another new
thing.
My feeling is that SPAN may well be the logical application to extend
in this way, and then we all just add hooks in our applications to
make use of the services that SPAN provides.

Paul.

> On 03/17/2013 04:39 PM, Andrew Reynolds wrote:
>
> Thanks for the prod.
>
> The Motorola Atrix 4G on 2.3.6 works consistently.
>
> -andrew
>
> On 03/17/2013 04:01 PM, Ben West wrote:
>
> Hi All,
>
> I've been surfing the listserv archive, and pestering poor Hans, in search
> of a handset known to be compatible with the Mesh Tether app, and similarly
> with Serval.  I would like to get such handset myself.
>
> However, since Mesh Tether is known NOT to work with AndroidOS 4.x, I have
> to locate older, used handsets, adding to the challenge.
>
> Many devices have been reported on this listserv as possibly working.
> However, I believe Hans clarified that only these devices are known to work
> fully.
>
>    - HTC Desire running android 2.3
>    - HTC Wildfire running CyanogenMod 6.1.0
>    - In general, HTC devices running 2.x (especially the Incredible)
>    - Google Nexus One (stock 2.3.3), and *NOT* any newer Nexi
>
> In contrast, these devices have been reported to work somewhat, but are
> expected to be flakey:
>
>    - HTC myTouch 3G (kind of works)
>    - Samsung Tabs running Android 3.2
>    - Samsung Galaxy S2
>    - Samsung Galaxy Player 5.0 running stock 2.3.3 (works only sometimes)
>    - Motorola Droid/Milestone running CyanogenMod 7 (mostly works)
>
> Hans mentioned that although Samsung handsets appear work, and have been
> tested to a small extent, they are expected to be quite flakey/unreliable.
> Likewise, the Samsungs require custom kernels and/or custom kernel options
> specified at boot, correct?
>
> Please respond to this thread if you have successfully tested a handset,
> and tested it for reasonable duration of time to ensure no flakiness.  Or,
> please respond if any of the handset mentioned above is incorrectly listed
> as working.
>
> Ideally, the responses to this thread can be used to better populate this
> list on the wiki:
>
> https://code.commotionwireless.net/projects/commotion/wiki/Commotion_Android_Supported_Hardware
>
>
>
> _______________________________________________
> Commotion-dev mailing list
> Commotion-dev at lists.chambana.net
> https://lists.chambana.net/mailman/listinfo/commotion-dev
>
>
>
>
> _______________________________________________
> Commotion-dev mailing list
> Commotion-dev at lists.chambana.net
> https://lists.chambana.net/mailman/listinfo/commotion-dev
>
>
> --
> Dan Staples
>
> Open Technology Institute
> https://commotionwireless.net
>
>
> _______________________________________________
> Commotion-dev mailing list
> Commotion-dev at lists.chambana.net
> https://lists.chambana.net/mailman/listinfo/commotion-dev
>
"
1226,Commotion-dev, Can't talk between desktop OLSRd and Commotion,"Mon, 18 Mar 2013 14:38:53 -0500",-0500,Ben West,"Hi All,

I'm having difficulty replicating this solution on my own platform (Ubuntu
quantal i386 under a VMware host, but with real USB wifi radio).

That is, removing the O2 compile option and recompiling olsrd does not seem
to yield a working olsrd for me.  I'm presently trying this out on a real
host instead (i.e. no virtualization), but that is slowly opening a
delightful can of worms w/r/t/ to thge newer Ubuntus dropping legacy video
driver support and other such pleasantness.

If the problem's source has been conclusively narrowed down to the -O2 (and
even -fPIE?) flag added by Hans' patch 310-hardening-fixes.patch, could
Hans just release an updated olsrd package in his PPA, with those flags
removed, as an interim workaround for anyone not able to compile their own?

On Sat, Mar 9, 2013 at 12:34 PM, Mikael Nordfeldth <mmn at hethane.se> wrote:

> 2013-03-08 19:27, Hans-Christoph Steiner skrev:
> > That would be quite useful if you have the time!  Another thing that
> might the
> > whole process easier is to 'git bisect', if you are familiar with that..
> > Right now, Debian squeeze and wheezy have 0.6.2, and Ubuntu has 0.6.1
> and 0.6.3:
> >
> > http://packages.debian.org/search?keywords=olsrd
> > http://packages.ubuntu.com/search?keywords=olsrd
> >
> > So the idea is to find out which version of these we can rely on, and
> which we
> > need to use replacements.
>
> Gah. This seems way more advanced than what I can explain with my
> knowledge. Nevertheless, I did find what caused my error, the -O2 gcc
> optimization switch as patched by Debian package ""hardening fixes"":
>
> 1. I tried compiling various olsrd versions. All worked.
> 2. I tried compiling 0.6.3-5~quantal from 'apt-get source'. It didn't work.
> 3. I tried compiling the 0.6.3.orig source (same as above, without
> debian patches) It worked.
> 4. None of the patches contained any networking code (except the json
> plugin, but disabling it didn't have any effect anyway)
> 5. I found that removing the -O2 switch on line 227 in Makefile.inc, as
> patched by 310-hardening-fixes.patch resolved my invalid argument
> sendto(v4) issue:
>
>  %.o: %.c
>         @echo ""[CC] $<""
> -       $(CC) $(CFLAGS) $(CPPFLAGS) -c -o $@ $<
> +       $(CC) -O2 $(CFLAGS) $(CPPFLAGS) -fPIE -c -o $@ $<
>
>
> Reverting this (and even leaving the -fPIE there but removing -O2) makes
> the resulting binary functional.
>
>
> So the specific problem was caused by the -O2 parameter to gcc, I guess
> making it a compiling/linking issue. I don't know enough about this
> myself though, so I'm attaching ('O2-opts') the output of what that
> level of optimizations means if anyone is interested (gcc -c -Q -O2
> --help=optimizers)
>
> More info on my build environment is below:
>
> $ gcc -v
> Using built-in specs.
> COLLECT_GCC=gcc
> COLLECT_LTO_WRAPPER=/usr/lib/gcc/x86_64-linux-gnu/4.7/lto-wrapper
> Target: x86_64-linux-gnu
> Configured with: ../src/configure -v --with-pkgversion='Ubuntu/Linaro
> 4.7.2-2ubuntu1' --with-bugurl=file:///usr/share/doc/gcc-4.7/README.Bugs
> --enable-languages=c,c++,go,fortran,objc,obj-c++ --prefix=/usr
> --program-suffix=-4.7 --enable-shared --enable-linker-build-id
> --with-system-zlib --libexecdir=/usr/lib --without-included-gettext
> --enable-threads=posix --with-gxx-include-dir=/usr/include/c++/4.7
> --libdir=/usr/lib --enable-nls --with-sysroot=/ --enable-clocale=gnu
> --enable-libstdcxx-debug --enable-libstdcxx-time=yes
> --enable-gnu-unique-object --enable-plugin --enable-objc-gc
> --disable-werror --with-arch-32=i686 --with-tune=generic
> --enable-checking=release --build=x86_64-linux-gnu
> --host=x86_64-linux-gnu --target=x86_64-linux-gnu
> Thread model: posix
> gcc version 4.7.2 (Ubuntu/Linaro 4.7.2-2ubuntu1)
>
>
> $ uname -a
> Linux plexi 3.5.0-25-generic #39-Ubuntu SMP Mon Feb 25 18:26:58 UTC 2013
> x86_64 x86_64 x86_64 GNU/Linux
>
> _______________________________________________
> Commotion-dev mailing list
> Commotion-dev at lists.chambana.net
> https://lists.chambana.net/mailman/listinfo/commotion-dev
>
"
1227,Commotion-dev, Can't talk between desktop OLSRd and Commotion,"Tue, 19 Mar 2013 01:13:00 -0500",-0500,Ben West,"I have been able to get a custom-compiled olsrd running now under my own
instances of Ubuntu quantal, by applying this patch to src/net_olsr.c and
then rebuilding the debs:
https://lists.olsr.org/pipermail/olsr-dev/2012-June/005547.html

This patch was referred to in the thread started by Hans on this topic in
the olsr-dev listserv:
https://lists.olsr.org/pipermail/olsr-dev/2013-March/006725.html

Interestingly, the original bug was basically that olsrd was not sending
outgoing packets out the wireless interface, instead failing with error
message ""sendto(v4): Invalid argument.""  The variables that are supposed to
store the destination address for IPv4/6 packets, due to improper
declaration, were being sometimes optimized away, depending on the gcc
version and the optimization flags given.  The patch mentioned above
corrects the variables' declaration.

It seems this particular bug has been fixed in newer versions of olsrd, but
I'm guessing Canonical isn't going to be especially prompt about releasing
an updated Ubuntu package.

Could this patch be included in the guardianproject PPA for olsrd?

On Mon, Mar 18, 2013 at 2:38 PM, Ben West <ben at gowasabi.net> wrote:

> Hi All,
>
> I'm having difficulty replicating this solution on my own platform (Ubuntu
> quantal i386 under a VMware host, but with real USB wifi radio).
>
> That is, removing the O2 compile option and recompiling olsrd does not
> seem to yield a working olsrd for me.  I'm presently trying this out on a
> real host instead (i.e. no virtualization), but that is slowly opening a
> delightful can of worms w/r/t/ to thge newer Ubuntus dropping legacy video
> driver support and other such pleasantness.
>
> If the problem's source has been conclusively narrowed down to the -O2
> (and even -fPIE?) flag added by Hans' patch 310-hardening-fixes.patch,
> could Hans just release an updated olsrd package in his PPA, with those
> flags removed, as an interim workaround for anyone not able to compile
> their own?
>
> On Sat, Mar 9, 2013 at 12:34 PM, Mikael Nordfeldth <mmn at hethane.se> wrote:
>
"
1228,Commotion-dev, Device compatibility for Mesh Tether (and,"Tue, 19 Mar 2013 15:13:48 -0700",-0700,Hans of Guardian,"
On Mar 18, 2013, at 12:35 PM, Paul Gardner-Stephen wrote:

> Hello,
> 
> On Mon, Mar 18, 2013 at 8:22 AM, Dan Staples
> <danstaples at opentechinstitute.org> wrote:
"
1229,Commotion-dev, Can't talk between desktop OLSRd and Commotion,"Tue, 19 Mar 2013 16:19:02 -0700",-0700,Hans of Guardian,"
Once we nail down the issue conclusively, I'll definitely update the guardianproject/commotion PPA.

.hc

On Mar 18, 2013, at 11:13 PM, Ben West wrote:

> I have been able to get a custom-compiled olsrd running now under my own instances of Ubuntu quantal, by applying this patch to src/net_olsr.c and then rebuilding the debs:
> https://lists.olsr.org/pipermail/olsr-dev/2012-June/005547.html
> 
> This patch was referred to in the thread started by Hans on this topic in the olsr-dev listserv:
> https://lists.olsr.org/pipermail/olsr-dev/2013-March/006725.html
> 
> Interestingly, the original bug was basically that olsrd was not sending outgoing packets out the wireless interface, instead failing with error message ""sendto(v4): Invalid argument.""  The variables that are supposed to store the destination address for IPv4/6 packets, due to improper declaration, were being sometimes optimized away, depending on the gcc version and the optimization flags given.  The patch mentioned above corrects the variables' declaration.
> 
> It seems this particular bug has been fixed in newer versions of olsrd, but I'm guessing Canonical isn't going to be especially prompt about releasing an updated Ubuntu package.
> 
> Could this patch be included in the guardianproject PPA for olsrd?
> 
> On Mon, Mar 18, 2013 at 2:38 PM, Ben West <ben at gowasabi.net> wrote:
> Hi All,
> 
> I'm having difficulty replicating this solution on my own platform (Ubuntu quantal i386 under a VMware host, but with real USB wifi radio).
> 
> That is, removing the O2 compile option and recompiling olsrd does not seem to yield a working olsrd for me.  I'm presently trying this out on a real host instead (i.e. no virtualization), but that is slowly opening a delightful can of worms w/r/t/ to thge newer Ubuntus dropping legacy video driver support and other such pleasantness.
> 
> If the problem's source has been conclusively narrowed down to the -O2 (and even -fPIE?) flag added by Hans' patch 310-hardening-fixes.patch, could Hans just release an updated olsrd package in his PPA, with those flags removed, as an interim workaround for anyone not able to compile their own?
> 
> On Sat, Mar 9, 2013 at 12:34 PM, Mikael Nordfeldth <mmn at hethane.se> wrote:
> 2013-03-08 19:27, Hans-Christoph Steiner skrev:
> > That would be quite useful if you have the time!  Another thing that might the
> > whole process easier is to 'git bisect', if you are familiar with that..
> > Right now, Debian squeeze and wheezy have 0.6.2, and Ubuntu has 0.6.1 and 0.6.3:
> >
> > http://packages.debian.org/search?keywords=olsrd
> > http://packages.ubuntu.com/search?keywords=olsrd
> >
> > So the idea is to find out which version of these we can rely on, and which we
> > need to use replacements.
> 
> Gah. This seems way more advanced than what I can explain with my
> knowledge. Nevertheless, I did find what caused my error, the -O2 gcc
> optimization switch as patched by Debian package ""hardening fixes"":
> 
> 1. I tried compiling various olsrd versions. All worked.
> 2. I tried compiling 0.6.3-5~quantal from 'apt-get source'. It didn't work.
> 3. I tried compiling the 0.6.3.orig source (same as above, without
> debian patches) It worked.
> 4. None of the patches contained any networking code (except the json
> plugin, but disabling it didn't have any effect anyway)
> 5. I found that removing the -O2 switch on line 227 in Makefile.inc, as
> patched by 310-hardening-fixes.patch resolved my invalid argument
> sendto(v4) issue:
> 
>  %.o: %.c
>         @echo ""[CC] $<""
> -       $(CC) $(CFLAGS) $(CPPFLAGS) -c -o $@ $<
> +       $(CC) -O2 $(CFLAGS) $(CPPFLAGS) -fPIE -c -o $@ $<
> 
> 
> Reverting this (and even leaving the -fPIE there but removing -O2) makes
> the resulting binary functional.
> 
> 
> So the specific problem was caused by the -O2 parameter to gcc, I guess
> making it a compiling/linking issue. I don't know enough about this
> myself though, so I'm attaching ('O2-opts') the output of what that
> level of optimizations means if anyone is interested (gcc -c -Q -O2
> --help=optimizers)
> 
> More info on my build environment is below:
> 
> $ gcc -v
> Using built-in specs.
> COLLECT_GCC=gcc
> COLLECT_LTO_WRAPPER=/usr/lib/gcc/x86_64-linux-gnu/4.7/lto-wrapper
> Target: x86_64-linux-gnu
> Configured with: ../src/configure -v --with-pkgversion='Ubuntu/Linaro
> 4.7.2-2ubuntu1' --with-bugurl=file:///usr/share/doc/gcc-4.7/README.Bugs
> --enable-languages=c,c++,go,fortran,objc,obj-c++ --prefix=/usr
> --program-suffix=-4.7 --enable-shared --enable-linker-build-id
> --with-system-zlib --libexecdir=/usr/lib --without-included-gettext
> --enable-threads=posix --with-gxx-include-dir=/usr/include/c++/4.7
> --libdir=/usr/lib --enable-nls --with-sysroot=/ --enable-clocale=gnu
> --enable-libstdcxx-debug --enable-libstdcxx-time=yes
> --enable-gnu-unique-object --enable-plugin --enable-objc-gc
> --disable-werror --with-arch-32=i686 --with-tune=generic
> --enable-checking=release --build=x86_64-linux-gnu
> --host=x86_64-linux-gnu --target=x86_64-linux-gnu
> Thread model: posix
> gcc version 4.7.2 (Ubuntu/Linaro 4.7.2-2ubuntu1)
> 
> 
> $ uname -a
> Linux plexi 3.5.0-25-generic #39-Ubuntu SMP Mon Feb 25 18:26:58 UTC 2013
> x86_64 x86_64 x86_64 GNU/Linux
> 
> _______________________________________________
> Commotion-dev mailing list
> Commotion-dev at lists.chambana.net
> https://lists.chambana.net/mailman/listinfo/commotion-dev
> 
> 
> 
> 
> -- 
> Ben West
> http://gowasabi.net
> ben at gowasabi.net
> 314-246-9434
> 
> 
> 
> -- 
> Ben West
> http://gowasabi.net
> ben at gowasabi.net
> 314-246-9434

"
1230,Commotion-dev, Merging adhoc tricks...,"Wed, 20 Mar 2013 09:48:54 -0700",-0700,Hans of Guardian,"
Sounds like quite an elaborate process.  Is there code anywhere else that handles this level of device probing?  My guess is that SPAN has a framework that handles some of it, but I think serval is doing a lot more of this kind of probing and auto-configuring than any other app.

.hc

On Mar 17, 2013, at 3:53 PM, Jeremy Lakeman wrote:

> While working to reduce the importance of root access in Serval Mesh,
> which is more about educating users about our current capabilities
> without root, I've been very tempted to replace all of our adhoc
> control code. Our current process is very convoluted for the things
> it's actually doing.
> 
> This is roughly the current process that Serval uses to find loadable
> wifi modules, which is itself based on the old wifi-tether app. With a
> couple of little tweaks we should implement;
> 
> Turn wifi client on and off through the SDK, compare the list of
> loaded / running modules, look for known wifi module names &
> interfaces.
> 
> If the wifi module has been compiled into the kernel, there's no point
> trying to load it dynamically (eg most google android 4.0+ devices),
> so just skip to configuring the interface and see it that works.
> 
> Look in the filesystem for a dozen or so known modules, firmware blobs
> etc, matching against the above list of loadable modules.
> 
> Not one of those? Start scanning the filesystem;
> - read libhardware_legacy.so looking for module path and parameters,
> check that it matches the detected hardware
> - find all .ko files
> - read the contents of scripts and config files looking for module parameters
> 
> For tiwlan chipsets, find known wlan_loader & firmware paths, copy
> tiwlan.ini and make a couple of changes.
> 
> For broadcom chipsets, copy nvram.txt and make sure the MAC address is
> unique (for huawei ideos), make sure ""dhd_pkt_filter_enable=0"" is in
> the module parameters or the mesh will be useless when the screen
> turns off.
> 
> Try loading each module found above and attempt to configure the interface.
> 
> If setting adhoc mode fails, you'll probably need a custom kernel.
> 
> If at any time we receive a broadcast Intent indicating that wifi
> client or hotspot failed to start; bring the interface down, unload
> the wifi module and start the operation again.
> 
> On Mon, Mar 18, 2013 at 8:22 AM, Dan Staples
> <danstaples at opentechinstitute.org> wrote:
"
1231,Commotion-dev, Merging adhoc tricks...,"Thu, 21 Mar 2013 07:06:51 +1030",+1030,Paul Gardner-Stephen,"Hello Hans,

We are not aware of any of the other applications performing this kind
of auto-probing and auto-generation of control scripts.  That said, as
devices move to 4.1+ the value probably reduces.  But I think it will
be a while before we can ignore <4.1 devices.

Paul.

On Thu, Mar 21, 2013 at 3:18 AM, Hans of Guardian
<hans at guardianproject.info> wrote:
>
> Sounds like quite an elaborate process.  Is there code anywhere else that handles this level of device probing?  My guess is that SPAN has a framework that handles some of it, but I think serval is doing a lot more of this kind of probing and auto-configuring than any other app.
>
> .hc
>
> On Mar 17, 2013, at 3:53 PM, Jeremy Lakeman wrote:
>
"
1232,Commotion-dev, Device compatibility for Mesh Tether (and,"Thu, 21 Mar 2013 13:35:52 +1030",+1030,Paul Gardner-Stephen,"Hello,

On Wed, Mar 20, 2013 at 8:43 AM, Hans of Guardian
<hans at guardianproject.info> wrote:
>
> On Mar 18, 2013, at 12:35 PM, Paul Gardner-Stephen wrote:
>
"
1233,Commotion-dev, Commotion-Android repo down?,"Thu, 21 Mar 2013 15:14:50 -0500",-0500,Ben West,"Is the redmine repo for Commotion-Android down at present, or is the OTI
server just under really heavy load right now?

This URL is just returning a blank page:
https://code.commotionwireless.net/commotion/commotion-android.git

-- 
Ben West
http://gowasabi.net
ben at gowasabi.net
314-246-9434
"
1234,Commotion-dev, Commotion-Android repo down?,"Thu, 21 Mar 2013 16:44:59 -0400",-0400,Will Hawkins,"Hey Ben,

Thanks for checking out our code, pun intended. We are now putting all
the code for the Commotion-Android application on github at
https://github.com/opentechinstitute/commotion-android.

Let me know if that works and you are able to grab the code!

Will

On 03/21/2013 04:14 PM, Ben West wrote:
> Is the redmine repo for Commotion-Android down at present, or is the OTI
> server just under really heavy load right now?
> 
> This URL is just returning a blank page:
> https://code.commotionwireless.net/commotion/commotion-android.git
> 
> -- 
> Ben West
> http://gowasabi.net
> ben at gowasabi.net <mailto:ben at gowasabi.net>
> 314-246-9434
> 
> 
> _______________________________________________
> Commotion-dev mailing list
> Commotion-dev at lists.chambana.net
> https://lists.chambana.net/mailman/listinfo/commotion-dev
> 
"
1235,Commotion-dev, Commotion-Android repo down?,"Thu, 21 Mar 2013 16:32:23 -0500",-0500,Ben West,"Thanks for the response, Will.  I see now this github repo is indeed linked
to from here:
https://commotionwireless.net/download

Could you update these commotionwireless.net pages to reference the new
github repo?
https://commotionwireless.net/projects/android
https://commotionwireless.net/docs/android

On Thu, Mar 21, 2013 at 3:44 PM, Will Hawkins <
hawkinsw at opentechinstitute.org> wrote:

> Hey Ben,
>
> Thanks for checking out our code, pun intended. We are now putting all
> the code for the Commotion-Android application on github at
> https://github.com/opentechinstitute/commotion-android.
>
> Let me know if that works and you are able to grab the code!
>
> Will
>
> On 03/21/2013 04:14 PM, Ben West wrote:
> > Is the redmine repo for Commotion-Android down at present, or is the OTI
> > server just under really heavy load right now?
> >
> > This URL is just returning a blank page:
> > https://code.commotionwireless.net/commotion/commotion-android.git
> >
> > --
> > Ben West
> > http://gowasabi.net
> > ben at gowasabi.net <mailto:ben at gowasabi.net>
> > 314-246-9434
> >
> >
> > _______________________________________________
> > Commotion-dev mailing list
> > Commotion-dev at lists.chambana.net
> > https://lists.chambana.net/mailman/listinfo/commotion-dev
> >
> _______________________________________________
> Commotion-dev mailing list
> Commotion-dev at lists.chambana.net
> https://lists.chambana.net/mailman/listinfo/commotion-dev
"
1236,Commotion-dev, Commotion-Android repo down?,"Fri, 22 Mar 2013 09:01:20 -0400",-0400,Dan Staples,"Thanks for the reminder about those pages, Ben. I'll update them. In 
general, we're shifting all of the redmine repos to Github due to 
trouble with redmine. I'll update the website accordingly.

On Thu 21 Mar 2013 05:32:23 PM EDT, Ben West wrote:
> Thanks for the response, Will.  I see now this github repo is indeed
> linked to from here:
> https://commotionwireless.net/download
>
> Could you update these commotionwireless.net
> <http://commotionwireless.net> pages to reference the new github repo?
> https://commotionwireless.net/projects/android
> https://commotionwireless.net/docs/android
>
> On Thu, Mar 21, 2013 at 3:44 PM, Will Hawkins
> <hawkinsw at opentechinstitute.org
> <mailto:hawkinsw at opentechinstitute.org"
1237,Commotion-dev, International Summit for Community Wireless,"Fri, 22 Mar 2013 14:16:07 -0400",-0400,Dan Staples,"Are you passionate about using technology to improve your community? Do
you want to help expand access to affordable Internet? Are you an
advocate for open technology, ICT4D or community-owned infrastructure?

If so, then we invite to you to participate in this year's International
Summit for Community Wireless Networks (IS4CWN)
<http://2013.wirelesssummit.org/>. The Summit will take place in
Berlin on October 2-4, 2013.

IS4CWN is a gathering of technology experts, policy analysts,
on-the-ground specialists, and researchers working on state-of-the-art
community broadband projects across the globe. Above all, IS4CWN is a
community of communities, and the annual summit serves as an opportunity
to share ideas and challenges, discuss policy issues, and coordinate
research and development efforts.

The 2013 Summit theme is community. In the past decade -- which included
the founding of Freifunk <http://start.freifunk.net/>, the birth of the
International Summit for Community Wireless Networks, and the genesis of
major projects including Commotion <https://commotionwireless.net/> and
CONFINE <http://confine-project.eu/> -- the community wireless movement
has expanded substantially in both size and visibility.

But where do we go from here? How can we take the movement to the next
level in terms of technological advancement, community engagement, and
diversity? We encourage our speakers, workshop leaders, and participants
to think big this year and help us grow our community of communities.

Interested? Head on over to www.WirelessSummit.org
<http://www.wirelesssummit.org/>.
Registration is open and forms to submit workshop proposals and
request travel funding are available. Early registrants will receive a
50% discount.

Potential topics include: using wireless for social justice, rural
broadband frameworks, technical developments in mesh networking,
spectrum policy, training communities in technical skills, case studies
of networks, challenges of corporate monopolies, and much more.

This year's Summit is committed to having a diversity of voices and
experience, and we're looking to have a lot of new faces in the room.
Community networks encompass a whole range of social, political and
technical challenges, so technical knowledge is definitely not required.

Access to technology and technical knowledge has been historically
inequitable and remains so to this day. Recognizing this, the
International Summit for Community Wireless Networks aspires to include
participants and speakers from a broad range of backgrounds and
experiences. We seek and welcome diversity in order to reflect the
communities that wireless networks can and should serve, cultivating
expertise, creativity, and innovation. Please join us in creating an
environment of respect, equity, and accessibility at all levels of
Summit involvement.


-- 
Dan Staples

Open Technology Institute
https://commotionwireless.net
"
1238,Commotion-dev, Can't talk between desktop OLSRd and Commotion,"Tue, 26 Mar 2013 13:23:33 -0400",-0400,Will Hawkins,"Sorry it's taken me so long to pipe up on this thread. I looked at that
patch that Ben/HC referenced. The fix that they applied definitely fixes
a problem. And, based on Ben's testing, it seems like it is the problem.

>From my reading, the way the code was written, it was working without
this patch only by chance. So, definitely a good one to include :-)

Will

On 03/19/2013 02:13 AM, Ben West wrote:
> I have been able to get a custom-compiled olsrd running now under my own
> instances of Ubuntu quantal, by applying this patch to src/net_olsr.c
> and then rebuilding the debs:
> https://lists.olsr.org/pipermail/olsr-dev/2012-June/005547.html
> 
> This patch was referred to in the thread started by Hans on this topic
> in the olsr-dev listserv:
> https://lists.olsr.org/pipermail/olsr-dev/2013-March/006725.html
> 
> Interestingly, the original bug was basically that olsrd was not sending
> outgoing packets out the wireless interface, instead failing with error
> message ""sendto(v4): Invalid argument.""  The variables that are supposed
> to store the destination address for IPv4/6 packets, due to improper
> declaration, were being sometimes optimized away, depending on the gcc
> version and the optimization flags given.  The patch mentioned above
> corrects the variables' declaration.
> 
> It seems this particular bug has been fixed in newer versions of olsrd,
> but I'm guessing Canonical isn't going to be especially prompt about
> releasing an updated Ubuntu package.
> 
> Could this patch be included in the guardianproject PPA for olsrd?
> 
> On Mon, Mar 18, 2013 at 2:38 PM, Ben West <ben at gowasabi.net
> <mailto:ben at gowasabi.net"
1239,Commotion-dev, Can't talk between desktop OLSRd and Commotion,"Wed, 27 Mar 2013 15:08:48 -0700",-0700,Hans-Christoph Steiner,"
I pushed an update to the olsrd package to our Commotion PPA, they should be
built in about 5 hours.  The only change was including the commit that should
fix this issue.

If the OTI crew thinks that we should be using a newer version of olsrd, I can
update the package there.  Right now, I'm just keeping it in sync with the
effort to get an update into Debian/wheezy.

.hc

On 03/26/2013 10:23 AM, Will Hawkins wrote:
> Sorry it's taken me so long to pipe up on this thread. I looked at that
> patch that Ben/HC referenced. The fix that they applied definitely fixes
> a problem. And, based on Ben's testing, it seems like it is the problem.
> 
> From my reading, the way the code was written, it was working without
> this patch only by chance. So, definitely a good one to include :-)
> 
> Will
> 
> On 03/19/2013 02:13 AM, Ben West wrote:
"
1240,Commotion-dev, Can't talk between desktop OLSRd and Commotion,"Wed, 27 Mar 2013 19:07:47 -0400",-0400,Dan Staples,"If I remember correctly, your PPA provides a hardened version of olsrd, 
yes?

For our DR1 release of Commotion-OpenWRT, we're using a custom version 
of olsrd v0.6.5.2 with our own dnssd and mdp plugins. It's what we have 
in the OTI github repo. Do you think it would be useful to use that 
version? DR1 meshes that have backhaul security turned on would only be 
able to talk to other nodes running olsrd w/ the mdp plugin enabled.

On Wed 27 Mar 2013 06:08:48 PM EDT, Hans-Christoph Steiner wrote:
>
> I pushed an update to the olsrd package to our Commotion PPA, they should be
> built in about 5 hours.  The only change was including the commit that should
> fix this issue.
>
> If the OTI crew thinks that we should be using a newer version of olsrd, I can
> update the package there.  Right now, I'm just keeping it in sync with the
> effort to get an update into Debian/wheezy.
>
> .hc
>
> On 03/26/2013 10:23 AM, Will Hawkins wrote:
"
1241,Commotion-dev, Can't talk between desktop OLSRd and Commotion,"Wed, 27 Mar 2013 16:28:48 -0700",-0700,Hans-Christoph Steiner,"
Yes, I added some of the Debian hardening stuff to that package.  Some of that
hardening stuff was included upstream and is therefore in v0.6.5.2 already,
but not all was included yet.

I don't know those plugins, so I don't know if they'd be useful.  At this
point, I think the guardianproject/commotion PPA should be focused on
providing a ""stable"" build so that when people try it, they are most likely to
get some kind of working mesh.  As far as I have heard, this client is focused
on end users rather than backhaul providers, so I haven't looked at the
backhaul stuff at all.

How about starting an official OTI PPA and uploading the DR1 olsrd v0.6.5.2
there?  Ultimately, I think it'll be good to have these packages in an
""official"" OTI PPA anyway.  I can set that up if you want, I've set up a few
PPAs on launchpad.

.hc

On 03/27/2013 04:07 PM, Dan Staples wrote:
> If I remember correctly, your PPA provides a hardened version of olsrd, 
> yes?
> 
> For our DR1 release of Commotion-OpenWRT, we're using a custom version 
> of olsrd v0.6.5.2 with our own dnssd and mdp plugins. It's what we have 
> in the OTI github repo. Do you think it would be useful to use that 
> version? DR1 meshes that have backhaul security turned on would only be 
> able to talk to other nodes running olsrd w/ the mdp plugin enabled.
> 
> On Wed 27 Mar 2013 06:08:48 PM EDT, Hans-Christoph Steiner wrote:
"
1242,Commotion-dev, Can't talk between desktop OLSRd and Commotion,"Wed, 27 Mar 2013 21:22:59 -0400",-0400,Andrew Reynolds,"We had been talking about starting up an OTI PPA earlier this morning.
One of our newer members is really interested in taking that on. I had
meant to ping you about it (among other things) but got bogged down in
meetings.

While I do want to keep our stable and experimental packages separate,
we will need to begin porting the new DR1 features (including the OLSR
plugins) over to the non-router platforms.

For what it's worth, here is the target feature list for DR1
(https://code.commotionwireless.net/versions/2), and the beginnings of
the architecture document for the new features as they relate to OpenWRT
(https://code.commotionwireless.net/projects/commotion/wiki/Commotion_Architecture).
Now that the dust has begun to settle from the initial rollout, we will
begin incorporating our notes into the main documentation.

As for using and maintaining a fork of OLSRd, we would ultimately prefer
to incorporate any fixes and plugins upstream instead of maintaining a
fork. Until the outstanding questions around incorporation are
addressed, it seems reasonable to point to our fork. That doesn't
address OLSR's inclusion in debian, but I can't see a near-future
situation in which Commotion won't need to point to a newer version of
OLSRd than debian provides. Am I wrong in thinking these are almost
separate issues?

-andrew

On 03/27/2013 07:28 PM, Hans-Christoph Steiner wrote:
> 
> Yes, I added some of the Debian hardening stuff to that package.  Some of that
> hardening stuff was included upstream and is therefore in v0.6.5.2 already,
> but not all was included yet.
> 
> I don't know those plugins, so I don't know if they'd be useful.  At this
> point, I think the guardianproject/commotion PPA should be focused on
> providing a ""stable"" build so that when people try it, they are most likely to
> get some kind of working mesh.  As far as I have heard, this client is focused
> on end users rather than backhaul providers, so I haven't looked at the
> backhaul stuff at all.
> 
> How about starting an official OTI PPA and uploading the DR1 olsrd v0.6.5.2
> there?  Ultimately, I think it'll be good to have these packages in an
> ""official"" OTI PPA anyway.  I can set that up if you want, I've set up a few
> PPAs on launchpad.
> 
> .hc
> 
> On 03/27/2013 04:07 PM, Dan Staples wrote:
"
1243,Commotion-dev, Can't talk between desktop OLSRd and Commotion,"Thu, 28 Mar 2013 16:20:04 +0100",+0100,Teco Boot,"All,

I did see some bad things happened in the past, where improvements on olsrd were not published upstream and were lost. Some of it: link metrics and fix for MPR flooding. So I strongly recommend new work on olsrd is kept on its home base.

Teco


Op 28 mrt. 2013, om 02:22 heeft Andrew Reynolds <andrew at opentechinstitute.org> het volgende geschreven:

> We had been talking about starting up an OTI PPA earlier this morning.
> One of our newer members is really interested in taking that on. I had
> meant to ping you about it (among other things) but got bogged down in
> meetings.
> 
> While I do want to keep our stable and experimental packages separate,
> we will need to begin porting the new DR1 features (including the OLSR
> plugins) over to the non-router platforms.
> 
> For what it's worth, here is the target feature list for DR1
> (https://code.commotionwireless.net/versions/2), and the beginnings of
> the architecture document for the new features as they relate to OpenWRT
> (https://code.commotionwireless.net/projects/commotion/wiki/Commotion_Architecture).
> Now that the dust has begun to settle from the initial rollout, we will
> begin incorporating our notes into the main documentation.
> 
> As for using and maintaining a fork of OLSRd, we would ultimately prefer
> to incorporate any fixes and plugins upstream instead of maintaining a
> fork. Until the outstanding questions around incorporation are
> addressed, it seems reasonable to point to our fork. That doesn't
> address OLSR's inclusion in debian, but I can't see a near-future
> situation in which Commotion won't need to point to a newer version of
> OLSRd than debian provides. Am I wrong in thinking these are almost
> separate issues?
> 
> -andrew
> 
> On 03/27/2013 07:28 PM, Hans-Christoph Steiner wrote:
"
1244,Commotion-dev, Can't talk between desktop OLSRd and Commotion,"Thu, 28 Mar 2013 11:54:51 -0400",-0400,Andrew Reynolds,"Agreed.

On that note, commotion and olsr devs, where do we currently diverge,
and what are the barriers to integration?

I'm aware of the following:
New olsrd plugins used in commotion DR1 (MDP, DNSSD): OLSR community had
concerns about plugin duplication. Commotion community willing to merge
in order to integrate upstream. Dan, is time the main obstacle here or
do we need more input on how best to proceed?

New bugfix referenced below: Has this been incorporated in the Commotion
fork or only in Guardian's PPA? Have the patches been submitted to OLSR?

Hardening patches: It sounds like this is in process.

It also sounds like we now have two forks (the one we use in
Commotion-OpenWRT DR1 and the one Hans is using on his PPA). If we
haven't already, can we either standardize across our repos while we
work on upstream integration or push the development features to our
fork so Hans can focus on debian inclusion with the PPA? I'm not sure
which would be more beneficial.

-andrew

On 03/28/2013 11:20 AM, Teco Boot wrote:
> All,
> 
> I did see some bad things happened in the past, where improvements on
> olsrd were not published upstream and were lost. Some of it: link
> metrics and fix for MPR flooding. So I strongly recommend new work on
> olsrd is kept on its home base.
> 
> Teco
> 
> 
> Op 28 mrt. 2013, om 02:22 heeft Andrew Reynolds
> <andrew at opentechinstitute.org> het volgende geschreven:
> 
"
1245,Commotion-dev, Can't talk between desktop OLSRd and Commotion,"Thu, 28 Mar 2013 12:49:29 -0400",-0400,Dan Staples,"The OLSRd dev folks weren't interested in the DNSSD plugin, unless
someone does a merge of all the different existing multicast plugins.
That's not something I'm interested in doing, and would be a significant
effort for anyone not already versed in the existing plugins. So I doubt
DNSSD will ever make it into upstream olsrd. Will said there was also a
lack of interest in the MDP plugin he wrote, so that will also not
likely make it upstream. However, we need those plugins for any
Commotion nodes that want to be compatible with DR1.

If the point of the Guardian PPA is to get a hardened olsrd version into
Debian, then I don't think it would be appropriate to include our
plugins in it, since they are not ""official"" olsrd plugins. But if the
goal is to have a Commotion-compatible PPA of olsrd, then it would make
sense to include our plugins.

Dan

On 03/28/2013 11:54 AM, Andrew Reynolds wrote:
> Agreed.
>
> On that note, commotion and olsr devs, where do we currently diverge,
> and what are the barriers to integration?
>
> I'm aware of the following:
> New olsrd plugins used in commotion DR1 (MDP, DNSSD): OLSR community had
> concerns about plugin duplication. Commotion community willing to merge
> in order to integrate upstream. Dan, is time the main obstacle here or
> do we need more input on how best to proceed?
>
> New bugfix referenced below: Has this been incorporated in the Commotion
> fork or only in Guardian's PPA? Have the patches been submitted to OLSR?
>
> Hardening patches: It sounds like this is in process.
>
> It also sounds like we now have two forks (the one we use in
> Commotion-OpenWRT DR1 and the one Hans is using on his PPA). If we
> haven't already, can we either standardize across our repos while we
> work on upstream integration or push the development features to our
> fork so Hans can focus on debian inclusion with the PPA? I'm not sure
> which would be more beneficial.
>
> -andrew
>
> On 03/28/2013 11:20 AM, Teco Boot wrote:
"
1246,Commotion-dev, Can't talk between desktop OLSRd and Commotion,"Thu, 28 Mar 2013 09:42:35 -0700",-0700,Hans-Christoph Steiner,"
In terms of my work on olsrd, the only things that are not entirely included
upstream in olsr.org are some of the hardening support, and that is in the
Debian packaging.  The changes are so small, I would not consider them a fork.
 Once we get some more testing done, I'll push these changes upstream as much
as possible.  Some of them only really make sense as part of the Debian packaging.

The bugfix in this thread is included in upstream v0.6.4, so its already
included in the commotion fork, since that's based on v0.6.5.2.

.hc

On 03/28/2013 08:54 AM, Andrew Reynolds wrote:
> Agreed.
> 
> On that note, commotion and olsr devs, where do we currently diverge,
> and what are the barriers to integration?
> 
> I'm aware of the following:
> New olsrd plugins used in commotion DR1 (MDP, DNSSD): OLSR community had
> concerns about plugin duplication. Commotion community willing to merge
> in order to integrate upstream. Dan, is time the main obstacle here or
> do we need more input on how best to proceed?
> 
> New bugfix referenced below: Has this been incorporated in the Commotion
> fork or only in Guardian's PPA? Have the patches been submitted to OLSR?
> 
> Hardening patches: It sounds like this is in process.
> 
> It also sounds like we now have two forks (the one we use in
> Commotion-OpenWRT DR1 and the one Hans is using on his PPA). If we
> haven't already, can we either standardize across our repos while we
> work on upstream integration or push the development features to our
> fork so Hans can focus on debian inclusion with the PPA? I'm not sure
> which would be more beneficial.
> 
> -andrew
> 
> On 03/28/2013 11:20 AM, Teco Boot wrote:
"
1247,Commotion-dev, Can't talk between desktop OLSRd and Commotion,"Thu, 28 Mar 2013 12:49:11 -0700",-0700,Hans-Christoph Steiner,"
What olsrd needs is someone with the resources to merge the various parallel
efforts of mDNS/DNSSD.  It would be a chunk of work, like Dan said, but it
will benefit everyone if those efforts are merged because maintenance, new
features, bug fixes, testing, etc. would all be shared.  I think it would be
very worthwhile for OTI to take it on since it is the best way to guarantee
the long term maintenance of that code.

.hc

On 03/28/2013 09:49 AM, Dan Staples wrote:
> The OLSRd dev folks weren't interested in the DNSSD plugin, unless
> someone does a merge of all the different existing multicast plugins.
> That's not something I'm interested in doing, and would be a significant
> effort for anyone not already versed in the existing plugins. So I doubt
> DNSSD will ever make it into upstream olsrd. Will said there was also a
> lack of interest in the MDP plugin he wrote, so that will also not
> likely make it upstream. However, we need those plugins for any
> Commotion nodes that want to be compatible with DR1.
> 
> If the point of the Guardian PPA is to get a hardened olsrd version into
> Debian, then I don't think it would be appropriate to include our
> plugins in it, since they are not ""official"" olsrd plugins. But if the
> goal is to have a Commotion-compatible PPA of olsrd, then it would make
> sense to include our plugins.
> 
> Dan
> 
> On 03/28/2013 11:54 AM, Andrew Reynolds wrote:
"
1248,Commotion-dev, Can't talk between desktop OLSRd and Commotion,"Thu, 28 Mar 2013 20:58:30 -0400",-0400,Dan Staples,"That's a good point, Hans. I'll email the olsrd dev list tomorrow to 
try to get a handle on what the end product would be and how much work 
that might take. That will help us judge if it's a suitable task for us 
to take on, given our roadmap for core Commotion development.

On Thu 28 Mar 2013 03:49:11 PM EDT, Hans-Christoph Steiner wrote:
>
> What olsrd needs is someone with the resources to merge the various parallel
> efforts of mDNS/DNSSD.  It would be a chunk of work, like Dan said, but it
> will benefit everyone if those efforts are merged because maintenance, new
> features, bug fixes, testing, etc. would all be shared.  I think it would be
> very worthwhile for OTI to take it on since it is the best way to guarantee
> the long term maintenance of that code.
>
> .hc
>
> On 03/28/2013 09:49 AM, Dan Staples wrote:
"
1249,Commotion-dev, Can't talk between desktop OLSRd and Commotion,"Fri, 29 Mar 2013 11:12:33 -0700",-0700,Hans-Christoph Steiner,"
I'll also add that the olsrd devs can be grumpy, but I think they all want to
see this kind of consolidation work done, so don't let the grumpiness dissuade
you!

.hc

On 03/28/2013 05:58 PM, Dan Staples wrote:
> That's a good point, Hans. I'll email the olsrd dev list tomorrow to 
> try to get a handle on what the end product would be and how much work 
> that might take. That will help us judge if it's a suitable task for us 
> to take on, given our roadmap for core Commotion development.
> 
> On Thu 28 Mar 2013 03:49:11 PM EDT, Hans-Christoph Steiner wrote:
"
1250,Commotion-dev, Can't talk between desktop OLSRd and Commotion,"Mon, 1 Apr 2013 01:33:33 +0200",+0200,L. Aaron Kaplan,"
On Mar 29, 2013, at 7:12 PM, Hans-Christoph Steiner <hans at guardianproject.info> wrote:

> 
> I'll also add that the olsrd devs can be grumpy, but I think they all want to
> see this kind of consolidation work done, so don't let the grumpiness dissuade
> you!
> 

Naaahh :)

s/the olsrd devs can be grumpy/all prima donna coders can be grumpy from time to time, even Linus/g ;-)

Don't worry,
Aaron.

PS: I believe merging the code (== reducing lines of code) is a very good idea.
"
1251,Commotion-dev, Can't talk between desktop OLSRd and Commotion,"Mon, 01 Apr 2013 11:43:16 -0700",-0700,Hans-Christoph Steiner,"

On 03/31/2013 04:33 PM, L. Aaron Kaplan wrote:
> 
> On Mar 29, 2013, at 7:12 PM, Hans-Christoph Steiner <hans at guardianproject.info> wrote:
> 
"
1252,Commotion-dev, Python-based testing framework across,"Tue, 2 Apr 2013 03:20:18 -0500",-0500,Ben West,"Hi All,

I've created a repo of a few basic tests implemented as unittests in Python
2.6+.  This repo contains just the Python scripts themselves, so that it
may be included later as a submodule into other repos containing
platform-specific packaging stuff.
https://github.com/westbywest/commotion-tests-core

Due please note I expect this repo to change, and even its location to
maybe switch to OTI's github account at some point soon.

To serve as hopefully demonstrative examples of the test coverage possible,
the scripts I just checked in test for the following:

   - ping localhost
   - ping gateway IP (either default gateway or the one assigned by OLSRd
   smartgateway)
   - ping Google DNS (aka do we have Internet?)
   - presence of an active olsrd process
   - olsrd responds to jsoninfo requests
   - link quality of the next hop is above a specified threshold

These scripts should run under the following Python versions / platforms:

   - Python v2.7+ under Debian/Ubuntu
   - Python for Android (Py4A) app r5+ / Scripting Layer for Android (SL4A)
   app r6+
   - Python-mini v2.7+ under OpenWRT 12.09+

... to test the following Commotion implementations, respectively (where
each is enabled by the user, not by the Python script):

   - commotion-mesh-applet
   - Mesh Tether app
   - Commotion-OpenWRT DR1, with *python*, *python-json*, and *
   olsrd-mod-jsoninfo* modules installed

Questions about how to proceed:

   - Whether to proceed with Python-based testing framework?  I tried to
   heavily leverage the cross-platform compatibility, but is it worthwhile?
   - The Python for Android implementation chosen, Py4A, is only Python
   v2.6.  Is having Python v2.7 on Android worth possibly compiling it into a
   custom APK?
   - Many of the desired test vectors, e.g. throughput testing, require the
   test run simultaneously on at least 2 nodes.  It's pretty easy to write a
   crude server in Python to function as one half of a throughput test, but
   does the complexity of running different Python scripts on different nodes
   simultaneously become unreasonable?
   - The python-mini module for OpenWRT chews up 1.5Mbytes of flash, and it
   doesn't include unittest by default.  This unfortunately appears to be *too
   much already*; it wouldn't fit on a Nanostation flash w/o removing lots
   of stuff.  Maybe this size could be trimmed down by modifying the
   python-mini package's Makefile, or by distributing test scripts in bytecode
   form to OpenWRT nodes.



On Fri, Mar 15, 2013 at 10:14 PM, Andrew Reynolds <
andrew at opentechinstitute.org> wrote:

> It sounds reasonable. Could you sketch out what you have in mind? How
> much of the network setup were you thinking of building into the test
> framework vs. simply triggering and testing?
>
> -andrew
>
> On 03/15/2013 02:48 PM, Ben West wrote:
> > Hi All,
> >
> > In lieu of recent progress towards getting Commotion to a working state
> on
> > Android, Ubuntu/Debian. and now possibly OSX, what thoughts about
> building
> > a simple and (to whatever degree feasible) cross-platform testing
> framework
> > in Python?
> >
> > The general idea is that python scripts could be used to start hitting
> the
> > test vectors listed here (note the server appears to be really slow):
> >
> >
> https://code.commotionwireless.net/projects/commotion/wiki/Testing#Mesh-Routing-Tech-Evaluations
> >
> https://code.commotionwireless.net/projects/commotion/wiki/Testing#Testbed-Requirements-based-on-test-suite-defined-above
> >
> https://code.commotionwireless.net/projects/commotion/wiki/Testing#Release-Candidate-Test-Regimen
> >
> > That is, assuming Ubuntu/Debian/OSX's python support as a starting point,
> > could these lighweight python implementations allow for some unified test
> > scripts across platforms?
> >
> > http://qpython.com/ (for Android)
> > https://dev.openwrt.org/browser/packages/lang/python/Makefile (for
> OpenWRT,
> > to be compiled as module)
> >
> > Has anyone on the list had good experience with these Python
> > implementations?
> >
> > My original thought for such testing scripts was to do them in shell
> > scripting, but I'm guessing Python would be easier and more powerful.
> >
> >
> >
> > _______________________________________________
> > Commotion-dev mailing list
> > Commotion-dev at lists.chambana.net
> > https://lists.chambana.net/mailman/listinfo/commotion-dev
> >
>
>
>
> _______________________________________________
> Commotion-dev mailing list
> Commotion-dev at lists.chambana.net
> https://lists.chambana.net/mailman/listinfo/commotion-dev
>
"
1253,Commotion-dev, Python-based testing framework across,"Tue, 02 Apr 2013 09:58:04 -0400",-0400,seamus tuohy,"Hey,

On 04/02/2013 04:20 AM, Ben West wrote:
> Hi All,
>
> I've created a repo of a few basic tests implemented as unittests in 
> Python 2.6+.  This repo contains just the Python scripts themselves, 
> so that it may be included later as a submodule into other repos 
> containing platform-specific packaging stuff.
> https://github.com/westbywest/commotion-tests-core
>
> Due please note I expect this repo to change, and even its location to 
> maybe switch to OTI's github account at some point soon.
>
> To serve as hopefully demonstrative examples of the test coverage 
> possible, the scripts I just checked in test for the following:
>
>   * ping localhost
>   * ping gateway IP (either default gateway or the one assigned by
>     OLSRd smartgateway)
>   * ping Google DNS (aka do we have Internet?)
>   * presence of an active olsrd process
>   * olsrd responds to jsoninfo requests
>   * link quality of the next hop is above a specified threshold
>
> These scripts should run under the following Python versions / platforms:
>
>   * Python v2.7+ under Debian/Ubuntu
>   * Python for Android (Py4A) app r5+ / Scripting Layer for Android
>     (SL4A) app r6+
>   * Python-mini v2.7+ under OpenWRT 12.09+
>
> ... to test the following Commotion implementations, respectively 
> (where each is enabled by the user, not by the Python script):
>
>   * commotion-mesh-applet
>   * Mesh Tether app
>   * Commotion-OpenWRT DR1, with *python*, *python-json*, and
>     *olsrd-mod-jsoninfo* modules installed
>
> Questions about how to proceed:
>
>   * Whether to proceed with Python-based testing framework? I tried to
>     heavily leverage the cross-platform compatibility, but is it
>     worthwhile?
>
>   * The Python for Android implementation chosen, Py4A, is only Python
>     v2.6.  Is having Python v2.7 on Android worth possibly compiling
>     it into a custom APK?
>   * Many of the desired test vectors, e.g. throughput testing, require
>     the test run simultaneously on at least 2 nodes.  It's pretty easy
>     to write a crude server in Python to function as one half of a
>     throughput test, but does the complexity of running different
>     Python scripts on different nodes simultaneously become unreasonable
>
Not at all, I think that it is necessary to have different nodes running 
tests simultaneously. In most of the openWRT testing situations we run 
currently, we have client devices running simultaneously to elucidate 
information about the mesh nodes.
>
>   * The python-mini module for OpenWRT chews up 1.5Mbytes of flash,
>     and it doesn't include unittest by default.  This unfortunately
>     appears to be /too much already/; it wouldn't fit on a Nanostation
>     flash w/o removing lots of stuff.  Maybe this size could be
>     trimmed down by modifying the python-mini package's Makefile, or
>     by distributing test scripts in bytecode form to OpenWRT nodes.
>
I think that loading python on to openWRT nodes is impractical. Having 
client devices running tests over the mesh with possible on-node 
analytics running for later collection will give us a good idea of QOS 
without having to load down the OpenWRT nodes, and as such, change their 
performance. We will not get the same level of detail as the android or 
desktop nodes, but it is really the best we can do while maintaining an 
accurate image of the nodes performance.

>  *
>
>
>
> On Fri, Mar 15, 2013 at 10:14 PM, Andrew Reynolds 
> <andrew at opentechinstitute.org <mailto:andrew at opentechinstitute.org"
1254,Commotion-dev, Python-based testing framework across,"Tue, 02 Apr 2013 10:10:05 -0400",-0400,Dan Staples,"
On 04/02/2013 04:20 AM, Ben West wrote:
> Hi All,
>
> I've created a repo of a few basic tests implemented as unittests in
> Python 2.6+.  This repo contains just the Python scripts themselves,
> so that it may be included later as a submodule into other repos
> containing platform-specific packaging stuff.
> https://github.com/westbywest/commotion-tests-core
>
> Due please note I expect this repo to change, and even its location to
> maybe switch to OTI's github account at some point soon.
>
> To serve as hopefully demonstrative examples of the test coverage
> possible, the scripts I just checked in test for the following:
>
>   * ping localhost
>   * ping gateway IP (either default gateway or the one assigned by
>     OLSRd smartgateway)
>   * ping Google DNS (aka do we have Internet?)
>   * presence of an active olsrd process
>   * olsrd responds to jsoninfo requests
>   * link quality of the next hop is above a specified threshold
>
> These scripts should run under the following Python versions / platforms:
>
>   * Python v2.7+ under Debian/Ubuntu
>   * Python for Android (Py4A) app r5+ / Scripting Layer for Android
>     (SL4A) app r6+
>   * Python-mini v2.7+ under OpenWRT 12.09+
>
> ... to test the following Commotion implementations, respectively
> (where each is enabled by the user, not by the Python script):
>
>   * commotion-mesh-applet
>   * Mesh Tether app
>   * Commotion-OpenWRT DR1, with *python*, *python-json*, and
>     *olsrd-mod-jsoninfo* modules installed
>
> Questions about how to proceed:
>
>   * Whether to proceed with Python-based testing framework?  I tried
>     to heavily leverage the cross-platform compatibility, but is it
>     worthwhile?
>   * The Python for Android implementation chosen, Py4A, is only Python
>     v2.6.  Is having Python v2.7 on Android worth possibly compiling
>     it into a custom APK?
>   * Many of the desired test vectors, e.g. throughput testing, require
>     the test run simultaneously on at least 2 nodes.  It's pretty easy
>     to write a crude server in Python to function as one half of a
>     throughput test, but does the complexity of running different
>     Python scripts on different nodes simultaneously become unreasonable?
>
One idea that's been floated has been having a test suite running on a
device that you could plug into the wired LAN port of a OpenWRT router,
and have the device (maybe a program running on a laptop, or a Raspberry
Pi) run tests. You could have two running at different points of the
network, and they could talk to each other. That way you wouldn't have
to have the test scripts (and the Python interpreter) running on the
routers themselves. Would that be feasible and just as useful?
>
>   * The python-mini module for OpenWRT chews up 1.5Mbytes of flash,
>     and it doesn't include unittest by default.  This unfortunately
>     appears to be /too much already/; it wouldn't fit on a Nanostation
>     flash w/o removing lots of stuff.  Maybe this size could be
>     trimmed down by modifying the python-mini package's Makefile, or
>     by distributing test scripts in bytecode form to OpenWRT nodes.
>
Any idea what the size of the scripts are when compiled into bytecode?
>
>  *
>
>
>
> On Fri, Mar 15, 2013 at 10:14 PM, Andrew Reynolds
> <andrew at opentechinstitute.org <mailto:andrew at opentechinstitute.org"
1255,Commotion-dev, Python-based testing framework across,"Tue, 2 Apr 2013 09:31:38 -0500",-0500,Ben West,"Hi Seamus and Dan,

Replying about having Python on (and off) OpenWRT:

The cross-platform nature seems like it would be very helpful to maintain a
single collection of tests vectors to apply as Commotion finds its way onto
more platforms (Windows, OSX).  But, the obvious tradeoff here is the size
of the Python interpreter.

Also, the test scripts that query a node's OLSR instance via jsoninfo could
also run *on the client*, rather than directly on the node.  The node would
just need to open up the jsoninfo port 9090 on its firewall behind the
public AP interface (or have the client use its private AP).  I can tweak
the Python scripts (tho very little needed) to accommodate this option.

Besides that, I think I may be able to tweak the Python Makefile provided
with OpenWRT, so that the compiled package is much smaller than its current
1.5MByte footprint.  The Python v2.6 implementation bundled into Py4A
(which runs all these tests fine) is *only 150kB*, by comparison.  Still,
admitted that installing another language on what is already disk- and
RAM-bound devices is less than ideal.

Finally, sorry for using the term 'bytecode.'  That's not really what we
need; compiled Python bytecode is neither smaller than source nor
stand-alone executable.  What I meant is maybe compile the Python testsuite
into a single standalone executable using a tool like these:
http://cx-freeze.sourceforge.net/
http://www.pyinstaller.org/

On Tue, Apr 2, 2013 at 8:58 AM, seamus tuohy <s2e at opentechinstitute.org>wrote:

>  Hey,
>
>
> On 04/02/2013 04:20 AM, Ben West wrote:
>
>   Hi All,
>
> I've created a repo of a few basic tests implemented as unittests in
> Python 2.6+.  This repo contains just the Python scripts themselves, so
> that it may be included later as a submodule into other repos containing
> platform-specific packaging stuff.
> https://github.com/westbywest/commotion-tests-core
>
> Due please note I expect this repo to change, and even its location to
> maybe switch to OTI's github account at some point soon.
>
>  To serve as hopefully demonstrative examples of the test coverage
> possible, the scripts I just checked in test for the following:
>
>    - ping localhost
>    - ping gateway IP (either default gateway or the one assigned by OLSRd
>    smartgateway)
>    - ping Google DNS (aka do we have Internet?)
>    - presence of an active olsrd process
>    - olsrd responds to jsoninfo requests
>    - link quality of the next hop is above a specified threshold
>
>  These scripts should run under the following Python versions / platforms:
>
>    - Python v2.7+ under Debian/Ubuntu
>    - Python for Android (Py4A) app r5+ / Scripting Layer for Android
>    (SL4A) app r6+
>    - Python-mini v2.7+ under OpenWRT 12.09+
>
>  ... to test the following Commotion implementations, respectively (where
> each is enabled by the user, not by the Python script):
>
>    - commotion-mesh-applet
>     - Mesh Tether app
>     - Commotion-OpenWRT DR1, with *python*, *python-json*, and *
>    olsrd-mod-jsoninfo* modules installed
>
>  Questions about how to proceed:
>
>    - Whether to proceed with Python-based testing framework?  I tried to
>    heavily leverage the cross-platform compatibility, but is it worthwhile?
>
>
>    - The Python for Android implementation chosen, Py4A, is only Python
>    v2.6.  Is having Python v2.7 on Android worth possibly compiling it into a
>    custom APK?
>    - Many of the desired test vectors, e.g. throughput testing, require
>    the test run simultaneously on at least 2 nodes.  It's pretty easy to write
>    a crude server in Python to function as one half of a throughput test, but
>    does the complexity of running different Python scripts on different nodes
>    simultaneously become unreasonable
>
>   Not at all, I think that it is necessary to have different nodes
> running tests simultaneously. In most of the openWRT testing situations we
> run currently, we have client devices running simultaneously to elucidate
> information about the mesh nodes.
>
>
>    - The python-mini module for OpenWRT chews up 1.5Mbytes of flash, and
>    it doesn't include unittest by default.  This unfortunately appears to be
>    *too much already*; it wouldn't fit on a Nanostation flash w/o
>    removing lots of stuff.  Maybe this size could be trimmed down by modifying
>    the python-mini package's Makefile, or by distributing test scripts in
>    bytecode form to OpenWRT nodes.
>
>   I think that loading python on to openWRT nodes is impractical. Having
> client devices running tests over the mesh with possible on-node analytics
> running for later collection will give us a good idea of QOS without having
> to load down the OpenWRT nodes, and as such, change their performance. We
> will not get the same level of detail as the android or desktop nodes, but
> it is really the best we can do while maintaining an accurate image of the
> nodes performance.
>
>
>
>    -
>
>
>
> On Fri, Mar 15, 2013 at 10:14 PM, Andrew Reynolds <
> andrew at opentechinstitute.org> wrote:
>
"
1256,Commotion-dev, Python-based testing framework across,"Tue, 02 Apr 2013 10:44:59 -0400",-0400,seamus tuohy,"On 04/02/2013 10:31 AM, Ben West wrote:
> Hi Seamus and Dan,
>
> Replying about having Python on (and off) OpenWRT:
>
> The cross-platform nature seems like it would be very helpful to 
> maintain a single collection of tests vectors to apply as Commotion 
> finds its way onto more platforms (Windows, OSX). But, the obvious 
> tradeoff here is the size of the Python interpreter.

Agreed!
>
> Also, the test scripts that query a node's OLSR instance via jsoninfo 
> could also run /on the client/, rather than directly on the node.  The 
> node would just need to open up the jsoninfo port 9090 on its firewall 
> behind the public AP interface (or have the client use its private 
> AP).  I can tweak the Python scripts (tho very little needed) to 
> accommodate this option.

I think that is a great idea for the openWRT instances. Though, as we 
get the other platforms up and running it will be less and less needed, 
since we will be running more powerful devices as nodes.

>
> Besides that, I think I may be able to tweak the Python Makefile 
> provided with OpenWRT, so that the compiled package is much smaller 
> than its current 1.5MByte footprint.  The Python v2.6 implementation 
> bundled into Py4A (which runs all these tests fine) is /only 150kB/, 
> by comparison.  Still, admitted that installing another language on 
> what is already disk- and RAM-bound devices is less than ideal.

I don't know what the consensus is, but as much as I would love to start 
to play with python on the OpenWRT nodes, I think we will be able to use 
the existing testing code you built, along with some client based tweaks 
to accurately test a OpenWRT based mesh.

>
> Finally, sorry for using the term 'bytecode.'  That's not really what 
> we need; compiled Python bytecode is neither smaller than source nor 
> stand-alone executable.  What I meant is maybe compile the Python 
> testsuite into a single standalone executable using a tool like these:
> http://cx-freeze.sourceforge.net/
> http://www.pyinstaller.org/
>
> On Tue, Apr 2, 2013 at 8:58 AM, seamus tuohy 
> <s2e at opentechinstitute.org <mailto:s2e at opentechinstitute.org"
1257,Commotion-dev, Python-based testing framework across,"Tue, 2 Apr 2013 13:34:12 -0500",-0500,Ben West,"Responses in-line, in green if your email client can do that sort of thing
...

On Tue, Apr 2, 2013 at 9:44 AM, seamus tuohy <s2e at opentechinstitute.org>wrote:

>  On 04/02/2013 10:31 AM, Ben West wrote:
>
>  Hi Seamus and Dan,
>
>  Replying about having Python on (and off) OpenWRT:
>
> The cross-platform nature seems like it would be very helpful to maintain
> a single collection of tests vectors to apply as Commotion finds its way
> onto more platforms (Windows, OSX).  But, the obvious tradeoff here is the
> size of the Python interpreter.
>
>
> Agreed!
>
>
>  Also, the test scripts that query a node's OLSR instance via jsoninfo
> could also run *on the client*, rather than directly on the node.  The
> node would just need to open up the jsoninfo port 9090 on its firewall
> behind the public AP interface (or have the client use its private AP).  I
> can tweak the Python scripts (tho very little needed) to accommodate this
> option.
>
>
> I think that is a great idea for the openWRT instances. Though, as we get
> the other platforms up and running it will be less and less needed, since
> we will be running more powerful devices as nodes.
>
>
OLSRd will only report details like link quality and routing topology.  For
lower-level hardware information about the wireless interface, e.g. dBm of
remote APs, TX retries, I would highly recommend Henning's fabulous LDEP
implementation that is now in the CONFINE repo.  That is, the python test
script on the client's machine could query data both from the node's OLSRd
instance via jsoninfo, and also from its LDEP daemon.  And Henning would be
thrilled. :)

LDEP implementation targeted at nl80211 for OpenWRT:
http://wiki.confine-project.eu/soft:dlep
http://wiki.confine-project.eu/soft:confine-dist
https://github.com/confine-project/confine-dist/tree/master/packages/confine(as
packaged into Confine)
http://olsr.org/git/?p=dlep_app.git;a=tree (the current repo?)


>
>  Besides that, I think I may be able to tweak the Python Makefile
> provided with OpenWRT, so that the compiled package is much smaller than
> its current 1.5MByte footprint.  The Python v2.6 implementation bundled
> into Py4A (which runs all these tests fine) is *only 150kB*, by
> comparison.  Still, admitted that installing another language on what is
> already disk- and RAM-bound devices is less than ideal.
>
>
> I don't know what the consensus is, but as much as I would love to start
> to play with python on the OpenWRT nodes, I think we will be able to use
> the existing testing code you built, along with some client based tweaks to
> accurately test a OpenWRT based mesh.
>
>
I've so far trimmed the OpenWRT python-mini package down to ~1.2MB, now
including unittest.  1.0MByte may be doable with more strenuous weight
loss.  This package could still be handy to have on hand for reference
(i.e. as optional add-on module for Commotion).  I will soon share a repo
with the modified Makefile


>
>
>  Finally, sorry for using the term 'bytecode.'  That's not really what we
> need; compiled Python bytecode is neither smaller than source nor
> stand-alone executable.  What I meant is maybe compile the Python testsuite
> into a single standalone executable using a tool like these:
> http://cx-freeze.sourceforge.net/
> http://www.pyinstaller.org/
>
> Likewise, if running the Python test suite directly on nodes becomes a
necessity, this option to compile those scripts into stand-alone
executables is still there.  Assume the OpenWRT Makefile-foo required for
this is not outrageous.


-- 
Ben West
http://gowasabi.net
ben at gowasabi.net
314-246-9434
"
1258,Commotion-dev, Python-based testing framework across,"Wed, 3 Apr 2013 07:34:02 +1200",+1200,Paul Gardner-Stephen,"Hi All,

If it turns out that python is Just Too Big to fit on an OpenWRT
router, and shell-script ends up being the most feasible, we have a
shell-based test framework that we use to drive testing on the Serval
daemon code that might be of use.  Look in tests/ in the serval-dna
repo for the scripts we have created and the infrastructure behind
them.  Let me know if you want more info.

Paul.

On Wed, Apr 3, 2013 at 6:34 AM, Ben West <ben at gowasabi.net> wrote:
> Responses in-line, in green if your email client can do that sort of thing
> ...
>
> On Tue, Apr 2, 2013 at 9:44 AM, seamus tuohy <s2e at opentechinstitute.org>
> wrote:
"
1259,Commotion-dev, Disabling adhoc encryption on current nightly,"Wed, 3 Apr 2013 13:49:11 -0500",-0500,Ben West,"Hi All,

I'm having good success exercising recent nightly builds of
Commotion-OpenWRT DR1 on a Nanostation Loco M2.  I understand this is a new
release, and that it has an active issue queue (which I'm going to post to
soon).  I'm putting this question on the listserv right now, in case this
happens to touch on issues already filed, and also for reference of other
list members.

The Quickstart tool on the new DR1 release is really neat!  At present, I'm
trying out the tool by flashing a node and then connecting to
http://192.168.1.20/ on the node's eth0 port.

However, it looks like QS enables psk2 encryption on the node's adhoc
interface, and I have yet to figure out how to disable it.  That is, the
luci UI lists ""Encryption: none"" for the adhoc, and re-applying /
committing that setting via luci just seems to hang.  Likewise, manually
editing /etc/config/wireless at the command line to disable encryption is
ineffective, because I think commotiond just regenerates that file when I
issue ""wifi restart"", clobbering my edits.

Is there a trick to getting commotiond to not encrypt the adhoc interface?
I need the mesh unencrypted, so that the Nanostation can mesh with my
Ubuntu/commotion-mesh-applet and Android/Mesh Tether devices.

(Also, it seems that I can hack commotiond to not deploy encryption by
editing /lib/netifd/proto/commotion.sh, but I'm asking here on the list in
case there is a more elegant way.)

Thanks.


-- 
Ben West
http://gowasabi.net
ben at gowasabi.net
314-246-9434
"
1260,Commotion-dev, Disabling adhoc encryption on current nightly,"Thu, 04 Apr 2013 10:09:26 -0400",-0400,seamus tuohy,"On 04/03/2013 02:49 PM, Ben West wrote:
> Hi All,
>
> I'm having good success exercising recent nightly builds of 
> Commotion-OpenWRT DR1 on a Nanostation Loco M2.  I understand this is 
> a new release, and that it has an active issue queue (which I'm going 
> to post to soon).  I'm putting this question on the listserv right 
> now, in case this happens to touch on issues already filed, and also 
> for reference of other list members.
>
> The Quickstart tool on the new DR1 release is really neat!  At 
> present, I'm trying out the tool by flashing a node and then 
> connecting to http://192.168.1.20/ on the node's eth0 port.
That is great to hear!

>
> However, it looks like QS enables psk2 encryption on the node's adhoc 
> interface, and I have yet to figure out how to disable it.  That is, 
> the luci UI lists ""Encryption: none"" for the adhoc, and re-applying / 
> committing that setting via luci just seems to hang.  Likewise, 
> manually editing /etc/config/wireless at the command line to disable 
> encryption is ineffective, because I think commotiond just regenerates 
> that file when I issue ""wifi restart"", clobbering my edits.

If you go through the manual configuration and click the ""Continue with 
a insecure network"" button on the Keyfiles and Security page QS will 
remove the servald and wpakey values from the 
/etc/commotion/profiles.d/quickstartMesh profile which is used to 
generate the profiles at the end of QS. Otherwise, it will keep the 
default values, which are pulled from the 
/etc/commotion/profiles.d/defaultMesh config file. When JK gets in the 
office I will ask how commotiond intereperets the profile. From what you 
are saying I am assuming that a blank line results in the default 
behaviour of true. I will post again when I get the correct value to 
disable encryption for the config file.
>
> Is there a trick to getting commotiond to not encrypt the adhoc 
> interface?  I need the mesh unencrypted, so that the Nanostation can 
> mesh with my Ubuntu/commotion-mesh-applet and Android/Mesh Tether devices.
>
> (Also, it seems that I can hack commotiond to not deploy encryption by 
> editing /lib/netifd/proto/commotion.sh, but I'm asking here on the 
> list in case there is a more elegant way.)
>
> Thanks.
>
>
> -- 
> Ben West
> http://gowasabi.net
> ben at gowasabi.net <mailto:ben at gowasabi.net>
> 314-246-9434 <tel:314-246-9434>
>
>
>
> _______________________________________________
> Commotion-dev mailing list
> Commotion-dev at lists.chambana.net
> https://lists.chambana.net/mailman/listinfo/commotion-dev

"
1261,Commotion-dev, Disabling adhoc encryption on current nightly,"Thu, 04 Apr 2013 12:35:32 -0400",-0400,Dan Staples,"There is currently a bug in the quickstart, where if you click on
""Continue with an insecure network"", it actually still turns on
encryption for the adhoc interface. To turn it off manually, set
wpa=false in the /etc/commotion/profiles.d/quickstartMesh file, then
restart commotion and restart networking. After going through the
quickstart, the adhoc/mesh interface uses the quickstartMesh commotion
profile, which you can confirm in /etc/config/network.

If doing the above doesn't fix it, or it complains about your encryption
settings, remove the wpa and key options for the mesh interface in
/etc/config/wireless, and then restart networking. But this shouldn't be
necessary, since /etc/config/wireless is largely generated by commotiond
(at least the interface-specific sections).

On Thu 04 Apr 2013 10:09:26 AM EDT, seamus tuohy wrote:
>
> On 04/03/2013 02:49 PM, Ben West wrote:
"
1262,Commotion-dev, down / code.commotionwireless.net,"Fri, 5 Apr 2013 10:39:53 -0400",-0400,hello at ninabianchi.com,"Is code.commotionwireless.net down? 

We're working and need the documentation... any thoughts of when it might be back up?

-Nina
"
1263,Commotion-dev, down / code.commotionwireless.net,"Fri, 5 Apr 2013 10:39:12 -0400",-0400,Nina Bianchi,"Is code.commotionwireless.net down? 

We're working and need the documentation... any thoughts of when it might be back up?

-Nina
"
1264,Commotion-dev, down / code.commotionwireless.net,"Fri, 05 Apr 2013 11:37:15 -0400",-0400,Andrew Reynolds,"It is. Josh is doing some unplanned maintenance related to the
scalability issues we've been having. The sites are syncing now and
should be back up as soon as they're done. Unfortunately I don't have an
ETA on that.

-andrew

On 04/05/2013 10:39 AM, Nina Bianchi wrote:
> Is code.commotionwireless.net down? 
> 
> We're working and need the documentation... any thoughts of when it might be back up?
> 
> -Nina
> _______________________________________________
> Commotion-dev mailing list
> Commotion-dev at lists.chambana.net
> https://lists.chambana.net/mailman/listinfo/commotion-dev
> 


"
1265,Commotion-dev, Developer Contract: Commotion iOS Client,"Tue, 09 Apr 2013 11:04:10 -0400",-0400,Andrew Reynolds,"The New America Foundation's Open Technology Institute (OTI) is
accepting proposals to develop an Apple iOS client for the Commotion
Wireless Project. This will be a concept to completion production. The
purpose of this RFP is to provide a fair evaluation for all candidates
and to provide the candidates with the evaluation criteria against which
they will be judged.

Full details are available at
https://commotionwireless.net/jobs/ios-client-rfp

Please submit proposals to techjobs at opentechinstitute.org no later than
5:00 PM EDT on May 6, 2012.

-andrew

"
1266,Commotion-dev, down / code.commotionwireless.net,"Tue, 9 Apr 2013 17:50:10 -0500",-0500,Ben West,"Hi All,

Not sure if this problem was resolved then, or if it is still ongoing.
code.commotionwireless.net is still down, complaining with a ""500 internal
error.""

To add to the fun, it unfortunately looks like the main site
commotionwireless.net is *also* down, with Drupal complaining about
inability to connect to MySQL server.

On Fri, Apr 5, 2013 at 10:37 AM, Andrew Reynolds <
andrew at opentechinstitute.org> wrote:

> It is. Josh is doing some unplanned maintenance related to the
> scalability issues we've been having. The sites are syncing now and
> should be back up as soon as they're done. Unfortunately I don't have an
> ETA on that.
>
> -andrew
>
> On 04/05/2013 10:39 AM, Nina Bianchi wrote:
> > Is code.commotionwireless.net down?
> >
> > We're working and need the documentation... any thoughts of when it
> might be back up?
> >
> > -Nina
> > _______________________________________________
> > Commotion-dev mailing list
> > Commotion-dev at lists.chambana.net
> > https://lists.chambana.net/mailman/listinfo/commotion-dev
> >
>
>
>
> _______________________________________________
> Commotion-dev mailing list
> Commotion-dev at lists.chambana.net
> https://lists.chambana.net/mailman/listinfo/commotion-dev
>
"
1267,Commotion-dev, down / code.commotionwireless.net,"Mon, 15 Apr 2013 14:35:13 -0400",-0400,Will Hawkins,"Hello Ben,

Just to follow up on this, it seems like everything is back online. We
are going to be adding some caching to our infrastructure to make things
quicker, but everything appears to be online. Please keep us posted if
you have trouble accessing the sites!

Will

On 04/09/2013 06:50 PM, Ben West wrote:
> Hi All,
> 
> Not sure if this problem was resolved then, or if it is still ongoing. 
> code.commotionwireless.net <http://code.commotionwireless.net> is still
> down, complaining with a ""500 internal error.""
> 
> To add to the fun, it unfortunately looks like the main site
> commotionwireless.net <http://commotionwireless.net> is /also/ down,
> with Drupal complaining about inability to connect to MySQL server.
> 
> On Fri, Apr 5, 2013 at 10:37 AM, Andrew Reynolds
> <andrew at opentechinstitute.org <mailto:andrew at opentechinstitute.org"
1268,Commotion-dev, down / code.commotionwireless.net,"Mon, 15 Apr 2013 13:41:33 -0500",-0500,Ben West,"Hi Will,

Thanks for the update.  I can confirm code.commotionwireless.net and
commotionwireless.net are responding on my end.

Also, I do have experience deploying Drupal under nginx
(http://gowasabi.netbeing an example), and even some experience
deploying nginx for load
balancing.  Feel free to sprinkle me (lightly) with questions if these
would be relevant to the Commotion web assets.

Have a fun Monday!

On Mon, Apr 15, 2013 at 1:35 PM, Will Hawkins <
hawkinsw at opentechinstitute.org> wrote:

> Hello Ben,
>
> Just to follow up on this, it seems like everything is back online. We
> are going to be adding some caching to our infrastructure to make things
> quicker, but everything appears to be online. Please keep us posted if
> you have trouble accessing the sites!
>
> Will
>
> On 04/09/2013 06:50 PM, Ben West wrote:
> > Hi All,
> >
> > Not sure if this problem was resolved then, or if it is still ongoing.
> > code.commotionwireless.net <http://code.commotionwireless.net> is still
> > down, complaining with a ""500 internal error.""
> >
> > To add to the fun, it unfortunately looks like the main site
> > commotionwireless.net <http://commotionwireless.net> is /also/ down,
> > with Drupal complaining about inability to connect to MySQL server.
> >
> > On Fri, Apr 5, 2013 at 10:37 AM, Andrew Reynolds
> > <andrew at opentechinstitute.org <mailto:andrew at opentechinstitute.org"
1269,Commotion-dev, zabbix / commotion data,"Wed, 17 Apr 2013 11:38:13 +0200",+0200,Dan Staples,"Moving this discussion to the Commotion dev list, as Will's explanation 
of his Zabbix setup is generally relevant to ongoing development.

Will, do you know what types of APIs Zabbix provides? If it is available 
via JSON or some easily parsable format, it could be super useful for a 
network dashboard.

On 04/17/2013 01:06 AM, Will Hawkins wrote:
> Should be possible, yes! I can imagine looking that up based on mac
> address or device name (both things that the dhcp server can ""see"").
>
> Will
>
> On 04/16/2013 07:05 PM, Georgia Bullen wrote:
"
1270,Commotion-dev, Mesh visualization/mapping options,"Wed, 17 Apr 2013 12:28:15 +0200",+0200,Dan Staples,"Also moving this discussion to the dev list. We've been talking about 
re-writing or replacing the clunky OLSR-Viz that we currently use to 
visualize a Commotion mesh on the OpenWRT firmware. Below we mention a 
couple options:

1) Freifunks super jazzy uber-visualizer: 
http://freifunk-gw01.hamburg.ccc.de/ffhhmap/nodes.html
2) AlterMundi's altermap: http://mapa.mesh.altermundi.net/

I personally like the decentralized, replicated nature of Altermap, 
which synchronizes data between hub nodes (using CouchDB), so that each 
has a full picture of the entire network. To build off this idea, we 
could have nodes pushing their link-state data to nearby hubs, and then 
the nodes could periodically pull summarized snapshots of the network 
map that they could present to clients. If the clients want more 
detailed info, there could be a link to a nearby hub node, which would 
present a visualization of the full data set. The hub node could be 
running a much more in-depth visualization, perhaps using something like 
Freifunk's map.

Here's a quick sketch of how this could be architected: 
http://www.asciiflow.com/#Draw6659252420885764096.


"
1271,Commotion-dev, zabbix / commotion data,"Wed, 17 Apr 2013 17:09:01 -0500",-0500,Ben West,"What priority would you place on retrieving live monitoring data from nodes
vs serving the nodes' clients?  Tools like zabbix and nagios do require CPU
and RAM resources, along with flash space.  Indeed, here are the sizes for
packages like these, compiled as modules in the current DR1 build tree:

-rw-r--r-- 1 ben ben  177487 Apr 17 15:05 monit_5.4-1_ar71xx.ipk
-rw-r--r-- 1 ben ben  173397 Apr 17 15:06 monit-nossl_5.4-1_ar71xx.ipk
-rw-r--r-- 1 ben ben    6449 Apr 17 15:07 muninlite_1.0.4-3_ar71xx.ipk
-rw-r--r-- 1 ben ben 1841543 Apr 17 15:31 nagios_2.10-2_ar71xx.ipk
-rw-r--r-- 1 ben ben  481818 Apr 17 16:27 nagios-plugins_1.4.14-3_ar71xx.ipk
-rw-r--r-- 1 ben ben   78106 Apr 17 16:30 zabbix-agent_2.0.0-1_ar71xx.ipk
-rw-r--r-- 1 ben ben   90552 Apr 17 16:30 zabbix-agentd_2.0.0-1_ar71xx.ipk
-rw-r--r-- 1 ben ben   36824 Apr 17 16:30 zabbix-get_2.0.0-1_ar71xx.ipk
-rw-r--r-- 1 ben ben  228245 Apr 17 16:30 zabbix-proxy_2.0.0-1_ar71xx.ipk
-rw-r--r-- 1 ben ben   42211 Apr 17 16:30 zabbix-sender_2.0.0-1_ar71xx.ipk
-rw-r--r-- 1 ben ben   62865 Apr 17 15:07 xinetd_2.3.15-1_ar71xx.ipk

Also, OpenWRT by default doesn't support CPU task scheduling, a la the
'nice' tool, for ar71xx platform.  Meaning these tools would be running at
the same CPU priotity as wpa_supplicant, dnsmasq, etc.  But, if you want
to, it is config option BUSYBOX_CONFIG_RENICE.

Besides that, I've been curious about how useful the 'muninlite' package
could be for this sort of use case.  It implements the munin protocol for
collecting/sending monitoring data just in shell script, meaning the
on-board copy of busybox can execute it.  And I'm assuming it to be
extensible roughly in the same way one can write custom munin plugins.  The
downside, tho, is that muninlite does require the xinetd package.

On Wed, Apr 17, 2013 at 4:38 AM, Dan Staples <
danstaples at opentechinstitute.org> wrote:

> Moving this discussion to the Commotion dev list, as Will's explanation of
> his Zabbix setup is generally relevant to ongoing development.
>
> Will, do you know what types of APIs Zabbix provides? If it is available
> via JSON or some easily parsable format, it could be super useful for a
> network dashboard.
>
> On 04/17/2013 01:06 AM, Will Hawkins wrote:
>
"
1272,Commotion-dev, Mesh visualization/mapping options,"Thu, 18 Apr 2013 08:39:33 +0930",+0930,Paul Gardner-Stephen,"Hello,

Another approach to replicating this visualisation data is to use Rhizome
to replicate the network structure information for visualisation on nodes.
This could feasibly be integrated with these existing tools.

Paul.


On Wed, Apr 17, 2013 at 7:58 PM, Dan Staples <
danstaples at opentechinstitute.org> wrote:

>  Also moving this discussion to the dev list. We've been talking about
> re-writing or replacing the clunky OLSR-Viz that we currently use to
> visualize a Commotion mesh on the OpenWRT firmware. Below we mention a
> couple options:
>
> 1) Freifunks super jazzy uber-visualizer:
> http://freifunk-gw01.hamburg.ccc.de/ffhhmap/nodes.html
> 2) AlterMundi's altermap: http://mapa.mesh.altermundi.net/
>
> I personally like the decentralized, replicated nature of Altermap, which
> synchronizes data between hub nodes (using CouchDB), so that each has a
> full picture of the entire network. To build off this idea, we could have
> nodes pushing their link-state data to nearby hubs, and then the nodes
> could periodically pull summarized snapshots of the network map that they
> could present to clients. If the clients want more detailed info, there
> could be a link to a nearby hub node, which would present a visualization
> of the full data set. The hub node could be running a much more in-depth
> visualization, perhaps using something like Freifunk's map.
>
> Here's a quick sketch of how this could be architected:
> http://www.asciiflow.com/#Draw6659252420885764096.
>
>
> "
1273,Commotion-dev, GUI meetup in DC April 25/26,"Thu, 18 Apr 2013 20:47:03 -0400",-0400,Hans-Christoph Steiner,"
Hey all,

Bradley, Josh, and I are all looking forward to hanging out and hacking in DC
next week!  Is there any kind of agenda that we should prepare for?  I'll
bring my standard Android test devices and a little netbook.

.hc
"
1274,Commotion-dev, RPi & Commotion,"Mon, 22 Apr 2013 09:47:03 -0400",-0400,Dan Staples,"Moving this to the dev list, so other folks can benefit from the 
discussion :)

Hi Zach,

Currently, Raspberry Pi + Commotion is uncharted territory. What I did 
at the National Conference on Media Reform (NCMR) was simply use some 
RPis with wifi cards, put them in ad-hoc wireless mode, and then run 
OLSR to allow them to mesh multi-hop. I also had them running from 
battery packs I got from Radio Shack :)

Using the same wireless settings as the Commotion nodes (SSID, BSSID, 
channel, encryption), they were able to mesh with the Commotion network. 
However, they lacked the rest of the Commotion features. It is on our 
roadmap for the near future to add the rest of the features, and release 
a custom Commotion Raspbian image that you can put on an SD card and 
boot your RPi from.

As for wifi cards, I recommend any USB cards that use the ath9k_htc 
driver. My top choices for cards are:

1. TP-Link TL-WN821N (300 Mbps, MIMO)
2. TP-Link TL-WN822N (300 Mbps, high gain dual 3 dBi antennas)
3. TP-Link TL-WN722N (150 Mbps, with 4 dBi detachable antenna)
4. Ubiquiti WifiStation EXT (super powerful with 6 dBi detachable 
antenna, but much larger than the others)

I have only tested #1 with the RPi. I am worried about #4 working with 
the RPi, in terms of its power consumption. But in general, the 
ath9k_htc devices have great linux compatibility, and Ben West has done 
some great work getting them to do multiple virtual interfaces under 
OpenWRT. I hope to get this working under Debian as well.

The biggest challenge I foresee, besides running multiple virtual 
interfaces on a USB wifi card, is power. The RPi doesn't like to give 
more than 500 mA to USB peripherals, and wifi cards love to gobble up 
power! So stability can be an issue if the wifi card is drawing too much 
current...the RPi can start to act flaky or crash. I noticed stability 
issues at NCMR, but didn't have time to look into it.

Hope this is helpful...

-Dan

On Sun 21 Apr 2013 07:50:32 PM EDT, Zachary Menegakis wrote:
>
> Hi Dan,
>
> Good to meet you. I thought I'd follow-up on this email from Georgia.
>
> Would you be able to point us to any Raspberry Pi + Commotion projects?
>
> I've joined the distro lists and I'm interested in finding out some of
> the development challenges/pros/cons in this regard.
>
> Thanks,
> Zack
>
>
>
>
>
>
>
> On Tue, Apr 9, 2013 at 12:05 PM, Georgia Bullen
> <georgia at opentechinstitute.org <mailto:georgia at opentechinstitute.org"
1275,Commotion-dev, GUI meetup in DC April 25/26,"Mon, 22 Apr 2013 11:16:29 -0400",-0400,Andrew Reynolds,"Sounds perfect. Our Battlemesh contingent just got back today, and I
know Will has been making progress on Android support. We should have
plenty to talk about.

-andrew

On 04/18/2013 08:47 PM, Hans-Christoph Steiner wrote:
> 
> Hey all,
> 
> Bradley, Josh, and I are all looking forward to hanging out and hacking in DC
> next week!  Is there any kind of agenda that we should prepare for?  I'll
> bring my standard Android test devices and a little netbook.
> 
> .hc
> _______________________________________________
> Commotion-dev mailing list
> Commotion-dev at lists.chambana.net
> https://lists.chambana.net/mailman/listinfo/commotion-dev
> 
	

"
1276,Commotion-dev, Mesh visualization/mapping options,"Mon, 22 Apr 2013 12:22:43 -0400",-0400,Dan Staples,"That's a good idea, Paul. I've been thinking about a lot of things that 
we could use the Rhizome layer to replicate across a mesh. One thing 
that could make it more useful for things like this is having a RESTful 
API, especially for web-based applications. Are there any plans for 
expanding the Rhizome API?

On Wed 17 Apr 2013 07:09:33 PM EDT, Paul Gardner-Stephen wrote:
> Hello,
>
> Another approach to replicating this visualisation data is to use
> Rhizome to replicate the network structure information for
> visualisation on nodes. This could feasibly be integrated with these
> existing tools.
>
> Paul.
>
>
> On Wed, Apr 17, 2013 at 7:58 PM, Dan Staples
> <danstaples at opentechinstitute.org
> <mailto:danstaples at opentechinstitute.org"
1277,Commotion-dev, RPi & Commotion,"Mon, 22 Apr 2013 14:05:16 -0400",-0400,The Doctor,
1278,Commotion-dev, RPi & Commotion,"Mon, 22 Apr 2013 13:37:34 -0500",-0500,Ben West,"A possibly important caveat about using the ath9k_htc-based USB wifi
dongles under Debian derivatives is to make sure you have the latest
compat-wireless drivers.  OpenWRT surprisingly far ahead of the larger
distros in terms of adopting the latest and greatest from
wireless.kernel.org.

I've done this in VMware-based Ubuntu nodes just by installing the package *
linux-backports-modules-cw-3.**6-quantal-generic*.  For Debian, it looks
like the relevant package from backports is *firmware-atheros*.  You would
probably need to compile that package for relevant kernel version and rPI
target within your toolchain.

As for USB, besides using a separate hub, I think one could readily hack
into the 5V / GND wires on the cable between the rPI and the wifi dongle to
insert a separate 5V supply capable of supplying up to 1A.  Just be mindful
not to tear open the shield around the diff pairs in the USB cable (or not
too badly).  Enclosing all such hackery in shrink-wrap could even make it
look presentable. ;)

On Mon, Apr 22, 2013 at 1:05 PM, The Doctor <drwho at virtadpt.net> wrote:

> "
1279,Commotion-dev, Mesh visualization/mapping options,"Tue, 23 Apr 2013 05:33:16 +0930",+0930,Paul Gardner-Stephen,"Hello,


On Tue, Apr 23, 2013 at 1:52 AM, Dan Staples <
danstaples at opentechinstitute.org> wrote:

> That's a good idea, Paul. I've been thinking about a lot of things that
> we could use the Rhizome layer to replicate across a mesh. One thing
> that could make it more useful for things like this is having a RESTful
> API, especially for web-based applications. Are there any plans for
> expanding the Rhizome API?


Funny you should mention this.  We were just yesterday talking about
HTTP-based APIs to get to contents of Rhizome bundles.  This would map very
naturally to a RESTful-type interface.

So in short, yes, we do intend to expand the Rhizome API as and when we are
able.  A simplistic implementation of an API that will allow access to
HTTP-transported documents from in a bundle is likely to show up in the
coming weeks, but I will let Jeremy confirm or deny my understanding of
this ;)

Paul.



> On Wed 17 Apr 2013 07:09:33 PM EDT, Paul Gardner-Stephen wrote:
> > Hello,
> >
> > Another approach to replicating this visualisation data is to use
> > Rhizome to replicate the network structure information for
> > visualisation on nodes. This could feasibly be integrated with these
> > existing tools.
> >
> > Paul.
> >
> >
> > On Wed, Apr 17, 2013 at 7:58 PM, Dan Staples
> > <danstaples at opentechinstitute.org
> > <mailto:danstaples at opentechinstitute.org"
1280,Commotion-dev, RPi & Commotion,"Tue, 23 Apr 2013 10:02:57 -0400",-0400,Dan Staples,"
On 04/22/2013 02:05 PM, The Doctor wrote:
> On 04/22/2013 09:47 AM, Dan Staples wrote:
>
> > OLSR to allow them to mesh multi-hop. I also had them running from
> > battery packs I got from Radio Shack :)
>
> What kind of battery packs were you using for them?  What's their
> discharge profile look like?
"
1281,Commotion-dev, RPi & Commotion,"Tue, 23 Apr 2013 10:07:39 -0400",-0400,The Doctor,
1282,Commotion-dev, [OTI-Tech] LTS Testing Update,"Wed, 24 Apr 2013 09:07:19 -0400",-0400,Dan Staples,"Moving this discussion to commotion-dev...

When I was previously setting the wireless interfaces to use channel 9
instead of channel 5, the freifunk watchdog would routinely bring down
the wireless interfaces. And I have no idea why. The only way I got it
to work was uninstalling ff-watchdog. So see if that may be a reason why
wireless interfaces are unavailable...there should be a note about it in
logread.

I've also noticed that something is killing olsrd on DR1 nodes, without
any clue in the log. The routing table will still have stale routes in
it, indicating that olsrd isn't exiting cleanly. I wonder if it's being
killed by the out-of-memory watchdog. When I was troubleshooting this
before, I wrote a quick script that ran as a cronjob every minute, and
it would pgrep olsrd. If olsrd was running, it would redirect the output
of top into ~/top.out. If olsrd wasn't running, it would move the last
~/top.out as well as logread into a separate directory. That way,
whenever olsrd was killed, there would be a record of top the minute
before it crashed, as well as the log. Would this be useful for
troubleshooting the LTS nodes?

On Tue 23 Apr 2013 08:41:37 PM EDT, Andrew Reynolds wrote:
>
> You've probably already looked at this, but are there any cron jobs or
> watchdog scripts buried in openwrt that might be restarting networking
> without using commotiond, skipping the commotion profiles in the process?
>
> Also, is there any reason this troubleshooting discussion shouldn't be
> moved to commotion-dev?
>
> -andrew
>
> On 04/23/2013 07:48 PM, Will Hawkins wrote:
"
1283,Commotion-dev, [OTI-Tech] LTS Testing Update,"Wed, 24 Apr 2013 11:49:28 -0400",-0400,The Doctor,
1284,Commotion-dev, [OTI-Tech] LTS Testing Update,"Wed, 24 Apr 2013 13:17:54 -0500",-0500,Ben West,"The Freifunk watchdog package is actually a rather handy package, since it
will monitor any process you want (via periodic cronjob) and restart that
service if the active process disappears (aka crashes).  To my knowledge,
it doesn't directly start/stop any network interfaces.  But, ff-watchdog
does need to be configured to monitor the processes you care about, and to
not conflict with any other watchdog-style task.  That conflict may be
indirectly causing interfaces to go down or even olsrd to stop in absence
of a needed interface.

Its config file is /etc/config/freifunk-watchfog, and here is an example
config I've used (for node using coovachilli):

config process
    option process 'dropbear'
    option initscript '/etc/init.d/dropbear'

config process
    option process 'crond'
    option initscript '/etc/init.d/cron'

config process
    option process 'olsrd'
    option initscript '/etc/init.d/olsrd'

config process
    option process 'chilli'
    option initscript '/etc/init.d/coovachilli'

Are you sure you weren't having problems with the ff-gw-check package
instead?  I.e. un-installed that package at the same time as un-stinalling
ff-watchdog?  I think the gw-check package *will muck* with default routes
and possibly also restart active network interfaces if it can't get a
successful ping to freifunk.net or something.

On Wed, Apr 24, 2013 at 8:07 AM, Dan Staples <
danstaples at opentechinstitute.org> wrote:

> Moving this discussion to commotion-dev...
>
> When I was previously setting the wireless interfaces to use channel 9
> instead of channel 5, the freifunk watchdog would routinely bring down
> the wireless interfaces. And I have no idea why. The only way I got it
> to work was uninstalling ff-watchdog. So see if that may be a reason why
> wireless interfaces are unavailable...there should be a note about it in
> logread.
>
> I've also noticed that something is killing olsrd on DR1 nodes, without
> any clue in the log. The routing table will still have stale routes in
> it, indicating that olsrd isn't exiting cleanly. I wonder if it's being
> killed by the out-of-memory watchdog. When I was troubleshooting this
> before, I wrote a quick script that ran as a cronjob every minute, and
> it would pgrep olsrd. If olsrd was running, it would redirect the output
> of top into ~/top.out. If olsrd wasn't running, it would move the last
> ~/top.out as well as logread into a separate directory. That way,
> whenever olsrd was killed, there would be a record of top the minute
> before it crashed, as well as the log. Would this be useful for
> troubleshooting the LTS nodes?
>
"
1285,Commotion-dev, [OTI-Tech] LTS Testing Update,"Wed, 24 Apr 2013 15:28:11 -0400",-0400,Will Hawkins,"Thanks for your response, Ben. We just recompiled an image w/o most of
the ff software. We are now testing that image to see if things are any
better. We will definitely note how ff-watchdog may be useful and how
ff-gw-check is the likely culprit ;-)

Will

On 04/24/2013 02:17 PM, Ben West wrote:
> The Freifunk watchdog package is actually a rather handy package, since
> it will monitor any process you want (via periodic cronjob) and restart
> that service if the active process disappears (aka crashes).  To my
> knowledge, it doesn't directly start/stop any network interfaces.  But,
> ff-watchdog does need to be configured to monitor the processes you care
> about, and to not conflict with any other watchdog-style task.  That
> conflict may be indirectly causing interfaces to go down or even olsrd
> to stop in absence of a needed interface.
> 
> Its config file is /etc/config/freifunk-watchfog, and here is an example
> config I've used (for node using coovachilli):
> 
> config process
>     option process 'dropbear'
>     option initscript '/etc/init.d/dropbear'
> 
> config process
>     option process 'crond'
>     option initscript '/etc/init.d/cron'
>    
> config process
>     option process 'olsrd'
>     option initscript '/etc/init.d/olsrd'
> 
> config process
>     option process 'chilli'
>     option initscript '/etc/init.d/coovachilli'
> 
> Are you sure you weren't having problems with the ff-gw-check package
> instead?  I.e. un-installed that package at the same time as
> un-stinalling ff-watchdog?  I think the gw-check package /will muck/
> with default routes and possibly also restart active network interfaces
> if it can't get a successful ping to freifunk.net <http://freifunk.net>
> or something.
> 
> On Wed, Apr 24, 2013 at 8:07 AM, Dan Staples
> <danstaples at opentechinstitute.org
> <mailto:danstaples at opentechinstitute.org"
1286,Commotion-dev, [OTI-Tech] LTS Testing Update,"Wed, 24 Apr 2013 15:26:02 -0500",-0500,Ben West,"Hi Will,

I just checked config on a node again (running Attitude Adjustment circa
r35xxx), and I found these lines in /etc/crontabs/root which had been
commented out:

#* * * * *      /usr/sbin/ff_olsr_test_gw.sh
#*/5 * * * *    /usr/sbin/ff_olsr_watchdog

So, be on the lookout for ff packages that deploy these scripts, although
unfortunately it's not clear *which* package includes these particular
files.  Maybe freifunk-common?

On Wed, Apr 24, 2013 at 2:28 PM, Will Hawkins <
hawkinsw at opentechinstitute.org> wrote:

> Thanks for your response, Ben. We just recompiled an image w/o most of
> the ff software. We are now testing that image to see if things are any
> better. We will definitely note how ff-watchdog may be useful and how
> ff-gw-check is the likely culprit ;-)
>
> Will
>
> On 04/24/2013 02:17 PM, Ben West wrote:
> > The Freifunk watchdog package is actually a rather handy package, since
> > it will monitor any process you want (via periodic cronjob) and restart
> > that service if the active process disappears (aka crashes).  To my
> > knowledge, it doesn't directly start/stop any network interfaces.  But,
> > ff-watchdog does need to be configured to monitor the processes you care
> > about, and to not conflict with any other watchdog-style task.  That
> > conflict may be indirectly causing interfaces to go down or even olsrd
> > to stop in absence of a needed interface.
> >
> > Its config file is /etc/config/freifunk-watchfog, and here is an example
> > config I've used (for node using coovachilli):
> >
> > config process
> >     option process 'dropbear'
> >     option initscript '/etc/init.d/dropbear'
> >
> > config process
> >     option process 'crond'
> >     option initscript '/etc/init.d/cron'
> >
> > config process
> >     option process 'olsrd'
> >     option initscript '/etc/init.d/olsrd'
> >
> > config process
> >     option process 'chilli'
> >     option initscript '/etc/init.d/coovachilli'
> >
> > Are you sure you weren't having problems with the ff-gw-check package
> > instead?  I.e. un-installed that package at the same time as
> > un-stinalling ff-watchdog?  I think the gw-check package /will muck/
> > with default routes and possibly also restart active network interfaces
> > if it can't get a successful ping to freifunk.net <http://freifunk.net>
> > or something.
> >
> > On Wed, Apr 24, 2013 at 8:07 AM, Dan Staples
> > <danstaples at opentechinstitute.org
> > <mailto:danstaples at opentechinstitute.org"
1287,Commotion-dev, Python-based testing framework across,"Wed, 24 Apr 2013 17:17:21 -0400",-0400,Hans of Guardian,"
Sorry to be late in weighing in this thread.  I'm on the train to DC and diving back into a Commotion state of mind.

I like having python test framework a lot, even if it doesn't run on all OpenWRT devices.  To cover OpenWRT, you could set up OpenWRT on any device that has a lot of disk space, then run all the python stuff there.  That would then give you a place to run the full test suite on OpenWRT.  Then on the Ubuquiti hardware could be handled via some of the other ideas here, like shell scripts, or remote scraping via JSON, etc.

Using python is just so vastly more productive that this approach will definitely be less work even though there would have to be some special cases for certain OpenWRT devices

This reminds me, would this also then run in the VMs that you have been setting up?  I think having some random box somewhere running like 20 or more various VMs with olsrd on them could be very nice as an automated testbed.  This would not test the real world wireless conditions, but it would provide a way to run automated tests on olsrd meshes in a way that could be plugged into Jenkins builds.  This kind of testbed would have caught the commit that broke meshing on ARM and amd64 that showed up in the more aggressive optimization of Ubuntu/quantal's compiler.

.hc

On Apr 2, 2013, at 10:31 AM, Ben West wrote:

> Hi Seamus and Dan,
> 
> Replying about having Python on (and off) OpenWRT:
> 
> The cross-platform nature seems like it would be very helpful to maintain a single collection of tests vectors to apply as Commotion finds its way onto more platforms (Windows, OSX).  But, the obvious tradeoff here is the size of the Python interpreter.
> 
> Also, the test scripts that query a node's OLSR instance via jsoninfo could also run on the client, rather than directly on the node.  The node would just need to open up the jsoninfo port 9090 on its firewall behind the public AP interface (or have the client use its private AP).  I can tweak the Python scripts (tho very little needed) to accommodate this option.
> 
> Besides that, I think I may be able to tweak the Python Makefile provided with OpenWRT, so that the compiled package is much smaller than its current 1.5MByte footprint.  The Python v2.6 implementation bundled into Py4A (which runs all these tests fine) is only 150kB, by comparison.  Still, admitted that installing another language on what is already disk- and RAM-bound devices is less than ideal.
> 
> Finally, sorry for using the term 'bytecode.'  That's not really what we need; compiled Python bytecode is neither smaller than source nor stand-alone executable.  What I meant is maybe compile the Python testsuite into a single standalone executable using a tool like these:
> http://cx-freeze.sourceforge.net/
> http://www.pyinstaller.org/
> 
> On Tue, Apr 2, 2013 at 8:58 AM, seamus tuohy <s2e at opentechinstitute.org> wrote:
> Hey,
> 
> 
> On 04/02/2013 04:20 AM, Ben West wrote:
"
1288,Commotion-dev, Android stick-PCs as a potential,"Thu, 25 Apr 2013 06:58:11 +0930",+0930,Paul Gardner-Stephen,"Hi all,

Sorry if you have already thought about and discussed these devices, but
they strike me as potentially very interesting for both communities, in
addition to our own interest in them for the Serval Project.

We have been looking at some of the cheap Android-based stick PCs as a
possible platform for Serval Mesh Extenders, such as the MK802ii and more
recent MK808B.  For more about the Mesh Extenders and their long-range UHF
packet radios, refer to:

http://developer.servalproject.org/dokuwiki/doku.php?id=content:meshhelper:main_page&#prototyping


or:

http://servalpaul.blogspot.com/2013/02/building-serval-mesh-helper-device.html

and subsequent posts to that blog.

The newer generations of the Android stick-PCs have dual-core 1.5GHz ARM
processors, 1GB of RAM and 16GB of flash, dual-antenna 802.11n Wi-Fi
(although the firmware is not ideal, more on that later), USB host port,
microSD slot, and HDMI out, all in a tiny thing about 80mm x 35mm x 15mm
depending on the particular variant you get.  You get all that for under
US$50, e.g., from geekbuying.com.

These typically come with a root-enabled ROM, and are very easy to flash
with a complete new operating system.

Thus compared with many wireless routers they have much greater CPU and
memory resources, and similar or lower cost.

What I wanted to discover what their power consumption was, because I want
to run them off battery for really resilient deployments.

While I was initially concerned about the power consumption, I discovered
that the later generation models can perform useful services, including
running Wi-Fi for about 1W:

http://servalpaul.blogspot.com/2013/04/comparing-energy-consumption-of.html

The main issues that I have identified are likely to be:

1. The Wi-Fi antenna are little patch antenna, which probably don't have
that great performance.  They could be replaced fairly easily though, I
suspect.  On the up-side, they do have two antenna for doing clever 802.11n
things.

2. The Wi-Fi firmware that comes with the ROMs I have found don't include
simultaneous AP and ad-hoc capability, at least as far as I can tell.  This
would need investigation.  They apparently use a Broadcom 8330 based Wi-Fi
chipset in at least some variants, which leads to my next point.

3. The Wi-Fi chipset and design quality varies between suppliers of these,
as it appears that they are all using a reference design of the RK3066
chipset, to which they add Wi-Fi.  Some use realtek or mediatek chipsets
instead of broadcom.  Some implementations are better than others, e.g.,
some sub-optimal implementations seem to have a common ground-plane between
the Wi-Fi and USB, which reduces the sensitivity of the Wi-Fi receiver. All
this is both a negative and positive. On the negative side, some variants
might be complete duds for our desired use-cases.  On the positive side, it
might be possible to encourage one of these manufacturers to make one with,
for example, an Atheros Wi-Fi chipset that is well supported by Linux,
OpenWRT and Debian.  Related, I have yet to survey the complete OS image to
see if there are any other closed binary blobs hiding around the place.

4. There is no on-board ethernet port on the cheaper models.  This could be
solved with a USB ethernet adapter, or again, encouraging one of the
manufacturers to make a variant that is better optimised for our
communities needs.

If anyone in the community is interested in working on porting OpenWRT
and/or enabling simultaneous AP+ad-hoc Wi-Fi on these, we can probably
arrange to provide a couple of MK808Bs to facilitate this.

Paul.
"
1289,Commotion-dev, RPi & Commotion,"Wed, 24 Apr 2013 17:36:53 -0400",-0400,Hans of Guardian,"
On Apr 23, 2013, at 10:02 AM, Dan Staples wrote:

> 
> On 04/22/2013 02:05 PM, The Doctor wrote:
"
1290,Commotion-dev, Python-based testing framework across,"Wed, 24 Apr 2013 17:48:19 -0400",-0400,Dan Staples,"What about porting some of this to Lua, since OpenWRT nodes already have
that interpreter? Would a lot be lost in the translation?

Also, we can look at the tests run at the latest BattleMesh last week. I
believe Seamus knows the repo where those are...I can't find them at the
moment.

On 04/24/2013 05:17 PM, Hans of Guardian wrote:
>
> Sorry to be late in weighing in this thread.  I'm on the train to DC
> and diving back into a Commotion state of mind.
>
> I like having python test framework a lot, even if it doesn't run on
> all OpenWRT devices.  To cover OpenWRT, you could set up OpenWRT on
> any device that has a lot of disk space, then run all the python stuff
> there.  That would then give you a place to run the full test suite on
> OpenWRT.  Then on the Ubuquiti hardware could be handled via some of
> the other ideas here, like shell scripts, or remote scraping via JSON,
> etc.
>
> Using python is just so vastly more productive that this approach will
> definitely be less work even though there would have to be some
> special cases for certain OpenWRT devices
>
> This reminds me, would this also then run in the VMs that you have
> been setting up?  I think having some random box somewhere running
> like 20 or more various VMs with olsrd on them could be very nice as
> an automated testbed.  This would not test the real world wireless
> conditions, but it would provide a way to run automated tests on olsrd
> meshes in a way that could be plugged into Jenkins builds.  This kind
> of testbed would have caught the commit that broke meshing on ARM and
> amd64 that showed up in the more aggressive optimization of
> Ubuntu/quantal's compiler.
>
> .hc
>
> On Apr 2, 2013, at 10:31 AM, Ben West wrote:
>
"
1291,Commotion-dev, Python-based testing framework across,"Wed, 24 Apr 2013 17:58:08 -0400",-0400,Hans of Guardian,"
Part of what makes python so productive is the vast amount of libraries available.  If you can find Lua libs for everything, then that would be a starting place.  From my personal perspective, I've never done any Lua, so I'd be unlikely to contribute much to Lua-based frameworks.

.hc

On Apr 24, 2013, at 5:48 PM, Dan Staples wrote:

> What about porting some of this to Lua, since OpenWRT nodes already have that interpreter? Would a lot be lost in the translation?
> 
> Also, we can look at the tests run at the latest BattleMesh last week. I believe Seamus knows the repo where those are...I can't find them at the moment.
> 
> On 04/24/2013 05:17 PM, Hans of Guardian wrote:
"
1292,Commotion-dev, Android stick-PCs as a potential,"Wed, 24 Apr 2013 18:07:42 -0400",-0400,Dan Staples,"The Android sticks certainly do make a tempting platform for some
experimentation. I wonder, however, how they compare in
capability-versus-price with the Raspberry Pi. An RPi by itself costs
US$35, and has ethernet, 2 usb, 512MB RAM, 700 MHz single core
processor, and draws b/w 500-1000 mA @ 5 V (= 2.5-5 W if my physics
degree serves me well ;) ). Attach to that a dual-antenna Atheros-based
USB wifi adapter (e.g.
http://www.tp-link.com/en/products/details/?model=TL-WN822N), which can
potentially do multiple virtual interfaces, one in ad-hoc and the other
in AP mode, and you got yourself a pretty capable gadget.

And at a recent conference, I powered some wifi-enabled, meshing RPis
with simple battery packs. I've even powered them from 2 D cells with a
proper voltage converter, which could potentially power a device for
more than a day.

Just another idea to throw into the mix...  I think experimenting with
the android sticks is a great idea.

cheers,
Dan


On 04/24/2013 05:28 PM, Paul Gardner-Stephen wrote:
> Hi all,
>
> Sorry if you have already thought about and discussed these devices,
> but they strike me as potentially very interesting for both
> communities, in addition to our own interest in them for the Serval
> Project.
>
> We have been looking at some of the cheap Android-based stick PCs as a
> possible platform for Serval Mesh Extenders, such as the MK802ii and
> more recent MK808B.  For more about the Mesh Extenders and their
> long-range UHF packet radios, refer to:
>
> http://developer.servalproject.org/dokuwiki/doku.php?id=content:meshhelper:main_page&#prototyping 
>
> or:
>
> http://servalpaul.blogspot.com/2013/02/building-serval-mesh-helper-device.html
>
> and subsequent posts to that blog.
>
> The newer generations of the Android stick-PCs have dual-core 1.5GHz
> ARM processors, 1GB of RAM and 16GB of flash, dual-antenna 802.11n
> Wi-Fi (although the firmware is not ideal, more on that later), USB
> host port, microSD slot, and HDMI out, all in a tiny thing about 80mm
> x 35mm x 15mm depending on the particular variant you get.  You get
> all that for under US$50, e.g., from geekbuying.com
> <http://geekbuying.com>.
>
> These typically come with a root-enabled ROM, and are very easy to
> flash with a complete new operating system.
>
> Thus compared with many wireless routers they have much greater CPU
> and memory resources, and similar or lower cost.
>
> What I wanted to discover what their power consumption was, because I
> want to run them off battery for really resilient deployments.  
>
> While I was initially concerned about the power consumption, I
> discovered that the later generation models can perform useful
> services, including running Wi-Fi for about 1W:
>
> http://servalpaul.blogspot.com/2013/04/comparing-energy-consumption-of.html
>
> The main issues that I have identified are likely to be:
>
> 1. The Wi-Fi antenna are little patch antenna, which probably don't
> have that great performance.  They could be replaced fairly easily
> though, I suspect.  On the up-side, they do have two antenna for doing
> clever 802.11n things.
>
> 2. The Wi-Fi firmware that comes with the ROMs I have found don't
> include simultaneous AP and ad-hoc capability, at least as far as I
> can tell.  This would need investigation.  They apparently use a
> Broadcom 8330 based Wi-Fi chipset in at least some variants, which
> leads to my next point.
>
> 3. The Wi-Fi chipset and design quality varies between suppliers of
> these, as it appears that they are all using a reference design of the
> RK3066 chipset, to which they add Wi-Fi.  Some use realtek or mediatek
> chipsets instead of broadcom.  Some implementations are better than
> others, e.g., some sub-optimal implementations seem to have a common
> ground-plane between the Wi-Fi and USB, which reduces the sensitivity
> of the Wi-Fi receiver. All this is both a negative and positive. On
> the negative side, some variants might be complete duds for our
> desired use-cases.  On the positive side, it might be possible to
> encourage one of these manufacturers to make one with, for example, an
> Atheros Wi-Fi chipset that is well supported by Linux, OpenWRT and
> Debian.  Related, I have yet to survey the complete OS image to see if
> there are any other closed binary blobs hiding around the place.
>
> 4. There is no on-board ethernet port on the cheaper models.  This
> could be solved with a USB ethernet adapter, or again, encouraging one
> of the manufacturers to make a variant that is better optimised for
> our communities needs.
>
> If anyone in the community is interested in working on porting OpenWRT
> and/or enabling simultaneous AP+ad-hoc Wi-Fi on these, we can probably
> arrange to provide a couple of MK808Bs to facilitate this.
>
> Paul.
>
>
> _______________________________________________
> Commotion-dev mailing list
> Commotion-dev at lists.chambana.net
> https://lists.chambana.net/mailman/listinfo/commotion-dev

-- 
Dan Staples

Open Technology Institute
https://commotionwireless.net

"
1293,Commotion-dev, Android stick-PCs as a potential,"Wed, 24 Apr 2013 18:05:00 -0400",-0400,Hans of Guardian,"
I just got a UG802 device along these lines, I'm going to try it out in DC tomorrow perhaps.  There are a whole bunch of these coming out, they all seem to be based on the Rockchip RK3066, so it seems like a good platform to target.  They can sometimes be bought in bulk for as cheap as US$20 per unit, which is also very nice.

Could you get adhoc mode working on it?  If so, it would make a very nice burner mesh server.  Just install Lil' Debi and Commotion MeshTether from the Play store, and its a server that can be stashed anywhere there is power and wifi/mesh.

.hc

On Apr 24, 2013, at 5:28 PM, Paul Gardner-Stephen wrote:

> Hi all,
> 
> Sorry if you have already thought about and discussed these devices, but they strike me as potentially very interesting for both communities, in addition to our own interest in them for the Serval Project.
> 
> We have been looking at some of the cheap Android-based stick PCs as a possible platform for Serval Mesh Extenders, such as the MK802ii and more recent MK808B.  For more about the Mesh Extenders and their long-range UHF packet radios, refer to:
> 
> http://developer.servalproject.org/dokuwiki/doku.php?id=content:meshhelper:main_page&#prototyping 
> 
> or:
> 
> http://servalpaul.blogspot.com/2013/02/building-serval-mesh-helper-device.html
> 
> and subsequent posts to that blog.
> 
> The newer generations of the Android stick-PCs have dual-core 1.5GHz ARM processors, 1GB of RAM and 16GB of flash, dual-antenna 802.11n Wi-Fi (although the firmware is not ideal, more on that later), USB host port, microSD slot, and HDMI out, all in a tiny thing about 80mm x 35mm x 15mm depending on the particular variant you get.  You get all that for under US$50, e.g., from geekbuying.com.
> 
> These typically come with a root-enabled ROM, and are very easy to flash with a complete new operating system.
> 
> Thus compared with many wireless routers they have much greater CPU and memory resources, and similar or lower cost.
> 
> What I wanted to discover what their power consumption was, because I want to run them off battery for really resilient deployments.  
> 
> While I was initially concerned about the power consumption, I discovered that the later generation models can perform useful services, including running Wi-Fi for about 1W:
> 
> http://servalpaul.blogspot.com/2013/04/comparing-energy-consumption-of.html
> 
> The main issues that I have identified are likely to be:
> 
> 1. The Wi-Fi antenna are little patch antenna, which probably don't have that great performance.  They could be replaced fairly easily though, I suspect.  On the up-side, they do have two antenna for doing clever 802.11n things.
> 
> 2. The Wi-Fi firmware that comes with the ROMs I have found don't include simultaneous AP and ad-hoc capability, at least as far as I can tell.  This would need investigation.  They apparently use a Broadcom 8330 based Wi-Fi chipset in at least some variants, which leads to my next point.
> 
> 3. The Wi-Fi chipset and design quality varies between suppliers of these, as it appears that they are all using a reference design of the RK3066 chipset, to which they add Wi-Fi.  Some use realtek or mediatek chipsets instead of broadcom.  Some implementations are better than others, e.g., some sub-optimal implementations seem to have a common ground-plane between the Wi-Fi and USB, which reduces the sensitivity of the Wi-Fi receiver. All this is both a negative and positive. On the negative side, some variants might be complete duds for our desired use-cases.  On the positive side, it might be possible to encourage one of these manufacturers to make one with, for example, an Atheros Wi-Fi chipset that is well supported by Linux, OpenWRT and Debian.  Related, I have yet to survey the complete OS image to see if there are any other closed binary blobs hiding around the place.
> 
> 4. There is no on-board ethernet port on the cheaper models.  This could be solved with a USB ethernet adapter, or again, encouraging one of the manufacturers to make a variant that is better optimised for our communities needs.
> 
> If anyone in the community is interested in working on porting OpenWRT and/or enabling simultaneous AP+ad-hoc Wi-Fi on these, we can probably arrange to provide a couple of MK808Bs to facilitate this.
> 
> Paul.
> _______________________________________________
> Commotion-dev mailing list
> Commotion-dev at lists.chambana.net
> https://lists.chambana.net/mailman/listinfo/commotion-dev

"
1294,Commotion-dev, RPi & Commotion,"Wed, 24 Apr 2013 18:13:04 -0400",-0400,Dan Staples,"We definitely plan on packaging for Debian :)  Thanks for offering your 
support! We will likely do it in the upcoming couple months, or it may 
be part of an intern project of packaging the desktop Commotion 
components: https://commotionwireless.net/jobs/opw-projects. I'm sure 
we'll have a more concrete plan after our discussions in the DC office 
over the next couple days. See you tomorrow!

On Wed 24 Apr 2013 05:36:53 PM EDT, Hans of Guardian wrote:
>
> On Apr 23, 2013, at 10:02 AM, Dan Staples wrote:
>
"
1295,Commotion-dev, Android stick-PCs as a potential,"Wed, 24 Apr 2013 18:15:30 -0400",-0400,Hans of Guardian,"
They're available for about US$40-70 on amazon:
http://www.amazon.com/MK808-Android-Rockchip-RK3066-Cortex-A9/dp/B009OX22B4
http://www.amazon.com/Android-Smart-internet-adaptor-dongle/dp/B009F8HS4E/ref=sr_1_4?s=electronics&ie=UTF8&qid=1366841516&sr=1-4&keywords=ug802

The have much faster CPUs that are also dual core.  They include 4GB storage and have a micro-sd slot and USB.  They are also ready to go with Android and the Play Store installed.  I think they are probably a better deal than the RPi for working with wifi.  Attach an external USB wifi, and you have a two radio device.

But this is all contingent on having decent adhoc support in the radio, of course.

.hc

On Apr 24, 2013, at 6:07 PM, Dan Staples wrote:

> The Android sticks certainly do make a tempting platform for some experimentation. I wonder, however, how they compare in capability-versus-price with the Raspberry Pi. An RPi by itself costs US$35, and has ethernet, 2 usb, 512MB RAM, 700 MHz single core processor, and draws b/w 500-1000 mA @ 5 V (= 2.5-5 W if my physics degree serves me well ;) ). Attach to that a dual-antenna Atheros-based USB wifi adapter (e.g. http://www.tp-link.com/en/products/details/?model=TL-WN822N), which can potentially do multiple virtual interfaces, one in ad-hoc and the other in AP mode, and you got yourself a pretty capable gadget.
> 
> And at a recent conference, I powered some wifi-enabled, meshing RPis with simple battery packs. I've even powered them from 2 D cells with a proper voltage converter, which could potentially power a device for more than a day.
> 
> Just another idea to throw into the mix...  I think experimenting with the android sticks is a great idea.
> 
> cheers,
> Dan
> 
> 
> On 04/24/2013 05:28 PM, Paul Gardner-Stephen wrote:
"
1296,Commotion-dev, [OTI-Tech] LTS Testing Update,"Wed, 24 Apr 2013 18:49:54 -0400",-0400,Will Hawkins,"A few notes to consider after some testing today with LTS and at the office:

- Collectd ""stalled"" one of the nodes at LTS (where collectd is still
enabled)

- Stations seem to lose their mind w.r.t IBSS RSN and authorization. I'm
watching debugging output from wpa_supplicant on one of the nodes in the
office to see if I can determine the problem. Of course, it's working
great now :-)

- luci_splash got itself into a nice ""wedge"" on one of the LTS nodes. I
am going to do my best to get it unstuck. If we continue to see the
problem, we'll have to take a hard look at pushing the splash rewrite to
a higher priority.

Will

On 04/24/2013 04:26 PM, Ben West wrote:
> Hi Will,
> 
> I just checked config on a node again (running Attitude Adjustment circa
> r35xxx), and I found these lines in /etc/crontabs/root which had been
> commented out:
> 
> #* * * * *      /usr/sbin/ff_olsr_test_gw.sh
> #*/5 * * * *    /usr/sbin/ff_olsr_watchdog
> 
> So, be on the lookout for ff packages that deploy these scripts,
> although unfortunately it's not clear /which/ package includes these
> particular files.  Maybe freifunk-common?
> 
> On Wed, Apr 24, 2013 at 2:28 PM, Will Hawkins
> <hawkinsw at opentechinstitute.org <mailto:hawkinsw at opentechinstitute.org"
1297,Commotion-dev, [OTI-Tech] LTS Testing Update,"Wed, 24 Apr 2013 18:53:14 -0400",-0400,Will Hawkins,"Sorry to respond to myself, but ...

- ""spurious"" dhcp client requests are not so spurious. The udhcpc client
arguments are not as intuitive as ""this programmer"" would like them to
be. I.e., it appears that I misread. The options that we give udhcpc on
start up mean that it will fork to the background when it obtains a
lease and continue to periodically refresh that lease. Mystery solved.

Will

On 04/24/2013 06:49 PM, Will Hawkins wrote:
> A few notes to consider after some testing today with LTS and at the office:
> 
> - Collectd ""stalled"" one of the nodes at LTS (where collectd is still
> enabled)
> 
> - Stations seem to lose their mind w.r.t IBSS RSN and authorization. I'm
> watching debugging output from wpa_supplicant on one of the nodes in the
> office to see if I can determine the problem. Of course, it's working
> great now :-)
> 
> - luci_splash got itself into a nice ""wedge"" on one of the LTS nodes. I
> am going to do my best to get it unstuck. If we continue to see the
> problem, we'll have to take a hard look at pushing the splash rewrite to
> a higher priority.
> 
> Will
> 
> On 04/24/2013 04:26 PM, Ben West wrote:
"
1298,Commotion-dev, Python-based testing framework across,"Wed, 24 Apr 2013 16:02:04 -0700",-0700,Josh Steiner,"I'll also chime in late  (just landed in dc).  My plan so far is to develop
the Windows client in python sharing as much code as possible with the
linux client.   I'll also throw my backing behind python testing as I'll be
doing a certain amount of that as I work on the client, trying to be as TDD
as possible.

I also have no real kua knowhow other than haing read over some tutorials.

Josh
On Apr 24, 2013 5:58 PM, ""Hans of Guardian"" <hans at guardianproject.info>
wrote:

>
> Part of what makes python so productive is the vast amount of libraries
> available.  If you can find Lua libs for everything, then that would be a
> starting place.  From my personal perspective, I've never done any Lua, so
> I'd be unlikely to contribute much to Lua-based frameworks.
>
> .hc
>
> On Apr 24, 2013, at 5:48 PM, Dan Staples wrote:
>
>  What about porting some of this to Lua, since OpenWRT nodes already have
> that interpreter? Would a lot be lost in the translation?
>
> Also, we can look at the tests run at the latest BattleMesh last week. I
> believe Seamus knows the repo where those are...I can't find them at the
> moment.
>
> On 04/24/2013 05:17 PM, Hans of Guardian wrote:
>
>
>  Sorry to be late in weighing in this thread.  I'm on the train to DC and
> diving back into a Commotion state of mind.
>
>  I like having python test framework a lot, even if it doesn't run on all
> OpenWRT devices.  To cover OpenWRT, you could set up OpenWRT on any device
> that has a lot of disk space, then run all the python stuff there.  That
> would then give you a place to run the full test suite on OpenWRT.  Then on
> the Ubuquiti hardware could be handled via some of the other ideas here,
> like shell scripts, or remote scraping via JSON, etc.
>
>  Using python is just so vastly more productive that this approach will
> definitely be less work even though there would have to be some special
> cases for certain OpenWRT devices
>
>  This reminds me, would this also then run in the VMs that you have been
> setting up?  I think having some random box somewhere running like 20 or
> more various VMs with olsrd on them could be very nice as an automated
> testbed.  This would not test the real world wireless conditions, but it
> would provide a way to run automated tests on olsrd meshes in a way that
> could be plugged into Jenkins builds.  This kind of testbed would have
> caught the commit that broke meshing on ARM and amd64 that showed up in the
> more aggressive optimization of Ubuntu/quantal's compiler.
>
>  .hc
>
>  On Apr 2, 2013, at 10:31 AM, Ben West wrote:
>
>  Hi Seamus and Dan,
>
>  Replying about having Python on (and off) OpenWRT:
>
> The cross-platform nature seems like it would be very helpful to maintain
> a single collection of tests vectors to apply as Commotion finds its way
> onto more platforms (Windows, OSX).  But, the obvious tradeoff here is the
> size of the Python interpreter.
>
>  Also, the test scripts that query a node's OLSR instance via jsoninfo
> could also run *on the client*, rather than directly on the node.  The
> node would just need to open up the jsoninfo port 9090 on its firewall
> behind the public AP interface (or have the client use its private AP).  I
> can tweak the Python scripts (tho very little needed) to accommodate this
> option.
>
>  Besides that, I think I may be able to tweak the Python Makefile
> provided with OpenWRT, so that the compiled package is much smaller than
> its current 1.5MByte footprint.  The Python v2.6 implementation bundled
> into Py4A (which runs all these tests fine) is *only 150kB*, by
> comparison.  Still, admitted that installing another language on what is
> already disk- and RAM-bound devices is less than ideal.
>
>  Finally, sorry for using the term 'bytecode.'  That's not really what we
> need; compiled Python bytecode is neither smaller than source nor
> stand-alone executable.  What I meant is maybe compile the Python testsuite
> into a single standalone executable using a tool like these:
> http://cx-freeze.sourceforge.net/
> http://www.pyinstaller.org/
>
> On Tue, Apr 2, 2013 at 8:58 AM, seamus tuohy <s2e at opentechinstitute.org>wrote:
>
"
1299,Commotion-dev, [OTI-Tech] LTS Testing Update,"Wed, 24 Apr 2013 18:43:55 -0500",-0500,Ben West,"Hi Will,

Glad that an apparent bug with dhcp was caught.

Please see my response about IBSS-RSN issues below in green.

On Wed, Apr 24, 2013 at 5:49 PM, Will Hawkins <
hawkinsw at opentechinstitute.org> wrote:

> A few notes to consider after some testing today with LTS and at the
> office:
>
> - Collectd ""stalled"" one of the nodes at LTS (where collectd is still
> enabled)
>
> - Stations seem to lose their mind w.r.t IBSS RSN and authorization. I'm
> watching debugging output from wpa_supplicant on one of the nodes in the
> office to see if I can determine the problem. Of course, it's working
> great now :-)
>
>
I've observed a definite issue with nodes not reliably 'authorizing'
themselves when joining an IBSS-RSN adhoc network, at least since r33202 or
so.  No idea on a cause, besides IBSS-RSN simply being buggy.

Besides doing something crude like putting 'sleep 30 ; wifi restart' in the
file /etc/rc.local, I have also written a slightly less crude hotplug.d
script that attempts to restart the wifi interface, if the node finds
itself 'authorized' but not 'authenticated' on the adhoc network.  I've
attached that script to this email, and you can save it on a node as *
/etc/hotplug.d/firewall/20_mesh_auth_check*.

Please note this is not a 100% effective solution, as the problem is not
just with a newly powered on node not consistently authorizing itself, but *
also* with some of the existing nodes in the adhoc network not consistently
authorizing the new node on their end too.  That is, I've seen instances
where node A lists node B as both 'authenticated' and 'authorized', but
where node B lists node A as 'authenticated' and *not* 'authorized.'  Oy.

So, when a new node joins an RSN-encrypted adhoc network, it looks like the
following steps must happen to ensure all nodes are authorized:

A. Newly powered-up node inspects output of 'iw wlan0 station dump' looking
for entries where a remote node is 'authenticated' but *not* 'authorized,'
and if so, restart the wifi and retry test.  Ideally, the node would repeat
this process X times until giving up.  The script I'm attaching tries to do
this, albeit without the option to give up after X times.

B. All existing nodes periodically via cronjob check their own local output
of 'iw wlan0 station dump', looking for new entries where a new remote node
is 'authenticated' but *not* 'authorized,'  If such an entry is found,
restart the *local* node's wifi and retry test.

Having both of these steps occur simultaneously on all nodes clearly could
lead to lots of ugly race conditions, so it's not ideal.  Likewise, its
even less ideal for a particular node with active clients to restart its
wifi just because a new node powered on, but didn't get successfully
authorized.  Maybe an alternate way to achieve step B is just to have the
newly powered-up node repeatedly restart its wifi *until* it can
successfully ping all other nodes that appear on the adhoc network, tho
would be tedious and make startup very slow.

- luci_splash got itself into a nice ""wedge"" on one of the LTS nodes. I
> am going to do my best to get it unstuck. If we continue to see the
> problem, we'll have to take a hard look at pushing the splash rewrite to
> a higher priority.
>
> Will
>
> On 04/24/2013 04:26 PM, Ben West wrote:
> > Hi Will,
> >
> > I just checked config on a node again (running Attitude Adjustment circa
> > r35xxx), and I found these lines in /etc/crontabs/root which had been
> > commented out:
> >
> > #* * * * *      /usr/sbin/ff_olsr_test_gw.sh
> > #*/5 * * * *    /usr/sbin/ff_olsr_watchdog
> >
> > So, be on the lookout for ff packages that deploy these scripts,
> > although unfortunately it's not clear /which/ package includes these
> > particular files.  Maybe freifunk-common?
> >
> > On Wed, Apr 24, 2013 at 2:28 PM, Will Hawkins
> > <hawkinsw at opentechinstitute.org <mailto:hawkinsw at opentechinstitute.org"
1300,Commotion-dev, Android stick-PCs as a potential,"Thu, 25 Apr 2013 09:18:06 +0930",+0930,Paul Gardner-Stephen,"Hello,

The question of ad-hoc mode remains unanswered on the MK808B that we have
here.
As mentioned, it should be possible with some work, due to the use of a
broadcom 4330 chipset.
It is a public holiday here, so I can't try getting ad-hoc on it right now.

However, as I mentioned, I think a good longer-term strategy would be to
work with one of the suppliers to make one using an atheros wi-fi chipset,
so that we have the same happy goodness as on many of the OpenWRT devices
-- but at the attractive price-point of these stick PCs.

Also, getting power consumption down to ~1W makes a big difference for
rechargeable/solar deployments, which I think will be important for both
Commotion and Serval.

Paul.


On Thu, Apr 25, 2013 at 7:45 AM, Hans of Guardian <hans at guardianproject.info
> wrote:

>
> They're available for about US$40-70 on amazon:
> http://www.amazon.com/MK808-Android-Rockchip-RK3066-Cortex-A9/dp/B009OX22B4
>
> http://www.amazon.com/Android-Smart-internet-adaptor-dongle/dp/B009F8HS4E/ref=sr_1_4?s=electronics&ie=UTF8&qid=1366841516&sr=1-4&keywords=ug802
>
> The have much faster CPUs that are also dual core.  They include 4GB
> storage and have a micro-sd slot and USB.  They are also ready to go with
> Android and the Play Store installed.  I think they are probably a better
> deal than the RPi for working with wifi.  Attach an external USB wifi, and
> you have a two radio device.
>
> But this is all contingent on having decent adhoc support in the radio, of
> course.
>
> .hc
>
> On Apr 24, 2013, at 6:07 PM, Dan Staples wrote:
>
>  The Android sticks certainly do make a tempting platform for some
> experimentation. I wonder, however, how they compare in
> capability-versus-price with the Raspberry Pi. An RPi by itself costs
> US$35, and has ethernet, 2 usb, 512MB RAM, 700 MHz single core processor,
> and draws b/w 500-1000 mA @ 5 V (= 2.5-5 W if my physics degree serves me
> well ;) ). Attach to that a dual-antenna Atheros-based USB wifi adapter
> (e.g. http://www.tp-link.com/en/products/details/?model=TL-WN822N), which
> can potentially do multiple virtual interfaces, one in ad-hoc and the other
> in AP mode, and you got yourself a pretty capable gadget.
>
> And at a recent conference, I powered some wifi-enabled, meshing RPis with
> simple battery packs. I've even powered them from 2 D cells with a proper
> voltage converter, which could potentially power a device for more than a
> day.
>
> Just another idea to throw into the mix...  I think experimenting with the
> android sticks is a great idea.
>
> cheers,
> Dan
>
>
> On 04/24/2013 05:28 PM, Paul Gardner-Stephen wrote:
>
> Hi all,
>
>  Sorry if you have already thought about and discussed these devices, but
> they strike me as potentially very interesting for both communities, in
> addition to our own interest in them for the Serval Project.
>
>  We have been looking at some of the cheap Android-based stick PCs as a
> possible platform for Serval Mesh Extenders, such as the MK802ii and more
> recent MK808B.  For more about the Mesh Extenders and their long-range UHF
> packet radios, refer to:
>
>
> http://developer.servalproject.org/dokuwiki/doku.php?id=content:meshhelper:main_page&#prototyping
>
>
>  or:
>
>
> http://servalpaul.blogspot.com/2013/02/building-serval-mesh-helper-device.html
>
>  and subsequent posts to that blog.
>
>  The newer generations of the Android stick-PCs have dual-core 1.5GHz ARM
> processors, 1GB of RAM and 16GB of flash, dual-antenna 802.11n Wi-Fi
> (although the firmware is not ideal, more on that later), USB host port,
> microSD slot, and HDMI out, all in a tiny thing about 80mm x 35mm x 15mm
> depending on the particular variant you get.  You get all that for under
> US$50, e.g., from geekbuying.com.
>
>  These typically come with a root-enabled ROM, and are very easy to flash
> with a complete new operating system.
>
>  Thus compared with many wireless routers they have much greater CPU and
> memory resources, and similar or lower cost.
>
>  What I wanted to discover what their power consumption was, because I
> want to run them off battery for really resilient deployments.
>
>  While I was initially concerned about the power consumption, I
> discovered that the later generation models can perform useful services,
> including running Wi-Fi for about 1W:
>
>
> http://servalpaul.blogspot.com/2013/04/comparing-energy-consumption-of.html
>
>  The main issues that I have identified are likely to be:
>
>  1. The Wi-Fi antenna are little patch antenna, which probably don't have
> that great performance.  They could be replaced fairly easily though, I
> suspect.  On the up-side, they do have two antenna for doing clever 802.11n
> things.
>
>  2. The Wi-Fi firmware that comes with the ROMs I have found don't
> include simultaneous AP and ad-hoc capability, at least as far as I can
> tell.  This would need investigation.  They apparently use a Broadcom 8330
> based Wi-Fi chipset in at least some variants, which leads to my next point.
>
>  3. The Wi-Fi chipset and design quality varies between suppliers of
> these, as it appears that they are all using a reference design of the
> RK3066 chipset, to which they add Wi-Fi.  Some use realtek or mediatek
> chipsets instead of broadcom.  Some implementations are better than others,
> e.g., some sub-optimal implementations seem to have a common ground-plane
> between the Wi-Fi and USB, which reduces the sensitivity of the Wi-Fi
> receiver. All this is both a negative and positive. On the negative side,
> some variants might be complete duds for our desired use-cases.  On the
> positive side, it might be possible to encourage one of these manufacturers
> to make one with, for example, an Atheros Wi-Fi chipset that is well
> supported by Linux, OpenWRT and Debian.  Related, I have yet to survey the
> complete OS image to see if there are any other closed binary blobs hiding
> around the place.
>
>  4. There is no on-board ethernet port on the cheaper models.  This could
> be solved with a USB ethernet adapter, or again, encouraging one of the
> manufacturers to make a variant that is better optimised for our
> communities needs.
>
>  If anyone in the community is interested in working on porting OpenWRT
> and/or enabling simultaneous AP+ad-hoc Wi-Fi on these, we can probably
> arrange to provide a couple of MK808Bs to facilitate this.
>
>  Paul.
>
>
> _______________________________________________
> Commotion-dev mailing listCommotion-dev at lists.chambana.nethttps://lists.chambana.net/mailman/listinfo/commotion-dev
>
>
> --
> Dan Staples
>
> Open Technology Institutehttps://commotionwireless.net
>
>  _______________________________________________
> Commotion-dev mailing list
> Commotion-dev at lists.chambana.net
> https://lists.chambana.net/mailman/listinfo/commotion-dev
>
>
>
> _______________________________________________
> Commotion-dev mailing list
> Commotion-dev at lists.chambana.net
> https://lists.chambana.net/mailman/listinfo/commotion-dev
>
>
"
1301,Commotion-dev, [OTI-Tech] LTS Testing Update,"Wed, 24 Apr 2013 22:09:37 -0400",-0400,Will Hawkins,"Ben,

Thanks so much for your thoughtful reply re: IBSS-RSN. It looks like we are seeing the same behavior. When I am back at my primary workspace tomorrow I am going to go through the script that you sent. I've left a test running overnight with debugging enabled to see if I can get some ""bad output"" from wpa_supplicant. I will let you know what I find, if anything!

Thanks again!
Will
 
On Wednesday, April 24, 2013 19:43 EDT, Ben West <ben at gowasabi.net> wrote: 
 
> Hi Will,
> 
> Glad that an apparent bug with dhcp was caught.
> 
> Please see my response about IBSS-RSN issues below in green.
> 
> On Wed, Apr 24, 2013 at 5:49 PM, Will Hawkins <
> hawkinsw at opentechinstitute.org> wrote:
> 
> > A few notes to consider after some testing today with LTS and at the
> > office:
> >
> > - Collectd ""stalled"" one of the nodes at LTS (where collectd is still
> > enabled)
> >
> > - Stations seem to lose their mind w.r.t IBSS RSN and authorization. I'm
> > watching debugging output from wpa_supplicant on one of the nodes in the
> > office to see if I can determine the problem. Of course, it's working
> > great now :-)
> >
> >
> I've observed a definite issue with nodes not reliably 'authorizing'
> themselves when joining an IBSS-RSN adhoc network, at least since r33202 or
> so.  No idea on a cause, besides IBSS-RSN simply being buggy.
> 
> Besides doing something crude like putting 'sleep 30 ; wifi restart' in the
> file /etc/rc.local, I have also written a slightly less crude hotplug.d
> script that attempts to restart the wifi interface, if the node finds
> itself 'authorized' but not 'authenticated' on the adhoc network.  I've
> attached that script to this email, and you can save it on a node as *
> /etc/hotplug.d/firewall/20_mesh_auth_check*.
> 
> Please note this is not a 100% effective solution, as the problem is not
> just with a newly powered on node not consistently authorizing itself, but *
> also* with some of the existing nodes in the adhoc network not consistently
> authorizing the new node on their end too.  That is, I've seen instances
> where node A lists node B as both 'authenticated' and 'authorized', but
> where node B lists node A as 'authenticated' and *not* 'authorized.'  Oy.
> 
> So, when a new node joins an RSN-encrypted adhoc network, it looks like the
> following steps must happen to ensure all nodes are authorized:
> 
> A. Newly powered-up node inspects output of 'iw wlan0 station dump' looking
> for entries where a remote node is 'authenticated' but *not* 'authorized,'
> and if so, restart the wifi and retry test.  Ideally, the node would repeat
> this process X times until giving up.  The script I'm attaching tries to do
> this, albeit without the option to give up after X times.
> 
> B. All existing nodes periodically via cronjob check their own local output
> of 'iw wlan0 station dump', looking for new entries where a new remote node
> is 'authenticated' but *not* 'authorized,'  If such an entry is found,
> restart the *local* node's wifi and retry test.
> 
> Having both of these steps occur simultaneously on all nodes clearly could
> lead to lots of ugly race conditions, so it's not ideal.  Likewise, its
> even less ideal for a particular node with active clients to restart its
> wifi just because a new node powered on, but didn't get successfully
> authorized.  Maybe an alternate way to achieve step B is just to have the
> newly powered-up node repeatedly restart its wifi *until* it can
> successfully ping all other nodes that appear on the adhoc network, tho
> would be tedious and make startup very slow.
> 
> - luci_splash got itself into a nice ""wedge"" on one of the LTS nodes. I
> > am going to do my best to get it unstuck. If we continue to see the
> > problem, we'll have to take a hard look at pushing the splash rewrite to
> > a higher priority.
> >
> > Will
> >
> > On 04/24/2013 04:26 PM, Ben West wrote:
> > > Hi Will,
> > >
> > > I just checked config on a node again (running Attitude Adjustment circa
> > > r35xxx), and I found these lines in /etc/crontabs/root which had been
> > > commented out:
> > >
> > > #* * * * *      /usr/sbin/ff_olsr_test_gw.sh
> > > #*/5 * * * *    /usr/sbin/ff_olsr_watchdog
> > >
> > > So, be on the lookout for ff packages that deploy these scripts,
> > > although unfortunately it's not clear /which/ package includes these
> > > particular files.  Maybe freifunk-common?
> > >
> > > On Wed, Apr 24, 2013 at 2:28 PM, Will Hawkins
> > > <hawkinsw at opentechinstitute.org <mailto:hawkinsw at opentechinstitute.org"
1302,Commotion-dev, Fwd: [OpenWrt-Users] Attitude Adjustment 12.09,"Thu, 25 Apr 2013 08:21:48 -0400",-0400,Dan Staples,"FYI, AA's finally been tagged as final.


"
1303,Commotion-dev, Commotion and other mesh protocols,"Thu, 25 Apr 2013 21:39:56 -0400",-0400,Genevieve Bastien,"Hi All,

I've been playing around a little with the Commotion OpenWrt firmware.  
Thank you for the work.  I really like what you did with it, the 
automatic configuration makes it very easy to have something working and 
it's certainly a great step to make mesh networking accessible to the 
general public.

I was wondering how easy it would be to make Commotion support other 
mesh protocols.  Here in Montreal, Reseau Libre runs on babel.  We are 
slowly building our own firmware but using Commotion would jump us many 
steps ahead :D  Would it just be a matter of removing olsr and 
installing the babeld package instead or are the new packages you 
developed dependent on olsr?

Thanks,
Genevi?ve
"
1304,Commotion-dev, [Freedombox-discuss] Android stick-PCs as a,"Fri, 26 Apr 2013 00:30:28 -1000",-1000,chris hall,"Paul Gardner-Stephen <paul at servalproject.org> writes:

> (snip!)
> The newer generations of the Android stick-PCs have dual-core 1.5GHz ARM processors, 1GB of RAM and 16GB of
> flash, dual-antenna 802.11n Wi-Fi (although the firmware is not ideal, more on that later), USB host port,
> microSD slot, and HDMI out, all in a tiny thing about 80mm x 35mm x 15mm depending on the particular variant
> you get. ?You get all that for under US$50, e.g., from geekbuying.com.
"
1305,Commotion-dev, [Freedombox-discuss] Android stick-PCs as a,"Sun, 28 Apr 2013 07:36:33 +0930",+0930,Paul Gardner-Stephen,"Hello,

On Fri, Apr 26, 2013 at 8:00 PM, chris hall <bitmonki at gmail.com> wrote:

> Paul Gardner-Stephen <paul at servalproject.org> writes:
>
> > (snip!)
> > The newer generations of the Android stick-PCs have dual-core 1.5GHz ARM
> processors, 1GB of RAM and 16GB of
> > flash, dual-antenna 802.11n Wi-Fi (although the firmware is not ideal,
> more on that later), USB host port,
> > microSD slot, and HDMI out, all in a tiny thing about 80mm x 35mm x 15mm
> depending on the particular variant
> > you get.  You get all that for under US$50, e.g., from geekbuying.com.
> >
>
> I just ordered an MK808B, for reasons very similar to what you have
> stated.
>
> I am developing an Erlang variant of FreedomBox, and was doing a fairly
> exhaustive survey of the more recent 'system on a board' offerings in
> order to find an initial system for a baseline and development.
>
> I'm really intrigued by Olinuxino (operating temperatures 0-70C!) and
> Beaglebone Black (both are Free/open hardware), but the former is a
> little expensive, while the latter isn't likely to be shipping in
> quantity anytime soon - the shortest leadtime I saw on the larger
> suppliers was 7 weeks, the rest were at 17 weeks and up.
>
> Plus, neither one has a case, etc., and are really more targeted at the
> Maker community.
"
1306,Commotion-dev, Open Source RF Board Myriad-RF,"Mon, 29 Apr 2013 07:55:01 +0400",+0400,Alexander Chemeris,"Sorry for bringing up an old topic, I've just found it.

I've actually initiated LimeMicro open-source efforts while developing
our UmTRX and I gave them an idea of MyriadRF, so I decided to
comment:

 1. MyriadRF can't really be compared to HackRF, because MyriadRF is
basically a dev.board and needs a carrier board to communicate to a
computer. HackRF is a finished product which you just need to plug
into a PC.
 2. UmTRX and BladeRF are built using the same chip as MyriadRF.
 3. HackRF is half-duplex. MyriadRF, UmTRX and BladeRF are full-duplex.

There are other differences, but the ones above are most important to
understand.

On Sun, Mar 10, 2013 at 1:14 AM, Dan Staples
<danstaples at opentechinstitute.org> wrote:
> Very interesting. It's good to see more efforts for open source hardware SDR
> kits. I wonder how it will compare to Michael Ossmann's HackRF:
> http://ossmann.blogspot.com/2012/06/introducing-hackrf.html. Myriad-RF
> appears to support a smaller frequency range, but the price looks pretty
> good for something so versatile.
>
>
> On 03/09/2013 03:14 PM, Ben West wrote:
>
>
> Found this yesterday in the EE Times weekly headlines:
>
> RF board takes Arduino-like approach
>
> LONDON ? Lime Microsystems Ltd., a developer of configurable multi-band
> radio transceiver ICs, has launched an open-source RF hardware project that
> it says is intended to further innovation in wireless systems. The
> non-profit initiative has been launched under the name Myriad-RF with its
> own website and includes pre-made RF boards with editable design files that
> developers can freely download and use in their own designs.
>
> ...
>
> Right now Myriad-RF is effectively based around Lime's LMS6002D
> digital-to-RF transceiver. This chip, used in small cell basestations and
> suitable to support all cellular wireless standards, includes integrated
> ADCs DACs and low-noise amplifiers and covers the spectrum from 300-MHz to
> 3.8-GHz. Bushehri said Myriad-RF would be open to other suppliers of RF
> transceivers if they could meet the objectives of furthering
> software-defined radio and field-programmable RF (FPRF) over a similar
> frequency range.
>
> http://www.eetimes.com/design/microwave-rf-design/4408479/Lime-forms-open-source-soft-radio-initiative?cid=Newsletter+-+EETimes+Daily
> http://myriadrf.org/
>
> The $300 assembled board (not bad, considering the usual cost of PCB
> reference designs), along with the option to fab the board yourself using
> their KiCad files, looks pretty neat.  For talking to the outside (digital)
> world, the board looks to have an SPI and an 80pin header.
>
> Indeed, this looks like it isn't the only low-cost board targeted at
> software-defined radio, based on the LMS6002D.  The one below includes an
> FPGA and USB 3.0.
> http://www.kickstarter.com/projects/1085541682/bladerf-usb-30-software-defined-radio
>
>
> --
> Ben West
> http://gowasabi.net
> ben at gowasabi.net
> 314-246-9434
>
>
> _______________________________________________
> Commotion-dev mailing list
> Commotion-dev at lists.chambana.net
> https://lists.chambana.net/mailman/listinfo/commotion-dev
>
>
> --
> Dan Staples
>
> Open Technology Institute
> https://commotionwireless.net
>
>
> _______________________________________________
> Commotion-dev mailing list
> Commotion-dev at lists.chambana.net
> https://lists.chambana.net/mailman/listinfo/commotion-dev
"
1307,Commotion-dev, [Freedombox-discuss] Android stick-PCs as a,"Sun, 28 Apr 2013 08:55:46 +0100",+0100,Philip Hands,"Paul Gardner-Stephen <paul at servalproject.org> writes:

...
"
1308,Commotion-dev, [Freedombox-discuss] Android stick-PCs as a,"Sun, 28 Apr 2013 02:01:24 -0700",-0700,Tim Schmidt,"http://dx.com/p/hame-mpr-a1-wi-fi-802-11b-g-n-wireless-3g-router-w-1800mah-battery-charger-dongle-white-blue-176387

< $22, free shipping.

It's got ethernet, a USB host port, and this is where it gets
interesting - a built-in 1800mAh battery supposedly good for 4 hours
of run time.  More run time is likely as easy as swapping the battery
out for a larger model of the same voltage and chemistry.  There's an
active OpenWRT thread in which some folks have ordered devices and are
busily working to bring them up.

--tim
"
1309,Commotion-dev, Commotion and other mesh protocols,"Mon, 29 Apr 2013 10:08:20 -0400",-0400,Josh King,"Hi Genevieve,

It would not be that difficult to add babel to CommotionWRT. The way
that OLSRd is currently configured on CommotionWRT is that a hotplug
script in /etc/hotplug.d/ configures and starts OLSRd when a Commotion
interface starts. Although it wouldn't include some of OLSRd's LuCI web
interface tools, you could get babel running by including a babel
hotplug script that checks for babel's presence and configures it
appropriately when an interface starts. If you want to work on such a
script, I would be happy to provide feedback and integrate it upstream
when it's done. We'd like to support babel and other protocols, and it's
just been a matter of time and resources for me and some of the other
developers.

On 04/25/2013 09:39 PM, Genevieve Bastien wrote:
> Hi All,
> 
> I've been playing around a little with the Commotion OpenWrt firmware. 
> Thank you for the work.  I really like what you did with it, the
> automatic configuration makes it very easy to have something working and
> it's certainly a great step to make mesh networking accessible to the
> general public.
> 
> I was wondering how easy it would be to make Commotion support other
> mesh protocols.  Here in Montreal, Reseau Libre runs on babel.  We are
> slowly building our own firmware but using Commotion would jump us many
> steps ahead :D  Would it just be a matter of removing olsr and
> installing the babeld package instead or are the new packages you
> developed dependent on olsr?
> 
> Thanks,
> Genevi?ve
> _______________________________________________
> Commotion-dev mailing list
> Commotion-dev at lists.chambana.net
> https://lists.chambana.net/mailman/listinfo/commotion-dev

-- 
Josh King
Lead Technologist
The Open Technology Institute

"
1310,Commotion-dev, Freifunk watchdog,"Tue, 30 Apr 2013 09:44:20 -0400",-0400,Dan Staples,"So although Freifunk-watchdog is installed on Commotion-openwrt, we
don't really take advantage of it. It currently only watches dropbear
and cron. Is there any reason we shouldn't add entries for the core
Commotion components? Since we've been having problems with olsrd
inexplicably shutting down, I think the watchdog could help. Here's a
/etc/config/freifunk-watchdog I'd like to add by default to DR1:

config process
        option process 'dropbear'
        option initscript '/etc/init.d/dropbear'

config process
        option process 'crond'
        option initscript '/etc/init.d/cron'

config process
        option process 'commotiond'
        option initscript '/etc/init.d/commotiond'

config process
        option process 'servald'
        option initscript '/etc/init.d/serval-dna'

config process
        option process 'avahi-daemon'
        option initscript '/etc/init.d/avahi-daemon'

config process
        option process 'olsrd'
        option initscript '/etc/init.d/olsrd'

config process
        option process 'dnsmasq'
        option initscript '/etc/init.d/dnsmasq'

I didn't add firewall, in case folks want to turn that off. Is there
anything I'm missing? Any reason not to do this?

-Dan

-- 
Dan Staples

Open Technology Institute
https://commotionwireless.net

"
1311,Commotion-dev, Freifunk watchdog,"Tue, 30 Apr 2013 12:18:42 -0400",-0400,Dan Staples,"Also, Freifunk-watchdog is really controlling when it comes to the
wireless interfaces. When commotiond is in the middle of setting
everything up, ffwatchd will intervene and shut down the wireless
interfaces because the BSSID or channel doesn't match what's in
/etc/config/wireless at that particular moment. And that's a pain in the
ass.

So while ffwatchd is good at keeping processes alive, we need to figure
out how to prevent it from messing up the networking. I propose
modifying /etc/init.d/network to include this start function (changes in
bold):

start() {
        stop
        [ -e /proc/sys/kernel/core_pattern ] && {
                ulimit -c unlimited
                echo '/tmp/%e.%p.%s.%t.core' > /proc/sys/kernel/core_pattern
        }
        service_start /sbin/netifd

        setup_switch() { return 0; }

        include /lib/network
        setup_switch

        sleep 5

        *cp /etc/crontabs/root**/etc/crontabs/root.backup**
**       sed -i -e '/ffwatchd running/d' /etc/crontabs/root**
**       /etc/init.d/freifunk-watchdog stop*

        /sbin/wifi down
        /sbin/wifi up

        *mv /etc/crontabs/root.backup /etc/crontabs/root**
**       /etc/init.d/freifunk-watchdog start*
}

Would this be sufficient for keeping ffwatchd from meddling with the
wireless interfaces as commotiond configured everything and/or when
networking was (re)started?

-Dan

On 04/30/2013 09:44 AM, Dan Staples wrote:
> So although Freifunk-watchdog is installed on Commotion-openwrt, we
> don't really take advantage of it. It currently only watches dropbear
> and cron. Is there any reason we shouldn't add entries for the core
> Commotion components? Since we've been having problems with olsrd
> inexplicably shutting down, I think the watchdog could help. Here's a
> /etc/config/freifunk-watchdog I'd like to add by default to DR1:
>
> config process
>         option process 'dropbear'
>         option initscript '/etc/init.d/dropbear'
>
> config process
>         option process 'crond'
>         option initscript '/etc/init.d/cron'
>
> config process
>         option process 'commotiond'
>         option initscript '/etc/init.d/commotiond'
>
> config process
>         option process 'servald'
>         option initscript '/etc/init.d/serval-dna'
>
> config process
>         option process 'avahi-daemon'
>         option initscript '/etc/init.d/avahi-daemon'
>
> config process
>         option process 'olsrd'
>         option initscript '/etc/init.d/olsrd'
>
> config process
>         option process 'dnsmasq'
>         option initscript '/etc/init.d/dnsmasq'
>
> I didn't add firewall, in case folks want to turn that off. Is there
> anything I'm missing? Any reason not to do this?
>
> -Dan
"
1312,Commotion-dev, Guardian Project Summary of DC Work Days,"Tue, 30 Apr 2013 13:14:41 -0400",-0400,Hans-Christoph Steiner,"
I wrote up a summary of the past Thursday and Friday work session for the
Guardian teams, I thought I'd also post it here, for anyone who is interested:

https://code.commotionwireless.net/projects/commotion/wiki/Hackday-DC-desktop-devs

Bradley Greenwood and Josh Steiner of Scal.io, together with David Oliver and
Hans-Christoph Steiner of Guardian Project, spent two days working at New
America Foundation/OTI's DC office.  They are wrapping up their ""DR1"" release
of the router software, so this meeting was basically a kick-off meeting for a
full push on getting mesh support on desktop and mobile.  This is building
upon the work we initially did on the Android client, and then continued on
GNU/Linux NetworkManager and Mac OS X.  Scal.io is taking on a preliminary
round on Windows.  There was also some discussion on the feasibility of an iOS
app.

OTI has been recently focusing on building up test infrastructure and a couple
small real world deployments, focused on community wifi.  While community wifi
is not Guardian Project's interest in Commotion, it will provide valuable
experience for all of the potential uses for mesh.  They have also been
working with a university lab to building up amazing infrastructure for
testing real world wifi/mesh conditions, with a giant scriptable system for
moving around real devices like Android phones and Windows laptops around
static mesh nodes.  This will provide the first public test data that I know
of that address situations that align directly with Guardian Project
(protests, impromptu networks, etc).

We managed to mostly nail down a plan to get the Android MeshTether client
deployed to as many devices as possible.  We came up with a two stage plan:
spend a week polishing what we have, and get it into the Play Store ASAP.
Then build upon the sketch for the official adhoc support API, while also
providing a new, improved adhoc mode framework for supporting older devices.
Lastly, OTI has taken on lobbying Google directly to get adhoc mode fully
supported in Android.  We've already had promising feedback and are working to
deliver a concrete plan to be approved by Google.

The next big step at OTI is to figure out ideas about a ""Commotion API"" which
would provide an easy way to build network applications that take advantage of
the unique  features a mesh can provide.  There are two core pieces to this:
locality inherent to mesh, and delay-resistant networking.

For locality, its easy to control the reach of a network service, in terms of
physical space, by limiting how many hops the network traffic is allows to go:
1 hop is people in the same room, 3 hops would be neighbors, 4 hops would be a
neighborhood, etc.

As for Delay-Tolerant Networking (DTN), this is a specific new network
protocol, different than TCP or UDP, so for it to be useful, an app would need
to have a DTN mode that is based on the DTN API.  While its technically
possible to use DTN transparently via TCP/IP, its not currently useful for a
variety of reasons.

.hc



"
1313,Commotion-dev, Commotion and other mesh protocols,"Wed, 01 May 2013 09:32:35 -0400",-0400,=?ISO-8859-1?Q?Genevi=E8ve_Bastien?=,"Hi Josh,

Thanks for the tip.  I'll start working on it and see what I can do.  
I'll let you know how it goes.

Genevi?ve


On 04/29/2013 10:08 AM, Josh King wrote:
> Hi Genevieve,
>
> It would not be that difficult to add babel to CommotionWRT. The way
> that OLSRd is currently configured on CommotionWRT is that a hotplug
> script in /etc/hotplug.d/ configures and starts OLSRd when a Commotion
> interface starts. Although it wouldn't include some of OLSRd's LuCI web
> interface tools, you could get babel running by including a babel
> hotplug script that checks for babel's presence and configures it
> appropriately when an interface starts. If you want to work on such a
> script, I would be happy to provide feedback and integrate it upstream
> when it's done. We'd like to support babel and other protocols, and it's
> just been a matter of time and resources for me and some of the other
> developers.
>
> On 04/25/2013 09:39 PM, Genevieve Bastien wrote:
"
1314,Commotion-dev, Mesh visualization/mapping options,"Wed, 01 May 2013 14:34:17 -0400",-0400,Will Hawkins,"Like Dan, I like the idea of decentralized nature of node mapping. I
also like Freifunk's visualizer. I don't think that the two options are
mutually exclusive. Freifunk seems to be using d3 for the visualization
and could probably be made to pull data from any source. I believe d3
can overlay data on a map too. What do you think about this hybrid option?

Will

On 04/17/2013 07:09 PM, Paul Gardner-Stephen wrote:
> Hello,
> 
> Another approach to replicating this visualisation data is to use
> Rhizome to replicate the network structure information for visualisation
> on nodes. This could feasibly be integrated with these existing tools.
> 
> Paul.
> 
> 
> On Wed, Apr 17, 2013 at 7:58 PM, Dan Staples
> <danstaples at opentechinstitute.org
> <mailto:danstaples at opentechinstitute.org"
1315,Commotion-dev, nailing down the default mesh network,"Wed, 01 May 2013 16:17:08 -0400",-0400,Hans-Christoph Steiner,"
One idea that we discussed at the last dev sprint last Thursday/Friday is
nailing down a default mesh profile that we can set everywhere.  The core idea
is that people can use this as the easiest way to get started, and also, it
can serve as the mesh config for impromptu meshing.

Currently, we have been using this:

SSID: commotionwireless.net
BSSID: 02:CA:FF:EE:BA:BE
Channel: 5
IP range: 5.0.0.0/255.0.0.0

There are two issues that we need to address in order to nail down this
default profile: a valid IP range, and perhaps a unique BSSID.

5.0.0.0/255.0.0.0 is an officially allocated block of IPs that is actually
deployed in some places.  We should use an IP block that is officially
allocated for uses like Commotion intends.  We discussed this, and it seems
like the best bet is to use one of the RFC1918 private network ranges (10/8,
172.16/12, and 192.168/16).  172.16.0.0-172.31.255.255 seems to be the least
used of the three.  It privdes 1,048,576 unique IP addresses, so plenty.

We might want to consider using 100.64.0.0/10, which is reserved for ""carrier
grade NAT"", i.e. a large scale NATed network that is attached to the internet.
https://en.wikipedia.org/wiki/Private_network#Dedicated_space_for_Carrier_Grade_NAT_deployments

The rules for using it are in RFC 6598:
https://tools.ietf.org/html/rfc6598


As for the BSSID, I think we should probably use a unique BSSID to prevent
collisions with other mesh networks.  02:ca:ff:ee:ba:be is used by a number of
other meshes.  It really could be any valid adhoc BSSID like 02:02:02:02:02:02

.hc
"
1316,Commotion-dev, nailing down the default mesh network,"Wed, 01 May 2013 16:37:37 -0400",-0400,Dan Staples,"We've also been talking about using an all IPv6 ad-hoc network, while 
providing IPv4 AP networks, whose inter-node traffic can be tunneled in 
olsrd. Would this present any problems for meshing clients, either 
Windows, Android, iOS, OS X?

Whichever IPv4 address block we choose, we'll have to come up with a 
way to create unique client subnets based on the node's MAC address. 
With the 5.0.0.0/8 network (and this would work with 10.0.0.0/8), it 
helps to have 2 octets we can use for uniqueness (the last octet of the 
node's IP address would be .1).

On Wed 01 May 2013 04:17:08 PM EDT, Hans-Christoph Steiner wrote:
>
> One idea that we discussed at the last dev sprint last Thursday/Friday is
> nailing down a default mesh profile that we can set everywhere.  The core idea
> is that people can use this as the easiest way to get started, and also, it
> can serve as the mesh config for impromptu meshing.
>
> Currently, we have been using this:
>
> SSID: commotionwireless.net
> BSSID: 02:CA:FF:EE:BA:BE
> Channel: 5
> IP range: 5.0.0.0/255.0.0.0
>
> There are two issues that we need to address in order to nail down this
> default profile: a valid IP range, and perhaps a unique BSSID.
>
> 5.0.0.0/255.0.0.0 is an officially allocated block of IPs that is actually
> deployed in some places.  We should use an IP block that is officially
> allocated for uses like Commotion intends.  We discussed this, and it seems
> like the best bet is to use one of the RFC1918 private network ranges (10/8,
> 172.16/12, and 192.168/16).  172.16.0.0-172.31.255.255 seems to be the least
> used of the three.  It privdes 1,048,576 unique IP addresses, so plenty.
>
> We might want to consider using 100.64.0.0/10, which is reserved for ""carrier
> grade NAT"", i.e. a large scale NATed network that is attached to the internet.
> https://en.wikipedia.org/wiki/Private_network#Dedicated_space_for_Carrier_Grade_NAT_deployments
>
> The rules for using it are in RFC 6598:
> https://tools.ietf.org/html/rfc6598
>
>
> As for the BSSID, I think we should probably use a unique BSSID to prevent
> collisions with other mesh networks.  02:ca:ff:ee:ba:be is used by a number of
> other meshes.  It really could be any valid adhoc BSSID like 02:02:02:02:02:02
>
> .hc
> _______________________________________________
> Commotion-dev mailing list
> Commotion-dev at lists.chambana.net
> https://lists.chambana.net/mailman/listinfo/commotion-dev

--
Dan Staples

Open Technology Institute
https://commotionwireless.net
"
1317,Commotion-dev, nailing down the default mesh network,"Wed, 01 May 2013 17:38:12 -0400",-0400,Hans-Christoph Steiner,"
All IPv6 would be great!  It sounds like a steep hill to get over since few
people have any experience with IPv6.  So I think we should also set an IPv4
default mesh set, since that's widely deployed and understood.

As for ""borrowing"" any officially assigned IP range, its really a bad idea.
The internet is based on people following the rules on a voluntary basis, and
that is part of the beauty.  As Commotion and Serval, there is no internet
police, and though both Commotion and Serval are violating the rules, no one
has been arrested or detained.  Let's keep the internet working based on
respect for the rules. Please voluntarily follow the rules, so that we don't
end up with internet police.  This should not be hard since there is no good
reason to avoid using IP ranges that have been allocated for uses like this.

Sounds like the ""carrier grade NAT"" RFC6598 100.64.0.0/10 was specifically
allocated for this kind of use case, and covers all the requirements that I've
heard for mesh.  Otherwise the RFC1918 private, non-routable ranges will work.

.hc


On 05/01/2013 04:37 PM, Dan Staples wrote:
> We've also been talking about using an all IPv6 ad-hoc network, while 
> providing IPv4 AP networks, whose inter-node traffic can be tunneled in 
> olsrd. Would this present any problems for meshing clients, either 
> Windows, Android, iOS, OS X?
> 
> Whichever IPv4 address block we choose, we'll have to come up with a 
> way to create unique client subnets based on the node's MAC address. 
> With the 5.0.0.0/8 network (and this would work with 10.0.0.0/8), it 
> helps to have 2 octets we can use for uniqueness (the last octet of the 
> node's IP address would be .1).
> 
> On Wed 01 May 2013 04:17:08 PM EDT, Hans-Christoph Steiner wrote:
"
1318,Commotion-dev, Fwd:  nailing down the default mesh network,"Thu, 2 May 2013 07:34:50 +0930",+0930,Paul Gardner-Stephen,"Hello,

On Thu, May 2, 2013 at 5:47 AM, Hans-Christoph Steiner <
hans at guardianproject.info> wrote:

>
> One idea that we discussed at the last dev sprint last Thursday/Friday is
> nailing down a default mesh profile that we can set everywhere.  The core
> idea
> is that people can use this as the easiest way to get started, and also, it
> can serve as the mesh config for impromptu meshing.
>
> Currently, we have been using this:
>
> SSID: commotionwireless.net
> BSSID: 02:CA:FF:EE:BA:BE
> Channel: 5
> IP range: 5.0.0.0/255.0.0.0
>
> There are two issues that we need to address in order to nail down this
> default profile: a valid IP range, and perhaps a unique BSSID.
>
> 5.0.0.0/255.0.0.0 is an officially allocated block of IPs that is actually
> deployed in some places.  We should use an IP block that is officially
> allocated for uses like Commotion intends.  We discussed this, and it seems
> like the best bet is to use one of the RFC1918 private network ranges
> (10/8,
> 172.16/12, and 192.168/16).  172.16.0.0-172.31.255.255 seems to be the
> least
> used of the three.  It privdes 1,048,576 unique IP addresses, so plenty.
>
> We might want to consider using 100.64.0.0/10, which is reserved for
> ""carrier
> grade NAT"", i.e. a large scale NATed network that is attached to the
> internet.
>
> https://en.wikipedia.org/wiki/Private_network#Dedicated_space_for_Carrier_Grade_NAT_deployments
>
> The rules for using it are in RFC 6598:
> https://tools.ietf.org/html/rfc6598


With Serval we decided to go with 28.0.0.0/254.0.0.0 to give ~32 million
addresses.  This range is US DoD internal use, and as far as we are aware
is not connected to the internet.  Also, as connections to the net from a
mesh are almost always using NAT, the likelihood of issues is further
reduced.  In fact, since a mesh is effectively a separate network from the
internet that happens to have gateways to the internet you are free to use
whatever range you like.  However, as you have indirectly noted using
address ranges that people might try to connect to on the internet causes
complications for most clients.

We went for such a large range because it allows for random self-allocation
of addresses even for relatively large networks.  The Birthday Paradox
implies that you need >=n^2 addresses to allow n nodes to randomly self
allocate addresses while keeping the probability of an address collision
<<0.5.  This makes it feasible to remove one typically annoying and error
prone step of mesh deployment, i.e., address allocation and management.

Having 2^25 addresses allows for 2^(12.5) nodes = ~5,800 nodes without
worrying about the Birthday Paradox.  Probably an overkill for now, but not
if you support mobile nodes, where address collisions are almost certain to
occur.  This is also why we adopted our overlay addressing scheme with 256
bit addresses so that at the end of the day, it wouldn't matter what
address people self-allocated.  But for Commotion one of the primary goals
is internet connectivity, and so using the Serval overlay addressing scheme
as primary transport would require some work around creating an MDP
transported transparent proxy -- not impossible, but probably not something
that needs to happen until you start getting larger deployments with many
mobile devices.

As for IPv6, I am not convinced that it is necessary or that good an idea.
Before explaining my position it is important to confess that I am in many
ways an IPv6 skeptic, several of the reasons for which will become apparent
below.  But generally I take the view that if IPv6 really is that good,
then we would have more widely adopted it in the 18 years (!) since it was
released. Instead, all it does is offer more addresses in a generally
backward-incompatible way, and several peripheral features that were
already solved in IPv4, admittedly with less elegance.  But I digress.

Compiling in IPv6 to a kernel adds some extra flash and RAM use that might
be an issue on smaller devices, but that is a diminishing concern.
The bigger issue is requiring every device that connects to support IPv6.
 This can be managed by allowing clients to connect with IPv4, and thus
just using the IPv6 for mesh traffic between nodes.
IPv6 is only necessary in that role when networks get very large (>~5,800
nodes if you use 28.0.0.0/7). In the meantime, the larger IPv6 headers will
consume precious bandwidth.

So IPv6 can make sense if you want to future-proof yourself for what I
would call ""intermediate sized"" mesh networks.

But once you start thinking about global-scale mobility and >=1 node per
person, the Birthday Paradox starts to be an issue for IPv6, because there
are only 64-bits of host address, which means only 2^32 nodes can safely
randomly self-allocate addresses.  MAC-based address allocation is not
safe, because MAC addresses just aren't unique.

Finally, from Serval's perspective using IPv6 didn't answer the important
question of security, and how to get automatic and fully-distributed
end-to-end encryption between nodes.  This is why we made the overlay
addressing scheme using 256-bit ECC public keys as network addresses.  That
way we get enough addresses for 2^128 nodes (almost enough for every atom
in the planet to randomly self-allocate an address).

We then combined that with address abbreviation to have typical address
lengths in packets of <32bits.  This is important for using low-bandwidth
links like packet radio where links might be between 1kbit - 128kbit, and
where IPv6 headers can consume a significant fraction of that.  Using a
user-land overlay also makes it much easier to use serial packet radios,
because we don't need to expose it as a system network interface, and worry
about things like ARP and goodness knows what consuming the precious little
bandwidth.

Of course the applications of each project differ slightly, and this will
have significant impact on what is most suitable in each case, but
hopefully having an understanding of the decisions we made will be of some
use as Commotion works through these same issues.

As for the BSSID, I think we should probably use a unique BSSID to prevent
> collisions with other mesh networks.  02:ca:ff:ee:ba:be is used by a
> number of
> other meshes.  It really could be any valid adhoc BSSID like
> 02:02:02:02:02:02
"
1319,Commotion-dev, nailing down the default mesh network,"Thu, 2 May 2013 08:32:12 +0200",+0200,Teco Boot,"I prefer WiFi channels 1, 6 or 11 as a default.

I prefer a true (pseudo-)random BSSID. Could be hash over SSID&channel.

I'm afraid there is no ideal solution for addressing. Short term: some v4 space. More fundamental: auto-generated IPv6 ULA and with support for v4 traffic. With IPv6, multi-homing with multi-path is much easier to implement (routing based on source address).

Teco

Op 1 mei 2013, om 22:17 heeft Hans-Christoph Steiner <hans at guardianproject.info> het volgende geschreven:

> 
> One idea that we discussed at the last dev sprint last Thursday/Friday is
> nailing down a default mesh profile that we can set everywhere.  The core idea
> is that people can use this as the easiest way to get started, and also, it
> can serve as the mesh config for impromptu meshing.
> 
> Currently, we have been using this:
> 
> SSID: commotionwireless.net
> BSSID: 02:CA:FF:EE:BA:BE
> Channel: 5
> IP range: 5.0.0.0/255.0.0.0
> 
> There are two issues that we need to address in order to nail down this
> default profile: a valid IP range, and perhaps a unique BSSID.
> 
> 5.0.0.0/255.0.0.0 is an officially allocated block of IPs that is actually
> deployed in some places.  We should use an IP block that is officially
> allocated for uses like Commotion intends.  We discussed this, and it seems
> like the best bet is to use one of the RFC1918 private network ranges (10/8,
> 172.16/12, and 192.168/16).  172.16.0.0-172.31.255.255 seems to be the least
> used of the three.  It privdes 1,048,576 unique IP addresses, so plenty.
> 
> We might want to consider using 100.64.0.0/10, which is reserved for ""carrier
> grade NAT"", i.e. a large scale NATed network that is attached to the internet.
> https://en.wikipedia.org/wiki/Private_network#Dedicated_space_for_Carrier_Grade_NAT_deployments
> 
> The rules for using it are in RFC 6598:
> https://tools.ietf.org/html/rfc6598
> 
> 
> As for the BSSID, I think we should probably use a unique BSSID to prevent
> collisions with other mesh networks.  02:ca:ff:ee:ba:be is used by a number of
> other meshes.  It really could be any valid adhoc BSSID like 02:02:02:02:02:02
> 
> .hc
> _______________________________________________
> Commotion-dev mailing list
> Commotion-dev at lists.chambana.net
> https://lists.chambana.net/mailman/listinfo/commotion-dev

"
1320,Commotion-dev, nailing down the default mesh network,"Thu, 02 May 2013 10:40:43 -0400",-0400,The Doctor,
1321,Commotion-dev, nailing down the default mesh network,"Thu, 02 May 2013 10:41:41 -0400",-0400,The Doctor,
1322,Commotion-dev, nailing down the default mesh network,"Thu, 02 May 2013 12:35:25 -0400",-0400,Hans-Christoph Steiner,"

On 05/02/2013 10:40 AM, The Doctor wrote:
> On 05/01/2013 04:17 PM, Hans-Christoph Steiner wrote:
> 
"
1323,Commotion-dev, nailing down the default mesh network,"Thu, 02 May 2013 12:37:04 -0400",-0400,Hans-Christoph Steiner,"

On 05/02/2013 10:41 AM, The Doctor wrote:
> On 05/01/2013 04:37 PM, Dan Staples wrote:
> 
"
1324,Commotion-dev, Freifunk watchdog,"Thu, 2 May 2013 14:17:02 -0500",-0500,Ben West,"Hi All,

Unfortunately, the current developer for freifunk-watchdog stated there
isn't any documentation for that tool, and probably will never be.  This
means changes could be silently pushed into these tools, with end users not
discover them until after their configuration breaks after OS upgrade.
Possibly, this problem applies for the other freifunk tools packaged into
OpenWRT, too.

Here is the source repo for the various freifunk tools presently packaged
into AA, including the freifunk-watchdog package.
http://svn.luci.subsignal.org/luci/tags/0.11.1/contrib/package/
http://svn.luci.subsignal.org/luci/tags/0.11.1/contrib/package/freifunk-watchdog/src/

>From the source for freifunk-watching, it looks like modification to
support additional UCI options in /etc/config/freifunk-watchdog that
enables/disables whether the watchdog monitor's wireless interfaces should
be straightforward.

Kludging Commotion tools to accommodate ffwatchd's eccentricities isn't an
appealing option in the long time, especially if the original dev decides
later to silently push more changes that subsequently break Commotion's
kludges, or that beget even uglier kludges.

Could I recommend one of these alternatives?

   1. Propose patches to the luci.subsignal to add UCI config options
   allowing the user to enable/disable whether watchdog touches any wireless
   interfaces.  Hopefully, the original developer would welcome the increased
   attention.
   2. If luci.subsignal.org doesn't accept patches, fork the freifunk tools
   into a git repo managed by OTI, with the patches described in #1.
   3. Don't use the Freifunk tools all.  This options is unappealing, but
   it does at least avoid having to make possibly unsustainable kludges.


On Tue, Apr 30, 2013 at 11:18 AM, Dan Staples <
danstaples at opentechinstitute.org> wrote:

>  Also, Freifunk-watchdog is really controlling when it comes to the
> wireless interfaces. When commotiond is in the middle of setting everything
> up, ffwatchd will intervene and shut down the wireless interfaces because
> the BSSID or channel doesn't match what's in /etc/config/wireless at that
> particular moment. And that's a pain in the ass.
>
> So while ffwatchd is good at keeping processes alive, we need to figure
> out how to prevent it from messing up the networking. I propose modifying
> /etc/init.d/network to include this start function (changes in bold):
>
> start() {
>         stop
>         [ -e /proc/sys/kernel/core_pattern ] && {
>                 ulimit -c unlimited
>                 echo '/tmp/%e.%p.%s.%t.core' >
> /proc/sys/kernel/core_pattern
>         }
>         service_start /sbin/netifd
>
>         setup_switch() { return 0; }
>
>         include /lib/network
>         setup_switch
>
>         sleep 5
>
>         *cp /etc/crontabs/root** /etc/crontabs/root.backup**
> **       sed -i -e '/ffwatchd running/d' /etc/crontabs/root**
> **       /etc/init.d/freifunk-watchdog stop*
>
>         /sbin/wifi down
>         /sbin/wifi up
>
>         *mv /etc/crontabs/root.backup /etc/crontabs/root**
> **       /etc/init.d/freifunk-watchdog start*
> }
>
> Would this be sufficient for keeping ffwatchd from meddling with the
> wireless interfaces as commotiond configured everything and/or when
> networking was (re)started?
>
> -Dan
>
>
> On 04/30/2013 09:44 AM, Dan Staples wrote:
>
> So although Freifunk-watchdog is installed on Commotion-openwrt, we
> don't really take advantage of it. It currently only watches dropbear
> and cron. Is there any reason we shouldn't add entries for the core
> Commotion components? Since we've been having problems with olsrd
> inexplicably shutting down, I think the watchdog could help. Here's a
> /etc/config/freifunk-watchdog I'd like to add by default to DR1:
>
> config process
>         option process 'dropbear'
>         option initscript '/etc/init.d/dropbear'
>
> config process
>         option process 'crond'
>         option initscript '/etc/init.d/cron'
>
> config process
>         option process 'commotiond'
>         option initscript '/etc/init.d/commotiond'
>
> config process
>         option process 'servald'
>         option initscript '/etc/init.d/serval-dna'
>
> config process
>         option process 'avahi-daemon'
>         option initscript '/etc/init.d/avahi-daemon'
>
> config process
>         option process 'olsrd'
>         option initscript '/etc/init.d/olsrd'
>
> config process
>         option process 'dnsmasq'
>         option initscript '/etc/init.d/dnsmasq'
>
> I didn't add firewall, in case folks want to turn that off. Is there
> anything I'm missing? Any reason not to do this?
>
> -Dan
>
>
>
> --
> Dan Staples
>
> Open Technology Institutehttps://commotionwireless.net
>
>
> _______________________________________________
> Commotion-dev mailing list
> Commotion-dev at lists.chambana.net
> https://lists.chambana.net/mailman/listinfo/commotion-dev
>
"
1325,Commotion-dev, Freifunk watchdog,"Thu, 02 May 2013 15:46:35 -0400",-0400,Dan Staples,"I totally agree, that is a much cleaner solution. I'll work on 
implementing such a change to freifunk-watchdog.

On Thu 02 May 2013 03:17:02 PM EDT, Ben West wrote:
> Hi All,
>
> Unfortunately, the current developer for freifunk-watchdog stated
> there isn't any documentation for that tool, and probably will never
> be.  This means changes could be silently pushed into these tools,
> with end users not discover them until after their configuration
> breaks after OS upgrade.  Possibly, this problem applies for the other
> freifunk tools packaged into OpenWRT, too.
>
> Here is the source repo for the various freifunk tools presently
> packaged into AA, including the freifunk-watchdog package.
> http://svn.luci.subsignal.org/luci/tags/0.11.1/contrib/package/
> http://svn.luci.subsignal.org/luci/tags/0.11.1/contrib/package/freifunk-watchdog/src/
>
> From the source for freifunk-watching, it looks like modification to
> support additional UCI options in /etc/config/freifunk-watchdog that
> enables/disables whether the watchdog monitor's wireless interfaces
> should be straightforward.
>
> Kludging Commotion tools to accommodate ffwatchd's eccentricities
> isn't an appealing option in the long time, especially if the original
> dev decides later to silently push more changes that subsequently
> break Commotion's kludges, or that beget even uglier kludges.
>
> Could I recommend one of these alternatives?
>
>  1. Propose patches to the luci.subsignal to add UCI config options
>     allowing the user to enable/disable whether watchdog touches any
>     wireless interfaces.  Hopefully, the original developer would
>     welcome the increased attention.
>  2. If luci.subsignal.org <http://luci.subsignal.org> doesn't accept
>     patches, fork the freifunk tools into a git repo managed by OTI,
>     with the patches described in #1.
>  3. Don't use the Freifunk tools all.  This options is unappealing,
>     but it does at least avoid having to make possibly unsustainable
>     kludges.
>
>
> On Tue, Apr 30, 2013 at 11:18 AM, Dan Staples
> <danstaples at opentechinstitute.org
> <mailto:danstaples at opentechinstitute.org"
1326,Commotion-dev, nailing down the default mesh network,"Fri, 3 May 2013 08:10:37 +0930",+0930,Paul Gardner-Stephen,"Hello,

While it is true that all needs to match to get multi-hop connectivity
through the mesh, if BSSID + channel match (or even channel is +/- 2) then
single-hop traffic will be possible between nodes of different meshes,
which can still be helpful and transfer/share useful information.  Rhizome
could certainly use this kind of connection to transfer data.

Changing the BSSID doesn't reduce the interference of colocated meshes, it
just stops the packets from being visible to each other.  To my mind
forcing separation of traffic like this is counter-productive to the goals
of distributed communications.  In short, I prefer the ""if in doubt, allow
communications"" approach.

So I agree with the doctor that the BSSID should not change.

Paul.


On Fri, May 3, 2013 at 2:05 AM, Hans-Christoph Steiner <
hans at guardianproject.info> wrote:

>
>
> On 05/02/2013 10:40 AM, The Doctor wrote:
> > On 05/01/2013 04:17 PM, Hans-Christoph Steiner wrote:
> >
> "
1327,Commotion-dev, nailing down the default mesh network,"Fri, 3 May 2013 09:04:33 +0930",+0930,Jeremy Lakeman,"Serval may be forgiving, but if your olsr config doesn't match, it may lead
to undefined behaviour....



On Fri, May 3, 2013 at 8:10 AM, Paul Gardner-Stephen <paul at servalproject.org
> wrote:

> Hello,
>
> While it is true that all needs to match to get multi-hop connectivity
> through the mesh, if BSSID + channel match (or even channel is +/- 2) then
> single-hop traffic will be possible between nodes of different meshes,
> which can still be helpful and transfer/share useful information.  Rhizome
> could certainly use this kind of connection to transfer data.
>
> Changing the BSSID doesn't reduce the interference of colocated meshes, it
> just stops the packets from being visible to each other.  To my mind
> forcing separation of traffic like this is counter-productive to the goals
> of distributed communications.  In short, I prefer the ""if in doubt, allow
> communications"" approach.
>
> So I agree with the doctor that the BSSID should not change.
>
> Paul.
>
>
> On Fri, May 3, 2013 at 2:05 AM, Hans-Christoph Steiner <
> hans at guardianproject.info> wrote:
>
"
1328,Commotion-dev, nailing down the default mesh network,"Thu, 02 May 2013 22:39:24 -0400",-0400,Hans-Christoph Steiner,"
I like the idea that Paul outlines about letting communications, as long as it
doesn't cause problems.  It sounds like Jeremy is saying it can cause
problems, like if two meshes with different LinkQualityAlgorithms are on the
same channel/BSSID, the olsrds might feed each other bad info and corrupt the
other meshes.  Is that what you're thinking Jeremy?

.hc

On 05/02/2013 07:34 PM, Jeremy Lakeman wrote:
> Serval may be forgiving, but if your olsr config doesn't match, it may lead
> to undefined behaviour....
> 
> 
> 
> On Fri, May 3, 2013 at 8:10 AM, Paul Gardner-Stephen <paul at servalproject.org
"
1329,Commotion-dev, nailing down the default mesh network,"Thu, 02 May 2013 22:42:02 -0400",-0400,Hans-Christoph Steiner,"
Sean McIntyre and I developed an algorithm to generate the BSSID based on the
SSID and channel:


> Hey folks,
> 
> Talked about this with Hans today. We came up with the following algorithm:
> 
> BSSID = MD4(ESSID)[0:4] ++ channel 2-byte integer
> 
> This is read in English as: ""The six byte BSSID is the first four
> bytes of the MD4 hash of ESSID concatenated with the lowest two bytes
> of the channel.""
> 
> The rationale for this is that MD4 is uniformly distributed, and the
> first four bytes of MD4 are presumably uniformly distributed. (Should
> be distributed enough.) Then add on the bytes of the channel so that
> same ESSIDs don't collide. MD4 was an arbitrary function choice, and
> security is not an issue. 
> 
> I found a public domain implementation of MD4
> <http://openwall.info/wiki/people/solar/software/public-domain-source-code/md4>
> and made a simple get_bssid() function the same as the above algorithm
> (attached).
> 
> Signature for get_bssid:
> 
> get_bssid(char *essid, unsigned int channel, unsigned char *bssid) //
> (result goes in bssid)
> 
> Not sure how to add this in, so hope one of you goes ahead and does
> that, or let me know how I can be of further service.

Also, see the attached source code for Sean's implementation of it.

.hc



On 05/02/2013 02:32 AM, Teco Boot wrote:
> I prefer WiFi channels 1, 6 or 11 as a default.
> 
> I prefer a true (pseudo-)random BSSID. Could be hash over SSID&channel.
> 
> I'm afraid there is no ideal solution for addressing. Short term: some v4 space. More fundamental: auto-generated IPv6 ULA and with support for v4 traffic. With IPv6, multi-homing with multi-path is much easier to implement (routing based on source address).
> 
> Teco
> 
> Op 1 mei 2013, om 22:17 heeft Hans-Christoph Steiner <hans at guardianproject.info> het volgende geschreven:
> 
"
1330,Commotion-dev, nailing down the default mesh network,"Fri, 3 May 2013 14:18:43 +0930",+0930,Paul Gardner-Stephen,"Hello,

Deterministic BSSID generation is a good thing, and we did briefly try to
push this general idea into the 802.11 working group in the IEEE.  It great
advantages in reducing the possibility for cell splits which are a real
nuisance with ad-hoc as currently ""standardized"".

Paul.


On Fri, May 3, 2013 at 12:12 PM, Hans-Christoph Steiner <
hans at guardianproject.info> wrote:

>
> Sean McIntyre and I developed an algorithm to generate the BSSID based on
> the
> SSID and channel:
>
>
> > Hey folks,
> >
> > Talked about this with Hans today. We came up with the following
> algorithm:
> >
> > BSSID = MD4(ESSID)[0:4] ++ channel 2-byte integer
> >
> > This is read in English as: ""The six byte BSSID is the first four
> > bytes of the MD4 hash of ESSID concatenated with the lowest two bytes
> > of the channel.""
> >
> > The rationale for this is that MD4 is uniformly distributed, and the
> > first four bytes of MD4 are presumably uniformly distributed. (Should
> > be distributed enough.) Then add on the bytes of the channel so that
> > same ESSIDs don't collide. MD4 was an arbitrary function choice, and
> > security is not an issue.
> >
> > I found a public domain implementation of MD4
> > <
> http://openwall.info/wiki/people/solar/software/public-domain-source-code/md4
> >
> > and made a simple get_bssid() function the same as the above algorithm
> > (attached).
> >
> > Signature for get_bssid:
> >
> > get_bssid(char *essid, unsigned int channel, unsigned char *bssid) //
> > (result goes in bssid)
> >
> > Not sure how to add this in, so hope one of you goes ahead and does
> > that, or let me know how I can be of further service.
>
> Also, see the attached source code for Sean's implementation of it.
>
> .hc
>
>
>
> On 05/02/2013 02:32 AM, Teco Boot wrote:
> > I prefer WiFi channels 1, 6 or 11 as a default.
> >
> > I prefer a true (pseudo-)random BSSID. Could be hash over SSID&channel.
> >
> > I'm afraid there is no ideal solution for addressing. Short term: some
> v4 space. More fundamental: auto-generated IPv6 ULA and with support for v4
> traffic. With IPv6, multi-homing with multi-path is much easier to
> implement (routing based on source address).
> >
> > Teco
> >
> > Op 1 mei 2013, om 22:17 heeft Hans-Christoph Steiner <
> hans at guardianproject.info> het volgende geschreven:
> >
> "
1331,Commotion-dev, nailing down the default mesh network,"Fri, 03 May 2013 10:31:47 -0400",-0400,The Doctor,
1332,Commotion-dev, nailing down the default mesh network,"Fri, 03 May 2013 10:32:42 -0400",-0400,The Doctor,
1333,Commotion-dev, nailing down the default mesh network,"Fri, 03 May 2013 10:47:42 -0400",-0400,Hans-Christoph Steiner,"

On 05/03/2013 10:31 AM, The Doctor wrote:
> On 05/02/2013 12:35 PM, Hans-Christoph Steiner wrote:
> 
"
1334,Commotion-dev, nailing down the default mesh network,"Fri, 03 May 2013 10:49:47 -0400",-0400,Hans-Christoph Steiner,"

On 05/03/2013 10:32 AM, The Doctor wrote:
> On 05/02/2013 12:37 PM, Hans-Christoph Steiner wrote:
> 
"
1335,Commotion-dev, nailing down the default mesh network,"Fri, 03 May 2013 10:50:54 -0400",-0400,Hans-Christoph Steiner,"
Why did you stop pushing it? Was there resistance to the idea?

.hc

On 05/03/2013 12:48 AM, Paul Gardner-Stephen wrote:
> Hello,
> 
> Deterministic BSSID generation is a good thing, and we did briefly try to
> push this general idea into the 802.11 working group in the IEEE.  It great
> advantages in reducing the possibility for cell splits which are a real
> nuisance with ad-hoc as currently ""standardized"".
> 
> Paul.
> 
> 
> On Fri, May 3, 2013 at 12:12 PM, Hans-Christoph Steiner <
> hans at guardianproject.info> wrote:
> 
"
1336,Commotion-dev, nailing down the default mesh network,"Fri, 03 May 2013 10:56:21 -0400",-0400,The Doctor,
1337,Commotion-dev, Non-OpenWRT Directory/Repo Structure,"Fri, 03 May 2013 12:16:51 -0400",-0400,Andrew Reynolds,"Hans, Bradley, and anyone else working on DR1 feature ports to
non-OpenWRT platforms,

Do you have any thoughts on how we should structure Commotion feature
ports for Linux and Mac? For instance, if we wanted to pull in servald,
how should we structure the repos and install scripts relative to
commotion-mesh-applet and commotion-meshbook?

On the OpenWRT side we define a commotion feed with Makefiles for each
feature that add and build the correct branches. (See setup.sh in the
commotion-openwrt repo, which calls
https://github.com/opentechinstitute/commotion-feed). Can we apply a
similar model here?

We kind of touched on this during the developers meeting, but I don't
think anything was decided in practical terms.

-andrew

"
1338,Commotion-dev, Non-OpenWRT Directory/Repo Structure,"Fri, 03 May 2013 12:50:45 -0400",-0400,Hans-Christoph Steiner,"
How this stuff is packaged and included is going to vary quite a bit depending
on platform.  For example, on GNU/Linux, servald and commotiond should just be
their own stand-alone native packages (ie. Debian .deb, RedHat .rpm, etc.),
then there can be a 'commotion' package which installs olsrd,
commotion-mesh-panel, servald, etc.

I imagine that Windows and Mac will be similar to each other, in that they
will be something like an app that includes all of the needed binaries.

The actual build process will vary even more, since XCode is what everyone
uses on Mac, Makefiles are the standard GNU/Linux way of building, and Windows
has other common scenarios.  I think forcing each platform into a standard
cross-platform build technique would be a mistake since it would make it
harder for people to get started building and working on the code because
they'd have to learn an unfamiliar project structure.

.hc

On 05/03/2013 12:16 PM, Andrew Reynolds wrote:
> Hans, Bradley, and anyone else working on DR1 feature ports to
> non-OpenWRT platforms,
> 
> Do you have any thoughts on how we should structure Commotion feature
> ports for Linux and Mac? For instance, if we wanted to pull in servald,
> how should we structure the repos and install scripts relative to
> commotion-mesh-applet and commotion-meshbook?
> 
> On the OpenWRT side we define a commotion feed with Makefiles for each
> feature that add and build the correct branches. (See setup.sh in the
> commotion-openwrt repo, which calls
> https://github.com/opentechinstitute/commotion-feed). Can we apply a
> similar model here?
> 
> We kind of touched on this during the developers meeting, but I don't
> think anything was decided in practical terms.
> 
> -andrew
> 
> 
> 
> _______________________________________________
> Commotion-dev mailing list
> Commotion-dev at lists.chambana.net
> https://lists.chambana.net/mailman/listinfo/commotion-dev
> 

"
1339,Commotion-dev, nailing down the default mesh network,"Sat, 4 May 2013 19:54:16 +0930",+0930,Paul Gardner-Stephen,"Hello,

We just ran out of money to stay involved in the process.  This was in
large part due to the IEEE meetings mostly being in North America, while we
are in Australia, within 2,000 miles of the antipode of most meetings.
 This would be great to have another more local group come in and push for
that and general fixing of ad-hoc Wi-Fi.

Paul.


On Sat, May 4, 2013 at 12:20 AM, Hans-Christoph Steiner <
hans at guardianproject.info> wrote:

>
> Why did you stop pushing it? Was there resistance to the idea?
>
> .hc
>
> On 05/03/2013 12:48 AM, Paul Gardner-Stephen wrote:
> > Hello,
> >
> > Deterministic BSSID generation is a good thing, and we did briefly try to
> > push this general idea into the 802.11 working group in the IEEE.  It
> great
> > advantages in reducing the possibility for cell splits which are a real
> > nuisance with ad-hoc as currently ""standardized"".
> >
> > Paul.
> >
> >
> > On Fri, May 3, 2013 at 12:12 PM, Hans-Christoph Steiner <
> > hans at guardianproject.info> wrote:
> >
> "
1340,Commotion-dev, nailing down the default mesh network,"Sat, 04 May 2013 09:20:41 -0400",-0400,Hans-Christoph Steiner,"
Sounds like a natural role for OTI, if they are amenable, since OTI is also
steeped in policy.  Updating the official IEEE adhoc mode for mesh sounds very
valuable!

.hc

On 05/04/2013 06:24 AM, Paul Gardner-Stephen wrote:
> Hello,
> 
> We just ran out of money to stay involved in the process.  This was in
> large part due to the IEEE meetings mostly being in North America, while we
> are in Australia, within 2,000 miles of the antipode of most meetings.
>  This would be great to have another more local group come in and push for
> that and general fixing of ad-hoc Wi-Fi.
> 
> Paul.
> 
> 
> On Sat, May 4, 2013 at 12:20 AM, Hans-Christoph Steiner <
> hans at guardianproject.info> wrote:
> 
"
1341,Commotion-dev, nailing down the default mesh network,"Sun, 5 May 2013 01:44:41 +0930",+0930,Paul Gardner-Stephen,"Hello,

Yes, this would be great if OTI could take up the baton on this.  If anyone
is interested in doing so, we can provide some hand-over for where we got
to etc.  The working group were positive about the BSSID from hash of SSID
approach, as I recall.

Paul.


On Sat, May 4, 2013 at 10:50 PM, Hans-Christoph Steiner <
hans at guardianproject.info> wrote:

>
> Sounds like a natural role for OTI, if they are amenable, since OTI is also
> steeped in policy.  Updating the official IEEE adhoc mode for mesh sounds
> very
> valuable!
>
> .hc
>
> On 05/04/2013 06:24 AM, Paul Gardner-Stephen wrote:
> > Hello,
> >
> > We just ran out of money to stay involved in the process.  This was in
> > large part due to the IEEE meetings mostly being in North America, while
> we
> > are in Australia, within 2,000 miles of the antipode of most meetings.
> >  This would be great to have another more local group come in and push
> for
> > that and general fixing of ad-hoc Wi-Fi.
> >
> > Paul.
> >
> >
> > On Sat, May 4, 2013 at 12:20 AM, Hans-Christoph Steiner <
> > hans at guardianproject.info> wrote:
> >
> "
1342,Commotion-dev, How to file issue on Commotion-OpenWRT luci theme -,"Sun, 5 May 2013 20:52:44 -0500",-0500,Ben West,"Hi All,

This is the current repo for the luci-commotion-theme used for the luci web
UI packaged into Commotion-OpenWRT (forked from a repo started by Ben
Chodoroff):
https://github.com/opentechinstitute/commotion-openwrt-theme

A difficulty I've encountered in squeezing things onto finite flash chips,
especially with recent integration of large packages like Serval, is that
the Commotion theme is really rather large.  Indeed, 10x larger than the
stock themes provided with OpenWRT:

ben at computer:~/blahblah/openwrt/bin/ar71xx/packages$ ls -l *theme*
-rw-r--r-- 1 ben ben  24940 May  5 16:25 luci-theme-base_0.11.1-1_ar71xx.ipk
-rw-r--r-- 1 ben ben  13649 May  5 16:25
luci-theme-bootstrap_0.11.1-1_ar71xx.ipk
-rw-r--r-- 1 ben ben 314206 May  5 16:25
luci-theme-commotion_master-1_ar71xx.ipk
-rw-r--r-- 1 ben ben   7951 May  5 16:25
luci-theme-openwrt_0.11.1-1_ar71xx.ipk

Jumping into the theme's internals, it looks like the lion's share
(440kbytes, or 60% of overall ipk) comes from fronts:

ben at computer:~/blahblah/openwrt/build_dir/target-mips_r2_uClibc-0.9.33.2/luci-theme-commotion-master/files/htdocs$
du -s -h *
4.0K    advanced.png
32K     cascade.css
4.0K    commotion_tiny.png
4.0K    dashboard.css
4.0K    favicon.ico
440K    fonts
4.0K    help.png
4.0K    html5.js
4.0K    ie6.css
4.0K    ie7.css
92K     jquery.min.js
4.0K    quickstart.png
4.0K    respond.min.js
4.0K    selectnav.min.js
4.0K    status_message_smile.png
4.0K    theme.js
4.0K    warning_icon.png
24K     zepto.min.js

Is the use of the Asap font critical to UX or HID design elements?  Could
the CSS be edited to instead use whatever built-in sens-serif font the
user's browser supplies?

Also, the repo for the Commotion theme isn't set up to accept issue
submissions from the public.  May I be added to the access list to submit
an issue (evtl followed up with pull request) about slimming this theme
down in size?

Thanks.

-- 
Ben West
http://gowasabi.net
ben at gowasabi.net
314-246-9434
"
1343,Commotion-dev, How to file issue on Commotion-OpenWRT luci,"Mon, 06 May 2013 10:13:19 -0400",-0400,Dan Staples,"I believe I just fixed the issue submission, so try again and see if 
that works. I think it makes a lot of sense to trim down the luci 
theme. Our OpenWRT images have gone up 2MB since the last release, so 
stripping out unnecessary items is a great idea. I was also surprised 
it had a minified jQuery, which is still quite large. And why would we 
need both jQuery and Zepto? I don't think we have any javascript in the 
theme or elsewhere that requires jQuery. Zepto should do just fine...

On Sun 05 May 2013 09:52:44 PM EDT, Ben West wrote:
> Hi All,
>
> This is the current repo for the luci-commotion-theme used for the
> luci web UI packaged into Commotion-OpenWRT (forked from a repo
> started by Ben Chodoroff):
> https://github.com/opentechinstitute/commotion-openwrt-theme
>
> A difficulty I've encountered in squeezing things onto finite flash
> chips, especially with recent integration of large packages like
> Serval, is that the Commotion theme is really rather large.  Indeed,
> 10x larger than the stock themes provided with OpenWRT:
>
> ben at computer:~/blahblah/openwrt/bin/ar71xx/packages$ ls -l *theme*
> -rw-r--r-- 1 ben ben  24940 May  5 16:25
> luci-theme-base_0.11.1-1_ar71xx.ipk
> -rw-r--r-- 1 ben ben  13649 May  5 16:25
> luci-theme-bootstrap_0.11.1-1_ar71xx.ipk
> -rw-r--r-- 1 ben ben 314206 May  5 16:25
> luci-theme-commotion_master-1_ar71xx.ipk
> -rw-r--r-- 1 ben ben   7951 May  5 16:25
> luci-theme-openwrt_0.11.1-1_ar71xx.ipk
>
> Jumping into the theme's internals, it looks like the lion's share
> (440kbytes, or 60% of overall ipk) comes from fronts:
>
> ben at computer:~/blahblah/openwrt/build_dir/target-mips_r2_uClibc-0.9.33.2/luci-theme-commotion-master/files/htdocs$
> du -s -h *
> 4.0K    advanced.png
> 32K     cascade.css
> 4.0K    commotion_tiny.png
> 4.0K    dashboard.css
> 4.0K    favicon.ico
> 440K    fonts
> 4.0K    help.png
> 4.0K    html5.js
> 4.0K    ie6.css
> 4.0K    ie7.css
> 92K     jquery.min.js
> 4.0K    quickstart.png
> 4.0K    respond.min.js
> 4.0K    selectnav.min.js
> 4.0K    status_message_smile.png
> 4.0K    theme.js
> 4.0K    warning_icon.png
> 24K     zepto.min.js
>
> Is the use of the Asap font critical to UX or HID design elements?
> Could the CSS be edited to instead use whatever built-in sens-serif
> font the user's browser supplies?
>
> Also, the repo for the Commotion theme isn't set up to accept issue
> submissions from the public.  May I be added to the access list to
> submit an issue (evtl followed up with pull request) about slimming
> this theme down in size?
>
> Thanks.
>
> --
> Ben West
> http://gowasabi.net
> ben at gowasabi.net <mailto:ben at gowasabi.net>
> 314-246-9434
>
>
> _______________________________________________
> Commotion-dev mailing list
> Commotion-dev at lists.chambana.net
> https://lists.chambana.net/mailman/listinfo/commotion-dev

--
Dan Staples

Open Technology Institute
https://commotionwireless.net
"
1344,Commotion-dev, How to file issue on Commotion-OpenWRT luci,"Mon, 06 May 2013 10:29:19 -0400",-0400,Benjamin Chodoroff,"On Mon 06 May 2013 10:13:19 AM EDT, Dan Staples wrote:
> I believe I just fixed the issue submission, so try again and see if
> that works. I think it makes a lot of sense to trim down the luci
> theme. Our OpenWRT images have gone up 2MB since the last release, so
> stripping out unnecessary items is a great idea. I was also surprised
> it had a minified jQuery, which is still quite large. And why would we
> need both jQuery and Zepto? I don't think we have any javascript in the
> theme or elsewhere that requires jQuery. Zepto should do just fine...

Zepto functionality degrades in ie9 and below, so i set it up to fall 
back to jQuery in that case - only one of the two libraries is served 
to the client

One could feasibly pull out jquery if it were possible to test the 
interface in ie9 and below without the zepto function calls.

I agree about ditching Asap. Also, many of the images could be removed 
or at least simplified and compiled into sprites.

-b
"
1345,Commotion-dev, How to file issue on Commotion-OpenWRT luci,"Mon, 6 May 2013 10:07:43 -0500",-0500,Ben West,"Here is my attempt at removing the Asap font and jquery.  I haven't yet had
a chance to test it on a node:
https://github.com/westbywest/commotion-openwrt-theme

This shrinks the ipk for the theme down to 32kbytes, so *10x reduction* in
size!

On Mon, May 6, 2013 at 9:29 AM, Benjamin Chodoroff <ben at theworkdept.com>wrote:

> On Mon 06 May 2013 10:13:19 AM EDT, Dan Staples wrote:
> > I believe I just fixed the issue submission, so try again and see if
> > that works. I think it makes a lot of sense to trim down the luci
> > theme. Our OpenWRT images have gone up 2MB since the last release, so
> > stripping out unnecessary items is a great idea. I was also surprised
> > it had a minified jQuery, which is still quite large. And why would we
> > need both jQuery and Zepto? I don't think we have any javascript in the
> > theme or elsewhere that requires jQuery. Zepto should do just fine...
>
> Zepto functionality degrades in ie9 and below, so i set it up to fall
> back to jQuery in that case - only one of the two libraries is served
> to the client
>
> One could feasibly pull out jquery if it were possible to test the
> interface in ie9 and below without the zepto function calls.
>
> I agree about ditching Asap. Also, many of the images could be removed
> or at least simplified and compiled into sprites.
>
> -b
> _______________________________________________
> Commotion-dev mailing list
> Commotion-dev at lists.chambana.net
> https://lists.chambana.net/mailman/listinfo/commotion-dev
"
1346,Commotion-dev, How to file issue on Commotion-OpenWRT luci,"Mon, 6 May 2013 11:33:44 -0500",-0500,Ben West,"For a follow-up, this trimmed-down theme seems to work on a node that I
just flashed with freshly compiled Commotion .  That is, there are letters,
colors, images, and functional buttons in the Quickstart UI.  Whoo-hoo!

However, I'm getting ""cgi process did not produce any response"" error at
the last step in Quickstart, whether select ""Manual Configuration"" or ""Just
Make it Work,"" but my guess is that is unrelated to the luci theme.

On Mon, May 6, 2013 at 10:07 AM, Ben West <me at benwest.name> wrote:

> Here is my attempt at removing the Asap font and jquery.  I haven't yet
> had a chance to test it on a node:
> https://github.com/westbywest/commotion-openwrt-theme
>
> This shrinks the ipk for the theme down to 32kbytes, so *10x reduction*in size!
>
>
> On Mon, May 6, 2013 at 9:29 AM, Benjamin Chodoroff <ben at theworkdept.com>wrote:
>
"
1347,Commotion-dev, How to file issue on Commotion-OpenWRT luci,"Mon, 06 May 2013 12:50:25 -0400",-0400,Andrew Reynolds,"The CGI process response is separate from the font issues. Seamus has a
new quickstart revision in the works that should fix the problem.

We have a new staff member here who's interested in testing the
slimmed-down theme package and evaluating the HIG recommendations, so
you will have some additional hands as soon as the HR onboarding wraps up.

-andrew

On 05/06/2013 12:33 PM, Ben West wrote:
> For a follow-up, this trimmed-down theme seems to work on a node that I
> just flashed with freshly compiled Commotion .  That is, there are letters,
> colors, images, and functional buttons in the Quickstart UI.  Whoo-hoo!
> 
> However, I'm getting ""cgi process did not produce any response"" error at
> the last step in Quickstart, whether select ""Manual Configuration"" or ""Just
> Make it Work,"" but my guess is that is unrelated to the luci theme.
> 
> On Mon, May 6, 2013 at 10:07 AM, Ben West <me at benwest.name> wrote:
> 
"
1348,Commotion-dev, BRCK,"Mon, 6 May 2013 12:37:37 -0500",-0500,Tim Yardley,"All,

I assume you have seen this already, but thought I would point it out just
in case.

http://www.kickstarter.com/projects/1776324009/brck-your-backup-generator-for-the-internet

Tim
"
1349,Commotion-dev, How to file issue on Commotion-OpenWRT luci,"Mon, 6 May 2013 12:53:44 -0500",-0500,Ben West,"I've submitted this as a pull request back to the original repo:

https://github.com/opentechinstitute/commotion-openwrt-theme/pull/3

On Mon, May 6, 2013 at 11:50 AM, Andrew Reynolds <
andrew at opentechinstitute.org> wrote:

> The CGI process response is separate from the font issues. Seamus has a
> new quickstart revision in the works that should fix the problem.
>
> We have a new staff member here who's interested in testing the
> slimmed-down theme package and evaluating the HIG recommendations, so
> you will have some additional hands as soon as the HR onboarding wraps up.
>
> -andrew
>
> On 05/06/2013 12:33 PM, Ben West wrote:
> > For a follow-up, this trimmed-down theme seems to work on a node that I
> > just flashed with freshly compiled Commotion .  That is, there are
> letters,
> > colors, images, and functional buttons in the Quickstart UI.  Whoo-hoo!
> >
> > However, I'm getting ""cgi process did not produce any response"" error at
> > the last step in Quickstart, whether select ""Manual Configuration"" or
> ""Just
> > Make it Work,"" but my guess is that is unrelated to the luci theme.
> >
> > On Mon, May 6, 2013 at 10:07 AM, Ben West <me at benwest.name> wrote:
> >
> "
1350,Commotion-dev, BRCK,"Mon, 06 May 2013 14:21:53 -0400",-0400,Hans-Christoph Steiner,"
Looks nice.  It would be great if it had multiple wifi radios so that it could
be an AP and a mesh node, or relay open wifi over a mesh, and things like that.

.hc

On 05/06/2013 01:37 PM, Tim Yardley wrote:
> All,
> 
> I assume you have seen this already, but thought I would point it out just
> in case.
> 
> http://www.kickstarter.com/projects/1776324009/brck-your-backup-generator-for-the-internet
> 
> Tim
> 
> 
> 
> _______________________________________________
> Commotion-dev mailing list
> Commotion-dev at lists.chambana.net
> https://lists.chambana.net/mailman/listinfo/commotion-dev
> 
"
1351,Commotion-dev, How to file issue on Commotion-OpenWRT luci,"Mon, 06 May 2013 14:43:10 -0400",-0400,Andrew Reynolds,"Perfect. Thanks!

On 05/06/2013 01:53 PM, Ben West wrote:
> I've submitted this as a pull request back to the original repo:
> 
> https://github.com/opentechinstitute/commotion-openwrt-theme/pull/3
> 
> On Mon, May 6, 2013 at 11:50 AM, Andrew Reynolds <
> andrew at opentechinstitute.org> wrote:
> 
"
1352,Commotion-dev, BRCK,"Mon, 6 May 2013 15:48:53 -0500",-0500,Ben West,"The caveat about multiple radios is that it's really not feasible to
enclose them, with internal patch antennae AND beefy TX power, in a
reasonably sized plastic housing for any price people are willing to pay.
The commercial grade multi-radio mesh APs usually rely on external antennae
and coax pigtails for this reason.  This requires expensive cable fittings,
coax cable, and external aerials, all of which drives the cost of such
devices to a multiple of what UBNT sells their single-radio units for.

UBNT's scheme for powering a Nanostation and a slave device off the same
POE supply does go a little bit towards making multi-radio ""supernodes""
more cost-effective, but one can only combine two devices reliably with
this method.

If devices like the BRCK could go through more extreme cost optimization
(aka 'Muntzing'), then maybe the cost per unit becomes cheap enough that
simply chaining together two BRCKs, each operating on a different band, is
a practical way to build supernodes.

On Mon, May 6, 2013 at 1:21 PM, Hans-Christoph Steiner <
hans at guardianproject.info> wrote:

>
> Looks nice.  It would be great if it had multiple wifi radios so that it
> could
> be an AP and a mesh node, or relay open wifi over a mesh, and things like
> that.
>
> .hc
>
> On 05/06/2013 01:37 PM, Tim Yardley wrote:
> > All,
> >
> > I assume you have seen this already, but thought I would point it out
> just
> > in case.
> >
> >
> http://www.kickstarter.com/projects/1776324009/brck-your-backup-generator-for-the-internet
> >
> > Tim
> >
> >
> >
> > _______________________________________________
> > Commotion-dev mailing list
> > Commotion-dev at lists.chambana.net
> > https://lists.chambana.net/mailman/listinfo/commotion-dev
> >
> _______________________________________________
> Commotion-dev mailing list
> Commotion-dev at lists.chambana.net
> https://lists.chambana.net/mailman/listinfo/commotion-dev
"
1353,Commotion-dev, BRCK,"Tue, 7 May 2013 07:10:46 +0930",+0930,Paul Gardner-Stephen,"Hello,

I have reached out to the BRCK guys to talk about potentially merging PCB
designs with our planned Mesh Extender, as all we need are some headers to
attach the UHF packet radio, and hopefully they are already using an
Atheros Wi-Fi chipset.

Paul.


On Tue, May 7, 2013 at 6:18 AM, Ben West <ben at gowasabi.net> wrote:

> The caveat about multiple radios is that it's really not feasible to
> enclose them, with internal patch antennae AND beefy TX power, in a
> reasonably sized plastic housing for any price people are willing to pay.
> The commercial grade multi-radio mesh APs usually rely on external antennae
> and coax pigtails for this reason.  This requires expensive cable fittings,
> coax cable, and external aerials, all of which drives the cost of such
> devices to a multiple of what UBNT sells their single-radio units for.
>
> UBNT's scheme for powering a Nanostation and a slave device off the same
> POE supply does go a little bit towards making multi-radio ""supernodes""
> more cost-effective, but one can only combine two devices reliably with
> this method.
>
> If devices like the BRCK could go through more extreme cost optimization
> (aka 'Muntzing'), then maybe the cost per unit becomes cheap enough that
> simply chaining together two BRCKs, each operating on a different band, is
> a practical way to build supernodes.
>
>
> On Mon, May 6, 2013 at 1:21 PM, Hans-Christoph Steiner <
> hans at guardianproject.info> wrote:
>
"
1354,Commotion-dev, How to file issue on Commotion-OpenWRT luci,"Tue, 7 May 2013 10:40:37 -0500",-0500,Ben West,"Hi All,

I've added a new issue to the Commotion-OpenWRT queue to track this feature
request.  My apologies for not remembering code.commotionwireless.net is
the preferred venue for filing issues, rather than github.

https://code.commotionwireless.net/issues/493

On Mon, May 6, 2013 at 11:33 AM, Ben West <ben at gowasabi.net> wrote:

> For a follow-up, this trimmed-down theme seems to work on a node that I
> just flashed with freshly compiled Commotion .  That is, there are letters,
> colors, images, and functional buttons in the Quickstart UI.  Whoo-hoo!
>
> However, I'm getting ""cgi process did not produce any response"" error at
> the last step in Quickstart, whether select ""Manual Configuration"" or ""Just
> Make it Work,"" but my guess is that is unrelated to the luci theme.
>
>
> On Mon, May 6, 2013 at 10:07 AM, Ben West <me at benwest.name> wrote:
>
"
1355,Commotion-dev, Commotion-splash ready to roll,"Tue, 07 May 2013 21:09:02 -0400",-0400,Dan Staples,"Some background: the LuCI-splash captive portal software is buggy, and
has been causing instability for the DR1 testing release of
Commotion-OpenWRT. So I've set about replacing it with Nodogsplash
(http://kokoro.ucsd.edu/nodogsplash/ [thanks for the suggestion, Ben!]),
and adding a LuCI configuration page for it and a custom Commotion
splash page. It's now ready for an initial component release and further
testing.

I've tested a brand new DR1 Picostation image with Commotion-splash, and
it works great. If anyone wants a demo (in person or virtual), I can
show you tomorrow or whenever. There was one issue that I saw today, in
which nodogsplash reports using enormous amounts of memory ('VSZ') in
top, in fact sometimes more than 100% of the reported available memory.
Yet, the node still appears to have around the same amount of free
memory as other DR1 nodes not running nodogsplash, and there have been
no stability issues. So it could be just a fluke. If it doesn't cause
problems, I'm not going to worry...

I transferred ownership of the commotion-splash repo to OTI, and
submitted pull requests for commotion-openwrt, luci-commotion, and
commotion-feed, if any other OTI folks can review those.

What's left is to come up with a solution for captive-portalling when no
internet access is available (since nodogsplash can't man-in-the-middles
HTTP requests when clients can't first resolve DNS queries). Josh King
and I talked today about the possibility of running a second instance of
dnsmasq to man-in-the-middle DNS requests for preauthenticated users.
Hopefully that will work.

Anyway, good riddance to buggy luci-splash!

Dan

-- 
Dan Staples

Open Technology Institute
https://commotionwireless.net

"
1356,Commotion-dev, Commotion-splash ready to roll,"Wed, 8 May 2013 10:13:58 -0500",-0500,Ben West,"Great work Dan!

W/r/t to memory usage, do note that most any bandwidth throttling
implementation, whether nodogsplash or the qos-scripts package, is
ultimately using buckets to maintain the speed control on clients'
sessions.  These buckets exist in memory, with faster bandwidth caps
effectively being larger buckets that empty faster.

So the effectiveness of the bandwidth throttling depends on the amount
available memory, with insufficient memory causing observed clients'
bandwidth to degrade.

Still, I've generally had good success operating nodogsplash and
coovachilli on nodes with 32MB RAM, and on average 2-3 simultaneous clients
each with a 3Mbit/s cap.

On Tue, May 7, 2013 at 8:09 PM, Dan Staples <
danstaples at opentechinstitute.org> wrote:

> Some background: the LuCI-splash captive portal software is buggy, and
> has been causing instability for the DR1 testing release of
> Commotion-OpenWRT. So I've set about replacing it with Nodogsplash
> (http://kokoro.ucsd.edu/nodogsplash/ [thanks for the suggestion, Ben!]),
> and adding a LuCI configuration page for it and a custom Commotion
> splash page. It's now ready for an initial component release and further
> testing.
>
> I've tested a brand new DR1 Picostation image with Commotion-splash, and
> it works great. If anyone wants a demo (in person or virtual), I can
> show you tomorrow or whenever. There was one issue that I saw today, in
> which nodogsplash reports using enormous amounts of memory ('VSZ') in
> top, in fact sometimes more than 100% of the reported available memory.
> Yet, the node still appears to have around the same amount of free
> memory as other DR1 nodes not running nodogsplash, and there have been
> no stability issues. So it could be just a fluke. If it doesn't cause
> problems, I'm not going to worry...
>
> I transferred ownership of the commotion-splash repo to OTI, and
> submitted pull requests for commotion-openwrt, luci-commotion, and
> commotion-feed, if any other OTI folks can review those.
>
> What's left is to come up with a solution for captive-portalling when no
> internet access is available (since nodogsplash can't man-in-the-middles
> HTTP requests when clients can't first resolve DNS queries). Josh King
> and I talked today about the possibility of running a second instance of
> dnsmasq to man-in-the-middle DNS requests for preauthenticated users.
> Hopefully that will work.
>
> Anyway, good riddance to buggy luci-splash!
>
> Dan
>
> --
> Dan Staples
>
> Open Technology Institute
> https://commotionwireless.net
>
> _______________________________________________
> Commotion-dev mailing list
> Commotion-dev at lists.chambana.net
> https://lists.chambana.net/mailman/listinfo/commotion-dev
"
1357,Commotion-dev, Commotion-splash ready to roll,"Wed, 08 May 2013 11:34:26 -0400",-0400,Dan Staples,"Glad to hear you've had success with nodogsplash. I'm actually not 
using nodogsplash's bandwidth throttling, since it seems that it 
doesn't work anymore on Attitude Adjustment. I'll do some more testing 
today to see if there are any stability issues.

On Wed 08 May 2013 11:13:58 AM EDT, Ben West wrote:
> Great work Dan!
>
> W/r/t to memory usage, do note that most any bandwidth throttling
> implementation, whether nodogsplash or the qos-scripts package, is
> ultimately using buckets to maintain the speed control on clients'
> sessions.  These buckets exist in memory, with faster bandwidth caps
> effectively being larger buckets that empty faster.
>
> So the effectiveness of the bandwidth throttling depends on the amount
> available memory, with insufficient memory causing observed clients'
> bandwidth to degrade.
>
> Still, I've generally had good success operating nodogsplash and
> coovachilli on nodes with 32MB RAM, and on average 2-3 simultaneous
> clients each with a 3Mbit/s cap.
>
> On Tue, May 7, 2013 at 8:09 PM, Dan Staples
> <danstaples at opentechinstitute.org
> <mailto:danstaples at opentechinstitute.org"
1358,Commotion-dev, Commotion-splash ready to roll,"Wed, 8 May 2013 12:48:51 -0400",-0400,Preston Rhea,"For field deployments we'll need to make sure nodogsplash can handle
much more than 3 simultaneous leases. Let's test this on Friday. How
many leases can we get on a node at once?

On Wed, May 8, 2013 at 11:34 AM, Dan Staples
<danstaples at opentechinstitute.org> wrote:
> Glad to hear you've had success with nodogsplash. I'm actually not
> using nodogsplash's bandwidth throttling, since it seems that it
> doesn't work anymore on Attitude Adjustment. I'll do some more testing
> today to see if there are any stability issues.
>
> On Wed 08 May 2013 11:13:58 AM EDT, Ben West wrote:
"
1359,Commotion-dev, Commotion-splash ready to roll,"Wed, 08 May 2013 13:55:00 -0400",-0400,Dan Staples,"We should connect as many devices as we can to test it out. Since we 
aren't using bandwidth limiting, it theoretically shouldn't provide 
much of a burden on the router to have a lot of clients.

On Wed 08 May 2013 12:48:51 PM EDT, Preston Rhea wrote:
> For field deployments we'll need to make sure nodogsplash can handle
> much more than 3 simultaneous leases. Let's test this on Friday. How
> many leases can we get on a node at once?
>
> On Wed, May 8, 2013 at 11:34 AM, Dan Staples
> <danstaples at opentechinstitute.org> wrote:
"
1360,Commotion-dev, Commotion-splash ready to roll,"Wed, 8 May 2013 14:05:54 -0400",-0400,Preston Rhea,"Just, I remember a bug with the splash page lease limits that we
reported for like eight months, and never got resolved until the team
had to make it work for AMC ;)

You don't know until you know you know!

On Wed, May 8, 2013 at 1:55 PM, Dan Staples
<danstaples at opentechinstitute.org> wrote:
> We should connect as many devices as we can to test it out. Since we
> aren't using bandwidth limiting, it theoretically shouldn't provide
> much of a burden on the router to have a lot of clients.
>
> On Wed 08 May 2013 12:48:51 PM EDT, Preston Rhea wrote:
"
1361,Commotion-dev, Commotion-splash ready to roll,"Wed, 8 May 2013 14:29:30 -0400",-0400,Georgia Bullen,"Preston - you're talking about how long the lease is for right? 1 hour vs
longer? not how many leases are given out?


On Wed, May 8, 2013 at 2:05 PM, Preston Rhea <
prestonrhea at opentechinstitute.org> wrote:

> Just, I remember a bug with the splash page lease limits that we
> reported for like eight months, and never got resolved until the team
> had to make it work for AMC ;)
>
> You don't know until you know you know!
>
> On Wed, May 8, 2013 at 1:55 PM, Dan Staples
> <danstaples at opentechinstitute.org> wrote:
> > We should connect as many devices as we can to test it out. Since we
> > aren't using bandwidth limiting, it theoretically shouldn't provide
> > much of a burden on the router to have a lot of clients.
> >
> > On Wed 08 May 2013 12:48:51 PM EDT, Preston Rhea wrote:
> "
1362,Commotion-dev, Commotion-splash ready to roll,"Wed, 8 May 2013 14:38:35 -0400",-0400,Preston Rhea,"No, how many leases can be given out.
On May 8, 2013 2:29 PM, ""Georgia Bullen"" <georgia at opentechinstitute.org>
wrote:

> Preston - you're talking about how long the lease is for right? 1 hour vs
> longer? not how many leases are given out?
>
>
> On Wed, May 8, 2013 at 2:05 PM, Preston Rhea <
> prestonrhea at opentechinstitute.org> wrote:
>
"
1363,Commotion-dev, Commotion-splash ready to roll,"Wed, 8 May 2013 14:51:32 -0400",-0400,Outback Dingo,"back in the day and as the maintainer of nodogsplash openwrt package
Ive had up to 50 simultaneous users connected, also note a new modified
nodogsplash will be being released after testing, see
http://ml.ninux.org/mailman/listinfo/nodogsplash
and this internal email thread
Hi,

I want to give a small heads up about the updates I have merged from the
wifidog repository.
It still needs testing. Nodogsplash should work on 64bit systems now.

https://github.com/mwarning/nodogsplash/commits/master




On Wed, May 8, 2013 at 2:38 PM, Preston Rhea <
prestonrhea at opentechinstitute.org> wrote:

> No, how many leases can be given out.
> On May 8, 2013 2:29 PM, ""Georgia Bullen"" <georgia at opentechinstitute.org>
> wrote:
>
"
1364,Commotion-dev, Commotion-splash ready to roll,"Wed, 08 May 2013 14:55:01 -0400",-0400,Dan Staples,"Thanks for the heads up...I'm glad nodogsplash is under active 
development.  Have you ever seen the issue I was describing where 
nodogsplash reports huge memory usage in top?  I have only tried it 
under Attitude Adjustment OpenWRT.

On Wed 08 May 2013 02:51:32 PM EDT, Outback Dingo wrote:
> back in the day and as the maintainer of nodogsplash openwrt package
> Ive had up to 50 simultaneous users connected, also note a new modified
> nodogsplash will be being released after testing,
> see http://ml.ninux.org/mailman/listinfo/nodogsplash
> and this internal email thread
> Hi,
>
> I want to give a small heads up about the updates I have merged from
> the wifidog repository.
> It still needs testing. Nodogsplash should work on 64bit systems now.
>
> https://github.com/mwarning/nodogsplash/commits/master
>
>
>
>
> On Wed, May 8, 2013 at 2:38 PM, Preston Rhea
> <prestonrhea at opentechinstitute.org
> <mailto:prestonrhea at opentechinstitute.org"
1365,Commotion-dev, Commotion-splash ready to roll,"Wed, 8 May 2013 15:00:20 -0400",-0400,Jonathan Baldwin,"I used nodogsplash + OpenWRT in the Red Hook WiFi network before we
switched to Commotion. It sustained 30+ users on a consistent basis for a
few months on end.


On Wed, May 8, 2013 at 2:55 PM, Dan Staples <
danstaples at opentechinstitute.org> wrote:

> Thanks for the heads up...I'm glad nodogsplash is under active
> development.  Have you ever seen the issue I was describing where
> nodogsplash reports huge memory usage in top?  I have only tried it
> under Attitude Adjustment OpenWRT.
>
> On Wed 08 May 2013 02:51:32 PM EDT, Outback Dingo wrote:
> > back in the day and as the maintainer of nodogsplash openwrt package
> > Ive had up to 50 simultaneous users connected, also note a new modified
> > nodogsplash will be being released after testing,
> > see http://ml.ninux.org/mailman/listinfo/nodogsplash
> > and this internal email thread
> > Hi,
> >
> > I want to give a small heads up about the updates I have merged from
> > the wifidog repository.
> > It still needs testing. Nodogsplash should work on 64bit systems now.
> >
> > https://github.com/mwarning/nodogsplash/commits/master
> >
> >
> >
> >
> > On Wed, May 8, 2013 at 2:38 PM, Preston Rhea
> > <prestonrhea at opentechinstitute.org
> > <mailto:prestonrhea at opentechinstitute.org"
1366,Commotion-dev, Commotion-splash ready to roll,"Wed, 8 May 2013 14:54:42 -0500",-0500,Ben West,"Hi All,

This except from a recent post to the OpenWRT-users list describes the
current issue with nodogsplash not supporting bandwidth throttling any
more.  (Sorry, I had only last tested NDS with Backfire).

""I have a captive portal using the nodogsplash package to share
3mbps/200kbps with my neighbours using the nodogsplash capabilities to
limit the bandwidth usage, but the bandwidth limitation feature depend on
the package iptables-mod-imq which it is no longer available in attitude
ajustment. I think it has been replaced by IFB.

""As I have some spare time now I was planning to upgrade my router to
attitude ajustment just to take a look at the new release but as the
package iptables-mod-imq is no longer available I suppose I can?t limit the
bandwidth usage in the captive portal if I use nodogsplash.

""does anyone knows if there is any way to configure a captive portal in
aptitude ajustment with download/upload bandwidth limitation alternative to
nodogsplash? or any way to get iptables-mod-imq working in attitude
ajustment so I can continue using nodogsplash? or any way to make
nodogplash to use IFB?""

I can confirm that coovachilli still does bandwidth throttling fine in
Attitude Adjustment.

The git repo that Outback is quoting does indeed contain a refreshed copy
of NDS (hurray!), but I'm unsure yet if the changes pushed to that repo
update the portal to use IFB instead of IMQ for throttling.

https://github.com/mwarning/nodogsplash/commits/master

On Wed, May 8, 2013 at 1:55 PM, Dan Staples <
danstaples at opentechinstitute.org> wrote:

> Thanks for the heads up...I'm glad nodogsplash is under active
> development.  Have you ever seen the issue I was describing where
> nodogsplash reports huge memory usage in top?  I have only tried it
> under Attitude Adjustment OpenWRT.
>
> On Wed 08 May 2013 02:51:32 PM EDT, Outback Dingo wrote:
> > back in the day and as the maintainer of nodogsplash openwrt package
> > Ive had up to 50 simultaneous users connected, also note a new modified
> > nodogsplash will be being released after testing,
> > see http://ml.ninux.org/mailman/listinfo/nodogsplash
> > and this internal email thread
> > Hi,
> >
> > I want to give a small heads up about the updates I have merged from
> > the wifidog repository.
> > It still needs testing. Nodogsplash should work on 64bit systems now.
> >
> > https://github.com/mwarning/nodogsplash/commits/master
> >
> >
> >
> >
> > On Wed, May 8, 2013 at 2:38 PM, Preston Rhea
> > <prestonrhea at opentechinstitute.org
> > <mailto:prestonrhea at opentechinstitute.org"
1367,Commotion-dev, OpenWRT trunk r33202 does PSK-encrypted adhoc,"Thu, 9 May 2013 14:07:17 -0500",-0500,Ben West,"Bumping this thread.  Below is more info about the original patch that
appeared to get ball rolling on IBSS-RSN encryption.  There is also contact
info for Antonio Quartulli, who seems to be a good person to ask about
issues with nodes not reliably authenticating themselves upon joining an
encrypted mesh.

https://lists.openwrt.org/pipermail/openwrt-devel/2012-January/013509.html

*Antonio Quartulli* ordex at autistici.org
<openwrt-devel%40lists.openwrt.org?Subject=Re%3A%20%5BOpenWrt-Devel%5D%20%5BPATCH%5D%20mac80211%3A%20provide%20IBSS%20RSN%20support%20for%20ath5k&In-Reply-To=%3C1326711999-20522-1-git-send-email-ordex%40autistici.org%3E"
1368,Commotion-dev, Slides from recent presentation on the wifi,"Thu, 9 May 2013 22:09:45 -0500",-0500,Ben West,"For some background ...

   - Burning Man has deployed wifi across the Playa for several years now.
   Cultural objections about why they would do this have long since been set
   aside.  Burning Man has wifi.
   - It has been repeatedly asked would they ever deploy a mesh (I asked on
   their listserv a few years back myself), and the BM wifi working group
   repeatedly says no they won't.

Nevertheless, they are deploying lots of UBNT 5.8GHz gear, and the slides
PDF referenced below about Burning Man's temporary wireless infrastructure
are an interesting read.

"
1369,Commotion-dev, Slides from recent presentation on the wifi,"Fri, 10 May 2013 05:39:36 -0500",-0500,Ben West,"Likewise, below is information about the non-commercial 2G phone service
also deployed at Burning Man.  Albeit not with OpenBTS.

"
1370,Commotion-dev, Slides from recent presentation on the wifi,"Fri, 10 May 2013 15:44:23 +0100",+0100,Alexander Chemeris,"AFAIK, it's OpenBTS, as that's what David/RangeNetworks is developing.
Do you have different information?

On Fri, May 10, 2013 at 11:39 AM, Ben West <ben at gowasabi.net> wrote:
> Likewise, below is information about the non-commercial 2G phone service
> also deployed at Burning Man.  Albeit not with OpenBTS.
>
> "
1371,Commotion-dev, Slides from recent presentation on the wifi,"Fri, 10 May 2013 09:48:22 -0500",-0500,Ben West,"Hi Alex,

Thanks for the clarification.  I had assumed incorrectly it was not
OpenBTS.  (Glad to read that it is!)

On Fri, May 10, 2013 at 9:44 AM, Alexander Chemeris <
alexander.chemeris at gmail.com> wrote:

> AFAIK, it's OpenBTS, as that's what David/RangeNetworks is developing.
> Do you have different information?
>
> On Fri, May 10, 2013 at 11:39 AM, Ben West <ben at gowasabi.net> wrote:
> > Likewise, below is information about the non-commercial 2G phone service
> > also deployed at Burning Man.  Albeit not with OpenBTS.
> >
> > "
1372,Commotion-dev, Slides from recent presentation on the wifi,"Fri, 10 May 2013 15:56:20 +0100",+0100,Alexander Chemeris,"Hi Ben,

I heard it was crashing repeatedly last year and didn't improve much
since than, even in their proprietary version. So I would be glad if
it was an OsmoBTS. At least it's stable. I've changed my preference to
Osmocom projects for a lot of reasons. I'll tell more at the meeting
in DC on Mon.

On Fri, May 10, 2013 at 3:48 PM, Ben West <ben at gowasabi.net> wrote:
> Hi Alex,
>
> Thanks for the clarification.  I had assumed incorrectly it was not OpenBTS.
> (Glad to read that it is!)
>
>
> On Fri, May 10, 2013 at 9:44 AM, Alexander Chemeris
> <alexander.chemeris at gmail.com> wrote:
"
1373,Commotion-dev, Preventing Commotion nodes from handing out DHCP?,"Tue, 14 May 2013 16:52:49 -0400",-0400,Preston Rhea,"Hello dev team,

Tomorrow, we are going up the Visitation Rectory steeple in Red Hook
to install a co-ordinated distribution layer and Commotion layer
co-location site. BKFiber will install some stock 5GHz and 900MHz
equipment at the top of the steeple, we'll put two Commotion
NanoStations in the middle of the steeple, and all will be connected
by a Ubiquiti ToughSwitch.

The issue: we want the Commotion nodes to not interfere with DHCP
leases. Those should all be left up to the BKfiber infrastructure - we
need to ensure that the Commotion nodes can only receive, never give
out, DHCP leases. This is in line with our multi-layer approach, with
a Commotion community-managed layer hanging off of a
professionally-managed distribution layer. So even if the power goes
out, this should always be the case when the power comes back on.

The question: What exactly should I do to make this happen on the
Commotion nodes? If you can email a precise solution, it will A: help
me since I will be in the steeple all day, and B: help us turn it into
nice documentation for the future.

Thanks!

Preston


--
Preston Rhea
Program Associate, Open Technology Institute
New America Foundation
+1-202-570-9770
Twitter: @prestonrhea

"
1374,Commotion-dev, OpenWRT trunk r33202 does PSK-encrypted adhoc,"Tue, 14 May 2013 17:07:02 -0400",-0400,Will Hawkins,"Thanks for bumping this, Ben. I will take a deeper look later this week.

Will

On 05/09/2013 03:07 PM, Ben West wrote:
> Bumping this thread.  Below is more info about the original patch that
> appeared to get ball rolling on IBSS-RSN encryption.  There is also
> contact info for Antonio Quartulli, who seems to be a good person to ask
> about issues with nodes not reliably authenticating themselves upon
> joining an encrypted mesh.
>
> https://lists.openwrt.org/pipermail/openwrt-devel/2012-January/013509.html
>
> *Antonio Quartulli* ordex at autistici.org
> <mailto:openwrt-devel%40lists.openwrt.org?Subject=Re%3A%20%5BOpenWrt-Devel%5D%20%5BPATCH%5D%20mac80211%3A%20provide%20IBSS%20RSN%20support%20for%20ath5k&In-Reply-To=%3C1326711999-20522-1-git-send-email-ordex%40autistici.org%3E>
>
> On Thu, Aug 23, 2012 at 6:04 PM, Ben West <ben at gowasabi.net
> <mailto:ben at gowasabi.net"
1375,Commotion-dev, Preventing Commotion nodes from handing out,"Wed, 15 May 2013 07:07:22 +0930",+0930,Paul Gardner-Stephen,"Hello,

To clarify my understanding, is the following understanding correct:

1. You want to disable issuing of DHCP leases by the Commotion kit when the
BKFiber stuff is connected. This is pretty clear.

2. When the power is off, only the Commotion kit is running.

3. When only the Commotion kit is running, you want it to hold onto DHCP
leases for long enough that service is maintained until the power comes
back on.

?

Or do you want to offer DHCP from the Commotion kit, but only when the
power is off?
Only from the same ranges as the BKFiber kit?
Only from ranges that don't conflict with the BKFiber kit?
With very short leases so that when the power comes back on you can stop
offering them, and they will expire within a few minutes, so that normal
service can resume?
You want the Commotion kit to hoard BKFiber DHCP-issued addresses for
distribution on the local network when the power goes down?

Paul.


On Wed, May 15, 2013 at 6:22 AM, Preston Rhea <
prestonrhea at opentechinstitute.org> wrote:

> Hello dev team,
>
> Tomorrow, we are going up the Visitation Rectory steeple in Red Hook
> to install a co-ordinated distribution layer and Commotion layer
> co-location site. BKFiber will install some stock 5GHz and 900MHz
> equipment at the top of the steeple, we'll put two Commotion
> NanoStations in the middle of the steeple, and all will be connected
> by a Ubiquiti ToughSwitch.
>
> The issue: we want the Commotion nodes to not interfere with DHCP
> leases. Those should all be left up to the BKfiber infrastructure - we
> need to ensure that the Commotion nodes can only receive, never give
> out, DHCP leases. This is in line with our multi-layer approach, with
> a Commotion community-managed layer hanging off of a
> professionally-managed distribution layer. So even if the power goes
> out, this should always be the case when the power comes back on.
>
> The question: What exactly should I do to make this happen on the
> Commotion nodes? If you can email a precise solution, it will A: help
> me since I will be in the steeple all day, and B: help us turn it into
> nice documentation for the future.
>
> Thanks!
>
> Preston
>
>
> --
> Preston Rhea
> Program Associate, Open Technology Institute
> New America Foundation
> +1-202-570-9770
> Twitter: @prestonrhea
>
> _______________________________________________
> Commotion-dev mailing list
> Commotion-dev at lists.chambana.net
> https://lists.chambana.net/mailman/listinfo/commotion-dev
>
>
"
1376,Commotion-dev, Preventing Commotion nodes from handing out,"Tue, 14 May 2013 17:43:03 -0400",-0400,Dan Staples,"Hi Preston,

To prevent these nodes from ever giving out DHCP leases, forever and for
all time, it should be enough to remove DNSMasq (""opkg remove dnsmasq""),
since that is the program that hands out DHCP leases. But then it can
still request/receive DHCP leases. Best of luck tomorrow!

Dan

On 05/14/2013 04:52 PM, Preston Rhea wrote:
> Hello dev team,
>
> Tomorrow, we are going up the Visitation Rectory steeple in Red Hook
> to install a co-ordinated distribution layer and Commotion layer
> co-location site. BKFiber will install some stock 5GHz and 900MHz
> equipment at the top of the steeple, we'll put two Commotion
> NanoStations in the middle of the steeple, and all will be connected
> by a Ubiquiti ToughSwitch.
>
> The issue: we want the Commotion nodes to not interfere with DHCP
> leases. Those should all be left up to the BKfiber infrastructure - we
> need to ensure that the Commotion nodes can only receive, never give
> out, DHCP leases. This is in line with our multi-layer approach, with
> a Commotion community-managed layer hanging off of a
> professionally-managed distribution layer. So even if the power goes
> out, this should always be the case when the power comes back on.
>
> The question: What exactly should I do to make this happen on the
> Commotion nodes? If you can email a precise solution, it will A: help
> me since I will be in the steeple all day, and B: help us turn it into
> nice documentation for the future.
>
> Thanks!
>
> Preston
>
>
> --
> Preston Rhea
> Program Associate, Open Technology Institute
> New America Foundation
> +1-202-570-9770
> Twitter: @prestonrhea
>
> _______________________________________________
> Commotion-dev mailing list
> Commotion-dev at lists.chambana.net
> https://lists.chambana.net/mailman/listinfo/commotion-dev
"
1377,Commotion-dev, Preventing Commotion nodes from handing out,"Tue, 14 May 2013 19:32:26 -0400",-0400,Preston Rhea,"@Dan: that may work, but it's not really what we're looking for. Isn't
there a way to do this with a config change, instead of removing a
package?

@Paul: (1) is correct, (2) is not right in this particular case since
they will be sharing a common power distribution from the ToughSwitch.
Only at this site (for now) are we worried about this, so (3) actually
if the distribution node at this site goes down, ideally you would be
able to hop through these Commotion nodes to _another_ gateway that
has a Commotion co-location in the neighborhood.

Name of the game is to not conflict with the BKFiber kit, and prevent
routing loops from occurring.

On Tue, May 14, 2013 at 5:43 PM, Dan Staples
<danstaples at opentechinstitute.org> wrote:
> Hi Preston,
>
> To prevent these nodes from ever giving out DHCP leases, forever and for
> all time, it should be enough to remove DNSMasq (""opkg remove dnsmasq""),
> since that is the program that hands out DHCP leases. But then it can
> still request/receive DHCP leases. Best of luck tomorrow!
>
> Dan
>
> On 05/14/2013 04:52 PM, Preston Rhea wrote:
"
1378,Commotion-dev, Preventing Commotion nodes from handing out,"Tue, 14 May 2013 19:23:05 -0500",-0500,Ben West,"Wow, that steeple looks pretty tall on Google Maps.  Cool!  Besides the
Commotion wiki<https://code.commotionwireless.net/projects/commotion-manual/wiki/Step_by_Step_Guide>
pages<https://code.commotionwireless.net/projects/commotion-manual/wiki/Grounding_and_Lightning_Protection>
that<https://code.commotionwireless.net/projects/commotion-manual/wiki/Rooftop_Mounting_Guide>
already<https://code.commotionwireless.net/projects/commotion-manual/wiki/Installation_Safety_Checklist>cover
this, will you be using
*shielded* cat5 cable with cat5 surge arrestors?  I'm guessing that steeple
is the tallest structure for at least a few blocks, so it will be getting
visits from lightening.  The steeple should have rods up top and thick
ground cable to divert direct strikes, but you'll still want shielded cable
to prevent induced surge from fusing the ethernet chips.  I did just
recently retrieve a Nanostation M5 from a 3rd floor roof whose primary LAN
port burned out, presumably since I installed it using unshielded cable a
couple years ago.

Also, removing dnsmasq does indeed remove exactly that which would issue
DHCP leases.  However, do you know that the 10.x.x.x, 101.x.x.x, 102.x.x.x,
etc subnets which the Commotion nodes must route will be the same for all
use cases?  That is, the NAT thru the nodes generally assumes traffic
entering each interface to have a source IP within one of the subnets
configured, independent of who is giving out DHCP leases.

P.S. BKFiber looks pretty cool as a local WISP.  Is anyone on this list in
good rapport with them?  Discussions on other OTI lists about meshy
business models piques my curiosity w/r/t/ what BKFiber is up to.

On Tue, May 14, 2013 at 6:32 PM, Preston Rhea <
prestonrhea at opentechinstitute.org> wrote:

> @Dan: that may work, but it's not really what we're looking for. Isn't
> there a way to do this with a config change, instead of removing a
> package?
>
> @Paul: (1) is correct, (2) is not right in this particular case since
> they will be sharing a common power distribution from the ToughSwitch.
> Only at this site (for now) are we worried about this, so (3) actually
> if the distribution node at this site goes down, ideally you would be
> able to hop through these Commotion nodes to _another_ gateway that
> has a Commotion co-location in the neighborhood.
>
> Name of the game is to not conflict with the BKFiber kit, and prevent
> routing loops from occurring.
>
> On Tue, May 14, 2013 at 5:43 PM, Dan Staples
> <danstaples at opentechinstitute.org> wrote:
> > Hi Preston,
> >
> > To prevent these nodes from ever giving out DHCP leases, forever and for
> > all time, it should be enough to remove DNSMasq (""opkg remove dnsmasq""),
> > since that is the program that hands out DHCP leases. But then it can
> > still request/receive DHCP leases. Best of luck tomorrow!
> >
> > Dan
> >
> > On 05/14/2013 04:52 PM, Preston Rhea wrote:
> "
1379,Commotion-dev, Preventing Commotion nodes from handing out,"Tue, 14 May 2013 21:37:05 -0400",-0400,Josh King,"Hi Preston,

I do not have a node in front of me at the moment so I can't tell for
certain (I am referencing my home router, which is running a different
version of OpenWRT), but you should be able to set this fairly easily
through the LuCI admin interface. In the admin interface, just go to
Network->Interfaces->Plug. There should be a dropdown menu for
""Protocol."" Switch it to ""DHCP Client,"" and click ""Switch Protocol.""
This will remove the ethernet interface from Commotion's configuration,
and instead it will just be a normal DHCP interface. Is the node
intended to advertise that interface as a gateway?

On 05/14/2013 04:52 PM, Preston Rhea wrote:
> Hello dev team,
> 
> Tomorrow, we are going up the Visitation Rectory steeple in Red Hook
> to install a co-ordinated distribution layer and Commotion layer
> co-location site. BKFiber will install some stock 5GHz and 900MHz
> equipment at the top of the steeple, we'll put two Commotion
> NanoStations in the middle of the steeple, and all will be connected
> by a Ubiquiti ToughSwitch.
> 
> The issue: we want the Commotion nodes to not interfere with DHCP
> leases. Those should all be left up to the BKfiber infrastructure - we
> need to ensure that the Commotion nodes can only receive, never give
> out, DHCP leases. This is in line with our multi-layer approach, with
> a Commotion community-managed layer hanging off of a
> professionally-managed distribution layer. So even if the power goes
> out, this should always be the case when the power comes back on.
> 
> The question: What exactly should I do to make this happen on the
> Commotion nodes? If you can email a precise solution, it will A: help
> me since I will be in the steeple all day, and B: help us turn it into
> nice documentation for the future.
> 
> Thanks!
> 
> Preston
> 
> 
> --
> Preston Rhea
> Program Associate, Open Technology Institute
> New America Foundation
> +1-202-570-9770
> Twitter: @prestonrhea
> 
> _______________________________________________
> Commotion-dev mailing list
> Commotion-dev at lists.chambana.net
> https://lists.chambana.net/mailman/listinfo/commotion-dev
> 

"
1380,Commotion-dev,,"Wed, 15 May 2013 00:36:00 -0400",-0400,Will Hawkins,"You all beat me to it!

I think that Josh made an excellent, easy suggestion. In fact, it is so good and obvious that my planned response now looks silly. 

Since Josh's suggestion will do the trick, feel free to stop reading. But, if you're interested here's how I was going to respond:

I pulled up the function that sets the interface information for a Commotion Plug type interface. That's in /lib/network/commotion.sh. You can view the file through the web here: https://github.com/opentechinstitute/commotion-openwrt/blob/master/commotionfeed/commotionbase/files/lib/network/commotion.sh 

Check down to line 519. We need to change the parameters to udhcpc (stored in the variable $dhcpopts). The existing options (-q -n) tell udhcpc to attempt to obtain a dhcp lease and a) exit immediately after a lease is obtained and b) exit and return failure if a lease cannot be obtained. In your case, the desired behavior is be for udhcpc to continuously ask for a lease until it gets one and then continue to refresh that lease periodically. To do that we just let udhcpc do its default behavior by removing those options entirely. Line 519 becomes
local dhcpopts=""""

That's not enough, though. We need to also tell remainder of the function to execute the code for case 0 (which means that udhcpc successfully got a lease) no matter what. The ""easiest"" way to do that would be to change line 530 to look like:
case ""0"" in

With these changes, the behavior would be 

1) plug interface comes up,
2) udhcpc asks for an IP address and 
3) the plug interface never acts as a dhcp server. 

In essence, this is exactly what Josh's suggestion accomplishes. I will defer to Josh on the implications for his suggestion w.r.t. to olsrd. There may be some special ""stuff"" that has to happen for networks on the plug interfaces to get into hna for olsrd. 

I hope that this was helpful and not rambling. Please keep us posted tomorrow if you need help. We'll be around on IRC, etc.

Will


On Tuesday, May 14, 2013 21:37 EDT, Josh King <jking at chambana.net> wrote: 
 
> Hi Preston,
> 
> I do not have a node in front of me at the moment so I can't tell for
> certain (I am referencing my home router, which is running a different
> version of OpenWRT), but you should be able to set this fairly easily
> through the LuCI admin interface. In the admin interface, just go to
> Network->Interfaces->Plug. There should be a dropdown menu for
> ""Protocol."" Switch it to ""DHCP Client,"" and click ""Switch Protocol.""
> This will remove the ethernet interface from Commotion's configuration,
> and instead it will just be a normal DHCP interface. Is the node
> intended to advertise that interface as a gateway?
> 
> On 05/14/2013 04:52 PM, Preston Rhea wrote:
> > Hello dev team,
> > 
> > Tomorrow, we are going up the Visitation Rectory steeple in Red Hook
> > to install a co-ordinated distribution layer and Commotion layer
> > co-location site. BKFiber will install some stock 5GHz and 900MHz
> > equipment at the top of the steeple, we'll put two Commotion
> > NanoStations in the middle of the steeple, and all will be connected
> > by a Ubiquiti ToughSwitch.
> > 
> > The issue: we want the Commotion nodes to not interfere with DHCP
> > leases. Those should all be left up to the BKfiber infrastructure - we
> > need to ensure that the Commotion nodes can only receive, never give
> > out, DHCP leases. This is in line with our multi-layer approach, with
> > a Commotion community-managed layer hanging off of a
> > professionally-managed distribution layer. So even if the power goes
> > out, this should always be the case when the power comes back on.
> > 
> > The question: What exactly should I do to make this happen on the
> > Commotion nodes? If you can email a precise solution, it will A: help
> > me since I will be in the steeple all day, and B: help us turn it into
> > nice documentation for the future.
> > 
> > Thanks!
> > 
> > Preston
> > 
> > 
> > --
> > Preston Rhea
> > Program Associate, Open Technology Institute
> > New America Foundation
> > +1-202-570-9770
> > Twitter: @prestonrhea
> > 
> > _______________________________________________
> > Commotion-dev mailing list
> > Commotion-dev at lists.chambana.net
> > https://lists.chambana.net/mailman/listinfo/commotion-dev
> > 
> 
 
 
 
 


"
1381,Commotion-dev,,"Wed, 15 May 2013 01:01:00 -0400",-0400,Will Hawkins,"Possible update, see below:
 
On Wednesday, May 15, 2013 00:36 EDT, ""Will Hawkins"" <hawkinsw at opentechinstitute.org> wrote: 
 
> You all beat me to it!
> 
> I think that Josh made an excellent, easy suggestion. In fact, it is so good and obvious that my planned response now looks silly. 
> 
> Since Josh's suggestion will do the trick, feel free to stop reading. But, if you're interested here's how I was going to respond:
> 
> I pulled up the function that sets the interface information for a Commotion Plug type interface. That's in /lib/network/commotion.sh. You can view the file through the web here: https://github.com/opentechinstitute/commotion-openwrt/blob/master/commotionfeed/commotionbase/files/lib/network/commotion.sh 
> 
> Check down to line 519. We need to change the parameters to udhcpc (stored in the variable $dhcpopts). The existing options (-q -n) tell udhcpc to attempt to obtain a dhcp lease and a) exit immediately after a lease is obtained and b) exit and return failure if a lease cannot be obtained. In your case, the desired behavior is be for udhcpc to continuously ask for a lease until it gets one and then continue to refresh that lease periodically. To do that we just let udhcpc do its default behavior by removing those options entirely. Line 519 becomes
> local dhcpopts=""""
> 

I just realized that udhcpc might not ever go into the background without using the -b option. The -b option means ""Background if lease is not immediately obtained"". This is definitely what we want, but I can't say for sure whether the option is necessary or not. If udhcpc never goes into the background, the node will sit there waiting to complete its boot process until it gets a lease. A problem indeed.

And, just to be clear,

a) Josh is the expert,
b) My suggestions are untested, 
c) I'm trying to be helpful, and
d) Josh is the expert. :-)

Will

> That's not enough, though. We need to also tell remainder of the function to execute the code for case 0 (which means that udhcpc successfully got a lease) no matter what. The ""easiest"" way to do that would be to change line 530 to look like:
> case ""0"" in
> 
> With these changes, the behavior would be 
> 
> 1) plug interface comes up,
> 2) udhcpc asks for an IP address and 
> 3) the plug interface never acts as a dhcp server. 
> 
> In essence, this is exactly what Josh's suggestion accomplishes. I will defer to Josh on the implications for his suggestion w.r.t. to olsrd. There may be some special ""stuff"" that has to happen for networks on the plug interfaces to get into hna for olsrd. 
> 
> I hope that this was helpful and not rambling. Please keep us posted tomorrow if you need help. We'll be around on IRC, etc.
> 
> Will
> 
> 
> On Tuesday, May 14, 2013 21:37 EDT, Josh King <jking at chambana.net> wrote: 
>  
> > Hi Preston,
> > 
> > I do not have a node in front of me at the moment so I can't tell for
> > certain (I am referencing my home router, which is running a different
> > version of OpenWRT), but you should be able to set this fairly easily
> > through the LuCI admin interface. In the admin interface, just go to
> > Network->Interfaces->Plug. There should be a dropdown menu for
> > ""Protocol."" Switch it to ""DHCP Client,"" and click ""Switch Protocol.""
> > This will remove the ethernet interface from Commotion's configuration,
> > and instead it will just be a normal DHCP interface. Is the node
> > intended to advertise that interface as a gateway?
> > 
> > On 05/14/2013 04:52 PM, Preston Rhea wrote:
> > > Hello dev team,
> > > 
> > > Tomorrow, we are going up the Visitation Rectory steeple in Red Hook
> > > to install a co-ordinated distribution layer and Commotion layer
> > > co-location site. BKFiber will install some stock 5GHz and 900MHz
> > > equipment at the top of the steeple, we'll put two Commotion
> > > NanoStations in the middle of the steeple, and all will be connected
> > > by a Ubiquiti ToughSwitch.
> > > 
> > > The issue: we want the Commotion nodes to not interfere with DHCP
> > > leases. Those should all be left up to the BKfiber infrastructure - we
> > > need to ensure that the Commotion nodes can only receive, never give
> > > out, DHCP leases. This is in line with our multi-layer approach, with
> > > a Commotion community-managed layer hanging off of a
> > > professionally-managed distribution layer. So even if the power goes
> > > out, this should always be the case when the power comes back on.
> > > 
> > > The question: What exactly should I do to make this happen on the
> > > Commotion nodes? If you can email a precise solution, it will A: help
> > > me since I will be in the steeple all day, and B: help us turn it into
> > > nice documentation for the future.
> > > 
> > > Thanks!
> > > 
> > > Preston
> > > 
> > > 
> > > --
> > > Preston Rhea
> > > Program Associate, Open Technology Institute
> > > New America Foundation
> > > +1-202-570-9770
> > > Twitter: @prestonrhea
> > > 
> > > _______________________________________________
> > > Commotion-dev mailing list
> > > Commotion-dev at lists.chambana.net
> > > https://lists.chambana.net/mailman/listinfo/commotion-dev
> > > 
> > 
>  
>  
>  
>  
> 
> 
> _______________________________________________
> Commotion-dev mailing list
> Commotion-dev at lists.chambana.net
> https://lists.chambana.net/mailman/listinfo/commotion-dev
> 
 
 
 
 


"
1382,Commotion-dev, Preventing Commotion nodes from handing out,"Wed, 15 May 2013 11:10:31 -0400",-0400,Preston Rhea,"I went with Josh's recommendation, but once I clicked save and apply, the
system hung on ""waiting for router to update."" I tried reopening the window
and got no connection. I power cycled the router and it won't even let me
ping the router.

By implementing dhcp client only, did I make it impossible to interact with
the device via Ethernet? Or did I just brick the router?
On May 15, 2013 1:03 AM, ""Will Hawkins"" <hawkinsw at opentechinstitute.org>
wrote:

> Possible update, see below:
>
> On Wednesday, May 15, 2013 00:36 EDT, ""Will Hawkins"" <
> hawkinsw at opentechinstitute.org> wrote:
>
> > You all beat me to it!
> >
> > I think that Josh made an excellent, easy suggestion. In fact, it is so
> good and obvious that my planned response now looks silly.
> >
> > Since Josh's suggestion will do the trick, feel free to stop reading.
> But, if you're interested here's how I was going to respond:
> >
> > I pulled up the function that sets the interface information for a
> Commotion Plug type interface. That's in /lib/network/commotion.sh. You can
> view the file through the web here:
> https://github.com/opentechinstitute/commotion-openwrt/blob/master/commotionfeed/commotionbase/files/lib/network/commotion.sh
> >
> > Check down to line 519. We need to change the parameters to udhcpc
> (stored in the variable $dhcpopts). The existing options (-q -n) tell
> udhcpc to attempt to obtain a dhcp lease and a) exit immediately after a
> lease is obtained and b) exit and return failure if a lease cannot be
> obtained. In your case, the desired behavior is be for udhcpc to
> continuously ask for a lease until it gets one and then continue to refresh
> that lease periodically. To do that we just let udhcpc do its default
> behavior by removing those options entirely. Line 519 becomes
> > local dhcpopts=""""
> >
>
> I just realized that udhcpc might not ever go into the background without
> using the -b option. The -b option means ""Background if lease is not
> immediately obtained"". This is definitely what we want, but I can't say for
> sure whether the option is necessary or not. If udhcpc never goes into the
> background, the node will sit there waiting to complete its boot process
> until it gets a lease. A problem indeed.
>
> And, just to be clear,
>
> a) Josh is the expert,
> b) My suggestions are untested,
> c) I'm trying to be helpful, and
> d) Josh is the expert. :-)
>
> Will
>
> > That's not enough, though. We need to also tell remainder of the
> function to execute the code for case 0 (which means that udhcpc
> successfully got a lease) no matter what. The ""easiest"" way to do that
> would be to change line 530 to look like:
> > case ""0"" in
> >
> > With these changes, the behavior would be
> >
> > 1) plug interface comes up,
> > 2) udhcpc asks for an IP address and
> > 3) the plug interface never acts as a dhcp server.
> >
> > In essence, this is exactly what Josh's suggestion accomplishes. I will
> defer to Josh on the implications for his suggestion w.r.t. to olsrd. There
> may be some special ""stuff"" that has to happen for networks on the plug
> interfaces to get into hna for olsrd.
> >
> > I hope that this was helpful and not rambling. Please keep us posted
> tomorrow if you need help. We'll be around on IRC, etc.
> >
> > Will
> >
> >
> > On Tuesday, May 14, 2013 21:37 EDT, Josh King <jking at chambana.net>
> wrote:
> >
> > > Hi Preston,
> > >
> > > I do not have a node in front of me at the moment so I can't tell for
> > > certain (I am referencing my home router, which is running a different
> > > version of OpenWRT), but you should be able to set this fairly easily
> > > through the LuCI admin interface. In the admin interface, just go to
> > > Network->Interfaces->Plug. There should be a dropdown menu for
> > > ""Protocol."" Switch it to ""DHCP Client,"" and click ""Switch Protocol.""
> > > This will remove the ethernet interface from Commotion's configuration,
> > > and instead it will just be a normal DHCP interface. Is the node
> > > intended to advertise that interface as a gateway?
> > >
> > > On 05/14/2013 04:52 PM, Preston Rhea wrote:
> > > > Hello dev team,
> > > >
> > > > Tomorrow, we are going up the Visitation Rectory steeple in Red Hook
> > > > to install a co-ordinated distribution layer and Commotion layer
> > > > co-location site. BKFiber will install some stock 5GHz and 900MHz
> > > > equipment at the top of the steeple, we'll put two Commotion
> > > > NanoStations in the middle of the steeple, and all will be connected
> > > > by a Ubiquiti ToughSwitch.
> > > >
> > > > The issue: we want the Commotion nodes to not interfere with DHCP
> > > > leases. Those should all be left up to the BKfiber infrastructure -
> we
> > > > need to ensure that the Commotion nodes can only receive, never give
> > > > out, DHCP leases. This is in line with our multi-layer approach, with
> > > > a Commotion community-managed layer hanging off of a
> > > > professionally-managed distribution layer. So even if the power goes
> > > > out, this should always be the case when the power comes back on.
> > > >
> > > > The question: What exactly should I do to make this happen on the
> > > > Commotion nodes? If you can email a precise solution, it will A: help
> > > > me since I will be in the steeple all day, and B: help us turn it
> into
> > > > nice documentation for the future.
> > > >
> > > > Thanks!
> > > >
> > > > Preston
> > > >
> > > >
> > > > --
> > > > Preston Rhea
> > > > Program Associate, Open Technology Institute
> > > > New America Foundation
> > > > +1-202-570-9770
> > > > Twitter: @prestonrhea
> > > >
> > > > _______________________________________________
> > > > Commotion-dev mailing list
> > > > Commotion-dev at lists.chambana.net
> > > > https://lists.chambana.net/mailman/listinfo/commotion-dev
> > > >
> > >
> >
> >
> >
> >
> >
> >
> > _______________________________________________
> > Commotion-dev mailing list
> > Commotion-dev at lists.chambana.net
> > https://lists.chambana.net/mailman/listinfo/commotion-dev
> >
>
>
>
>
>
>
> _______________________________________________
> Commotion-dev mailing list
> Commotion-dev at lists.chambana.net
> https://lists.chambana.net/mailman/listinfo/commotion-dev
>
>
"
1383,Commotion-dev, Preventing Commotion nodes from handing out,"Wed, 15 May 2013 11:14:03 -0400",-0400,Josh King,"Hi Preston,

If you are connecting to the router over ethernet, then if it fails to
get a lease on the DHCP interface then the interface will not come up,
which includes the 192.168.1.20 alias. You'll need to put it on a
network where it can get a DHCP lease, give it a lease from your laptop,
or connect to it over wireless.

On Wed 15 May 2013 11:10:31 AM EDT, Preston Rhea wrote:
> I went with Josh's recommendation, but once I clicked save and apply,
> the system hung on ""waiting for router to update."" I tried reopening
> the window and got no connection. I power cycled the router and it
> won't even let me ping the router.
>
> By implementing dhcp client only, did I make it impossible to interact
> with the device via Ethernet? Or did I just brick the router?
>
> On May 15, 2013 1:03 AM, ""Will Hawkins""
> <hawkinsw at opentechinstitute.org
> <mailto:hawkinsw at opentechinstitute.org"
1384,Commotion-dev, Preventing Commotion nodes from handing out,"Wed, 15 May 2013 11:32:11 -0400",-0400,Preston Rhea,"Thanks Josh.

I'm realizing that this configuration - DHCP client mode, and AP turned off
- may be a catch-22 since it will be only possible to access these nodes
over the mesh.
On May 15, 2013 11:13 AM, ""Josh King"" <jking at chambana.net> wrote:

> Hi Preston,
>
> If you are connecting to the router over ethernet, then if it fails to
> get a lease on the DHCP interface then the interface will not come up,
> which includes the 192.168.1.20 alias. You'll need to put it on a
> network where it can get a DHCP lease, give it a lease from your laptop,
> or connect to it over wireless.
>
> On Wed 15 May 2013 11:10:31 AM EDT, Preston Rhea wrote:
> > I went with Josh's recommendation, but once I clicked save and apply,
> > the system hung on ""waiting for router to update."" I tried reopening
> > the window and got no connection. I power cycled the router and it
> > won't even let me ping the router.
> >
> > By implementing dhcp client only, did I make it impossible to interact
> > with the device via Ethernet? Or did I just brick the router?
> >
> > On May 15, 2013 1:03 AM, ""Will Hawkins""
> > <hawkinsw at opentechinstitute.org
> > <mailto:hawkinsw at opentechinstitute.org"
1385,Commotion-dev, Preventing Commotion nodes from handing out,"Wed, 15 May 2013 11:34:40 -0400",-0400,Will Hawkins,"Since the 192.168.1.20 address is ""always"" available, you will probably 
be okay. In other words, you can always ssh into the node through that 
interface and then determine the node's true IP address that way. Of 
course, firewall issues might prevent that.

It's also possible to keep the AP on until you have successfully 
configured and tested the node. Then, when things are stable, simply 
turn off the AP.

Will

On 05/15/2013 11:32 AM, Preston Rhea wrote:
> Thanks Josh.
>
> I'm realizing that this configuration - DHCP client mode, and AP turned
> off - may be a catch-22 since it will be only possible to access these
> nodes over the mesh.
>
> On May 15, 2013 11:13 AM, ""Josh King"" <jking at chambana.net
> <mailto:jking at chambana.net"
1386,Commotion-dev, Preventing Commotion nodes from handing out,"Wed, 15 May 2013 11:45:45 -0400",-0400,Preston Rhea,"Even connected over the AP, once I save the plug interface as DHCP client,
the router stops responding. It is still broadcasting the AP but I can't
connect. I'm fairly stumped.
On May 15, 2013 11:34 AM, ""Will Hawkins"" <hawkinsw at opentechinstitute.org>
wrote:

> Since the 192.168.1.20 address is ""always"" available, you will probably be
> okay. In other words, you can always ssh into the node through that
> interface and then determine the node's true IP address that way. Of
> course, firewall issues might prevent that.
>
> It's also possible to keep the AP on until you have successfully
> configured and tested the node. Then, when things are stable, simply turn
> off the AP.
>
> Will
>
> On 05/15/2013 11:32 AM, Preston Rhea wrote:
>
"
1387,Commotion-dev, Preventing Commotion nodes from handing out,"Wed, 15 May 2013 11:49:17 -0400",-0400,Josh King,"Actually, that alias does not come up if the interface fails to come 
up, i.e. if it fails to get a lease. But yes, Will is right about 
turning off the AP after testing.

Sorry, I should have anticipated that you might need to shut off the AP 
as well.

One possibility that I forgot to mention is that, depending on the 
state of the plug interface previously, it might end up in the wrong 
firewall zone. I don't know that that would result in what you're 
seeing, but it might. In addition to the previous steps, on what I 
believe is the same page where you switch the protocol, make sure that 
the ethernet interface is in firewall zone ""WAN.""

On Wed 15 May 2013 11:34:40 AM EDT, Will Hawkins wrote:
> Since the 192.168.1.20 address is ""always"" available, you will
> probably be okay. In other words, you can always ssh into the node
> through that interface and then determine the node's true IP address
> that way. Of course, firewall issues might prevent that.
>
> It's also possible to keep the AP on until you have successfully
> configured and tested the node. Then, when things are stable, simply
> turn off the AP.
>
> Will
>
> On 05/15/2013 11:32 AM, Preston Rhea wrote:
"
1388,Commotion-dev, IP resolution problem for mesh-hopping,"Thu, 16 May 2013 12:50:51 -0400",-0400,Preston Rhea,"In the Digital Stewards class right now in Red Hook.

We're running the part of the training where they are supposed to hop
through the mesh by entering different routers' IP addresses. But,
clicking / entering other mesh IPs ALWAYS resolves to
http://101.201.110.1/ on their computers, which takes them to the same
router. This doesn't happen on my computer, I can mesh hop no problem.
No one has ethernet plugged in. Mine is Linux, theirs are Macs. We
tried it on Safari and Chrome for theirs.

Any ideas as to why this is happening?


--
Preston Rhea
Program Associate, Open Technology Institute
New America Foundation
+1-202-570-9770
Twitter: @prestonrhea

"
1389,Commotion-dev, IP resolution problem for mesh-hopping,"Thu, 16 May 2013 12:57:07 -0400",-0400,Will Hawkins,"Have they ""accepted"" the Commotion splash page? Can you also look up 
their DNS server settings?

On 05/16/2013 12:50 PM, Preston Rhea wrote:
> In the Digital Stewards class right now in Red Hook.
>
> We're running the part of the training where they are supposed to hop
> through the mesh by entering different routers' IP addresses. But,
> clicking / entering other mesh IPs ALWAYS resolves to
> http://101.201.110.1/ on their computers, which takes them to the same
> router. This doesn't happen on my computer, I can mesh hop no problem.
> No one has ethernet plugged in. Mine is Linux, theirs are Macs. We
> tried it on Safari and Chrome for theirs.
>
> Any ideas as to why this is happening?
>
>
> --
> Preston Rhea
> Program Associate, Open Technology Institute
> New America Foundation
> +1-202-570-9770
> Twitter: @prestonrhea
>
> _______________________________________________
> Commotion-dev mailing list
> Commotion-dev at lists.chambana.net
> https://lists.chambana.net/mailman/listinfo/commotion-dev
>
"
1390,Commotion-dev, Fwd: [Olsr-dev] [announce] olsrd 0.6.5.4 released,"Thu, 16 May 2013 14:24:53 -0400",-0400,Dan Staples,"FYI. Due to the buffer overflow vulnerability, I think it would be a
good idea to upgrade our olsrd fork for DR1. Does anyone anticipate any
problems with doing this as part of the DR1 stabilization push? I can do
it tomorrow.

Dan

"
1391,Commotion-dev, Fwd: [Olsr-dev] [announce] olsrd 0.6.5.4,"Thu, 16 May 2013 14:27:40 -0400",-0400,Andrew Reynolds,"I think we might as well do it now. That's a yes from me.

-andrew

On 05/16/2013 02:24 PM, Dan Staples wrote:
> FYI. Due to the buffer overflow vulnerability, I think it would be a
> good idea to upgrade our olsrd fork for DR1. Does anyone anticipate any
> problems with doing this as part of the DR1 stabilization push? I can do
> it tomorrow.
> 
> Dan
> 
> "
1392,Commotion-dev, Fwd: [Olsr-dev] [announce] olsrd,"Thu, 16 May 2013 14:32:25 -0400",-0400,Josh King,"Go for it.

Andrew Reynolds <andrew at opentechinstitute.org> wrote:
>I think we might as well do it now. That's a yes from me.
>
>-andrew
>
>On 05/16/2013 02:24 PM, Dan Staples wrote:
"
1393,Commotion-dev, Fwd: [Olsr-dev] [announce] olsrd 0.6.5.4,"Thu, 16 May 2013 22:44:20 -0500",-0500,Ben West,"I was compiling a bunch of stuff and possibly found a possible bug exposed
with the v0.6.5.2 olsrd release currently in Commotion, so here is a pull
request with v0.6.5.4:

https://github.com/opentechinstitute/olsrd/pull/3

On Thu, May 16, 2013 at 1:32 PM, Josh King <jking at chambana.net> wrote:

> Go for it.
>
>
> Andrew Reynolds <andrew at opentechinstitute.org> wrote:
"
1394,Commotion-dev, IP resolution problem for mesh-hopping,"Fri, 17 May 2013 09:31:37 -0400",-0400,Dan Staples,"What do you mean by ""clicking / entering"" IP addresses? And IP 
addresses shouldn't resolve to anything, since they are not domain 
names. Do you mean the web interface is re-directing you back to that 
one IP address? What is the process they are going through to access 
the other nodes?

On Thu 16 May 2013 12:57:07 PM EDT, Will Hawkins wrote:
> Have they ""accepted"" the Commotion splash page? Can you also look up
> their DNS server settings?
>
> On 05/16/2013 12:50 PM, Preston Rhea wrote:
"
1395,Commotion-dev, IP resolution problem for mesh-hopping,"Fri, 17 May 2013 09:37:52 -0400",-0400,Preston Rhea,"When we would either, or both, click on the hyperlinks in the
Neighbors table of Commotion, or manually enter the 5.* mesh IP
addresses into the browser address bar (both with and without
http://), it would re-direct us back to the 101.* IP address.

Should one have to click on the splash page to mesh-hop through the
browser? Is this only a problem when there is a gateway?

On Fri, May 17, 2013 at 9:31 AM, Dan Staples
<danstaples at opentechinstitute.org> wrote:
> What do you mean by ""clicking / entering"" IP addresses? And IP
> addresses shouldn't resolve to anything, since they are not domain
> names. Do you mean the web interface is re-directing you back to that
> one IP address? What is the process they are going through to access
> the other nodes?
>
> On Thu 16 May 2013 12:57:07 PM EDT, Will Hawkins wrote:
"
1396,Commotion-dev, IP resolution problem for mesh-hopping,"Fri, 17 May 2013 09:40:35 -0400",-0400,Dan Staples,"I suspect, since it is redirecting you, that it is an issue with the 
splash page. You could either try clicking through the splash page (if 
you have internet access), or disabling luci-splash by removing all 
interfaces in System -> User-Splash.

On Fri 17 May 2013 09:37:52 AM EDT, Preston Rhea wrote:
> When we would either, or both, click on the hyperlinks in the
> Neighbors table of Commotion, or manually enter the 5.* mesh IP
> addresses into the browser address bar (both with and without
> http://), it would re-direct us back to the 101.* IP address.
>
> Should one have to click on the splash page to mesh-hop through the
> browser? Is this only a problem when there is a gateway?
>
> On Fri, May 17, 2013 at 9:31 AM, Dan Staples
> <danstaples at opentechinstitute.org> wrote:
"
1397,Commotion-dev, Fwd: Error running commotion-linux,"Sun, 19 May 2013 10:33:24 -0500",-0500,Ben West,"This was posted to the OLSR users listserv; forwarding along to
Commotion-dev listserv instead ...

"
1398,Commotion-dev," Questions for a ""learnable"" mesh network","Mon, 20 May 2013 08:59:36 -0400",-0400,Seamus Tuohy,"Hey,

So I have been working on the ""learnable mesh"" problem for most Sunday
and have made some good headway exploring how we can make mesh
networking intuitively learned when a user configures their devices.
This is a somewhat long e-mail so I have  surrounded the actual
questions with the html tag <question> for parsing, though I know that
will cause issues with the non-plain text e-mail readers in the world.

In order to sync the ""ideal"" with the practical I need to identify some
of the underlying capabilities before moving on. I was going to write
them down and explore them on my own, but I figured that having this
discussion publicly would be better.

The most important aspect of helping a user ""learn"" about mesh, is a
short feedback loop for users who are customizing their device. In
working with our mesh glossary this weekend I came to the realization
that the most important component to our connectivity based tool is the
interface. To this end, I need to identify a way for a user to interact
with a virtual wireless interface freely without cutting off the
interface they are connected to the device with. This configuration
interface can either be another virtual interface or another physical
one (like ethernet.) Once, we get the desktop and mobile clients this
will not be as much of an issue as the user will not be using a network
interface in order to access the configuration page. But, until that
point, <question> is there a way to allow a user to quickly customize
one wireless interface without disabling, disrupting, or otherwise
impeding their access to the internals of a node? </question> e.g
keeping one physical interface intact while manipulating the virtual
interfaces on another. If not, <question> can we, by putting an
interface on monitor mode user some intelligent parsing to simulate the
focused field of vision that will occur when a node changes settings?
</question"
1399,Commotion-dev, Fwd: Error running commotion-linux,"Mon, 20 May 2013 11:07:13 -0400",-0400,The Doctor,
1400,Commotion-dev, Torouter on Commotion,"Mon, 20 May 2013 11:22:16 -0400",-0400,Griffin Boyce,"So after a lengthy discussion with someone involved with Torouter, he
identified some outstanding features/issues

   - Torouter doesn't have a user interface, which makes use/configuration
   difficult
   - No one is updating the OpenWRT package (though it is working, the tor
   binary needs occasional updates)
   - Current OpenWRT implementation is just ""TransPort, DNSPort and a few
   iptables rules""

Not sure if this would be considered an app or a feature, but what do you
all think?  Nat mentioned that making a generic luci interface to configure
tor likely wouldn't be too difficult.

~Griffin
"
1401,Commotion-dev," Questions for a ""learnable"" mesh network","Mon, 20 May 2013 12:02:37 -0400",-0400,Preston Rhea,"Good line of thought Seamus.

I feel like this question may be suited for the Discussion list so
less-technical users could learn, and contribute to, the design of
this process.

On Mon, May 20, 2013 at 8:59 AM, Seamus Tuohy <s2e at opentechinstitute.org> wrote:
> Hey,
>
> So I have been working on the ""learnable mesh"" problem for most Sunday
> and have made some good headway exploring how we can make mesh
> networking intuitively learned when a user configures their devices.
> This is a somewhat long e-mail so I have  surrounded the actual
> questions with the html tag <question> for parsing, though I know that
> will cause issues with the non-plain text e-mail readers in the world.
>
> In order to sync the ""ideal"" with the practical I need to identify some
> of the underlying capabilities before moving on. I was going to write
> them down and explore them on my own, but I figured that having this
> discussion publicly would be better.
>
> The most important aspect of helping a user ""learn"" about mesh, is a
> short feedback loop for users who are customizing their device. In
> working with our mesh glossary this weekend I came to the realization
> that the most important component to our connectivity based tool is the
> interface. To this end, I need to identify a way for a user to interact
> with a virtual wireless interface freely without cutting off the
> interface they are connected to the device with. This configuration
> interface can either be another virtual interface or another physical
> one (like ethernet.) Once, we get the desktop and mobile clients this
> will not be as much of an issue as the user will not be using a network
> interface in order to access the configuration page. But, until that
> point, <question> is there a way to allow a user to quickly customize
> one wireless interface without disabling, disrupting, or otherwise
> impeding their access to the internals of a node? </question> e.g
> keeping one physical interface intact while manipulating the virtual
> interfaces on another. If not, <question> can we, by putting an
> interface on monitor mode user some intelligent parsing to simulate the
> focused field of vision that will occur when a node changes settings?
> </question>
>
> Once we have obtained a tight feedback loop by allowing a user to
> sandbox a specific ""configuration"" interface without disrupting their
> connection to the node we need to create an environment to allow a user
> to explore the ""interface"" between the device and multiple external
> networks. This has multiple implications. First, we need to take in
> traffic on the interface and translate it into useful data for a new
> user. (eg. taking beacon traffic and translating it into a list of
> advertised devices, much like network manager does, but with all the
> traffic seen by the device) This will allow a user to explore changing
> channels, frequencies (2.4/5/900), security settings, and mesh protocols
> freely and see what communications become available. By providing a
> filter for the traffic seen we can not only provide immediate feedback,
> but we can start to help new users intuitively understand that the
> choices they make on a wireless interface filter the communication that
> they receive much like on an AM/FM radio. This will allow for us to
> create an ""interactive puzzle"" out of configuring a node that will
> replace the current opaque process that exists because of the lack of a
> comprehensive feedback loop. As such, <question> what is the best (most
> easily parsable, and full of info) tool to get access to data that is
> running over an interface (both incoming and outgoing.) </question>
>
> I will work up some mock-ups of the interface based upon the answers to
> these questions and send them out once I have made a bit more headway.
>
> s2e
> _______________________________________________
> Commotion-dev mailing list
> Commotion-dev at lists.chambana.net
> https://lists.chambana.net/mailman/listinfo/commotion-dev
"
1402,Commotion-dev, nailing down the default mesh network,"Mon, 20 May 2013 19:38:25 +0200",+0200,"Mikael ""MMN-o"" Nordfeldth","On 2013-05-01 23:38, Hans-Christoph Steiner wrote:
> 
> All IPv6 would be great!  It sounds like a steep hill to get over since few
> people have any experience with IPv6.  So I think we should also set an IPv4
> default mesh set, since that's widely deployed and understood.

I hope everyone agrees IPv6 is the best way to go .)

End-users won't notice any difference, except for the rare case of
someone trying to manually type their IP number to connect to from
another machine or something. But preferrably hostnames would be used
for this!

So, what changes would have to be made to run Commotion with an IPv6 setup?
 * olsrd apparently supports it (but I haven't tried it out myself)
 * A bunch of uci/luci configurations must be modified, I guess?

For addressing, I believe the link-local fe80::/10 network would work
well - which tends to be automatically configured for any ipv6 enabled
network interface. The method is based on something called EUI-64 and
generates an address based on the MAC with some distinctiveness for
local logic:
https://en.wikipedia.org/wiki/IPv6_address#Modified_EUI-64

Looking at my current Commotion node, my wlan0 and wlan0-1 interfaces
have two distinct IPv6 link-local addresses:
wlan0           inet6 addr: fe80::dc9f:dbff:fe0e:c0bb/64 Scope:Link
wlan0-1         inet6 addr: fe80::d89f:dbff:fe0e:c0bb/64 Scope:Link

The above is given by a MAC address of DA:9F:DB:0E:C0:BB

So what would have to be stored is probably just which interface is
which (mesh, ap, secureap) and then have olsrd work only on the mesh. So
no big differences from IPv4 management, right? Maybe even less code.

--
Mikael Nordfeldth
mmn at hethane.se

"
1403,Commotion-dev, Torouter on Commotion,"Mon, 20 May 2013 18:08:04 -0400",-0400,Dan Staples,"Updating the OpenWRT Tor package to the latest stable versions would be 
a benefit for everyone :)

And making a LuCI interface could be useful, but there would be more to 
it than that. Did you talk to Stephanie about what she implemented? 
When we discussed the possibility of using Tor in Commotion, there were 
some factors brought up for consideration:

1. How would the end user use it? Would it be a specific access point 
on Commotion-OpenWRT that provided a transparent proxy through the Tor 
network?
2. If so, how do we manage the information leak risks that would 
otherwise be addressed by using the Tor browser bundle?
3. If we provide a transparent proxy to the Tor network, how do we 
handle local traffic for mesh-only services?
4. How would this be implemented in Commotion client software (android, 
linux, mac, windows)?

Dan

On Mon 20 May 2013 11:22:16 AM EDT, Griffin Boyce wrote:
> So after a lengthy discussion with someone involved with Torouter, he
> identified some outstanding features/issues
>
>   * Torouter doesn't have a user interface, which makes
>     use/configuration difficult
>   * No one is updating the OpenWRT package (though it is working, the
>     tor binary needs occasional updates)
>   * Current OpenWRT implementation is just ""TransPort, DNSPort and a
>     few iptables rules""
>
> Not sure if this would be considered an app or a feature, but what do
> you all think?  Nat mentioned that making a generic luci interface to
> configure tor likely wouldn't be too difficult.
>
> ~Griffin
>
>
> _______________________________________________
> Commotion-dev mailing list
> Commotion-dev at lists.chambana.net
> https://lists.chambana.net/mailman/listinfo/commotion-dev

--
Dan Staples

Open Technology Institute
https://commotionwireless.net
"
1404,Commotion-dev, Commotion Testbed Update,"Mon, 20 May 2013 21:19:46 -0400",-0400,Will Hawkins,"Just FYI:

6 of the 7 nodes at the testbed are now running the stable DR1 image and 
meshing. There is only one problem left to debug and I will work on that 
tomorrow (It's a problem with getting DHCP leases on boot. ifdown/ifup 
after boot works great, including moves between firewall zones.).

Will
"
1405,Commotion-dev, Any use for libcyassl?,"Tue, 21 May 2013 11:36:32 -0500",-0500,Ben West,"Howdy,

I have managed to successfully compile and run an updated copy (v2.6.0) of
the cyassl embedded SSL implementation, and furthermore have libcurl / curl
link to that instead of libopenssl.

If you have to use SSL (which is recommended when you want to connect to a
remote service, e.g. a dashboard), libcyassl saves you 500Kbytes+ of flash
space over libopenssl:
-rw-r--r-- 1 ben ben 105802 May 18 22:37
bin/ar71xx/packages/libcyassl_2.6.0-1_ar71xx.ipk
-rw-r--r-- 1 ben ben 637545 May 18 23:14
bin/ar71xx/packages/libopenssl_1.0.1e-1_ar71xx.ipk

Although, Commotion doesn't using openssl or cyassl for anything in
particular yet, besides the onboard web-server uhttpd, do you plan to build
any service which will require SSL?  If so, I've cyassl + libcurl patches
to share.

-- 
Ben West
http://gowasabi.net
ben at gowasabi.net
314-246-9434
"
1406,Commotion-dev, Fwd: Hack to set node's local time on boot in case,"Tue, 21 May 2013 12:04:43 -0500",-0500,Ben West,"Howdy again,

I've been having problems with a node that consistently powers up with
local time @ 1 Jan 1970, getting its OLSR packets rejected by other nodes
with correct local time.  Henning seems to confirm this is done
intentionally by OLSRd for security reasons, creating a potential
chicken-and-egg problem for any nodes that depend on a getting a valid
route via OLSR to set their local time in the first place.

This particular node is a TP-Link TL-MR3020, although I believe the UBNT
radios are a little better about powering up with their local time not
quite as old as Disco.

Anyhoo, the hack I've put into /etc/rc.local is quoted below.  Basically,
it takes the most recent file modification date under
/etc/somewhere/current and sets local time to that.  For Commotion, if the
local time issue affects you, you could probably set the path just to
""/etc"".

"
1407,Commotion-dev, Any use for libcyassl?,"Tue, 21 May 2013 13:28:21 -0400",-0400,Dan Staples,"Besides the LuCI web interface, I can't think of any other current or 
proposed uses for SSL on the openwrt nodes. I heard that Seamus was 
creating some instructions for going through the quick-start over a 
wireless AP with SSL turned on, so users can understand what the 
self-signed cert warning means. Maybe he can chime in with more 
details...

On Tue 21 May 2013 12:36:32 PM EDT, Ben West wrote:
> Howdy,
>
> I have managed to successfully compile and run an updated copy
> (v2.6.0) of the cyassl embedded SSL implementation, and furthermore
> have libcurl / curl link to that instead of libopenssl.
>
> If you have to use SSL (which is recommended when you want to connect
> to a remote service, e.g. a dashboard), libcyassl saves you 500Kbytes+
> of flash space over libopenssl:
> -rw-r--r-- 1 ben ben 105802 May 18 22:37
> bin/ar71xx/packages/libcyassl_2.6.0-1_ar71xx.ipk
> -rw-r--r-- 1 ben ben 637545 May 18 23:14
> bin/ar71xx/packages/libopenssl_1.0.1e-1_ar71xx.ipk
>
> Although, Commotion doesn't using openssl or cyassl for anything in
> particular yet, besides the onboard web-server uhttpd, do you plan to
> build any service which will require SSL?  If so, I've cyassl +
> libcurl patches to share.
>
> --
> Ben West
> http://gowasabi.net
> ben at gowasabi.net <mailto:ben at gowasabi.net>
> 314-246-9434
>
>
> _______________________________________________
> Commotion-dev mailing list
> Commotion-dev at lists.chambana.net
> https://lists.chambana.net/mailman/listinfo/commotion-dev

--
Dan Staples

Open Technology Institute
https://commotionwireless.net
"
1408,Commotion-dev, Fwd: Hack to set node's local time on boot in,"Tue, 21 May 2013 13:33:47 -0400",-0400,Dan Staples,"It seems that if routers without an internal hardware clock can't mesh 
with an olsr network, than a workaround like the script you propose 
would be quite necessary. Maybe we can add a check to see if the 
current date is good enough, and if not set it to the timestamp of 
/etc/somewhere/current. Do you know what the allowable time difference 
window is for olsrd?

On Tue 21 May 2013 01:04:43 PM EDT, Ben West wrote:
> Howdy again,
>
> I've been having problems with a node that consistently powers up with
> local time @ 1 Jan 1970, getting its OLSR packets rejected by other
> nodes with correct local time.  Henning seems to confirm this is done
> intentionally by OLSRd for security reasons, creating a potential
> chicken-and-egg problem for any nodes that depend on a getting a valid
> route via OLSR to set their local time in the first place.
>
> This particular node is a TP-Link TL-MR3020, although I believe the
> UBNT radios are a little better about powering up with their local
> time not quite as old as Disco.
>
> Anyhoo, the hack I've put into /etc/rc.local is quoted below.
> Basically, it takes the most recent file modification date under
> /etc/somewhere/current and sets local time to that.  For Commotion, if
> the local time issue affects you, you could probably set the path just
> to ""/etc"".
>
> "
1409,Commotion-dev, Fwd: Hack to set node's local time on boot in,"Tue, 21 May 2013 12:52:20 -0500",-0500,Ben West,"Hi Dan,

I do not know what OLSRd's allowable time offset is, and empirical
observation seems to suggest that local time on the order of (T - 3years)
is OK, but (T - 40years) is not.  Henning thought packets older that 30secs
would be rejected, but I have not observed that fine-grained of sensitivity
to local time offset at all.

Besides that, Henning and I are curious if this might be exposing a
variable out-of-range problem somewhere deep in the bowels of OLSRd.
Normally, such problems are expected to surface when the world as Linux
knows it ends in 2038, but possibly this instance involves a variable that
is already offset very far into its allowable range.

UBNT products seems to skirt by this problem for the most point by having a
hardcoded local time at some point well after the UNIX epoch (e.g. date of
chip manufacture?).  Indeed, I only experienced this problem on a TP-Link
node that happens to always power up with local time 1/1/1970, and
occasionally on older Engenius ath5k radios.

On Tue, May 21, 2013 at 12:33 PM, Dan Staples <
danstaples at opentechinstitute.org> wrote:

> It seems that if routers without an internal hardware clock can't mesh
> with an olsr network, than a workaround like the script you propose
> would be quite necessary. Maybe we can add a check to see if the
> current date is good enough, and if not set it to the timestamp of
> /etc/somewhere/current. Do you know what the allowable time difference
> window is for olsrd?
>
> On Tue 21 May 2013 01:04:43 PM EDT, Ben West wrote:
> > Howdy again,
> >
> > I've been having problems with a node that consistently powers up with
> > local time @ 1 Jan 1970, getting its OLSR packets rejected by other
> > nodes with correct local time.  Henning seems to confirm this is done
> > intentionally by OLSRd for security reasons, creating a potential
> > chicken-and-egg problem for any nodes that depend on a getting a valid
> > route via OLSR to set their local time in the first place.
> >
> > This particular node is a TP-Link TL-MR3020, although I believe the
> > UBNT radios are a little better about powering up with their local
> > time not quite as old as Disco.
> >
> > Anyhoo, the hack I've put into /etc/rc.local is quoted below.
> > Basically, it takes the most recent file modification date under
> > /etc/somewhere/current and sets local time to that.  For Commotion, if
> > the local time issue affects you, you could probably set the path just
> > to ""/etc"".
> >
> > "
1410,Commotion-dev, Any use for libcyassl?,"Tue, 21 May 2013 14:21:11 -0400",-0400,Will Hawkins,"I will, as usual, agree with Dan. There are several packages that we 
compile from scratch that typically require SSL but we specifically 
compile them without that support. For the routing and application 
announcement signing we use the nacl library provided by the Serval code.

Let's have Seamus chime in on his use of SSL before making any further 
moves.

Thanks for the note on this, Ben. Any place we can save space is good!

Will

On 05/21/2013 01:28 PM, Dan Staples wrote:
> Besides the LuCI web interface, I can't think of any other current or
> proposed uses for SSL on the openwrt nodes. I heard that Seamus was
> creating some instructions for going through the quick-start over a
> wireless AP with SSL turned on, so users can understand what the
> self-signed cert warning means. Maybe he can chime in with more
> details...
>
> On Tue 21 May 2013 12:36:32 PM EDT, Ben West wrote:
"
1411,Commotion-dev, Fwd: Hack to set node's local time on boot in,"Tue, 21 May 2013 14:22:16 -0400",-0400,Josh King,"I would like to include this workaround, but we should definitely try
and nail down what it's doing first, so that we know that it will work
in the largest possible set of cases.

On 05/21/2013 01:52 PM, Ben West wrote:
> Hi Dan,
> 
> I do not know what OLSRd's allowable time offset is, and empirical
> observation seems to suggest that local time on the order of (T -
> 3years) is OK, but (T - 40years) is not.  Henning thought packets older
> that 30secs would be rejected, but I have not observed that fine-grained
> of sensitivity to local time offset at all.
> 
> Besides that, Henning and I are curious if this might be exposing a
> variable out-of-range problem somewhere deep in the bowels of OLSRd. 
> Normally, such problems are expected to surface when the world as Linux
> knows it ends in 2038, but possibly this instance involves a variable
> that is already offset very far into its allowable range.
> 
> UBNT products seems to skirt by this problem for the most point by
> having a hardcoded local time at some point well after the UNIX epoch
> (e.g. date of chip manufacture?).  Indeed, I only experienced this
> problem on a TP-Link node that happens to always power up with local
> time 1/1/1970, and occasionally on older Engenius ath5k radios.
> 
> On Tue, May 21, 2013 at 12:33 PM, Dan Staples
> <danstaples at opentechinstitute.org
> <mailto:danstaples at opentechinstitute.org"
1412,Commotion-dev, Fwd: Hack to set node's local time on boot in,"Tue, 21 May 2013 14:53:54 -0400",-0400,Will Hawkins,"It looks like the code for this is somewhere in olsr_input_tc in 
tc_set.c in the src directory of olsr. It seems to take the time from 
the incoming packet and converts it to a relative timestamp. That 
relative timestamp is used to expire the hello(s). There is a special 
configuration value (min_tc_vtime) that might be able to control this 
behavior. I'm not sure how to set that value from a config file (Google 
thinks it is MinTCVTime). I hope this information helps!

Will

On 05/21/2013 02:22 PM, Josh King wrote:
> I would like to include this workaround, but we should definitely try
> and nail down what it's doing first, so that we know that it will work
> in the largest possible set of cases.
>
> On 05/21/2013 01:52 PM, Ben West wrote:
"
1413,Commotion-dev, Fwd: Error running commotion-linux,"Tue, 21 May 2013 15:24:54 -0400",-0400,Hans-Christoph Steiner,"

On 05/20/2013 11:07 AM, The Doctor wrote:
> On 05/19/2013 11:33 AM, Ben West wrote:
> 
"
1414,Commotion-dev, Torouter on Commotion,"Wed, 22 May 2013 12:32:06 -0400",-0400,Stephanie Alarcon,"Hey all,

My apologies for not being forthcoming with good documentation of what I 
worked on and found out about running Tor on Commotion.  Griffin and I 
have plans to talk today or tomorrow so I can do a braindump.  This is 
good incentive for me to sit down and summarize my work as promised, and 
I'll get going on that this week or next.  I had some pressing home 
repair issues that kept me away from my desk, but now those dragons are 
mostly at bay and I'm flexible Wednesdays through Fridays.

My recommendations for further work can be summed up by this haiku:

Access Labs router:
Nice work, hard to get in touch.
It runs great, but how??

On 05/20/2013 06:08 PM, Dan Staples wrote:
> Updating the OpenWRT Tor package to the latest stable versions would be
> a benefit for everyone :)
>
> And making a LuCI interface could be useful, but there would be more to
> it than that. Did you talk to Stephanie about what she implemented?
> When we discussed the possibility of using Tor in Commotion, there were
> some factors brought up for consideration:
>
> 1. How would the end user use it? Would it be a specific access point
> on Commotion-OpenWRT that provided a transparent proxy through the Tor
> network?
> 2. If so, how do we manage the information leak risks that would
> otherwise be addressed by using the Tor browser bundle?
> 3. If we provide a transparent proxy to the Tor network, how do we
> handle local traffic for mesh-only services?
> 4. How would this be implemented in Commotion client software (android,
> linux, mac, windows)?
>
> Dan
>
> On Mon 20 May 2013 11:22:16 AM EDT, Griffin Boyce wrote:
"
1415,Commotion-dev, Torouter on Commotion,"Wed, 22 May 2013 12:53:49 -0400",-0400,Stephanie Alarcon,"One other note, if I recall correctly, the makefile for Tor in OpenWRT 
downloads whatever the current stable release is.  I think.  But I have 
a pretty clear memory that it did not specify a particular or 
out-of-date version.  You should check the makefile to make sure I'm not 
lying to you.

On 05/22/2013 12:32 PM, Stephanie Alarcon wrote:
> Hey all,
>
> My apologies for not being forthcoming with good documentation of what I
> worked on and found out about running Tor on Commotion.  Griffin and I
> have plans to talk today or tomorrow so I can do a braindump.  This is
> good incentive for me to sit down and summarize my work as promised, and
> I'll get going on that this week or next.  I had some pressing home
> repair issues that kept me away from my desk, but now those dragons are
> mostly at bay and I'm flexible Wednesdays through Fridays.
>
> My recommendations for further work can be summed up by this haiku:
>
> Access Labs router:
> Nice work, hard to get in touch.
> It runs great, but how??
>
> On 05/20/2013 06:08 PM, Dan Staples wrote:
"
1416,Commotion-dev, Torouter on Commotion,"Wed, 22 May 2013 13:29:30 -0500",-0500,Ben West,"Commotion is presently tracking current OpenWRT Attitude Adjustment, so the
OS layer for OpenWRT devices should be fine.

In lieu of the limited CPU/RAM/flash resources on the OpenWRT nodes, and
especially in lieu of the question about possibly integrating Tor as an app
that a user may select via the Luci web UI, what might Tor integration
require of *all* nodes on a particular mesh, including those where Tor
isn't installed?

That is, if your repeater node, where Tor has been installed, wants to send
Tor traffic to another node on that mesh that is >1 hop away, or or it
wants to send Tor traffic to the Internet thru a gateway node that does not
have a full Tor installation, what could these non-Tor-capable nodes do to
at least forward the traffic correctly?

On Wed, May 22, 2013 at 11:53 AM, Stephanie Alarcon <steph.alarcon at gmail.com
> wrote:

> One other note, if I recall correctly, the makefile for Tor in OpenWRT
> downloads whatever the current stable release is.  I think.  But I have a
> pretty clear memory that it did not specify a particular or out-of-date
> version.  You should check the makefile to make sure I'm not lying to you.
>
>
> On 05/22/2013 12:32 PM, Stephanie Alarcon wrote:
>
"
1417,Commotion-dev, nailing down the default mesh network,"Fri, 24 May 2013 17:34:18 -0400",-0400,Hans-Christoph Steiner,"

On 05/20/2013 01:38 PM, Mikael ""MMN-o"" Nordfeldth wrote:
> On 2013-05-01 23:38, Hans-Christoph Steiner wrote:
"
1418,Commotion-dev, Fwd: Issue 82 in android: wifi - support ad hoc,"Thu, 30 May 2013 22:24:41 -0400",-0400,Paul Gardner-Stephen,"Issue #82 (lack of ad-hoc Wi-Fi support for android) is now locked so that
people can no longer comment on it.  This doesn't seem a particularly
encouraging move on Google's part.

Paul.

"
1419,Commotion-dev, TPLink w3040,"Sun, 02 Jun 2013 10:14:37 -0400",-0400,Seamus Tuohy,"Hello All,

I worked on getting a Commotion image to work on the battery powered TP
Links that we just got in and quickly discovered that they only have 4MB
of memory available. Even when I removed nearly every package imaginable
I still could not get the image to build.

It looks as if there is no easy way to find out the size of a squashfs
package so I will try to remove everything except basic functionality
and usb support and then get everything back on by running it off of a
mounted usb this week.

Just an FYI.

s2e
"
1420,Commotion-dev, TPLink w3040,"Sun, 02 Jun 2013 18:06:20 +0200",+0200,Ufo,"yes, nice devices! we mesh with these in leipzig since some months. 
(olsr, only ipv4, no autoconfig, clientsplash, webserver, no https, no 
ppp/pppoe) pre-build firmware via openwrt imagebuilder..

root at 234-85:~# df
Filesystem           1K-blocks      Used Available Use% Mounted on
rootfs                     640       280       360  44% /
/dev/root                 2304      2304         0 100% /rom
tmpfs                    14608       484     14124   3% /tmp
tmpfs                      512         0       512   0% /dev
/dev/mtdblock3             640       280       360  44% /overlay
overlayfs:/overlay         640       280       360  44% /


here is some space left on flash and so we are able to install webcam OR 
soundoutput OR of course i already tested ext-root to expand the disc 
and install many more packages to usb-stick.


many people ask ""how many hours are these devices working"" so i made 
some first tests: http://twitpic.com/cro4ok

additional hardware will lower the battery-runtime, so basic functions 
should be useable without that.
built-in wifi is only 30mw, so we used usb-wifi (at least at last 
#battlemesh) for more wifi (TP-Link N150 TL-WN722N)

please keep in mind, that in case of flashing that device with broken 
firmware there is NO reset button working. you will a need serial 
interface for recovery. maybe there is no need for a soldering iron.

Am 02.06.13 16:14, schrieb Seamus Tuohy:
> Hello All,
>
> I worked on getting a Commotion image to work on the battery powered TP
> Links that we just got in and quickly discovered that they only have 4MB
> of memory available. Even when I removed nearly every package imaginable
> I still could not get the image to build.
>
> It looks as if there is no easy way to find out the size of a squashfs
> package so I will try to remove everything except basic functionality
> and usb support and then get everything back on by running it off of a
> mounted usb this week.
>
> Just an FYI.
>
> s2e
> _______________________________________________
> Commotion-dev mailing list
> Commotion-dev at lists.chambana.net
> https://lists.chambana.net/mailman/listinfo/commotion-dev
"
1421,Commotion-dev, TPLink w3040,"Sun, 2 Jun 2013 11:18:11 -0500",-0500,Ben West,"Hi Saemus,

I've still been tooling around with squeezing meshing firmware image onto a
similar TP-Link TL-MR3020, which also has 4MB flash.  I'm just about to the
point where I can get the kernel, basic filesystem, and even a coovachilli
captive portal into 4MB, but I've had to do / am doing the following:

- Add the ""-funit-at-a-time"" compile optimiization flag, and use GCC v4.7.
This basically tells GCC to work harder at reducing compiled code size, and
maybe yields 5-10% smaller images.

- Swap out libopenssl for libcyassl for use with curl.  (If you're using
curl.)  I can share the patches for this if you'd like.

- While retaining IPv6 support in the kernel, switch all IPv6-related
packages over to modules not included with the compile image.

- Select ""Compressed source"" or ""Pre-compiled source"" for the luci lua
source files.  Theorectically, this reduces the space used by all the Luci
web UI source files, although I've been able to observe and significant
image size decrease with this.

- Port the IBSS-RSN stuff from hostapd + wpa_supplicant over to one of the
smaller packages like wpad-mini.  (Not done yet.)

Note that installing *.ipk files from a mounted USB drive at boot should be
quite doable, but you will want to make sure you have opk write the
installed files to /tmp or something like that.  Likewise, important
binaries and shared libraries installed to the ramdisk will probably need
to have symlinks pointing to their proper location under / .  (I think the
symlinks can just be stored on the internal root filesystem OK.  They'll
just dangle until opkg installs the necessary files on each boot.)

I'm including the .config file I've used for my TP-Link TL-MR3020 for
reference, although do please bear in mind this wasn't used for compiling
Commotion.  Likewise, my config files so far exclude all USB stuff.

On Sun, Jun 2, 2013 at 9:14 AM, Seamus Tuohy <s2e at opentechinstitute.org>wrote:

> Hello All,
>
> I worked on getting a Commotion image to work on the battery powered TP
> Links that we just got in and quickly discovered that they only have 4MB
> of memory available. Even when I removed nearly every package imaginable
> I still could not get the image to build.
>
> It looks as if there is no easy way to find out the size of a squashfs
> package so I will try to remove everything except basic functionality
> and usb support and then get everything back on by running it off of a
> mounted usb this week.
>
> Just an FYI.
>
> s2e
> _______________________________________________
> Commotion-dev mailing list
> Commotion-dev at lists.chambana.net
> https://lists.chambana.net/mailman/listinfo/commotion-dev
"
1422,Commotion-dev, TPLink w3040,"Sun, 2 Jun 2013 15:11:08 -0500",-0500,Ben West,"Also, sorry for typo: ""Theoretically, this reduces the space used by all
the Luci web UI source files, although I've *yet* been able to observe
*any*significant image size decrease ...""

On Sun, Jun 2, 2013 at 11:18 AM, Ben West <ben at gowasabi.net> wrote:

> Hi Saemus,
>
> I've still been tooling around with squeezing meshing firmware image onto
> a similar TP-Link TL-MR3020, which also has 4MB flash.  I'm just about to
> the point where I can get the kernel, basic filesystem, and even a
> coovachilli captive portal into 4MB, but I've had to do / am doing the
> following:
>
> - Add the ""-funit-at-a-time"" compile optimiization flag, and use GCC
> v4.7.  This basically tells GCC to work harder at reducing compiled code
> size, and maybe yields 5-10% smaller images.
>
> - Swap out libopenssl for libcyassl for use with curl.  (If you're using
> curl.)  I can share the patches for this if you'd like.
>
> - While retaining IPv6 support in the kernel, switch all IPv6-related
> packages over to modules not included with the compile image.
>
> - Select ""Compressed source"" or ""Pre-compiled source"" for the luci lua
> source files.  Theorectically, this reduces the space used by all the Luci
> web UI source files, although I've been able to observe and significant
> image size decrease with this.
>
> - Port the IBSS-RSN stuff from hostapd + wpa_supplicant over to one of the
> smaller packages like wpad-mini.  (Not done yet.)
>
> Note that installing *.ipk files from a mounted USB drive at boot should
> be quite doable, but you will want to make sure you have opk write the
> installed files to /tmp or something like that.  Likewise, important
> binaries and shared libraries installed to the ramdisk will probably need
> to have symlinks pointing to their proper location under / .  (I think the
> symlinks can just be stored on the internal root filesystem OK.  They'll
> just dangle until opkg installs the necessary files on each boot.)
>
> I'm including the .config file I've used for my TP-Link TL-MR3020 for
> reference, although do please bear in mind this wasn't used for compiling
> Commotion.  Likewise, my config files so far exclude all USB stuff.
>
>
> On Sun, Jun 2, 2013 at 9:14 AM, Seamus Tuohy <s2e at opentechinstitute.org>wrote:
>
"
1423,Commotion-dev, Custom Commotion images for Red Hook,"Tue, 04 Jun 2013 18:26:31 -0400",-0400,Dan Staples,"I just finished putting together custom Commotion-OpenWRT DR1 images for
the Red Hook network. These images have the following features:

* Upon flashing the new image, a wireless access point and an
ad-hoc/mesh interface are both brought up by default
* The mesh interface will keep the same 5.x.x.x IP address it had before
flashing, and encryption is turned off so it will mesh with other PR3 nodes
* The default access point has the SSID ""RHIwifi""
* n2n VPN is turned on, and will connect to vpn.commotionwireless.net,
allowing for remote troubleshooting

Once you flash the node, you will need to connect to its web interface
to set the admin password and/or complete the Quick Start wizard. Be
mindful that completing the Quick Start will *turn on encryption* on the
mesh interface, so that it will *no longer mesh with PR3 nodes*. You can
set the admin password without completing the Quick Start.

The images can be found here (I wasn't able to upload them to Redmine):
http://wirelesssummit.org:8000/

For the developers, here are the additions I made:
https://github.com/opentechinstitute/commotion-openwrt/commit/95739178f0f3ca6c2986d785d5c6393a13652ddd.
In the commit message, I reference two fixes that are also required for
the image to work, one for commotiond, and one for quick-start.

Here's a rundown of how I tested them:

1. I had two nodes, A and B, that both had PR3. I connected to A's
access point.
2. I opened my browser and went to B's 5.x.x.x address to get to the web
interface.
3. A captive portaled me, so I clicked ""accept"" and it redirected me to
commotionwireless.net
4. I tried to go to B's 5.x.x.x address again, and this time it worked.
5. I went to System->Backup/Flash Firmware
6. At the bottom of the page, *I *unchecked* ""Keep settings""* (this is
important!!!) and then uploaded the proper image, and flashed the node.
7. After a few minutes, I was able to go to B's web interface at the
same IP address, while still connected through A's access point.
8. I then completed B's Quick Start wizard
9. I repeated the same process for A, and after all was said and done,
they were both upgraded to DR1, and using an encrypted mesh.

I'll be up in Red Hook later this week to help with upgrades, but wanted
to document this for everyone's benefit.

cheers,
Dan

-- 
Dan Staples

Open Technology Institute
https://commotionwireless.net

"
1424,Commotion-dev, Secure wireless access points,"Wed, 05 Jun 2013 01:56:44 -0400",-0400,High Speed Internet,"An HTML attachment was scrubbed...
URL: <http://lists.chambana.net/pipermail/commotion-dev/attachments/20130605/f7e260df/attachment.html>
"
1425,Commotion-dev, What's the word on DR1.1?,"Wed, 5 Jun 2013 11:19:44 -0400",-0400,Preston Rhea,"Moving this to commotion-dev (original recipients on BCC).

My setup was:

(BKFiber point-to-point Nano LoCo 5GHz gateway ) "
1426,Commotion-dev, What's the word on DR1.1?,"Wed, 05 Jun 2013 12:35:25 -0400",-0400,Dan Staples,"I did some quick testing, and here are my results:

I had two picostations wired to my home router, so they were both
internet gateways. The two picostations were sitting about a foot and a
half from each other, and both were about two feet from my home wireless
router. I had laptop A (LA) connected to picostation A's (PA) access
point, about 4 feet apart, and laptop B (LB) connected to picostation
B's (PB) access point, about a foot and a half apart. Clearly, a very
dense network with powerful radios.

For the first test, I had each laptop ping both of the routers for 10
minutes, all at once. I didn't ping out to the internet, since latency
added outside of the Commotion mesh is something that is out of our
hands. Here are the results:


	Picostation A
	Picostation B
Laptop A
	579 packets transmitted, 579 received, 0% packet loss, time 578821ms
rtt min/avg/max/mdev = 3.015/43.496/1077.565/75.168 ms, pipe 2
	573 packets transmitted, 486 received, 15% packet loss, time 573162ms
rtt min/avg/max/mdev = 3.024/70.835/1370.596/104.428 ms, pipe 2
Laptop B
	593 packets transmitted, 593 received, 0% packet loss, time 592896ms
rtt min/avg/max/mdev = 2.254/30.458/337.962/33.694 ms
	587 packets transmitted, 524 received, 10% packet loss, time 587164ms
rtt min/avg/max/mdev = 2.864/58.639/396.346/53.250 ms


I then disconnected PB, had LA ping PA for 10 minutes, then turned off
PA and turned back on PB, and had LB ping PB for 10 minutes:


	Picostation A
	Picostation B
Laptop A
	600 packets transmitted, 600 received, 0% packet loss, time 599589ms
rtt min/avg/max/mdev = 1.286/4.876/180.558/11.671 ms 	
Laptop B
	
	604 packets transmitted, 604 received, 0% packet loss, time 603863ms
rtt min/avg/max/mdev = 1.998/3.715/98.925/4.888 ms


As we can see in even this controlled experiment, disconnecting one of
the nodes significantly reduces ping times. However, definitely not a
latency difference of the scale yall have been reporting in Dharamsala
or Red Hook. Which makes me wonder if the latency issue yall are
experiencing is caused by latency introduced outside of the Commotion
network, past the upstream gateway, or if there are other local factors
involved.

Can yall try a similar test, pinging the local routers instead of the
internet? That will help us figure out whether the issue is localized or
not.

Dan

On 06/05/2013 11:19 AM, Preston Rhea wrote:
> Moving this to commotion-dev (original recipients on BCC).
>
> My setup was:
>
> (BKFiber point-to-point Nano LoCo 5GHz gateway ) "
1427,Commotion-dev, Fwd:  What's the word on DR1.1?,"Wed, 5 Jun 2013 11:35:21 -0500",-0500,Ben West,"I'm seeing this striking detail:

- 2 separate Commotion nodes hanging off the near end of the 5GHz P2P link
from BKFiber
- I unplugged the Nano and then Internet access worked great on the Pico.

How close together physically are the Nano and Pico running DR1.1?  Also, I
assume they're on the same channel too?

Since both Commotion nodes are still operating as wired gateway nodes,
regardless of DHCP settings, I think it's very likely they are interfering
with each other.  I had similar problems (i.e. super long latency) try to
operate more than one node on the same mast on the same channel.

You want to have 2 wired Commotion nodes within very close proximity, they
will either need to operate on different channels, or one will have just be
a repeater node (and with its TX power turned way down).

On Wed, Jun 5, 2013 at 10:19 AM, Preston Rhea <
prestonrhea at opentechinstitute.org> wrote:

> Moving this to commotion-dev (original recipients on BCC).
>
> My setup was:
>
> (BKFiber point-to-point Nano LoCo 5GHz gateway ) "
1428,Commotion-dev, What's the word on DR1.1?,"Wed, 05 Jun 2013 13:17:01 -0400",-0400,Will Hawkins,"Just a quick note to possibly build on this: We are seeing instances 
where nodes are in very close proximity and pings between a node 
associated with the access point and the access point itself vary 
widely. Three or four pings will return in < 5ms and then three or four 
will return in 1000s of ms. We seemed to have narrowed this down to 
""environment"" circumstances (power, RF interference, etc), but I wanted 
to send this along in case it helped anyone!

Will

On 06/05/2013 12:35 PM, Dan Staples wrote:
> I did some quick testing, and here are my results:
>
> I had two picostations wired to my home router, so they were both
> internet gateways. The two picostations were sitting about a foot and a
> half from each other, and both were about two feet from my home wireless
> router. I had laptop A (LA) connected to picostation A's (PA) access
> point, about 4 feet apart, and laptop B (LB) connected to picostation
> B's (PB) access point, about a foot and a half apart. Clearly, a very
> dense network with powerful radios.
>
> For the first test, I had each laptop ping both of the routers for 10
> minutes, all at once. I didn't ping out to the internet, since latency
> added outside of the Commotion mesh is something that is out of our
> hands. Here are the results:
>
>
> 	Picostation A
> 	Picostation B
> Laptop A
> 	579 packets transmitted, 579 received, 0% packet loss, time 578821ms
> rtt min/avg/max/mdev = 3.015/43.496/1077.565/75.168 ms, pipe 2
> 	573 packets transmitted, 486 received, 15% packet loss, time 573162ms
> rtt min/avg/max/mdev = 3.024/70.835/1370.596/104.428 ms, pipe 2
> Laptop B
> 	593 packets transmitted, 593 received, 0% packet loss, time 592896ms
> rtt min/avg/max/mdev = 2.254/30.458/337.962/33.694 ms
> 	587 packets transmitted, 524 received, 10% packet loss, time 587164ms
> rtt min/avg/max/mdev = 2.864/58.639/396.346/53.250 ms
>
>
> I then disconnected PB, had LA ping PA for 10 minutes, then turned off
> PA and turned back on PB, and had LB ping PB for 10 minutes:
>
>
> 	Picostation A
> 	Picostation B
> Laptop A
> 	600 packets transmitted, 600 received, 0% packet loss, time 599589ms
> rtt min/avg/max/mdev = 1.286/4.876/180.558/11.671 ms 	
> Laptop B
> 	
> 	604 packets transmitted, 604 received, 0% packet loss, time 603863ms
> rtt min/avg/max/mdev = 1.998/3.715/98.925/4.888 ms
>
>
> As we can see in even this controlled experiment, disconnecting one of
> the nodes significantly reduces ping times. However, definitely not a
> latency difference of the scale yall have been reporting in Dharamsala
> or Red Hook. Which makes me wonder if the latency issue yall are
> experiencing is caused by latency introduced outside of the Commotion
> network, past the upstream gateway, or if there are other local factors
> involved.
>
> Can yall try a similar test, pinging the local routers instead of the
> internet? That will help us figure out whether the issue is localized or
> not.
>
> Dan
>
> On 06/05/2013 11:19 AM, Preston Rhea wrote:
"
1429,Commotion-dev, What's the word on DR1.1?,"Wed, 5 Jun 2013 14:20:29 -0400",-0400,Preston Rhea,"To respond to Ben, they are on the same channel and they mesh, but one
is on one side of the building and indoors, the other (the Nano) is on
the other side of the building and on top of the roof, and is facing
away from the Pico that's indoors. The ETX between them was poor, at
7.5.

On Wed, Jun 5, 2013 at 1:17 PM, Will Hawkins
<hawkinsw at opentechinstitute.org> wrote:
> Just a quick note to possibly build on this: We are seeing instances where
> nodes are in very close proximity and pings between a node associated with
> the access point and the access point itself vary widely. Three or four
> pings will return in < 5ms and then three or four will return in 1000s of
> ms. We seemed to have narrowed this down to ""environment"" circumstances
> (power, RF interference, etc), but I wanted to send this along in case it
> helped anyone!
>
> Will
>
>
> On 06/05/2013 12:35 PM, Dan Staples wrote:
"
1430,Commotion-dev, Verifying signatures,"Wed, 05 Jun 2013 16:03:52 -0400",-0400,Dan Staples,"I'm in the process of adding signatures to the binaries on our Download
page. I wanted to get folks' opinions on how to best instruct users on
how to verify GPG signatures. The best resource we've found is Tor's
page: https://www.torproject.org/docs/verifying-signatures.html.en, but
it is a bit too specific to Tor itself in my opinion, and so we probably
wouldn't want to just link to it and leave it at that.

Does anyone else know of any good tutorials on how to verify GPG
signatures, tailored for someone who might not have even used GPG
before? If we can't find something better than Tor's instructions, I
might just write up our own tutorial tailored to Commotion, borrowing a
lot from Tor's page.

Dan

-- 
Dan Staples

Open Technology Institute
https://commotionwireless.net

"
1431,Commotion-dev, Verifying signatures,"Wed, 05 Jun 2013 16:32:47 -0400",-0400,Andrew Reynolds,"I've seen a couple of decent walkthroughs but they're all either written
for a specific software package (e.g., tor's page) or a specific
operating system.

I suspect we could cherry pick from several pages faster than we could
find one well written page that covers exactly what we need.

-andrew

On 06/05/2013 04:03 PM, Dan Staples wrote:
> I'm in the process of adding signatures to the binaries on our Download
> page. I wanted to get folks' opinions on how to best instruct users on
> how to verify GPG signatures. The best resource we've found is Tor's
> page: https://www.torproject.org/docs/verifying-signatures.html.en, but
> it is a bit too specific to Tor itself in my opinion, and so we probably
> wouldn't want to just link to it and leave it at that.
> 
> Does anyone else know of any good tutorials on how to verify GPG
> signatures, tailored for someone who might not have even used GPG
> before? If we can't find something better than Tor's instructions, I
> might just write up our own tutorial tailored to Commotion, borrowing a
> lot from Tor's page.
> 
> Dan
> 


"
1432,Commotion-dev, Verifying signatures,"Wed, 05 Jun 2013 16:36:44 -0400",-0400,Josh King,"I don't know of one that is geared towards people that may not have used
GPG before. Apache has a pretty comprehensive overview of
release-signing in general, though:

https://www.apache.org/dev/release-signing.html

Technical, but a good resource to draw from.

On Wed 05 Jun 2013 04:32:47 PM EDT, Andrew Reynolds wrote:
> I've seen a couple of decent walkthroughs but they're all either written
> for a specific software package (e.g., tor's page) or a specific
> operating system.
>
> I suspect we could cherry pick from several pages faster than we could
> find one well written page that covers exactly what we need.
>
> -andrew
>
> On 06/05/2013 04:03 PM, Dan Staples wrote:
"
1433,Commotion-dev, Verifying signatures,"Wed, 05 Jun 2013 16:38:18 -0400",-0400,Nat Meysenburg,"Dan Staples <danstaples at opentechinstitute.org> writes:
> Does anyone else know of any good tutorials on how to verify GPG
> signatures, tailored for someone who might not have even used GPG
> before? If we can't find something better than Tor's instructions, I
> might just write up our own tutorial tailored to Commotion, borrowing a
> lot from Tor's page.

Tor's is the best that I know. I think it is totally fine to borrow
heavily from their write up, and acknowledge that fact.

Having a page that specifically talks about verifying Commotion, as
opposed to the process of verifying arbitrary files signed with PGP
keys, is probably more useful for Commotion's general documentation
goals.

Though a more general piece might make a fine blog post.

My 2?,
~~Nat

"
1434,Commotion-dev, Verifying signatures,"Wed, 05 Jun 2013 16:39:17 -0400",-0400,Dan Staples,"Cool, thanks for the feedback. I will update the download page, and 
then start working on a writeup for verifying signatures.

On Wed 05 Jun 2013 04:38:18 PM EDT, Nat Meysenburg wrote:
> Dan Staples <danstaples at opentechinstitute.org> writes:
"
1435,Commotion-dev, What's the word on DR1.1?,"Wed, 05 Jun 2013 22:26:52 -0400",-0400,Will Hawkins,"Just a quick note before we head out for the day here:

The most common error that we've seen here is when the physical and the 
software interfaces become unattached. I.e., the ""option network 'x'"" 
gets removed. We've seen this happen for a number of reasons which I can 
detail in another email.

In terms of debugging, here are a few of the tell-tale symptoms of this 
problem:

1. AP: Clients can associate but DHCP does not hand out leases.
2: Mesh: OLSR does not run (no neighbors)

(I numbered that list because I thought there were more. Sorry!)

In sum: If you are seeing ""odd"" behavior, check this setting first.

Hope this helps,
Will



On 06/05/2013 02:20 PM, Preston Rhea wrote:
> To respond to Ben, they are on the same channel and they mesh, but one
> is on one side of the building and indoors, the other (the Nano) is on
> the other side of the building and on top of the roof, and is facing
> away from the Pico that's indoors. The ETX between them was poor, at
> 7.5.
>
> On Wed, Jun 5, 2013 at 1:17 PM, Will Hawkins
> <hawkinsw at opentechinstitute.org> wrote:
"
1436,Commotion-dev, What's the word on DR1.1?,"Thu, 06 Jun 2013 07:39:04 +0200",+0200,"Mikael ""MMN-o"" Nordfeldth","On 2013-06-06 04:26, Will Hawkins wrote:
> 1. AP: Clients can associate but DHCP does not hand out leases.
> 2: Mesh: OLSR does not run (no neighbors)
> 
> (I numbered that list because I thought there were more. Sorry!)
> 
> In sum: If you are seeing ""odd"" behavior, check this setting first.

I believe I am experiencing #2 in your list, as my nodes often reconnect
over olsr when reapplying the Wifi network settings on at least one of
them (haven't debugged more than that yet).

Which setting are you referring to? (or do you just mean check whether
""option network ..."" is properly setup in uci config?)

"
1437,Commotion-dev, commotion site navigation/architecture feedback,"Thu, 06 Jun 2013 15:15:42 -0400",-0400,Chris Ritzo,"Good afternoon,
Based on past information architecture work to restructure the
commotionwireless.net site, the two proposals on this page were developed:

https://code.commotionwireless.net/projects/commotion/wiki/CommotionWirelessIAProposal

Please review these two proposed site structures and provide email
feedback on-list prior to June 12, 2013. Implementation of a new site
structure will proceed after that and be informed by your discussion.

Thanks in advance,
Chris Ritzo
Technologist, OTI
New America Foundation
"
1438,Commotion-dev," QOS, Commotion, and Tomato's","Fri, 07 Jun 2013 09:08:04 -0400",-0400,Seamus Tuohy,"Hello All,

I dropped development on a user interfacefor the QOS work a few weeks
ago and I wanted to give an update in case anyone wants to take it on in
the future.

Looking at various interfaces I think that modifying the Tomato
interface for QOS http://www.easytomato.org/features/scheduled-rules/,
which is based on the Toastman version of Tomato
http://linksysinfo.org/index.php?threads/toastman-releases.36106/, is
the best option for implementing QOS on Commotion. It is currently built
for DD-Wrt, but looking at the scripts it mainly creates TC files, and
as such, would be an easy enough lift to move over to OpenWRT and LuCI.
Though, there will be some extra work fiddling with multiple zone rules.

Below is some useful info from William Dixon at Easy Tomato that I
thought would be useful to append to this if anyone wants to continue
this work.

""One of the really hard parts of this is to automatically figure out
your connection speed without constantly blasting huge amounts of data
over the network (you need your speed for QoS settings and they can
fluctuate a lot during a day).  There are a few ways to do it, but its a
lot of work, but really needs to a grad research project.  We were
hoping research group at GaTech would do it for us, but that's looking
less likely.

This is
long<http://www.linksysinfo.org/index.php?threads/using-qos-tutorial-and-discussion.28349/>,
but a very good overview of how QOS stuff works.  It takes a LOT of
fiddling to get it really sail (and more dangerously, some
counterintuitive settings), but once it does, it's awesome!  We got a
hospital with 100 computers to go from website timeouts to skype calls
with a single router!""


s2e
"
1439,Commotion-dev," QOS, Commotion, and Tomato's","Fri, 07 Jun 2013 12:44:46 -0400",-0400,Will Hawkins,"Hey Seamus,

I will admit upfront that tl;dr. However, we've had lots of feedback 
from the participants in the workshop that QoS and traffic parameters 
would be immensely useful tools for mesh deployments. I've told them all 
about your work and I'm sure that no matter what path our development 
takes on this issue you will come up with a great tool.

Will

On 06/07/2013 09:08 AM, Seamus Tuohy wrote:
> Hello All,
>
> I dropped development on a user interfacefor the QOS work a few weeks
> ago and I wanted to give an update in case anyone wants to take it on in
> the future.
>
> Looking at various interfaces I think that modifying the Tomato
> interface for QOS http://www.easytomato.org/features/scheduled-rules/,
> which is based on the Toastman version of Tomato
> http://linksysinfo.org/index.php?threads/toastman-releases.36106/, is
> the best option for implementing QOS on Commotion. It is currently built
> for DD-Wrt, but looking at the scripts it mainly creates TC files, and
> as such, would be an easy enough lift to move over to OpenWRT and LuCI.
> Though, there will be some extra work fiddling with multiple zone rules.
>
> Below is some useful info from William Dixon at Easy Tomato that I
> thought would be useful to append to this if anyone wants to continue
> this work.
>
> ""One of the really hard parts of this is to automatically figure out
> your connection speed without constantly blasting huge amounts of data
> over the network (you need your speed for QoS settings and they can
> fluctuate a lot during a day).  There are a few ways to do it, but its a
> lot of work, but really needs to a grad research project.  We were
> hoping research group at GaTech would do it for us, but that's looking
> less likely.
>
> This is
> long<http://www.linksysinfo.org/index.php?threads/using-qos-tutorial-and-discussion.28349/>,
> but a very good overview of how QOS stuff works.  It takes a LOT of
> fiddling to get it really sail (and more dangerously, some
> counterintuitive settings), but once it does, it's awesome!  We got a
> hospital with 100 computers to go from website timeouts to skype calls
> with a single router!""
>
>
> s2e
> _______________________________________________
> Commotion-dev mailing list
> Commotion-dev at lists.chambana.net
> https://lists.chambana.net/mailman/listinfo/commotion-dev
"
1440,Commotion-dev," QOS, Commotion, and Tomato's","Fri, 7 Jun 2013 12:11:33 -0500",-0500,Ben West,"Is the thinking here along the lines of building UI elements on top of the
QOS implementation already provided via qos-scripts and luci-apps-qos?  Or
an entirely new OOS implementation?

If you're looking at an entirely new OOS implementation, a possible
difficulty is that OpenWRT AA has adopted bleeding edge kernel versions
obsolete certain methods typical to older QOS implementations.  Most
recently in a thread on this list, the departure of IMQ from the kernel
layer rendered the bandwidth throttling features of the nodogsplash captive
portal inoperative.

Do you know what kernel version EasyTomato is bundling?  I believe Tomato
itself is still wedded to kernel v2.6 (or older?) and unfortunately fully
obsolete for the topic at hand.

Besides all that, it may just be simplest to encourage the end user to
input their overall Up/Down bandwidth values into any QOS admin UI form,
rather than having the node itself try to determine that.  It could be a
basic step like ""connect your laptop directly to your Internet connection
and run speedtest.net a few times ...""

On Fri, Jun 7, 2013 at 8:08 AM, Seamus Tuohy <s2e at opentechinstitute.org>wrote:

> Hello All,
>
> I dropped development on a user interfacefor the QOS work a few weeks
> ago and I wanted to give an update in case anyone wants to take it on in
> the future.
>
> Looking at various interfaces I think that modifying the Tomato
> interface for QOS http://www.easytomato.org/features/scheduled-rules/,
> which is based on the Toastman version of Tomato
> http://linksysinfo.org/index.php?threads/toastman-releases.36106/, is
> the best option for implementing QOS on Commotion. It is currently built
> for DD-Wrt, but looking at the scripts it mainly creates TC files, and
> as such, would be an easy enough lift to move over to OpenWRT and LuCI.
> Though, there will be some extra work fiddling with multiple zone rules.
>
> Below is some useful info from William Dixon at Easy Tomato that I
> thought would be useful to append to this if anyone wants to continue
> this work.
>
> ""One of the really hard parts of this is to automatically figure out
> your connection speed without constantly blasting huge amounts of data
> over the network (you need your speed for QoS settings and they can
> fluctuate a lot during a day).  There are a few ways to do it, but its a
> lot of work, but really needs to a grad research project.  We were
> hoping research group at GaTech would do it for us, but that's looking
> less likely.
>
> This is
> long<
> http://www.linksysinfo.org/index.php?threads/using-qos-tutorial-and-discussion.28349/
> >,
> but a very good overview of how QOS stuff works.  It takes a LOT of
> fiddling to get it really sail (and more dangerously, some
> counterintuitive settings), but once it does, it's awesome!  We got a
> hospital with 100 computers to go from website timeouts to skype calls
> with a single router!""
>
>
> s2e
> _______________________________________________
> Commotion-dev mailing list
> Commotion-dev at lists.chambana.net
> https://lists.chambana.net/mailman/listinfo/commotion-dev
>
"
1441,Commotion-dev," QOS, Commotion, and Tomato's","Fri, 07 Jun 2013 14:34:48 -0400",-0400,Will Hawkins,"On 06/07/2013 01:11 PM, Ben West wrote:
> Is the thinking here along the lines of building UI elements on top of
> the QOS implementation already provided via qos-scripts and
> luci-apps-qos?  Or an entirely new OOS implementation?
>
> If you're looking at an entirely new OOS implementation, a possible
> difficulty is that OpenWRT AA has adopted bleeding edge kernel versions
> obsolete certain methods typical to older QOS implementations.  Most
> recently in a thread on this list, the departure of IMQ from the kernel
> layer rendered the bandwidth throttling features of the nodogsplash
> captive portal inoperative.

Would you mind sending a link to any information you have about IMQ 
inclusion/removal from the kernel? I'm just curious is all!

Will

>
> Do you know what kernel version EasyTomato is bundling?  I believe
> Tomato itself is still wedded to kernel v2.6 (or older?) and
> unfortunately fully obsolete for the topic at hand.
>
> Besides all that, it may just be simplest to encourage the end user to
> input their overall Up/Down bandwidth values into any QOS admin UI form,
> rather than having the node itself try to determine that.  It could be a
> basic step like ""connect your laptop directly to your Internet
> connection and run speedtest.net <http://speedtest.net> a few times ...""
>
> On Fri, Jun 7, 2013 at 8:08 AM, Seamus Tuohy <s2e at opentechinstitute.org
> <mailto:s2e at opentechinstitute.org"
1442,Commotion-dev," QOS, Commotion, and Tomato's","Fri, 07 Jun 2013 14:47:25 -0400",-0400,Will Hawkins,"On 06/07/2013 02:34 PM, Will Hawkins wrote:
> On 06/07/2013 01:11 PM, Ben West wrote:
"
1443,Commotion-dev," QOS, Commotion, and Tomato's","Fri, 7 Jun 2013 13:58:23 -0500",-0500,Ben West,"On Fri, Jun 7, 2013 at 1:34 PM, Will Hawkins <hawkinsw at opentechinstitute.org
> wrote:

> On 06/07/2013 01:11 PM, Ben West wrote:
>
"
1444,Commotion-dev," QOS, Commotion, and Tomato's","Fri, 07 Jun 2013 15:02:15 -0400",-0400,Will Hawkins,"On 06/07/2013 02:58 PM, Ben West wrote:
>
> On Fri, Jun 7, 2013 at 1:34 PM, Will Hawkins
> <hawkinsw at opentechinstitute.org <mailto:hawkinsw at opentechinstitute.org"
1445,Commotion-dev, Commotion Hack Day comments on Reddit re: public,"Fri, 7 Jun 2013 17:05:20 -0400",-0400,Preston Rhea,"Note the first one, just for sake of public perception:
http://www.reddit.com/r/darknetplan/comments/1ff358/nyc_hack_day_for_mesh_apps_via_commotion_wireless/

It's a comment which a couple of local ISP people have made to me in
Red Hook with concern.

--
Preston Rhea
Program Associate, Open Technology Institute
New America Foundation
+1-202-570-9770
Twitter: @prestonrhea

"
1446,Commotion-dev, Commotion Hack Day comments on Reddit re:,"Sat, 08 Jun 2013 09:32:49 +0200",+0200,Mikael Nordfeldth,"2013-06-07 23:05 skrev Preston Rhea:
> Note the first one, just for sake of public perception:
> http://www.reddit.com/r/darknetplan/comments/1ff358/nyc_hack_day_for_mesh_apps_via_commotion_wireless/
> 
> It's a comment which a couple of local ISP people have made to me in
> Red Hook with concern.

It's also the probably most important reason why we in Ume? Hackerspace 
are preparing and building our own openwrt images ;)

(except that we're also going to be trying out IPv6-only)

-- 
Mikael Nordfeldth
http://blog.mmn-o.se/
Xmpp/mail: mmn at hethane.se

"
1447,Commotion-dev," QOS, Commotion, and Tomato's","Sun, 09 Jun 2013 08:46:36 -0400",-0400,Will Hawkins,"As a follow-up to this, I just had a workshop participant come to me and 
reiterate the importance of gateway control. In his network, he says 
that it would be useful to:

a) configure whether a gateway is used at all (on/off)
b) configure a specific subset of IP addresses for gateway access

in addition to being able to limit the amount of bandwidth offered to 
the mesh users from a gateway. Ryan, Andy and I talked about how this 
could be accomplished and I realize that it's already technically 
possible and may already even be doable from the web UI. I just wanted 
to flag it specifically so that we can keep it on the top of our mind.

The other consistent theme we've heard from participants this week is 
that they really want to be able to control (anticipate) how 
olsrd/smartgw handle multiple gateways on the same mesh.

Ryan, Andy: Anything to add specifically related to gateway/QoS control 
from what we've heard this week?

Will



On 06/07/2013 03:02 PM, Will Hawkins wrote:
> On 06/07/2013 02:58 PM, Ben West wrote:
"
1448,Commotion-dev," QOS, Commotion, and Tomato's","Sun, 09 Jun 2013 10:06:22 -0400",-0400,Dan Staples,"As this discussion continues, would you mind filing these things as
feature requests on the Redmine tracker? Just want to make sure these
ideas don't get lost and/or forgotten...

On 06/09/2013 08:46 AM, Will Hawkins wrote:
> As a follow-up to this, I just had a workshop participant come to me
> and reiterate the importance of gateway control. In his network, he
> says that it would be useful to:
>
> a) configure whether a gateway is used at all (on/off)
> b) configure a specific subset of IP addresses for gateway access
>
> in addition to being able to limit the amount of bandwidth offered to
> the mesh users from a gateway. Ryan, Andy and I talked about how this
> could be accomplished and I realize that it's already technically
> possible and may already even be doable from the web UI. I just wanted
> to flag it specifically so that we can keep it on the top of our mind.
>
> The other consistent theme we've heard from participants this week is
> that they really want to be able to control (anticipate) how
> olsrd/smartgw handle multiple gateways on the same mesh.
>
> Ryan, Andy: Anything to add specifically related to gateway/QoS
> control from what we've heard this week?
>
> Will
>
>
>
> On 06/07/2013 03:02 PM, Will Hawkins wrote:
"
1449,Commotion-dev, Commotion DR1.1 Release,"Mon, 10 Jun 2013 10:27:53 -0400",-0400,Josh King,"Hi all,

Now that the download page on the main website is updated, I just wanted
to send out the release notes for our latest point release. This should
be the beginning of a more rapid release cycle. You can download DR1.1 at:

https://commotionwireless.net/download

Release notes below:

Commotion DR1.1 Release Notes

Developer Release 1.1 is the first stable release of the DR1 series.
This release is the beginning of our new stable branch, and represents a
significant step forward from our previous stable release.
What is a Commotion release?

Commotion release versions represent a target set of features for the
entire project
(http://code.commotionwireless.net/projects/commotion/wiki/Official_Version_Feature_Targets).
Software packages for individual platforms (Linux, Windows, etc.) may be
in different stages of development, and are labeled according to their
supported features.
Platform Availability:

Currently, only the OpenWRT-based router firmware is DR1 compatible.
Other platforms are under active development and are being brought up to
feature parity. Current platform revisions can be found on the Official
Version Feature Targets page.
Features:

    Easy-to-use setup wizard: The Commotion Quickstart provides a
simple, one-step interface for setting up a Commotion node.

    Local applications: The Commotion Apps Portal is an interface for
creating and browsing for local network applications.

    Common platform for managing settings: The Commotion Daemon provides
a common management interface for maintaining the configurations of
different community networks.

    Encryption tools: Commotion configures industry-standard IBSS-RSN
encryption by default, and provides the Serval crypto API to aid
developers in creating secure applications.

    Consistent visual style: New Commotion releases are all styled in
accordance with the Commotion Human Interface Guidelines
(http://commotionwireless.net/docs/hig/introduction).

    Simplified debugging: A new Commotion Debugging Helper tool makes it
easy to retrieve useful troubleshooting information from a node in the
event of a network problem.

Fixes:

    Innumerable fixes and changes went into this release since Preview
Release 3 (PR3), the previous stable branch. A complete list can be
found on the Commotion project site.

Included Components:

    avahi-client v0.1:

        Provides automatic network service discovery

        https://github.com/opentechinstitute/avahi-client

    commotion-apps v1.1

        Web-based local application portal for Commotion-OpenWRT

        https://github.com/opentechinstitute/commotion-apps/

    commotion-debug-helper v0.1

        A LuCI-based reporting tool to simplify the process of router
troubleshooting

        https://github.com/opentechinstitute/commotion-bug-info

    commotion-quick-start v0.2

        A one-click tool to simplify router configuration on first boot

        https://github.com/opentechinstitute/commotion-quick-start

    commotion-splash v1.0

        A LuCI interface for configuring nodogsplash captive portal

        https://github.com/opentechinstitute/commotion-splash

    commotiond v0.1

        An extensible daemon and library bundle that will form
Commotion?s core administrative API and simplify the process of porting
to new platforms

        https://github.com/opentechinstitute/commotiond

    luci-commotion-theme v1.1

        HIG-compliant Commotion theme for OpenWRT routers

        https://github.com/opentechinstitute/commotion-openwrt-theme

    luci-commotion v0.1

        Commotion configuration pages for the LuCI web interface

        https://github.com/opentechinstitute/luci-commotion

    olsrd-dnssd v0.1

        Propagates multicast DNS (mDNS) service discovery advertisements
        (DNSSD) over an OLSR mesh network


https://github.com/opentechinstitute/olsrd/tree/release-0.6.5.4/lib/dnssd

    olsrd-mdp v0.1

        Plugin for signing OLSR mesh traffic


https://github.com/opentechinstitute/olsrd/tree/release-0.6.5.4/lib/mdp

    serval-crypto v2.0

        Cryptographic libraries and API for signing mDNS service
advertisements
        https://github.com/opentechinstitute/serval-crypto

"
1450,Commotion-dev, Verifying signatures,"Mon, 10 Jun 2013 12:19:06 -0400",-0400,Dan Staples,"Here is the page I put together (which is about 90% straight from Tor's 
tutorial): https://commotionwireless.net/how-verify-signatures-downloads

Let me know if anyone has feedback or changes.

On Wed 05 Jun 2013 04:39:17 PM EDT, Dan Staples wrote:
> Cool, thanks for the feedback. I will update the download page, and
> then start working on a writeup for verifying signatures.
>
> On Wed 05 Jun 2013 04:38:18 PM EDT, Nat Meysenburg wrote:
"
1451,Commotion-dev, 802.11w,"Tue, 11 Jun 2013 10:33:19 -0400",-0400,Dan Staples,"I tried turning on 802.11w, which basically encrypts 802.11 management
frames, on a Commotion WPA2-secured access point. This had the result of
me not being able to connect to the access point. I tried with my
laptop's built-in wifi, and a TP-Link TL-WN821N USB adapter; neither
worked. Adding the 802.11w flag to the ad-hoc interface appeared to have
no effect.

Has anyone else tried using 802.11w? It seems Microsoft has only just
made it available to clients in Windows 8. So perhaps it's not worth
pursuing for Commotion, due to minimal compatibility.

-- 
Dan Staples

Open Technology Institute
https://commotionwireless.net

"
1452,Commotion-dev, Possible hostapd / IBSS-RSN regression on OpenWRT,"Tue, 11 Jun 2013 15:23:34 -0500",-0500,Ben West,"I recompiled some of my firmware stacks to the most current AA version, and
!shazaam! the IBSS-RSN encrypted adhoc stopped working.  This didn't occur
with the Commotion OpenWRT firmware, but the firmware I observed this on is
90% similar.

I think this is the offending changeset:
https://dev.openwrt.org/changeset/36682/branches/attitude_adjustment/package/hostapd

AA r36608 is known to work fine.

Note that I use the full hostapd and wpa_supplicant packages for encrypted
adhoc.  I believe Commotion OpenWRT does the same.

-- 
Ben West
http://gowasabi.net
ben at gowasabi.net
314-246-9434
"
1453,Commotion-dev, Commotion DR1.1 Release,"Tue, 11 Jun 2013 17:03:26 -0500",-0500,Ben West,"Congratulations on the stable release!

On Mon, Jun 10, 2013 at 9:27 AM, Josh King <jking at chambana.net> wrote:

> Hi all,
>
> Now that the download page on the main website is updated, I just wanted
> to send out the release notes for our latest point release. This should
> be the beginning of a more rapid release cycle. You can download DR1.1 at:
>
> https://commotionwireless.net/download
>
> Release notes below:
>
> Commotion DR1.1 Release Notes
>
> Developer Release 1.1 is the first stable release of the DR1 series.
> This release is the beginning of our new stable branch, and represents a
> significant step forward from our previous stable release.
> What is a Commotion release?
>
> Commotion release versions represent a target set of features for the
> entire project
> (
> http://code.commotionwireless.net/projects/commotion/wiki/Official_Version_Feature_Targets
> ).
> Software packages for individual platforms (Linux, Windows, etc.) may be
> in different stages of development, and are labeled according to their
> supported features.
> Platform Availability:
>
> Currently, only the OpenWRT-based router firmware is DR1 compatible.
> Other platforms are under active development and are being brought up to
> feature parity. Current platform revisions can be found on the Official
> Version Feature Targets page.
> Features:
>
>     Easy-to-use setup wizard: The Commotion Quickstart provides a
> simple, one-step interface for setting up a Commotion node.
>
>     Local applications: The Commotion Apps Portal is an interface for
> creating and browsing for local network applications.
>
>     Common platform for managing settings: The Commotion Daemon provides
> a common management interface for maintaining the configurations of
> different community networks.
>
>     Encryption tools: Commotion configures industry-standard IBSS-RSN
> encryption by default, and provides the Serval crypto API to aid
> developers in creating secure applications.
>
>     Consistent visual style: New Commotion releases are all styled in
> accordance with the Commotion Human Interface Guidelines
> (http://commotionwireless.net/docs/hig/introduction).
>
>     Simplified debugging: A new Commotion Debugging Helper tool makes it
> easy to retrieve useful troubleshooting information from a node in the
> event of a network problem.
>
> Fixes:
>
>     Innumerable fixes and changes went into this release since Preview
> Release 3 (PR3), the previous stable branch. A complete list can be
> found on the Commotion project site.
>
> Included Components:
>
>     avahi-client v0.1:
>
>         Provides automatic network service discovery
>
>         https://github.com/opentechinstitute/avahi-client
>
>     commotion-apps v1.1
>
>         Web-based local application portal for Commotion-OpenWRT
>
>         https://github.com/opentechinstitute/commotion-apps/
>
>     commotion-debug-helper v0.1
>
>         A LuCI-based reporting tool to simplify the process of router
> troubleshooting
>
>         https://github.com/opentechinstitute/commotion-bug-info
>
>     commotion-quick-start v0.2
>
>         A one-click tool to simplify router configuration on first boot
>
>         https://github.com/opentechinstitute/commotion-quick-start
>
>     commotion-splash v1.0
>
>         A LuCI interface for configuring nodogsplash captive portal
>
>         https://github.com/opentechinstitute/commotion-splash
>
>     commotiond v0.1
>
>         An extensible daemon and library bundle that will form
> Commotion?s core administrative API and simplify the process of porting
> to new platforms
>
>         https://github.com/opentechinstitute/commotiond
>
>     luci-commotion-theme v1.1
>
>         HIG-compliant Commotion theme for OpenWRT routers
>
>         https://github.com/opentechinstitute/commotion-openwrt-theme
>
>     luci-commotion v0.1
>
>         Commotion configuration pages for the LuCI web interface
>
>         https://github.com/opentechinstitute/luci-commotion
>
>     olsrd-dnssd v0.1
>
>         Propagates multicast DNS (mDNS) service discovery advertisements
>         (DNSSD) over an OLSR mesh network
>
>
> https://github.com/opentechinstitute/olsrd/tree/release-0.6.5.4/lib/dnssd
>
>     olsrd-mdp v0.1
>
>         Plugin for signing OLSR mesh traffic
>
>
> https://github.com/opentechinstitute/olsrd/tree/release-0.6.5.4/lib/mdp
>
>     serval-crypto v2.0
>
>         Cryptographic libraries and API for signing mDNS service
> advertisements
>         https://github.com/opentechinstitute/serval-crypto
>
>
> _______________________________________________
> Commotion-dev mailing list
> Commotion-dev at lists.chambana.net
> https://lists.chambana.net/mailman/listinfo/commotion-dev
>
"
1454,Commotion-dev," Whether to use encrypted meshing,","Tue, 11 Jun 2013 17:12:41 -0500",-0500,Ben West,"FYI, recent patches that appeared on OpenWRT-dev listserv for authsae
support.  However, this may require disabling hardware encryption?

[PATCH] Add elliptic curve crypto compilation options to openssl
https://lists.openwrt.org/pipermail/openwrt-devel/2013-May/020268.html

[PATCH v3] authsae 80211s authentication daemon
https://lists.openwrt.org/pipermail/openwrt-devel/2013-May/020269.html

[PATCH v2] authsae: adapt uci scripts to use authsae
https://lists.openwrt.org/pipermail/openwrt-devel/2013-June/020346.html
https://lists.openwrt.org/pipermail/openwrt-devel/2013-June/020371.html(must
disable hwcrypt?)


On Wed, Dec 19, 2012 at 12:15 PM, Will Hawkins <
hawkinsw at opentechinstitute.org> wrote:

> Ben,
>
> Sorry for just now responding!
>
> On 12/12/2012 07:18 PM, Ben West wrote:
> > Likewise, thank you every for the detailed responses, and especially for
> > providing all the background on what is clearly a well known problem.
> >
> > W.r.t. authsae mentioned by Daniel, I do find this patch for adding an
> > authsae daemon to OpenWRT, although I believe this patch is targeted for
> > 802.11s.
> > http://patchwork.openwrt.org/patch/1350/
> >
> > Likewise this ticket in the OpenWRT queue:
> > https://dev.openwrt.org/ticket/12078
> >
> > Further investigation into authsae options for 802.11n adhoc leads to
> > this issue filed by Will Hawkins on a very familiar looking website:
> > https://code.commotionwireless.net/issues/305
> >
> > ""Submitted some patches upstream to cozybit authsae project. Next up,
> > attempting to upstream patches to the kernel.""
> >
> > Will, do you happen to links to the patch submissions you made for
> > kernel and authsae?  I'm curious when this makes its way into OpenWRT
> > trunk.  (No mention of authsae in recent OpenWRT-devel chatter.)
>
> I have links to the patches that I submitted for the Linux kernel to
> make authsae possible over adhoc networks. The change is a rather modest
> two lines and was accepted into the kernel months ago. If you are
> running compat-wireless or a recent kernel you probably already have the
> change. Otherwise, you can look here:
>
> http://git.kernel.org/?p=linux/kernel/git/jberg/mac80211.git;a=commit;h=3bfda62c50b0a4b118dcfce36686508ca2892292
>
> http://git.kernel.org/?p=linux/kernel/git/jberg/mac80211.git;a=commit;h=452a6d22615bb8262a932b362f41fc5d89f03293
>
> http://git.kernel.org/?p=linux/kernel/git/jberg/mac80211.git;a=commit;h=6abe0563224f8540c88e1d84d2bb394bd408c951
>
> As for the authsae patches, I submitted them to the Cozybit developers.
> They suggested improvements/changes and we went back and forth several
> times. We stopped going down that path because we decided that it would
> ultimately be better to integrate authsae directly with wpa_supplicant
> so that we would not need to add an extra binary into Commotion. But, if
> you are curious, you can look here:
> https://github.com/hawkinswnaf/authsae
>
> Fortunately, the cozybit people already have a ""custom"" wpa_supplicant
> with authsae support. Yet, that's not the end of the issue. The signal
> that they used to trigger an authsae handshake was not available for
> adhoc nodes. That recently changed. Within the last week there was a
> kernel patch that will allow us to grab a signal when a new peer adhoc
> node is available for authentication. This means that we'll have an
> easier time integrating authsae for mesh in wpa_supplicant.
>
> I hope this information helped provide a little bit of background about
> what we are working on with authsae. It's a pretty long-winded way of
> saying, ""we're working on it"". :-)  Let me know your thoughts!
>
> Talk to you soon!
> Will
>
> >
> > --
> > Ben West
> > http://gowasabi.net
> > ben at gowasabi.net <mailto:ben at gowasabi.net>
> > 314-246-9434
> >
> >
> >
> > _______________________________________________
> > Commotion-dev mailing list
> > Commotion-dev at lists.chambana.net
> > http://lists.chambana.net/mailman/listinfo/commotion-dev
> >
> _______________________________________________
> Commotion-dev mailing list
> Commotion-dev at lists.chambana.net
> http://lists.chambana.net/mailman/listinfo/commotion-dev
>
"
1455,Commotion-dev, Possible hostapd / IBSS-RSN regression on,"Tue, 11 Jun 2013 23:14:23 -0500",-0500,Ben West,"Yep, I can confirm that rolling back to Attitude Adjustment r36681 and
recompiling restored IBSS-RSN adhoc encryption.

On Tue, Jun 11, 2013 at 3:23 PM, Ben West <ben at gowasabi.net> wrote:

> I recompiled some of my firmware stacks to the most current AA version,
> and !shazaam! the IBSS-RSN encrypted adhoc stopped working.  This didn't
> occur with the Commotion OpenWRT firmware, but the firmware I observed this
> on is 90% similar.
>
> I think this is the offending changeset:
>
> https://dev.openwrt.org/changeset/36682/branches/attitude_adjustment/package/hostapd
>
> AA r36608 is known to work fine.
>
> Note that I use the full hostapd and wpa_supplicant packages for encrypted
> adhoc.  I believe Commotion OpenWRT does the same.
>
> --
> Ben West
> http://gowasabi.net
> ben at gowasabi.net
> 314-246-9434
"
1456,Commotion-dev, Possible hostapd / IBSS-RSN regression on,"Wed, 12 Jun 2013 07:40:06 -0400",-0400,Dan Staples,"Thanks for the heads up on this! Did you try this with Commotion or
stock AA? Not that I can see it making any difference, but I'm just curious.

On 06/12/2013 12:14 AM, Ben West wrote:
> Yep, I can confirm that rolling back to Attitude Adjustment r36681 and
> recompiling restored IBSS-RSN adhoc encryption.
>
> On Tue, Jun 11, 2013 at 3:23 PM, Ben West <ben at gowasabi.net
> <mailto:ben at gowasabi.net"
1457,Commotion-dev," Whether to use encrypted meshing,","Wed, 12 Jun 2013 08:11:53 -0400",-0400,Dan Staples,"That's very interesting, considering that one of the reasons we moved
away from authsae towards IBSS-RSN is that we heard on the openwrt list
that authsae support was going the way of the dinosaurs...

On 06/11/2013 06:12 PM, Ben West wrote:
> FYI, recent patches that appeared on OpenWRT-dev listserv for authsae
> support.  However, this may require disabling hardware encryption?
>
> [PATCH] Add elliptic curve crypto compilation options to openssl
> https://lists.openwrt.org/pipermail/openwrt-devel/2013-May/020268.html
>
> [PATCH v3] authsae 80211s authentication daemon
> https://lists.openwrt.org/pipermail/openwrt-devel/2013-May/020269.html
>
> [PATCH v2] authsae: adapt uci scripts to use authsae
> https://lists.openwrt.org/pipermail/openwrt-devel/2013-June/020346.html
> https://lists.openwrt.org/pipermail/openwrt-devel/2013-June/020371.html (must
> disable hwcrypt?)
>
>
> On Wed, Dec 19, 2012 at 12:15 PM, Will Hawkins
> <hawkinsw at opentechinstitute.org
> <mailto:hawkinsw at opentechinstitute.org"
1458,Commotion-dev, Possible hostapd / IBSS-RSN regression on,"Wed, 12 Jun 2013 11:08:22 -0400",-0400,Will Hawkins,"Thanks for the note, Ben. We will start investigating this and see what
the problem is.

Will

On 06/12/2013 07:40 AM, Dan Staples wrote:
> Thanks for the heads up on this! Did you try this with Commotion or
> stock AA? Not that I can see it making any difference, but I'm just curious.
> 
> On 06/12/2013 12:14 AM, Ben West wrote:
"
1459,Commotion-dev," Whether to use encrypted meshing,","Wed, 12 Jun 2013 11:10:15 -0400",-0400,Will Hawkins,"Dan's correct. We thought that they were going to start using some other
form of encryption. I am going to dig into these patches and see which
version of the authsae code they are pulling. Hopefully they are pulling
one that already has the patches I submitted last summer. That would
make things really pretty easy.

And, yes, you do have to disable HW encryption to get this to work. It's
not a big deal, as far as I can tell, but definitely something to be
aware of. It could negatively affect throughput but, again, I've yet to
confirm.

Will

On 06/12/2013 08:11 AM, Dan Staples wrote:
> That's very interesting, considering that one of the reasons we moved
> away from authsae towards IBSS-RSN is that we heard on the openwrt list
> that authsae support was going the way of the dinosaurs...
> 
> On 06/11/2013 06:12 PM, Ben West wrote:
"
1460,Commotion-dev," Whether to use encrypted meshing,","Wed, 12 Jun 2013 13:34:12 -0400",-0400,Dan Staples,"Any sense of whether doing fully-software encryption for this would
negatively affect it's security?

On 06/12/2013 11:10 AM, Will Hawkins wrote:
> Dan's correct. We thought that they were going to start using some other
> form of encryption. I am going to dig into these patches and see which
> version of the authsae code they are pulling. Hopefully they are pulling
> one that already has the patches I submitted last summer. That would
> make things really pretty easy.
>
> And, yes, you do have to disable HW encryption to get this to work. It's
> not a big deal, as far as I can tell, but definitely something to be
> aware of. It could negatively affect throughput but, again, I've yet to
> confirm.
>
> Will
>
> On 06/12/2013 08:11 AM, Dan Staples wrote:
"
1461,Commotion-dev," Whether to use encrypted meshing,","Wed, 12 Jun 2013 13:38:20 -0400",-0400,Will Hawkins,"Sense: No impact. Reality: Not sure.

On 06/12/2013 01:34 PM, Dan Staples wrote:
> Any sense of whether doing fully-software encryption for this would
> negatively affect it's security?
> 
> On 06/12/2013 11:10 AM, Will Hawkins wrote:
"
1462,Commotion-dev, Nature of Commotion download links on website?,"Wed, 12 Jun 2013 16:27:22 -0400",-0400,Preston Rhea,"Some folks are interested in adding direct download links in the user
documentation for installing Commotion-OpenWRT:
https://code.commotionwireless.net/projects/commotion/wiki/Stock_Ubiquiti_Install_Guide

Are the links that show up on the download page always the same, or do
they change with every nightly build or new stable release?

I'm looking especially at the portion of, say,
https://code.commotionwireless.net/attachments/download/357/openwrt-ar71xx-generic-ubnt-bullet-m-squashfs-factory.bin
that is /download/***/openwrt.... does that change with every new code
push?

--
Preston Rhea
Program Associate, Open Technology Institute
New America Foundation
+1-202-570-9770
Twitter: @prestonrhea
"
1463,Commotion-dev, Nature of Commotion download links on website?,"Wed, 12 Jun 2013 16:29:43 -0400",-0400,Dan Staples,"The links in the Stable section should be pretty static until we hit a 
new release, at which time they will change. We don't have the nightly 
builds occurring at the moment, however.

On Wed 12 Jun 2013 04:27:22 PM EDT, Preston Rhea wrote:
> Some folks are interested in adding direct download links in the user
> documentation for installing Commotion-OpenWRT:
> https://code.commotionwireless.net/projects/commotion/wiki/Stock_Ubiquiti_Install_Guide
>
> Are the links that show up on the download page always the same, or do
> they change with every nightly build or new stable release?
>
> I'm looking especially at the portion of, say,
> https://code.commotionwireless.net/attachments/download/357/openwrt-ar71xx-generic-ubnt-bullet-m-squashfs-factory.bin
> that is /download/***/openwrt.... does that change with every new code
> push?
>
> --
> Preston Rhea
> Program Associate, Open Technology Institute
> New America Foundation
> +1-202-570-9770
> Twitter: @prestonrhea
> _______________________________________________
> Commotion-dev mailing list
> Commotion-dev at lists.chambana.net
> https://lists.chambana.net/mailman/listinfo/commotion-dev

--
Dan Staples

Open Technology Institute
https://commotionwireless.net
"
1464,Commotion-dev, Fwd: [Battlemesh] CNBuB2013: Submission deadline,"Thu, 13 Jun 2013 10:54:12 -0400",-0400,Dan Staples,"FYI


"
1465,Commotion-dev, hardware debuggers for embedded systems,"Thu, 13 Jun 2013 16:28:37 -0400",-0400,Dan Staples,"http://sourceforge.net/apps/mediawiki/blackmagicdebug/index.php?title=Main_Page

The Black Magic Probe basically contains GDB and allows you to debug program execution on an ARM system through its JTAG interface. Considering how much of a hassle it was to get GDB running on the picostations with the full Commotion stack, something like this (that targets MIPS) would be a beneficial alternative.

-- 
Dan Staples

Open Technology Institute
https://commotionwireless.net

"
1466,Commotion-dev, hardware debuggers for embedded systems,"Thu, 13 Jun 2013 16:49:48 -0400",-0400,Dan Staples,"On Thu 13 Jun 2013 04:28:37 PM EDT, Dan Staples wrote:
> http://sourceforge.net/apps/mediawiki/blackmagicdebug/index.php?title=Main_Page
>
> The Black Magic Probe basically contains GDB and allows you to debug program execution on an ARM system through its JTAG interface. Considering how much of a hassle it was to get GDB running on the picostations with the full Commotion stack, something like this (that targets MIPS) would be a beneficial alternative.
"
1467,Commotion-dev, hardware debuggers for embedded systems,"Mon, 17 Jun 2013 10:26:17 -0400",-0400,Seamus Tuohy,"Yea, Can we get one?

s2e

On 06/13/2013 04:49 PM, Dan Staples wrote:
> On Thu 13 Jun 2013 04:28:37 PM EDT, Dan Staples wrote:
"
1468,Commotion-dev, hardware debuggers for embedded systems,"Mon, 17 Jun 2013 11:12:48 -0400",-0400,Dan Staples,"On 06/17/2013 10:26 AM, Seamus Tuohy wrote:
> Yea, Can we get one?
>
> s2e
>
> On 06/13/2013 04:49 PM, Dan Staples wrote:
"
1469,Commotion-dev, Possible hostapd / IBSS-RSN regression on,"Mon, 17 Jun 2013 12:58:02 -0500",-0500,Ben West,"Hi All,

I'm away from home and not able to easily test this hypothesis, but I see
the recent hostapd update to AA includes 802.11r functionality:
https://dev.openwrt.org/changeset/36533

802.11r, which is now implemented in full hostapd package (as opposed to
hostapd-mini), looks rather useful:
http://en.wikipedia.org/wiki/IEEE_802.11r-2008

While a regression is indeed still possible, I am actually curious if this
hostapd update just means that nodes running r36682+ will not do IBSS-RSN
encryption with nodes running r36681 and earlier.  Not necessarily that
IBSS-RSN fully broken in r36682+.

On Wed, Jun 12, 2013 at 10:08 AM, Will Hawkins <
hawkinsw at opentechinstitute.org> wrote:

> Thanks for the note, Ben. We will start investigating this and see what
> the problem is.
>
> Will
>
> On 06/12/2013 07:40 AM, Dan Staples wrote:
> > Thanks for the heads up on this! Did you try this with Commotion or
> > stock AA? Not that I can see it making any difference, but I'm just
> curious.
> >
> > On 06/12/2013 12:14 AM, Ben West wrote:
> "
1470,Commotion-dev, turn off issue tracker and wiki on github,"Tue, 18 Jun 2013 14:03:08 -0400",-0400,Hans-Christoph Steiner,"
In order to avoid confusion, all of the projects hosted on github should have
the wiki and the issue tracker there disabled, then the README should point to
the project's redmine page.

Unless, of course, the plan is now to use github's issue tracker over redmine.

.hc
"
1471,Commotion-dev, turn off issue tracker and wiki on github,"Tue, 18 Jun 2013 14:15:07 -0400",-0400,Will Hawkins,"Thanks for sending this, hc. I will defer to Andrew on the ultimate
decision, but I definitely +1 to the goal of being consistent and having
only one wiki/issue queue.

Will

On 06/18/2013 02:03 PM, Hans-Christoph Steiner wrote:
> 
> In order to avoid confusion, all of the projects hosted on github should have
> the wiki and the issue tracker there disabled, then the README should point to
> the project's redmine page.
> 
> Unless, of course, the plan is now to use github's issue tracker over redmine.
> 
> .hc
> _______________________________________________
> Commotion-dev mailing list
> Commotion-dev at lists.chambana.net
> https://lists.chambana.net/mailman/listinfo/commotion-dev
> 
"
1472,Commotion-dev, Strange channel selection behavior,"Tue, 18 Jun 2013 18:08:32 -0400",-0400,Preston Rhea,"Flashing DR1.1 and DR1.1+ (unofficial name) in anticipation of the AMC
MagicNet construction tomorrow and Thursday, we experienced issues with
changing the wireless channel off of 5. We changed it to 11, saved and
applied, and although the menu records the channel as changed, Wi-Fi
analyzer and iwconfig record it as still set to 5.

Will and Dan's deeper examination reveal that the node, upon bringing up
its wireless interface, will always scan channels to see if there is a mesh
to join, and it will join that mesh and set its channel to that mesh's
channel regardless of the choice the user made. Thus far, it seems the
workaround is to bring up the first node in a new mesh in the absence of
any other mesh network, set its channel to the channel you want, then bring
up the other nodes in its presence.

-- 
Preston Rhea
Program Associate, Open Technology Institute
New America Foundation
+1-202-570-9770
Twitter: @prestonrhea
"
1473,Commotion-dev, CGI process did not produce any results,"Thu, 20 Jun 2013 18:04:19 -0400",-0400,Will Hawkins,"Hello all!

I am running the build from the commotionwireless.net website on the
picos at the testbed. The web ui is really doing some very strange
things. I am seeing ""The CGI process did not produce any response"" when
I am trying to access the OLSR status page. I am going to continue to
debug, but I thought that I'd flag it.

Will
"
1474,Commotion-dev, Android App on top of the olsr code,"Tue, 25 Jun 2013 15:27:24 +0530",+0530,Abhishek Panday,"Hi,

Actually i was trying to make a simple chat application that runs over the
olsr mesh in android. What i plan to do is to connect many android phones
present in my college so as to form a huge mesh network of android phones
and run a simple chat app in  the phones.

I went through olsr code provided by the commotion project by android. I
had the few questions .

If i run the app provided by you on my phone, can i use android socket
routines for sending messages between 2 phones such that the messages flow
through the ad-hoc network or do have to use some other routines which are
provided by your app?

Abhishek Panday
"
1475,Commotion-dev, Android App on top of the olsr code,"Tue, 25 Jun 2013 20:52:41 +0930",+0930,Paul Gardner-Stephen,"Hello,

Serval Mesh already provides two-way text messaging, and may provide you
with a advanced starting point.  Encrypted messaging is very close to
completion, as is compression of messages.

Paul.


On Tue, Jun 25, 2013 at 7:27 PM, Abhishek Panday <apandays at gmail.com> wrote:

> Hi,
>
> Actually i was trying to make a simple chat application that runs over the
> olsr mesh in android. What i plan to do is to connect many android phones
> present in my college so as to form a huge mesh network of android phones
> and run a simple chat app in  the phones.
>
> I went through olsr code provided by the commotion project by android. I
> had the few questions .
>
> If i run the app provided by you on my phone, can i use android socket
> routines for sending messages between 2 phones such that the messages flow
> through the ad-hoc network or do have to use some other routines which are
> provided by your app?
>
> Abhishek Panday
>
> _______________________________________________
> Commotion-dev mailing list
> Commotion-dev at lists.chambana.net
> https://lists.chambana.net/mailman/listinfo/commotion-dev
>
>
"
1476,Commotion-dev, CGI process did not produce any results,"Tue, 25 Jun 2013 10:19:15 -0400",-0400,Dan Staples,"On Thu 20 Jun 2013 06:04:19 PM EDT, Will Hawkins wrote:
> Hello all!
>
> I am running the build from the commotionwireless.net website on the
> picos at the testbed. The web ui is really doing some very strange
> things. I am seeing ""The CGI process did not produce any response"" when
> I am trying to access the OLSR status page. I am going to continue to
> debug, but I thought that I'd flag it.
>
> Will
> _______________________________________________
> Commotion-dev mailing list
> Commotion-dev at lists.chambana.net
> https://lists.chambana.net/mailman/listinfo/commotion-dev

Any update on this?

--
Dan Staples

Open Technology Institute
https://commotionwireless.net
"
1477,Commotion-dev, Android App on top of the olsr code,"Tue, 25 Jun 2013 10:27:04 -0400",-0400,Nathan of Guardian,"On 06/25/2013 05:57 AM, Abhishek Panday wrote:
> 
> If i run the app provided by you on my phone, can i use android socket
> routines for sending messages between 2 phones such that the messages
> flow through the ad-hoc network or do have to use some other routines
> which are provided by your app?

If the Commotion Android app is connected properly and completely to a
mesh, the a general IP network is available between the devices. You can
program your apps as expected over any typical IP network.

The one caveat is that the Android NetworkManager / Connectivity checks
for wifi may not behave the same as you expect, since the mesh is
enabled at a layer below the usual Android APIs for now.

Good luck!

+n
"
1478,Commotion-dev, CGI process did not produce any results,"Tue, 25 Jun 2013 12:50:06 -0400",-0400,Will Hawkins,"Tentatively, I will say that this was a result of the ""out of control""
dnssd plugin. I've yet to see it since disabling that plugin.

Will

On 06/25/2013 10:19 AM, Dan Staples wrote:
> On Thu 20 Jun 2013 06:04:19 PM EDT, Will Hawkins wrote:
"
1479,Commotion-dev, CGI process did not produce any results,"Tue, 25 Jun 2013 14:13:48 -0400",-0400,Will Hawkins,"I hate to say this, but I mispoke. I am still seeing this problem. It
might be the result of using a particular version of uhttpd for the
build of Commotion-OpenWRT that we are running on the testbed. I've had
no problem accessing these pages on the nodes that we are running in the
office that were built more recently.

Will

On 06/25/2013 12:50 PM, Will Hawkins wrote:
> Tentatively, I will say that this was a result of the ""out of control""
> dnssd plugin. I've yet to see it since disabling that plugin.
> 
> Will
> 
> On 06/25/2013 10:19 AM, Dan Staples wrote:
"
1480,Commotion-dev, Allied Media Conference 2013 MagicNet Deployment,"Tue, 25 Jun 2013 18:19:12 -0400",-0400,Dan Staples,"**

*Here's an initial reportback from the AMC conference. A more detailed
report will likely follow. Thanks Andy for the help on this!*
**

*


tl;dr: it had a rough start, but turned out awesome!
<https://docs.google.com/file/d/0B0hY7epZlXFaYjhaRVBPZGpxeUU/edit?usp=sharing"
1481,Commotion-dev, Allied Media Conference 2013 MagicNet,"Wed, 26 Jun 2013 12:19:33 -0500",-0500,Ben West,"Awesome, detailed write-up!  It's great that you used the opportunity to
field feedback from members of the public.

FWIW, I've found that changing a node's channel only seems to work reliably
when you just reboot the node.  Likely a limitation of the mac80211 driver
library.

On Tue, Jun 25, 2013 at 5:19 PM, Dan Staples <
danstaples at opentechinstitute.org> wrote:

>  * *
>
> *Here's an initial reportback from the AMC conference. A more detailed
> report will likely follow. Thanks Andy for the help on this!
> *
> *
>
>
> tl;dr: it had a rough start, but turned out awesome!<https://docs.google.com/file/d/0B0hY7epZlXFaYjhaRVBPZGpxeUU/edit?usp=sharing>
>
>
>  -Dan
>
>
> "
1482,Commotion-dev, [OTI-Field] Allied Media Conference 2013,"Wed, 26 Jun 2013 14:44:52 -0400",-0400,Preston Rhea,"For the Digital Stewards flashing point, I recommend including a reference
to the MagicNet installation checklist, and include it as an appendix:
https://docs.google.com/a/opentechinstitute.org/document/d/1cLLBCwi3XPpUL8Pm3dNQmeMq7FQd3F0yAcyu4jU54z8/edit#heading=h.yn41mcf8hzzw

You may also choose to include as a prologue that creating, going through,
and refining this checklist before we left for Detroit was key to finding
some of those problems, and that it prompted Dan to make a special build
for the AMC.


On Wed, Jun 26, 2013 at 1:19 PM, Ben West <ben at gowasabi.net> wrote:

> Awesome, detailed write-up!  It's great that you used the opportunity to
> field feedback from members of the public.
>
> FWIW, I've found that changing a node's channel only seems to work
> reliably when you just reboot the node.  Likely a limitation of the
> mac80211 driver library.
>
> On Tue, Jun 25, 2013 at 5:19 PM, Dan Staples <
> danstaples at opentechinstitute.org> wrote:
>
"
1483,Commotion-dev, Problem with new DR1.1 build,"Thu, 27 Jun 2013 12:08:20 -0400",-0400,Dan Staples,"I just built Commotion DR1.1 fresh from source. When running ""make"", I
got an error: ""WARNING: your configuration is out of sync. Please run
make menuconfig, oldconfig or defconfig!"". So I ran make menuconfig,
then saved without making any changes.

The resulting image has a problem where the plug interface takes the IP
address of 192.168.1.20 instead of generating a 102.x.x.x address (and
doesn't hand out DHCP leases). I am guessing this has to do with changes
in AA since we first tagged DR1.1. I will look into this further after
lunch, but just wanted to put it out there in case anyone else would
care to verify.

Dan

-- 
Dan Staples

Open Technology Institute
https://commotionwireless.net
"
1484,Commotion-dev, Problem with new DR1.1 build,"Thu, 27 Jun 2013 12:49:34 -0400",-0400,Seamus Tuohy,"I am also building an image from a new ./setup. I will update from my
findings.

s2e

On 06/27/2013 12:08 PM, Dan Staples wrote:
> I just built Commotion DR1.1 fresh from source. When running ""make"", I
> got an error: ""WARNING: your configuration is out of sync. Please run
> make menuconfig, oldconfig or defconfig!"". So I ran make menuconfig,
> then saved without making any changes.
> 
> The resulting image has a problem where the plug interface takes the IP
> address of 192.168.1.20 instead of generating a 102.x.x.x address (and
> doesn't hand out DHCP leases). I am guessing this has to do with changes
> in AA since we first tagged DR1.1. I will look into this further after
> lunch, but just wanted to put it out there in case anyone else would
> care to verify.
> 
> Dan
> 

"
1485,Commotion-dev, Problem with new DR1.1 build,"Thu, 27 Jun 2013 11:02:37 -0700",-0700,Jordan McCarthy,
1486,Commotion-dev, Olsrd's jsoninfo plugin,"Thu, 27 Jun 2013 14:16:59 -0400",-0400,Griffin Boyce,"Hey all,

  When attempting to call jsoninfo data, it is simply not available, even
after editing olsrd.conf to accept all connections.  Thoughts?  I'm hoping
to get it enabled and the json info used for Big Board monitoring
(proof-of-concept).

~Griffin
"
1487,Commotion-dev, Olsrd's jsoninfo plugin,"Thu, 27 Jun 2013 14:22:43 -0400",-0400,Andrew Reynolds,"Does nmap show anything useful? In other words, is the port open but
you're not getting jsoninfo data?

Could this be a router firewall issue?

-andrew

On 06/27/2013 02:16 PM, Griffin Boyce wrote:
> Hey all,
> 
>   When attempting to call jsoninfo data, it is simply not available, even
> after editing olsrd.conf to accept all connections.  Thoughts?  I'm hoping
> to get it enabled and the json info used for Big Board monitoring
> (proof-of-concept).
> 
> ~Griffin
> 
> 
> 
> _______________________________________________
> Commotion-dev mailing list
> Commotion-dev at lists.chambana.net
> https://lists.chambana.net/mailman/listinfo/commotion-dev
> 


"
1488,Commotion-dev, Olsrd's jsoninfo plugin,"Thu, 27 Jun 2013 14:23:09 -0400",-0400,Dan Staples,"On 06/27/2013 02:16 PM, Griffin Boyce wrote:
> Hey all,
> 
>   When attempting to call jsoninfo data, it is simply not available,
> even after editing olsrd.conf to accept all connections.  Thoughts?  I'm
> hoping to get it enabled and the json info used for Big Board monitoring
> (proof-of-concept).
> 
> ~Griffin
> 
> 
> _______________________________________________
> Commotion-dev mailing list
> Commotion-dev at lists.chambana.net
> https://lists.chambana.net/mailman/listinfo/commotion-dev
> 

Have you tried 'nc localhost 9090'? You can also check 'netstat -ltpn'
to see if olsrd is listening on port 9090.

Also keep in mind that /var/etc/olsrd.conf is dynamically generated from
/etc/config/olsrd.

-- 
Dan Staples

Open Technology Institute
https://commotionwireless.net
"
1489,Commotion-dev, Olsrd's jsoninfo plugin,"Thu, 27 Jun 2013 14:27:26 -0400",-0400,Dan Staples,"On 06/27/2013 02:23 PM, Dan Staples wrote:
> On 06/27/2013 02:16 PM, Griffin Boyce wrote:
"
1490,Commotion-dev," 6/28 hack day wiki page, agenda, proposed IA","Thu, 27 Jun 2013 15:57:39 -0400",-0400,Chris Ritzo,"Good afternoon everyone,

Georgia and I met this afternoon to synthesize past IA work as a
starting point for tomorrow's hack day.

You can find a link to this google doc and the agenda for tomorrow on
the developer site:
https://code.commotionwireless.net/projects/commotion/wiki/Hackday-062813

-Chris

-- 
Chris Ritzo
Technologist, Open Technology Institute
New America Foundation
"
1491,Commotion-dev, Problem with new DR1.1 build,"Thu, 27 Jun 2013 15:58:51 -0400",-0400,Dan Staples,"On 06/27/2013 02:02 PM, Jordan McCarthy wrote:
> I can confirm the presence of the initial warning message, and
> would add that it has been coming up on clean builds for at least
> the past week.  I can't say anything about the quality of the
> resulting images, unfortunately, because I don't have a router with
> me.
> 
"
1492,Commotion-dev, Problem with new DR1.1 build,"Thu, 27 Jun 2013 16:16:06 -0500",-0500,Ben West,"Looks like there are a bunch of IPv6 related changed being backported into
AA right now, and I'll venture a guess that is relevant to this issue.

Here is the URL for browsing changesets to current AA:
https://dev.openwrt.org/browser/branches/attitude_adjustment

... versus the URL for commits made to the tag 'attitude_adjustment_12.09':
https://dev.openwrt.org/browser/tags/attitude_adjustment_12.09

Unfortunately, it does look like using the tag means you get no updates at
all until the OpenWRT dev team makes another stable release (i.e. circa
2015).  And it doesn't appear the OpenWRT git repos using any tagging at
all.  Likewise, less chance of bisecting the root cause.

Would pinning the feeds.conf file to specific revisions of AA be more
appealing?

How about anyone on this list with a *known working* DR1 build tree sitting
around please do an 'svn info' or 'git log' to see what revision they're
at.  I have r36969 I can try out here, to see if it is affected by this
issue.

On Thu, Jun 27, 2013 at 2:58 PM, Dan Staples <
danstaples at opentechinstitute.org> wrote:

> On 06/27/2013 02:02 PM, Jordan McCarthy wrote:
> > I can confirm the presence of the initial warning message, and
> > would add that it has been coming up on clean builds for at least
> > the past week.  I can't say anything about the quality of the
> > resulting images, unfortunately, because I don't have a router with
> > me.
> >
> "
1493,Commotion-dev, Problem with new DR1.1 build,"Thu, 27 Jun 2013 17:19:06 -0400",-0400,Dan Staples,"On Thu 27 Jun 2013 05:16:06 PM EDT, Ben West wrote:
> Looks like there are a bunch of IPv6 related changed being backported
> into AA right now, and I'll venture a guess that is relevant to this
> issue.
>
> Here is the URL for browsing changesets to current AA:
> https://dev.openwrt.org/browser/branches/attitude_adjustment
>
> ... versus the URL for commits made to the tag
> 'attitude_adjustment_12.09':
> https://dev.openwrt.org/browser/tags/attitude_adjustment_12.09
>
> Unfortunately, it does look like using the tag means you get no
> updates at all until the OpenWRT dev team makes another stable release
> (i.e. circa 2015).  And it doesn't appear the OpenWRT git repos using
> any tagging at all.  Likewise, less chance of bisecting the root cause.
>
> Would pinning the feeds.conf file to specific revisions of AA be more
> appealing?
>
> How about anyone on this list with a /known working/ DR1 build tree
> sitting around please do an 'svn info' or 'git log' to see what
> revision they're at.  I have r36969 I can try out here, to see if it
> is affected by this issue.
>
> On Thu, Jun 27, 2013 at 2:58 PM, Dan Staples
> <danstaples at opentechinstitute.org
> <mailto:danstaples at opentechinstitute.org"
1494,Commotion-dev, Problem with new DR1.1 build,"Thu, 27 Jun 2013 17:23:46 -0400",-0400,Josh King,"The intent is definitely to test newer revisions regularly so we can 
get bugfixes and other updates, and update the pinning accordingly. But 
yeah, it kind of seems like AA is too prone to breakage at the moment 
to just track its head. The last release seems like a good starting 
point until we can get a testing strategy for that up and running.

On Thu 27 Jun 2013 05:19:06 PM EDT, Dan Staples wrote:
> On Thu 27 Jun 2013 05:16:06 PM EDT, Ben West wrote:
"
1495,Commotion-dev, Problem with new DR1.1 build,"Sun, 30 Jun 2013 23:10:18 -0500",-0500,Ben West,"Hi All,

If this is helpful reference for later, I believe AA r36681 (the same
revision that predates the apparent IBSS-RSN regression mentioned in
another thread) also does not suffer the problem described by Dan below.

That is, on a newly flashed Nanostation Loco, after completing Quickstart I
am able to get a DHCP lease on its eth0 port.  Likewise, the luci admin UI
reports this information for the ""plug"" interface under Network ->
Interfaces:

MAC-Address: DC:9F:DB:59:C8:57
RX: 312.09 KB (2942 Pkts.)
TX: 679.13 KB (4393 Pkts.)
IPv4: 102.89.200.1/24, 192.168.1.20/24

On Thu, Jun 27, 2013 at 11:08 AM, Dan Staples <
danstaples at opentechinstitute.org> wrote:

> I just built Commotion DR1.1 fresh from source. When running ""make"", I
> got an error: ""WARNING: your configuration is out of sync. Please run
> make menuconfig, oldconfig or defconfig!"". So I ran make menuconfig,
> then saved without making any changes.
>
> The resulting image has a problem where the plug interface takes the IP
> address of 192.168.1.20 instead of generating a 102.x.x.x address (and
> doesn't hand out DHCP leases). I am guessing this has to do with changes
> in AA since we first tagged DR1.1. I will look into this further after
> lunch, but just wanted to put it out there in case anyone else would
> care to verify.
>
> Dan
>
> --
> Dan Staples
>
> Open Technology Institute
> https://commotionwireless.net
> _______________________________________________
> Commotion-dev mailing list
> Commotion-dev at lists.chambana.net
> https://lists.chambana.net/mailman/listinfo/commotion-dev
"
1496,Commotion-dev, Problem with new DR1.1 build,"Mon, 01 Jul 2013 10:10:12 -0400",-0400,Seamus Tuohy,"It seems that this is a good point to talk about release testing. So far
we only have the test suites we built to explore each releases features.
It might be a good idea to write a series of tester scripts (actual
scripts for a tester to follow), and a set of programmed scripts to test
the functionality of old features when we incorporate new builds and
features.


s2e

On 06/27/2013 05:23 PM, Josh King wrote:
> The intent is definitely to test newer revisions regularly so we can 
> get bugfixes and other updates, and update the pinning accordingly. But 
> yeah, it kind of seems like AA is too prone to breakage at the moment 
> to just track its head. The last release seems like a good starting 
> point until we can get a testing strategy for that up and running.
> 
> On Thu 27 Jun 2013 05:19:06 PM EDT, Dan Staples wrote:
"
1497,Commotion-dev, Roaming between nodes,"Wed, 03 Jul 2013 08:55:21 +0200",+0200,"Mikael ""MMN-o"" Nordfeldth","Hi folks who are probably better at me with the black magic of wifi
networks. Not sure whether to post this here to -dev or to -discuss.

I'm curious whether there has been given any thought to roaming between
commotion wireless nodes. I.e. moving from one node to another without
dropping a connection. What would be necessary to enable this and is it
even desirable?

Roaming, I assume, requires a coordinated backbone. This I guess is hard
to impossible to setup in a reliable manner within an open mesh network.
As it is now, every router has its own subnet with NATing and a routing
table, right? This feels natural in an IPv4 network, given the rather
limited address space for unique, routable addresses. So to enable
roaming in the current Commotion environment, one would have to have a
backbone that tracks the connections. Which seems like an unnecessarily
complex thing to do in an open mesh.

With a larger address space (say IPv6) I suppose this would be easier,
as routing of packets between nodes could appear to be on the same
subnet. There'd be retransmissions in TCP of course, but the server my
local client is talking to would always see the same client IP (my IP)
and thus the connection might be laggy but not break at a node-hop.

Of course one would get external connections killed if the gateway
disappears, but internal connections (local applications etc.) would
still function.

So, again, is roaming possible, doable and desirable or not? Or, as it
may be, have I failed to understand some important part of IP routing?

"
1498,Commotion-dev, Roaming between nodes,"Wed, 03 Jul 2013 10:07:24 -0400",-0400,Dan Staples,"On 07/03/2013 02:55 AM, Mikael ""MMN-o"" Nordfeldth wrote:
> Hi folks who are probably better at me with the black magic of wifi
> networks. Not sure whether to post this here to -dev or to -discuss.
> 
> I'm curious whether there has been given any thought to roaming between
> commotion wireless nodes. I.e. moving from one node to another without
> dropping a connection. What would be necessary to enable this and is it
> even desirable?
> 
> Roaming, I assume, requires a coordinated backbone. This I guess is hard
> to impossible to setup in a reliable manner within an open mesh network.
> As it is now, every router has its own subnet with NATing and a routing
> table, right? This feels natural in an IPv4 network, given the rather
> limited address space for unique, routable addresses. So to enable
> roaming in the current Commotion environment, one would have to have a
> backbone that tracks the connections. Which seems like an unnecessarily
> complex thing to do in an open mesh.
> 
> With a larger address space (say IPv6) I suppose this would be easier,
> as routing of packets between nodes could appear to be on the same
> subnet. There'd be retransmissions in TCP of course, but the server my
> local client is talking to would always see the same client IP (my IP)
> and thus the connection might be laggy but not break at a node-hop.
> 
> Of course one would get external connections killed if the gateway
> disappears, but internal connections (local applications etc.) would
> still function.
> 
> So, again, is roaming possible, doable and desirable or not? Or, as it
> may be, have I failed to understand some important part of IP routing?
> 
> 
> 
> _______________________________________________
> Commotion-dev mailing list
> Commotion-dev at lists.chambana.net
> https://lists.chambana.net/mailman/listinfo/commotion-dev
> 

I assume you mean roaming/handoff of non-mesh clients connected to
access points on mesh nodes, yes? Unfortunately, this is currently not
possible, without the type of coordination you describe. As I understand
it, it is a limitation of a layer-3 mesh, such as OLSRd, which we use.
I've heard that a layer-2 mesh, such as Batman-Adv, *can* do seamless
handover of access point clients. But of course, there are lots of other
tradeoffs between layer-2 and layer-3 meshes.

A while ago, I came upon a solution for doing seamless handover for
access point clients, developed by folks at the Distributed System and
Networks Lab @ Johns Hopkins. It's called Smesh: http://www.smesh.org/.
I would love to try to implement this in Commotion, but it would be a
long-term project that we currently don't have anyone working on.

But keep in mind that we are currently ramping up development of
Commotion desktop/mobile mesh client software (linux, android, mac,
windows, iOS), that will let mobile phones and laptops and such become
full-fledged mesh nodes, which will allow for theoretically seamless
roaming, as they will use ad-hoc links instead of access point connections.

-- 
Dan Staples

Open Technology Institute
https://commotionwireless.net
"
1499,Commotion-dev, Using UCI to define static routes on nodes,"Wed, 03 Jul 2013 14:51:46 -0400",-0400,Will Hawkins,"I'm sure that most everyone here knows about this, but it bit me
yesterday and I wanted to post it for posterity (is that redundant?):

OpenWRT users can define static routes on nodes through UCI. In the
/etc/config/network file, it looks something like this:

config route '<optional route name>'
	option interface '<name of interface>'
	option target '<target as dotted quad>'
	option netmask '<netmask in dotted quad>'
	option gateway '<gateway in dotted quad>'

It can also be done through the web interface. Incredibly useful. Here's
where I flubbed it:

Let's say that my plug interface (eth0) is 172.16.0.0/16 but I want to
use 192.168.1.1 as my gateway for a default route through the plug.
Using 'ip', I could do this like:

ip route add 0.0.0.0/0 via 192.168.1.1 dev eth0

However, this type of ""via"" route is not possible using the UCI
configuration. Before applying the static routes from the config, UCI
checks to see if the gateway is in the interface's network range. There
is probably a way around this, but I could not figure it out. Also, as
far as I can tell, there's very little information spit out in the debug
files to tell you about this.

Please, PLEASE, let me know if you've worked through this issue before
and successfully solved it. Otherwise, it's just something to keep in mind!

Will
"
1500,Commotion-dev, Using UCI to define static routes on nodes,"Wed, 3 Jul 2013 13:58:53 -0500",-0500,Ben West,"The approach I've used for setting static routes besides what UCI tried to
configure has been to use the underlying command line tools directly, e.g.
with 'ifconfig' and 'route add ...""

It could be that UCI can only number interfaces reliably, but not always
set unconventional routes.  Especially since 'plug' is virtual interface
that could take multiple different addresses.

On Wed, Jul 3, 2013 at 1:51 PM, Will Hawkins <hawkinsw at opentechinstitute.org
> wrote:

> I'm sure that most everyone here knows about this, but it bit me
> yesterday and I wanted to post it for posterity (is that redundant?):
>
> OpenWRT users can define static routes on nodes through UCI. In the
> /etc/config/network file, it looks something like this:
>
> config route '<optional route name>'
>         option interface '<name of interface>'
>         option target '<target as dotted quad>'
>         option netmask '<netmask in dotted quad>'
>         option gateway '<gateway in dotted quad>'
>
> It can also be done through the web interface. Incredibly useful. Here's
> where I flubbed it:
>
> Let's say that my plug interface (eth0) is 172.16.0.0/16 but I want to
> use 192.168.1.1 as my gateway for a default route through the plug.
> Using 'ip', I could do this like:
>
> ip route add 0.0.0.0/0 via 192.168.1.1 dev eth0
>
> However, this type of ""via"" route is not possible using the UCI
> configuration. Before applying the static routes from the config, UCI
> checks to see if the gateway is in the interface's network range. There
> is probably a way around this, but I could not figure it out. Also, as
> far as I can tell, there's very little information spit out in the debug
> files to tell you about this.
>
> Please, PLEASE, let me know if you've worked through this issue before
> and successfully solved it. Otherwise, it's just something to keep in mind!
>
> Will
> _______________________________________________
> Commotion-dev mailing list
> Commotion-dev at lists.chambana.net
> https://lists.chambana.net/mailman/listinfo/commotion-dev
>
"
1501,Commotion-dev, Using UCI to define static routes on nodes,"Wed, 03 Jul 2013 15:13:38 -0400",-0400,Will Hawkins,"Ben,

Thanks for your reply. I agree. 'ip route add ...' is far more flexible.
So, I guess we'll attempt to work with that in future. I really wanted
to use ""standard"" UCI in this case just, well, because.

Will

On 07/03/2013 02:58 PM, Ben West wrote:
> The approach I've used for setting static routes besides what UCI tried
> to configure has been to use the underlying command line tools directly,
> e.g. with 'ifconfig' and 'route add ...""
> 
> It could be that UCI can only number interfaces reliably, but not always
> set unconventional routes.  Especially since 'plug' is virtual interface
> that could take multiple different addresses.
> 
> On Wed, Jul 3, 2013 at 1:51 PM, Will Hawkins
> <hawkinsw at opentechinstitute.org <mailto:hawkinsw at opentechinstitute.org"
1502,Commotion-dev, Roaming between nodes,"Thu, 04 Jul 2013 10:46:16 +0200",+0200,"Mikael ""MMN-o"" Nordfeldth","On 2013-07-03 16:07, Dan Staples wrote:> I assume you mean
roaming/handoff of non-mesh clients connected to
> access points on mesh nodes, yes? Unfortunately, this is currently not
> possible, without the type of coordination you describe.

Ah, yes. Handoff/-over is what I mean.

> As I understand
> it, it is a limitation of a layer-3 mesh, such as OLSRd, which we use.
> I've heard that a layer-2 mesh, such as Batman-Adv, *can* do seamless
> handover of access point clients. But of course, there are lots of other
> tradeoffs between layer-2 and layer-3 meshes.

I was thinking that if I am given an IP address unique for the mesh, and
I could keep this whilst connected to any node, wouldn't it be possible
to have packets originating from me be properly routed regardless of
which node I am connected to?

I.e. if when connecting to a wifi node I generate my local IPv6 address
incorporating my MAC address, which can be assumed to be unique. And
when I am then walking to a second access point, losing connection with
the first, I would resend whatever TCP packets not properly sent to the
new AP, effectively re-establishing my connection on the new route.

Though I guess this is where I run into trouble in my train of thought,
as it would perhaps mean that each and every route to each connected
client would have to be propagated over the mesh network in order for
the ""return route"" to my machine to be properly updated.

Sorry if I haven't fully understood low-level implementations of the OSI
model, feel free to point me to documentation if it's too much. I'm
mostly trying to walk myself through the complexities of mesh networking
and asking for some help along the path ;)

> A while ago, I came upon a solution for doing seamless handover for
> access point clients, developed by folks at the Distributed System and
> Networks Lab @ Johns Hopkins. It's called Smesh: http://www.smesh.org/.
> I would love to try to implement this in Commotion, but it would be a
> long-term project that we currently don't have anyone working on.

No rush in my opinion at least. Seamless handoff is a luxury feature, so
there's no rush in getting it working before anything else .)

> But keep in mind that we are currently ramping up development of
> Commotion desktop/mobile mesh client software (linux, android, mac,
> windows, iOS), that will let mobile phones and laptops and such become
> full-fledged mesh nodes, which will allow for theoretically seamless
> roaming, as they will use ad-hoc links instead of access point
connections.

Absolutely, I'm following the development closely as we're trying out
the firmware builds here in Ume?, Sweden. .)

"
1503,Commotion-dev, Roaming between nodes,"Fri, 05 Jul 2013 12:55:55 -0400",-0400,Dan Staples,"On 07/04/2013 04:46 AM, Mikael ""MMN-o"" Nordfeldth wrote:
> On 2013-07-03 16:07, Dan Staples wrote:> I assume you mean
> roaming/handoff of non-mesh clients connected to
"
1504,Commotion-dev, New Commotion requests for proposals available,"Tue, 09 Jul 2013 10:11:19 -0400",-0400,Chris Ritzo,"Hello,

The Open Technology Institute invites all interested developers and
development firms to submit bids for a new round of RFPs, available at
https://commotionwireless.net/jobs/

Commotion Consultant for Strategic Planning
	https://commotionwireless.net/jobs/consultant-strategic-planning
OLSRd wifi_max_power Plugin		
	https://commotionwireless.net/jobs/olsrd-max-wifi-power
GSM Integration and Security
	https://commotionwireless.net/jobs/gsm-integration-security
Network Manager for Plugin for Linux Enhancements
	https://commotionwireless.net/jobs/linux-client
Commotion Linux Mesh Client GUI Enhancements
	https://commotionwireless.net/jobs/linux-gui
Commotion Android App Bundle Enhancements
	https://commotionwireless.net/jobs/android-enhancements
Serval Android App and Commotion Android App Integration
	https://commotionwireless.net/jobs/serval-commotion-android
Serval Rhizome API Extension and Serval Java Bindings
	https://commotionwireless.net/jobs/serval-apis
Serval Key Management
	https://commotionwireless.net/jobs/serval-key-management
Serval Multi-Key Support
	https://commotionwireless.net/jobs/serval-multi-key
Extend NaCl Crypto Library
	https://commotionwireless.net/jobs/nacl-crypto


-- 
Chris Ritzo
Technologist, Open Technology Institute
New America Foundation
"
1505,Commotion-dev, commotion-mesh-applet v0.1 released!,"Fri, 12 Jul 2013 15:47:02 -0400",-0400,Hans-Christoph Steiner,"
I just added a setup.py and pushed out a v0.1 release of commotion-mesh-applet
which includes a couple small but important bug fixes.  I also uploaded it to
Guardian Project Commotion PPA.

https://launchpad.net/~guardianproject/+archive/commotion

This includes packages for Oneiric thru Saucy.  The source tarball is
attached.  It should be possible to do ""python setup.py install"" but keep in
mind its barely tested.

commotion-mesh-applet-0.1.tar.gz SHA1: db7955ac8eee4d8355189811209238c34ab9f94e

.hc

-- 
PGP fingerprint: 5E61 C878 0F86 295C E17D  8677 9F0F E587 374B BE81
"
1506,Commotion-dev, commotion-mesh-applet v0.1 released!,"Sat, 13 Jul 2013 13:25:44 -0400",-0400,Will Hawkins,"Hey Hans!

Thanks for the note. I just wanted to confirm that I am reading your message correctly:

It continues to be possible to install the updated app through apt. There is a new option for installing from source using the setup.py script. 

Is that accurate? If it is, this is pretty awesome. 

Thanks for your work on this!
Will

 
On Friday, July 12, 2013 15:47 EDT, Hans-Christoph Steiner <hans at guardianproject.info> wrote: 
 
> 
> I just added a setup.py and pushed out a v0.1 release of commotion-mesh-applet
> which includes a couple small but important bug fixes.  I also uploaded it to
> Guardian Project Commotion PPA.
> 
> https://launchpad.net/~guardianproject/+archive/commotion
> 
> This includes packages for Oneiric thru Saucy.  The source tarball is
> attached.  It should be possible to do ""python setup.py install"" but keep in
> mind its barely tested.
> 
> commotion-mesh-applet-0.1.tar.gz SHA1: db7955ac8eee4d8355189811209238c34ab9f94e
> 
> .hc
> 
> -- 
> PGP fingerprint: 5E61 C878 0F86 295C E17D  8677 9F0F E587 374B BE81
 
 
 
 


"
1507,Commotion-dev, commotion-mesh-applet v0.1 released!,"Wed, 17 Jul 2013 15:20:07 -0400",-0400,Hans-Christoph Steiner,"

On 07/13/2013 01:25 PM, Will Hawkins wrote:
> Hey Hans!
> 
> Thanks for the note. I just wanted to confirm that I am reading your message correctly:
> 
> It continues to be possible to install the updated app through apt.

Yes.

> There is a new option for installing from source using the setup.py script. 
> 
> Is that accurate? If it is, this is pretty awesome. 

Yes, but I didn't test it beyond making the source tarball with it.

.hc

> Thanks for your work on this!
> Will
> 
>  
> On Friday, July 12, 2013 15:47 EDT, Hans-Christoph Steiner <hans at guardianproject.info> wrote: 
>  
"
1508,Commotion-dev, commotion-mesh-applet v0.1 released!,"Wed, 17 Jul 2013 15:21:14 -0400",-0400,Will Hawkins,"

On 07/17/2013 03:20 PM, Hans-Christoph Steiner wrote:
> 
> 
> On 07/13/2013 01:25 PM, Will Hawkins wrote:
"
1509,Commotion-dev, commotion-mesh-applet v0.1 released!,"Wed, 17 Jul 2013 15:21:46 -0400",-0400,Hans-Christoph Steiner,"
It is most tested on Linux Mint MATE and Ubuntu GNOME 3.  I also tested on
Linux Mint Cinnamon, Ubuntu Unity, and Debian GNOME 3.  In theory, it should
also work on GNOME2 and KDE, but I have not tested it there.

.hc

On 07/12/2013 05:22 PM, Griffin Boyce wrote:
> That's really awesome! Thanks so much Hans.
> 
> What platforms has this been tested on so far?
> 
> Best,
> Griffin
>  On Jul 12, 2013 3:48 PM, ""Hans-Christoph Steiner"" <
> hans at guardianproject.info> wrote:
> 
"
1510,Commotion-dev, IBSS-RSN for Linux,"Wed, 17 Jul 2013 19:32:18 -0400",-0400,Dan Staples,"On Wed 17 Jul 2013 01:48:53 PM EDT, Jordan McCarthy wrote:
> Catch-22: Wireless drivers for the fleet of netbooks don't support
> Ad-hoc mode on 13.04 - but 13.04 is required for IBSS-RSN support.
>
> https://bugs.launchpad.net/ubuntu/+source/bcmwl/+bug/1160471
> (Neither the built-in or the alternate driver work, albeit for
> different reasons).
>
> Next steps:
>
> Try to install 13.04 on a non-BCM4313 chipset (laptops/adapters)
>
> Try Debian
>
> Custom-compile wpa-supplicant on 12.04 with CONFIG_IBSS_RSN=y
>
>
>
> Jordan McCarthy
> Technical Program Associate | Open Technology Institute | New America
> Foundation
> My Public Key: 0xC08D8042 | 4A61 3D39 4125 127D 65EA DDC2 BFBD A2E9 C08D
> 8042
>
> On 07/16/2013 02:10 PM, Jordan McCarthy wrote:
"
1511,Commotion-dev, IBSS-RSN for Linux,"Wed, 17 Jul 2013 18:39:24 -0500",-0500,Ben West,"I can confirm a TL-Link WN-TL821Nv3 USB adapter under Ubuntu v12.10
successfully came up in adhoc, albeit I had to fiddle with things so that
the USB adapter would be named 'wlan0' for commotion-mesh-applet to be
happy.  Driver used was ath9k_htc, suggesting that other machines using
this driver may work.

On Wed, Jul 17, 2013 at 6:32 PM, Dan Staples <
danstaples at opentechinstitute.org> wrote:

> On Wed 17 Jul 2013 01:48:53 PM EDT, Jordan McCarthy wrote:
> > Catch-22: Wireless drivers for the fleet of netbooks don't support
> > Ad-hoc mode on 13.04 - but 13.04 is required for IBSS-RSN support.
> >
> > https://bugs.launchpad.net/ubuntu/+source/bcmwl/+bug/1160471
> > (Neither the built-in or the alternate driver work, albeit for
> > different reasons).
> >
> > Next steps:
> >
> > Try to install 13.04 on a non-BCM4313 chipset (laptops/adapters)
> >
> > Try Debian
> >
> > Custom-compile wpa-supplicant on 12.04 with CONFIG_IBSS_RSN=y
> >
> >
> >
> > Jordan McCarthy
> > Technical Program Associate | Open Technology Institute | New America
> > Foundation
> > My Public Key: 0xC08D8042 | 4A61 3D39 4125 127D 65EA DDC2 BFBD A2E9 C08D
> > 8042
> >
> > On 07/16/2013 02:10 PM, Jordan McCarthy wrote:
> "
1512,Commotion-dev, IBSS-RSN for Linux,"Wed, 17 Jul 2013 20:17:49 -0400",-0400,Jordan McCarthy,
1513,Commotion-dev, IBSS-RSN for Linux,"Thu, 18 Jul 2013 00:09:26 -0400",-0400,Will Hawkins,"Thanks for posting this update, Jordan.

Like Jordan said, things are looking better with respect to IBSS RSN support on Linux. He and I are going to continue debugging tomorrow. I'm sure that he will have another update to send around soon! 

Will
 
On Wednesday, July 17, 2013 20:17 EDT, Jordan McCarthy <mccarthy at opentechinstitute.org> wrote: 
 
> "
1514,Commotion-dev, IBSS-RSN for Linux,"Thu, 18 Jul 2013 09:09:28 -0400",-0400,Chris Ritzo,"On 07/17/2013 07:39 PM, Ben West wrote:
> I can confirm a TL-Link WN-TL821Nv3 USB adapter under Ubuntu v12.10
> successfully came up in adhoc, albeit I had to fiddle with things so
> that the USB adapter would be named 'wlan0' for commotion-mesh-applet to
> be happy.  Driver used was ath9k_htc, suggesting that other machines
> using this driver may work.
> 
> On Wed, Jul 17, 2013 at 6:32 PM, Dan Staples
> <danstaples at opentechinstitute.org
> <mailto:danstaples at opentechinstitute.org"
1515,Commotion-dev, IBSS-RSN for Linux,"Thu, 18 Jul 2013 09:23:36 -0400",-0400,The Doctor,
1516,Commotion-dev, Utilite $100 ARM-based computer,"Sun, 21 Jul 2013 22:44:50 -0500",-0500,Ben West,"This product is being advertised as a beefier version of the Raspberry Pi.
Forwarding along since some list members had discussed merits of running
Commotion, Serval, et al, on more powerful hardware.  The inclusion of 2
genuine gigabit Ethernet ports is interesting, as opposed to an Ethernet
PHY that still hangs off an internal USB interface.

http://arstechnica.com/information-technology/2013/07/99-arm-based-pc-runs-either-ubuntu-or-android/
http://utilite-computer.com/web/home

The wifi chipset is a Maxwell 88MW8787, which used the kernel driver
mwifiex_sdio.  Not much information seems to be available about that
module, other than that it is not a softMAC driver like ar71xx.  (So,
closed source I suspect.)

http://wireless.kernel.org/en/users/Drivers/mwifiex


-- 
Ben West
http://gowasabi.net
ben at gowasabi.net
314-246-9434
"
1517,Commotion-dev, Fwd: [liberationtech] Circumventing,"Mon, 22 Jul 2013 21:51:04 -0400",-0400,Dan Staples,"Some pretty ambitious goals...perhaps let's get in touch with them, if
no one is already. I've never heard of the project before.


"
1518,Commotion-dev, Fwd: [liberationtech] Circumventing,"Mon, 22 Jul 2013 22:12:25 -0400",-0400,Dan Staples,"On Mon 22 Jul 2013 09:51:04 PM EDT, Dan Staples wrote:
> Some pretty ambitious goals...perhaps let's get in touch with them, if
> no one is already. I've never heard of the project before.
>
>
> "
1519,Commotion-dev, Do you have a bunch of old DirectTV-style dish,"Mon, 22 Jul 2013 22:17:30 -0500",-0500,Ben West,"Hi All,

I'm revisiting this old thread to share how awesome discarded satellite TV
dish mounts are for low-cost (or even free) rooftop antenna masts.  These
two pix show clever reuse of the dish mounting bracket (sans the parabolic
dish itself), mated with a couple conduit hangers and a vertical length of
1/2"" steel conduit to support the access points.

http://goo.gl/ixVTI
http://goo.gl/AltEh

To make a DIY base suitable for use on flat rooftops, you can screw
together some lengths of treated lumber into a ""T"", bolt the dish mounting
bracket to it, and then weigh the base down with cinderblocks.

If the rooftop is not your own, do first check with the building owner.  It
can be good diligence to use one of those black rubber mats under the
wooden base to deter rotting away the tarpaper or whatever the roof is
topped with.

I'm trying to keep a running photo log of my own rooftop adventures here,
since all of this stuff is easy to assemble:
http://gowasabi.net/content/your-rooftop

(Of course, the best is to find an orphaned dish, rubber mat, metal base,
AND cinderblocks already on the roof, just waiting to be re-purposed.)

On Tue, Jan 15, 2013 at 3:01 PM, Ben West <ben at gowasabi.net> wrote:

> This exterior wall mount for 2 access points came together quite nicely.
>  It's the angled mounting bracket for a Direct TV dish, minus the dish.  I
> used an ~18inch piece of 0.5inch metal conduit to lash the APs to.
>
>
> https://picasaweb.google.com/111527167238510651213/WasabiNetOnYourRooftop#5833782534554801042
>
> Abandoned dishes like this one are practically a dime a dozen here in St.
> Louis.  So many apartment tenants sign up satellite TV, and then abandon
> it.  Frequently, the landlords are more than happy to let you remove the
> orphaned equipment for free.
>
> --
> Ben West
> http://gowasabi.net
> ben at gowasabi.net
> 314-246-9434
"
1520,Commotion-dev, Fwd: [liberationtech] Circumventing,"Tue, 23 Jul 2013 13:18:21 +0930",+0930,Paul Gardner-Stephen,"Hello,

The project rings a bell, but I don't recall if I ever managed to speak
with them.

Certainly worth following up.

Paul.

On Tue, Jul 23, 2013 at 11:21 AM, Dan Staples <
danstaples at opentechinstitute.org> wrote:

> Some pretty ambitious goals...perhaps let's get in touch with them, if
> no one is already. I've never heard of the project before.
>
>
> "
1521,Commotion-dev, Do you have a bunch of old DirectTV-style dish,"Tue, 23 Jul 2013 07:41:30 -0400",-0400,Dan Staples,"On Mon 22 Jul 2013 11:17:30 PM EDT, Ben West wrote:
> Hi All,
>
> I'm revisiting this old thread to share how awesome discarded
> satellite TV dish mounts are for low-cost (or even free) rooftop
> antenna masts.  These two pix show clever reuse of the dish mounting
> bracket (sans the parabolic dish itself), mated with a couple conduit
> hangers and a vertical length of 1/2"" steel conduit to support the
> access points.
>
> http://goo.gl/ixVTI
> http://goo.gl/AltEh
>
> To make a DIY base suitable for use on flat rooftops, you can screw
> together some lengths of treated lumber into a ""T"", bolt the dish
> mounting bracket to it, and then weigh the base down with cinderblocks.
>
> If the rooftop is not your own, do first check with the building
> owner.  It can be good diligence to use one of those black rubber mats
> under the wooden base to deter rotting away the tarpaper or whatever
> the roof is topped with.
>
> I'm trying to keep a running photo log of my own rooftop adventures
> here, since all of this stuff is easy to assemble:
> http://gowasabi.net/content/your-rooftop
>
> (Of course, the best is to find an orphaned dish, rubber mat, metal
> base, AND cinderblocks already on the roof, just waiting to be
> re-purposed.)
>
> On Tue, Jan 15, 2013 at 3:01 PM, Ben West <ben at gowasabi.net
> <mailto:ben at gowasabi.net"
1522,Commotion-dev, Do you have a bunch of old DirectTV-style dish,"Tue, 23 Jul 2013 11:48:14 -0400",-0400,Hans-Christoph Steiner,"
Great info and photo album :)  I also once turned a DirecTV dish into a wifi
antenna.  It was pretty laborious but it seemed to work quite well.

This makes me want to get off the computer and onto roofs!

.hc

On 07/22/2013 11:17 PM, Ben West wrote:
> Hi All,
> 
> I'm revisiting this old thread to share how awesome discarded satellite TV
> dish mounts are for low-cost (or even free) rooftop antenna masts.  These
> two pix show clever reuse of the dish mounting bracket (sans the parabolic
> dish itself), mated with a couple conduit hangers and a vertical length of
> 1/2"" steel conduit to support the access points.
> 
> http://goo.gl/ixVTI
> http://goo.gl/AltEh
> 
> To make a DIY base suitable for use on flat rooftops, you can screw
> together some lengths of treated lumber into a ""T"", bolt the dish mounting
> bracket to it, and then weigh the base down with cinderblocks.
> 
> If the rooftop is not your own, do first check with the building owner.  It
> can be good diligence to use one of those black rubber mats under the
> wooden base to deter rotting away the tarpaper or whatever the roof is
> topped with.
> 
> I'm trying to keep a running photo log of my own rooftop adventures here,
> since all of this stuff is easy to assemble:
> http://gowasabi.net/content/your-rooftop
> 
> (Of course, the best is to find an orphaned dish, rubber mat, metal base,
> AND cinderblocks already on the roof, just waiting to be re-purposed.)
> 
> On Tue, Jan 15, 2013 at 3:01 PM, Ben West <ben at gowasabi.net> wrote:
> 
"
1523,Commotion-dev, commotion-mesh-applet v0.1 released!,"Tue, 23 Jul 2013 18:28:21 +0200",+0200,"Mikael ""MMN-o"" Nordfeldth","On 2013-07-12 21:47, Hans-Christoph Steiner wrote:
> This includes packages for Oneiric thru Saucy.  The source tarball is
> attached.  It should be possible to do ""python setup.py install"" but keep in
> mind its barely tested.
> 
> commotion-mesh-applet-0.1.tar.gz SHA1: db7955ac8eee4d8355189811209238c34ab9f94e

Is a Debian build set planned? I'm running wheezy (Debian 7.1) and would
prefer it if there was a pre-built dependency chain available through apt :)


Either way, when installing nm-dispatcher-olsrd from the 'oneiric'
branch, the only one with a Debian-compatible libc6 version dependency,
I get the following (pardon my sv_SE locale):

   St?ller in nm-dispatcher-olsrd (0.1-1~oneiric) ...
   Usage: /etc/init.d/network-manager
{start|stop|restart|force-reload|status}
   dpkg: fel vid hantering av nm-dispatcher-olsrd (--configure):
    underprocessen installerade post-installation-skript gav felkod 1

If you couldn't translate it, it means that that when apt runs configure
on nm-dispatcher-olsrd it gets a bad exit code (1). The ""Usage:"" line is
obviously from some attempt to run the network-manager init script.

If this is due to oneiric's network-manager not being the same as Debian
wheezy, nevermind this report. I haven't looked at what might really be
going on under the hood.


I'll make sure to try the mesh applet on an Ubuntu raring (13.04)
release as well, where I'm sure it'll install easier. However I've just
started to move away from Canonical since their Amazon trickstery (but
not all machines are migrated yet, so I'll make sure to make time!).

-- 
Mikael ""MMN-o"" Nordfeldth
XMPP/mail: mmn at hethane.se
http://blog.mmn-o.se/

"
1524,Commotion-dev, Fwd: [liberationtech] Circumventing,"Tue, 23 Jul 2013 12:46:34 -0400",-0400,Hans-Christoph Steiner,"
I just recently heard of it.  One of the people on the project, Yahel
Ben-David, was also involved in the AirJaldi mesh network in India.  The
rangzen software sounds like it would be very complimentary with OLSR mesh
networks.

Looks like quite an interesting project.  Its basically a secure system of
peer-to-peer delay-tolerant messaging.  On one hand, its good that they are
focusing on the layer above the actual network connectivity since it is an
area ripe for exploration.  It sounds like they are making delay-tolerant Tor,
with delay meaning hours, days, etc.

Their descriptions seem to say that this project
provide a complete networking solution when there is a network blackout.  But
when you look at the details of what the actual network is, they say it is
""leveraging whatever connectivity may be available, from full 3G/4G internet
access, through ad-hoc wifi & Bluetooth, to sneakernet (manual transport of
SD-cards).""

To use adhoc wifi, bluetooth, etc. seamlessly and transparently is quite
difficult and relies on lots of manual steps.  Sneakernet is definitely very
manual.  This means that this project will remain an ""activist tool"", and once
it is at all widely deployed, it will become a target like Tor is.  I suspect
Rangzen traffic will be tracked and blocked by China, etc. like how
Tor traffic is.

So the key its success of it is getting it working well with as many available
data transports as possible: mesh networks, GSM, internet, bluetooth, wifi
direct, sneakernet, etc.  Sounds like they have the money to do that.
Hopefully they'll work collaboratively and openly so that all of these related
projects can share on the hard technical details.

They have a paper which outlines their criticisms of existing approaches:
http://www.eecs.berkeley.edu/~yahel/papers/Building_Dissent_Networks-Towards_Effective_Countermeasures_against_Large-Scale_Communications_Blackouts.FOCI2013.pdf

.hc

On 07/22/2013 11:48 PM, Paul Gardner-Stephen wrote:
> Hello,
> 
> The project rings a bell, but I don't recall if I ever managed to speak
> with them.
> 
> Certainly worth following up.
> 
> Paul.
> 
> On Tue, Jul 23, 2013 at 11:21 AM, Dan Staples <
> danstaples at opentechinstitute.org> wrote:
> 
"
1525,Commotion-dev, getting MeshTether to build from git,"Tue, 23 Jul 2013 14:05:51 -0400",-0400,Hans-Christoph Steiner,"
Hey all,

I've added Commotion MeshTether to the official Guardian build server, this is
a hardened build server that we use to make automatic, trusted test builds.
The box itself is not publicly online, but it posts its results here:

https://guardianproject.info/builds/CommotionMeshTether/

I recently did some work to get it closer to building straight from git.  It
will now automatically build whenever anyone pushes a commit, and if there is
a problem, it will email the email addresses found in the commits.

I just got it building, but I haven't tested it at all.  Feedback appreciated.
 I'd like to add MeshTether to F-Droid to get it out there.

.hc

-- 
PGP fingerprint: 5E61 C878 0F86 295C E17D  8677 9F0F E587 374B BE81

"
1526,Commotion-dev, getting MeshTether to build from git,"Tue, 23 Jul 2013 20:16:02 -0400",-0400,Hans-Christoph Steiner,"
Hey Will,

I'd be happy to advise on the process of setting up a Jenkins box, its not too
complicated.  I recommend running it on Debian/stable.  The first question to
ask about your Jenkins box is whether you want to use it for build feedback
and tests only, or whether you want to make trusted builds from it.  I would
not trust a public Jenkins to make release builds, period.  Its not secure
enough.  A public Jenkins might be OK to make public test builds, if its
closely watched.  We need our Jenkins to produce trusted test builds, so its
not publicly available.

We have heard about the possibility of having a private Jenkins instance sync
its info with a public Jenkins instance, so you can have the best of both
worlds.  We hope to try this out some day in the not too distant future.

That said, at this point running the MeshTether job is basically zero pressure
on our build server or me.  Once its setup, it mostly just runs.  I have found
that using build slaves to be the opposite though, they can be quite unstable.

.hc

On 07/23/2013 07:42 PM, Will Hawkins wrote:
> Hey Hans!
> 
> Thanks for getting this set up on your build server. We now have
> Jordan back in the office (he's back from his school year at Stanford)
> and he is leading the charge to get our build server up and running.
> We've got all the physical components here and they are going to go
> online in the next few days.
> 
> If possible, we'd like to replicate your MeshTether build system on
> that server. That will relieve some pressure on you from having to
> host it and it will give us a good sense of the Jenkins system and its
> configuration.
> 
> Would you be willing to help us do that? I know you've spent lots of
> time working with Jenkins and we could benefit from your expertise.
> 
> Thanks so much!
> Will
> 
> On 07/23/2013 02:05 PM, Hans-Christoph Steiner wrote:
> 
"
1527,Commotion-dev, commotion-mesh-applet v0.1 released!,"Tue, 23 Jul 2013 20:18:40 -0400",-0400,Hans-Christoph Steiner,"

On 07/23/2013 12:28 PM, Mikael ""MMN-o"" Nordfeldth wrote:
> On 2013-07-12 21:47, Hans-Christoph Steiner wrote:
"
1528,Commotion-dev, getting MeshTether to build from git,"Wed, 24 Jul 2013 12:17:01 -0500",-0500,Ben West,"I've used Jenkins for continuous integration in the past, and I would
handily recommend it.  It's also great for github integration, and
especially for archiving previous builds.

What sort of security layers would be desirable for a Jenkins instance?
The web UI can do basic username/password-based auth, which I would
recommend only serving over SSL.

On Tue, Jul 23, 2013 at 7:16 PM, Hans-Christoph Steiner <
hans at guardianproject.info> wrote:

>
> Hey Will,
>
> I'd be happy to advise on the process of setting up a Jenkins box, its not
> too
> complicated.  I recommend running it on Debian/stable.  The first question
> to
> ask about your Jenkins box is whether you want to use it for build feedback
> and tests only, or whether you want to make trusted builds from it.  I
> would
> not trust a public Jenkins to make release builds, period.  Its not secure
> enough.  A public Jenkins might be OK to make public test builds, if its
> closely watched.  We need our Jenkins to produce trusted test builds, so
> its
> not publicly available.
>
> We have heard about the possibility of having a private Jenkins instance
> sync
> its info with a public Jenkins instance, so you can have the best of both
> worlds.  We hope to try this out some day in the not too distant future.
>
> That said, at this point running the MeshTether job is basically zero
> pressure
> on our build server or me.  Once its setup, it mostly just runs.  I have
> found
> that using build slaves to be the opposite though, they can be quite
> unstable.
>
> .hc
>
> On 07/23/2013 07:42 PM, Will Hawkins wrote:
> > Hey Hans!
> >
> > Thanks for getting this set up on your build server. We now have
> > Jordan back in the office (he's back from his school year at Stanford)
> > and he is leading the charge to get our build server up and running.
> > We've got all the physical components here and they are going to go
> > online in the next few days.
> >
> > If possible, we'd like to replicate your MeshTether build system on
> > that server. That will relieve some pressure on you from having to
> > host it and it will give us a good sense of the Jenkins system and its
> > configuration.
> >
> > Would you be willing to help us do that? I know you've spent lots of
> > time working with Jenkins and we could benefit from your expertise.
> >
> > Thanks so much!
> > Will
> >
> > On 07/23/2013 02:05 PM, Hans-Christoph Steiner wrote:
> >
> "
1529,Commotion-dev, OpenWRT AP not functioning,"Wed, 24 Jul 2013 14:35:42 -0400",-0400,Dan Staples,"Just built Commotion-OpenWRT from scratch today, and after going through
quickstart, the AP is not functioning. No beacons, and we can't even
connect to it as you would with an AP with a hidden SSID. It just isn't
working. We've tested on multiple picostation routers, with same results.

ifconfig reports the access point interface is up, it has an IP address,
and even iwinfo reports it as being fully functioning. Yet...there are
no beacon frames and we cannot connect to it.

Curiously, the ad-hoc interface is working just fine.

Anyone else run into this, or can confirm? Both OpenWRT core feed and
the packages feed are pinned to known-working revisions.

-- 
Dan Staples

Open Technology Institute
https://commotionwireless.net
OpenPGP key: http://disman.tl/pgp.asc
Fingerprint: 2480 095D 4B16 436F 35AB 7305 F670 74ED BD86 43A9
"
1530,Commotion-dev, OpenWRT AP not functioning,"Wed, 24 Jul 2013 13:50:58 -0500",-0500,CAMP Events Coordinator,"I have working Nanostation Loco M2 right now, running Commotion-OpenWRT
compiled from a build tree pinned to AA r36681, including the packages feed.

Is there anything I could share from my build tree to help troubleshoot?

On Wed, Jul 24, 2013 at 1:35 PM, Dan Staples <
danstaples at opentechinstitute.org> wrote:

> Just built Commotion-OpenWRT from scratch today, and after going through
> quickstart, the AP is not functioning. No beacons, and we can't even
> connect to it as you would with an AP with a hidden SSID. It just isn't
> working. We've tested on multiple picostation routers, with same results.
>
> ifconfig reports the access point interface is up, it has an IP address,
> and even iwinfo reports it as being fully functioning. Yet...there are
> no beacon frames and we cannot connect to it.
>
> Curiously, the ad-hoc interface is working just fine.
>
> Anyone else run into this, or can confirm? Both OpenWRT core feed and
> the packages feed are pinned to known-working revisions.
>
> --
> Dan Staples
>
> Open Technology Institute
> https://commotionwireless.net
> OpenPGP key: http://disman.tl/pgp.asc
> Fingerprint: 2480 095D 4B16 436F 35AB 7305 F670 74ED BD86 43A9
> _______________________________________________
> Commotion-dev mailing list
> Commotion-dev at lists.chambana.net
> https://lists.chambana.net/mailman/listinfo/commotion-dev
>
"
1531,Commotion-dev, OpenWRT AP not functioning,"Wed, 24 Jul 2013 13:51:58 -0500",-0500,Ben West,"Whoops, and please disregard the sending email address from my last post.
Silly GMail ...

On Wed, Jul 24, 2013 at 1:50 PM, CAMP Events Coordinator <
coordinator at stlcamp.org> wrote:

> I have working Nanostation Loco M2 right now, running Commotion-OpenWRT
> compiled from a build tree pinned to AA r36681, including the packages feed.
>
> Is there anything I could share from my build tree to help troubleshoot?
>
>
> On Wed, Jul 24, 2013 at 1:35 PM, Dan Staples <
> danstaples at opentechinstitute.org> wrote:
>
"
1532,Commotion-dev, OpenWRT AP not functioning,"Wed, 24 Jul 2013 15:04:48 -0400",-0400,Dan Staples,"On Wed 24 Jul 2013 02:51:58 PM EDT, Ben West wrote:
> Whoops, and please disregard the sending email address from my last
> post.  Silly GMail ...
>
> On Wed, Jul 24, 2013 at 1:50 PM, CAMP Events Coordinator
> <coordinator at stlcamp.org <mailto:coordinator at stlcamp.org"
1533,Commotion-dev, OpenWRT AP not functioning,"Wed, 24 Jul 2013 14:20:00 -0500",-0500,Ben West,"Hi Dan,

I can try building a fresh copy of Commotion-OpenWRT this evening.

In the meantime, do please check your list of compiled packages.  My
working build tree just has the wpad package installed, not hostapd +
wpa_supplicant.  I do recall a some point recently the suggested config
file for building Commotion-OpenWRT switched over to wpad.  I do know that
having wpad AND hostapd / wpa_supplicant installed can cause weird
contention issues.


We just managed to get the AP working again by killing hostapd and
> wpa_supplicant, and then restarting them, in that order. Still no idea
> what is causing the initial malfunction. Ben, feel like building
> vanilla Commotion-OpenWRT and confirming?
>
> --
> Dan Staples
>
> Open Technology Institute
> https://commotionwireless.net
> OpenPGP key: http://disman.tl/pgp.asc
> Fingerprint: 2480 095D 4B16 436F 35AB 7305 F670 74ED BD86 43A9
"
1534,Commotion-dev, LibraryBox: filesharing and mesh,"Wed, 24 Jul 2013 16:44:47 -0500",-0500,Ben West,"A friend pointed me to this Kickstarter for LibraryBox:

""LibraryBox is an anonymous fileserver based on cheap hardware that runs on
little power and serves files to any wifi-enabled device with a browser. It
is a fork of the Open Source project PirateBox, altered to be more
comfortable to use for libraries, educators, and anyone else that has a
need to serve files in locations that lack reliable, unfiltered
connectivity with the Internet.""

http://www.kickstarter.com/projects/griffey/librarybox-20
http://librarybox.us/

The photo suggests a TP-Link TL-MR3020 or TL-WN703N, indeed with an
itty-bitty flash drive in the USB jack.

Likewise, I'm about to deploy my 2nd TL-MR3020 as a repeater node for
WasabiNet, having finally squeezed enough of the firmware into 4MB to get
mesh + AP + coovachilli all onboard.

It is neat to see a low-cost platform like the TL-MR3020, whose intended
use as ""3G travel modem"" is kinda worthless, but which nevertheless enables
quite a diversity of community wifi projects.

-- 
Ben West
http://gowasabi.net
ben at gowasabi.net
314-246-9434
"
1535,Commotion-dev, LibraryBox: filesharing and mesh,"Wed, 24 Jul 2013 19:09:07 -0400",-0400,Chris Ritzo,"On 07/24/2013 05:44 PM, Ben West wrote:
> A friend pointed me to this Kickstarter for LibraryBox:
> 
> ""LibraryBox is an anonymous fileserver based on cheap hardware that runs
> on little power and serves files to any wifi-enabled device with a
> browser. It is a fork of the Open Source project PirateBox, altered to
> be more comfortable to use for libraries, educators, and anyone else
> that has a need to serve files in locations that lack reliable,
> unfiltered connectivity with the Internet.""
> 
> http://www.kickstarter.com/projects/griffey/librarybox-20
> http://librarybox.us/
> 
> The photo suggests a TP-Link TL-MR3020 or TL-WN703N, indeed with an
> itty-bitty flash drive in the USB jack.
> 
> Likewise, I'm about to deploy my 2nd TL-MR3020 as a repeater node for
> WasabiNet, having finally squeezed enough of the firmware into 4MB to
> get mesh + AP + coovachilli all onboard.
> 
> It is neat to see a low-cost platform like the TL-MR3020, whose intended
> use as ""3G travel modem"" is kinda worthless, but which nevertheless
> enables quite a diversity of community wifi projects.
> 
> -- 
> Ben West
> http://gowasabi.net
> ben at gowasabi.net <mailto:ben at gowasabi.net>
> 314-246-9434
> 
> 
> _______________________________________________
> Commotion-dev mailing list
> Commotion-dev at lists.chambana.net
> https://lists.chambana.net/mailman/listinfo/commotion-dev
> 

I met Jason Griffey who is the developer of LibraryBox. One of his
features for the next version is ""mesh networking"". I'm wondering if the
work folks have done on ""appropriate box"" would be useful to share.

-- 
Chris Ritzo
Technologist, Open Technology Institute
New America Foundation
"
1536,Commotion-dev, LibraryBox: filesharing and mesh,"Thu, 25 Jul 2013 09:07:40 +0930",+0930,Paul Gardner-Stephen,"It is indeed an MR3020, the same as we are using for the Mesh Extenders at
present.

I will poke the guys, because there it looks like there should be no reason
not to merge the software for both.

Paul.




On Thu, Jul 25, 2013 at 7:14 AM, Ben West <ben at gowasabi.net> wrote:

> A friend pointed me to this Kickstarter for LibraryBox:
>
> ""LibraryBox is an anonymous fileserver based on cheap hardware that runs
> on little power and serves files to any wifi-enabled device with a browser.
> It is a fork of the Open Source project PirateBox, altered to be more
> comfortable to use for libraries, educators, and anyone else that has a
> need to serve files in locations that lack reliable, unfiltered
> connectivity with the Internet.""
>
> http://www.kickstarter.com/projects/griffey/librarybox-20
> http://librarybox.us/
>
> The photo suggests a TP-Link TL-MR3020 or TL-WN703N, indeed with an
> itty-bitty flash drive in the USB jack.
>
> Likewise, I'm about to deploy my 2nd TL-MR3020 as a repeater node for
> WasabiNet, having finally squeezed enough of the firmware into 4MB to get
> mesh + AP + coovachilli all onboard.
>
> It is neat to see a low-cost platform like the TL-MR3020, whose intended
> use as ""3G travel modem"" is kinda worthless, but which nevertheless enables
> quite a diversity of community wifi projects.
>
> --
> Ben West
> http://gowasabi.net
> ben at gowasabi.net
> 314-246-9434
>
> _______________________________________________
> Commotion-dev mailing list
> Commotion-dev at lists.chambana.net
> https://lists.chambana.net/mailman/listinfo/commotion-dev
>
>
"
1537,Commotion-dev, LibraryBox: filesharing and mesh,"Thu, 25 Jul 2013 10:03:22 -0400",-0400,Darby Hickey,"Considering the emphasis we want to have on local apps for the
International Summit for Community Wireless Networks, it would be great to
invite him. For those who didn't already know about it:
2013.wirelesssummit.org

Chris, could you pass on the info to him?


On Wed, Jul 24, 2013 at 7:37 PM, Paul Gardner-Stephen <
paul at servalproject.org> wrote:

> It is indeed an MR3020, the same as we are using for the Mesh Extenders at
> present.
>
> I will poke the guys, because there it looks like there should be no
> reason not to merge the software for both.
>
> Paul.
>
>
>
>
> On Thu, Jul 25, 2013 at 7:14 AM, Ben West <ben at gowasabi.net> wrote:
>
"
1538,Commotion-dev, OpenWRT AP not functioning,"Thu, 25 Jul 2013 21:59:43 -0400",-0400,Dan Staples,"On Wed 24 Jul 2013 05:35:22 PM EDT, Paul Gardner-Stephen wrote:
> A possibly related problem I have seen in some circumstances is that
> the mac address must be different for them both, or else only one will
> start.  This resulted in exactly the problem you are describing here.
>
> Paul.
>
>
> On Thu, Jul 25, 2013 at 4:05 AM, Dan Staples
> <danstaples at opentechinstitute.org
> <mailto:danstaples at opentechinstitute.org"
1539,Commotion-dev, OpenWRT AP not functioning,"Thu, 25 Jul 2013 22:31:20 -0500",-0500,Ben West,"I did notice approx 1.5 months ago that AA r36682+ did seem to cause
IBSS-RSN to stop working entirely, at least with nodes that had packages
hostapd and wpa_supplicant (but NOT wpad) installed.

Right now, I have a collection of nodes running AA r36681 with JUST wpad,
any they appear to be doing IBSS-RSN adhoc just fine.

Stability issues notwithstanding, is there a reason to go with the full
hostapd / wpa_supplicant packages?  I noticed you save 150-200kBytes in
firmware size using wpad instead.

On Thu, Jul 25, 2013 at 8:59 PM, Dan Staples <
danstaples at opentechinstitute.org> wrote:

>
> Update: turns out building w/ wpa_supplicant and hostapd as separate
> packages (instead of wpad which combines them into one binary) solves
> the problem. A newer version of wpad/hostapd/wpa_supplicant is available
> since we pinned AA to revisions from April, so Will and Jordan
> experimented with using the new version.
>
> I just built with OpenWRT pinned @36682 and the packages feed @36537,
> and can confirm it fixes the problem, while including the newer version
> of wpad/hostapd/wpa_supplicant. IBSS-RSN works as well.
>
> Thanks Will and Jordan for doing a lot of hard work investigating this
> today!
>
> --
> Dan Staples
>
> Open Technology Institute
> https://commotionwireless.net
> OpenPGP key: http://disman.tl/pgp.asc
> Fingerprint: 2480 095D 4B16 436F 35AB 7305 F670 74ED BD86 43A9
> _______________________________________________
> Commotion-dev mailing list
> Commotion-dev at lists.chambana.net
> https://lists.chambana.net/mailman/listinfo/commotion-dev
>
"
1540,Commotion-dev, OpenWRT AP not functioning,"Fri, 26 Jul 2013 07:43:34 -0400",-0400,Dan Staples,"On Thu 25 Jul 2013 11:31:20 PM EDT, Ben West wrote:
> I did notice approx 1.5 months ago that AA r36682+ did seem to cause
> IBSS-RSN to stop working entirely, at least with nodes that had
> packages hostapd and wpa_supplicant (but NOT wpad) installed.
>
> Right now, I have a collection of nodes running AA r36681 with JUST
> wpad, any they appear to be doing IBSS-RSN adhoc just fine.
>
> Stability issues notwithstanding, is there a reason to go with the
> full hostapd / wpa_supplicant packages?  I noticed you save
> 150-200kBytes in firmware size using wpad instead.
>
> On Thu, Jul 25, 2013 at 8:59 PM, Dan Staples
> <danstaples at opentechinstitute.org
> <mailto:danstaples at opentechinstitute.org"
1541,Commotion-dev, OpenWRT AP not functioning,"Fri, 26 Jul 2013 08:29:43 -0400",-0400,Josh King,"Yes, we should definitely continue to go with wpad assuming we can 
identify a version that works reliably. Presumably, the space savings 
is why OpenWRT compiles hostapd and wpa_supplicant into the wpad 
multi-call binary in the first place. Will was building images with a 
new version pinning as well, as he suspected that the problem might be 
a mismatch between the nl80211 headers included in wpad vs. the version 
made available with the kernel. He'll send updates to the list.

As an aside, something we should look into doing at some point is 
rolling our own version of wpad-mini that has the IBSS-RSN compile 
flags added. The addition of those flags are the only reason we 
switched from wpad-mini to wpad, but wpad also contains the whole 
WPA-Enterprise stack and we could potentially save up to 400-600KB by 
stripping that out, from what I recall.

On Fri 26 Jul 2013 07:43:34 AM EDT, Dan Staples wrote:
> On Thu 25 Jul 2013 11:31:20 PM EDT, Ben West wrote:
"
1542,Commotion-dev, OpenWRT AP not functioning,"Fri, 26 Jul 2013 08:33:23 -0400",-0400,Dan Staples,"On Fri 26 Jul 2013 08:29:43 AM EDT, Josh King wrote:
> Yes, we should definitely continue to go with wpad assuming we can
> identify a version that works reliably. Presumably, the space savings
> is why OpenWRT compiles hostapd and wpa_supplicant into the wpad
> multi-call binary in the first place. Will was building images with a
> new version pinning as well, as he suspected that the problem might be
> a mismatch between the nl80211 headers included in wpad vs. the version
> made available with the kernel. He'll send updates to the list.
>
> As an aside, something we should look into doing at some point is
> rolling our own version of wpad-mini that has the IBSS-RSN compile
> flags added. The addition of those flags are the only reason we
> switched from wpad-mini to wpad, but wpad also contains the whole
> WPA-Enterprise stack and we could potentially save up to 400-600KB by
> stripping that out, from what I recall.
>
> On Fri 26 Jul 2013 07:43:34 AM EDT, Dan Staples wrote:
"
1543,Commotion-dev, OpenWRT AP not functioning,"Fri, 26 Jul 2013 09:53:52 -0500",-0500,Ben West,"I think one underlying cause is that AA r36682 coincides with a hostapd
update in the OpenWRT source (likewise for wpa_supplicant, wpad, and their
derivatives).  Here are a couple posts to the OpenWRT-devel listserv from
Antonio Quartulli, who works with open-mesh.org and BATMAN, about the
problem.  He mentioned submitting patches to the hostapd/wap_supplicant
list too.

https://lists.openwrt.org/pipermail/openwrt-devel/2013-July/020685.html
https://lists.openwrt.org/pipermail/openwrt-devel/2013-July/020689.html

On Fri, Jul 26, 2013 at 7:33 AM, Dan Staples <
danstaples at opentechinstitute.org> wrote:

> On Fri 26 Jul 2013 08:29:43 AM EDT, Josh King wrote:
> > Yes, we should definitely continue to go with wpad assuming we can
> > identify a version that works reliably. Presumably, the space savings
> > is why OpenWRT compiles hostapd and wpa_supplicant into the wpad
> > multi-call binary in the first place. Will was building images with a
> > new version pinning as well, as he suspected that the problem might be
> > a mismatch between the nl80211 headers included in wpad vs. the version
> > made available with the kernel. He'll send updates to the list.
> >
> > As an aside, something we should look into doing at some point is
> > rolling our own version of wpad-mini that has the IBSS-RSN compile
> > flags added. The addition of those flags are the only reason we
> > switched from wpad-mini to wpad, but wpad also contains the whole
> > WPA-Enterprise stack and we could potentially save up to 400-600KB by
> > stripping that out, from what I recall.
> >
> > On Fri 26 Jul 2013 07:43:34 AM EDT, Dan Staples wrote:
> "
1544,Commotion-dev, LibraryBox: filesharing and mesh,"Fri, 26 Jul 2013 21:36:23 -0400",-0400,Seamus Tuohy,"

On 07/24/2013 07:09 PM, Chris Ritzo wrote:
> On 07/24/2013 05:44 PM, Ben West wrote:
"
1545,Commotion-dev, LibraryBox: filesharing and mesh,"Sat, 27 Jul 2013 19:49:12 -0400",-0400,Chris Ritzo,"On Fri 26 Jul 2013 09:36:23 PM EDT, Seamus Tuohy wrote:
>
>
> On 07/24/2013 07:09 PM, Chris Ritzo wrote:
"
1546,Commotion-dev, LibraryBox: filesharing and mesh,"Sat, 27 Jul 2013 20:30:18 -0500",-0500,Ben West,"The underlying cool thing is that the proliferation of low-cost, ultra
small form-factor devices like the TL-MR3020 is enables diverse projects
such as LibraryBox, Serval's mesh extender, even the mini nodes I'm
deploying.  Likewise, I do hope s2e finds success in slimming down
Commotion to run on these boxes (with outboard USB disk), if he hasn't
already.

Although these different projects may not actually end up sharing the same
firmware, at least beyond the extent they still derive from OpenWRT, seems
to me there should be distinct possibility in collaborating over the
following goals:

   - Improve USB disk support, i.e. to work-around limitation of on-board
   4Mbyte flash.  That is, what is the correct kernel/module compile recipe,
   what is the best method or auto-mounting on boot, and how to best do opkg
   install to ramdisk?
   - 2nd external antenna?  These
guys<https://apollo.open-resource.org/lab:argus#modifications>may have
figured out the original hack for one external antenna, but the
   lack of an AR9330 datasheet prevents them from using the 2nd antenna output.
   - Pool funding sources to contract manufacture of a customized version
   of the TL-MR3020?  I realize Mesh Potato is already pursuing a customized /
   beefed-up version of a similar TP-Link product, but I wonder if other
   groups together may be interested in a lighter-weight design.  E.g. not so
   much additional I/O, but maybe just double the RAM and flash size?
   - Brainstorm novel applications that take advantage of these devices
   running on battery and/or solar power.  Recall the newer TL-MR3040 is the
   same device, but with a large lithium battery.


On Fri, Jul 26, 2013 at 8:36 PM, Seamus Tuohy <s2e at opentechinstitute.org>wrote:

>
>
> On 07/24/2013 07:09 PM, Chris Ritzo wrote:
> > On 07/24/2013 05:44 PM, Ben West wrote:
> "
1547,Commotion-dev, LibraryBox: filesharing and mesh,"Sun, 28 Jul 2013 19:21:44 +0930",+0930,Paul Gardner-Stephen,"Hello,


On Sun, Jul 28, 2013 at 11:00 AM, Ben West <ben at gowasabi.net> wrote:

> The underlying cool thing is that the proliferation of low-cost, ultra
> small form-factor devices like the TL-MR3020 is enables diverse projects
> such as LibraryBox, Serval's mesh extender, even the mini nodes I'm
> deploying.  Likewise, I do hope s2e finds success in slimming down
> Commotion to run on these boxes (with outboard USB disk), if he hasn't
> already.
>
> Although these different projects may not actually end up sharing the same
> firmware, at least beyond the extent they still derive from OpenWRT, seems
> to me there should be distinct possibility in collaborating over the
> following goals:
>
>    - Improve USB disk support, i.e. to work-around limitation of on-board
>    4Mbyte flash.  That is, what is the correct kernel/module compile recipe,
>    what is the best method or auto-mounting on boot, and how to best do opkg
>    install to ramdisk?
>
>
The solution I would pursue here is a custom openwrt kernel build that
includes the usb storage drivers, and is set to pull root from /dev/sda1.
 I believe this would be fairly simple to do -- just haven't got around to
doing it yet.

>
>    - 2nd external antenna?  These guys<https://apollo.open-resource.org/lab:argus#modifications>may have figured out the original hack for one external antenna, but the
>    lack of an AR9330 datasheet prevents them from using the 2nd antenna output.
>    - Pool funding sources to contract manufacture of a customized version
>    of the TL-MR3020?  I realize Mesh Potato is already pursuing a customized /
>    beefed-up version of a similar TP-Link product, but I wonder if other
>    groups together may be interested in a lighter-weight design.  E.g. not so
>    much additional I/O, but maybe just double the RAM and flash size
>
> The MP2.0 will be pretty close to what you want -- the extra I/O is not
part of the design.

Paul.

>
>    - ?
>    - Brainstorm novel applications that take advantage of these devices
>    running on battery and/or solar power.  Recall the newer TL-MR3040 is the
>    same device, but with a large lithium battery.
>
>
> On Fri, Jul 26, 2013 at 8:36 PM, Seamus Tuohy <s2e at opentechinstitute.org>wrote:
>
"
1548,Commotion-dev, LibraryBox: filesharing and mesh,"Sun, 28 Jul 2013 21:37:26 -0400",-0400,Joshua Breitbart,"
On 7/27/13 7:49 PM, Chris Ritzo wrote:
> On Fri 26 Jul 2013 09:36:23 PM EDT, Seamus Tuohy wrote:
"
1549,Commotion-dev, LibraryBox: filesharing and mesh,"Sat, 27 Jul 2013 20:59:32 -0400",-0400,Joshua Breitbart,"
On 7/27/13 7:49 PM, Chris Ritzo wrote:
> On Fri 26 Jul 2013 09:36:23 PM EDT, Seamus Tuohy wrote:
"
1550,Commotion-dev, OpenWRT AP not functioning,"Mon, 29 Jul 2013 11:32:12 -0400",-0400,Will Hawkins,"Thanks for sending this, Ben. I am going to look into this and I might
contact Antonio directly.

Will

On 07/26/2013 10:53 AM, Ben West wrote:
> I think one underlying cause is that AA r36682 coincides with a hostapd
> update in the OpenWRT source (likewise for wpa_supplicant, wpad, and
> their derivatives).  Here are a couple posts to the OpenWRT-devel
> listserv from Antonio Quartulli, who works with open-mesh.org
> <http://open-mesh.org> and BATMAN, about the problem.  He mentioned
> submitting patches to the hostapd/wap_supplicant list too.
> 
> https://lists.openwrt.org/pipermail/openwrt-devel/2013-July/020685.html
> https://lists.openwrt.org/pipermail/openwrt-devel/2013-July/020689.html
> 
> On Fri, Jul 26, 2013 at 7:33 AM, Dan Staples
> <danstaples at opentechinstitute.org
> <mailto:danstaples at opentechinstitute.org"
1551,Commotion-dev, Example working config for olsrd_mdp?,"Tue, 30 Jul 2013 13:31:24 -0500",-0500,Ben West,"Hi All,

Sorry if this turns out to be an unnecessary question, but could someone
share an example working config for the olsrd_mdp plugin?  It seems my
local Commotion nodes are not using the plugin.

Here is olsrd_mdp plugin's home & README:

https://github.com/opentechinstitute/olsrd/tree/release-0.6.5.4/lib/mdp
https://github.com/opentechinstitute/olsrd/blob/release-0.6.5.4/lib/mdp/README_MDP

Likewise, these are the stanzas to add to /etc/olsrd.conf or
/etc/config/olsrd, respectively.  I'm curious how these stanzas look when
correctly populated.

LoadPlugin ""olsrd_mdp.so.0.1""
{
    PlParam     ""sid""   ""<Serval SID>""
    PlParam     ""servalpath""   ""<Serval Instance Path>""
}

config 'LoadPlugin'
    option 'library' 'olsrd_mdp.so.0.1'
    option 'sid' '<Serval SID>'
    option 'servalpath' '<Serval Instance Path>'

What is the current approach for creating and distributing a key to all
nodes?  I realize key distribution is assumed to be done out of band for
best security.

Thanks.

-- 
Ben West
http://gowasabi.net
ben at gowasabi.net
314-246-9434
"
1552,Commotion-dev, Example working config for olsrd_mdp?,"Tue, 30 Jul 2013 14:59:14 -0400",-0400,Will Hawkins,"Hey Ben!

On 07/30/2013 02:31 PM, Ben West wrote:
> Hi All,
> 
> Sorry if this turns out to be an unnecessary question, but could someone
> share an example working config for the olsrd_mdp plugin?  It seems my
> local Commotion nodes are not using the plugin.
> 
> Here is olsrd_mdp plugin's home & README:
> 
> https://github.com/opentechinstitute/olsrd/tree/release-0.6.5.4/lib/mdp
> https://github.com/opentechinstitute/olsrd/blob/release-0.6.5.4/lib/mdp/README_MDP
> 
> Likewise, these are the stanzas to add to /etc/olsrd.conf or
> /etc/config/olsrd, respectively.  I'm curious how these stanzas look
> when correctly populated.
> 
> LoadPlugin ""olsrd_mdp.so.0.1""
> {
>     PlParam     ""sid""   ""<Serval SID>""
>     PlParam     ""servalpath""   ""<Serval Instance Path>""
> }
> 
> config 'LoadPlugin'
>     option 'library' 'olsrd_mdp.so.0.1'
>     option 'sid' '<Serval SID>'
>     option 'servalpath' '<Serval Instance Path>'

These will look very similar to what you have here. I do not have a node
running olsrd_mdp in front of me, but here are the class of things that
you can expect to enter there:

servalpath will be like /etc/serval (as it is by default on Commotion
nodes). This contains a place for the keys to be stored and the
configuration values to be kept.

sid will be like
2A944A05906B6E676C8AE6747968F97ED6E564820CC18ADC34D6B597DE1AE658. This
is an identifier that tells the plugin which keypair to use for signing
routes. The key itself can be passed from node-to-node by copying the
serval.keyring file from the instance path directory.

Does this answer some of your questions?

> 
> What is the current approach for creating and distributing a key to all
> nodes?  I realize key distribution is assumed to be done out of band for
> best security.
> 
> Thanks.
> 
> -- 
> Ben West
> http://gowasabi.net
> ben at gowasabi.net <mailto:ben at gowasabi.net>
> 314-246-9434
> 
> 
> _______________________________________________
> Commotion-dev mailing list
> Commotion-dev at lists.chambana.net
> https://lists.chambana.net/mailman/listinfo/commotion-dev
> 




"
1553,Commotion-dev, Setting masq & MTU values correctly with OLSRd,"Sat, 3 Aug 2013 19:38:38 -0500",-0500,Ben West,"Hi All,

I'm emailing here in follow-up to a recent thread on commotion-discuss
about repeater nodes not reliably having their internet-bound traffic
routed.

In particular, I was seeing my own repeater nodes, both 1-hop way and
especially 2-hops away, apparently losing their connection to the Internet
once the local OLSRd instance had inserted its tnl_* interface (i.e. a few
minutes after power up).  I'm highlighting the instance of a node 2-hops
away, since in practice that can be difficult to replicate.

Below is the readme about the SmartGateway feature.  Do please note in
particular the recommendation to add an iptables rules to the gateway node,
clamping all packets leaving the mesh to the same MTU as what is used by
the OLSRd SmartGateway tunnels.

http://svn.dd-wrt.com/browser/src/router/olsrd/README-Olsr-Extensions

This seemed to resonate with a sporadic problem I'd been having with
repeater nodes occasionally not seeing their Internet-bound traffic
correctly routed, despite all routing tables appearing valid.  These
repeater nodes restored their Internet connection when I enabled the
'mtu_fix' option on their local firewall.  But not consistently so, making
the problem very challenging to resolve.

So, following the advice from the readme, I added this to
/etc/firewall.user on my gateway node (eth0 is its wired uplink):

iptables -A FORWARD -o eth0 -p tcp --tcp-flags SYN,RST SYN -j TCPMSS
--set-mss 1480

On the gateway node with wired WAN and LAN ports, in addition to the mesh
interface, I set these firewall zones in /etc/config/firewall:

config zone
    option name 'mesh'
    option network 'mesh'
    option input 'ACCEPT'
    option output 'ACCEPT'
    option forward 'ACCEPT'
    option 'masq' '1'

config zone
    option name 'wan'
    option output 'ACCEPT'
    option masq '1'
    option input 'DROP'
    option forward 'ACCEPT'

config zone
    option input 'ACCEPT'
    option output 'ACCEPT'
    option forward 'ACCEPT'
    option name 'lan'
    option network 'lan'

config forwarding
    option src 'mesh'
    option dest 'wan'

config forwarding
    option src 'lan'
    option dest 'wan'

config 'forwarding'
    option 'src' 'mesh'
    option 'dest' 'mesh'

Next, on repeater nodes with only one LAN port (counter-intuitively labeled
'wan'), these are the firewall zones:

config 'zone'
    option 'name' 'mesh'
    option 'input' 'ACCEPT'
    option 'output' 'ACCEPT'
    option 'forward' 'ACCEPT'

config zone
    option name        wan
    option input    ACCEPT
    option output    ACCEPT
    option forward    ACCEPT
    option masq        1

config 'forwarding'
    option 'src' 'wan'
    option 'dest' 'mesh'

config 'forwarding'
        option 'src' 'mesh'
        option 'dest' 'mesh'

In particular, note how the 'masq' option is enabled on the zone 'mesh'
only for the gateway node, but not on the repeater nodes.  Likewise, 'masq'
is enabled on the zone corresponding to the local LAN port of the repeater
nodes, but not on the LAN port of the gateway node.  For Commotion-OpenWRT,
the firewall zones of the LAN ports would be equivalent to those of the APs
of each node.

This configuration described above appears to be what works for using the
SmartGateway feature with OLSRd v0.6.5.4-commotion-0.1-1.

I'm trying to review the firewall rules that commotiond is generating for
gateway and repeater nodes, to see if they follow.  However, I'm posting to
the listserv now in case someone else happens to see an oversight in how
Commotion-OpenWRT is deploying OLSRd and firewall config.

On Thu, Aug 1, 2013 at 1:38 PM, Ben West <ben at gowasabi.net> wrote:

> Hi All,
>
> I can confirm having encountered similar issues specifically repeater
> nodes not correctly masq'ing AP traffic to the Internet, while gateway
> nodes do.  My own problems were encountered running both private APs and
> coovachilli APs (as opposed to nodogsplash) on nodes running the WasabiNet
> firmware, not Commotion-OpenWRT. However the firewall config is quite
> similar.
>
> So, on repeater nodes I have the 'masq' option enabled for zones mesh,
> ap1, and ap2 (i.e. public and private APs).  On gateway nodes, it seems
> that I need to have 'masq' disabled for zones ap1 and ap2.
>
> On Wed, Jul 31, 2013 at 5:18 PM, Ryan Gerety <gerety at opentechinstitute.org
> > wrote:
>
"
1554,Commotion-dev, Setting masq & MTU values correctly with OLSRd,"Sat, 03 Aug 2013 22:08:56 -0400",-0400,Will Hawkins,"Ben,

Thank you for sending this out to the list. Keep us updated on your
progress. We will work through your recommendations on our end and see
what comes of it. Thanks again!

Will

On 08/03/2013 08:38 PM, Ben West wrote:
> Hi All,
> 
> I'm emailing here in follow-up to a recent thread on commotion-discuss
> about repeater nodes not reliably having their internet-bound traffic
> routed.
> 
> In particular, I was seeing my own repeater nodes, both 1-hop way and
> especially 2-hops away, apparently losing their connection to the
> Internet once the local OLSRd instance had inserted its tnl_* interface
> (i.e. a few minutes after power up).  I'm highlighting the instance of a
> node 2-hops away, since in practice that can be difficult to replicate.
> 
> Below is the readme about the SmartGateway feature.  Do please note in
> particular the recommendation to add an iptables rules to the gateway
> node, clamping all packets leaving the mesh to the same MTU as what is
> used by the OLSRd SmartGateway tunnels.
> 
> http://svn.dd-wrt.com/browser/src/router/olsrd/README-Olsr-Extensions
> 
> This seemed to resonate with a sporadic problem I'd been having with
> repeater nodes occasionally not seeing their Internet-bound traffic
> correctly routed, despite all routing tables appearing valid.  These
> repeater nodes restored their Internet connection when I enabled the
> 'mtu_fix' option on their local firewall.  But not consistently so,
> making the problem very challenging to resolve.
> 
> So, following the advice from the readme, I added this to
> /etc/firewall.user on my gateway node (eth0 is its wired uplink):
> 
> iptables -A FORWARD -o eth0 -p tcp --tcp-flags SYN,RST SYN -j TCPMSS
> --set-mss 1480
> 
> On the gateway node with wired WAN and LAN ports, in addition to the
> mesh interface, I set these firewall zones in /etc/config/firewall:
> 
> config zone
>     option name 'mesh'
>     option network 'mesh'
>     option input 'ACCEPT'
>     option output 'ACCEPT'
>     option forward 'ACCEPT'
>     option 'masq' '1'
> 
> config zone
>     option name 'wan'
>     option output 'ACCEPT'
>     option masq '1'
>     option input 'DROP'
>     option forward 'ACCEPT'
> 
> config zone
>     option input 'ACCEPT'
>     option output 'ACCEPT'
>     option forward 'ACCEPT'
>     option name 'lan'
>     option network 'lan'
> 
> config forwarding
>     option src 'mesh'
>     option dest 'wan'
> 
> config forwarding
>     option src 'lan'
>     option dest 'wan'
> 
> config 'forwarding'                  
>     option 'src' 'mesh'          
>     option 'dest' 'mesh'
> 
> Next, on repeater nodes with only one LAN port (counter-intuitively
> labeled 'wan'), these are the firewall zones:
> 
> config 'zone'
>     option 'name' 'mesh'
>     option 'input' 'ACCEPT'
>     option 'output' 'ACCEPT'
>     option 'forward' 'ACCEPT'
> 
> config zone
>     option name        wan
>     option input    ACCEPT
>     option output    ACCEPT
>     option forward    ACCEPT
>     option masq        1
> 
> config 'forwarding'
>     option 'src' 'wan'
>     option 'dest' 'mesh'
> 
> config 'forwarding'             
>         option 'src' 'mesh'     
>         option 'dest' 'mesh'
> 
> In particular, note how the 'masq' option is enabled on the zone 'mesh'
> only for the gateway node, but not on the repeater nodes.  Likewise,
> 'masq' is enabled on the zone corresponding to the local LAN port of the
> repeater nodes, but not on the LAN port of the gateway node.  For
> Commotion-OpenWRT, the firewall zones of the LAN ports would be
> equivalent to those of the APs of each node.
> 
> This configuration described above appears to be what works for using
> the SmartGateway feature with OLSRd v0.6.5.4-commotion-0.1-1.
> 
> I'm trying to review the firewall rules that commotiond is generating
> for gateway and repeater nodes, to see if they follow.  However, I'm
> posting to the listserv now in case someone else happens to see an
> oversight in how Commotion-OpenWRT is deploying OLSRd and firewall config.
> 
> On Thu, Aug 1, 2013 at 1:38 PM, Ben West <ben at gowasabi.net
> <mailto:ben at gowasabi.net"
1555,Commotion-dev, Setting masq & MTU values correctly with OLSRd,"Sun, 04 Aug 2013 12:03:36 -0400",-0400,Dan Staples,"On Sat 03 Aug 2013 10:08:56 PM EDT, Will Hawkins wrote:
> Ben,
>
> Thank you for sending this out to the list. Keep us updated on your
> progress. We will work through your recommendations on our end and see
> what comes of it. Thanks again!
>
> Will
>
> On 08/03/2013 08:38 PM, Ben West wrote:
"
1556,Commotion-dev, Setting masq & MTU values correctly with OLSRd,"Sun, 04 Aug 2013 12:02:44 -0400",-0400,Dan Staples,"On Sat 03 Aug 2013 10:08:56 PM EDT, Will Hawkins wrote:
> Ben,
>
> Thank you for sending this out to the list. Keep us updated on your
> progress. We will work through your recommendations on our end and see
> what comes of it. Thanks again!
>
> Will
>
> On 08/03/2013 08:38 PM, Ben West wrote:
"
1557,Commotion-dev, Setting masq & MTU values correctly with OLSRd,"Sun, 4 Aug 2013 11:25:35 -0500",-0500,Ben West,"It unfortunately wouldn't be possible for me to revert these node back to
known bag configuration and do packet capture, since the nodes are under
active use by folks other than me (their patience can be finite ;).
Usually, my encounters with this issue spring from complaints about nodes
losing their Internet route and needing recovery.  So, the testing results
I would be able to share for this instance are going to be limited to
largely empirical results.


On Sun, Aug 4, 2013 at 11:02 AM, Dan Staples <
danstaples at opentechinstitute.org> wrote:

> On Sat 03 Aug 2013 10:08:56 PM EDT, Will Hawkins wrote:
> > Ben,
> >
> > Thank you for sending this out to the list. Keep us updated on your
> > progress. We will work through your recommendations on our end and see
> > what comes of it. Thanks again!
> >
> > Will
> >
> > On 08/03/2013 08:38 PM, Ben West wrote:
> "
1558,Commotion-dev, Setting masq & MTU values correctly with OLSRd,"Sun, 04 Aug 2013 13:01:32 -0400",-0400,Dan Staples,"On Sun 04 Aug 2013 12:25:35 PM EDT, Ben West wrote:
> It unfortunately wouldn't be possible for me to revert these node back
> to known bag configuration and do packet capture, since the nodes are
> under active use by folks other than me (their patience can be finite
> ;).  Usually, my encounters with this issue spring from complaints
> about nodes losing their Internet route and needing recovery.  So, the
> testing results I would be able to share for this instance are going
> to be limited to largely empirical results.
>
>
> On Sun, Aug 4, 2013 at 11:02 AM, Dan Staples
> <danstaples at opentechinstitute.org
> <mailto:danstaples at opentechinstitute.org"
1559,Commotion-dev, Setting masq & MTU values correctly with OLSRd,"Sun, 04 Aug 2013 13:27:03 -0400",-0400,Seamus Tuohy,"Yea, I think with the info you have its plus the debugging info on the networks we have seen (if those who have seen this could send that) we can create a close approximation and monitor it closely.


Dan Staples <danstaples at opentechinstitute.org> wrote:
>On Sun 04 Aug 2013 12:25:35 PM EDT, Ben West wrote:
"
1560,Commotion-dev, Setting masq & MTU values correctly with OLSRd,"Sun, 4 Aug 2013 13:08:20 -0500",-0500,Ben West,"To distill the important points about my suspicions of mismatched MTUs:

1. The OLSRd readme for SmartGateway specifically recommends clamping
MTU=1480 for all packets leaving the mesh on a gateway node, to align with
the MTU used by tunnels b/w nodes that SmartGateway creates.

2. Before adding the iptables rule for #1, I did see certain repeater nodes
lose Internet connectivity (aka pings to the outside fail) *immediately
after* their local OLSRd instance added the tnl_* tunnel to the gateway
node.

3. Likewise, trail and error with the 'mtu_fix' option on the firewalls of
gateway and repeater nodes did appear effective in restoring repeater
nodes' route to the outside, but not in any discernibly consistent
fashion.  mtu_fix = ""enable MSS clamping for *outgoing* zone traffic.""  So,
mtu_fix seems to imperfectly or incompletely perform the same function as
the iptables rule in #1.  I've since disabled mtu_fix on all mesh nodes
affected, to avoid throughput loss from any unnecessary MTU clamping.

4. Finally, the 'masq' option appears necessary for the mesh and WAN
firewall zones on the gateway node, and likewise for the AP/LAN zones on
repeater nodes.  It should not be enabled on the AP/LAN zones on the
gateway node, nor on the mesh zone for repeater nodes.  (This last item
could be in error.  Theoretically, one would expect masq to be required for
all zones.)

All of these details do suggest that a node needing to switch from gateway
to repeater role on-the-fly, i.e. when a wired uplink fails, will likely
need to reboot.



On Sun, Aug 4, 2013 at 12:27 PM, Seamus Tuohy <s2e at opentechinstitute.org>wrote:

> Yea, I think with the info you have its plus the debugging info on the
> networks we have seen (if those who have seen this could send that) we can
> create a close approximation and monitor it closely.
>
>
> Dan Staples <danstaples at opentechinstitute.org> wrote:
"
1561,Commotion-dev, LibraryBox: filesharing and mesh,"Mon, 05 Aug 2013 08:32:54 -0500",-0500,Nick Daly,"Ben West <ben at gowasabi.net> writes:

> A friend pointed me to this Kickstarter for LibraryBox:
>
> ""LibraryBox is an anonymous fileserver based on cheap hardware that runs on
> little power and serves files to any wifi-enabled device with a browser. It
> is a fork of the Open Source project PirateBox, altered to be more
> comfortable to use for libraries, educators, and anyone else that has a
> need to serve files in locations that lack reliable, unfiltered
> connectivity with the Internet.""

You might also be interested in the Weise7 Labratorium, which is a very
similar project:

http://weise7.org/book/

It even includes its own plans in the server's archive.

Nick
"
1562,Commotion-dev, LibraryBox: filesharing and mesh,"Mon, 05 Aug 2013 10:35:31 -0400",-0400,Seamus Tuohy,"See Inline:

On 07/28/2013 09:37 PM, Joshua Breitbart wrote:
> 
> On 7/27/13 7:49 PM, Chris Ritzo wrote:
"
1563,Commotion-dev, LibraryBox: filesharing and mesh,"Mon, 05 Aug 2013 10:42:03 -0400",-0400,Seamus Tuohy,"See Inline:

On 08/05/2013 09:32 AM, Nick Daly wrote:
> Ben West <ben at gowasabi.net> writes:
> 
"
1564,Commotion-dev, Setting masq & MTU values correctly with OLSRd,"Mon, 5 Aug 2013 11:24:24 -0500",-0500,Ben West,"Sorry for error.  The iptables rule mentioned above to clamp MTU=1480 for
traffic leaving the mesh zone on the gateway node is incorrect.

OpenWRT deploys a rather convoluted firewall by default, and the iptables
chain ""FORWARD"" suggested in OLSRd README is not the right chain.  I think
a correct chain is zone_wan (although maybe zone_mesh_forward)?  Certainly,
anyone with better familiarity with OpenWRT iptables convention do please
chime in.

# Clamp all traffic leaving to MTU of OLSRd tunnel MTU
iptables -A zone_wan -o eth0 -p tcp --tcp-flags SYN,RST SYN -j TCPMSS
--set-mss 1480



On Sun, Aug 4, 2013 at 1:08 PM, Ben West <ben at gowasabi.net> wrote:

>
> To distill the important points about my suspicions of mismatched MTUs:
>
> 1. The OLSRd readme for SmartGateway specifically recommends clamping
> MTU=1480 for all packets leaving the mesh on a gateway node, to align with
> the MTU used by tunnels b/w nodes that SmartGateway creates.
>
> 2. Before adding the iptables rule for #1, I did see certain repeater
> nodes lose Internet connectivity (aka pings to the outside fail) *immediately
> after* their local OLSRd instance added the tnl_* tunnel to the gateway
> node.
>
> 3. Likewise, trail and error with the 'mtu_fix' option on the firewalls of
> gateway and repeater nodes did appear effective in restoring repeater
> nodes' route to the outside, but not in any discernibly consistent
> fashion.  mtu_fix = ""enable MSS clamping for *outgoing* zone traffic.""
> So, mtu_fix seems to imperfectly or incompletely perform the same function
> as the iptables rule in #1.  I've since disabled mtu_fix on all mesh nodes
> affected, to avoid throughput loss from any unnecessary MTU clamping.
>
> 4. Finally, the 'masq' option appears necessary for the mesh and WAN
> firewall zones on the gateway node, and likewise for the AP/LAN zones on
> repeater nodes.  It should not be enabled on the AP/LAN zones on the
> gateway node, nor on the mesh zone for repeater nodes.  (This last item
> could be in error.  Theoretically, one would expect masq to be required for
> all zones.)
>
> All of these details do suggest that a node needing to switch from gateway
> to repeater role on-the-fly, i.e. when a wired uplink fails, will likely
> need to reboot.
>
>
>
> On Sun, Aug 4, 2013 at 12:27 PM, Seamus Tuohy <s2e at opentechinstitute.org>wrote:
>
"
1565,Commotion-dev, Setting masq & MTU values correctly with OLSRd,"Mon, 5 Aug 2013 11:36:05 -0500",-0500,Ben West,"Sorry for error.  The iptables rule mentioned above to clamp MTU=1480 for
traffic leaving the mesh zone on the gateway node is incorrect.

OpenWRT deploys a rather convoluted firewall by default, and the iptables
chain ""FORWARD"" suggested in OLSRd README is not the right chain.  I think
a correct chain is zone_wan (although maybe zone_mesh_forward)?  Certainly,
anyone with better familiarity with OpenWRT iptables convention do please
chime in.

# Clamp all traffic leaving to MTU of OLSRd tunnel MTU
iptables -A zone_wan -o eth0 -p tcp --tcp-flags SYN,RST SYN -j TCPMSS
--set-mss 1480


On Sun, Aug 4, 2013 at 1:08 PM, Ben West <ben at gowasabi.net> wrote:

>
>
"
1566,Commotion-dev, WlanSlovenia dashboard,"Tue, 06 Aug 2013 07:39:09 -0400",-0400,Dan Staples,"This is probably already on some people's radar, but if not:
https://nodes.wlan-si.net/

-- 
Dan Staples

Open Technology Institute
https://commotionwireless.net
OpenPGP key: http://disman.tl/pgp.asc
Fingerprint: 2480 095D 4B16 436F 35AB 7305 F670 74ED BD86 43A9
"
1567,Commotion-dev, WlanSlovenia dashboard,"Tue, 6 Aug 2013 08:26:42 -0500",-0500,Ben West,"Here are the wiki and github repo for their dashboard:
https://dev.wlan-si.net/wiki/Nodewatcher
https://github.com/wlanslovenija/nodewatcher.git

Here is the firmware client.
https://github.com/wlanslovenija/firmware-core
https://github.com/wlanslovenija/firmware-packages-opkg

I seem to recall this dashboard *does* implement to some degree the common
node database API that Mitar, et al, have been promoting.  Indeed, I
believe it would have to implement that API, seeing as how Mitar is listed
as a contributor to the github repo. ;)



On Tue, Aug 6, 2013 at 6:39 AM, Dan Staples <
danstaples at opentechinstitute.org> wrote:

> This is probably already on some people's radar, but if not:
> https://nodes.wlan-si.net/
>
> --
> Dan Staples
>
> Open Technology Institute
> https://commotionwireless.net
> OpenPGP key: http://disman.tl/pgp.asc
> Fingerprint: 2480 095D 4B16 436F 35AB 7305 F670 74ED BD86 43A9
> _______________________________________________
> Commotion-dev mailing list
> Commotion-dev at lists.chambana.net
> https://lists.chambana.net/mailman/listinfo/commotion-dev
>
"
1568,Commotion-dev, Setting masq & MTU values correctly with OLSRd,"Tue, 06 Aug 2013 14:54:19 -0400",-0400,Seamus Tuohy,"Hey All,

Thanks to Preston I have a debug info file from on of the affected
routers on our networks. I am heads down until next week, and as such
wont be able to track down the bug. If anyone needs the debug info file
to explore it, please let me know and I will send it to you.

s2e

On 08/04/2013 12:03 PM, Dan Staples wrote:
> On Sat 03 Aug 2013 10:08:56 PM EDT, Will Hawkins wrote:
"
1569,Commotion-dev, Setting masq & MTU values correctly with OLSRd,"Tue, 6 Aug 2013 16:37:28 -0400",-0400,Preston Rhea,"A quick context update to that: I just noticed from looking at the
Zabbix dashboard that the node stopped recording data right at the
time I got kicked off of it. I just sshed in and ran 'ps' to see if
zabbix_agentd was running on the node but it wasn't, so I restarted
it.

So I guess the lesson, which I should have known anyway, is that you
have to manually start the zabbix agent; it won't start on startup. We
should keep this in mind whenever we restart nodes.

On Tue, Aug 6, 2013 at 2:54 PM, Seamus Tuohy <s2e at opentechinstitute.org> wrote:
> Hey All,
>
> Thanks to Preston I have a debug info file from on of the affected
> routers on our networks. I am heads down until next week, and as such
> wont be able to track down the bug. If anyone needs the debug info file
> to explore it, please let me know and I will send it to you.
>
> s2e
>
> On 08/04/2013 12:03 PM, Dan Staples wrote:
"
1570,Commotion-dev, Thoughts about more robust key management for,"Tue, 13 Aug 2013 14:36:22 -0500",-0500,Ben West,"Hi All,

This post is in follow-up to these recent PR's, and it is intended to be
brain-stormy, rather than direct advice for any particular implementation.

https://github.com/opentechinstitute/commotion-quick-start/pull/26
https://github.com/opentechinstitute/key-management-api/pull/1

While it is definitely good to have the QS UI encourage users to select an
adhoc password, the WPA encryption supports keys up to 63chars (or 64?) in
length.

For WasabiNet, I use the pwgen command line tool to generate strings with
lots of lot entropy specifically to reduce vulnerability to dictionary or
brute force attacks.  This vulnerability would be especially critical for
the adhoc net, as all nodes share than key.

What are thoughts about having Quickstart itself recommend adhoc/mesh keys
with optimal entropy?  I.e. perhaps have that field pre-filled with a
maximum entropy key that the user could copy/paste?  Maybe also have a
'regenerate' button next to the field to generate new keys as needed?

If you are already anticipating the case where a single individual (or
group of individuals working together) will flash and configure all nodes
in a single mesh, then they should be able to manage doing to the
copy-pasta to have all nodes set with the same 63char mesh key.

-- 
Ben West
http://gowasabi.net
ben at gowasabi.net
314-246-9434
"
1571,Commotion-dev, Fwd: [Olsr-dev] [ANNOUNCE] v0.6.6 released,"Sat, 17 Aug 2013 10:01:26 -0400",-0400,Dan Staples,"FYI. Should we consider upgrading for the upcoming DR1.2/DR2 releases?
IIRC, Griffin was having some trouble w/ the json-info plugin's
output...perhaps this fixes it.

And I'm curious to try out the multi-smart-gateway mode.

-Dan


"
1572,Commotion-dev, [Olsr-dev] [ANNOUNCE] v0.6.6 released,"Sun, 18 Aug 2013 10:17:45 +0200",+0200,Teco Boot,"
Op 17 aug. 2013, om 16:01 heeft Dan Staples <danstaples at opentechinstitute.org> het volgende geschreven:

> FYI. Should we consider upgrading for the upcoming DR1.2/DR2 releases?
> IIRC, Griffin was having some trouble w/ the json-info plugin's
> output...perhaps this fixes it.
> 
> And I'm curious to try out the multi-smart-gateway mode.

Please let us know your findings.

Where IPv4 use uni-directional tunnels (towards egress border router), with IPv6 we can do better. We can route to border router depending on source address. This is what IETF Homenet is working on.
http://tools.ietf.org/html/draft-troan-homenet-sadr-00

Recently, there is a kernel patch in ip6_subtrees, where SADR works well. Patch will be in 3.11. Backports to older stable versions would be next steps. #14 in:
https://git.kernel.org/cgit/linux/kernel/git/torvalds/linux.git/commit/?id=ddea368c78ff9acf45261a7c82635b98e9c1fcd6 

When using v6-smart-gateway using subtrees, all routers in the network MUST use SADR. We need more thoughts how to introduce this. 
How do we make sure all routers have SADR? 
Use a tunnel if a router in the path doesn't have SADR?
Make it mandatory for olsrv2?

Maybe experience a bit with what we have now (tunnels) and do it right in olsrv2 for (IPv4: tunnels, IPv6: SADR).

Teco


> 
> -Dan
> 
> 
> "
1573,Commotion-dev, post on the webpage about the newest olsr releases,"Mon, 19 Aug 2013 22:12:06 +0200",+0200,L. Aaron Kaplan,"Hi,

I summarised the latest source code releases and added a link to the Multi-Smart-Gateway presentation that Ferry held at the last wireless battlemesh:

http://olsr.org/?q=node/64

The slides are a good intro for the new Multi-Smart-Gateway feature.

Aaron.

"
1574,Commotion-dev, ath10k in OpenWRT trunk,"Thu, 22 Aug 2013 17:53:16 -0500",-0500,Ben West,"Hurray, looks like my recent pessimistic post to commotion-discuss about
the successor to ath9k has been disproved!

Luis Rodriguez from Qualcomm submitted a proposed patch to trunk for
getting ath10k driver (i.e. 802.11ac support) into OpenWRTL

https://lists.openwrt.org/pipermail/openwrt-devel/2013-August/021105.html
https://github.com/kvalo/ath10k-firmware (actual driver source)

-- 
Ben West
http://gowasabi.net
ben at gowasabi.net
314-246-9434
"
1575,Commotion-dev, Nature of Commotion download links on website?,"Sun, 25 Aug 2013 12:33:51 -0500",-0500,Ben West,"Hi All,

I'm checking back in on this thread to confirm the nightly build bot for
Commotion-OpenWRT is no longer running.  (Or never was?)

A gentleman asking me about problems he's been having using images dated
8/23/13 had me a bit confused, since the latest stable images are still
dated 5/24/13.  I think he had been trying to build his own firmware, hence
the recent date.


On Wed, Jun 12, 2013 at 3:29 PM, Dan Staples <
danstaples at opentechinstitute.org> wrote:

> The links in the Stable section should be pretty static until we hit a
> new release, at which time they will change. We don't have the nightly
> builds occurring at the moment, however.
>
> On Wed 12 Jun 2013 04:27:22 PM EDT, Preston Rhea wrote:
> > Some folks are interested in adding direct download links in the user
> > documentation for installing Commotion-OpenWRT:
> >
> https://code.commotionwireless.net/projects/commotion/wiki/Stock_Ubiquiti_Install_Guide
> >
> > Are the links that show up on the download page always the same, or do
> > they change with every nightly build or new stable release?
> >
> > I'm looking especially at the portion of, say,
> >
> https://code.commotionwireless.net/attachments/download/357/openwrt-ar71xx-generic-ubnt-bullet-m-squashfs-factory.bin
> > that is /download/***/openwrt.... does that change with every new code
> > push?
> >
> > --
> > Preston Rhea
> > Program Associate, Open Technology Institute
> > New America Foundation
> > +1-202-570-9770
> > Twitter: @prestonrhea
> > _______________________________________________
> > Commotion-dev mailing list
> > Commotion-dev at lists.chambana.net
> > https://lists.chambana.net/mailman/listinfo/commotion-dev
>
> --
> Dan Staples
>
> Open Technology Institute
> https://commotionwireless.net
> _______________________________________________
> Commotion-dev mailing list
> Commotion-dev at lists.chambana.net
> https://lists.chambana.net/mailman/listinfo/commotion-dev
"
1576,Commotion-dev, Nature of Commotion download links on website?,"Sun, 25 Aug 2013 20:56:49 -0400",-0400,Dan Staples,"On Sun 25 Aug 2013 01:33:51 PM EDT, Ben West wrote:
> Hi All,
>
> I'm checking back in on this thread to confirm the nightly build bot
> for Commotion-OpenWRT is no longer running.  (Or never was?)
>
> A gentleman asking me about problems he's been having using images
> dated 8/23/13 had me a bit confused, since the latest stable images
> are still dated 5/24/13.  I think he had been trying to build his own
> firmware, hence the recent date.
>
>
> On Wed, Jun 12, 2013 at 3:29 PM, Dan Staples
> <danstaples at opentechinstitute.org
> <mailto:danstaples at opentechinstitute.org"
1577,Commotion-dev, Nature of Commotion download links on website?,"Sun, 25 Aug 2013 21:06:30 -0400",-0400,Chris Ritzo,"On Sun 25 Aug 2013 08:56:49 PM EDT, Dan Staples wrote:
> On Sun 25 Aug 2013 01:33:51 PM EDT, Ben West wrote:
"
1578,Commotion-dev, Nature of Commotion download links on website?,"Mon, 26 Aug 2013 12:05:18 +0930",+0930,Paul Gardner-Stephen,"It would be great to have pre-built stable releases of openwrt somewhere,
as I have been bitten a few times by the ephemeral nightly builds of
openwrt, and would like to avoid having to build everything myself.

On that note, and related to the hostapd bugs recently discussed, can one
of you throw me a ""good"" hostapd package?  I am finding that the latest
builds of openwrt have a nasty bug that shows up especially when we have
two mesh extenders in wifi range of each other.  I want to see if hostapd
is to blame.

Paul.


On Mon, Aug 26, 2013 at 10:36 AM, Chris Ritzo <critzo at chambana.net> wrote:

> On Sun 25 Aug 2013 08:56:49 PM EDT, Dan Staples wrote:
> > On Sun 25 Aug 2013 01:33:51 PM EDT, Ben West wrote:
> "
1579,Commotion-dev, Nature of Commotion download links on website?,"Mon, 26 Aug 2013 08:43:27 -0400",-0400,Dan Staples,"On 08/26/2013 07:05 AM, Chris Ritzo wrote:
> we can certainly update the site with images of our stable builds for
> commotion openwrt. Are you also asking for stable releases of openwrt,
> sans commotion?
> 
> 
> Paul Gardner-Stephen <paul at servalproject.org> wrote:
> 
> It would be great to have pre-built stable releases of openwrt
> somewhere, as I have been bitten a few times by the ephemeral nightly
> builds of openwrt, and would like to avoid having to build everything
> myself.
> 
> On that note, and related to the hostapd bugs recently discussed, can
> one of you throw me a ""good"" hostapd package?  I am finding that the
> latest builds of openwrt have a nasty bug that shows up especially when
> we have two mesh extenders in wifi range of each other.  I want to see
> if hostapd is to blame.
> 
> Paul.
> 
> 
> On Mon, Aug 26, 2013 at 10:36 AM, Chris Ritzo <critzo at chambana.net
> <mailto:critzo at chambana.net"
1580,Commotion-dev, Nature of Commotion download links on website?,"Wed, 28 Aug 2013 04:16:54 +0930",+0930,Paul Gardner-Stephen,"Thanks -- I have gone back to the 12.09 release of OpenWRT and all is
better.

Should we file a bug with them do you think?

Paul.


On Mon, Aug 26, 2013 at 10:13 PM, Dan Staples <
danstaples at opentechinstitute.org> wrote:

> On 08/26/2013 07:05 AM, Chris Ritzo wrote:
> > we can certainly update the site with images of our stable builds for
> > commotion openwrt. Are you also asking for stable releases of openwrt,
> > sans commotion?
> >
> >
> > Paul Gardner-Stephen <paul at servalproject.org> wrote:
> >
> > It would be great to have pre-built stable releases of openwrt
> > somewhere, as I have been bitten a few times by the ephemeral nightly
> > builds of openwrt, and would like to avoid having to build everything
> > myself.
> >
> > On that note, and related to the hostapd bugs recently discussed, can
> > one of you throw me a ""good"" hostapd package?  I am finding that the
> > latest builds of openwrt have a nasty bug that shows up especially when
> > we have two mesh extenders in wifi range of each other.  I want to see
> > if hostapd is to blame.
> >
> > Paul.
> >
> >
> > On Mon, Aug 26, 2013 at 10:36 AM, Chris Ritzo <critzo at chambana.net
> > <mailto:critzo at chambana.net"
1581,Commotion-dev, Nature of Commotion download links on website?,"Tue, 27 Aug 2013 14:51:07 -0400",-0400,Will Hawkins,"If we have something specific to report, I would really like to report a
bug on this.

Will

On 08/27/2013 02:46 PM, Paul Gardner-Stephen wrote:
> Thanks -- I have gone back to the 12.09 release of OpenWRT and all is
> better.
> 
> Should we file a bug with them do you think?
> 
> Paul.
> 
> 
> On Mon, Aug 26, 2013 at 10:13 PM, Dan Staples
> <danstaples at opentechinstitute.org
> <mailto:danstaples at opentechinstitute.org"
1582,Commotion-dev, Nature of Commotion download links on website?,"Wed, 28 Aug 2013 11:12:09 +0930",+0930,Paul Gardner-Stephen,"Well, I can setup a repeatable failing configuration on an MR3020.  A Mac
won't even associate with it.  I even have the tools to install the failing
config on an MR3020 as part of our mesh extender build process.  So I think
we are fairly well placed to file a bug report.

Paul.


On Wed, Aug 28, 2013 at 4:21 AM, Will Hawkins <
hawkinsw at opentechinstitute.org> wrote:

> If we have something specific to report, I would really like to report a
> bug on this.
>
> Will
>
> On 08/27/2013 02:46 PM, Paul Gardner-Stephen wrote:
> > Thanks -- I have gone back to the 12.09 release of OpenWRT and all is
> > better.
> >
> > Should we file a bug with them do you think?
> >
> > Paul.
> >
> >
> > On Mon, Aug 26, 2013 at 10:13 PM, Dan Staples
> > <danstaples at opentechinstitute.org
> > <mailto:danstaples at opentechinstitute.org"
1583,Commotion-dev, Nature of Commotion download links on website?,"Tue, 27 Aug 2013 22:38:57 -0400",-0400,Dan Staples,"On Tue 27 Aug 2013 09:42:09 PM EDT, Paul Gardner-Stephen wrote:
> Well, I can setup a repeatable failing configuration on an MR3020.  A
> Mac won't even associate with it.  I even have the tools to install
> the failing config on an MR3020 as part of our mesh extender build
> process.  So I think we are fairly well placed to file a bug report.
>
> Paul.
>
>
> On Wed, Aug 28, 2013 at 4:21 AM, Will Hawkins
> <hawkinsw at opentechinstitute.org
> <mailto:hawkinsw at opentechinstitute.org"
1584,Commotion-dev, Nature of Commotion download links on website?,"Tue, 27 Aug 2013 22:41:44 -0400",-0400,Dan Staples,"On 08/27/2013 10:38 PM, Dan Staples wrote:
> On Tue 27 Aug 2013 09:42:09 PM EDT, Paul Gardner-Stephen wrote:
"
1585,Commotion-dev, Looking to start Tidepools deployment here in St.,"Thu, 29 Aug 2013 16:28:08 -0500",-0500,Ben West,"Hello List!

I'm hoping to get a Tidepools deployment going at some point soon here in
St. Louis, ideally in tandem with a new mobile-friendly captive portal for
the mesh here (or, to be honest, a portal that is at minimum not
mobile-hostile).

This instance of Tidepools would be used to test out various use cases for
the ""Sunflower"" solar-powered wifi mesh concept described on this video
below.  In particular, I have a 1GHz CPU / 512MB box where Tidepools would
live initially, with the eventual hope of transitioning to a small embedded
PC like a Cubieboard or a MK808, so that everything could run on solar
power.
http://gowasabi.net/content/announcing-sunflower-mesh

And also possibly we could take advantage of the St. Louis transit
authority maybe maybe maybe soon making realtime bus location data
available to 3rd party integrators.

I see this mobile instance of Tidepools mentioned on the website, with a
couple apps:
https://rhiwifi.co/

Likewise, the github repo looks to be very busy!  Excellent work, Jonathan!
https://github.com/opentechinstitute/TidePools-Mobile

If the Redhook Tidepools instance mentioned above is a bit out of date, are
there perhaps any other live instances of Tidepools showing how the mobile
UI is working now?

-- 
Ben West
http://gowasabi.net
ben at gowasabi.net
314-246-9434
"
1586,Commotion-dev, Looking to start Tidepools deployment here in,"Thu, 29 Aug 2013 17:34:37 -0400",-0400,Seamus Tuohy,"Hey Ben,

There will be an updated implementation of Tidepools running at IS4CWN
in Berlin. We are working on ti right now and can make sure to take some
video/etc when it is complete.

s2e


On 08/29/2013 05:28 PM, Ben West wrote:
> Hello List!
> 
> I'm hoping to get a Tidepools deployment going at some point soon here in
> St. Louis, ideally in tandem with a new mobile-friendly captive portal for
> the mesh here (or, to be honest, a portal that is at minimum not
> mobile-hostile).
> 
> This instance of Tidepools would be used to test out various use cases for
> the ""Sunflower"" solar-powered wifi mesh concept described on this video
> below.  In particular, I have a 1GHz CPU / 512MB box where Tidepools would
> live initially, with the eventual hope of transitioning to a small embedded
> PC like a Cubieboard or a MK808, so that everything could run on solar
> power.
> http://gowasabi.net/content/announcing-sunflower-mesh
> 
> And also possibly we could take advantage of the St. Louis transit
> authority maybe maybe maybe soon making realtime bus location data
> available to 3rd party integrators.
> 
> I see this mobile instance of Tidepools mentioned on the website, with a
> couple apps:
> https://rhiwifi.co/
> 
> Likewise, the github repo looks to be very busy!  Excellent work, Jonathan!
> https://github.com/opentechinstitute/TidePools-Mobile
> 
> If the Redhook Tidepools instance mentioned above is a bit out of date, are
> there perhaps any other live instances of Tidepools showing how the mobile
> UI is working now?
> 
> 
> 
> _______________________________________________
> Commotion-dev mailing list
> Commotion-dev at lists.chambana.net
> https://lists.chambana.net/mailman/listinfo/commotion-dev
> 
"
1587,Commotion-dev, Looking to start Tidepools deployment here in,"Sat, 31 Aug 2013 12:09:18 -0500",-0500,Ben West,"Hi Seamus,

Glad to read!  May I then confirm there would be no problem with my pulling
the current state of Tidepools Mobile from the repo and trying it out
as-is?  That is, no problem besides it simply not working.

https://github.com/opentechinstitute/Tidepools-Mobile

It's understood this codebase is incomplete, and that it might kill a
kitten or eat all the food out of my fridge.  I wouldn't be submitting any
support requests.


On Thu, Aug 29, 2013 at 4:34 PM, Seamus Tuohy <s2e at opentechinstitute.org>wrote:

> Hey Ben,
>
> There will be an updated implementation of Tidepools running at IS4CWN
> in Berlin. We are working on ti right now and can make sure to take some
> video/etc when it is complete.
>
> s2e
>
>
> On 08/29/2013 05:28 PM, Ben West wrote:
> > Hello List!
> >
> > I'm hoping to get a Tidepools deployment going at some point soon here in
> > St. Louis, ideally in tandem with a new mobile-friendly captive portal
> for
> > the mesh here (or, to be honest, a portal that is at minimum not
> > mobile-hostile).
> >
> > This instance of Tidepools would be used to test out various use cases
> for
> > the ""Sunflower"" solar-powered wifi mesh concept described on this video
> > below.  In particular, I have a 1GHz CPU / 512MB box where Tidepools
> would
> > live initially, with the eventual hope of transitioning to a small
> embedded
> > PC like a Cubieboard or a MK808, so that everything could run on solar
> > power.
> > http://gowasabi.net/content/announcing-sunflower-mesh
> >
> > And also possibly we could take advantage of the St. Louis transit
> > authority maybe maybe maybe soon making realtime bus location data
> > available to 3rd party integrators.
> >
> > I see this mobile instance of Tidepools mentioned on the website, with a
> > couple apps:
> > https://rhiwifi.co/
> >
> > Likewise, the github repo looks to be very busy!  Excellent work,
> Jonathan!
> > https://github.com/opentechinstitute/TidePools-Mobile
> >
> > If the Redhook Tidepools instance mentioned above is a bit out of date,
> are
> > there perhaps any other live instances of Tidepools showing how the
> mobile
> > UI is working now?
> >
> >
> >
> > _______________________________________________
> > Commotion-dev mailing list
> > Commotion-dev at lists.chambana.net
> > https://lists.chambana.net/mailman/listinfo/commotion-dev
> >
> _______________________________________________
> Commotion-dev mailing list
> Commotion-dev at lists.chambana.net
> https://lists.chambana.net/mailman/listinfo/commotion-dev
"
1588,Commotion-dev, Looking to start Tidepools deployment here,"Sat, 31 Aug 2013 13:41:59 -0400",-0400,Seamus Tuohy,"Actually,

At the tidepools hackday on Friday we tested that repo on Mac, Linux, and pc. They all worked (depending upon the machine).  So, feel free to load it up and start working with it. You can build a working tidepools deployment in a pretty short time.

s2e

Ben West <ben at gowasabi.net> wrote:
>Hi Seamus,
>
>Glad to read!  May I then confirm there would be no problem with my
>pulling
>the current state of Tidepools Mobile from the repo and trying it out
>as-is?  That is, no problem besides it simply not working.
>
>https://github.com/opentechinstitute/Tidepools-Mobile
>
>It's understood this codebase is incomplete, and that it might kill a
>kitten or eat all the food out of my fridge.  I wouldn't be submitting
>any
>support requests.
>
>
>On Thu, Aug 29, 2013 at 4:34 PM, Seamus Tuohy
><s2e at opentechinstitute.org>wrote:
>
"
1589,Commotion-dev, Mesh Tether and Serval integration,"Mon, 9 Sep 2013 14:44:32 +0930",+0930,Jeremy Lakeman,"I've attempted to give Serval Mesh the ability to trigger the start and
stop of the commotion Mesh Tether application.  And I'd like to confirm
that Serval's network services are enabled while Mesh Tether is running.

I've built a test version of Serval Mesh if anyone else could help to test
this;
http://developer.servalproject.org/files/unstable/Serval_Mesh-0.92-pre2-6-g37d8f92.apk

If the Mesh Tether app is installed, you should see ""Mesh Tether"" in the
list of networks from within Serval . Select it should toggle the Mesh
Tether app and display its status.

While I've seen Mesh Tether attempt to start in response to the broadcast
intent, I haven't seen any evidence that it has created or joined an adhoc
network with any of our phones here.
"
1590,Commotion-dev, Commotion packages outside Commotion firmware,"Tue, 10 Sep 2013 22:22:49 -0400",-0400,Genevieve Bastien,"Hello all,

I wanted to use the Commotion-splash package, as a nice front end to 
nodogsplash, on our non-commotion firmware.  I could install it, without 
needing dependencies, but when I tried connection to the web interface, 
I got this error message:

.../lib/lua/luci/controller/commotion-splash/splash.lua:6: module 
'commotion_helpers' not found:
     no field package.preload['commotion_helpers']
     no file './commotion_helpers.lua'
     no file '/usr/share/lua/commotion_helpers.lua'
     no file '/usr/share/lua/commotion_helpers/init.lua'
     no file '/usr/lib/lua/commotion_helpers.lua'
     no file '/usr/lib/lua/commotion_helpers/init.lua'
     no file './commotion_helpers.so'
     no file '/usr/lib/lua/commotion_helpers.so'
     no file '/usr/lib/lua/loadall.so'
stack traceback:
     [C]: in function 'require'
     .../lib/lua/luci/controller/commotion-splash/splash.lua:6: in main 
chunk
     [C]: in function 'require'
     /usr/lib/lua/luci/dispatcher.lua:538: in function 'createindex_plain'
     /usr/lib/lua/luci/dispatcher.lua:474: in function 'createindex'
     /usr/lib/lua/luci/dispatcher.lua:566: in function 'createtree'
     /usr/lib/lua/luci/dispatcher.lua:230: in function 'dispatch'
     /usr/lib/lua/luci/dispatcher.lua:195: in function 
</usr/lib/lua/luci/dispatcher.lua:194"
1591,Commotion-dev, Commotion packages outside Commotion firmware,"Tue, 10 Sep 2013 22:58:34 -0400",-0400,Dan Staples,"Hi Genevi?ve,

Commotion-splash uses the commotion_helpers.lua module, which is
included in our luci-commotion package, hence the dependency. It's a
simple collection of helper functions, and it made sense to me at the
time to put it in our general LuCI package.

For your use, I would say get the commotion_helpers.lua file[1] and just
put it in /usr/lib/lua/, and that should solve your issue.

Since you're interested in using commotion-splash for your firmware, it
would be a good idea to package the Commotion helpers module as a
separate package, so people can use it (and thus commotion-splash)
without the rest of the Commotion dependencies and LuCI menus.

I'll work on that tomorrow and let you know.

cheers,
Dan

[1]
https://github.com/opentechinstitute/luci-commotion/blob/master/luasrc/commotion_helpers.lua

On 09/10/2013 10:22 PM, Genevieve Bastien wrote:
> Hello all,
> 
> I wanted to use the Commotion-splash package, as a nice front end to
> nodogsplash, on our non-commotion firmware.  I could install it, without
> needing dependencies, but when I tried connection to the web interface,
> I got this error message:
> 
> .../lib/lua/luci/controller/commotion-splash/splash.lua:6: module
> 'commotion_helpers' not found:
>     no field package.preload['commotion_helpers']
>     no file './commotion_helpers.lua'
>     no file '/usr/share/lua/commotion_helpers.lua'
>     no file '/usr/share/lua/commotion_helpers/init.lua'
>     no file '/usr/lib/lua/commotion_helpers.lua'
>     no file '/usr/lib/lua/commotion_helpers/init.lua'
>     no file './commotion_helpers.so'
>     no file '/usr/lib/lua/commotion_helpers.so'
>     no file '/usr/lib/lua/loadall.so'
> stack traceback:
>     [C]: in function 'require'
>     .../lib/lua/luci/controller/commotion-splash/splash.lua:6: in main
> chunk
>     [C]: in function 'require'
>     /usr/lib/lua/luci/dispatcher.lua:538: in function 'createindex_plain'
>     /usr/lib/lua/luci/dispatcher.lua:474: in function 'createindex'
>     /usr/lib/lua/luci/dispatcher.lua:566: in function 'createtree'
>     /usr/lib/lua/luci/dispatcher.lua:230: in function 'dispatch'
>     /usr/lib/lua/luci/dispatcher.lua:195: in function
> </usr/lib/lua/luci/dispatcher.lua:194>
> 
> I needed to install luci-commotion, which adds a ""Commotion"" menu item
> with ""mesh configuration"" and ""mesh profile"" that cause this error when
> selected:
> 
> /usr/lib/lua/luci/dispatcher.lua:448: Failed to execute cbi dispatcher
> target for entry '/admin/commotion/meshconfig'.
> The called action terminated with an exception:
> /usr/lib/lua/luci/cbi.lua:334: Unable to read UCI data: commotiond
> stack traceback:
>     [C]: in function 'assert'
>     /usr/lib/lua/luci/dispatcher.lua:448: in function 'dispatch'
>     /usr/lib/lua/luci/dispatcher.lua:195: in function
> </usr/lib/lua/luci/dispatcher.lua:194>
> 
> because it does not find the commotiond package.
> 
> Those dependencies should be stated in the packages' Makefiles.  Or
> preferably and if possible, those dependencies should be removed so that
> one can install, say, commotion-splash, without having to install the
> full commotion suite.
> 
> If that is desirable on your part, I could help work on it.  We'd rather
> use packages developed and supported by the community than rewrite our
> own.  Using the full Commotion firmware is not our option, as we're
> using babel for mesh protocol.  Until Commotion supports babel, if I
> ever find time to implement it, as promised in an earlier thread
> 
> Thanks,
> Genevi?ve
> 
> _______________________________________________
> Commotion-dev mailing list
> Commotion-dev at lists.chambana.net
> https://lists.chambana.net/mailman/listinfo/commotion-dev

-- 
Dan Staples

Open Technology Institute
https://commotionwireless.net
OpenPGP key: http://disman.tl/pgp.asc
Fingerprint: 2480 095D 4B16 436F 35AB 7305 F670 74ED BD86 43A9
"
1592,Commotion-dev, Commotion packages outside Commotion firmware,"Thu, 12 Sep 2013 13:11:34 -0400",-0400,Dan Staples,"Hi Genevi?ve,

I just talked with our lead developer, and we are planning on pulling
out commotion_helpers into a separate OpenWRT package in the next few
weeks, so that you would be able to install Commotion-splash without any
unnecessary dependences. But for now, I would say just include the
commotion_helpers.lua file in /usr/lib/lua.

Dan

On 09/10/2013 10:58 PM, Dan Staples wrote:
> Hi Genevi?ve,
> 
> Commotion-splash uses the commotion_helpers.lua module, which is
> included in our luci-commotion package, hence the dependency. It's a
> simple collection of helper functions, and it made sense to me at the
> time to put it in our general LuCI package.
> 
> For your use, I would say get the commotion_helpers.lua file[1] and just
> put it in /usr/lib/lua/, and that should solve your issue.
> 
> Since you're interested in using commotion-splash for your firmware, it
> would be a good idea to package the Commotion helpers module as a
> separate package, so people can use it (and thus commotion-splash)
> without the rest of the Commotion dependencies and LuCI menus.
> 
> I'll work on that tomorrow and let you know.
> 
> cheers,
> Dan
> 
> [1]
> https://github.com/opentechinstitute/luci-commotion/blob/master/luasrc/commotion_helpers.lua
> 
> On 09/10/2013 10:22 PM, Genevieve Bastien wrote:
"
1593,Commotion-dev, GNU 30 Hackday Commotion Security Tasks,"Fri, 13 Sep 2013 10:55:54 -0400",-0400,Josh King,"Hi everyone,

I've received an email from one of the organizers of a hackathon at
Ekoparty (http://ekoparty.org), a security conference taking place in
Buenos Airies in concert with the GNU 30th anniversary. Since we are
listed as a GNU 30 project, they were interested in possible
security-related tasks or bugs in Commotion that could conceivably be
tackled as part of a 3-day hackathon.

So I'd like to solicit suggestions for items that would be interesting
for participants to work on in connection with Commotion so that I can
forward that on to the organizers. The sooner we get some suggestions,
the more time participants will have to prepare. Thanks!
-- 
Josh King
Lead Technologist
The Open Technology Institute

"
1594,Commotion-dev, uploaded python-networkmanager 0.9.10 to Debian,"Fri, 13 Sep 2013 12:20:46 -0400",-0400,Hans-Christoph Steiner,"
I just uploaded my package for python-networkmanager to the official Debian
'unstable' repo. It should be accepted within a week or two.  Then if there
are no problems with it, it will be automatically accepted into
Debian/testing.  Once in Debian/testing, it'll be automatically included in
Ubuntu.

nm-dispatcher-olsrd and commotion-mesh-applet both rely on
python-networkmanager.  They were both developed against a patched version
0.9.6.  All my fixes should be incorporated into 0.9.10, but I haven't tested
nm-dispatcher-olsrd or commotion-mesh-applet with 0.9.10.

Here's the upstream source:
https://pypi.python.org/pypi/python-networkmanager/

Here's where to track the package's progress:
http://ftp-master.debian.org/new/python-networkmanager_0.9.10-1.html
http://packages.qa.debian.org/p/python-networkmanager.html

.hc

-- 
PGP fingerprint: 5E61 C878 0F86 295C E17D  8677 9F0F E587 374B BE81

"
1595,Commotion-dev, Txtinfo and Jsoninfo listening interfaces,"Sat, 14 Sep 2013 14:57:07 -0400",-0400,Will Hawkins,"Hello all!

I was just wondering if any of our current features (ESPECIALLY big/little board) require either JsonInfo or TxtInfo to listen on more than one interface at a time. The answer will determine if there is a quick fix for issue 7 (https://github.com/opentechinstitute/olsrd/issues/7) that I could potentially apply before we release DR2. 

Thanks everyone!
"
1596,Commotion-dev, Txtinfo and Jsoninfo listening interfaces,"Mon, 16 Sep 2013 00:29:52 -0400",-0400,Georgia Bullen,"Big/little board does use JsonInfo (I'm pretty sure!)

-Georgia


On Sat, Sep 14, 2013 at 2:57 PM, Will Hawkins <
hawkinsw at opentechinstitute.org> wrote:

> Hello all!
>
> I was just wondering if any of our current features (ESPECIALLY big/little
> board) require either JsonInfo or TxtInfo to listen on more than one
> interface at a time. The answer will determine if there is a quick fix for
> issue 7 (https://github.com/opentechinstitute/olsrd/issues/7) that I
> could potentially apply before we release DR2.
>
> Thanks everyone!
> _______________________________________________
> Commotion-dev mailing list
> Commotion-dev at lists.chambana.net
> https://lists.chambana.net/mailman/listinfo/commotion-dev
"
1597,Commotion-dev, Txtinfo and Jsoninfo listening interfaces,"Mon, 16 Sep 2013 01:32:40 -0400",-0400,Griffin Boyce,"httpinfo, jsoninfo, and txtinfo all poll for interface data, but that's
not continuous.

bigboard-listener.py may be actively listening to all interfaces all the
time, but I can't find a copy of it to confirm.  commotion-bigboard-send
references its existence, but it isn't in that repository. cc'd to Nat.

~Griffin

On 09/16/2013 12:29 AM, Georgia Bullen wrote:
> Big/little board does use JsonInfo (I'm pretty sure!)
>
> -Georgia
>
>
> On Sat, Sep 14, 2013 at 2:57 PM, Will Hawkins
> <hawkinsw at opentechinstitute.org
> <mailto:hawkinsw at opentechinstitute.org"
1598,Commotion-dev, Txtinfo and Jsoninfo listening interfaces,"Mon, 16 Sep 2013 02:17:44 -0400",-0400,Will Hawkins,"All good answers, thank you!

I'm particularly wondering if those three plugins need to listen on multiple interfaces on the devices themselves. In other words, does (txt|json|http)info need to listen on, say, eth0 AND wlan0-1?

Will

On Monday, September 16, 2013 01:32 EDT, Griffin Boyce <griffinboyce at gmail.com> wrote: 
 
> httpinfo, jsoninfo, and txtinfo all poll for interface data, but that's
> not continuous.
> 
> bigboard-listener.py may be actively listening to all interfaces all the
> time, but I can't find a copy of it to confirm.  commotion-bigboard-send
> references its existence, but it isn't in that repository. cc'd to Nat.
> 
> ~Griffin
> 
> On 09/16/2013 12:29 AM, Georgia Bullen wrote:
> > Big/little board does use JsonInfo (I'm pretty sure!)
> >
> > -Georgia
> >
> >
> > On Sat, Sep 14, 2013 at 2:57 PM, Will Hawkins
> > <hawkinsw at opentechinstitute.org
> > <mailto:hawkinsw at opentechinstitute.org"
1599,Commotion-dev, 'mesh' firewall zone,"Mon, 16 Sep 2013 20:39:52 -0400",-0400,Genevieve Bastien,"Hello all,

I was looking at the firewall file that ships with Commotion and was 
wondering why the 'mesh' zone has the input default to Accept.  I rather 
see it as a wan, ie an interface to a potentially hostile environment 
and it should drop packets by default.  One would need to explicitly 
open ports for remote access to the machine.

Just asking...

Genevi?ve
"
1600,Commotion-dev, Commotion packages outside Commotion firmware,"Mon, 16 Sep 2013 22:24:49 -0400",-0400,Genevieve Bastien,"Hi Dan,

There's more than just commotion_helpers.lua to pull out for 
commotion-splash to work.  I now have access to the luci interface and I 
can configure the splash, but when actually using the splash page, I get 
infinite redirects (see below for full debug output from nodogsplash).

It seems page http://<my_ap>/cgi-bin/luci/commotion/splash returns an 
error.  When manually navigating to this page I get this:

/usr/lib/lua/luci/dispatcher.lua:328: Access Violation
The page at 'commotion/splash/' has no parent node so the access to this location has been denied.
This is a software bug, please report this message at http://luci.subsignal.org/trac/newticket
stack traceback:
	[C]: in function 'assert'
	/usr/lib/lua/luci/dispatcher.lua:328: in function 'dispatch'
	/usr/lib/lua/luci/dispatcher.lua:195: in function </usr/lib/lua/luci/dispatcher.lua:194"
1601,Commotion-dev, Commotion packages outside Commotion firmware,"Tue, 17 Sep 2013 09:21:21 -0400",-0400,Seamus Tuohy,"Hey Genevieve,

What you are seeing is a problem of a branch detached from the ""tree.""

You want to put a .dependent after the entry in the controller file.
/usr/lib/lua/luci/dispatcher.lua

eg. //not an actual entry... but you get the point

entry(""commotion luci"", call(thing), ""SplishSplash"").dependent

Check out this LuCI documentation page if you get stuck.
http://luci.subsignal.org/trac/wiki/Documentation/ModulesHowTo


s2e

On 09/16/2013 10:24 PM, Genevieve Bastien wrote:
> Hi Dan,
> 
> There's more than just commotion_helpers.lua to pull out for
> commotion-splash to work.  I now have access to the luci interface and I
> can configure the splash, but when actually using the splash page, I get
> infinite redirects (see below for full debug output from nodogsplash).
> 
> It seems page http://<my_ap>/cgi-bin/luci/commotion/splash returns an
> error.  When manually navigating to this page I get this:
> 
> /usr/lib/lua/luci/dispatcher.lua:328: Access Violation
> The page at 'commotion/splash/' has no parent node so the access to this
> location has been denied.
> This is a software bug, please report this message at
> http://luci.subsignal.org/trac/newticket
> stack traceback:
>     [C]: in function 'assert'
>     /usr/lib/lua/luci/dispatcher.lua:328: in function 'dispatch'
>     /usr/lib/lua/luci/dispatcher.lua:195: in function
> </usr/lib/lua/luci/dispatcher.lua:194>
> 
> I'm not very familiar with luci.  Maybe you can point me in the right
> direction for this.  Otherwise, I'll dig into that later.
> 
> Thanks,
> Genevi?ve
> 
> 
> 
> "
1602,Commotion-dev, 'mesh' firewall zone,"Wed, 18 Sep 2013 11:55:23 -0400",-0400,Will Hawkins,"Hello Genevieve!

I just finished talking with our lead developer about this. You are
absolutely correct -- we could be more restrictive on the INPUT setting
for the Mesh zone. We are going to look into making this change!

Thanks for sending this note.

Will

On 09/16/2013 08:39 PM, Genevieve Bastien wrote:
> Hello all,
> 
> I was looking at the firewall file that ships with Commotion and was
> wondering why the 'mesh' zone has the input default to Accept.  I rather
> see it as a wan, ie an interface to a potentially hostile environment
> and it should drop packets by default.  One would need to explicitly
> open ports for remote access to the machine.
> 
> Just asking...
> 
> Genevi?ve
> _______________________________________________
> Commotion-dev mailing list
> Commotion-dev at lists.chambana.net
> https://lists.chambana.net/mailman/listinfo/commotion-dev
"
1603,Commotion-dev, Wiki pages about building Commotion,"Wed, 18 Sep 2013 15:05:12 -0500",-0500,Ben West,"Following up multiple threads on the commotion-discuss listserv about
running Commotion on alternate devices, I've added these 2 wiki pages to
get the ball rolling documenting build environment and build instructions
for the various flavors of Commotion Wireless:

https://code.commotionwireless.net/projects/commotion/wiki/Custom-Compile
https://code.commotionwireless.net/projects/commotion/wiki/Custom-Compile-OpenWRT

The first wiki page has also placeholders for other platforms, i.e.
Android, Linux/Debian/Ubuntu and OS X.  As best I can tell, the build
environment for those platform has not been documented anywhere yet, right?

-- 
Ben West
http://gowasabi.net
ben at gowasabi.net
314-246-9434
"
1604,Commotion-dev, Commotion packages outside Commotion firmware,"Sun, 22 Sep 2013 12:26:18 -0400",-0400,Genevieve Bastien,"Soooo, after a bit of work, I finally managed to have the 
commotion-splash package working all by himself, without other luci 
packages.  Here's what I had to do:

1-  Copy the commotion_helpers.lua file from luci-commotion to /usr/lib/lua
2-  Apply the attached patch to commotion-splash.  (I hope this can be 
mainlined, I don't think it affects the workings of the actual commotion 
suite)
3-  Manually copy the internet icon internet.128.png found in 
commotion-splash to my theme (openwrt default theme, so in 
/www/luci-static/openwrt.org/)

I still have some issues keeping me from complete satisfaction: The 
""Allowed hosts/subnets"" field does not seem to work.  I don't know if 
it's a bug in commotion-splash, my own bug, or the fact that other 
commotion packages are absent.  I had to manually edit the 
nodogsplash.conf file and add my ap interface's own ip address as 
allowed in order for it to work.  I'll work on that later, but that's a 
start.

Thanks Dan and Seamus for the help!

Genevi?ve


On 13-09-17 09:21 AM, Seamus Tuohy wrote:
> Hey Genevieve,
>
> What you are seeing is a problem of a branch detached from the ""tree.""
>
> You want to put a .dependent after the entry in the controller file.
> /usr/lib/lua/luci/dispatcher.lua
>
> eg. //not an actual entry... but you get the point
>
> entry(""commotion luci"", call(thing), ""SplishSplash"").dependent
>
> Check out this LuCI documentation page if you get stuck.
> http://luci.subsignal.org/trac/wiki/Documentation/ModulesHowTo
>
>
> s2e
>
> On 09/16/2013 10:24 PM, Genevieve Bastien wrote:
"
1605,Commotion-dev, GNU 30 Hackday Commotion Security Tasks,"Mon, 23 Sep 2013 12:31:05 -0400",-0400,Jordan McCarthy,
1606,Commotion-dev, GNU 30 Hackday Commotion Security Tasks,"Mon, 23 Sep 2013 12:33:58 -0400",-0400,Josh King,"That sounds great; however, I would imagine that rewriting the Broadcom
driver stack would likely be well beyond what could be accomplished in a
3-day hackathon. Perhaps there are other discrete tasks around IBSS-RSN
that could be accomplished? I know that wpa_supplicant's implementation
could use some debugging.

On 09/23/2013 12:31 PM, Jordan McCarthy wrote:
> I'm not sure what areas of interest and expertise will be represented
> at this event, but if there's even a small amount of representation
> from hardware/driver coders, it would be spectacular to get some
> people working on more universal support for the nl80211 kernel-driver
> interface.  Support for the nl80211 interface is a hard prerequisite
> for IBSS-RSN encryption, but there are nevertheless quite a few driver
> families that have no support for nl80211.  In particular, virtually
> none of the broadcom wireless chipsets support this interface, and
> hence very few products that rely on broadcom chipsets can currently
> contribute to a properly-secured mesh network.
> 
> Just my two cents,
> Jordan
> 
> Jordan McCarthy
> Open Technology Institute | New America Foundation
> Public Key: 0xC08D8042 | 4A61 3D39 4125 127D 65EA DDC2 BFBD A2E9 C08D 8042
> 
> On 09/13/2013 10:55 AM, Josh King wrote:
"
1607,Commotion-dev, GNU 30 Hackday Commotion Security Tasks,"Mon, 23 Sep 2013 12:40:03 -0400",-0400,Jordan McCarthy,
1608,Commotion-dev, GNU 30 Hackday Commotion Security Tasks,"Tue, 24 Sep 2013 06:49:54 +0930",+0930,Paul Gardner-Stephen,"What might also be possible and valuable is to create the suite of test
cases that show up where wpa_supplicant (or any other thing of interest, eg
IBSS-RSN) fails, so that it can be objectively addressed in future,
including by volunteers on an ad-hoc basis, since they will have a clear
guide to work to.

Paul.


On Tue, Sep 24, 2013 at 2:01 AM, Jordan McCarthy <
mccarthy at opentechinstitute.org> wrote:

> "
1609,Commotion-dev, Commotion OpenWRT nightly builds,"Mon, 23 Sep 2013 20:32:03 -0400",-0400,Chris Ritzo,"Good evening Commotion users and community members:

We are pleased to be again offering nightly builds of Commotion OpenWRT.

Nightly builds of Commotion OpenWRT are generated from our build server
and posted to http://downloads.commotionwireless.net/nightly and a link
is available on https://commotionwireless.net/download/routers

Nightly images contain the most up to date feature and bug fixes from
our github repository, and should be considered working, yet unstable
builds suitable for the development or testing.

As always, your feedback and input is appreciated. Please contact the
Commotion team with your questions, comments or concerns, either through
our listservs, IRC, or via the forms on our website.

https://commotionwireless.net/docs/#connect

Best regards,
-- 
Chris Ritzo
Technologist, Open Technology Institute
New America Foundation
"
1610,Commotion-dev, Fwd: [HacDC:Byzantium] Re: iOS7 Captive Network,"Sun, 29 Sep 2013 07:45:09 -0400",-0400,Dan Staples,"FYI, possible captive portal solution for iOS devices. I'll try to make
something similar with commotion-splash after the wireless summit.


"
1611,Commotion-dev, Standalone netcat vs busybox netcat,"Tue, 01 Oct 2013 12:51:02 -0400",-0400,Will Hawkins,"Hey all!

I was just wondering if there is a particular reason we are using
standalone netcat in the OpenWRT universe instead of the one available
through busybox?

If there is no particular reason for sticking with a standalone version,
I recommend that we move to the one available through busybox. In the
busybox version, the '-e' flag is a compile-time option that is disabled
by default. So, just by switching to this version, we could close out
issue 21: https://github.com/opentechinstitute/commotion-openwrt/issues/21

If that is not an option, disabling '-e' support in netcat will be more
difficult. Not impossible, just more difficult. Before I started on that
work I thought I would check on the easier option first!

Will
"
1612,Commotion-dev, Standalone netcat vs busybox netcat,"Tue, 01 Oct 2013 16:55:31 -0400",-0400,Dan Staples,"I switched to the non-busybox version when I was building the commotion
apps portal since the LuCI apps controller uses nc -w -z to check for
app connectivity, and I believe the busybox version lacks either the -w
or -z option.

On 10/01/2013 12:51 PM, Will Hawkins wrote:
> Hey all!
> 
> I was just wondering if there is a particular reason we are using
> standalone netcat in the OpenWRT universe instead of the one available
> through busybox?
> 
> If there is no particular reason for sticking with a standalone version,
> I recommend that we move to the one available through busybox. In the
> busybox version, the '-e' flag is a compile-time option that is disabled
> by default. So, just by switching to this version, we could close out
> issue 21: https://github.com/opentechinstitute/commotion-openwrt/issues/21
> 
> If that is not an option, disabling '-e' support in netcat will be more
> difficult. Not impossible, just more difficult. Before I started on that
> work I thought I would check on the easier option first!
> 
> Will
> _______________________________________________
> Commotion-dev mailing list
> Commotion-dev at lists.chambana.net
> https://lists.chambana.net/mailman/listinfo/commotion-dev
> 

-- 
Dan Staples

Open Technology Institute
https://commotionwireless.net
OpenPGP key: http://disman.tl/pgp.asc
Fingerprint: 2480 095D 4B16 436F 35AB 7305 F670 74ED BD86 43A9
"
1613,Commotion-dev, Standalone netcat vs busybox netcat,"Tue, 01 Oct 2013 17:09:15 -0400",-0400,Will Hawkins,"Good information, Dan. I also appreciate the top-posting. Scrolling is hard.

But seriously,

In the busybox version there is an optional setting for the -w option. I
will look into whether there is support for the -z option. I will get
back to you!

Thanks again for the information!
Will

On 10/01/2013 04:55 PM, Dan Staples wrote:
> I switched to the non-busybox version when I was building the commotion
> apps portal since the LuCI apps controller uses nc -w -z to check for
> app connectivity, and I believe the busybox version lacks either the -w
> or -z option.
> 
> On 10/01/2013 12:51 PM, Will Hawkins wrote:
"
1614,Commotion-dev, Linux client nearing feature-parity with DR2;,"Fri, 04 Oct 2013 17:45:13 -0400",-0400,Jordan McCarthy,
1615,Commotion-dev, Repository Cleanup,"Wed, 09 Oct 2013 14:48:16 -0400",-0400,Josh King,"Hi all,

As the Commotion project has grown, we've added a large number of
different components and repositories, especially on the OpenWRT side.
In many cases, these were created and added in without any particular
conventions around repository naming, package naming, or package
classification. As I discovered when doing final release integration for
DR2, this has made our OpenWRT build-tree something of a confusing mess.
In the run-up to version 1 at the end of the year, and as part of our
continued migration of our project management to Github, I am currently
engaged in cleaning up and refactoring most of our OpenWRT-related
repositories. Some projects will be consolidated, others will be
renamed, and still others will be split. Unfortunately, there is no easy
way to do this without at least temporarily breaking builds; I will try
and finish up all the cleanup this afternoon/evening, so hopefully any
disruption should be relatively minor. I'll detail the complete cleanup
on the list and in a blog post once things are up and running again.
This should hopefully make building and contributing to the firmware
somewhat less confusing in the future. Thanks for your patience!
-- 
Josh King
Lead Technologist
The Open Technology Institute

"
1616,Commotion-dev, Note about mixing phone/pc clients and nanostations,"Thu, 10 Oct 2013 15:24:29 -0400",-0400,Jordan McCarthy,
1617,Commotion-dev, Note about mixing phone/pc clients and,"Fri, 11 Oct 2013 09:51:54 +0200",+0200,Teco Boot,"The RF path is symmetric. It is the Tx power, Rx sensitivity and noise floors that make links asymmetric.

If the nanostation becomes an unwanted dominant node because its high RF performance, you could reduce Tx power.

Teco


Op 10 okt. 2013, om 21:24 heeft Jordan McCarthy <mccarthy at opentechinstitute.org> het volgende geschreven:

> "
1618,Commotion-dev, Note about mixing phone/pc clients and,"Mon, 14 Oct 2013 14:29:37 -0400",-0400,Darby Hickey,"This is a problem discussed in the currently under-development Commotion
Construction Kit modules ""Troublshooting Commotion"" and ""Wireless
Challenges."" Though we maybe could make it more specific to this specific
scenario.

Preview attached :)


On Fri, Oct 11, 2013 at 3:51 AM, Teco Boot <teco at inf-net.nl> wrote:

> The RF path is symmetric. It is the Tx power, Rx sensitivity and noise
> floors that make links asymmetric.
>
> If the nanostation becomes an unwanted dominant node because its high RF
> performance, you could reduce Tx power.
>
> Teco
>
>
> Op 10 okt. 2013, om 21:24 heeft Jordan McCarthy <
> mccarthy at opentechinstitute.org> het volgende geschreven:
>
> > "
1619,Commotion-dev, Questions about dashboard development,"Mon, 14 Oct 2013 16:18:51 -0500",-0500,Ben West,"Howdy,

I'm writing after seeing this issue filed about collecting node tests
results from remote nodes and presumably storing in a central location:
https://github.com/opentechinstitute/commotion-dashboard-helper/issues/6

What are current thoughts about a centralized node database and/or
dashboard for Commotion?  Any changes from this wiki page about the subject
dated in June?
https://code.commotionwireless.net/projects/commotion/wiki/BigBoard

Offering comment on a high level, and after observing the ROBIN mesh
project splinter into closed-source forks and dead ends, supporting
interoperability with other mesh node dashboard and node database
implementations is a big plus, even if only partial.

The Interop group have recently documented various schemas for a node
databases here http://interop.wlan-si.net

By comparison, the CommonNodeDB repo from Aaron K (cited in the BigBoard
wiki page) is now a couple years old:
https://github.com/aaronkaplan/commonNodeDB

Additionally, WLAN Slovenia has their nodewatcher project, which appears to
be at or nearing substantial maturity:
https://dev.wlan-si.net/wiki/Nodewatcher
https://github.com/wlanslovenija/nodewatcher

Maybe there is something interesting in Nodewatcher that could be a good
fit for Commotion?

-- 
Ben West
http://gowasabi.net
ben at gowasabi.net
314-246-9434
"
1620,Commotion-dev, Questions about dashboard development,"Tue, 15 Oct 2013 10:16:46 +1030",+1030,Paul Gardner-Stephen,"Hello,

I think the wlan Slovenija guys are the leaders on this one, so it makes
sense to leverage their work and extend their work as required.  From
memory they also have some very capable developers who could probably do
much or all of the required work.

In fact, I wish we had a portal between them and our lab so that we could
make even more use of their skills.

Paul.


On Tue, Oct 15, 2013 at 7:48 AM, Ben West <ben at gowasabi.net> wrote:

> Howdy,
>
> I'm writing after seeing this issue filed about collecting node tests
> results from remote nodes and presumably storing in a central location:
> https://github.com/opentechinstitute/commotion-dashboard-helper/issues/6
>
> What are current thoughts about a centralized node database and/or
> dashboard for Commotion?  Any changes from this wiki page about the subject
> dated in June?
> https://code.commotionwireless.net/projects/commotion/wiki/BigBoard
>
> Offering comment on a high level, and after observing the ROBIN mesh
> project splinter into closed-source forks and dead ends, supporting
> interoperability with other mesh node dashboard and node database
> implementations is a big plus, even if only partial.
>
> The Interop group have recently documented various schemas for a node
> databases here http://interop.wlan-si.net
>
> By comparison, the CommonNodeDB repo from Aaron K (cited in the BigBoard
> wiki page) is now a couple years old:
> https://github.com/aaronkaplan/commonNodeDB
>
> Additionally, WLAN Slovenia has their nodewatcher project, which appears
> to be at or nearing substantial maturity:
> https://dev.wlan-si.net/wiki/Nodewatcher
> https://github.com/wlanslovenija/nodewatcher
>
> Maybe there is something interesting in Nodewatcher that could be a good
> fit for Commotion?
>
> --
> Ben West
> http://gowasabi.net
> ben at gowasabi.net
> 314-246-9434
>
> _______________________________________________
> Commotion-dev mailing list
> Commotion-dev at lists.chambana.net
> https://lists.chambana.net/mailman/listinfo/commotion-dev
>
>
"
1621,Commotion-dev, Questions about dashboard development,"Tue, 15 Oct 2013 09:16:47 -0400",-0400,Seamus Tuohy,"Hey,

(see inline)

On 10/14/2013 05:18 PM, Ben West wrote:
> Howdy,
> 
> I'm writing after seeing this issue filed about collecting node tests
> results from remote nodes and presumably storing in a central location:
> https://github.com/opentechinstitute/commotion-dashboard-helper/issues/6
> 
> What are current thoughts about a centralized node database and/or
> dashboard for Commotion?  Any changes from this wiki page about the subject
> dated in June?
> https://code.commotionwireless.net/projects/commotion/wiki/BigBoard
> 

That page was the original brainstorming document for the dashboard we
kept. Development on the dashboard was then taken on by Nat, I don't
know where his documentation took place on the current dashboard. I do
know that we are using a variation of ffmap-d3
https://github.com/opentechinstitute/ffmap-d3 for our current dashboard
though.

> Offering comment on a high level, and after observing the ROBIN mesh
> project splinter into closed-source forks and dead ends, supporting
> interoperability with other mesh node dashboard and node database
> implementations is a big plus, even if only partial.
> 
> The Interop group have recently documented various schemas for a node
> databases here http://interop.wlan-si.net
> 
> By comparison, the CommonNodeDB repo from Aaron K (cited in the BigBoard
> wiki page) is now a couple years old:
> https://github.com/aaronkaplan/commonNodeDB
> 
> Additionally, WLAN Slovenia has their nodewatcher project, which appears to
> be at or nearing substantial maturity:
> https://dev.wlan-si.net/wiki/Nodewatcher
> https://github.com/wlanslovenija/nodewatcher
> 
> Maybe there is something interesting in Nodewatcher that could be a good
> fit for Commotion?

All the above is very true. I think that whatever dashboard/database
Commotion moves forward with in the future, the nodes themselves should
be the ones runnign tests upon the network and sending that information
back to the dashboard.

To that vein whatever dashboard we choose to move forward with should
allow us to query into the network for further information or test
suites from specific nodes without the adminstrator having to ssh into
the node to run them.

These are just my personal opinions of course. :)

s2e
> 
> 
> 
> _______________________________________________
> Commotion-dev mailing list
> Commotion-dev at lists.chambana.net
> https://lists.chambana.net/mailman/listinfo/commotion-dev
> 
"
1622,Commotion-dev, Experience with Zabbix and triggers?,"Tue, 15 Oct 2013 17:34:00 -0400",-0400,Preston Rhea,"We are exploring Zabbix as a monitoring tool for Commotion nodes. It
can report some useful stuff, but for it to be easier to monitor the
status of a whole network, one would need to use triggers and group
data aggregation to read information at a glance.

Has anyone worked with Zabbix who could provide some guidance,
especially with triggers and data aggregation on the dashboard?

-- 
Preston Rhea
Field Analyst, Open Technology Institute
New America Foundation
+1-202-570-9770
Twitter: @prestonrhea

"
1623,Commotion-dev, Experience with Zabbix and triggers?,"Tue, 15 Oct 2013 17:21:05 -0500",-0500,Ben West,"I've worked with Zabbix before, but I found it rather fussy to set up in
the first place.  For monitoring, I've had better experiences using munin,
especially since munin's default graphing function is generally quite nice
out of the box.

Another detail is what local agent must run on the nodes to collect
whatever data is to be sent the dashboard.  cron-based dashboard checkin
scripts are common; ROBIN mesh used this approach and I think WLAN
Slovenia's uses it now too.

Alternatively, OpenWRT does have packages for both a local zabbix agent and
also a shell-based munin agent (""muninlite"") on the node.

https://dev.openwrt.org/browser/packages/admin/zabbix
https://dev.openwrt.org/browser/packages/admin/muninlite
http://munin-monitoring.org/wiki/OpenWRT-HowTo

I was briefly looking into having muninlite to run locally on WasabiNet
nodes and talk to a munin server in the Cloud. However, I ultimately veered
away from this tool, as it requires xinetd to run continuously (chewing up
~1Mbyte of RAM).



On Tue, Oct 15, 2013 at 4:34 PM, Preston Rhea <
prestonrhea at opentechinstitute.org> wrote:

> We are exploring Zabbix as a monitoring tool for Commotion nodes. It
> can report some useful stuff, but for it to be easier to monitor the
> status of a whole network, one would need to use triggers and group
> data aggregation to read information at a glance.
>
> Has anyone worked with Zabbix who could provide some guidance,
> especially with triggers and data aggregation on the dashboard?
>
> --
> Preston Rhea
> Field Analyst, Open Technology Institute
> New America Foundation
> +1-202-570-9770
> Twitter: @prestonrhea
>
> _______________________________________________
> Commotion-dev mailing list
> Commotion-dev at lists.chambana.net
> https://lists.chambana.net/mailman/listinfo/commotion-dev
>
"
1624,Commotion-dev, current olsrd ready for Debian?,"Wed, 16 Oct 2013 12:34:46 -0400",-0400,Hans-Christoph Steiner,"
Roland and I were talking about updating olsrd in Debian.  Has 0.6.6 been
working for Commotion?  I'm pushing for an 0.6.7 update to get the fix for
jsoninfo that was broken in 0.6.6.  Any other issues that would prevent using
0.6.6 or a potential 0.6.7 in Debian?

.hc

-- 
PGP fingerprint: 5E61 C878 0F86 295C E17D  8677 9F0F E587 374B BE81

"
1625,Commotion-dev, current olsrd ready for Debian?,"Wed, 16 Oct 2013 13:22:24 -0400",-0400,Dan Staples,"We're actually still using 0.6.5.4, so we can't provide any feedback on
0.6.6, sorry. Here are the changes I made to package 0.6.5.4 for our
Debian repo, if that's helpful at all to you:
https://github.com/opentechinstitute/olsrd/commit/d233ac8ae0e503c4d949ead65e9a33392aa11d14

Dan

On 10/16/2013 12:34 PM, Hans-Christoph Steiner wrote:
> 
> Roland and I were talking about updating olsrd in Debian.  Has 0.6.6 been
> working for Commotion?  I'm pushing for an 0.6.7 update to get the fix for
> jsoninfo that was broken in 0.6.6.  Any other issues that would prevent using
> 0.6.6 or a potential 0.6.7 in Debian?
> 
> .hc
> 

-- 
Dan Staples

Open Technology Institute
https://commotionwireless.net
OpenPGP key: http://disman.tl/pgp.asc
Fingerprint: 2480 095D 4B16 436F 35AB 7305 F670 74ED BD86 43A9
"
1626,Commotion-dev, Experience with Zabbix and triggers?,"Thu, 17 Oct 2013 21:10:28 +0400",+0400,Alexander Chemeris,"May be a bit off-topic, but have you guys seen Inveneo's NMS?
http://www.ictworks.org/2013/08/07/inveneos-network-management-software-now-available-to-the-public/

It looks like a great thing to me and worth cooperating with if one
need an open-source NMS.

On Wed, Oct 16, 2013 at 2:21 AM, Ben West <ben at gowasabi.net> wrote:
> I've worked with Zabbix before, but I found it rather fussy to set up in the
> first place.  For monitoring, I've had better experiences using munin,
> especially since munin's default graphing function is generally quite nice
> out of the box.
>
> Another detail is what local agent must run on the nodes to collect whatever
> data is to be sent the dashboard.  cron-based dashboard checkin scripts are
> common; ROBIN mesh used this approach and I think WLAN Slovenia's uses it
> now too.
>
> Alternatively, OpenWRT does have packages for both a local zabbix agent and
> also a shell-based munin agent (""muninlite"") on the node.
>
> https://dev.openwrt.org/browser/packages/admin/zabbix
> https://dev.openwrt.org/browser/packages/admin/muninlite
> http://munin-monitoring.org/wiki/OpenWRT-HowTo
>
> I was briefly looking into having muninlite to run locally on WasabiNet
> nodes and talk to a munin server in the Cloud. However, I ultimately veered
> away from this tool, as it requires xinetd to run continuously (chewing up
> ~1Mbyte of RAM).
>
>
>
> On Tue, Oct 15, 2013 at 4:34 PM, Preston Rhea
> <prestonrhea at opentechinstitute.org> wrote:
"
1627,Commotion-dev, Has anyone tried this out? netspot,"Sun, 20 Oct 2013 11:05:47 -0400",-0400,Seamus Tuohy,"I have been thinking about how to get better ""field"" applicaitons for
low expertiese network setup and wondered if anyone had played with this
tool.

 http://www.netspotapp.com/

More importantly, does anyone know of open source site survey tools that
might benefit from some support or develoment to make already powerful
tools easier to use?

s2e
"
1628,Commotion-dev, Has anyone tried this out? netspot,"Mon, 21 Oct 2013 09:08:15 -0500",-0500,Ben West,"Not aware of any open source scanning tools that have the same degree of
polished, simplified UI.  horst and kismet are indeed powerful, but might
as well be written in Sanskrit.

This might be a good question to bounce off the Battlemesh listserv, too.




On Sun, Oct 20, 2013 at 10:05 AM, Seamus Tuohy <s2e at opentechinstitute.org>wrote:

> I have been thinking about how to get better ""field"" applicaitons for
> low expertiese network setup and wondered if anyone had played with this
> tool.
>
>  http://www.netspotapp.com/
>
> More importantly, does anyone know of open source site survey tools that
> might benefit from some support or develoment to make already powerful
> tools easier to use?
>
> s2e
> _______________________________________________
> Commotion-dev mailing list
> Commotion-dev at lists.chambana.net
> https://lists.chambana.net/mailman/listinfo/commotion-dev
>
"
1629,Commotion-dev, Has anyone tried this out? netspot,"Mon, 21 Oct 2013 10:07:16 -0400",-0400,Dan Staples,"(+commotion-discuss)

Very cool, thanks for sending this out! Hopefully some of our colleagues
with Macs can give it a try.

Dan

On 10/20/2013 11:05 AM, Seamus Tuohy wrote:
> I have been thinking about how to get better ""field"" applicaitons for
> low expertiese network setup and wondered if anyone had played with this
> tool.
> 
>  http://www.netspotapp.com/
> 
> More importantly, does anyone know of open source site survey tools that
> might benefit from some support or develoment to make already powerful
> tools easier to use?
> 
> s2e
> _______________________________________________
> Commotion-dev mailing list
> Commotion-dev at lists.chambana.net
> https://lists.chambana.net/mailman/listinfo/commotion-dev
> 

-- 
Dan Staples

Open Technology Institute
https://commotionwireless.net
OpenPGP key: http://disman.tl/pgp.asc
Fingerprint: 2480 095D 4B16 436F 35AB 7305 F670 74ED BD86 43A9
"
1630,Commotion-dev, [Commotion-discuss] Has anyone tried this out?,"Mon, 21 Oct 2013 10:16:05 -0400",-0400,Georgia Bullen,"I'm happy to with a little help on what exactly I'm testing and how.

The free version seems pretty limited based on my install last night.
On Oct 21, 2013 10:12 AM, ""Dan Staples"" <danstaples at opentechinstitute.org>
wrote:

> (+commotion-discuss)
>
> Very cool, thanks for sending this out! Hopefully some of our colleagues
> with Macs can give it a try.
>
> Dan
>
> On 10/20/2013 11:05 AM, Seamus Tuohy wrote:
> > I have been thinking about how to get better ""field"" applicaitons for
> > low expertiese network setup and wondered if anyone had played with this
> > tool.
> >
> >  http://www.netspotapp.com/
> >
> > More importantly, does anyone know of open source site survey tools that
> > might benefit from some support or develoment to make already powerful
> > tools easier to use?
> >
> > s2e
> > _______________________________________________
> > Commotion-dev mailing list
> > Commotion-dev at lists.chambana.net
> > https://lists.chambana.net/mailman/listinfo/commotion-dev
> >
>
> --
> Dan Staples
>
> Open Technology Institute
> https://commotionwireless.net
> OpenPGP key: http://disman.tl/pgp.asc
> Fingerprint: 2480 095D 4B16 436F 35AB 7305 F670 74ED BD86 43A9
> _______________________________________________
> Commotion-discuss mailing list
> Commotion-discuss at lists.chambana.net
> https://lists.chambana.net/mailman/listinfo/commotion-discuss
>
>
"
1631,Commotion-dev, Fwd: [Olsr-dev] OLSRd 0.6.6.1 released,"Mon, 21 Oct 2013 12:53:26 -0400",-0400,Dan Staples,"FYI. I believe we held back from upgrading from 0.6.5.4 (which we
currently use) due to bugs in json-info, but it appears that has been fixed.

Shall we upgrade for our next release?


"
1632,Commotion-dev, Experience with Zabbix and triggers?,"Wed, 23 Oct 2013 17:20:36 -0400",-0400,Georgia Bullen,"We looked at it at one point and it seemed pretty good, although had way
more information than we use most of the time.

We should look at it again now though as that was a few months back.

-Georgia


On Thu, Oct 17, 2013 at 1:10 PM, Alexander Chemeris <
alexander.chemeris at gmail.com> wrote:

> May be a bit off-topic, but have you guys seen Inveneo's NMS?
>
> http://www.ictworks.org/2013/08/07/inveneos-network-management-software-now-available-to-the-public/
>
> It looks like a great thing to me and worth cooperating with if one
> need an open-source NMS.
>
> On Wed, Oct 16, 2013 at 2:21 AM, Ben West <ben at gowasabi.net> wrote:
> > I've worked with Zabbix before, but I found it rather fussy to set up in
> the
> > first place.  For monitoring, I've had better experiences using munin,
> > especially since munin's default graphing function is generally quite
> nice
> > out of the box.
> >
> > Another detail is what local agent must run on the nodes to collect
> whatever
> > data is to be sent the dashboard.  cron-based dashboard checkin scripts
> are
> > common; ROBIN mesh used this approach and I think WLAN Slovenia's uses it
> > now too.
> >
> > Alternatively, OpenWRT does have packages for both a local zabbix agent
> and
> > also a shell-based munin agent (""muninlite"") on the node.
> >
> > https://dev.openwrt.org/browser/packages/admin/zabbix
> > https://dev.openwrt.org/browser/packages/admin/muninlite
> > http://munin-monitoring.org/wiki/OpenWRT-HowTo
> >
> > I was briefly looking into having muninlite to run locally on WasabiNet
> > nodes and talk to a munin server in the Cloud. However, I ultimately
> veered
> > away from this tool, as it requires xinetd to run continuously (chewing
> up
> > ~1Mbyte of RAM).
> >
> >
> >
> > On Tue, Oct 15, 2013 at 4:34 PM, Preston Rhea
> > <prestonrhea at opentechinstitute.org> wrote:
> "
1633,Commotion-dev, Serval memory leaks,"Thu, 31 Oct 2013 18:04:58 -0400",-0400,Dan Staples,"At the international summit for community wireless networks last month,
we noticed on the Commotion network we set up that the Serval daemon,
and one of our own programs which uses the Serval library, were using up
an awful lot of memory and leading to OOM conditions in which the
routers rebooted periodically.

I noticed today, as I've been debugging our code that uses the Serval
library, that Valgrind reports quite a bit of leaked memory from a
single call to both keyring_open and keyring_enter_pin. 527,056 bytes
lost memory to be exact, stemming from malloc and calloc calls in those
functions. Perhaps this is our problem?

This was seen with both 0.90 and 0.91. I can send Valgrind output if
that would be helpful.

Dan

-- 
Dan Staples

Open Technology Institute
https://commotionwireless.net
OpenPGP key: http://disman.tl/pgp.asc
Fingerprint: 2480 095D 4B16 436F 35AB 7305 F670 74ED BD86 43A9
"
1634,Commotion-dev, [serval-project-dev] Serval memory leaks,"Thu, 31 Oct 2013 18:33:12 -0400",-0400,Dan Staples,"It has one key :)

On Thu 31 Oct 2013 06:17:28 PM EDT, Jeremy Lakeman wrote:
> 500k is a lot, how large is your keyring?
>
>
> On Fri, Nov 1, 2013 at 8:34 AM, Dan Staples
> <danstaples at opentechinstitute.org
> <mailto:danstaples at opentechinstitute.org"
1635,Commotion-dev, [serval-project-dev] Serval memory leaks,"Thu, 31 Oct 2013 21:59:58 -0400",-0400,Dan Staples,"So I found the keyring-related memory leaks, and submitted a fix here:
https://github.com/opentechinstitute/serval-dna/commit/5fa8c98fbfd48d818684b6258d2ad4a8a8587e02.
Let me know if you want me to make a pull request. After someone else
here tests out the fix, we'll likely merge it into the
commotion-wireless branch in our repo.

It got rid of the 500kb leak, but there's still some unfreed allocated
memory left over from subscriber structs created in the root tree_node
(overlay_address.c:83). I'm not familiar enough with that part of Serval
to know what a good way to free that memory is at the end of the program
life.

Dan

On 10/31/2013 06:33 PM, Dan Staples wrote:
> It has one key :)
> 
> On Thu 31 Oct 2013 06:17:28 PM EDT, Jeremy Lakeman wrote:
"
1636,Commotion-dev, Developer Contract: Network Dashboard,"Mon, 04 Nov 2013 14:46:35 -0500",-0500,Andrew Reynolds,"The New America Foundation's Open Technology Institute (OTI) is
accepting proposals to develop a network dashboard for the Commotion
Wireless Project. This will be a concept to completion production. The
purpose of this RFP is to provide a fair evaluation for all candidates
and to provide the candidates with the evaluation criteria against which
they will be judged.

Full details are available at
https://commotionwireless.net/jobs/commotion-dashboard

Please submit proposals to oti-tech at opentechinstitute.org no later than
5:00 PM EDT on November 25, 2013.

-andrew

"
1637,Commotion-dev, [Commotion-discuss] Memory Issues and Nightly,"Wed, 06 Nov 2013 09:54:54 -0500",-0500,Dan Staples,"+commotion-dev

If your nodes are crashing w/ 15-20 clients, while both serval and
commotion-splash are disabled, that is very worrisome!

I propose to the Commotion dev team that we urgently need to come up
with a way to simulate network load, so we can identify and fix the
causes of these types of crashes. Does anyone have ideas or experiences
with this? Perhaps we can take the technical discussion over to the
commotion-dev list only.

And just an update for you Dan, earlier this week I found and fixed a
significant memory leak in Serval...not sure how much that will affect
the instability we've seen, but we'll soon know with some testing. The
fix will make its way into the nightly builds probably by the end of the
week.

As long as the rest of your network is DR1 or newer, the nightly builds
should be compatible.

Dan

On 11/06/2013 04:07 AM, Dan Hastings wrote:
> I was just checking to see if their had been any progress made on the
> nightly builds with fixing the memory overload causing the nodes to
> crash. To try and prevent my node from crashing I disabled serval and
> the splash page. However, whenever I have 15 to 20 students login to a
> local app at the start of class my node crashes instantly. I'm wondering
> if upgrading to the latest nightly build might fix this issue. Lastly,
> if I upgrade to the latest nightly build will it still work with the
> other nodes that do not have the latest build or do I have to or is it
> recommend that I upgrade all of the other nodes to latest build as
> well?  Thanks for all the hard work.  Commotion is otherwise working
> wonders over here in the horn.
> 
> Dan
> 
> _______________________________________________
> Commotion-discuss mailing list
> Commotion-discuss at lists.chambana.net
> https://lists.chambana.net/mailman/listinfo/commotion-discuss
> 

-- 
Dan Staples

Open Technology Institute
https://commotionwireless.net
OpenPGP key: http://disman.tl/pgp.asc
Fingerprint: 2480 095D 4B16 436F 35AB 7305 F670 74ED BD86 43A9
"
1638,Commotion-dev, [Commotion-discuss] Memory Issues and Nightly,"Wed, 6 Nov 2013 09:37:46 -0600",-0600,Ben West,"I am also seeing sporadic memory consumption issues operating mesh nodes
running AA r38347 in WasabiNet on Nanostation Loco M2.

That is, using the same ath9k wifi driver and same underlying OS, but
without the Commotion-specific tools like commotiond and servald.  I will
see nodes boot up with ~26Mbytes memory usage and then gradually increase
over the next few days until sporadic nodes start crashing with page
allocation failures (aka memory exhausted).  This all is happening despite
having 3Mbytes of compressed swap space allocated.    When I am able to log
into crashed nodes to inspect, I will occasionally find the current memory
usage to be *less* than the average observed on bootup, along with
~500Kbytes sitting in swap.

This seems to suggest something is very sporadically allocating itself a
large chunk (multiple MBytes), but not residing in memory as such, and
causing other processes to crash in consequence.  I do use the coovachilli
captive portal in WasabiNet, which could be a culprit and thus unrelated to
Commotion, but there could also be an underlying memory leak in the kernel
or wifi driver.

What are thoughts for having crashed nodes try to collect a debug report
about themselves when a crash condition is detected (e.g. no Internet
access, ""page allocation failure"" detected in syslog), and then write that
report to flash somewhere before the node get rebooted by its frustrated
user?

Besides that, do note that nodes with only 32MBytes of RAM, like UBNT
Picostations, are going to have difficulties hosting local apps for many
users.  If Dan Hasting would be able to use an alternate device with
64Mbytes+ RAM, e.g. a UBNT Rocket, Unifi, or even an indoor TP-Link router
(all of which should be able to run Commotion-OpenWRT), that may be a
viable workaround in cause chasing down memory leaks becomes too ornery.



On Wed, Nov 6, 2013 at 8:54 AM, Dan Staples <
danstaples at opentechinstitute.org> wrote:

> +commotion-dev
>
> If your nodes are crashing w/ 15-20 clients, while both serval and
> commotion-splash are disabled, that is very worrisome!
>
> I propose to the Commotion dev team that we urgently need to come up
> with a way to simulate network load, so we can identify and fix the
> causes of these types of crashes. Does anyone have ideas or experiences
> with this? Perhaps we can take the technical discussion over to the
> commotion-dev list only.
>
> And just an update for you Dan, earlier this week I found and fixed a
> significant memory leak in Serval...not sure how much that will affect
> the instability we've seen, but we'll soon know with some testing. The
> fix will make its way into the nightly builds probably by the end of the
> week.
>
> As long as the rest of your network is DR1 or newer, the nightly builds
> should be compatible.
>
> Dan
>
> On 11/06/2013 04:07 AM, Dan Hastings wrote:
> > I was just checking to see if their had been any progress made on the
> > nightly builds with fixing the memory overload causing the nodes to
> > crash. To try and prevent my node from crashing I disabled serval and
> > the splash page. However, whenever I have 15 to 20 students login to a
> > local app at the start of class my node crashes instantly. I'm wondering
> > if upgrading to the latest nightly build might fix this issue. Lastly,
> > if I upgrade to the latest nightly build will it still work with the
> > other nodes that do not have the latest build or do I have to or is it
> > recommend that I upgrade all of the other nodes to latest build as
> > well?  Thanks for all the hard work.  Commotion is otherwise working
> > wonders over here in the horn.
> >
> > Dan
> >
> > _______________________________________________
> > Commotion-discuss mailing list
> > Commotion-discuss at lists.chambana.net
> > https://lists.chambana.net/mailman/listinfo/commotion-discuss
> >
>
> --
> Dan Staples
>
> Open Technology Institute
> https://commotionwireless.net
> OpenPGP key: http://disman.tl/pgp.asc
> Fingerprint: 2480 095D 4B16 436F 35AB 7305 F670 74ED BD86 43A9
> _______________________________________________
> Commotion-dev mailing list
> Commotion-dev at lists.chambana.net
> https://lists.chambana.net/mailman/listinfo/commotion-dev
>
"
1639,Commotion-dev, [Commotion-discuss] Memory Issues and Nightly,"Wed, 06 Nov 2013 11:58:01 -0500",-0500,Dan Staples,"Regarding logging, I'm not sure that will work well since the nodes are
spontaneously rebooting themselves (due to OOM conditions), not the user
rebooting them. What we're going to try to do is attach a serial console
(thanks Will!) and try to slam the router with simultaneous users and
traffic.

Also, I don't think Dan is hosting local apps on the router itself
(correct me if I'm wrong), but just advertising them using the Commotion
apps portal. And that's just takes a little space for the Avahi service
file...so hopefully that's not a problem.

We'll certainly report what we find with our stress testing.

Dan

On 11/06/2013 10:37 AM, Ben West wrote:
> I am also seeing sporadic memory consumption issues operating mesh nodes
> running AA r38347 in WasabiNet on Nanostation Loco M2.
> 
> That is, using the same ath9k wifi driver and same underlying OS, but
> without the Commotion-specific tools like commotiond and servald.  I
> will see nodes boot up with ~26Mbytes memory usage and then gradually
> increase over the next few days until sporadic nodes start crashing with
> page allocation failures (aka memory exhausted).  This all is happening
> despite having 3Mbytes of compressed swap space allocated.    When I am
> able to log into crashed nodes to inspect, I will occasionally find the
> current memory usage to be /less/ than the average observed on bootup,
> along with ~500Kbytes sitting in swap.
> 
> This seems to suggest something is very sporadically allocating itself a
> large chunk (multiple MBytes), but not residing in memory as such, and
> causing other processes to crash in consequence.  I do use the
> coovachilli captive portal in WasabiNet, which could be a culprit and
> thus unrelated to Commotion, but there could also be an underlying
> memory leak in the kernel or wifi driver.
> 
> What are thoughts for having crashed nodes try to collect a debug report
> about themselves when a crash condition is detected (e.g. no Internet
> access, ""page allocation failure"" detected in syslog), and then write
> that report to flash somewhere before the node get rebooted by its
> frustrated user?
> 
> Besides that, do note that nodes with only 32MBytes of RAM, like UBNT
> Picostations, are going to have difficulties hosting local apps for many
> users.  If Dan Hasting would be able to use an alternate device with
> 64Mbytes+ RAM, e.g. a UBNT Rocket, Unifi, or even an indoor TP-Link
> router (all of which should be able to run Commotion-OpenWRT), that may
> be a viable workaround in cause chasing down memory leaks becomes too
> ornery.
> 
> 
> 
> On Wed, Nov 6, 2013 at 8:54 AM, Dan Staples
> <danstaples at opentechinstitute.org
> <mailto:danstaples at opentechinstitute.org"
1640,Commotion-dev, [Commotion-discuss] Memory Issues and Nightly,"Wed, 6 Nov 2013 11:40:06 -0600",-0600,Ben West,"Hi Dan,

Thanks for offering more detail, especially that you see the nodes
spontaneously reboot rather than simple have services crash.

I would again point out that the Picostations will have a finite limit for
simultaneous clients.  15 to 20 clients is quite a few, each client
requiring a portion of available of RAM.  It may be a single Picostation is
not going to be able to sustain all of them.



On Wed, Nov 6, 2013 at 10:58 AM, Dan Staples <
danstaples at opentechinstitute.org> wrote:

> Regarding logging, I'm not sure that will work well since the nodes are
> spontaneously rebooting themselves (due to OOM conditions), not the user
> rebooting them. What we're going to try to do is attach a serial console
> (thanks Will!) and try to slam the router with simultaneous users and
> traffic.
>
> Also, I don't think Dan is hosting local apps on the router itself
> (correct me if I'm wrong), but just advertising them using the Commotion
> apps portal. And that's just takes a little space for the Avahi service
> file...so hopefully that's not a problem.
>
> We'll certainly report what we find with our stress testing.
>
> Dan
>
> On 11/06/2013 10:37 AM, Ben West wrote:
> > I am also seeing sporadic memory consumption issues operating mesh nodes
> > running AA r38347 in WasabiNet on Nanostation Loco M2.
> >
> > That is, using the same ath9k wifi driver and same underlying OS, but
> > without the Commotion-specific tools like commotiond and servald.  I
> > will see nodes boot up with ~26Mbytes memory usage and then gradually
> > increase over the next few days until sporadic nodes start crashing with
> > page allocation failures (aka memory exhausted).  This all is happening
> > despite having 3Mbytes of compressed swap space allocated.    When I am
> > able to log into crashed nodes to inspect, I will occasionally find the
> > current memory usage to be /less/ than the average observed on bootup,
> > along with ~500Kbytes sitting in swap.
> >
> > This seems to suggest something is very sporadically allocating itself a
> > large chunk (multiple MBytes), but not residing in memory as such, and
> > causing other processes to crash in consequence.  I do use the
> > coovachilli captive portal in WasabiNet, which could be a culprit and
> > thus unrelated to Commotion, but there could also be an underlying
> > memory leak in the kernel or wifi driver.
> >
> > What are thoughts for having crashed nodes try to collect a debug report
> > about themselves when a crash condition is detected (e.g. no Internet
> > access, ""page allocation failure"" detected in syslog), and then write
> > that report to flash somewhere before the node get rebooted by its
> > frustrated user?
> >
> > Besides that, do note that nodes with only 32MBytes of RAM, like UBNT
> > Picostations, are going to have difficulties hosting local apps for many
> > users.  If Dan Hasting would be able to use an alternate device with
> > 64Mbytes+ RAM, e.g. a UBNT Rocket, Unifi, or even an indoor TP-Link
> > router (all of which should be able to run Commotion-OpenWRT), that may
> > be a viable workaround in cause chasing down memory leaks becomes too
> > ornery.
> >
> >
> >
> > On Wed, Nov 6, 2013 at 8:54 AM, Dan Staples
> > <danstaples at opentechinstitute.org
> > <mailto:danstaples at opentechinstitute.org"
1641,Commotion-dev, [Commotion-discuss] Memory Issues and Nightly,"Wed, 06 Nov 2013 12:54:10 -0500",-0500,Dan Staples,"Since Dan Hastings has seen this happen with a lot of simultaneous
clients and with high-memory components disabled, it sounds like that is
likely the cause. Do you know exactly where that RAM is used for each
connecting client?

Dan, can you provide any more detailed info on exactly what was
happening when you see the node crashing? How many simultaneous users,
and what were they doing (viewing a webpage on the internet, or viewing
the node's administrative web interface, etc)?

On Wed 06 Nov 2013 12:40:06 PM EST, Ben West wrote:
> Hi Dan,
>
> Thanks for offering more detail, especially that you see the nodes
> spontaneously reboot rather than simple have services crash.
>
> I would again point out that the Picostations will have a finite limit
> for simultaneous clients.  15 to 20 clients is quite a few, each
> client requiring a portion of available of RAM.  It may be a single
> Picostation is not going to be able to sustain all of them.
>
>
>
> On Wed, Nov 6, 2013 at 10:58 AM, Dan Staples
> <danstaples at opentechinstitute.org
> <mailto:danstaples at opentechinstitute.org"
1642,Commotion-dev, [Commotion-discuss] Memory Issues and Nightly,"Wed, 6 Nov 2013 12:09:48 -0600",-0600,Ben West,"It's relevant to point out that devices like Picostation and Nanostation
are normally intended for use as thin hotspots in high-usage environments,
i.e. DHCP and NAT routing not done on the device itself.  So,
Commotion-OpenWRT issuing DHCP leases and performing NAT one or 2 local
LANs onboard does consume memory that otherwise would go to serving 802.11n
clients.  This is an inherent limitation of the chosen architecture.

Besides that, I would assume at least these processes need to devote a
portion of available RAM to each client on the public AP in
Commotion-OpenWRT:

   - /proc/net/nf_conntrack entries
   - nodogsplash (although possibly only on initial portal page viewing)
   - uhttpd (again, only on portal page viewing)
   - the ath9k driver itself




On Wed, Nov 6, 2013 at 11:54 AM, Dan Staples <
danstaples at opentechinstitute.org> wrote:

> Since Dan Hastings has seen this happen with a lot of simultaneous
> clients and with high-memory components disabled, it sounds like that is
> likely the cause. Do you know exactly where that RAM is used for each
> connecting client?
>
> Dan, can you provide any more detailed info on exactly what was
> happening when you see the node crashing? How many simultaneous users,
> and what were they doing (viewing a webpage on the internet, or viewing
> the node's administrative web interface, etc)?
>
> On Wed 06 Nov 2013 12:40:06 PM EST, Ben West wrote:
> > Hi Dan,
> >
> > Thanks for offering more detail, especially that you see the nodes
> > spontaneously reboot rather than simple have services crash.
> >
> > I would again point out that the Picostations will have a finite limit
> > for simultaneous clients.  15 to 20 clients is quite a few, each
> > client requiring a portion of available of RAM.  It may be a single
> > Picostation is not going to be able to sustain all of them.
> >
> >
> >
> > On Wed, Nov 6, 2013 at 10:58 AM, Dan Staples
> > <danstaples at opentechinstitute.org
> > <mailto:danstaples at opentechinstitute.org"
1643,Commotion-dev, Fwd: Setting up your own app store with F-Droid,"Wed, 06 Nov 2013 21:39:23 -0500",-0500,Dan Staples,"it would be great to have our own F-Droid repo for the Commotion Android
app!

Dan


"
1644,Commotion-dev, commotion openbts iso,"Thu, 7 Nov 2013 13:24:03 +0100 (CET)",(CET),Robert Light,"An HTML attachment was scrubbed...
URL: <http://lists.chambana.net/pipermail/commotion-dev/attachments/20131107/57da0a76/attachment.html>
"
1645,Commotion-dev, commotion openbts iso,"Thu, 07 Nov 2013 07:37:53 -0500",-0500,Dan Staples,"Hi Robert,

I actually put together that live distro before having a USRP to test
on. And I'm pretty sure that when we actually got a USRP to test on, the
configuration didn't entirely work. It's totally experimental, after all.

If memory serves, I saw the same problem with the USRP device not being
recognized. I'm pretty sure you need to set some udev rules before the
system will recognize the USRP. I would recommend giving this a try:
http://gnuradio.org/redmine/projects/gnuradio/wiki/UdevConfig

Let us know anything else you run into!

Dan

On 11/07/2013 07:24 AM, Robert Light wrote:
> Hi, I downloaded commotion-openbts-x86.iso and installed it on a usb stick.
> The system is loading and I configure it to run with usrp1 single  db.
> However when I connect my usrp1 it doesn't seem to be detected at all.
> It is not on the list of usb devices,
> I am also not sure whether the whole configuration was succesful.
> Did anyone else try this iso? Am I missing some configuration steps here?
>  
> I just noticed that making the stick persistent helps with some errors
> but I am still unable to run openbts.
>  
> Thanks, Robert
> 
> 
> _______________________________________________
> Commotion-dev mailing list
> Commotion-dev at lists.chambana.net
> https://lists.chambana.net/mailman/listinfo/commotion-dev
> 

-- 
Dan Staples

Open Technology Institute
https://commotionwireless.net
OpenPGP key: http://disman.tl/pgp.asc
Fingerprint: 2480 095D 4B16 436F 35AB 7305 F670 74ED BD86 43A9
"
1646,Commotion-dev, commotion openbts iso,"Thu, 7 Nov 2013 14:09:48 +0100 (CET)",(CET),Robert Light,"An HTML attachment was scrubbed...
URL: <http://lists.chambana.net/pipermail/commotion-dev/attachments/20131107/3d7db833/attachment.html>
"
1647,Commotion-dev, commotion openbts iso,"Fri, 08 Nov 2013 10:47:23 -0500",-0500,Dan Staples,"Hi Robert,

Glad to hear the udev rule fixed that issue!

As for the openbtscli problem, I would suggest looking at the OpenBTS
documentation. It's certainly possible that the scripts included in the
live distro don't properly start OpenBTS if the device installation
didn't go as expected. For reference you can check our installation
script[1], and the script we use to start OpenBTS and the other services[2].

Sorry I can't be more helpful, it's been a while since I've played with
the live image...

Dan

[1]
https://github.com/opentechinstitute/commotion-openbts/blob/master/install-openbts.sh
[2]
https://github.com/opentechinstitute/commotion-openbts/blob/master/rc.local

On 11/07/2013 08:09 AM, Robert Light wrote:
> Hi, I made the stick persistent. Without that python was not working.
> With a persistent stick I configured udev rules and lsusb is listing my
> usrp1 :)
> Then I compiled manually gnuradio on the stick and lsusrp is listing my
> usrp1 and rfx1800   :)x2
> But no more luck. openbtscli is asking ""is the remote application
> runnin?"" or something like that.
> I think it is now a configuration problem, but I don't know where to
> look for it.
>  
>  
> *Gesendet:* Donnerstag, 07. November 2013 um 13:37 Uhr
> *Von:* ""Dan Staples"" <danstaples at opentechinstitute.org>
> *An:* ""Robert Light"" <robert.light at gmx.de>, commotion-dev at lists.chambana.net
> *Betreff:* Re: [Commotion-dev] commotion openbts iso
> Hi Robert,
> 
> I actually put together that live distro before having a USRP to test
> on. And I'm pretty sure that when we actually got a USRP to test on, the
> configuration didn't entirely work. It's totally experimental, after all.
> 
> If memory serves, I saw the same problem with the USRP device not being
> recognized. I'm pretty sure you need to set some udev rules before the
> system will recognize the USRP. I would recommend giving this a try:
> http://gnuradio.org/redmine/projects/gnuradio/wiki/UdevConfig
> 
> Let us know anything else you run into!
> 
> Dan
> 
> On 11/07/2013 07:24 AM, Robert Light wrote:
"
1648,Commotion-dev, unmasking spoofed MAC addresses on Atheros cards,"Sun, 10 Nov 2013 21:03:11 -0500",-0500,Dan Staples,"So there's a weakness in how the ath9k_htc driver implements virtual
interfaces, which allows an attacker to find your device's MAC address
even if you spoof it:
http://www.mathyvanhoef.com/2013/11/unmasking-spoofed-mac-address.html

The ath9k_htc driver is used in many of the TP-Link USB wifi adapters we
recommend for the Commotion Linux client, so I thought it might be of
interest to yall.

Dan

-- 
Dan Staples

Open Technology Institute
https://commotionwireless.net
OpenPGP key: http://disman.tl/pgp.asc
Fingerprint: 2480 095D 4B16 436F 35AB 7305 F670 74ED BD86 43A9
"
1649,Commotion-dev, Fwd: Re: Node Crashing / Nodogsplash,"Mon, 11 Nov 2013 08:48:27 -0500",-0500,Dan Staples,"Just wanted to check with the other OpenWRT-knowledgeable folks about
this...there's no way to fix a filled filesystem issue without
reflashing, right? I was under the impression that squashFS is append-only.

Dan


"
1650,Commotion-dev, Fwd: Re: Node Crashing / Nodogsplash,"Mon, 11 Nov 2013 11:10:19 -0500",-0500,Will Hawkins,"That probably means that something is in the overlay file system that is
filling up his space. If he deletes files from the overlay then he will
get free space back.

That was the problem we saw after someone did an opkg install of serval
into the overlay.

I hope that helps!

On 11/11/2013 08:48 AM, Dan Staples wrote:
> Just wanted to check with the other OpenWRT-knowledgeable folks about
> this...there's no way to fix a filled filesystem issue without
> reflashing, right? I was under the impression that squashFS is append-only.
> 
> Dan
> 
> 
> "
1651,Commotion-dev, Stress test results,"Mon, 11 Nov 2013 19:53:34 -0500",-0500,Will Hawkins,"Using go (yes, that's right!) I was able to create a test program that
opened enough simultaneous HTTP connections to force a crash.

Thanks to the fact that we were running a serial console that was
logging Pico station console output, we were able to capture the crash
information. I am attaching that here.

Overall, it looks like the node simply runs out of memory. The first
errors are when malloc()s in servald fail Then, when things get really
bad, there are errors from the wireless driver saying that it cannot
allocate buffer space.

Obviously the failures from the wireless driver are bad. They are
probably ultimately what causes the node to reboot.

I wonder, though, about the servald malloc() failures. I'm not sure if
they are pure symptom (i.e, servald just happens to be the application
most commonly allocating memory space when the crash happens and so its
malloc()s fail first), or if it is part of the problem (i.e, servald
causes memory usage to skyrocket under heavy load and *then* these
larger memory problems start to occur).

In any event, we got some logs, which is a good first step!

Will
"
1652,Commotion-dev, Stress test results,"Mon, 11 Nov 2013 21:05:22 -0600",-0600,Ben West,"I recently saw a WasabiNet node whose adhoc interface died due to memory
exhaustion, and I should point out on a node *not* running serval or
commotiond.  (I.e. since this isn't Commotion-OpenWRT firmware I'm writing
about, but very similar.)  The relevant dmesg I've sent to the
OpenWRT-devel list, which you can read here:

https://lists.openwrt.org/pipermail/openwrt-devel/2013-November/022398.html
https://lists.openwrt.org/pipermail/openwrt-devel/2013-November/022399.html

If particular interest is that, since the node didn't spontaneously reboot
or become inaccessible, I SSH'ed in and found a 240Kbyte dump file that
wpa_supplicant had written to /tmp , with about the same timestamp as when
memory errors began appearing in syslog.  Possibly this points to
wpa_supplicant itself as source of intermittent memory leaks?  I'm using
the wpad package, and I haven't yet had a chance to try out the version of
wpad-mini modified to include IBSS-RSN support.  I would be curious if
switching to wpad-mini has any effect on the memory errors you're seeing,
Will.

Besides that, do please note that I run the coovachilli captive portal,
instead of NDS, and coova is definitely a memory hog of questionable
stability.  That is, coova may end up being my problem, making this
unrelated to Commotion.

Finally, check out these recommended kernel tweaks from OpenWRT-devel for
having the node just spontaneously reboot upon OOM error or kernel oops.
Naturally, these wouldn't fix the memory problem itself, but good to know
for reference.

"" for routers in production i prefer setting
/proc/sys/vm/panic_on_oom = 2
/proc/sys/kernel/panic = 10

also if you like
/proc/sys/kernel/panic_on_oops = 1 ""



On Mon, Nov 11, 2013 at 6:53 PM, Will Hawkins <
hawkinsw at opentechinstitute.org> wrote:

> Using go (yes, that's right!) I was able to create a test program that
> opened enough simultaneous HTTP connections to force a crash.
>
> Thanks to the fact that we were running a serial console that was
> logging Pico station console output, we were able to capture the crash
> information. I am attaching that here.
>
> Overall, it looks like the node simply runs out of memory. The first
> errors are when malloc()s in servald fail Then, when things get really
> bad, there are errors from the wireless driver saying that it cannot
> allocate buffer space.
>
> Obviously the failures from the wireless driver are bad. They are
> probably ultimately what causes the node to reboot.
>
> I wonder, though, about the servald malloc() failures. I'm not sure if
> they are pure symptom (i.e, servald just happens to be the application
> most commonly allocating memory space when the crash happens and so its
> malloc()s fail first), or if it is part of the problem (i.e, servald
> causes memory usage to skyrocket under heavy load and *then* these
> larger memory problems start to occur).
>
> In any event, we got some logs, which is a good first step!
>
> Will
>
> _______________________________________________
> Commotion-dev mailing list
> Commotion-dev at lists.chambana.net
> https://lists.chambana.net/mailman/listinfo/commotion-dev
>
"
1653,Commotion-dev, Stress test results,"Tue, 12 Nov 2013 15:30:42 +1030",+1030,Paul Gardner-Stephen,"Hi Will,

Have you tried it with the recent servald update that fixed a few memory
leaks?

As for high load generating malloc() activity in servald, it would need to
be activity that touches servald in some way (obvious and direct or
otherwise).  It will also be interesting to know if it is in servald or
libserval being used by another application.  Are you able to repeat the
test with servald not running, and see whether it still happens?

Paul.


On Tue, Nov 12, 2013 at 11:23 AM, Will Hawkins <
hawkinsw at opentechinstitute.org> wrote:

> Using go (yes, that's right!) I was able to create a test program that
> opened enough simultaneous HTTP connections to force a crash.
>
> Thanks to the fact that we were running a serial console that was
> logging Pico station console output, we were able to capture the crash
> information. I am attaching that here.
>
> Overall, it looks like the node simply runs out of memory. The first
> errors are when malloc()s in servald fail Then, when things get really
> bad, there are errors from the wireless driver saying that it cannot
> allocate buffer space.
>
> Obviously the failures from the wireless driver are bad. They are
> probably ultimately what causes the node to reboot.
>
> I wonder, though, about the servald malloc() failures. I'm not sure if
> they are pure symptom (i.e, servald just happens to be the application
> most commonly allocating memory space when the crash happens and so its
> malloc()s fail first), or if it is part of the problem (i.e, servald
> causes memory usage to skyrocket under heavy load and *then* these
> larger memory problems start to occur).
>
> In any event, we got some logs, which is a good first step!
>
> Will
>
> _______________________________________________
> Commotion-dev mailing list
> Commotion-dev at lists.chambana.net
> https://lists.chambana.net/mailman/listinfo/commotion-dev
>
>
"
1654,Commotion-dev, Stress test results,"Tue, 12 Nov 2013 02:48:56 -0500",-0500,Will Hawkins," 
On Tuesday, November 12, 2013 00:00 EST, Paul Gardner-Stephen <paul at servalproject.org> wrote: 
 
> Hi Will,
> 
> Have you tried it with the recent servald update that fixed a few memory
> leaks?
> 
> As for high load generating malloc() activity in servald, it would need to
> be activity that touches servald in some way (obvious and direct or
> otherwise).  It will also be interesting to know if it is in servald or
> libserval being used by another application.  Are you able to repeat the
> test with servald not running, and see whether it still happens?

Paul,

Thanks for the response. I am planning on rerunning these tests tomorrow and had already planned on doing the tests that you suggest. I think that your suggestions will help us get to the bottom of what we are seeing here.

That said, it is my *hunch* that this crash has very little to do with any particular application. I think that it is more the result of the device simply running out of memory and having very little recourse but to restart.

I will post here with additional results. Thanks again for your response.

Will

> 
> Paul.
> 
> 
> On Tue, Nov 12, 2013 at 11:23 AM, Will Hawkins <
> hawkinsw at opentechinstitute.org> wrote:
> 
> > Using go (yes, that's right!) I was able to create a test program that
> > opened enough simultaneous HTTP connections to force a crash.
> >
> > Thanks to the fact that we were running a serial console that was
> > logging Pico station console output, we were able to capture the crash
> > information. I am attaching that here.
> >
> > Overall, it looks like the node simply runs out of memory. The first
> > errors are when malloc()s in servald fail Then, when things get really
> > bad, there are errors from the wireless driver saying that it cannot
> > allocate buffer space.
> >
> > Obviously the failures from the wireless driver are bad. They are
> > probably ultimately what causes the node to reboot.
> >
> > I wonder, though, about the servald malloc() failures. I'm not sure if
> > they are pure symptom (i.e, servald just happens to be the application
> > most commonly allocating memory space when the crash happens and so its
> > malloc()s fail first), or if it is part of the problem (i.e, servald
> > causes memory usage to skyrocket under heavy load and *then* these
> > larger memory problems start to occur).
> >
> > In any event, we got some logs, which is a good first step!
> >
> > Will
> >
> > _______________________________________________
> > Commotion-dev mailing list
> > Commotion-dev at lists.chambana.net
> > https://lists.chambana.net/mailman/listinfo/commotion-dev
> >
> >
 
 
 
 


"
1655,Commotion-dev, Stress test results,"Tue, 12 Nov 2013 02:56:16 -0500",-0500,Will Hawkins,"Ben

As always, thank you for your detailed response! I will put some comments below.
 
On Monday, November 11, 2013 22:05 EST, Ben West <ben at gowasabi.net> wrote: 
 
> I recently saw a WasabiNet node whose adhoc interface died due to memory
> exhaustion, and I should point out on a node *not* running serval or
> commotiond.  (I.e. since this isn't Commotion-OpenWRT firmware I'm writing
> about, but very similar.)  The relevant dmesg I've sent to the
> OpenWRT-devel list, which you can read here:
> 
> https://lists.openwrt.org/pipermail/openwrt-devel/2013-November/022398.html
> https://lists.openwrt.org/pipermail/openwrt-devel/2013-November/022399.html
> 
> If particular interest is that, since the node didn't spontaneously reboot
> or become inaccessible, I SSH'ed in and found a 240Kbyte dump file that
> wpa_supplicant had written to /tmp , with about the same timestamp as when
> memory errors began appearing in syslog.  Possibly this points to
> wpa_supplicant itself as source of intermittent memory leaks?  I'm using
> the wpad package, and I haven't yet had a chance to try out the version of
> wpad-mini modified to include IBSS-RSN support.  I would be curious if
> switching to wpad-mini has any effect on the memory errors you're seeing,
> Will.

This is very interesting. And relevant. We've actually got some code waiting to be merged that will move us to wpad-mini. I will try to build an image with that code and see if I can make the node panic in the same way. Thanks for the suggestion!

Are you able to send along that dump file? Your second message to the lists says that you retained it, but I want to see just how good your archive system is :-)

> 
> Besides that, do please note that I run the coovachilli captive portal,
> instead of NDS, and coova is definitely a memory hog of questionable
> stability.  That is, coova may end up being my problem, making this
> unrelated to Commotion.
> 
> Finally, check out these recommended kernel tweaks from OpenWRT-devel for
> having the node just spontaneously reboot upon OOM error or kernel oops.
> Naturally, these wouldn't fix the memory problem itself, but good to know
> for reference.
> 
> "" for routers in production i prefer setting
> /proc/sys/vm/panic_on_oom = 2
> /proc/sys/kernel/panic = 10
> 
> also if you like
> /proc/sys/kernel/panic_on_oops = 1 ""
> 
> 

Thanks for sending this along. We actually disabled several of these things (like reboot automatically on panic) so that we could attempt to debug the problem when it happened. It turned out that the most efficient way to get a dump like this was to have the node hooked to a console. 

The settings that you are using seem like the way to go for production nodes. I think that's what you're suggesting, right? With those settings, when the node starts to have trouble and eventually falls over, it will automatically restart without any user intervention. 

Again, thanks for the detailed response. I look forward to figuring this out together!

Will

> 
> On Mon, Nov 11, 2013 at 6:53 PM, Will Hawkins <
> hawkinsw at opentechinstitute.org> wrote:
> 
> > Using go (yes, that's right!) I was able to create a test program that
> > opened enough simultaneous HTTP connections to force a crash.
> >
> > Thanks to the fact that we were running a serial console that was
> > logging Pico station console output, we were able to capture the crash
> > information. I am attaching that here.
> >
> > Overall, it looks like the node simply runs out of memory. The first
> > errors are when malloc()s in servald fail Then, when things get really
> > bad, there are errors from the wireless driver saying that it cannot
> > allocate buffer space.
> >
> > Obviously the failures from the wireless driver are bad. They are
> > probably ultimately what causes the node to reboot.
> >
> > I wonder, though, about the servald malloc() failures. I'm not sure if
> > they are pure symptom (i.e, servald just happens to be the application
> > most commonly allocating memory space when the crash happens and so its
> > malloc()s fail first), or if it is part of the problem (i.e, servald
> > causes memory usage to skyrocket under heavy load and *then* these
> > larger memory problems start to occur).
> >
> > In any event, we got some logs, which is a good first step!
> >
> > Will
> >
> > _______________________________________________
> > Commotion-dev mailing list
> > Commotion-dev at lists.chambana.net
> > https://lists.chambana.net/mailman/listinfo/commotion-dev
> >
> >
> 
> 
> -- 
> Ben West
> http://gowasabi.net
> ben at gowasabi.net
> 314-246-9434
 
 
 
 


"
1656,Commotion-dev, Stress test results,"Tue, 12 Nov 2013 10:12:25 -0500",-0500,Dan Staples,"Paul,

We haven't yet tested (or merged) the memory leak fix, but we'll be sure
to report any difference that makes.

The only program we have that uses libservald is the serval-crypto
program we wrote for app advertising. We definitely saw serval-crypto's
uses of libservald lead to low memory conditions and crashes at the
Wireless Summit, so that's a good suggestion. Will, were there any apps
on the mesh when you saw the node crash?

I'm beginning the process of writing the serval plugin for commotiond
that will allow us to only package libservald and not the daemon, which
will at least save disk space, and hopefully less memory use as well.

Dan

On 11/12/2013 12:00 AM, Paul Gardner-Stephen wrote:
> Hi Will,
> 
> Have you tried it with the recent servald update that fixed a few memory
> leaks?
> 
> As for high load generating malloc() activity in servald, it would need
> to be activity that touches servald in some way (obvious and direct or
> otherwise).  It will also be interesting to know if it is in servald or
> libserval being used by another application.  Are you able to repeat the
> test with servald not running, and see whether it still happens?
> 
> Paul.
> 
> 
> On Tue, Nov 12, 2013 at 11:23 AM, Will Hawkins
> <hawkinsw at opentechinstitute.org <mailto:hawkinsw at opentechinstitute.org"
1657,Commotion-dev, Serval coverage on the Wall Street Journal's Digits,"Wed, 13 Nov 2013 22:33:47 +1030",+1030,Paul Gardner-Stephen,"See the fourth video segment (""Disaster-Tracker Apps You Need to Download"")
in:

http://live.wsj.com/video/mossberg-tests-lte-from-the-four-major-carriers/74E724F8-CD58-4608-86B9-F385159006FD.html#!74E724F8-CD58-4608-86B9-F385159006FD

Paul.
"
1658,Commotion-dev, Serval coverage on the Wall Street Journal's,"Wed, 13 Nov 2013 09:23:52 -0600",-0600,Ben West,"Hi Paul,

Congratulations on the coverage!  Here are direct links to that video,
since the navigation on the WSJ video portal look to be a bit lacking:

http://live.wsj.com/video/disaster-tracker-apps-you-need-to-download/75FADDF1-D700-4FFB-807C-560F1E830E0D.html#!75FADDF1-D700-4FFB-807C-560F1E830E0D
http://live.wsj.com/public/page/embed-75FADDF1_D700_4FFB_807C_560F1E830E0D.html(embeddable)




On Wed, Nov 13, 2013 at 6:03 AM, Paul Gardner-Stephen <
paul at servalproject.org> wrote:

> See the fourth video segment (""Disaster-Tracker Apps You Need to
> Download"") in:
>
>
> http://live.wsj.com/video/mossberg-tests-lte-from-the-four-major-carriers/74E724F8-CD58-4608-86B9-F385159006FD.html#!74E724F8-CD58-4608-86B9-F385159006FD
>
> Paul.
>
> _______________________________________________
> Commotion-dev mailing list
> Commotion-dev at lists.chambana.net
> https://lists.chambana.net/mailman/listinfo/commotion-dev
>
"
1659,Commotion-dev, Serval coverage on the Wall Street Journal's,"Thu, 14 Nov 2013 07:11:40 +1030",+1030,Paul Gardner-Stephen,"Hi Ben,

Thanks for that -- it was too late at night for me to figure out how to
extract the interesting part.

Paul.


On Thu, Nov 14, 2013 at 1:53 AM, Ben West <ben at gowasabi.net> wrote:

> Hi Paul,
>
> Congratulations on the coverage!  Here are direct links to that video,
> since the navigation on the WSJ video portal look to be a bit lacking:
>
>
> http://live.wsj.com/video/disaster-tracker-apps-you-need-to-download/75FADDF1-D700-4FFB-807C-560F1E830E0D.html#!75FADDF1-D700-4FFB-807C-560F1E830E0D
>
> http://live.wsj.com/public/page/embed-75FADDF1_D700_4FFB_807C_560F1E830E0D.html(embeddable)
>
>
>
>
> On Wed, Nov 13, 2013 at 6:03 AM, Paul Gardner-Stephen <
> paul at servalproject.org> wrote:
>
"
1660,Commotion-dev, mitigate Bufferbloat?,"Mon, 02 Dec 2013 11:17:29 -0500",-0500,Dan Staples,"We got a recommendation on the IRC today for avoiding bufferbloat on
OpenWRT: http://blog.lxgr.net/posts/2013/01/28/my-openwrt-setup/. I
don't have time to dig into this at the moment, but I would be curious
if anyone else has experience with this.

Dan

-- 
Dan Staples

Open Technology Institute
https://commotionwireless.net
OpenPGP key: http://disman.tl/pgp.asc
Fingerprint: 2480 095D 4B16 436F 35AB 7305 F670 74ED BD86 43A9
"
1661,Commotion-dev, mitigate Bufferbloat?,"Mon, 2 Dec 2013 10:50:44 -0600",-0600,Ben West,"The casual research I'd done already checking out various CoDel
implementations, in addition to existing means of rate control, suggest
that they all hinge on the ability to define overall up / down bandwidth
values for the rate control algorithm to use as constraint.  This works
just fine for most wireline situations (e.g. DSL), as the actual line
bandwidth is often known to a good degree of precision.

Not so with wireless, where a given link's actual bandwidth will fluctuate
with external factors like noise.  Especially so for an AP talking to
multiple clients, where each client will have a particular rate they've
negotiated with the AP, and those rates will further fluctuate based on
interference and range.  Deploying rate control incorrectly in such
situations seems it could be ineffective at best, or even disruptive at
worst?

I hadn't yet found a CoDel recipe (or other rate control scheme) that
appeared able to accommodate variable link bandwidth.  Anyone else?
Posibly, one may be able to harness OLSR's new sgwdynspeed plugin for this
purpose?

On Mon, Dec 2, 2013 at 10:17 AM, Dan Staples <
danstaples at opentechinstitute.org> wrote:

> We got a recommendation on the IRC today for avoiding bufferbloat on
> OpenWRT: http://blog.lxgr.net/posts/2013/01/28/my-openwrt-setup/. I
> don't have time to dig into this at the moment, but I would be curious
> if anyone else has experience with this.
>
> Dan
>
> --
> Dan Staples
>
> Open Technology Institute
> https://commotionwireless.net
> OpenPGP key: http://disman.tl/pgp.asc
> Fingerprint: 2480 095D 4B16 436F 35AB 7305 F670 74ED BD86 43A9
> _______________________________________________
> Commotion-dev mailing list
> Commotion-dev at lists.chambana.net
> https://lists.chambana.net/mailman/listinfo/commotion-dev
>
"
1662,Commotion-dev, mitigate Bufferbloat?,"Mon, 2 Dec 2013 20:37:15 +0100",+0100,Teco Boot,"CoDel (or variants) needs some time to adapt in dynamic environments, as is often the case in wireless. I don?t think this is a problem.
It doesn?t shape traffic, it manages packet dispatcher in case of queuing.
The problem might be that WLAN drivers have their own large fifo queue, so CoDel can?t manage packet dispatcher. Better integration of AQM at OS level and interface driver FIFO transmission queue is needed.

It has less to do with sgwdynspeed. That one is for selecting the border router based on larger up/down rate and lower ETX.

Teco
 
Op 2 dec. 2013, om 17:50 heeft Ben West <ben at gowasabi.net> het volgende geschreven:

> The casual research I'd done already checking out various CoDel implementations, in addition to existing means of rate control, suggest that they all hinge on the ability to define overall up / down bandwidth values for the rate control algorithm to use as constraint.  This works just fine for most wireline situations (e.g. DSL), as the actual line bandwidth is often known to a good degree of precision.
> 
> Not so with wireless, where a given link's actual bandwidth will fluctuate with external factors like noise.  Especially so for an AP talking to multiple clients, where each client will have a particular rate they've negotiated with the AP, and those rates will further fluctuate based on interference and range.  Deploying rate control incorrectly in such situations seems it could be ineffective at best, or even disruptive at worst?
> 
> I hadn't yet found a CoDel recipe (or other rate control scheme) that appeared able to accommodate variable link bandwidth.  Anyone else?  Posibly, one may be able to harness OLSR's new sgwdynspeed plugin for this purpose?
> 
> On Mon, Dec 2, 2013 at 10:17 AM, Dan Staples <danstaples at opentechinstitute.org> wrote:
> We got a recommendation on the IRC today for avoiding bufferbloat on
> OpenWRT: http://blog.lxgr.net/posts/2013/01/28/my-openwrt-setup/. I
> don't have time to dig into this at the moment, but I would be curious
> if anyone else has experience with this.
> 
> Dan
> 
> --
> Dan Staples
> 
> Open Technology Institute
> https://commotionwireless.net
> OpenPGP key: http://disman.tl/pgp.asc
> Fingerprint: 2480 095D 4B16 436F 35AB 7305 F670 74ED BD86 43A9
> _______________________________________________
> Commotion-dev mailing list
> Commotion-dev at lists.chambana.net
> https://lists.chambana.net/mailman/listinfo/commotion-dev
> 
> 
> 
> 
> -- 
> Ben West
> http://gowasabi.net
> ben at gowasabi.net
> 314-246-9434
> _______________________________________________
> Commotion-dev mailing list
> Commotion-dev at lists.chambana.net
> https://lists.chambana.net/mailman/listinfo/commotion-dev


"
1663,Commotion-dev, Fwd: Setting up your own app store with F-Droid,"Tue, 03 Dec 2013 11:11:53 -0500",-0500,Hans-Christoph Steiner,"
Let me know if you have any questions when you're setting it up! :)  It would
also be good to have Commotion MeshTether in the official F-Droid repo.  Its
easy enough to do.  I can help with that too.

.hc

On 11/06/2013 09:39 PM, Dan Staples wrote:
> it would be great to have our own F-Droid repo for the Commotion Android
> app!
> 
> Dan
> 
> 
> "
1664,Commotion-dev, Fwd: Setting up your own app store with F-Droid,"Tue, 03 Dec 2013 14:56:51 -0500",-0500,Nat Meysenburg,"Hans-Christoph Steiner <hans at guardianproject.info> writes:

> Let me know if you have any questions when you're setting it up! :)  It would
> also be good to have Commotion MeshTether in the official F-Droid repo.  Its
> easy enough to do.  I can help with that too.

Agreed. As I remember it, it involves cloning the build repo,
adding/editing a file, and submitting a pull request. The hardest part
is setting up a gitorious account; which is as hard as you'd expect such
a thing to be.

~~Nat
"
1665,Commotion-dev, Fwd: Setting up your own app store with F-Droid,"Thu, 05 Dec 2013 16:53:56 -0500",-0500,Hans-Christoph Steiner,"

On 12/03/2013 02:56 PM, Nat Meysenburg wrote:
> Hans-Christoph Steiner <hans at guardianproject.info> writes:
> 
"
1666,Commotion-dev, mesh workshop in NYC,"Thu, 05 Dec 2013 16:58:58 -0500",-0500,Hans-Christoph Steiner,"
We're putting together a mesh workshop in NYC, probably for some time in Feb.
 It could just be a demo, like get the mesh running and try some apps, but
we're hoping to also include more workshoppy sections in a longer format.

Would anyone from Commotion like to participate?

.hc

-- 
PGP fingerprint: 5E61 C878 0F86 295C E17D  8677 9F0F E587 374B BE81

"
1667,Commotion-dev, mesh workshop in NYC,"Thu, 05 Dec 2013 17:04:50 -0500",-0500,Griffin Boyce,"Hans-Christoph Steiner wrote:
> Would anyone from Commotion like to participate?

  Of course!  Keep us in the loop as planning progresses. =)

~Griffin

-- 
Be kind, for everyone you meet is fighting a hard battle.

PGP: 0xD9D4CADEE3B67E7AB2C05717E331FD29AE792C97
OTR: saint at jabber.ccc.de


"
1668,Commotion-dev, mesh workshop in NYC,"Thu, 05 Dec 2013 17:05:59 -0500",-0500,Grady Johnson,
1669,Commotion-dev, mesh workshop in NYC,"Sat, 7 Dec 2013 19:34:51 -0500",-0500,Georgia Bullen,"Hi Hans!

Who all is involved in the workshop planning? It'd be great to invite the
Red Hook Wifi crew and the Hoboken MileMesh crew. Do you have any info
posted yet? Or a draft of what you have in mind?

-Georgia



On Thu, Dec 5, 2013 at 5:05 PM, Grady Johnson
<grady at opentechinstitute.org>wrote:

> "
1670,Commotion-dev, Building a Mesh Network in Rural Somaliland,"Thu, 12 Dec 2013 08:03:02 -0500",-0500,Dan Staples,"Many thanks to Dan Hastings for writing and photographing his experience
setting up a Commotion network in Somaliland:
http://oti.newamerica.net/blogposts/2013/building_a_mesh_network_in_rural_somaliland-98554

I also like how the map of network nodes is shaped almost exactly like
the Commotion logo!

text below (but check the link for photos!):

""""""

Building a Mesh Network in Rural Somaliland
Published:  December 11, 2013

by Daniel Hastings

I had heard about mesh networking before I arrived in Somaliland, but
had never been in the position to actually build a mesh network. When I
accepted the position as ICT instructor at Abaarso School of Science and
Technology in Abaarso, Somaliland, I figured this may be my chance. I
knew that the Open Technology Institute (OTI) had been developing a mesh
firmware called Commotion, suitable for remote locations. Upon arriving
in Somaliland I decided that building a mesh network using Commotion
would be one of my top priorities.

It seemed like building a mesh network could be a difficult process. I
experimented in the past with other firmware on a variety of routers,
but found the configuration to be too time-consuming and difficult to
set up.
I knew Commotion ran on Ubiquti hardware, designed for rough outdoor
environments like Somaliland. Unfortunately, finding Ubiquti routers in
Somaliland -- for that matter, getting anything into Somaliland -- is no
easy task.

Somaliland is an independent autonomous region of Somalia, and is an
area that is safe compared to the southern regions of Somalia. While not
internationally recognized as a country, Somaliland has its own
currency, government, and military.

The analogy I like to use when it comes to traveling to Somaliland is no
different than that of getting to Hogwarts. Instead of running head
first into an imaginary platform at the train station, you have to land
in Dubai, catch a flight that leaves only once a week and then travel
across a desert on one of the worst-built roads you can imagine.

While back in the US this past summer I contacted OTI and found that
they would be able to provide me with the proper equipment to run and
set up a mesh network using Commotion. I was so excited about the
possibility of actually getting all of the equipment into Somaliland
that I carefully packed everything into my carry-on.

Before I go any further, I should explain my level of experience with
building networks. My only experience with networking had been taking a
class at a community college in San Francisco and spending the last year
troubleshooting our Internet problems at school. However, Commotion is
built in such a way that little if any advanced configuration is
necessary to set up a mesh network.

I first began building my network by identifying where I wanted access
points on campus and mapping out distances between each spot. Having a
good line of sight between each node was extremely important. Luckily we
have a lot of high guard and water towers on campus so placing nodes was
not an issue.

One minor problem with placing nodes in towers was that I had to ensure
a reliable power source was within range of the node. If all my nodes
were solar-powered, I would not have had to worry about running any
cable at all!

I next had to ?flash? each router, which means loading the Commotion
firmware on to each Ubiquti device. I had experience flashing firmware
onto routers before but had never ?meshed? wireless nodes together. To
help with this I referred to the configuration examples on Commotion?s
website, which I found extremely helpful. Open source software has been
known to be tricky to configure and maintain but it certainly does not
have to be. Commotion has proved this to be more than true.

While building the network, I made sure to include students as much as I
could. I assembled together a computer club of my top ICT students to
discuss and teach the basics of mesh networking, how to flash firmware
onto routers, and how to add a node to the network. Together we ran
cable and climbed water towers to place the nodes in their proper
places. We also had to place some nodes in the guard towers which often
times, the guards would unplug accidentally. Students trained the guards
on the difference between the LAN and PoE ports as well as the
importance of keeping the PoE cable plugged in at all times. A few weeks
after school we put up the last two nodes for the girls? dorms and the
boys? dorms.

Local Applications and Limited Bandwidth

Somaliland is currently the only country in Africa that lacks fiber
optic access -- cables are laid but access is not predicted to be
available until 2014. Somaliland receives its Internet connection via
microwaves across the desert from Djibouti. All of the IP address ranges
in Somaliland will tell you that you are in Djibouti. The distant
gateway connectivity, not to mention unreliable ISPs, equates to some
seriously slow Internet.

A lack of consistent access to the Internet is an ICT instructor?s
nightmare. Not being able to teach the most current technologies can be
frustrating, and it also hampers sharing files with students.
Mesh networking is described as a ?peer to peer network:? I wanted to
use the full sense of the term and make file sharing among my students
easy and manageable. In order to solve this communication problem I
decided to rely less on the outside Internet and rely more on local
applications installed on our servers.

I found the solution to our inconsistent and slow Internet by installing
OwnCloud, an open source alternative to Dropbox, on our local server.
Now students could share homework assignments with me and other teachers
without having to rely on the Internet at all.

Creating a Self-Sufficient Network

As well as the network worked and as much fun as setting it up was, I
cannot call this project successful until I can come back to Somaliland
a year from now and see the same nodes in place running the same network.
I used a few methods to make sure this would be the case. I was careful
to document every aspect of the project and create detailed guides for
teachers and future network administrators on everything from how to
find your IP address on the network to how to ping a node, which is
important for isolating a potential problem on the network. Even though
mesh networks are ?self-healing?, they are not perfect and still have
their quirks.

Having all of the knowledge centered in one place with one staff member
will only set an organization up for failure, so I've made sure to give
a series of small trainings to the entire staff.

The more transparent you are about how the network works, the more
likely the technology will last.

I repeatedly told my students that some of the greatest makers and
technologists of our time were self-taught. The excellent support
community centered around open source software makes projects such as
Commotion sustainable. There is a good chance that if a problem arises,
someone else already had that issue or someone in another community
across the globe is working on a solution to that problem.

I would like to give my sincere gratitude to the Commotion Wireless
Project for the support they gave me along with providing me with
necessary tools to build this network. Not only did the students at
Abaarso School get extremely enthused about mesh networking and learn
the meaning of community technology, but now another small part of a
country that, technically, does not even exist is more connected to the
rest of the world.

""""""

-- 
Dan Staples

Open Technology Institute
https://commotionwireless.net
OpenPGP key: http://disman.tl/pgp.asc
Fingerprint: 2480 095D 4B16 436F 35AB 7305 F670 74ED BD86 43A9
"
1671,Commotion-dev, Building a Mesh Network in Rural Somaliland,"Thu, 12 Dec 2013 08:27:39 -0500",-0500,hello at ninabianchi.com,"This is awesome. Thanks for sharing. 

Nina

On Dec 12, 2013, at 8:03 AM, Dan Staples wrote:

> Many thanks to Dan Hastings for writing and photographing his experience
> setting up a Commotion network in Somaliland:
> http://oti.newamerica.net/blogposts/2013/building_a_mesh_network_in_rural_somaliland-98554
> 
> I also like how the map of network nodes is shaped almost exactly like
> the Commotion logo!
> 
> text below (but check the link for photos!):
> 
> """"""
> 
> Building a Mesh Network in Rural Somaliland
> Published:  December 11, 2013
> 
> by Daniel Hastings
> 
> I had heard about mesh networking before I arrived in Somaliland, but
> had never been in the position to actually build a mesh network. When I
> accepted the position as ICT instructor at Abaarso School of Science and
> Technology in Abaarso, Somaliland, I figured this may be my chance. I
> knew that the Open Technology Institute (OTI) had been developing a mesh
> firmware called Commotion, suitable for remote locations. Upon arriving
> in Somaliland I decided that building a mesh network using Commotion
> would be one of my top priorities.
> 
> It seemed like building a mesh network could be a difficult process. I
> experimented in the past with other firmware on a variety of routers,
> but found the configuration to be too time-consuming and difficult to
> set up.
> I knew Commotion ran on Ubiquti hardware, designed for rough outdoor
> environments like Somaliland. Unfortunately, finding Ubiquti routers in
> Somaliland -- for that matter, getting anything into Somaliland -- is no
> easy task.
> 
> Somaliland is an independent autonomous region of Somalia, and is an
> area that is safe compared to the southern regions of Somalia. While not
> internationally recognized as a country, Somaliland has its own
> currency, government, and military.
> 
> The analogy I like to use when it comes to traveling to Somaliland is no
> different than that of getting to Hogwarts. Instead of running head
> first into an imaginary platform at the train station, you have to land
> in Dubai, catch a flight that leaves only once a week and then travel
> across a desert on one of the worst-built roads you can imagine.
> 
> While back in the US this past summer I contacted OTI and found that
> they would be able to provide me with the proper equipment to run and
> set up a mesh network using Commotion. I was so excited about the
> possibility of actually getting all of the equipment into Somaliland
> that I carefully packed everything into my carry-on.
> 
> Before I go any further, I should explain my level of experience with
> building networks. My only experience with networking had been taking a
> class at a community college in San Francisco and spending the last year
> troubleshooting our Internet problems at school. However, Commotion is
> built in such a way that little if any advanced configuration is
> necessary to set up a mesh network.
> 
> I first began building my network by identifying where I wanted access
> points on campus and mapping out distances between each spot. Having a
> good line of sight between each node was extremely important. Luckily we
> have a lot of high guard and water towers on campus so placing nodes was
> not an issue.
> 
> One minor problem with placing nodes in towers was that I had to ensure
> a reliable power source was within range of the node. If all my nodes
> were solar-powered, I would not have had to worry about running any
> cable at all!
> 
> I next had to ?flash? each router, which means loading the Commotion
> firmware on to each Ubiquti device. I had experience flashing firmware
> onto routers before but had never ?meshed? wireless nodes together. To
> help with this I referred to the configuration examples on Commotion?s
> website, which I found extremely helpful. Open source software has been
> known to be tricky to configure and maintain but it certainly does not
> have to be. Commotion has proved this to be more than true.
> 
> While building the network, I made sure to include students as much as I
> could. I assembled together a computer club of my top ICT students to
> discuss and teach the basics of mesh networking, how to flash firmware
> onto routers, and how to add a node to the network. Together we ran
> cable and climbed water towers to place the nodes in their proper
> places. We also had to place some nodes in the guard towers which often
> times, the guards would unplug accidentally. Students trained the guards
> on the difference between the LAN and PoE ports as well as the
> importance of keeping the PoE cable plugged in at all times. A few weeks
> after school we put up the last two nodes for the girls? dorms and the
> boys? dorms.
> 
> Local Applications and Limited Bandwidth
> 
> Somaliland is currently the only country in Africa that lacks fiber
> optic access -- cables are laid but access is not predicted to be
> available until 2014. Somaliland receives its Internet connection via
> microwaves across the desert from Djibouti. All of the IP address ranges
> in Somaliland will tell you that you are in Djibouti. The distant
> gateway connectivity, not to mention unreliable ISPs, equates to some
> seriously slow Internet.
> 
> A lack of consistent access to the Internet is an ICT instructor?s
> nightmare. Not being able to teach the most current technologies can be
> frustrating, and it also hampers sharing files with students.
> Mesh networking is described as a ?peer to peer network:? I wanted to
> use the full sense of the term and make file sharing among my students
> easy and manageable. In order to solve this communication problem I
> decided to rely less on the outside Internet and rely more on local
> applications installed on our servers.
> 
> I found the solution to our inconsistent and slow Internet by installing
> OwnCloud, an open source alternative to Dropbox, on our local server.
> Now students could share homework assignments with me and other teachers
> without having to rely on the Internet at all.
> 
> Creating a Self-Sufficient Network
> 
> As well as the network worked and as much fun as setting it up was, I
> cannot call this project successful until I can come back to Somaliland
> a year from now and see the same nodes in place running the same network.
> I used a few methods to make sure this would be the case. I was careful
> to document every aspect of the project and create detailed guides for
> teachers and future network administrators on everything from how to
> find your IP address on the network to how to ping a node, which is
> important for isolating a potential problem on the network. Even though
> mesh networks are ?self-healing?, they are not perfect and still have
> their quirks.
> 
> Having all of the knowledge centered in one place with one staff member
> will only set an organization up for failure, so I've made sure to give
> a series of small trainings to the entire staff.
> 
> The more transparent you are about how the network works, the more
> likely the technology will last.
> 
> I repeatedly told my students that some of the greatest makers and
> technologists of our time were self-taught. The excellent support
> community centered around open source software makes projects such as
> Commotion sustainable. There is a good chance that if a problem arises,
> someone else already had that issue or someone in another community
> across the globe is working on a solution to that problem.
> 
> I would like to give my sincere gratitude to the Commotion Wireless
> Project for the support they gave me along with providing me with
> necessary tools to build this network. Not only did the students at
> Abaarso School get extremely enthused about mesh networking and learn
> the meaning of community technology, but now another small part of a
> country that, technically, does not even exist is more connected to the
> rest of the world.
> 
> """"""
> 
> -- 
> Dan Staples
> 
> Open Technology Institute
> https://commotionwireless.net
> OpenPGP key: http://disman.tl/pgp.asc
> Fingerprint: 2480 095D 4B16 436F 35AB 7305 F670 74ED BD86 43A9
> _______________________________________________
> Commotion-dev mailing list
> Commotion-dev at lists.chambana.net
> https://lists.chambana.net/mailman/listinfo/commotion-dev
> 


"
1672,Commotion-dev, mesh workshop in NYC,"Thu, 12 Dec 2013 09:28:33 -0500",-0500,Hans-Christoph Steiner,"
This would be a different workshop than a community mesh workshop.  The idea
is to entirely focus on the adhoc side of it, so the desktop and mobile
clients, and applications that work on mesh alone (IMing, voip calling, our
p2p app/file sharing, etc).  We want to get the participants all set up with
the adhoc tools as as quickly as possible, so we'd have a basic pre-prepared
mesh at the workshop location.

So far its Diana and me on the planning of the workshop.  We're still working
on the length and exact format.  If it ends up being longer format, then I
think it could make sense to have a part that covers working with the wifi
routers, like the Tunisia materials.

.hc

On 12/07/2013 07:34 PM, Georgia Bullen wrote:
> Hi Hans!
> 
> Who all is involved in the workshop planning? It'd be great to invite the
> Red Hook Wifi crew and the Hoboken MileMesh crew. Do you have any info
> posted yet? Or a draft of what you have in mind?
> 
> -Georgia
> 
> 
> 
> On Thu, Dec 5, 2013 at 5:05 PM, Grady Johnson
> <grady at opentechinstitute.org>wrote:
> 
> Absolutely!
> 
> On 12/05/2013 05:04 PM, Griffin Boyce wrote:
"
1673,Commotion-dev, mesh workshop in NYC,"Thu, 12 Dec 2013 09:41:09 -0500",-0500,Nathan of Guardian,
1674,Commotion-dev, mesh workshop in NYC,"Thu, 12 Dec 2013 09:58:30 -0500",-0500,hello at ninabianchi.com,"We (The Work Department) did work on some of this last year and of course, the Construction Kit, which was the foundation for the Tunisia workshop. 

I'd be interested in joining this conversation. I'm currently working on a few new projects that will require thinking through the applications and what it would take in terms of development. I'd also like to continue building kits that make this planning process open and collaborative with the communities where they would be deployed.

Is there any chance I could join your call / conversation at some point? What's the timeframe for the workshop? If you're interested, we could talk logistics in more detail off the list, I'm at nina at theworkdept.com

Looking forward,
Nina



On Dec 12, 2013, at 9:41 AM, Nathan of Guardian wrote:

> "
1675,Commotion-dev, mesh workshop in NYC,"Thu, 12 Dec 2013 10:18:30 -0500",-0500,Georgia Bullen,"+ Williow, Geeks Without Bounds
Adding Willow, because I think this aligns with some projects that GWOB is
working on as well, and I don't think she's on this list!

I'm also interested in helping with the planning. We just held a workshop
in Detroit to introduce the idea of local applications, and our next focus
round would be more focused on applications that leverage the capabilities
of the mesh. I also think that there would be interest from the organizing
teams in Red Hook and Hoboken, as they are both thinking about applications
for their networks, although with different contexts.

I know that people from the Commotion team will also be at the OpenITP
hackathon in January in DC (
https://www.openitp.org/blog/dc-hackathon-for-security-privacy-tools-on-jan-11-2014.html).
It might be interesting to work on some of these ideas there as well. Is
anyone on the list thinking about coming to that hackathon?

-Georgia



On Thu, Dec 12, 2013 at 9:58 AM, hello at ninabianchi.com <
hello at ninabianchi.com> wrote:

> We (The Work Department) did work on some of this last year and of course,
> the Construction Kit, which was the foundation for the Tunisia workshop.
>
> I'd be interested in joining this conversation. I'm currently working on a
> few new projects that will require thinking through the applications and
> what it would take in terms of development. I'd also like to continue
> building kits that make this planning process open and collaborative with
> the communities where they would be deployed.
>
> Is there any chance I could join your call / conversation at some point?
> What's the timeframe for the workshop? If you're interested, we could talk
> logistics in more detail off the list, I'm at nina at theworkdept.com
>
> Looking forward,
> Nina
>
>
>
> On Dec 12, 2013, at 9:41 AM, Nathan of Guardian wrote:
>
> > "
1676,Commotion-dev, mesh workshop in NYC,"Fri, 13 Dec 2013 11:53:14 -0500",-0500,hello at ninabianchi.com,"Is it possible that OTI (or someone) could host another hackathon that would focus more explicitly on these concepts we're discussing with a bit more lead time? January 11th is very soon. It might be difficult to coordinate everyone / be inclusive / reach out to critical voices on such a short notice. I would like to join a hackathon around these ideas however I wouldn't be able to make the 11th. 

Thoughts? 

Any other events already in the queue for February, March or April?



On Dec 12, 2013, at 10:18 AM, Georgia Bullen wrote:

> + Williow, Geeks Without Bounds
> Adding Willow, because I think this aligns with some projects that GWOB is working on as well, and I don't think she's on this list!
> 
> I'm also interested in helping with the planning. We just held a workshop in Detroit to introduce the idea of local applications, and our next focus round would be more focused on applications that leverage the capabilities of the mesh. I also think that there would be interest from the organizing teams in Red Hook and Hoboken, as they are both thinking about applications for their networks, although with different contexts. 
> 
> I know that people from the Commotion team will also be at the OpenITP hackathon in January in DC (https://www.openitp.org/blog/dc-hackathon-for-security-privacy-tools-on-jan-11-2014.html). It might be interesting to work on some of these ideas there as well. Is anyone on the list thinking about coming to that hackathon?
> 
> -Georgia
> 
> 
> 
> On Thu, Dec 12, 2013 at 9:58 AM, hello at ninabianchi.com <hello at ninabianchi.com> wrote:
> We (The Work Department) did work on some of this last year and of course, the Construction Kit, which was the foundation for the Tunisia workshop.
> 
> I'd be interested in joining this conversation. I'm currently working on a few new projects that will require thinking through the applications and what it would take in terms of development. I'd also like to continue building kits that make this planning process open and collaborative with the communities where they would be deployed.
> 
> Is there any chance I could join your call / conversation at some point? What's the timeframe for the workshop? If you're interested, we could talk logistics in more detail off the list, I'm at nina at theworkdept.com
> 
> Looking forward,
> Nina
> 
> 
> 
> On Dec 12, 2013, at 9:41 AM, Nathan of Guardian wrote:
> 
> > "
1677,Commotion-dev, mesh workshop in NYC,"Mon, 16 Dec 2013 10:22:55 -0500",-0500,Georgia Bullen,"The January 11th hackathon is hosted by OpenITP, and there will be a few
projects there. I was just mentioning it in case people here might be
interested.

It's possible. We are still working on planning for 2014, and will keep
this list posted!

Hans - let us know how we can help for the workshop so that we can figure
who to have there!

-Georgia


On Fri, Dec 13, 2013 at 11:53 AM, hello at ninabianchi.com <
hello at ninabianchi.com> wrote:

> Is it possible that OTI (or someone) could host another hackathon that
> would focus more explicitly on these concepts we're discussing with a bit
> more lead time? January 11th is very soon. It might be difficult to
> coordinate everyone / be inclusive / reach out to critical voices on such a
> short notice. I would like to join a hackathon around these ideas however I
> wouldn't be able to make the 11th.
>
> Thoughts?
>
> Any other events already in the queue for February, March or April?
>
>
>
> On Dec 12, 2013, at 10:18 AM, Georgia Bullen wrote:
>
> + Williow, Geeks Without Bounds
> Adding Willow, because I think this aligns with some projects that GWOB is
> working on as well, and I don't think she's on this list!
>
> I'm also interested in helping with the planning. We just held a workshop
> in Detroit to introduce the idea of local applications, and our next focus
> round would be more focused on applications that leverage the capabilities
> of the mesh. I also think that there would be interest from the organizing
> teams in Red Hook and Hoboken, as they are both thinking about applications
> for their networks, although with different contexts.
>
> I know that people from the Commotion team will also be at the OpenITP
> hackathon in January in DC (
> https://www.openitp.org/blog/dc-hackathon-for-security-privacy-tools-on-jan-11-2014.html).
> It might be interesting to work on some of these ideas there as well. Is
> anyone on the list thinking about coming to that hackathon?
>
> -Georgia
>
>
>
> On Thu, Dec 12, 2013 at 9:58 AM, hello at ninabianchi.com <
> hello at ninabianchi.com> wrote:
>
"
1678,Commotion-dev, mesh workshop in NYC,"Wed, 18 Dec 2013 14:50:59 -0500",-0500,Hans-Christoph Steiner,"
More details: we chatted with Erica of Eyebeam and came up with a loose plan.
Let us know how this works for y'all, its not etched in stone yet.

* a full day workshop on Saturday April 5th at Eyebeam.  10-5pm.
* 10-1pm bring in laptops and phones and mesh them!
* complete an assignment using the ad-hoc mesh, something like a journalism
assignment desk when the dark overlords have shutdown the internet and are
arresting anyone trying to use it.
* 1-2pm lunch
* 2-5pm The Day After: now we need an internet replacement, let's learn how to
build out the citywide mesh. People buy router hardware in advance, and learn
how to configure it with Commotion, then build a mini-city-wide mesh around
Eyebeam.  If you haven't been there, its a big open warehouse with tall
ceilings, so people will be able to stick mesh nodes all over.

I think it would make sense if Guardian lead up the first half with OTI
helping, then the next half would be OTI leading with Guardian helping.

.hc

On 12/16/2013 10:22 AM, Georgia Bullen wrote:
> The January 11th hackathon is hosted by OpenITP, and there will be a few
> projects there. I was just mentioning it in case people here might be
> interested.
> 
> It's possible. We are still working on planning for 2014, and will keep
> this list posted!
> 
> Hans - let us know how we can help for the workshop so that we can figure
> who to have there!
> 
> -Georgia
> 
> 
> On Fri, Dec 13, 2013 at 11:53 AM, hello at ninabianchi.com <
> hello at ninabianchi.com> wrote:
> 
"
1679,Commotion-dev, OpenWRT @ 30c3: 10 years of fun with embedded,"Mon, 30 Dec 2013 21:27:18 -0500",-0500,Dan Staples,"Thought I'd share this since I imagine it would be of interest to anyone
working on Commotion. nbd gave a talk at 30c3 on the history, current
development, and future plans for OpenWRT. It's very interesting and
informative!

Talk description:
http://events.ccc.de/congress/2013/Fahrplan/events/5497.html

Video:
http://mirror.fem-net.de//CCC/30C3/mp4/30c3-5497-en-10_Years_of_Fun_with_Embedded_Devices_h264-hq.mp4

-- 
Dan Staples

Open Technology Institute
https://commotionwireless.net
OpenPGP key: http://disman.tl/pgp.asc
Fingerprint: 2480 095D 4B16 436F 35AB 7305 F670 74ED BD86 43A9




"
1680,Commotion-dev, site redirects to install.php,"Fri, 03 Jan 2014 19:53:29 -0300",-0300,=?utf-8?Q?Nicol=C3=A1s?= Reynolds,"
https://commotionwireless.net sends me to
https://commotionwireless.net/install.php

:)

-- 
http://wiki.hackcoop.com.ar
"
1681,Commotion-dev, site redirects to install.php,"Fri, 03 Jan 2014 18:14:29 -0500",-0500,Josh King,"Hi Nicol?s,

Thanks for pointing it out, there was a temporary issue with some site
maintenance. Should all be working again now.

On 01/03/2014 05:53 PM, Nicol?s Reynolds wrote:
> 
> https://commotionwireless.net sends me to
> https://commotionwireless.net/install.php
> 
> :)
> 
> 
> 
> _______________________________________________
> Commotion-dev mailing list
> Commotion-dev at lists.chambana.net
> https://lists.chambana.net/mailman/listinfo/commotion-dev
> 

-- 
Josh King
Lead Technologist
The Open Technology Institute

"
1682,Commotion-dev, Commotiuon Linux Installation,"Sat, 04 Jan 2014 17:39:01 +0100",+0100,LScop,"|Here some issues and questions after the||""Grumpy Cat"" upgrade.
|

|A)I have installed the new ""Grumpy Cat"" on my two of my Ubiquiti 
Picostation M2.
|

|1)I have used the sysupgrade.bin file by using the administrator 
interface to upgrade the DR1.
The procedure didn't work on both devices.
2)I have installed the firmware again using FactoryInstall.bin.
Everything works now.Great!!
Is there any explanation why the procedure 1) didn't work?
|

|B)Commotion LINUX.
Here the OS info installed on my Linux Laptop:3.8.0-19-generic 
#29-Ubuntu SMP Wed Apr 17 18:16:28 UTC 2013 x86_64 x86_64 x86_64 GNU/Linux
|

|I'm following the installing instructions in the README.txt file
As expexted I get some errors after the first command.
|

After the command

|
sudo apt-get install -f|

I get the error

|/var/lib/dpkg/info/commotion-linux-py.postinst: line 2: pip: command 
not found |

|dpkg: error processing commotion-linux-py (--configure): |

|||subprocess installed post-installation script returned error exit 
status 127 |

Errors were encountered while processing:

commotion-linux-py

E: Sub-process /usr/bin/dpkg returned an error code (1)

|
Then,after the nxt command:
|

|sudo dpkg -i *.deb|

I get the error:

|Setting up commotion-linux-py (0.2-1) ... |

|/var/lib/dpkg/info/commotion-linux-py.postinst: line 2: pip: command 
not found |

|dpkg: error processing commotion-linux-py (--install): |

|||subprocess installed post-installation script returned error exit 
status 127
|


||

|Any suggestion?
|

|C)Mesh -IP assignement in R1""Grumpy Cat"".
|

|I see new mesh-IP assignments,like,for example 100.74.84.52 for the 
router,where  84 and 52 are the 2 last decimal numbers of the mac 
address.In the previous it was 5.x.x.x...
|

|74??
|

|How this has impact on manual setting the  new  mesh IP-address on  
devices like laptop,smartphone?
|

|
|

Thanks for your support

Luigi

"
1683,Commotion-dev, Commotiuon Linux Installation,"Sat, 04 Jan 2014 13:37:16 -0500",-0500,Jordan McCarthy,"An HTML attachment was scrubbed...
URL: <http://lists.chambana.net/pipermail/commotion-dev/attachments/20140104/f172a913/attachment.html>
"
1684,Commotion-dev, Commotiuon Linux Installation,"Mon, 06 Jan 2014 12:21:50 -0500",-0500,Dan Staples,"Luigi,

About the IP addresses, we have changed our IP addressing schema for the
latest release. We are no longer using
5.x.x.x/101.x.x.x/102.x.x.x/103.x.x.x subnets. Instead, we are using the
100.64.0.0/10 address space for the mesh network, and 10.0.0.0/8 for the
all client networks. I am hoping we'll put out a longer statement soon
about the reasoning behind this decision and what it will mean in terms
of compatibility.

Dan

On 01/04/2014 01:37 PM, Jordan McCarthy wrote:
> Hi Luigi,
> 
> Thanks for getting in touch! 
> 
> A.  On the commotion-router side of things, I suspect that the reason
> the sysupgrade pathway didn't work is that a great deal of
> under-the-hood wiring associated with configuration files changed
> significantly, such that the configuration files that are retained
> during a sysupgrade were deemed to be invalid by the newly-flashed OS. 
> Did you try to ""keep configuration files"" during the sysupgrade, by any
> chance?
> 
> B.  The problems you encountered during the Linux client installation
> were entirely my fault: I just realized that the packages provided on
> the website were severely out of date.  I've just updated the core
> packages (commotion-linux-py, nm-dispatcher-olsrd, and
> commotion-mesh-applet) to the versions that are known to be compatible
> with R1 of commotion router.  I'll need to check in with a few other
> folks to make sure that everything else is as up-to-date as possible,
> but those three core packages should be enough to get you fully
> connected to an R1 mesh. 
> 
> Thanks again for your interest in Commotion, and please let us know how
> the rest of the install goes!
> 
> < Jordan
> 
> On Saturday, January 4, 2014 11:39 EST, LScop
> <luigi.scopelliti at fastwebnet.it> wrote:
>  
> 
>      
> 
> 
> Here some issues and questions after the ""Grumpy Cat"" upgrade.
> 
> A)I have installed the new ""Grumpy Cat"" on my two of my Ubiquiti
> Picostation M2.
> 
> 1)I have used the sysupgrade.bin file by using the administrator
> interface to upgrade the DR1.
> The procedure didn't work on both devices.
> 2)I have installed the firmware again using FactoryInstall.bin.
> Everything works now.Great!!
> Is there any explanation why the procedure 1) didn't work?
> 
> B)Commotion LINUX.
> Here the OS info installed on my Linux Laptop:3.8.0-19-generic
> #29-Ubuntu SMP Wed Apr 17 18:16:28 UTC 2013 x86_64 x86_64 x86_64 GNU/Linux
> 
> I'm following the installing instructions in the README.txt file
> As expexted I get some errors after the first command.
> 
> After the command
> 
> sudo apt-get install -f
> I get the error
> 
> /var/lib/dpkg/info/commotion-linux-py.postinst: line 2: pip: command not
> found
> dpkg: error processing commotion-linux-py (--configure):
> subprocess installed post-installation script returned error exit status 127
> Errors were encountered while processing:
> commotion-linux-py
> E: Sub-process /usr/bin/dpkg returned an error code (1)
> Then,after the nxt command:
> 
> sudo dpkg -i *.deb
> I get the error:
> 
> Setting up commotion-linux-py (0.2-1) ...
> /var/lib/dpkg/info/commotion-linux-py.postinst: line 2: pip: command not
> found
> dpkg: error processing commotion-linux-py (--install):
> subprocess installed post-installation scrip t returned error exit
> status 127
> 
> 
> Any suggestion?
> 
> C)Mesh -IP assignement in R1""Grumpy Cat"".
> 
> I see new mesh-IP assignments,like,for example 100.74.84.52 for the
> router,where  84 and 52 are the 2 last decimal numbers of the mac
> address.In the previous it was 5.x.x.x...
> 
> 74??
> 
> How this has impact on manual setting the  new  mesh IP-address on 
> devices like laptop,smartphone?
> 
> 
> Thanks for your support
> 
> Luigi
> 
> 
> 
> 
> --
> Jordan McCarthy
> Open Technology Initiative | New America Foundation
> My Public Key: C08D8042
> 
> 
> _______________________________________________
> Commotion-dev mailing list
> Commotion-dev at lists.chambana.net
> https://lists.chambana.net/mailman/listinfo/commotion-dev
> 

-- 
Dan Staples

Open Technology Institute
https://commotionwireless.net
OpenPGP key: http://disman.tl/pgp.asc
Fingerprint: 2480 095D 4B16 436F 35AB 7305 F670 74ED BD86 43A9
"
1685,Commotion-dev, Commotiuon Linux Installation,"Tue, 7 Jan 2014 10:48:25 -0600",-0600,Ben West,"I'd be interested to read about the new IP addressing scheme, too.


On Mon, Jan 6, 2014 at 11:21 AM, Dan Staples <
danstaples at opentechinstitute.org> wrote:

> Luigi,
>
> About the IP addresses, we have changed our IP addressing schema for the
> latest release. We are no longer using
> 5.x.x.x/101.x.x.x/102.x.x.x/103.x.x.x subnets. Instead, we are using the
> 100.64.0.0/10 address space for the mesh network, and 10.0.0.0/8 for the
> all client networks. I am hoping we'll put out a longer statement soon
> about the reasoning behind this decision and what it will mean in terms
> of compatibility.
>
> Dan
>
> On 01/04/2014 01:37 PM, Jordan McCarthy wrote:
> > Hi Luigi,
> >
> > Thanks for getting in touch!
> >
> > A.  On the commotion-router side of things, I suspect that the reason
> > the sysupgrade pathway didn't work is that a great deal of
> > under-the-hood wiring associated with configuration files changed
> > significantly, such that the configuration files that are retained
> > during a sysupgrade were deemed to be invalid by the newly-flashed OS.
> > Did you try to ""keep configuration files"" during the sysupgrade, by any
> > chance?
> >
> > B.  The problems you encountered during the Linux client installation
> > were entirely my fault: I just realized that the packages provided on
> > the website were severely out of date.  I've just updated the core
> > packages (commotion-linux-py, nm-dispatcher-olsrd, and
> > commotion-mesh-applet) to the versions that are known to be compatible
> > with R1 of commotion router.  I'll need to check in with a few other
> > folks to make sure that everything else is as up-to-date as possible,
> > but those three core packages should be enough to get you fully
> > connected to an R1 mesh.
> >
> > Thanks again for your interest in Commotion, and please let us know how
> > the rest of the install goes!
> >
> > < Jordan
> >
> > On Saturday, January 4, 2014 11:39 EST, LScop
> > <luigi.scopelliti at fastwebnet.it> wrote:
> >
> >
> >
> >
> >
> > Here some issues and questions after the ""Grumpy Cat"" upgrade.
> >
> > A)I have installed the new ""Grumpy Cat"" on my two of my Ubiquiti
> > Picostation M2.
> >
> > 1)I have used the sysupgrade.bin file by using the administrator
> > interface to upgrade the DR1.
> > The procedure didn't work on both devices.
> > 2)I have installed the firmware again using FactoryInstall.bin.
> > Everything works now.Great!!
> > Is there any explanation why the procedure 1) didn't work?
> >
> > B)Commotion LINUX.
> > Here the OS info installed on my Linux Laptop:3.8.0-19-generic
> > #29-Ubuntu SMP Wed Apr 17 18:16:28 UTC 2013 x86_64 x86_64 x86_64
> GNU/Linux
> >
> > I'm following the installing instructions in the README.txt file
> > As expexted I get some errors after the first command.
> >
> > After the command
> >
> > sudo apt-get install -f
> > I get the error
> >
> > /var/lib/dpkg/info/commotion-linux-py.postinst: line 2: pip: command not
> > found
> > dpkg: error processing commotion-linux-py (--configure):
> > subprocess installed post-installation script returned error exit status
> 127
> > Errors were encountered while processing:
> > commotion-linux-py
> > E: Sub-process /usr/bin/dpkg returned an error code (1)
> > Then,after the nxt command:
> >
> > sudo dpkg -i *.deb
> > I get the error:
> >
> > Setting up commotion-linux-py (0.2-1) ...
> > /var/lib/dpkg/info/commotion-linux-py.postinst: line 2: pip: command not
> > found
> > dpkg: error processing commotion-linux-py (--install):
> > subprocess installed post-installation scrip t returned error exit
> > status 127
> >
> >
> > Any suggestion?
> >
> > C)Mesh -IP assignement in R1""Grumpy Cat"".
> >
> > I see new mesh-IP assignments,like,for example 100.74.84.52 for the
> > router,where  84 and 52 are the 2 last decimal numbers of the mac
> > address.In the previous it was 5.x.x.x...
> >
> > 74??
> >
> > How this has impact on manual setting the  new  mesh IP-address on
> > devices like laptop,smartphone?
> >
> >
> > Thanks for your support
> >
> > Luigi
> >
> >
> >
> >
> > --
> > Jordan McCarthy
> > Open Technology Initiative | New America Foundation
> > My Public Key: C08D8042
> >
> >
> > _______________________________________________
> > Commotion-dev mailing list
> > Commotion-dev at lists.chambana.net
> > https://lists.chambana.net/mailman/listinfo/commotion-dev
> >
>
> --
> Dan Staples
>
> Open Technology Institute
> https://commotionwireless.net
> OpenPGP key: http://disman.tl/pgp.asc
> Fingerprint: 2480 095D 4B16 436F 35AB 7305 F670 74ED BD86 43A9
> _______________________________________________
> Commotion-dev mailing list
> Commotion-dev at lists.chambana.net
> https://lists.chambana.net/mailman/listinfo/commotion-dev
>
"
1686,Commotion-dev, testing TP-LINK routers,"Thu, 9 Jan 2014 14:19:03 -0200",-0200,Marcio Montenegro,"Hi all,
I am testing OTI commotion using TP-LINK WDR-4300 and WDR-3600 routers.
The last nightly build for TP-LINK was on December 27. Why no more builds ?
   Actually I can compile OTI cloning GIT repository.If I use my own build
I can have the last development updates ?
Thanks in advance,
Marcio
"
1687,Commotion-dev, testing TP-LINK routers,"Thu, 09 Jan 2014 11:30:26 -0500",-0500,Chris Ritzo,"Hi Marcio,
Thanks for the email. We'll get the nightly builds back soon.

If you're building from source from our git repos, the master branch of
commotion-feed should bring in all the most recent development:
https://github.com/opentechinstitute/commotion-feed

Also, we're testing on the WDR-4300s in the office and I just built a
1.0 image this morning. Would you like me to make it available to you?

Best,
Chris

On 01/09/2014 11:19 AM, Marcio Montenegro wrote:
> Hi all,
> I am testing OTI commotion using TP-LINK WDR-4300 and WDR-3600 routers.
> The last nightly build for TP-LINK was on December 27. Why no more builds ?
>    Actually I can compile OTI cloning GIT repository.If I use my own
> build I can have the last development updates ? 
> Thanks in advance,
> Marcio
> 
> 
> 
> _______________________________________________
> Commotion-dev mailing list
> Commotion-dev at lists.chambana.net
> https://lists.chambana.net/mailman/listinfo/commotion-dev
> 

-- 
Chris Ritzo
Technologist - Open Technology Institute
New America Foundation
"
1688,Commotion-dev, testing TP-LINK routers,"Thu, 9 Jan 2014 15:10:24 -0200",-0200,Marcio Montenegro,"Hi Chris,

Thank you for prompt reply.

I am using just openwrt git not commotion-feed git.

""git clone git://git.chambana.net/commotion/commotion-openwrt.git""

I don?t know how to merge  commotion-feed and commotion openwrt.

Hi Marcio,
Thanks for the email. We'll get the nightly builds back soon.

If you're building from source from our git repos, the master branch of
commotion-feed should bring in all the most recent development:
https://github.com/opentechinstitute/commotion-feed

Also, we're testing on the WDR-4300s in the office and I just built a
1.0 image this morning. Would you like me to make it available to you?

Yes please.

Best,
Chris

Best regards,
Marcio
"
1689,Commotion-dev, testing TP-LINK routers,"Thu, 09 Jan 2014 12:55:31 -0500",-0500,Chris Ritzo,"Hi Marcio,

First, you should start using the github.com source repos instead of
git.chambana.net as all of our development commits is happening there.

Pointing you to commotion-feed git was my mistake.  If you clone
https://github.com/opentechinstitute/commotion-router.git then run
setup.sh, it will bring in the openwrt build tree and add the commotion
specific feeds, you will be ready to build commotion-router.

See this part of the readme for more info:
https://github.com/opentechinstitute/commotion-router#installation

Let me know if you have more questions.

Best,
-Chris

On 01/09/2014 12:10 PM, Marcio Montenegro wrote:
> Hi Chris,
> 
> Thank you for prompt reply.
> 
> I am using just openwrt git not commotion-feed git.
> 
> ""git clone git://git.chambana.net/commotion/commotion-openwrt.git
> <http://git.chambana.net/commotion/commotion-openwrt.git>""
> 
> I don?t know how to merge  commotion-feed and commotion openwrt.
> 
> Hi Marcio,
> Thanks for the email. We'll get the nightly builds back soon.
> 
> If you're building from source from our git repos, the master branch of
> commotion-feed should bring in all the most recent development:
> https://github.com/opentechinstitute/commotion-feed
> 
> Also, we're testing on the WDR-4300s in the office and I just built a
> 1.0 image this morning. Would you like me to make it available to you?
> 
> Yes please.
> 
> Best,
> Chris
> 
> Best regards,
> Marcio 
> 
> 
> 
> _______________________________________________
> Commotion-dev mailing list
> Commotion-dev at lists.chambana.net
> https://lists.chambana.net/mailman/listinfo/commotion-dev
> 

-- 
Chris Ritzo
Technologist - Open Technology Institute
New America Foundation
"
1690,Commotion-dev, [Commotion-discuss] Brick or Nanostation?,"Fri, 10 Jan 2014 14:29:02 -0600",-0600,Ben West,"(Replying only on Commotion-dev listserv ...)

Triggering TFTP mode via the POE injector can be tricky, and is sometime
unreliable.  I'd recommend trying a different POE injector, if you have one
spare.  I've had the little reset button on older injectors just stop
working after some time.  Also, I believe only the UBNT 1Amp POE injectors
now have the reset button, not the stock injector provided with the
Nanostation.

Also, try holding down the reset button for longer, say 15 to 20 seconds.

Finally, if you are still not able to get the device into TFTP mode, you
can fashion your own reset switch by slicing cat5.  I believe the forum at
community.ubnt.com will have more info about that.



On Fri, Jan 10, 2014 at 1:59 PM, Anderson Walworth <anderson at alliedmedia.org
> wrote:

> Hey yesterday I upgraded a Nano on the roof of AMP (via ethernet/web
> interface)  from DR2 to 1.0 and then lost contact with it.
> I tried to go into TFTP mode (with the special reset button POE) held the
> button in for 8 seconds and still no ping. I also had something similar
> happen when upgrading another Nano from DR 1 to DR2. In both instances I
> only have access to the POE.
>
> I could better troubleshoot if I had physical access but the snow is
> making me wait.
> Just wondered if anyone experienced this before or if maybe someone quick
> remedy.
>
>
> Thanks!
>
> xoxo Anderson Walworth
>
> --
> Allied Media Projects
> Detroit Digital Justice Coalition
>
>
> _______________________________________________
> Commotion-discuss mailing list
> Commotion-discuss at lists.chambana.net
> https://lists.chambana.net/mailman/listinfo/commotion-discuss
>
"
1691,Commotion-dev, Commotion R1 Changes,"Fri, 10 Jan 2014 17:52:38 -0500",-0500,Dan Staples,"Developers and network maintainers might want to check out our blog post
on significant backwards-imcompatible changes in the R1 release:
https://commotionwireless.net/blog/commotion-r1-breaking-changes

In summary:
* Mesh IP addresses are now self-assigned in the 100.64.0.0/10 range and
all client subnets are bridged and assigned addresses in the 10.0.0.0/8
range
* default adhoc SSID and channel were removed
* adhoc BSSID is now deterministically generated based on hash of SSID
and channel

The blog post explains the details and reasoning behind these changes,
for those that are interested, and also includes info on upgrading
pre-R1 Commotion networks.

You can also find R1 release notes here:
https://commotionwireless.net/blog/commotion-router-v1-release-notes

cheers,
Dan

-- 
Dan Staples

Open Technology Institute
https://commotionwireless.net
OpenPGP key: http://disman.tl/pgp.asc
Fingerprint: 2480 095D 4B16 436F 35AB 7305 F670 74ED BD86 43A9
"
1692,Commotion-dev, Alternate mac80211 / hostapd from nbd for ath9k,"Tue, 14 Jan 2014 15:05:58 -0600",-0600,Ben West,"Howdy,

Giving you a heads up about a problem I've encountered on UBNT Nanostation
Loco M2, Nanostation M5, and TP-Link TL-MR3020.  WLAN Slovenija also saw it
on other TP-Link products.  Good chance Commotion-OpenWRT might be seeing
this driver freeze, too.

Under heavy load conditions, the ath9k driver bundled with recent versions
of AA may freeze, and all broadcast SSIDs disappear.  For me, this was also
causing additional weird side-effects like hostapd/wpa_supplicant crashing,
and olsrd complaining "" OLSR: sendto IPv4 Resource temporarily
unavailable,"" depending on which vif happened to lock up.

The lockup does appear to correlate well with heavy traffic load, i.e.
never see this problem on nodes with very light traffic.  Also, it's very
intermittent.  Nodes with a weekly reboot schedule might see this lockup a
couple times a month or so, in my experience.

This is the ticket filed in OpenWRT issue queue:
https://dev.openwrt.org/ticket/13681

This is the updated version of mac80211 and hostapd which nbd has offered
to address the driver lockup issue under AA.  I've reflashed my affected
problem nodes over the past couple weeks (AA r39154), and so far so good.
I presume these versions will eventually be backported into AA.
http://nbd.name/gitweb.cgi?p=aa-mac80211.git;a=summary

Finally, this is the script from WLAN Slovenija to detect the freeze and
trigger a reboot.  I've incorporated this script as-is in WasabiNet
firmware for Nanostation Loco M2s and the TL-MR3020s.
https://github.com/wlanslovenija/firmware-packages-opkg/blob/master/util/nodewatcher-watchdog/files/check_ath9k_freeze

For Nanostation M5s, the string the check for is ""qdepth: 0 ampdu-depth: 0
pending: 124 stopped: 1"".

-- 
Ben West
http://gowasabi.net
ben at gowasabi.net
314-246-9434
"
1693,Commotion-dev, Adding babeld and ipv6 support to Commotion,"Tue, 14 Jan 2014 20:59:33 -0500",-0500,Genevieve Bastien,"Hello Commotion Developers,

We have an eye on the Commotion firmware here at R?seau Libre Montreal. 
It's still missing a few things before we can adopt it:

* babeld support (and more generally possibility to select routing protocol)
* ipv6 support (ipv6 itself and their configuration by Commotion)

There's a team of 4th year computer engineering students who will do 
their final project on this topic. They are cc'ed to this email. The 
project started with the broad scope of ""Adapting the Commotion firmware 
to R?seau Libre's needs and fancies ;-)"". For now, those are 2 items we 
identified that we'd really like to have to accelerate our adoption. As 
the semester advances, some other elements of contribution may pop up. 
I'll be supervising them locally but they'll get the most benefit from 
interacting with the whole community.

I heard from Grady that babeld and ipv6 support were in your roadmap. 
Has any work or thinking been done on it yet? Any tips and advice for 
the team?

Thanks,
Genevi?ve

"
1694,Commotion-dev, Alternate mac80211 / hostapd from nbd for ath9k,"Thu, 16 Jan 2014 10:13:19 -0500",-0500,Dan Staples,"Thanks very much for this heads up, Ben! I can't say we've seen this
ourselves, but we also don't run a network with heavy load. If we get
reports about this from our testbed networks, we'll definitely look into
whether this is the cause.

Dan

On 01/14/2014 04:05 PM, Ben West wrote:
> Howdy,
> 
> Giving you a heads up about a problem I've encountered on UBNT
> Nanostation Loco M2, Nanostation M5, and TP-Link TL-MR3020.  WLAN
> Slovenija also saw it on other TP-Link products.  Good chance
> Commotion-OpenWRT might be seeing this driver freeze, too.
> 
> Under heavy load conditions, the ath9k driver bundled with recent
> versions of AA may freeze, and all broadcast SSIDs disappear.  For me,
> this was also causing additional weird side-effects like
> hostapd/wpa_supplicant crashing, and olsrd complaining ""OLSR: sendto
> IPv4 Resource temporarily unavailable,"" depending on which vif happened
> to lock up.
> 
> The lockup does appear to correlate well with heavy traffic load, i.e.
> never see this problem on nodes with very light traffic.  Also, it's
> very intermittent.  Nodes with a weekly reboot schedule might see this
> lockup a couple times a month or so, in my experience.
> 
> This is the ticket filed in OpenWRT issue queue:
> https://dev.openwrt.org/ticket/13681
> 
> This is the updated version of mac80211 and hostapd which nbd has
> offered to address the driver lockup issue under AA.  I've reflashed my
> affected problem nodes over the past couple weeks (AA r39154), and so
> far so good.  I presume these versions will eventually be backported
> into AA.
> http://nbd.name/gitweb.cgi?p=aa-mac80211.git;a=summary
> 
> Finally, this is the script from WLAN Slovenija to detect the freeze and
> trigger a reboot.  I've incorporated this script as-is in WasabiNet
> firmware for Nanostation Loco M2s and the TL-MR3020s.
> https://github.com/wlanslovenija/firmware-packages-opkg/blob/master/util/nodewatcher-watchdog/files/check_ath9k_freeze
> 
> For Nanostation M5s, the string the check for is ""qdepth: 0 ampdu-depth:
> 0 pending: 124 stopped: 1"".
> 
> -- 
> Ben West
> http://gowasabi.net
> ben at gowasabi.net <mailto:ben at gowasabi.net>
> 314-246-9434
> 
> 
> _______________________________________________
> Commotion-dev mailing list
> Commotion-dev at lists.chambana.net
> https://lists.chambana.net/mailman/listinfo/commotion-dev
> 

-- 
Dan Staples

Open Technology Institute
https://commotionwireless.net
OpenPGP key: http://disman.tl/pgp.asc
Fingerprint: 2480 095D 4B16 436F 35AB 7305 F670 74ED BD86 43A9
"
1695,Commotion-dev, Commotion R1 Changes,"Thu, 16 Jan 2014 09:20:08 -0600",-0600,Ben West,"All of the addressing changes look like great ideas.

Question: is the decision to address all clients within the address space
10.0.0.0/8 to, among other things, help make client roaming between nodes
easier?  I.e. implying that clients would be assigned the same IP
regardless of which node they associate with?

I noticed this item filed in the feature queue just now:
https://github.com/opentechinstitute/commotion-router/issues/87


On Fri, Jan 10, 2014 at 4:52 PM, Dan Staples <
danstaples at opentechinstitute.org> wrote:

> Developers and network maintainers might want to check out our blog post
> on significant backwards-imcompatible changes in the R1 release:
> https://commotionwireless.net/blog/commotion-r1-breaking-changes
>
> In summary:
> * Mesh IP addresses are now self-assigned in the 100.64.0.0/10 range and
> all client subnets are bridged and assigned addresses in the 10.0.0.0/8
> range
> * default adhoc SSID and channel were removed
> * adhoc BSSID is now deterministically generated based on hash of SSID
> and channel
>
> The blog post explains the details and reasoning behind these changes,
> for those that are interested, and also includes info on upgrading
> pre-R1 Commotion networks.
>
> You can also find R1 release notes here:
> https://commotionwireless.net/blog/commotion-router-v1-release-notes
>
> cheers,
> Dan
>
> --
> Dan Staples
>
> Open Technology Institute
> https://commotionwireless.net
> OpenPGP key: http://disman.tl/pgp.asc
> Fingerprint: 2480 095D 4B16 436F 35AB 7305 F670 74ED BD86 43A9
> _______________________________________________
> Commotion-dev mailing list
> Commotion-dev at lists.chambana.net
> https://lists.chambana.net/mailman/listinfo/commotion-dev
>
"
1696,Commotion-dev, Alternate mac80211 / hostapd from nbd for ath9k,"Thu, 16 Jan 2014 09:23:07 -0600",-0600,Ben West,"No problem.  Seemed like the driver freeze could be a rather difficult
problem to diagnose (it was for me).

If you find node which seems to have one of its vif's locked up like this,
but still have access to a local SSH/serial console, this command could
tell if you if the driver is indeed stuck:

cat /sys/kernel/debug/ieee80211/phy*/ath9k/queues


On Thu, Jan 16, 2014 at 9:13 AM, Dan Staples <
danstaples at opentechinstitute.org> wrote:

> Thanks very much for this heads up, Ben! I can't say we've seen this
> ourselves, but we also don't run a network with heavy load. If we get
> reports about this from our testbed networks, we'll definitely look into
> whether this is the cause.
>
> Dan
>
> On 01/14/2014 04:05 PM, Ben West wrote:
> > Howdy,
> >
> > Giving you a heads up about a problem I've encountered on UBNT
> > Nanostation Loco M2, Nanostation M5, and TP-Link TL-MR3020.  WLAN
> > Slovenija also saw it on other TP-Link products.  Good chance
> > Commotion-OpenWRT might be seeing this driver freeze, too.
> >
> > Under heavy load conditions, the ath9k driver bundled with recent
> > versions of AA may freeze, and all broadcast SSIDs disappear.  For me,
> > this was also causing additional weird side-effects like
> > hostapd/wpa_supplicant crashing, and olsrd complaining ""OLSR: sendto
> > IPv4 Resource temporarily unavailable,"" depending on which vif happened
> > to lock up.
> >
> > The lockup does appear to correlate well with heavy traffic load, i.e.
> > never see this problem on nodes with very light traffic.  Also, it's
> > very intermittent.  Nodes with a weekly reboot schedule might see this
> > lockup a couple times a month or so, in my experience.
> >
> > This is the ticket filed in OpenWRT issue queue:
> > https://dev.openwrt.org/ticket/13681
> >
> > This is the updated version of mac80211 and hostapd which nbd has
> > offered to address the driver lockup issue under AA.  I've reflashed my
> > affected problem nodes over the past couple weeks (AA r39154), and so
> > far so good.  I presume these versions will eventually be backported
> > into AA.
> > http://nbd.name/gitweb.cgi?p=aa-mac80211.git;a=summary
> >
> > Finally, this is the script from WLAN Slovenija to detect the freeze and
> > trigger a reboot.  I've incorporated this script as-is in WasabiNet
> > firmware for Nanostation Loco M2s and the TL-MR3020s.
> >
> https://github.com/wlanslovenija/firmware-packages-opkg/blob/master/util/nodewatcher-watchdog/files/check_ath9k_freeze
> >
> > For Nanostation M5s, the string the check for is ""qdepth: 0 ampdu-depth:
> > 0 pending: 124 stopped: 1"".
> >
> > --
> > Ben West
> > http://gowasabi.net
> > ben at gowasabi.net <mailto:ben at gowasabi.net>
> > 314-246-9434
> >
> >
> > _______________________________________________
> > Commotion-dev mailing list
> > Commotion-dev at lists.chambana.net
> > https://lists.chambana.net/mailman/listinfo/commotion-dev
> >
>
> --
> Dan Staples
>
> Open Technology Institute
> https://commotionwireless.net
> OpenPGP key: http://disman.tl/pgp.asc
> Fingerprint: 2480 095D 4B16 436F 35AB 7305 F670 74ED BD86 43A9
> _______________________________________________
> Commotion-dev mailing list
> Commotion-dev at lists.chambana.net
> https://lists.chambana.net/mailman/listinfo/commotion-dev
>
"
1697,Commotion-dev, Commotion Android on Nexus 7?,"Thu, 16 Jan 2014 10:40:02 -0500",-0500,Nathan of Guardian,"
Sorry if I have missed this, but what is the state of testing of the
Commotion app on Nexus 7 devices, both the original and 2013 editions,
and with/without a custom ROM?

Thanks!

"
1698,Commotion-dev, Commotion R1 Changes,"Thu, 16 Jan 2014 12:05:34 -0500",-0500,Dan Staples,"We actually hadn't considered that since the access point handover is a
pretty large project for down the line. It was more for the sake of
simplicity, IIRC.

Handover aside, I also don't think retaining a client IP address would
be possible without some restructuring, since the 10.0.0.0/8 client
subnet on each router is chosen to be unique (in order to avoid
collision), i.e. the router assigns client IP addresses on the
10.a.b.0/24 range, where a and b correspond to the last two bytes of the
router's MAC address.

But it's still worth considering. Do you think retaining client IP
addresses would provide some benefits, as opposed to just getting a new
IP address when switching APs?

Dan

On 01/16/2014 10:20 AM, Ben West wrote:
> All of the addressing changes look like great ideas.
> 
> Question: is the decision to address all clients within the address
> space 10.0.0.0/8 <http://10.0.0.0/8> to, among other things, help make
> client roaming between nodes easier?  I.e. implying that clients would
> be assigned the same IP regardless of which node they associate with?
> 
> I noticed this item filed in the feature queue just now:
> https://github.com/opentechinstitute/commotion-router/issues/87
> 
> 
> On Fri, Jan 10, 2014 at 4:52 PM, Dan Staples
> <danstaples at opentechinstitute.org
> <mailto:danstaples at opentechinstitute.org"
1699,Commotion-dev, Commotion R1 Changes,"Thu, 16 Jan 2014 12:04:13 -0600",-0600,Ben West,"Issuing clients a unique IP in the 10.x.x.x space, regardless of the
specific node associated with, could possibly let client roaming occur more
smoothly.  Giving clients their own unique IPs seems like it would be the
logical extension of bridging all client subnets, right?  Likewise, this
could work toward eliminating some of the layers of NAT within the mesh and
lay groundwork for NAT-free ipv6?

At any rate, issuing clients unique IPs is actually what is done in many
conventional hotspots deployments with multiple APs, whereby the APs (all
broadcasting the SSID) are wired back to a central router that issues DHCP
leases to all clients.  That is, Ubiquiti UniFi operates like this, and I
think even the batman-adv routing in Cloudtrax nodes use may also do this
now, too.

For meshing nodes, some non-trivial parts of smooth client roaming would be
factors like ...

0. When a client roams from node A to node B, how to reliably detect that
event and react to it immediately.    hostapd does write to syslog when a
new client associates.  Nodes could poll hostapd via syslog or via wpa_cli
to discover when a new client associates.  Or there is possibly a more
elegant way to trigger an action upon new client association which I
haven't found yet.

1. When a client roams from node A to node B, while retaining client IP,
how to inform node B to begin routing traffic from that client.

2. When a client roams from node A to node B, how to inform node B's
captive portal to *not* redirect the client to the splash page.  Similar to
#1, this could also be accomplished with nodes sharing the list of active
client MACs (perhaps also with an incrementing session time for each
client), so that incoming roaming clients don't get bounced back to the
splash page.  Or, such a list could be used so that every client *does* get
bounced back to the splash page, regardless of how many nodes he has roamed
to, after some operator-defined timeout has elapsed.



On Thu, Jan 16, 2014 at 11:05 AM, Dan Staples <
danstaples at opentechinstitute.org> wrote:

> We actually hadn't considered that since the access point handover is a
> pretty large project for down the line. It was more for the sake of
> simplicity, IIRC.
>
> Handover aside, I also don't think retaining a client IP address would
> be possible without some restructuring, since the 10.0.0.0/8 client
> subnet on each router is chosen to be unique (in order to avoid
> collision), i.e. the router assigns client IP addresses on the
> 10.a.b.0/24 range, where a and b correspond to the last two bytes of the
> router's MAC address.
>
> But it's still worth considering. Do you think retaining client IP
> addresses would provide some benefits, as opposed to just getting a new
> IP address when switching APs?
>
> Dan
>
> On 01/16/2014 10:20 AM, Ben West wrote:
> > All of the addressing changes look like great ideas.
> >
> > Question: is the decision to address all clients within the address
> > space 10.0.0.0/8 <http://10.0.0.0/8> to, among other things, help make
> > client roaming between nodes easier?  I.e. implying that clients would
> > be assigned the same IP regardless of which node they associate with?
> >
> > I noticed this item filed in the feature queue just now:
> > https://github.com/opentechinstitute/commotion-router/issues/87
> >
> >
> > On Fri, Jan 10, 2014 at 4:52 PM, Dan Staples
> > <danstaples at opentechinstitute.org
> > <mailto:danstaples at opentechinstitute.org"
1700,Commotion-dev, Adding babeld and ipv6 support to Commotion,"Thu, 16 Jan 2014 14:08:42 -0500",-0500,Josh King,"Hi Genevieve,

That's really great that you and your team are interested! We've
definitely done a lot of thinking about how to implement this. Let me
split this up into babeld and IPv6, and outline some of the moving pieces:

Babeld:
There are four main components to how we currently interact with OLSRd,
and these would presumably need to be adapted to work with either Babel
or OLSRd.
* commotiond provides a mechanism for access to and manipulation of
profiles, which are intended to describe the configuration of a network.
Presumably, we would need to add a field to the profiles that would
designate which routing daemon we're using. This is pretty trivial, and
I should have time to do this within the next week or two.
* luci-commotion, or more specifically the setup wizard, provides the
web interface for people to configure their devices. This would need to
be adapted to provide options for selecting a routing mechanism for the
network. This should also be pretty easy, and I'll talk to our LuCI
developers about where this would make sense on our roadmap.
* The actual configuration of OLSRd is mostly handled by a hotplug
script, which is run whenever a network interface is brought up or down.
It automatically changes OLSRd's configuration file for anything that
might change based on options entered by the user in the setup wizard.
For OLSRd, that is specifying Interfaces, HNAs, and some of the
configuration for our own plugins. We are not super familiar with Babel,
so this could be a good entry point for someone to work on getting Babel
working with Commotion.
* The last element is duplicating the functionality for which we have
written custom OLSRd plugins on babeld. We've written the olsr-mdp
plugin, which signs routing traffic using a serval key supplied by
commotiond, and the olsr-dnssd plugin that propagates multicast DNS
traffic in an OLSR mesh. This is definitely the most difficult, but is
also not necessarily a prerequisite for most operation (we could simply
say that those features are not supported yet in conjunction with babel).

IPv6:
Fortunately since we moved up to a newer version of OpenWRT Attitude
Adjustment for version 1.0, it is now much easier to add native IPv6
support to the underlying OS. One just has to add the ipv6-support
package to OpenWRT (which I almost did before the v1 release, but held
off in order to make sure that we weren't introducing other problems).
However, some components would need to be updated to properly utilize this.
* commotiond, as above, would need to be updated with the appropriate
configuration fields. This is pretty simple.
* luci-commotion, as above, would need to provide configuration options
for IPv6.
* The OLSRd hotplug script would need to be updated to deal with IPv6
options. Notably, OLSRd can't handle running both an IPv4 and IPv6 stack
at the same time, so we'd need to come up with some way of handling this
for nodes that have more than one mesh interface. We also may need to
figure out how to support NIIT, which OLSRd uses in order to tunnel IPv4
client traffic over an IPv6 backbone.

So, that's a high-level summary of what it seems like it would take. A
lot of these components are relatively easy to tackle, and are mostly a
matter of experimentation. Since we're not as familiar with babeld,
we're looking forward to working with you all on getting this
implemented in Commotion.

On 01/14/2014 08:59 PM, Genevieve Bastien wrote:
> Hello Commotion Developers,
> 
> We have an eye on the Commotion firmware here at R?seau Libre Montreal.
> It's still missing a few things before we can adopt it:
> 
> * babeld support (and more generally possibility to select routing
> protocol)
> * ipv6 support (ipv6 itself and their configuration by Commotion)
> 
> There's a team of 4th year computer engineering students who will do
> their final project on this topic. They are cc'ed to this email. The
> project started with the broad scope of ""Adapting the Commotion firmware
> to R?seau Libre's needs and fancies ;-)"". For now, those are 2 items we
> identified that we'd really like to have to accelerate our adoption. As
> the semester advances, some other elements of contribution may pop up.
> I'll be supervising them locally but they'll get the most benefit from
> interacting with the whole community.
> 
> I heard from Grady that babeld and ipv6 support were in your roadmap.
> Has any work or thinking been done on it yet? Any tips and advice for
> the team?
> 
> Thanks,
> Genevi?ve
> 
> _______________________________________________
> Commotion-dev mailing list
> Commotion-dev at lists.chambana.net
> https://lists.chambana.net/mailman/listinfo/commotion-dev
> 

-- 
Josh King
Lead Technologist
The Open Technology Institute

"
1701,Commotion-dev, Commotion R1 Changes,"Thu, 16 Jan 2014 14:15:40 -0500",-0500,Dan Staples,"Moving to dev list only, since discussion is getting technical.

When I was doing some brief research on wifi handover a while ago, it
seemed the most common way of doing it used some 802.11 extensions
(don't remember the letters), and a central RADIUS server for
coordinating clients and handoffs between APs. So that seems like a way
to do it.

Another alternative I was looking at is called SMesh
(http://www.smesh.org/). It also does coordination of client handover,
but using a multicast group instead of a central coordinating node. The
details are here:
http://www.cnds.jhu.edu/pub/papers/smesh_tocs_accepted_version.pdf. I
think it would be worth experimenting with this.

Although I have been told that Batman-Adv does seamless client handover
due to it being a layer 2 mesh routing protocol. Haven't tried that
myself though.


On 01/16/2014 01:04 PM, Ben West wrote:
> Issuing clients a unique IP in the 10.x.x.x space, regardless of the
> specific node associated with, could possibly let client roaming occur
> more smoothly.  Giving clients their own unique IPs seems like it would
> be the logical extension of bridging all client subnets, right? 
> Likewise, this could work toward eliminating some of the layers of NAT
> within the mesh and lay groundwork for NAT-free ipv6?
> 
> At any rate, issuing clients unique IPs is actually what is done in many
> conventional hotspots deployments with multiple APs, whereby the APs
> (all broadcasting the SSID) are wired back to a central router that
> issues DHCP leases to all clients.  That is, Ubiquiti UniFi operates
> like this, and I think even the batman-adv routing in Cloudtrax nodes
> use may also do this now, too.
> 
> For meshing nodes, some non-trivial parts of smooth client roaming would
> be factors like ...
> 
> 0. When a client roams from node A to node B, how to reliably detect
> that event and react to it immediately.    hostapd does write to syslog
> when a new client associates.  Nodes could poll hostapd via syslog or
> via wpa_cli to discover when a new client associates.  Or there is
> possibly a more elegant way to trigger an action upon new client
> association which I haven't found yet.
> 
> 1. When a client roams from node A to node B, while retaining client IP,
> how to inform node B to begin routing traffic from that client.
> 
> 2. When a client roams from node A to node B, how to inform node B's
> captive portal to /not/ redirect the client to the splash page.  Similar
> to #1, this could also be accomplished with nodes sharing the list of
> active client MACs (perhaps also with an incrementing session time for
> each client), so that incoming roaming clients don't get bounced back to
> the splash page.  Or, such a list could be used so that every client
> /does/ get bounced back to the splash page, regardless of how many nodes
> he has roamed to, after some operator-defined timeout has elapsed.
> 
> 
> 
> On Thu, Jan 16, 2014 at 11:05 AM, Dan Staples
> <danstaples at opentechinstitute.org
> <mailto:danstaples at opentechinstitute.org"
1702,Commotion-dev, Commotion R1 Changes,"Thu, 16 Jan 2014 14:19:21 -0600",-0600,Ben West,"Sorry for cluttering the discuss listserv with technobabble!

A RADIUS server would indeed help play the role of coordinating clients
across all APs/hotspots in a mesh.  It does add a fair bit of complexity,
along with a central point of control that a bit adverse to meshing
topology.  I looking more at simple distributed methods to assist client
roaming (e.g. sharing lists of client MACs/ lease IPs between nodes).  For
a particular client connected to a particular node, it's probably safe to
assume that only that node's immediate neighbors need to know about that
client's potential to roam.

Since the decision about whether to roam is made entirely by the client,
just having several nodes/APs broadcast the same SSID, even across
different channels, should be enough for many clients to roam.  This mode
of operation (i.e. all nodes broadcast the same SSID for their public AP),
was explicitly encouraged with the old ROBIN firmware, although it was
acknowledged that some clients might not be intelligent enough to
automatically refresh their DHCP lease upon association with the new node.
Having clients issued a unique IP in their DHCP lease regardless of node
would at least remove that problem.

Also, the UniFi java-based controller pulls off client roaming, without
needing a central authentication arbiter like a RADIUS server, by depending
on a central DHCP server and also by having APs broadcast the same SSID.
However, since the UniFi firmware is closed source, it could also be using
some fancy 802.11 extensions to assist roaming.

The SMesh project looks like it wants to take seamless roaming a step
further.  I.e. in addition to the layer 2 / layer 3 handoff we're
discussing, also preserve a client's open connections.  Cool!


On Thu, Jan 16, 2014 at 1:15 PM, Dan Staples <
danstaples at opentechinstitute.org> wrote:

> Moving to dev list only, since discussion is getting technical.
>
> When I was doing some brief research on wifi handover a while ago, it
> seemed the most common way of doing it used some 802.11 extensions
> (don't remember the letters), and a central RADIUS server for
> coordinating clients and handoffs between APs. So that seems like a way
> to do it.
>
> Another alternative I was looking at is called SMesh
> (http://www.smesh.org/). It also does coordination of client handover,
> but using a multicast group instead of a central coordinating node. The
> details are here:
> http://www.cnds.jhu.edu/pub/papers/smesh_tocs_accepted_version.pdf. I
> think it would be worth experimenting with this.
>
> Although I have been told that Batman-Adv does seamless client handover
> due to it being a layer 2 mesh routing protocol. Haven't tried that
> myself though.
>
>
> On 01/16/2014 01:04 PM, Ben West wrote:
> > Issuing clients a unique IP in the 10.x.x.x space, regardless of the
> > specific node associated with, could possibly let client roaming occur
> > more smoothly.  Giving clients their own unique IPs seems like it would
> > be the logical extension of bridging all client subnets, right?
> > Likewise, this could work toward eliminating some of the layers of NAT
> > within the mesh and lay groundwork for NAT-free ipv6?
> >
> > At any rate, issuing clients unique IPs is actually what is done in many
> > conventional hotspots deployments with multiple APs, whereby the APs
> > (all broadcasting the SSID) are wired back to a central router that
> > issues DHCP leases to all clients.  That is, Ubiquiti UniFi operates
> > like this, and I think even the batman-adv routing in Cloudtrax nodes
> > use may also do this now, too.
> >
> > For meshing nodes, some non-trivial parts of smooth client roaming would
> > be factors like ...
> >
> > 0. When a client roams from node A to node B, how to reliably detect
> > that event and react to it immediately.    hostapd does write to syslog
> > when a new client associates.  Nodes could poll hostapd via syslog or
> > via wpa_cli to discover when a new client associates.  Or there is
> > possibly a more elegant way to trigger an action upon new client
> > association which I haven't found yet.
> >
> > 1. When a client roams from node A to node B, while retaining client IP,
> > how to inform node B to begin routing traffic from that client.
> >
> > 2. When a client roams from node A to node B, how to inform node B's
> > captive portal to /not/ redirect the client to the splash page.  Similar
> > to #1, this could also be accomplished with nodes sharing the list of
> > active client MACs (perhaps also with an incrementing session time for
> > each client), so that incoming roaming clients don't get bounced back to
> > the splash page.  Or, such a list could be used so that every client
> > /does/ get bounced back to the splash page, regardless of how many nodes
> > he has roamed to, after some operator-defined timeout has elapsed.
> >
> >
> >
> > On Thu, Jan 16, 2014 at 11:05 AM, Dan Staples
> > <danstaples at opentechinstitute.org
> > <mailto:danstaples at opentechinstitute.org"
1703,Commotion-dev, Commotion R1 Changes,"Thu, 16 Jan 2014 15:29:31 -0500",-0500,Dan Staples,"Inline:

On 01/16/2014 03:19 PM, Ben West wrote:
> Sorry for cluttering the discuss listserv with technobabble!
> 
> A RADIUS server would indeed help play the role of coordinating clients
> across all APs/hotspots in a mesh.  It does add a fair bit of
> complexity, along with a central point of control that a bit adverse to
> meshing topology.  I looking more at simple distributed methods to
> assist client roaming (e.g. sharing lists of client MACs/ lease IPs
> between nodes).  For a particular client connected to a particular node,
> it's probably safe to assume that only that node's immediate neighbors
> need to know about that client's potential to roam.
> 
> Since the decision about whether to roam is made entirely by the client,
> just having several nodes/APs broadcast the same SSID, even across
> different channels, should be enough for many clients to roam.  This
> mode of operation (i.e. all nodes broadcast the same SSID for their
> public AP), was explicitly encouraged with the old ROBIN firmware,
> although it was acknowledged that some clients might not be intelligent
> enough to automatically refresh their DHCP lease upon association with
> the new node.  Having clients issued a unique IP in their DHCP lease
> regardless of node would at least remove that problem.

I'm not following, how would unique client IP addresses remove the
problem? The way SMesh does handoff is by setting a 2sec DHCP lease
time, thus causing the client to renew constantly to the nearest AP. The
nice thing is that doesn't require any changes on the client
side...clever, in my opinion :)

> 
> Also, the UniFi java-based controller pulls off client roaming, without
> needing a central authentication arbiter like a RADIUS server, by
> depending on a central DHCP server and also by having APs broadcast the
> same SSID.  However, since the UniFi firmware is closed source, it could
> also be using some fancy 802.11 extensions to assist roaming.
> 
> The SMesh project looks like it wants to take seamless roaming a step
> further.  I.e. in addition to the layer 2 / layer 3 handoff we're
> discussing, also preserve a client's open connections.  Cool!
> 
> 
> On Thu, Jan 16, 2014 at 1:15 PM, Dan Staples
> <danstaples at opentechinstitute.org
> <mailto:danstaples at opentechinstitute.org"
1704,Commotion-dev, Commotion R1 Changes,"Thu, 16 Jan 2014 14:38:27 -0600",-0600,Ben West,"Inline!

On Thu, Jan 16, 2014 at 2:29 PM, Dan Staples <
danstaples at opentechinstitute.org> wrote:

> Inline:
>
> On 01/16/2014 03:19 PM, Ben West wrote:
> > Sorry for cluttering the discuss listserv with technobabble!
> >
> > A RADIUS server would indeed help play the role of coordinating clients
> > across all APs/hotspots in a mesh.  It does add a fair bit of
> > complexity, along with a central point of control that a bit adverse to
> > meshing topology.  I looking more at simple distributed methods to
> > assist client roaming (e.g. sharing lists of client MACs/ lease IPs
> > between nodes).  For a particular client connected to a particular node,
> > it's probably safe to assume that only that node's immediate neighbors
> > need to know about that client's potential to roam.
> >
> > Since the decision about whether to roam is made entirely by the client,
> > just having several nodes/APs broadcast the same SSID, even across
> > different channels, should be enough for many clients to roam.  This
> > mode of operation (i.e. all nodes broadcast the same SSID for their
> > public AP), was explicitly encouraged with the old ROBIN firmware,
> > although it was acknowledged that some clients might not be intelligent
> > enough to automatically refresh their DHCP lease upon association with
> > the new node.  Having clients issued a unique IP in their DHCP lease
> > regardless of node would at least remove that problem.
>
> I'm not following, how would unique client IP addresses remove the
> problem? The way SMesh does handoff is by setting a 2sec DHCP lease
> time, thus causing the client to renew constantly to the nearest AP. The
> nice thing is that doesn't require any changes on the client
> side...clever, in my opinion :)
>
>
Sorry didn't see the detail about a 2sec DHCP lease in the SMesh paper,
just the language about preserving open connections across roaming!
(Didn't read far enough...)

 IMO, such a short DHCP lease would help smooth roaming, but I'm curious
about the extent of overhead it creates.  That would have dnsmasq (or
equivalent) working continuously on the node, using resident memory to do
so.  Likewise, it would send out a fair amount of traffic over the channel
just to manage the DHCP leases.  This may not work well on
low-quality/noisy connections, e.g. ~1Mbit/s transfer rates, with all the
DHCP overhead displacing client traffic.


> >
> > Also, the UniFi java-based controller pulls off client roaming, without
> > needing a central authentication arbiter like a RADIUS server, by
> > depending on a central DHCP server and also by having APs broadcast the
> > same SSID.  However, since the UniFi firmware is closed source, it could
> > also be using some fancy 802.11 extensions to assist roaming.
> >
> > The SMesh project looks like it wants to take seamless roaming a step
> > further.  I.e. in addition to the layer 2 / layer 3 handoff we're
> > discussing, also preserve a client's open connections.  Cool!
> >
> >
> > On Thu, Jan 16, 2014 at 1:15 PM, Dan Staples
> > <danstaples at opentechinstitute.org
> > <mailto:danstaples at opentechinstitute.org"
1705,Commotion-dev, Commotion R1 Changes,"Thu, 16 Jan 2014 16:21:00 -0500",-0500,Dan Staples,"Good point. They use WRT54G as their testing hardware, so at least a
router of that capacity can handle it. But whether it can handle that
*plus* all the stuff we run on Commotion...well, we'll just have to see :)

On 01/16/2014 03:38 PM, Ben West wrote:
> Inline!
> 
> On Thu, Jan 16, 2014 at 2:29 PM, Dan Staples
> <danstaples at opentechinstitute.org
> <mailto:danstaples at opentechinstitute.org"
1706,Commotion-dev, =?utf-8?q?Commotion_Android_on_Nexus_7=3F?=,"Thu, 16 Jan 2014 16:55:14 -0500",-0500,Will Hawkins,"Hello Nathan!

We support the Nexus 7 running CM nightlies w/o requiring root on the device. The support for this is in our CM branch. Builds of that are available at http://downloads.commotionwireless.net/android/. You can also build from source at https://github.com/opentechinstitute/commotion-android using the cm branch.

Documentation for that release is still thin and there are several caveats (most importantly, IBSS-RSN is not supported and requires olsrd to run on a non-standard, non-privileged port [5001]).

Please let me know what issues you find!

Will

On Thursday, January 16, 2014 10:40 EST, Nathan of Guardian <nathan at guardianproject.info> wrote: 
 
> 
> Sorry if I have missed this, but what is the state of testing of the
> Commotion app on Nexus 7 devices, both the original and 2013 editions,
> and with/without a custom ROM?
> 
> Thanks!
> 
> _______________________________________________
> Commotion-dev mailing list
> Commotion-dev at lists.chambana.net
> https://lists.chambana.net/mailman/listinfo/commotion-dev
> 
 
 
 
 


"
1707,Commotion-dev, Adding babeld and ipv6 support to Commotion,"Thu, 16 Jan 2014 20:05:12 -0500",-0500,Genevieve Bastien,"Thanks Josh for this very detailed answer!  That's a great starting 
point for the team. We'll keep in touch as the semester advances.

Genevi?ve

On 14-01-16 02:08 PM, Josh King wrote:
> Hi Genevieve,
>
> That's really great that you and your team are interested! We've
> definitely done a lot of thinking about how to implement this. Let me
> split this up into babeld and IPv6, and outline some of the moving pieces:
>
> Babeld:
> There are four main components to how we currently interact with OLSRd,
> and these would presumably need to be adapted to work with either Babel
> or OLSRd.
> * commotiond provides a mechanism for access to and manipulation of
> profiles, which are intended to describe the configuration of a network.
> Presumably, we would need to add a field to the profiles that would
> designate which routing daemon we're using. This is pretty trivial, and
> I should have time to do this within the next week or two.
> * luci-commotion, or more specifically the setup wizard, provides the
> web interface for people to configure their devices. This would need to
> be adapted to provide options for selecting a routing mechanism for the
> network. This should also be pretty easy, and I'll talk to our LuCI
> developers about where this would make sense on our roadmap.
> * The actual configuration of OLSRd is mostly handled by a hotplug
> script, which is run whenever a network interface is brought up or down.
> It automatically changes OLSRd's configuration file for anything that
> might change based on options entered by the user in the setup wizard.
> For OLSRd, that is specifying Interfaces, HNAs, and some of the
> configuration for our own plugins. We are not super familiar with Babel,
> so this could be a good entry point for someone to work on getting Babel
> working with Commotion.
> * The last element is duplicating the functionality for which we have
> written custom OLSRd plugins on babeld. We've written the olsr-mdp
> plugin, which signs routing traffic using a serval key supplied by
> commotiond, and the olsr-dnssd plugin that propagates multicast DNS
> traffic in an OLSR mesh. This is definitely the most difficult, but is
> also not necessarily a prerequisite for most operation (we could simply
> say that those features are not supported yet in conjunction with babel).
>
> IPv6:
> Fortunately since we moved up to a newer version of OpenWRT Attitude
> Adjustment for version 1.0, it is now much easier to add native IPv6
> support to the underlying OS. One just has to add the ipv6-support
> package to OpenWRT (which I almost did before the v1 release, but held
> off in order to make sure that we weren't introducing other problems).
> However, some components would need to be updated to properly utilize this.
> * commotiond, as above, would need to be updated with the appropriate
> configuration fields. This is pretty simple.
> * luci-commotion, as above, would need to provide configuration options
> for IPv6.
> * The OLSRd hotplug script would need to be updated to deal with IPv6
> options. Notably, OLSRd can't handle running both an IPv4 and IPv6 stack
> at the same time, so we'd need to come up with some way of handling this
> for nodes that have more than one mesh interface. We also may need to
> figure out how to support NIIT, which OLSRd uses in order to tunnel IPv4
> client traffic over an IPv6 backbone.
>
> So, that's a high-level summary of what it seems like it would take. A
> lot of these components are relatively easy to tackle, and are mostly a
> matter of experimentation. Since we're not as familiar with babeld,
> we're looking forward to working with you all on getting this
> implemented in Commotion.
>
> On 01/14/2014 08:59 PM, Genevieve Bastien wrote:
"
1708,Commotion-dev, Commotion R1 Changes,"Thu, 16 Jan 2014 19:59:23 -0500",-0500,Josh King,"Well, it's not just a problem of addressing. The various subnets of
10.0.0.0/8 that are generated by the nodes also are used for the HNA
announcements of OLSRd. If each client gets its own unique IP, other
parts of the network won't be able to find it unless each node
dynamically updates its list of HNAs to include every single address
individually. Alternatively, we could change the client networks so that
they're just NAT'd behind their nodes by default, but then the IP is
still effectively changing as far as the network is concerned, it's just
that it's the NAT's IP that's shifting rather than the client's own, so
that doesn't buy us anything. In order to do this properly, we would
need to do something like tunneling the original traffic from the
initial node to the new node when a client roams. Having a unified
client IP space might make this easier or might not; depends on how it's
implemented. Mobile IPv6 might get at this.

On Thu 16 Jan 2014 04:21:00 PM EST, Dan Staples wrote:
> Good point. They use WRT54G as their testing hardware, so at least a
> router of that capacity can handle it. But whether it can handle that
> *plus* all the stuff we run on Commotion...well, we'll just have to see :)
>
> On 01/16/2014 03:38 PM, Ben West wrote:
"
1709,Commotion-dev, commotion on tp-mr3020 and other low resource,"Mon, 20 Jan 2014 11:31:01 -0500",-0500,Chris Ritzo,"Greetings commotion-devs:

I've been working on proof of concept instructions for running Commotion
Router on lower resource devices with a USB port using OpenWRT's
extroot, in particular testing on the TP Link MR3020.

If you have comment on improving this test plan, please feel free to
weigh in. In progress documentation is here:
https://wiki.commotionwireless.net/doku.php?id=usb_extroot_installation

I've run into a snag which I'm hoping someone might have some ideas
about resolving. I get dependency errors when attempting to install
Commotion packages via opkg:
https://wiki.commotionwireless.net/doku.php?id=usb_extroot_installation&#install_commotion_packages_on_the_router

I assume from this error that the stock OpenWRT image needs to have
kernel (= 3.3.8-1-ccd7796d0ebc3a2e79984d7dd2214393)

At this point I am working on modifying our build server script to
attempt building an OpenWRT image without Commotion packages but with
the kernel version we're using when we build with Commotion.

Any ideas appreciated!

-- 
Chris Ritzo
Technologist - Open Technology Institute
New America Foundation
"
1710,Commotion-dev, commotion on tp-mr3020 and other low resource,"Mon, 20 Jan 2014 11:20:51 -0600",-0600,Ben West,"I've been running TL-MR3020's and TL-WR703N's with moderate success as very
lightweight WasabiNet nodes, albeit not yet with any additional firmware
loaded via USB port.  Just been squeezing everything into 4MBytes.

I believe opkg errors you're seeing are from the commotiond packages, etc,
not being from the same compile run as the stock AA images you're initially
flashing onto the device.  It should work if you flash the device with a
pared-down AA image from the same compile run as commotiond.

I'm attaching the .config I've used for compiling WasabiNet firmware (based
on AA r39154) for TL-MR3020.  This produces an image just about 300kbytes
smaller than the 4MB flash (done partly via the ""-funit-at-a-time"" compile
optimization), although it excludes luci and any USB support.  This config
also depends on modded versions of libcyassl and libcurl, to permit curl to
operate with the smaller libcyassl library instead of libopenssl.

Since Commotion-OpenWRT doesn't use it, you should be fine to disable
libcurl/curl and then re-enable USB support at whatnot, along with whatever
other pruning is needed to get the image to fit in 4Mbytes.

A couple details I can share about experience with the little TP-Link
units, after having them in regular use for several months now:

1. The popular instructions linked to on the OpenWRT wiki for adding an
external antenna seem to leave the devices badly susceptible to ESD
damage.  I've seen 2 MR3020's mysteriously lose much of their TX power
after lightning storms passed over (even though the units were inside).
This tutorial from a very diligent Australian appears to get it right, by
attaching the antenna pigtail so as not to bypass filter / matching
circuits that could protect the radio chip from surges.  I'm awaiting the
next strong thunderstorm to see if this has any improvement in ESD
protection.
https://forum.openwrt.org/viewtopic.php?id=46543
https://app.box.com/s/cispknq8b9zgog8k5vxn

2. In lieu of external antenna mods possibly not being viable for MR3020 or
WR703N due to ESD vulnerability, I'm hoping to soon check out the TL-MR3220
and/or TL-MR3420.  These units have similar specs, 32MBytes RAM, 4MByte
flash, USB, but they also include stock external antennas *and* LAN ports.
Amazon sells the MR3220 for $30, and Musti claims it could be had cheaper
elsewhere.



On Mon, Jan 20, 2014 at 10:31 AM, Chris Ritzo
<critzo at opentechinstitute.org>wrote:

> Greetings commotion-devs:
>
> I've been working on proof of concept instructions for running Commotion
> Router on lower resource devices with a USB port using OpenWRT's
> extroot, in particular testing on the TP Link MR3020.
>
> If you have comment on improving this test plan, please feel free to
> weigh in. In progress documentation is here:
> https://wiki.commotionwireless.net/doku.php?id=usb_extroot_installation
>
> I've run into a snag which I'm hoping someone might have some ideas
> about resolving. I get dependency errors when attempting to install
> Commotion packages via opkg:
>
> https://wiki.commotionwireless.net/doku.php?id=usb_extroot_installation&#install_commotion_packages_on_the_router
>
> I assume from this error that the stock OpenWRT image needs to have
> kernel (= 3.3.8-1-ccd7796d0ebc3a2e79984d7dd2214393)
>
> At this point I am working on modifying our build server script to
> attempt building an OpenWRT image without Commotion packages but with
> the kernel version we're using when we build with Commotion.
>
> Any ideas appreciated!
>
> --
> Chris Ritzo
> Technologist - Open Technology Institute
> New America Foundation
> _______________________________________________
> Commotion-dev mailing list
> Commotion-dev at lists.chambana.net
> https://lists.chambana.net/mailman/listinfo/commotion-dev
>
"
1711,Commotion-dev, Commotion Android on Nexus 7?,"Mon, 20 Jan 2014 16:55:50 -0500",-0500,Hans-Christoph Steiner,"
Is there a version that uses the normal OLSR port for devices with root
access?  It seems a safe assumption that any device running CM has root.

.hc

On 01/16/2014 04:55 PM, Will Hawkins wrote:
> Hello Nathan!
> 
> We support the Nexus 7 running CM nightlies w/o requiring root on the device. The support for this is in our CM branch. Builds of that are available at http://downloads.commotionwireless.net/android/. You can also build from source at https://github.com/opentechinstitute/commotion-android using the cm branch.
> 
> Documentation for that release is still thin and there are several caveats (most importantly, IBSS-RSN is not supported and requires olsrd to run on a non-standard, non-privileged port [5001]).
> 
> Please let me know what issues you find!
> 
> Will
> 
> On Thursday, January 16, 2014 10:40 EST, Nathan of Guardian <nathan at guardianproject.info> wrote: 
>  
"
1712,Commotion-dev, =?utf-8?q?Commotion_Android_on_Nexus_7=3F?=,"Mon, 20 Jan 2014 18:35:57 -0500",-0500,Will Hawkins,"Hey Hans!

On Monday, January 20, 2014 16:55 EST, Hans-Christoph Steiner <hans at guardianproject.info> wrote: 
 
> 
> Is there a version that uses the normal OLSR port for devices with root
> access?  It seems a safe assumption that any device running CM has root.

We do not have a pre-baked build that has olsrd running on the default port. It's definitely not hard to make, though. Would that help with the upcoming NYC mesh workshop?

You are absolutely correct about the assumption that CM installation goes hand-in-hand with having a rooted device. However, we are building it with the expectation that this version of the Commotion app will run on non-rooted, non-CM devices when AOSP adopts the CM ad-hoc patches, etc. So, while currently we are making a distinction where there is no difference, we think that in the future we are going to be positioned for SUCCESS :-)

Does that make sense?
Will

> 
> .hc
> 
> On 01/16/2014 04:55 PM, Will Hawkins wrote:
> > Hello Nathan!
> > 
> > We support the Nexus 7 running CM nightlies w/o requiring root on the device. The support for this is in our CM branch. Builds of that are available at http://downloads.commotionwireless.net/android/. You can also build from source at https://github.com/opentechinstitute/commotion-android using the cm branch.
> > 
> > Documentation for that release is still thin and there are several caveats (most importantly, IBSS-RSN is not supported and requires olsrd to run on a non-standard, non-privileged port [5001]).
> > 
> > Please let me know what issues you find!
> > 
> > Will
> > 
> > On Thursday, January 16, 2014 10:40 EST, Nathan of Guardian <nathan at guardianproject.info> wrote: 
> >  
> "
1713,Commotion-dev, commotion on tp-mr3020 and other low resource,"Tue, 21 Jan 2014 10:31:46 +1030",+1030,Paul Gardner-Stephen,"We are using MR3020's for Serval Mesh Extenders, and happy to pool our
ignorance.

On the extroot issue, we have had endless trouble getting it to actually
work, and in the end gave up on it, and just mount external partitions, and
use LD_LIBRARY_PATH and other sub-optimal things.  If you have extroot
working, that would be interesting for us.

Paul.


On Tue, Jan 21, 2014 at 3:50 AM, Ben West <ben at gowasabi.net> wrote:

> I've been running TL-MR3020's and TL-WR703N's with moderate success as
> very lightweight WasabiNet nodes, albeit not yet with any additional
> firmware loaded via USB port.  Just been squeezing everything into 4MBytes.
>
> I believe opkg errors you're seeing are from the commotiond packages, etc,
> not being from the same compile run as the stock AA images you're initially
> flashing onto the device.  It should work if you flash the device with a
> pared-down AA image from the same compile run as commotiond.
>
> I'm attaching the .config I've used for compiling WasabiNet firmware
> (based on AA r39154) for TL-MR3020.  This produces an image just about
> 300kbytes smaller than the 4MB flash (done partly via the
> ""-funit-at-a-time"" compile optimization), although it excludes luci and any
> USB support.  This config also depends on modded versions of libcyassl and
> libcurl, to permit curl to operate with the smaller libcyassl library
> instead of libopenssl.
>
> Since Commotion-OpenWRT doesn't use it, you should be fine to disable
> libcurl/curl and then re-enable USB support at whatnot, along with whatever
> other pruning is needed to get the image to fit in 4Mbytes.
>
> A couple details I can share about experience with the little TP-Link
> units, after having them in regular use for several months now:
>
> 1. The popular instructions linked to on the OpenWRT wiki for adding an
> external antenna seem to leave the devices badly susceptible to ESD
> damage.  I've seen 2 MR3020's mysteriously lose much of their TX power
> after lightning storms passed over (even though the units were inside).
> This tutorial from a very diligent Australian appears to get it right, by
> attaching the antenna pigtail so as not to bypass filter / matching
> circuits that could protect the radio chip from surges.  I'm awaiting the
> next strong thunderstorm to see if this has any improvement in ESD
> protection.
> https://forum.openwrt.org/viewtopic.php?id=46543
> https://app.box.com/s/cispknq8b9zgog8k5vxn
>
> 2. In lieu of external antenna mods possibly not being viable for MR3020
> or WR703N due to ESD vulnerability, I'm hoping to soon check out the
> TL-MR3220 and/or TL-MR3420.  These units have similar specs, 32MBytes RAM,
> 4MByte flash, USB, but they also include stock external antennas *and*LAN ports. Amazon sells the MR3220 for $30, and Musti claims it could be
> had cheaper elsewhere.
>
>
>
> On Mon, Jan 20, 2014 at 10:31 AM, Chris Ritzo <
> critzo at opentechinstitute.org> wrote:
>
"
1714,Commotion-dev, commotion on tp-mr3020 and other low resource,"Mon, 20 Jan 2014 19:10:30 -0500",-0500,Chris Ritzo,"Thanks Ben & Paul!

Ben - I'm attempting to build a factory image with that kernel now.

Paul- yes, I have USB extroot working, but without extensive testing. 
I've documented my work here: 
https://wiki.commotionwireless.net/doku.php?id=usb_extroot_installation
feel free to try this out on your devices to confirm.

Thanks! Chris

On Mon 20 Jan 2014 07:01:46 PM EST, Paul Gardner-Stephen wrote:
> We are using MR3020's for Serval Mesh Extenders, and happy to pool our
> ignorance.
>
> On the extroot issue, we have had endless trouble getting it to
> actually work, and in the end gave up on it, and just mount external
> partitions, and use LD_LIBRARY_PATH and other sub-optimal things.  If
> you have extroot working, that would be interesting for us.
>
> Paul.
>
>
> On Tue, Jan 21, 2014 at 3:50 AM, Ben West <ben at gowasabi.net
> <mailto:ben at gowasabi.net"
1715,Commotion-dev, commotion on tp-mr3020 and other low resource,"Mon, 20 Jan 2014 21:26:04 -0300",-0300,=?utf-8?Q?Nicol=C3=A1s?= Reynolds,"Chris Ritzo <critzo at opentechinstitute.org> writes:

> Thanks Ben & Paul!
>
> Ben - I'm attempting to build a factory image with that kernel now.
>
> Paul- yes, I have USB extroot working, but without extensive testing.
> I've documented my work here:
> https://wiki.commotionwireless.net/doku.php?id=usb_extroot_installation
> feel free to try this out on your devices to confirm.

you can also unpack the rootfs.tar.gz file on the usb drive :)

doesn't it overheat for you?  we've done tests with a friend and the
plastic microsd adapter we were using was blasted by the heat.

our scripts are here, they should work with attitude adjustment.  the
important things are bin/mkmallacritica and the files/ dir.

https://github.com/fauno/MallaCritica 

-- 
P)
"
1716,Commotion-dev, Commotion Android on Nexus 7?,"Mon, 20 Jan 2014 20:15:08 -0500",-0500,Hans-Christoph Steiner,"
Is there a version that uses the normal OLSR port for devices with root
access?  It seems a safe assumption that any device running CM has root.

.hc

On 01/16/2014 04:55 PM, Will Hawkins wrote:
> Hello Nathan!
> 
> We support the Nexus 7 running CM nightlies w/o requiring root on the device. The support for this is in our CM branch. Builds of that are available at http://downloads.commotionwireless.net/android/. You can also build from source at https://github.com/opentechinstitute/commotion-android using the cm branch.
> 
> Documentation for that release is still thin and there are several caveats (most importantly, IBSS-RSN is not supported and requires olsrd to run on a non-standard, non-privileged port [5001]).
> 
> Please let me know what issues you find!
> 
> Will
> 
> On Thursday, January 16, 2014 10:40 EST, Nathan of Guardian <nathan at guardianproject.info> wrote: 
>  
"
1717,Commotion-dev, Commotion Android on Nexus 7?,"Mon, 20 Jan 2014 20:21:47 -0500",-0500,Nathan of Guardian,"

Will Hawkins <hawkinsw at opentechinstitute.org> wrote:
>it with the expectation that this version of the Commotion app will run
>on non-rooted, non-CM devices when AOSP adopts the CM ad-hoc patches,
>etc. So, while currently we are making a distinction where there is no
>difference, we think that in the future we are going to be positioned
>for SUCCESS :-)

I have always felt that the CM support/compatibility for Commotion has been underplayed. With 10M+ devices out there (supposedly), the ability to run on older devices, and the new/easier CM install process, it seems like there is a much greater potential overlap, at least in the next 12 months, with potential Commotion mesh communities.

The AOSP goal is fantastic and it is exciting it is a reality within reach but it will take a while for that to reach the market.

+n

"
1718,Commotion-dev, commotion on tp-mr3020 and other low resource,"Tue, 21 Jan 2014 07:47:20 -0500",-0500,Chris Ritzo,"Thanks Nicol?s. I have not tried just unpacking the rootfs.tar.gz onto
the USB. For some reason I was thinking that the kernel on the flash
needed to match the kernel on the USB extroot file system.

I haven't had overheating issues yet, though admittedly I haven't done
as extensive performance testing as you and your friend. Maybe adding a
fan using the I2C bus hack on the openwrt wiki would help this.
http://wiki.openwrt.org/toh/tp-link/tl-mr3020?s[]=tp&s[]=mr3020#hardware.hacks

I haven't tried any of these hacks yet, but it sounds like others have.

best, Chris

On Mon 20 Jan 2014 07:26:04 PM EST, Nicol?s Reynolds wrote:
> Chris Ritzo <critzo at opentechinstitute.org> writes:
>
"
1719,Commotion-dev, [Commotion-discuss] Commotion R1 changes.RPi,"Tue, 21 Jan 2014 13:08:55 -0500",-0500,Dan Staples,"Thanks for bringing this up, Luigi. It appears that client-to-client
routing doesn't work as it should in R1, something that we failed to
test before release. The problem is the default firewall configuration.

To fix this problem, run the following commands on the nodes in your
network:

NEW_RULE=$(uci add firewall forwarding)
uci set firewall.${NEW_RULE}.src=mesh
uci set firewall.${NEW_RULE}.dest=lan
uci commit firewall
/etc/init.d/firewall restart

That should hopefully take care of the issue you're seeing. Let us know
if that doesn't work!

Dan

p.s. permanent fix submitted here:
https://github.com/opentechinstitute/commotion-router/pull/98

On 01/19/2014 04:17 PM, LScop wrote:
> I'm pretty sure that the following configuration was working in the
> previous release DR1.
> I could access  to MediaGrid on server Rpi from Laptop1 .
> It seems that with the new release I can't.There is  some setting or
> something that  I'm missing.
> For sure,from laptop1  with traceroute -n  10.84.52.42, I see some
> problem between Picostation 2 and POE.
> 
>  1  10.23.134.1  3.085 ms  3.060 ms  3.046 ms
>  2  100.72.84.52  6.303 ms  6.308 ms  9.099 ms
>  3  * * *
> 4   * * *
> Any help?
> 
> 
> 
>  Laptop1                               Picostation1                    
>                          Picostation2
>                                     POE                                
> Raspberry
> "
1720,Commotion-dev, Commotion Android on Nexus 7?,"Wed, 22 Jan 2014 18:09:22 -0500",-0500,Hans-Christoph Steiner,"

On 01/20/2014 06:35 PM, Will Hawkins wrote:
> Hey Hans!
> 
> On Monday, January 20, 2014 16:55 EST, Hans-Christoph Steiner <hans at guardianproject.info> wrote: 
>  
"
1721,Commotion-dev, Commotion Android on Nexus 7?,"Wed, 22 Jan 2014 17:17:04 -0600",-0600,Martin O'Shield,"Hans,


All of the below looks to be OUTSTANDING to be.

Commotion-Wireless, please keep moving forward.

I am configuring the Commotion-Wireless ISO to work with a MIMO SDR board I
am in the process of manufacturing locally here in the Chicagoland area.

We compliment eachothers activities.

More shortly, and keep up the GREAT work!

Sincerely,



Martin


On Wed, Jan 22, 2014 at 5:09 PM, Hans-Christoph Steiner <
hans at guardianproject.info> wrote:

>
>
> On 01/20/2014 06:35 PM, Will Hawkins wrote:
> > Hey Hans!
> >
> > On Monday, January 20, 2014 16:55 EST, Hans-Christoph Steiner <
> hans at guardianproject.info> wrote:
> >
> "
1722,Commotion-dev, =?windows-1252?q?BeWifi_lets_you_steal_your_neigh?=,"Sun, 26 Jan 2014 10:07:56 -0500",-0500,Dan Staples,"http://arstechnica.com/business/2014/01/bewifi-lets-you-steal-your-neighbors-bandwidth-when-theyre-not-using-it/

When I read it, I was thinking, ""hey that sounds kind of like...oh. Ok,
it's mesh.""

Proprietary issues aside, it's interesting. Of course, sharing internet
bandwidth is nothing new with mesh networks; any OLSRd-based network
like Commotion provides internet bandwidth sharing from multiple gateways.

What I'm still curious about is *how* BeWifi pools or distributes that
bandwidth. Unless there is some sort of network coding/multipath TCP
functionality (which would require similar capabilities at the
destination), it is presumably just doing optimized gateway selection to
route a user's traffic to the internet. OLSRd's Smart Gateway plugin
does this, sort of, but without bandwidth measurements AFAIK. Although I
hear OLSRd v2 can do this even better.

Also interesting that it's being piloted in Catalonia...I wonder how
Guifi.net feels about it ;)

Dan

-- 
Dan Staples

Open Technology Institute
https://commotionwireless.net
OpenPGP key: http://disman.tl/pgp.asc
Fingerprint: 2480 095D 4B16 436F 35AB 7305 F670 74ED BD86 43A9
"
1723,Commotion-dev,,"Sun, 26 Jan 2014 12:05:51 -0600",-0600,Ben West,"Quoting details about the actual hardware being built:

""The way Telefonica has made this happen in a practical way is to build its
own routers that can be installed in houses within a neighborhood. So far
these have had to be installed by engineers, but the next generation are
plug-and-play, and eventually all that will be needed is an over-the-air
software update to customers' existing routers. According to Rodriguez, the
software 'creates a mesh to aggregate the capabilities [of the routers].'
Pooling all of the bandwidth from these routers allows anyone within the
network to take advantage of it at home, and they can also connect to any
BeWifi network they come across on their mobile devices when out and about.""

It could very well be the Telefonica routers would do some sort intelligent
repeating or meshing wirelessly, although I'm guessing much of the
bandwidth optimization may be accomplished by ensuring adjacent access
points do not overlap channels or broadcast with excessive TX power.  (This
is because I'm assuming Telefonica provides its broadband service nominally
via conventional wireline, e.g. DSL or cable, and actual wireless backhaul
in such a scheme would be used seldom.)

My question: would Telefonica subscribers then be *required* to use the
router provided, with its stock firmware, per revised ToS?  And likewise
they would be given very limited admin permissions on that device (e.g.
change the SSID and WPA key, but little else)?  I can understand the need
to compel subscribers as such to ensure uniform bandwidth management, but
it still seems like this walks in opposite directions of what community
mesh advocates are seeking.



On Sun, Jan 26, 2014 at 9:07 AM, Dan Staples <
danstaples at opentechinstitute.org> wrote:

>
> http://arstechnica.com/business/2014/01/bewifi-lets-you-steal-your-neighbors-bandwidth-when-theyre-not-using-it/
>
> When I read it, I was thinking, ""hey that sounds kind of like...oh. Ok,
> it's mesh.""
>
> Proprietary issues aside, it's interesting. Of course, sharing internet
> bandwidth is nothing new with mesh networks; any OLSRd-based network
> like Commotion provides internet bandwidth sharing from multiple gateways.
>
> What I'm still curious about is *how* BeWifi pools or distributes that
> bandwidth. Unless there is some sort of network coding/multipath TCP
> functionality (which would require similar capabilities at the
> destination), it is presumably just doing optimized gateway selection to
> route a user's traffic to the internet. OLSRd's Smart Gateway plugin
> does this, sort of, but without bandwidth measurements AFAIK. Although I
> hear OLSRd v2 can do this even better.
>
> Also interesting that it's being piloted in Catalonia...I wonder how
> Guifi.net feels about it ;)
>
> Dan
>
> --
> Dan Staples
>
> Open Technology Institute
> https://commotionwireless.net
> OpenPGP key: http://disman.tl/pgp.asc
> Fingerprint: 2480 095D 4B16 436F 35AB 7305 F670 74ED BD86 43A9
> _______________________________________________
> Commotion-dev mailing list
> Commotion-dev at lists.chambana.net
> https://lists.chambana.net/mailman/listinfo/commotion-dev
>
"
1724,Commotion-dev,,"Sun, 26 Jan 2014 20:07:53 +0100",+0100,L. Aaron Kaplan,"
On Jan 26, 2014, at 4:07 PM, Dan Staples <danstaples at opentechinstitute.org> wrote:

> http://arstechnica.com/business/2014/01/bewifi-lets-you-steal-your-neighbors-bandwidth-when-theyre-not-using-it/
> 
> When I read it, I was thinking, ""hey that sounds kind of like...oh. Ok,
> it's mesh.""
> 
> Proprietary issues aside, it's interesting. Of course, sharing internet
> bandwidth is nothing new with mesh networks; any OLSRd-based network
> like Commotion provides internet bandwidth sharing from multiple gateways.
> 
> What I'm still curious about is *how* BeWifi pools or distributes that
> bandwidth. Unless there is some sort of network coding/multipath TCP
> functionality (which would require similar capabilities at the
> destination), it is presumably just doing optimized gateway selection to
> route a user's traffic to the internet. OLSRd's Smart Gateway plugin
> does this, sort of, but without bandwidth measurements AFAIK. Although I
> hear OLSRd v2 can do this even better.
> 
> Also interesting that it's being piloted in Catalonia...I wonder how
> Guifi.net feels about it ;)

Dan, they (== Telefonica) seem to be 10 years behind us ;-)


a.

"
1725,Commotion-dev, quick note on crypto UX,"Sun, 26 Jan 2014 21:00:40 -0500",-0500,Dan Staples,"On 11 Jan, there was a hackathon in DC for Commotion, Cryptocat, and
Cupcake. Cryptocat posted an interesting debrief from it[1], in which
they made some interesting observations regarding the crypto-related
aspects of the user experience:

""""""
The area of the most confusion ? to the point where it made the users
feel threatened or panicked ? was the user information screens (either
for a specific buddy or the user themselves). Though ?fingerprint? is
widely known by cryptography and security experts, it is, at the end of
the day, jargon. There were several participants who immediately
associated ?fingerprint? with a negative connotation (i.e., leaving a
fingerprint at a crime scene). Their tone was panicked in asking their
questions on this issue, and were unsure of why that information needed
to be displayed, and if it was even safe to display. There were a
handful of users who understood encryption technology at a very basic
level who were not confused by the terminology on this page, but were
unsure of what to do with this information.

[...]

The term ?fingerprint? was severely off-putting for many users.
Thankfully, there are several ways to avoid this discomfort. Consider
adding ?microcopy? to the fingerprint pages?very brief, clear, and
concise copy telling the user that everything is okay, and that this
information isn?t anything threatening. In addition to microcopy, a
tertiary page can be created that explains the basics of what a
fingerprint is, why that information is important, and how to use that
information. This way, a space can be created to not only educate users
on encryption, but possibly catalyze their own self-guided education on
the matter.
""""""

Since we will be starting the process of designing a key management
interface (e.g. buddy list and fav local apps) for the various Commotion
clients, this is some good information to keep in mind.

Dan

[1] https://blog.crypto.cat/2014/01/cryptocat-at-the-openitp-dc-hackathon/

-- 
Dan Staples

Open Technology Institute
https://commotionwireless.net
OpenPGP key: http://disman.tl/pgp.asc
Fingerprint: 2480 095D 4B16 436F 35AB 7305 F670 74ED BD86 43A9
"
1726,Commotion-dev, quick note on crypto UX,"Mon, 27 Jan 2014 03:16:19 -0500",-0500,Griffin Boyce,"Dan Staples wrote:
> ""The term ?fingerprint? was severely off-putting for many users.
> Thankfully, there are several ways to avoid this discomfort.""
>
> Since we will be starting the process of designing a key management
> interface (e.g. buddy list and fav local apps) for the various Commotion
> clients, this is some good information to keep in mind.
>
> Dan

   We should really look for other terminology that might avoid this 
reaction.  There have been some discussions on twitter and various 
listservs about this over the past couple of years, with no real 
resolution.  This is clearly important when it comes to questions of 
usability and user retention and how our software is perceived 
generally.  But I feel like we *also* have an opportunity to shape 
fingerprint/key verification across the entire space.  :D

best,
Griffin


*I was going to say netzpolitik, but other than being my favorite word 
ever, it seems a little out of place

"
1727,Commotion-dev, quick note on crypto UX,"Mon, 27 Jan 2014 11:13:41 -0500",-0500,Preston Rhea,"Thanks for sharing this - interesting to read.

I hope to see, and contribute to, similar findings on the Commotion blog.

On Mon, Jan 27, 2014 at 3:16 AM, Griffin Boyce <griffin at cryptolab.net> wrote:
> Dan Staples wrote:
"
1728,Commotion-dev, commotion on barrier breaker,"Tue, 28 Jan 2014 00:00:06 -0800",-0800,miles,"
I've been trying to get commotion built on barrier breaker.  Yes, this isn't supported, but I've got hardware that needs it. 

There are two major areas where things seem to break: hotplug and luci

Luci looks like just a version matching problem between trunk & packages. 

The more frustrating problem is with hotplug.  I can't get both wireless devices up at the same time. The olsr hotplug script seems to be run twice, once for the AP and once for the mesh interface. But the hotplug script detects both as wlan0. When I edit the script to use device instead of interface, the script recognizes the correct interface, but something breaks in queries to commotiond. 

Has anyone else been got beyond this? 
"
1729,Commotion-dev, quick note on crypto UX,"Tue, 28 Jan 2014 12:40:36 -0800",-0800,The Doctor,
1730,Commotion-dev, UX & Commotion,"Tue, 28 Jan 2014 15:50:27 -0500",-0500,Georgia Bullen,"Hi All,

MarinaZ & Jen Wike from Red Hat asked me to participate in their women in
Open Source series on OpenSource.com, so I ended up talking about the UI
review process that we did as part of the Version 1 Release.

The first of two just went up today!

Check it out here:
http://opensource.com/life/14/1/how-to-leverage-user-design

-Georgia

-- 
Georgia Bullen
Field Operations Technologist, Open Technology
Institute<http://oti.newamerica.net/>
New America Foundation
"
1731,Commotion-dev, quick note on crypto UX,"Tue, 28 Jan 2014 15:56:29 -0500",-0500,Griffin Boyce,"The Doctor wrote:
> Why not poll a group of potential users who aren't hackers, explain
> what you want to accomplish (but don't tell them what it's called),
> and see how they react.  There might be something in common parlance
> that is more intuitive.

   That's a great idea.  I wonder where we could rustle some up who 
aren't already familiar with the nomenclature....  Thoughts?

~Griffin

"
1732,Commotion-dev, quick note on crypto UX,"Tue, 28 Jan 2014 16:23:34 -0500",-0500,hello at ninabianchi.com,"Josh Breitbart + I started to do some of this work in 2011 with the Every Network Tells a Story workshop. We gathered ideas + feedback during the workshops.

I can see if I can find our notes around some of the proposed language -- I may have to dig around for a bit. Ecological metaphors seemed to resonate in general. 

It would be great to pick this conversation back up in general, especially around encryption. 

Conceptualizing new language (through a collaborative / participatory approach) is only one part of the process ? testing the language, adapting to feedback, circulating the language in easy to digest forms, changing behavior with advanced users and introducing the material to new users... and so on. 

It'd be great to see more about this on the blog as Preston mentioned.

Perhaps this can become part of the Commotion Construction Kit's future.

Nina







On Jan 28, 2014, at 3:56 PM, Griffin Boyce wrote:

> The Doctor wrote:
"
1733,Commotion-dev, quick note on crypto UX,"Wed, 29 Jan 2014 18:41:33 -0500",-0500,Hans-Christoph Steiner,"
I definitely agree that the crypto lingo definitely needs to be improved.
Unfortunately, I think that tweaking it here and there will only make it
worse.  For better or worse, ""fingerprint"" is the widespread term for that
thing.  And using a different word for it means that users will not be able to
tap into the existing body of knowledge around key fingerprints.

So if there is a crypto key fingerprint that the user has to know about, it
should be called a fingerprint.  And what we need to be working towards is
ways of representing crypto in a better way.  Here are some more of my more
recent thoughts on that topic:

https://guardianproject.info/2013/12/12/keys-signatures-certificates-verifications-etc-what-are-all-these-for/

.hc

On 01/28/2014 04:23 PM, hello at ninabianchi.com wrote:
> Josh Breitbart + I started to do some of this work in 2011 with the Every Network Tells a Story workshop. We gathered ideas + feedback during the workshops.
> 
> I can see if I can find our notes around some of the proposed language -- I may have to dig around for a bit. Ecological metaphors seemed to resonate in general. 
> 
> It would be great to pick this conversation back up in general, especially around encryption. 
> 
> Conceptualizing new language (through a collaborative / participatory approach) is only one part of the process ? testing the language, adapting to feedback, circulating the language in easy to digest forms, changing behavior with advanced users and introducing the material to new users... and so on. 
> 
> It'd be great to see more about this on the blog as Preston mentioned.
> 
> Perhaps this can become part of the Commotion Construction Kit's future.
> 
> Nina
> 
> 
> 
> 
> 
> 
> 
> On Jan 28, 2014, at 3:56 PM, Griffin Boyce wrote:
> 
"
1734,Commotion-dev, mesh speed,"Thu, 30 Jan 2014 08:57:19 -0200",-0200,Marcio Montenegro,"Hi developers,

I am testing OTI commotion on TP-LINK routers.
My small mesh network has only 2 nodes.
Node 1 is  WDR-3600 and second node is WDR-3600 (gateway to internet).
The 5GHz is the mesh radio and 2.4GHz radio is ap.
Today the mesh link reached the speed of 180Mb/s using HT40.

https://dl.dropboxusercontent.com/u/25923942/mesh.png

Tested using Attitude Adjustment release 39408.
Best,
Marcio
"
1735,Commotion-dev, commotion on barrier breaker,"Thu, 30 Jan 2014 08:29:32 -0500",-0500,Dan Staples,"Hi Miles,

It's great you're trying out BB with Commotion, I don't know of anyone
else who's given that a try yet.

I might also suggest looking at the mac80211.sh patch that comes with
commotiond, since I believe that is likely unnecessary or obsolete in BB
due to the later version of netifd it comes with. I suspect Josh (CCed)
would have a better idea about this. Either way, we hope to upgrade to
BB once it is released as stable.

If you're able to get things to work, pull requests are more than
welcome. Let us know if you're able to figure out the problem!

Dan

On 01/28/2014 03:00 AM, miles wrote:
> 
> I've been trying to get commotion built on barrier breaker.  Yes, this isn't supported, but I've got hardware that needs it. 
> 
> There are two major areas where things seem to break: hotplug and luci
> 
> Luci looks like just a version matching problem between trunk & packages. 
> 
> The more frustrating problem is with hotplug.  I can't get both wireless devices up at the same time. The olsr hotplug script seems to be run twice, once for the AP and once for the mesh interface. But the hotplug script detects both as wlan0. When I edit the script to use device instead of interface, the script recognizes the correct interface, but something breaks in queries to commotiond. 
> 
> Has anyone else been got beyond this? 
> _______________________________________________
> Commotion-dev mailing list
> Commotion-dev at lists.chambana.net
> https://lists.chambana.net/mailman/listinfo/commotion-dev
> 

-- 
Dan Staples

Open Technology Institute
https://commotionwireless.net
OpenPGP key: http://disman.tl/pgp.asc
Fingerprint: 2480 095D 4B16 436F 35AB 7305 F670 74ED BD86 43A9
"
1736,Commotion-dev, ubiquiti auto-reset,"Thu, 30 Jan 2014 16:25:41 -0500",-0500,Josh King,"Hi all,

I was speculating today about how we might be able to more smoothly
automate testing on our various testbed networks. Particularly, I was
thinking about how CONFINE uses a recovery device as a ""parent"" to power
cycle a stuck node (http://wiki.confine-project.eu/hw:recovery-device).
This made me think about how some Ubiquiti POEs have a reset button that
is able to send a signal over the wire to flip a node into TFTP mode in
the same way as the reset button on the node itself. I was wondering if
anyone was familiar with how that process actually worked (I assume
through sending some hi/low signal on one of the ethernet pins that the
chipset in the node recognizes), and if it was possible to simulate it
using an Arduino or similar. It would be great to be able to pair
testbed nodes with something like a raspberry pi that could remotely
reset and TFTP nodes with new firmware and run network tests independent
of the nodes themselves.
-- 
Josh King
Lead Technologist
The Open Technology Institute

"
1737,Commotion-dev, commotion on barrier breaker,"Thu, 30 Jan 2014 16:32:20 -0500",-0500,Josh King,"Hi Miles & Dan,

The hotplug scripts are already practically a deprecated system in 
Attitude Adjustment, so I imagine with Barrier Breaker we're going to 
be looking to use something else entirely. My intent is to have 
commotiond listen on ubus for network events, and to then configure 
OLSRd and the network directly, thus replacing many of our scripts. 
However, I don't anticipate working more on ubus bindings until after I 
have commotiond stable on desktop Linux, as Barrier Breaker still seems 
to be a ways out. I would be interested in working with anyone that 
wanted to do more general testing on Barrier Breaker, though, as it has 
a lot of interesting new features that I'm not fully familiar with yet.

On Thu 30 Jan 2014 08:29:32 AM EST, Dan Staples wrote:
> Hi Miles,
>
> It's great you're trying out BB with Commotion, I don't know of anyone
> else who's given that a try yet.
>
> I might also suggest looking at the mac80211.sh patch that comes with
> commotiond, since I believe that is likely unnecessary or obsolete in BB
> due to the later version of netifd it comes with. I suspect Josh (CCed)
> would have a better idea about this. Either way, we hope to upgrade to
> BB once it is released as stable.
>
> If you're able to get things to work, pull requests are more than
> welcome. Let us know if you're able to figure out the problem!
>
> Dan
>
> On 01/28/2014 03:00 AM, miles wrote:
"
1738,Commotion-dev, mesh speed,"Thu, 30 Jan 2014 16:35:56 -0500",-0500,Josh King,"Hey Marcio,

That's really cool! Have you tried running any throughput tests across
the link? I see a speedtest in the background of your screenshot, but
can't read it ;-)

On Thu 30 Jan 2014 05:57:19 AM EST, Marcio Montenegro wrote:
> Hi developers,
>
> I am testing OTI commotion on TP-LINK routers.
> My small mesh network has only 2 nodes.
> Node 1 is  WDR-3600 and second node is WDR-3600 (gateway to internet).
> The 5GHz is the mesh radio and 2.4GHz radio is ap.
> Today the mesh link reached the speed of 180Mb/s using HT40.
>
> https://dl.dropboxusercontent.com/u/25923942/mesh.png
>
> Tested using Attitude Adjustment release 39408.
> Best,
> Marcio
>
>
>
> _______________________________________________
> Commotion-dev mailing list
> Commotion-dev at lists.chambana.net
> https://lists.chambana.net/mailman/listinfo/commotion-dev
-- 
Josh King
Lead Technologist
The Open Technology Institute

"
1739,Commotion-dev, ubiquiti auto-reset,"Thu, 30 Jan 2014 16:54:53 -0500",-0500,Mathieu Lutfy,"Hi Josh,

Some Reseaulibre.ca folks created their own PoE reset using this spec:
http://dren.dk/mreset.html

It would indeed be very cool to combine this with an arduino/raspi
to automate testing.

Mathieu

2014-01-30, 16:25:41 -0500, Josh King (jking at opentechinstitute.org):
> Hi all,
> 
> I was speculating today about how we might be able to more smoothly
> automate testing on our various testbed networks. Particularly, I was
> thinking about how CONFINE uses a recovery device as a ""parent"" to power
> cycle a stuck node (http://wiki.confine-project.eu/hw:recovery-device).
> This made me think about how some Ubiquiti POEs have a reset button that
> is able to send a signal over the wire to flip a node into TFTP mode in
> the same way as the reset button on the node itself. I was wondering if
> anyone was familiar with how that process actually worked (I assume
> through sending some hi/low signal on one of the ethernet pins that the
> chipset in the node recognizes), and if it was possible to simulate it
> using an Arduino or similar. It would be great to be able to pair
> testbed nodes with something like a raspberry pi that could remotely
> reset and TFTP nodes with new firmware and run network tests independent
> of the nodes themselves.
> -- 
> Josh King
> Lead Technologist
> The Open Technology Institute
> 



> _______________________________________________
> Commotion-dev mailing list
> Commotion-dev at lists.chambana.net
> https://lists.chambana.net/mailman/listinfo/commotion-dev


-- 
Mathieu Lutfy        <mathieu at bidon.ca>       http://www.bidon.ca
GPG 0x986487F1 CB77 0BF3 8491 77A9 DA33  6F2E 19A0 B6F9 9864 87F1

"
1740,Commotion-dev, ubiquiti auto-reset,"Thu, 30 Jan 2014 17:01:38 -0500",-0500,Josh King,"Ah cool, I didn't realize that was R?seau Libre. I was talking with them
the other day about adding Babel support to Commotion.

On Thu 30 Jan 2014 04:54:53 PM EST, Mathieu Lutfy wrote:
> Hi Josh,
>
> Some Reseaulibre.ca folks created their own PoE reset using this spec:
> http://dren.dk/mreset.html
>
> It would indeed be very cool to combine this with an arduino/raspi
> to automate testing.
>
> Mathieu
>
> 2014-01-30, 16:25:41 -0500, Josh King (jking at opentechinstitute.org):
"
1741,Commotion-dev, ubiquiti auto-reset,"Thu, 30 Jan 2014 17:04:07 -0500",-0500,Josh King,"Thanks Danny! I noticed at the end of the thread that someone made their
own custom inline reset switch using Flemming's schematics:

http://community.ubnt.com/t5/airMax-General-Discussion/Remote-hardware-reset-circuitry-of-NanoStation-M/td-p/58320/page/3

Also Flemming's response to the Ubiquiti engineer about the lack of
specs is pretty hilarious. :-)

Let me know if you give it a try. We intend to try it out here as soon
as we get a spare moment. Seems like it should be pretty easy.

On 01/30/2014 04:42 PM, Danny Iland wrote:
> A guy named Flemming Frandsen posted some information about simulating
> the PoE injector's reset button on the Ubiquiti forums, and his own site.
> 
> Here's the discussion
> <http://community.ubnt.com/t5/airMax-General-Discussion/Remote-hardware-reset-circuitry-of-NanoStation-M/td-p/58320> and circuit
> diagram <http://dren.dk/mreset.html> with more detail.
> 
> ""Bottom line is that to press the reset button on the M-series hardware
> remotely all you need to do is to put +15 to +24V on the center tap of
> the ethernet transformer at the remote end, with respect to the power
> supply ground. I haven't tried it but it ought to be possible to simply
> put + on any one of the 4 wires.""
> 
> If you want to use an Arduino connected directly to the radio instead of
> the ethernet cable, there's a COLD_RST pin on the JTAG header, or you
> could connect to the TTY serial port and perform a software restart.
> See the openwrt wiki
> <http://wiki.openwrt.org/toh/ubiquiti/nanostation> or Ubiquiti's page
> <http://wiki.ubnt.com/index.php/NanoStation2_RS232_Connection> for
> details. Any 3.3V arduino would work for this, or any arduino with a
> level converter. 
> 
> Anyone have experience with this? If not, I might give it try pretty soon.
> 
> Danny Iland
> 
> 
> 
> On Thu, Jan 30, 2014 at 1:25 PM, Josh King <jking at opentechinstitute.org
> <mailto:jking at opentechinstitute.org"
1742,Commotion-dev, ubiquiti auto-reset,"Thu, 30 Jan 2014 14:09:37 -0800",-0800,Danny Iland,"Josh,

No problem! That thread is a good resource for sure.

I plan on connecting a Moteino (Arduino clone w/ 433MHz wireless radio) to
the TTY serial port sometime in February, so if you guys are planning to
build one of the inline reset switches we'll have two ways to remotely
reset the radio.

Danny


On Thu, Jan 30, 2014 at 2:04 PM, Josh King <jking at opentechinstitute.org>wrote:

> Thanks Danny! I noticed at the end of the thread that someone made their
> own custom inline reset switch using Flemming's schematics:
>
>
> http://community.ubnt.com/t5/airMax-General-Discussion/Remote-hardware-reset-circuitry-of-NanoStation-M/td-p/58320/page/3
>
> Also Flemming's response to the Ubiquiti engineer about the lack of
> specs is pretty hilarious. :-)
>
> Let me know if you give it a try. We intend to try it out here as soon
> as we get a spare moment. Seems like it should be pretty easy.
>
> On 01/30/2014 04:42 PM, Danny Iland wrote:
> > A guy named Flemming Frandsen posted some information about simulating
> > the PoE injector's reset button on the Ubiquiti forums, and his own site.
> >
> > Here's the discussion
> > <
> http://community.ubnt.com/t5/airMax-General-Discussion/Remote-hardware-reset-circuitry-of-NanoStation-M/td-p/58320>
> and circuit
> > diagram <http://dren.dk/mreset.html> with more detail.
> >
> > ""Bottom line is that to press the reset button on the M-series hardware
> > remotely all you need to do is to put +15 to +24V on the center tap of
> > the ethernet transformer at the remote end, with respect to the power
> > supply ground. I haven't tried it but it ought to be possible to simply
> > put + on any one of the 4 wires.""
> >
> > If you want to use an Arduino connected directly to the radio instead of
> > the ethernet cable, there's a COLD_RST pin on the JTAG header, or you
> > could connect to the TTY serial port and perform a software restart.
> > See the openwrt wiki
> > <http://wiki.openwrt.org/toh/ubiquiti/nanostation> or Ubiquiti's page
> > <http://wiki.ubnt.com/index.php/NanoStation2_RS232_Connection> for
> > details. Any 3.3V arduino would work for this, or any arduino with a
> > level converter.
> >
> > Anyone have experience with this? If not, I might give it try pretty
> soon.
> >
> > Danny Iland
> >
> >
> >
> > On Thu, Jan 30, 2014 at 1:25 PM, Josh King <jking at opentechinstitute.org
> > <mailto:jking at opentechinstitute.org"
1743,Commotion-dev, ubiquiti auto-reset,"Thu, 30 Jan 2014 17:39:02 -0500",-0500,Mathieu Lutfy,"Just to clarify: people used that spec to implement their
own PoE resets, they're not the authors of that spec.

I'm also from R?seau libre (bgm from IRC). There's a few of us
squatting this list and experimenting with Commotion to see how
we can adopt it, including a group of students linked to a
university engineering lab working on implementing babel/ipv6 :)

Mathieu

2014-01-30, 17:01:38 -0500, Josh King (jking at opentechinstitute.org):
> Ah cool, I didn't realize that was R?seau Libre. I was talking with them
> the other day about adding Babel support to Commotion.
> 
> On Thu 30 Jan 2014 04:54:53 PM EST, Mathieu Lutfy wrote:
> > Hi Josh,
> >
> > Some Reseaulibre.ca folks created their own PoE reset using this spec:
> > http://dren.dk/mreset.html
> >
> > It would indeed be very cool to combine this with an arduino/raspi
> > to automate testing.
> >
> > Mathieu
> >
> > 2014-01-30, 16:25:41 -0500, Josh King (jking at opentechinstitute.org):
> "
1744,Commotion-dev, ubiquiti auto-reset,"Fri, 31 Jan 2014 12:52:02 +0100",+0100,L. Aaron Kaplan,"Hi,


On Jan 30, 2014, at 10:25 PM, Josh King <jking at opentechinstitute.org> wrote:

> Hi all,
> 
> I was speculating today about how we might be able to more smoothly
> automate testing on our various testbed networks. Particularly, I was
> thinking about how CONFINE uses a recovery device as a ""parent"" to power
> cycle a stuck node (http://wiki.confine-project.eu/hw:recovery-device).

A minor update is in place here:
The approach which was originally proposed by Musti did not turn out to be doable - unfortunately.

We are now looking at other solutions. RIOT-OS [1]  and 6lowpan came to mind.

> This made me think about how some Ubiquiti POEs have a reset button that
> is able to send a signal over the wire to flip a node into TFTP mode in
> the same way as the reset button on the node itself. I was wondering if
> anyone was familiar with how that process actually worked (I assume
> through sending some hi/low signal on one of the ethernet pins that the
> chipset in the node recognizes), and if it was possible to simulate it
> using an Arduino or similar. It would be great to be able to pair
> testbed nodes with something like a raspberry pi that could remotely
> reset and TFTP nodes with new firmware and run network tests independent
> of the nodes themselves.

Absolutely. But It might be good to have them speak on a different protocol and frequency.
Something like 6lowpan or zigbee.

:)

a.

[1] www.riot-os.org/#about

"
1745,Commotion-dev, mesh speed,"Fri, 31 Jan 2014 11:11:24 -0600",-0600,Ben West,"Hi Marcio,

Does your screenshot show that you're using an HT40 mode, i.e. bonded 20MHz
channels?  I think 150Mbit/s is the maximum possible bitrate that would be
reported for a 20MHz channel, i.e. HT20 mode.  300Mbit/s is the maximum
possible rate for 40MHz channels.

Do note that the bitrate reported does not included factors like protocol
overhead.  Your link shows very good 69 dBm with very few TX retries, so
it's operating under favorable conditions (assuming noise floor is ~90
dBm).  Still, factors like ethernet protocol, 802.11 framing, artifacts of
TCP/IP stack, and driver/CPU limitations on the 2 devices you're testing
probably will cap transfer rate to somewhere around 40-50Mbit/s one way.

I run AA r39154 (not Commotion) on a collection of UBNT M5 radios, used as
a backhaul adhoc mesh, and my own casual tests on transfers rates over this
mesh suggest 20 - 40Mbit/s in actual traffic is going to be upper limit I
can expect.  That is, ~40Mbit/s max for a single hop route, and ~20Mbit/s
max for a 2-hop route, albeit over 40MHz channels on 5.8GHz band.  Channels
on 2.4GHz band will almost certainly be slower due to more ambient noise.

Faster rates would be possible with 3x3 MIMO devices like a UBNT
Powerbridge, e.g. 70-80Mbit/s under ideal conditions.



On Thu, Jan 30, 2014 at 3:35 PM, Josh King <jking at opentechinstitute.org>wrote:

> Hey Marcio,
>
> That's really cool! Have you tried running any throughput tests across
> the link? I see a speedtest in the background of your screenshot, but
> can't read it ;-)
>
> On Thu 30 Jan 2014 05:57:19 AM EST, Marcio Montenegro wrote:
> > Hi developers,
> >
> > I am testing OTI commotion on TP-LINK routers.
> > My small mesh network has only 2 nodes.
> > Node 1 is  WDR-3600 and second node is WDR-3600 (gateway to internet).
> > The 5GHz is the mesh radio and 2.4GHz radio is ap.
> > Today the mesh link reached the speed of 180Mb/s using HT40.
> >
> > https://dl.dropboxusercontent.com/u/25923942/mesh.png
> >
> > Tested using Attitude Adjustment release 39408.
> > Best,
> > Marcio
> >
> >
> >
> > _______________________________________________
> > Commotion-dev mailing list
> > Commotion-dev at lists.chambana.net
> > https://lists.chambana.net/mailman/listinfo/commotion-dev
> --
> Josh King
> Lead Technologist
> The Open Technology Institute
>
>
> _______________________________________________
> Commotion-dev mailing list
> Commotion-dev at lists.chambana.net
> https://lists.chambana.net/mailman/listinfo/commotion-dev
>
"
1746,Commotion-dev, ubiquiti auto-reset,"Fri, 31 Jan 2014 13:53:51 -0500",-0500,Josh King,"Hi Aaron,

No doubt a different frequency would be good. I think our initial use 
case, at least, is a little different from the CONFINE stuff. 
Primarily, we'd be looking to automate testing on our internal testbed 
as part of our CI process. So we could hook Jenkins up to a script that 
would push images out to the supervisor devices as they're built, and 
those would reflash the nodes and run tests. The appeal of getting TFTP 
mode on the Ubiquiti devices is that we could automate reflashing the 
testbed even if a build is bad; we don't have to worry about anything 
on the node working correctly.

There are probably other ways to approach this problem as well, though, 
such as other hardware that's even easier to reflash at a moment's 
notice.

On Fri 31 Jan 2014 06:52:02 AM EST, L. Aaron Kaplan wrote:
> Hi,
>
>
> On Jan 30, 2014, at 10:25 PM, Josh King <jking at opentechinstitute.org> wrote:
>
"
1747,Commotion-dev, Update on commotion-router under x86,"Fri, 31 Jan 2014 13:20:51 -0600",-0600,Ben West,"Teasing out this topic from the thread on UBNT auto-reset ...

To more thoroughly beat the dead horse of running commotion-router as an
x86 guest under VM-Ware, I can now confirm that trunk (and presumably
Barrier Breaker) works just fine under VM-Ware, and specifically with the
TP-Link USB adapter TL-WN821N v3.  This would presumably offer another
option for reflash-free firmware testing.  Indeed, I've run recent
commotion-router as a VM-Ware guest, along with a copy of Puppy Dog linux
as a 2nd guest, and used Firefox on Puppy Dog to complete QuickStart on the
commotion-router guest.

However, the current generation of commotion-router derived from AA seems
to have something wrong at the kernel level, which prevents the USB wifi
adapter from reliably initializing on boot.  This messes with QuickStart
and another auto-configuration tools, who see no wireless interface at all
on power-up and react as expected (i.e. badly).  A possible work-around
I've found is to include the package *usbreset*, and then issue the
usbreset command at some appropriate point during power-up to bring the USB
wifi adapter up, so that Commotion's auto-config routines can proceed
normally.  That is, issuing usbreset at the command line on the VM-Ware
guest commotion-router seems to reliably bring up the USB radio for me,
allowing me to run QuickStart on the Puppy Dog guest.

I realize few people care about VM-Ware, but my suspicion is that since the
kernel-level problem with USB adapters and commotion-router (and OpenWRT)
seems to go away entirely when I exchange the commotion-router guest with
an openwrt-trunk guest, this problem may *also* currently affect folks
wanting to run Commotion with a USB radio on devices like a raspberry PI.

Likewise, commotion-router's eventual migration to Barrier Breaker could
resolve this problem, too.

I'm trying to set aside time to update these presently out-of-date wiki
pages about Commotion under VM-Ware, at least to include the patched I've
been using for mac80211 and the ath9k_htc driver.
http://code.commotionwireless.net/projects/commotion/wiki/Custom-Compile-OpenWRT#Commotion-OpenWRT-x86-architecture
http://code.commotionwireless.net/projects/commotion/wiki/VMware-Player

On Fri, Jan 31, 2014 at 12:53 PM, Josh King <jking at opentechinstitute.org>wrote:


> Primarily, we'd be looking to automate testing on our internal testbed
> as part of our CI process. So we could hook Jenkins up to a script that
> would push images out to the supervisor devices as they're built, and
> those would reflash the nodes and run tests.
"
1748,Commotion-dev, Update on commotion-router under x86,"Fri, 31 Jan 2014 14:27:40 -0500",-0500,Dan Staples,"Thanks so much for this update, Ben! Presumably we shouldn't migrate
Commotion-router to BB until the latter is released as stable, so
hopefully that will be sooner rather than later :)

But it's great to hear OpenWRT trunk is working smoothly in VM-Ware.
That will open up some great possibilities for testing in the future.

Dan

On 01/31/2014 02:20 PM, Ben West wrote:
> Teasing out this topic from the thread on UBNT auto-reset ...
> 
> To more thoroughly beat the dead horse of running commotion-router as an
> x86 guest under VM-Ware, I can now confirm that trunk (and presumably
> Barrier Breaker) works just fine under VM-Ware, and specifically with
> the TP-Link USB adapter TL-WN821N v3.  This would presumably offer
> another option for reflash-free firmware testing.  Indeed, I've run
> recent commotion-router as a VM-Ware guest, along with a copy of Puppy
> Dog linux as a 2nd guest, and used Firefox on Puppy Dog to complete
> QuickStart on the commotion-router guest.
> 
> However, the current generation of commotion-router derived from AA
> seems to have something wrong at the kernel level, which prevents the
> USB wifi adapter from reliably initializing on boot.  This messes with
> QuickStart and another auto-configuration tools, who see no wireless
> interface at all on power-up and react as expected (i.e. badly).  A
> possible work-around I've found is to include the package *usbreset*,
> and then issue the usbreset command at some appropriate point during
> power-up to bring the USB wifi adapter up, so that Commotion's
> auto-config routines can proceed normally.  That is, issuing usbreset at
> the command line on the VM-Ware guest commotion-router seems to reliably
> bring up the USB radio for me, allowing me to run QuickStart on the
> Puppy Dog guest.
> 
> I realize few people care about VM-Ware, but my suspicion is that since
> the kernel-level problem with USB adapters and commotion-router (and
> OpenWRT) seems to go away entirely when I exchange the commotion-router
> guest with an openwrt-trunk guest, this problem may /also/ currently
> affect folks wanting to run Commotion with a USB radio on devices like a
> raspberry PI.
> 
> Likewise, commotion-router's eventual migration to Barrier Breaker could
> resolve this problem, too.
> 
> I'm trying to set aside time to update these presently out-of-date wiki
> pages about Commotion under VM-Ware, at least to include the patched
> I've been using for mac80211 and the ath9k_htc driver.
> http://code.commotionwireless.net/projects/commotion/wiki/Custom-Compile-OpenWRT#Commotion-OpenWRT-x86-architecture
> http://code.commotionwireless.net/projects/commotion/wiki/VMware-Player
> 
> On Fri, Jan 31, 2014 at 12:53 PM, Josh King <jking at opentechinstitute.org
> <mailto:jking at opentechinstitute.org"
1749,Commotion-dev, ubiquiti auto-reset,"Sat, 1 Feb 2014 22:53:30 +0100",+0100,L. Aaron Kaplan,"
On Jan 31, 2014, at 7:53 PM, Josh King <jking at opentechinstitute.org> wrote:

> Hi Aaron,

Hi :)

> 
> No doubt a different frequency would be good. I think our initial use 
> case, at least, is a little different from the CONFINE stuff. 
Sure. 

> Primarily, we'd be looking to automate testing on our internal testbed 
> as part of our CI process. So we could hook Jenkins up to a script that 
> would push images out to the supervisor devices as they're built, and 
> those would reflash the nodes and run tests. The appeal of getting TFTP 
> mode on the Ubiquiti devices is that we could automate reflashing the 
> testbed even if a build is bad; we don't have to worry about anything 
> on the node working correctly.
> 
Makes sense.

> There are probably other ways to approach this problem as well, though, 
> such as other hardware that's even easier to reflash at a moment's 
> notice.
> 
Yes, probably. Please note that I however just noticed the discussion about 
the CONFINE wiki page and the planned reset device and I wanted to point out 
that this particular approach was unfortunately abandoned. We might get back 
to this approach later, but not right now. Reason: lack of resources and time.

Anyway, please keep me updated in case you are successful with jenkins + tftp.
Sounds like a really nice thing to have.

:)
Have a nice evening,
a.

"
1750,Commotion-dev, SSL cert errors for commotionwireless.net,"Sun, 2 Feb 2014 10:46:01 -0600",-0600,Ben West,"Quick heads up that URLs under https://commotionwireless.net/ mentioned on
this listserv seem to be throwing SSL errors now:

commotionwireless.net uses an invalid security certificate. The certificate
is only valid for the following names: *.chambana.net , chambana.net , *.
naf.chambana.net , *.ucimc.chambana.net

(Error code: ssl_error_bad_cert_domain)


-- 
Ben West
http://gowasabi.net
ben at gowasabi.net
314-246-9434
"
1751,Commotion-dev, SSL cert errors for commotionwireless.net,"Sun, 02 Feb 2014 16:11:59 -0500",-0500,Chris Ritzo,"Thanks for reporting, Ben. We have been working to get this resolved as
soon as we can.

On 02/02/2014 11:46 AM, Ben West wrote:
> Quick heads up that URLs under https://commotionwireless.net/ mentioned
> on this listserv seem to be throwing SSL errors now:
> 
> commotionwireless.net <http://commotionwireless.net> uses an invalid
> security certificate. The certificate is only valid for the following
> names: *.chambana.net <http://chambana.net> , chambana.net
> <http://chambana.net> , *.naf.chambana.net <http://naf.chambana.net> ,
> *.ucimc.chambana.net <http://ucimc.chambana.net>
> 
> (Error code: ssl_error_bad_cert_domain)
> 
> 
> -- 
> Ben West
> http://gowasabi.net
> ben at gowasabi.net <mailto:ben at gowasabi.net>
> 314-246-9434
> 
> 
> _______________________________________________
> Commotion-dev mailing list
> Commotion-dev at lists.chambana.net
> https://lists.chambana.net/mailman/listinfo/commotion-dev
> 

-- 
Chris Ritzo
Senior Technologist - Open Technology Institute
New America Foundation
"
1752,Commotion-dev, SSL cert errors for commotionwireless.net,"Mon, 3 Feb 2014 08:57:35 +0100",+0100,L. Aaron Kaplan,"
Hi commotion devs,


On Feb 2, 2014, at 5:46 PM, Ben West <ben at gowasabi.net> wrote:

> Quick heads up that URLs under https://commotionwireless.net/ mentioned on this listserv seem to be throwing SSL errors now:
> 
> commotionwireless.net uses an invalid security certificate. The certificate is only valid for the following names: *.chambana.net , chambana.net , *.naf.chambana.net , *.ucimc.chambana.net
> 
> (Error code: ssl_error_bad_cert_domain)
> 
> 

You can re-test easily with ssllabs.com/ssltest/analyze.html?d=commotionwireless.net


How to quickly get a startssl.com certificate with screenshots: https://github.com/ioerror/duraconf/tree/master/startssl


For good crypto settings go to www.bettercrypto.org and copy & paste the cipherstring for hardened settings.
(You might have to enable RC4 in addition if you do not want to exclude WinXP and Java users - but on the other hand win xp is not really supported anymore by MS)

a.





"
1753,Commotion-dev, UX & Commotion,"Tue, 4 Feb 2014 09:58:13 -0500",-0500,Georgia Bullen,"Part 2 of the article on UX & Commotion is out today:
http://opensource.com/life/14/2/Five-steps-using-design-open-source-project

-Georgia



On Tue, Jan 28, 2014 at 3:50 PM, Georgia Bullen <
georgia at opentechinstitute.org> wrote:

> Hi All,
>
> MarinaZ & Jen Wike from Red Hat asked me to participate in their women in
> Open Source series on OpenSource.com, so I ended up talking about the UI
> review process that we did as part of the Version 1 Release.
>
> The first of two just went up today!
>
> Check it out here:
> http://opensource.com/life/14/1/how-to-leverage-user-design
>
> -Georgia
>
> --
> Georgia Bullen
> Field Operations Technologist, Open Technology Institute<http://oti.newamerica.net/>
> New America Foundation
"
1754,Commotion-dev, Stack Smashing Protection on OpenWRT,"Fri, 07 Feb 2014 11:26:44 -0500",-0500,Andrew Reynolds,"Hi all,

Does anyone have experience with OpenWRT's stack smashing protection
toolchain option? I've been trying to compile Commotion with SSP and
haven't had any luck.

I can enable SSP in menuconfig and build the Commotion image with no
problems, but that doesn't seem to add the stack-protector flag to any
of the build options.

I've tried adding -fstack-protector, -fstack-protector-all, and
-fstack-protector-strong to CFLAGS, CXXFLAGS, and TARGET_CFLAGS in the
Makefile of my test package, which contains a vulnerable buffer
overflow. In each case, the vulnerability is still exploitable.

Any idea what I'm missing?

-andrew

"
1755,Commotion-dev, Stack Smashing Protection on OpenWRT,"Fri, 7 Feb 2014 21:29:07 +0100",+0100,L. Aaron Kaplan,"
On Feb 7, 2014, at 5:26 PM, Andrew Reynolds <andrew at opentechinstitute.org> wrote:

> Hi all,
> 
> Does anyone have experience with OpenWRT's stack smashing protection
> toolchain option? I've been trying to compile Commotion with SSP and
> haven't had any luck.

Yup! I regularly have the very same issue with that in the openwrt build system.
Seems like it is not very well tested by developers. But IMHO that should be highly used.

While talking about these security topics:
The other thing that I definitely recommend  is to take a look at the random number generators and their useage in openwrt.
It might make sense to generate keys somewhere else and copy them to the embedded device (in case that it possible) or to at least wait for some time and collect network traffic and then generate new keys.
By default the entropy is very low.



"
1756,Commotion-dev, Stack Smashing Protection on OpenWRT,"Fri, 07 Feb 2014 18:08:10 -0300",-0300,=?utf-8?Q?Nicol=C3=A1s?= Reynolds,"""L. Aaron Kaplan"" <aaron at lo-res.org> writes:

> On Feb 7, 2014, at 5:26 PM, Andrew Reynolds <andrew at opentechinstitute.org> wrote:
>
"
1757,Commotion-dev, Stack Smashing Protection on OpenWRT,"Fri, 07 Feb 2014 16:11:32 -0500",-0500,Andrew Reynolds,"On 02/07/2014 03:29 PM, L. Aaron Kaplan wrote:
> On Feb 7, 2014, at 5:26 PM, Andrew Reynolds <andrew at opentechinstitute.org> wrote:
"
1758,Commotion-dev, Stack Smashing Protection on OpenWRT,"Sat, 8 Feb 2014 10:50:13 +0100",+0100,L. Aaron Kaplan,"
On Feb 7, 2014, at 10:11 PM, Andrew Reynolds <andrew at opentechinstitute.org> wrote:

> On 02/07/2014 03:29 PM, L. Aaron Kaplan wrote:
"
1759,Commotion-dev, New Commotion Build?,"Wed, 12 Feb 2014 17:56:08 -0500",-0500,Dan Staples,"Hi Anderson,

We also noticed the bug you are talking about, and there was a recent
code change that should have fixed it. You can see the fix here:
https://github.com/opentechinstitute/commotiond/pull/82

Andy's bug report is here, and could probably be closed out:
https://github.com/opentechinstitute/commotion-router/issues/93

Regarding a new version, we are planning to push out version 1.1 by the
end of the month, which will contain a number of bug fixes. When does
the flashing section of the Digital Stewards training start?

Thanks for bringing this up!

Dan

On 02/12/2014 03:23 PM, Anderson Walworth wrote:
> Hi Commotion Friends
> 
> I tested commotion 1.0 with Andy Gunn when he was in town and we
> installed commotion 
> on one Nanostation and one Picostation. After the initial install
> commotion worked well but as soon as one was rebooted they quit meshing
> with each other.
> 
> We re-flashed the routers and got the same result the second time as well.
> 
> I believe Andy put in a Bug fix request with the developers but I
> wondered if you knew when the next build would be ready to go or if
> there was a work around? We can't deploy the new version if it is
> broken. I've been monitoring the commotion email groups and surprisingly
> no-one has mentioned this issue.
> 
> We are also teaching a new batch of digital stewards so I am hoping it
> might get fixed before we get to router flashing part of the curriculum.
> 
> Good luck to you all and thanks for all of your help!
> 
> Anderson
> 
> Allied Media Projects
> Detroit Digital Justice Coalition
> 
> 
> 
> _______________________________________________
> Commotion-discuss mailing list
> Commotion-discuss at lists.chambana.net
> https://lists.chambana.net/mailman/listinfo/commotion-discuss
> 

-- 
Dan Staples

Open Technology Institute
https://commotionwireless.net
OpenPGP key: http://disman.tl/pgp.asc
Fingerprint: 2480 095D 4B16 436F 35AB 7305 F670 74ED BD86 43A9
"
1760,Commotion-dev, Updating the OLSR-Visualizer,"Thu, 20 Feb 2014 11:10:27 -0500",-0500,Seamus Tuohy,"Hello All,

We will be doing some work on the OLSR-Visualizer over the next two
months. We want to get your thoughts to make sure that we don't remove
any useful functionality, and that we improve the major pain points that
currently exist. As such, we would appreciate feedback to the following
questions.


1) How do you currently use the olsr-viz? (e.g. What types of tasks is
the visualizer better for than other status menu's? What other
information do you compare the visualizer against in order to fully
complete the main tasks you use the viz for?)

2) What is most important to you from the current viz. (e.g. What parts
of the current visualizer are vital to the tasks that you do? What would
you miss if we removed it?)

3) What parts of the current viz do you not like? (e.g. What are the
pain points that make using the viz difficult, confusing, or annoying?)


We appreciate your feedback.

s2e
"
1761,Commotion-dev, Updating the OLSR-Visualizer,"Thu, 20 Feb 2014 11:29:33 -0500",-0500,Seamus Tuohy,"To start, here are some of the thoughts from the small meeting a few of
us here in house had. (Inline)

On 02/20/2014 11:10 AM, Seamus Tuohy wrote:
> Hello All,
> 
> We will be doing some work on the OLSR-Visualizer over the next two
> months. We want to get your thoughts to make sure that we don't remove
> any useful functionality, and that we improve the major pain points that
> currently exist. As such, we would appreciate feedback to the following
> questions.
> 
> 
> 1) How do you currently use the olsr-viz? (e.g. What types of tasks is
> the visualizer better for than other status menu's? What other
> information do you compare the visualizer against in order to fully
> complete the main tasks you use the viz for?)
> 

Currently we usually look at the viz for a quick snapshot of the network
health.

When we are looking to see if a link works, or if a node is online we
turn it on and scan for that link or node. When we have a problem we
turn on the viz and look for the color of the link to see if it is a
routing problem.

We often compare viz data with ping tests to the services/internet that
we are trying to reach through those nodes.

> 2) What is most important to you from the current viz. (e.g. What parts
> of the current visualizer are vital to the tasks that you do? What would
> you miss if we removed it?)
> 

The colored lines, node names, and different icons for gateways vs.
non-gateway nodes are really useful for getting an at-a-glance view of
the network. Though, we would like solid lines and the nodes to be solid
colors so it is easier to identify things at a glance.

> 3) What parts of the current viz do you not like? (e.g. What are the
> pain points that make using the viz difficult, confusing, or annoying?)
> 

We HATE the auto-sort jitter/movement of the current viz. It means that
we have to spend time clicking and dragging nodes back on screen to see
what the network looks like.  The ETX value is also confusing to new
node administrators Since it is on a scale of [1-5/infinity]. It should
probably be replaced by another value on a scale of 0-100% or some other
scale that makes sense to people who don't have OLSR's link quality
algorithm memorized.

> 
> We appreciate your feedback.
> 
> s2e
> _______________________________________________
> Commotion-dev mailing list
> Commotion-dev at lists.chambana.net
> https://lists.chambana.net/mailman/listinfo/commotion-dev
> 
> 
"
1762,Commotion-dev, New Commotion Build?,"Wed, 12 Feb 2014 15:23:14 -0500",-0500,Anderson Walworth,"Hi Commotion Friends

I tested commotion 1.0 with Andy Gunn when he was in town and we installed
commotion
on one Nanostation and one Picostation. After the initial install commotion
worked well but as soon as one was rebooted they quit meshing with each
other.

We re-flashed the routers and got the same result the second time as well.

I believe Andy put in a Bug fix request with the developers but I wondered
if you knew when the next build would be ready to go or if there was a work
around? We can't deploy the new version if it is broken. I've been
monitoring the commotion email groups and surprisingly no-one has mentioned
this issue.

We are also teaching a new batch of digital stewards so I am hoping it
might get fixed before we get to router flashing part of the curriculum.

Good luck to you all and thanks for all of your help!

Anderson

Allied Media Projects
Detroit Digital Justice Coalition
"
1763,Commotion-dev, adding Babel + IPv6 support - follow-up,"Tue, 4 Mar 2014 09:06:30 -0500",-0500,Linic,"Hi everyone,

In the middle of January, we started working on adding Babel with IPv6 
support to the Commotion firmware. Right now we are here :

1. We have an auto-configuration script that is close to completion for 
Babel.
Babel should work natively with IPv4 and IPv6 in the end.

2. We have implemented scripts to auto-assign IPv6 prefixes to nodes 
based on RFC4193 and BCP106.
Prefixes are used to issue a default unique-local address to the network 
interface used for the lan where computers that host services or connect 
to the mesh are connected. In the end, the node will also be able to 
dynamically assign addresses to this lan. A 48 bit prefix is generated. 
It leaves 16 bits for the node owner for subnetting as needed.

3. We have made some modifications to the web interface to be able to 
activate Babel within it.
Right now, selecting Babel as the ?Protocol of the new interface? starts 
babeld and assigns an IPv6 prefix if it's not already present. From what 
we understand, the web interface is a very important piece of the 
Commotion firmware. We understand that our modifications here may not be 
accepted.

During the month, we will start to divide these functionalities and 
create pull-request. The most important points for us are 1. and 2.

Thank you in advance for your help in the next days and have a nice day!

Nicolas Brochu
Developer
Team R?seau Libre
?cole Polytechnique de Montr?al

"
1764,Commotion-dev, adding Babel + IPv6 support - follow-up,"Wed, 05 Mar 2014 14:40:34 -0500",-0500,Dan Staples,"Thanks for the update, this is very exciting to hear! I can't wait until
there is a version of the firmware with Babel that we can try out.

Dan

On 03/04/2014 09:06 AM, Linic wrote:
> Hi everyone,
> 
> In the middle of January, we started working on adding Babel with IPv6
> support to the Commotion firmware. Right now we are here :
> 
> 1. We have an auto-configuration script that is close to completion for
> Babel.
> Babel should work natively with IPv4 and IPv6 in the end.
> 
> 2. We have implemented scripts to auto-assign IPv6 prefixes to nodes
> based on RFC4193 and BCP106.
> Prefixes are used to issue a default unique-local address to the network
> interface used for the lan where computers that host services or connect
> to the mesh are connected. In the end, the node will also be able to
> dynamically assign addresses to this lan. A 48 bit prefix is generated.
> It leaves 16 bits for the node owner for subnetting as needed.
> 
> 3. We have made some modifications to the web interface to be able to
> activate Babel within it.
> Right now, selecting Babel as the ?Protocol of the new interface? starts
> babeld and assigns an IPv6 prefix if it's not already present. From what
> we understand, the web interface is a very important piece of the
> Commotion firmware. We understand that our modifications here may not be
> accepted.
> 
> During the month, we will start to divide these functionalities and
> create pull-request. The most important points for us are 1. and 2.
> 
> Thank you in advance for your help in the next days and have a nice day!
> 
> Nicolas Brochu
> Developer
> Team R?seau Libre
> ?cole Polytechnique de Montr?al
> 
> _______________________________________________
> Commotion-dev mailing list
> Commotion-dev at lists.chambana.net
> https://lists.chambana.net/mailman/listinfo/commotion-dev
> 

-- 
Dan Staples

Open Technology Institute
https://commotionwireless.net
OpenPGP key: http://disman.tl/pgp.asc
Fingerprint: 2480 095D 4B16 436F 35AB 7305 F670 74ED BD86 43A9
"
1765,Commotion-dev, adding Babel + IPv6 support - follow-up,"Fri, 07 Mar 2014 10:09:14 -0500",-0500,Seamus Tuohy,"Hey,

On #3, do you have a repo that I can look at? I would be more than happy
to take a look and possibly send some pull requests / issues your way to
make sure it easily integrates into our interface work.

s2e

On 03/04/2014 09:06 AM, Linic wrote:
> Hi everyone,
> 
> In the middle of January, we started working on adding Babel with IPv6
> support to the Commotion firmware. Right now we are here :
> 
> 1. We have an auto-configuration script that is close to completion for
> Babel.
> Babel should work natively with IPv4 and IPv6 in the end.
> 
> 2. We have implemented scripts to auto-assign IPv6 prefixes to nodes
> based on RFC4193 and BCP106.
> Prefixes are used to issue a default unique-local address to the network
> interface used for the lan where computers that host services or connect
> to the mesh are connected. In the end, the node will also be able to
> dynamically assign addresses to this lan. A 48 bit prefix is generated.
> It leaves 16 bits for the node owner for subnetting as needed.
> 
> 3. We have made some modifications to the web interface to be able to
> activate Babel within it.
> Right now, selecting Babel as the ?Protocol of the new interface? starts
> babeld and assigns an IPv6 prefix if it's not already present. From what
> we understand, the web interface is a very important piece of the
> Commotion firmware. We understand that our modifications here may not be
> accepted.
> 
> During the month, we will start to divide these functionalities and
> create pull-request. The most important points for us are 1. and 2.
> 
> Thank you in advance for your help in the next days and have a nice day!
> 
> Nicolas Brochu
> Developer
> Team R?seau Libre
> ?cole Polytechnique de Montr?al
> 
> _______________________________________________
> Commotion-dev mailing list
> Commotion-dev at lists.chambana.net
> https://lists.chambana.net/mailman/listinfo/commotion-dev
> 
> 
"
1766,Commotion-dev,  OPW-2014,"Sun, 9 Mar 2014 22:02:14 +0200",+0200,Rania Nabil,"Hello

I want to join this project [1] in OPW-2014, i contacted dismantl and
he asked me to check the viability of running OpenWRT on the Raspberry
Pi, that's [2] what i reached

[1] https://wiki.commotionwireless.net/doku.php?id=project_management:opw#commotion_on_raspberry_pi
[2] http://raniarho.wordpress.com/2014/03/07/installing-openwrt-on-a-raspberry-pi/

-- 
Sincerely,
Rania Nabil Refaat

Fourth year, electrical department, Computer System Engineering, ASU.
Ain shams university Student union scientific committee member
CORD EGY'11 IT head.
PRAX web programming instructor.

"
1767,Commotion-dev, OPW Project Idea #4,"Mon, 10 Mar 2014 12:54:35 +0530",+0530,Sheena Jain,"Hello Everyone,
I am Sheena Jain ,an undergraduate student from BITS, Pilani University ,
India. I was going through the OPW project ideas and the one wherein we
have to add a QoS web interface to Commotion which is modeled after the QoS
interface in the Easy Tomato firmware is the one for which i would really
to work . I went through the Easy Tomato firmware and all charged up to
start working... Can you all suggest me the features that you all would
like to have in the Qos Web interface ??

Thanks a lot for help in advance..
I am really looking forward to this project.. :)

Regards,
Sheena Jain
"
1768,Commotion-dev, OPW Project Idea #4,"Tue, 11 Mar 2014 17:05:56 +0530",+0530,Sheena Jain,"Hey all,
This is just a reminder mail to know as to what features the QoS Web
Interface should have? I am really excited to start working and put some
new user friendly features to it .
I am new to it and I need help from all of you guys.

Thanks once again !
Eagerly waiting for a reply :)

Regards,
Sheena Jain


On Mon, Mar 10, 2014 at 12:54 PM, Sheena Jain <me at sheena.in> wrote:

> Hello Everyone,
> I am Sheena Jain ,an undergraduate student from BITS, Pilani University ,
> India. I was going through the OPW project ideas and the one wherein we
> have to add a QoS web interface to Commotion which is modeled after the QoS
> interface in the Easy Tomato firmware is the one for which i would really
> to work . I went through the Easy Tomato firmware and all charged up to
> start working... Can you all suggest me the features that you all would
> like to have in the Qos Web interface ??
>
> Thanks a lot for help in advance..
> I am really looking forward to this project.. :)
>
> Regards,
> Sheena Jain
>
>
"
1769,Commotion-dev,  adding Babel + IPv6 support - follow-up 2,"Fri, 21 Mar 2014 11:00:39 -0400",-0400,Linic,"Hi,

BABEL + IPv6
"
1770,Commotion-dev, adding Babel + IPv6 support - follow-up 2,"Fri, 21 Mar 2014 13:55:12 -0400",-0400,Seamus Tuohy,"Hey,

I can't speak to the non-LuCI changes. You can go ahead and send a pull
request for the LuCI-menu changes though. I will be the person
reviewing, and like to have any revision/code-question conversations
attached to the code.

The LuCI work will have to wait on the rest of Commotion to be merged
in. But, I will try to get you the first round feedback by Wednesday the
26th on your LuCI changes.

We are excited to get your work integrated. I actually just added Babel
into the Commotion config-editor in the upcoming Commotion desktop
client in anticipation of this work being finished before the client.
Good to see I was not totally off base.

Also, Genevi?ve and xmbi are mentioned in the latest release notes for
some R1.1 repos as ""authors"" because we listed all contributors for this
point release. I don't know who xmbi is, but I only mentioned them by
their github account.

If you would like us to simply mention ""Team R?seau Libre "" as a whole,
would like to have your ""real"" names used in releases where you have
contributed (I am looking at you xmbi), or would like us to remove
references to you in our future release notes let us know.

Thanks again for all your work!

s2e


On 03/21/2014 11:00 AM, Linic wrote:
> Hi,
> 
> BABEL + IPv6
> "
1771,Commotion-dev, Possible issues with the Pre 1.1 image,"Fri, 21 Mar 2014 15:04:19 -0400",-0400,Anderson Walworth,"Hey we installed the Pre 1.1 image on some 2 pico's and 3 Nanos during a
digital stewards class and had the following 3 issues:

1.
After completing the setup wizard the routers were meshing.
We all went back and changed the ssid for the access point  for each router

received  a ""cannot connect to OLSR Deamon"" error and the mesh broke
between the routers.

2.
If someone initially clicked administration instead of setup wizard there
seemed no intuitive way to get back to the setup wizard. ( I might just be
missing something )

3.  One of the picos when going to certain pages in commotion would display
just text
with no buttons or anything. We reflashed and it seemed to fix the problem.

Sorry I couldn't be more specific!

Anderson Walworth




-- 
Allied Media Projects
Detroit Digital Justice Coalition
"
1772,Commotion-dev, adding Babel + IPv6 support - follow-up 2,"Sat, 22 Mar 2014 16:20:16 +0000",+0000,Martin Lachance,"Hi Seamus,
Sorry I just added my name to my GitHub account (I am xbmi).For the R1.1 you can state my name instead of my username if you want, but it was really just a small fix.For all the pull requests coming from the ""reseaulibre-polymtl"" GitHub repos, it would be great if you can mention ""Team R?seauLibre"" as a whole as you suggested! I tried to make the pull-request as the reseaulibre-polymtl 'organization' but couldn't figure out how or if it's even possible.
Thanks for your time!
Martin Lachance

From: Seamus Tuohy <s2e at opentechinstitute.org>Date: Fri, Mar 21, 2014 at 1:55 PMSubject: Re: [Commotion-dev] adding Babel + IPv6 support - follow-up 2To: commotion-dev at lists.chambana.netHey,I can't speak to the non-LuCI changes. You can go ahead and send a pullrequest for the LuCI-menu changes though. I will be the personreviewing, and like to have any revision/code-question conversationsattached to the code.The LuCI work will have to wait on the rest of Commotion to be mergedin. But, I will try to get you the first round feedback by Wednesday the26th on your LuCI changes.We are excited to get your work integrated. I actually just added Babelinto the Commotion config-editor in the upcoming Commotion desktopclient in anticipation of this work being finished before the client.Good to see I was not totally off base.Also, Genevi?ve and xmbi are mentioned in the latest release notes forsome R1.1 repos as ""authors"" because we listed all contributors for thispoint release. I don't know who xmbi is, but I only mentioned them bytheir github account.If you would like us to simply mention ""Team R?seau Libre "" as a whole,would like to have your ""real"" names used in releases where you havecontributed (I am looking at you xmbi), or would like us to removereferences to you in our future release notes let us know.Thanks again for all your work!s2e

On 03/21/2014 11:00 AM, Linic wrote:
> Hi,
>
> BABEL + IPv6
> "
1773,Commotion-dev, iOS gets real ad-hoc communications,"Mon, 24 Mar 2014 10:37:00 +1030",+1030,Paul Gardner-Stephen,"http://www.cultofmac.com/271225/appreciated-ios-7-feature-will-change-world/

This is very significant.  I have poked my contact in the Android team at
Google to see if they have any comment, as Apple is now well ahead of
Android in terms of this functionality.

Paul.
"
1774,Commotion-dev, iOS gets real ad-hoc communications,"Sun, 23 Mar 2014 20:38:41 -0400",-0400,Nathan of Guardian,"On 03/23/2014 08:07 PM, Paul Gardner-Stephen wrote:
> http://www.cultofmac.com/271225/appreciated-ios-7-feature-will-change-world/
> 
> This is very significant.  I have poked my contact in the Android team at
> Google to see if they have any comment, as Apple is now well ahead of
> Android in terms of this functionality.

Isn't that article a bit over stating what the Multipeer Connectivity
framework provides? Isn't the framework more like a super-bonjour, then
a full-fledged IP mesh?

Based on what I am reading here:
https://developer.apple.com/library/ios/documentation/MultipeerConnectivity/Reference/MultipeerConnectivityFramework/Introduction/Introduction.html

it seems that way.

The only that seems new to me is that you can use it over Bluetooth
without specifically having to pair... is it also somehow automatically
using adhoc wifi?

+n

"
1775,Commotion-dev, iOS gets real ad-hoc communications,"Mon, 24 Mar 2014 12:43:01 +1030",+1030,Paul Gardner-Stephen,"Hello,

>From a serval perspective, we don't need a true IP mesh, as we can use any
underlying transport on which to run our overlay.  So for us it is
potentially a big step forward.

Paul.


On Mon, Mar 24, 2014 at 11:08 AM, Nathan of Guardian <
nathan at guardianproject.info> wrote:

> On 03/23/2014 08:07 PM, Paul Gardner-Stephen wrote:
> >
> http://www.cultofmac.com/271225/appreciated-ios-7-feature-will-change-world/
> >
> > This is very significant.  I have poked my contact in the Android team at
> > Google to see if they have any comment, as Apple is now well ahead of
> > Android in terms of this functionality.
>
> Isn't that article a bit over stating what the Multipeer Connectivity
> framework provides? Isn't the framework more like a super-bonjour, then
> a full-fledged IP mesh?
>
> Based on what I am reading here:
>
> https://developer.apple.com/library/ios/documentation/MultipeerConnectivity/Reference/MultipeerConnectivityFramework/Introduction/Introduction.html
>
> it seems that way.
>
> The only that seems new to me is that you can use it over Bluetooth
> without specifically having to pair... is it also somehow automatically
> using adhoc wifi?
>
> +n
>
"
1776,Commotion-dev, iOS gets real ad-hoc communications,"Sun, 23 Mar 2014 22:28:27 -0400",-0400,Will Hawkins,"

On 3/23/14, 10:13 PM, Paul Gardner-Stephen wrote:
> Hello,
>
>  From a serval perspective, we don't need a true IP mesh, as we can use
> any underlying transport on which to run our overlay.  So for us it is
> potentially a big step forward.
>
> Paul.
>
>
> On Mon, Mar 24, 2014 at 11:08 AM, Nathan of Guardian
> <nathan at guardianproject.info <mailto:nathan at guardianproject.info"
1777,Commotion-dev, [serval-project-dev] iOS gets real ad-hoc,"Mon, 24 Mar 2014 10:52:42 +1030",+1030,Jeremy Lakeman,">From a quick google search it appears that apple are using Bonjour over
Bluetooth for advertising and creating networks. And it appears that
OpenGarden are doing some form of multi-hop routing.

This seems to be the same underlying technology that is used by AirDrop.


On Mon, Mar 24, 2014 at 10:37 AM, Paul Gardner-Stephen <
paul at servalproject.org> wrote:

>
> http://www.cultofmac.com/271225/appreciated-ios-7-feature-will-change-world/
>
> This is very significant.  I have poked my contact in the Android team at
> Google to see if they have any comment, as Apple is now well ahead of
> Android in terms of this functionality.
>
> Paul.
>
> --
> You received this message because you are subscribed to the Google Groups
> ""Serval Project Developers"" group.
> To unsubscribe from this group and stop receiving emails from it, send an
> email to serval-project-developers+unsubscribe at googlegroups.com.
> To post to this group, send email to
> serval-project-developers at googlegroups.com.
> Visit this group at
> http://groups.google.com/group/serval-project-developers.
> For more options, visit https://groups.google.com/d/optout.
>
"
1778,Commotion-dev, Possible issues with the Pre 1.1 image,"Tue, 25 Mar 2014 11:24:59 -0400",-0400,Dan Staples,"Thanks for the info, Anderson! Hopefully some of these issues will be
fixed in the final 1.1 release. Maybe Seamus can give more thought on
the Setup Wizard navigation issue?

Dan

On 03/21/2014 03:04 PM, Anderson Walworth wrote:
> Hey we installed the Pre 1.1 image on some 2 pico's and 3 Nanos during a
> digital stewards class and had the following 3 issues:
> 
> 1.
> After completing the setup wizard the routers were meshing.
> We all went back and changed the ssid for the access point  for each router
> 
> received  a ""cannot connect to OLSR Deamon"" error and the mesh broke
> between the routers.
> 
> 2.
> If someone initially clicked administration instead of setup wizard
> there seemed no intuitive way to get back to the setup wizard. ( I might
> just be missing something )
> 
> 3.  One of the picos when going to certain pages in commotion would
> display just text
> with no buttons or anything. We reflashed and it seemed to fix the problem.
> 
> Sorry I couldn't be more specific!
> 
> Anderson Walworth
> 
> 
> 
> 
> -- 
> Allied Media Projects
> Detroit Digital Justice Coalition
> 
> 
> 
> _______________________________________________
> Commotion-dev mailing list
> Commotion-dev at lists.chambana.net
> https://lists.chambana.net/mailman/listinfo/commotion-dev
> 

-- 
Dan Staples

Open Technology Institute
https://commotionwireless.net
OpenPGP key: http://disman.tl/pgp.asc
Fingerprint: 2480 095D 4B16 436F 35AB 7305 F670 74ED BD86 43A9
"
1779,Commotion-dev, adding Babel + IPv6 support - follow-up 2,"Wed, 26 Mar 2014 14:47:24 -0400",-0400,Linic,"Hi,

We made a small modification to the header of the web interface. The 
branch for the the pull-request is : 
https://github.com/opentechinstitute/luci-theme-commotion/pull/37. All 
necessary information is commented in the code.

Team R?seau Libre
?cole Polytechnique de Montr?al

On 2014-03-21 11:00, Linic wrote:
> Hi,
>
> BABEL + IPv6
> "
1780,Commotion-dev, Possible issues with the Pre 1.1 image,"Mon, 31 Mar 2014 16:57:14 -0400",-0400,Andy Gunn,"I just wanted to follow up on this - thanks for sending along the report
Anderson.

Have we seen the ""Cannot connect to OLSR daemon"" error before? I can try
and repeat it if you give me a bit more info on how you set-up the nodes
and what you changed Anderson...

Seamus - any thoughts on the navigation issue Anderson mentions?


On 03/25/2014 11:24 AM, Dan Staples wrote:
> Thanks for the info, Anderson! Hopefully some of these issues will be
> fixed in the final 1.1 release. Maybe Seamus can give more thought on
> the Setup Wizard navigation issue?
> 
> Dan
> 
> On 03/21/2014 03:04 PM, Anderson Walworth wrote:
"
1781,Commotion-dev, 4/5 NYC: Eyebeam Square: An Internet Blackout,"Fri, 04 Apr 2014 10:22:55 -0400",-0400,Dan Staples,"Sorry for not sending this out sooner. But if you'll be in NYC tomorrow,
come just us and Guardian Project for this fun event!

http://eyebeam.org/events/eyebeam-square-an-internet-blackout-simulation-event

"
1782,Commotion-dev, Fwd: OpenSSL vulnerability,"Mon, 7 Apr 2014 21:16:59 -0500",-0500,Ben West,"About the exploit:
http://heartbleed.com/

The fixed version (released recently) is 1.01g+:
https://www.openssl.org/news/secadv_20140407.txt

Trunk appears to be using 1.01f:
https://dev.openwrt.org/browser/trunk/package/libs/openssl/Makefile

AA is on 1.01e
https://dev.openwrt.org/browser/tags/attitude_adjustment_12.09/package/openssl/Makefile?rev=40420

-- 
Ben West
http://gowasabi.net
ben at gowasabi.net
314-246-9434



-- 
Ben West
http://gowasabi.net
ben at gowasabi.net
314-246-9434
"
1783,Commotion-dev, Fwd: OpenSSL vulnerability,"Wed, 09 Apr 2014 12:42:00 -0400",-0400,Chris Ritzo,"Ben,
Thanks for opening this discussion on the hearbleed exploit. This is
definitely an issue with OpenSSL on openwrt.

For Commotion, we are using cyassl rather than openssl, so it should be
less of an issue for Commotion. Due dilligence though, we are testing
the exploit against Commotion nodes running cyassl to confirm that we're ok.

-Chris


On 04/07/2014 10:16 PM, Ben West wrote:
> About the exploit:
> http://heartbleed.com/
> 
> The fixed version (released recently) is 1.01g+:
> https://www.openssl.org/news/secadv_20140407.txt
> 
> Trunk appears to be using 1.01f:
> https://dev.openwrt.org/browser/trunk/package/libs/openssl/Makefile
> 
> AA is on 1.01e
> https://dev.openwrt.org/browser/tags/attitude_adjustment_12.09/package/openssl/Makefile?rev=40420
> 
> -- 
> Ben West
> http://gowasabi.net
> ben at gowasabi.net <mailto:ben at gowasabi.net>
> 314-246-9434 <tel:314-246-9434>
> 
> 
> 
> -- 
> Ben West
> http://gowasabi.net
> ben at gowasabi.net <mailto:ben at gowasabi.net>
> 314-246-9434
> 
> 
> _______________________________________________
> Commotion-dev mailing list
> Commotion-dev at lists.chambana.net
> https://lists.chambana.net/mailman/listinfo/commotion-dev
> 

"
1784,Commotion-dev, Fwd: OpenSSL vulnerability,"Wed, 09 Apr 2014 14:14:14 -0400",-0400,Seamus Tuohy,"Just used the current nmap-script heartbleed vulnerability test. Per
that test the routers are not vulnerable as they closed the connection
and returned no data.


s2e

On 04/09/2014 12:42 PM, Chris Ritzo wrote:
> Ben,
> Thanks for opening this discussion on the hearbleed exploit. This is
> definitely an issue with OpenSSL on openwrt.
> 
> For Commotion, we are using cyassl rather than openssl, so it should be
> less of an issue for Commotion. Due dilligence though, we are testing
> the exploit against Commotion nodes running cyassl to confirm that we're ok.
> 
> -Chris
> 
> 
> On 04/07/2014 10:16 PM, Ben West wrote:
"
1785,Commotion-dev, Fwd: OpenSSL vulnerability,"Wed, 09 Apr 2014 17:32:32 -0400",-0400,Josh King,"Thanks Seamus! That's good news.

On 04/09/2014 02:14 PM, Seamus Tuohy wrote:
> Just used the current nmap-script heartbleed vulnerability test. Per
> that test the routers are not vulnerable as they closed the connection
> and returned no data.
> 
> 
> s2e
> 
> On 04/09/2014 12:42 PM, Chris Ritzo wrote:
"
1786,Commotion-dev, Automating Browser Testing,"Thu, 10 Apr 2014 11:27:03 -0400",-0400,Andrew Reynolds,"Hi all,

We're doing a lot of manual testing for our Commotion releases these
days, including a lot of browser-based tests of the luci interfaces. For
example, we check all fields for proper input validation, make sure file
upload widgets work, check all the links, etc.

I've been looking at Selenium to try to automate some of the work. It
seems popular and integrates with Jenkins but I've never actually used it.

Have any of you used Selenium or similar products enough to favor one or
the other?

-andrew

"
1787,Commotion-dev, Automating Browser Testing,"Thu, 10 Apr 2014 11:55:18 -0400",-0400,Bill Comisky,"My 2 cents: I've been using Selenium for a few years through the perl
bindings, and have been pretty happy with it.   The Selenium IDE plugin for
firefox makes it pretty easy to construct the selectors for your browser
actions.  I've used it primarily with firefox, so can't speak to
cross-browser testing.

Bill


On Thu, Apr 10, 2014 at 11:27 AM, Andrew Reynolds <
andrew at opentechinstitute.org> wrote:

> Hi all,
>
> We're doing a lot of manual testing for our Commotion releases these
> days, including a lot of browser-based tests of the luci interfaces. For
> example, we check all fields for proper input validation, make sure file
> upload widgets work, check all the links, etc.
>
> I've been looking at Selenium to try to automate some of the work. It
> seems popular and integrates with Jenkins but I've never actually used it.
>
> Have any of you used Selenium or similar products enough to favor one or
> the other?
>
> -andrew
>
>
> _______________________________________________
> Commotion-dev mailing list
> Commotion-dev at lists.chambana.net
> https://lists.chambana.net/mailman/listinfo/commotion-dev
>
>
"
1788,Commotion-dev, Mesh Streaming Protocol initial documentation,"Fri, 11 Apr 2014 13:40:25 +0930",+0930,Paul Gardner-Stephen,"Hello all,

We have reached the first technical milestone towards MSP, and the second
is not far behind.

See below for documentation.  The wiki contains pointers to the
documentation in the git repository itself.

http://developer.servalproject.org/dokuwiki/doku.php?id=content:activity:naf6

Please link from your own wiki as appropriate.

Paul.
"
1789,Commotion-dev, Picostation Flash Problems,"Wed, 16 Apr 2014 16:28:26 -0400",-0400,Anderson Walworth,"I'm trying to flash a couple of  picostations with 1.1rc1 following
instructions on the commotion site.
After I flash I can not for the life of me get the routers to give me an IP
address
I have my laptops set to dhcp
I've restarted the routers but I only get loopback address.

Anyone else experiencing this problem with the picostation and 1.1rc1?
Thanks!

 Anderson
-- 
Allied Media Projects
Detroit Digital Justice Coalition
"
1790,Commotion-dev, Picostation Flash Problems,"Wed, 16 Apr 2014 16:41:23 -0400",-0400,Ryan Gerety,"I had that problem at the Eyebeam event, but I restarted the router  
and then after a good bit of time (a minute or two, or maybe more) it  
gave me a lease.

On Apr 16, 2014, at 4:28 PM, Anderson Walworth wrote:

> I'm trying to flash a couple of  picostations with 1.1rc1 following  
> instructions on the commotion site.
> After I flash I can not for the life of me get the routers to give  
> me an IP address
> I have my laptops set to dhcp
> I've restarted the routers but I only get loopback address.
>
> Anyone else experiencing this problem with the picostation and 1.1rc1?
> Thanks!
>
>  Anderson
> -- 
> Allied Media Projects
> Detroit Digital Justice Coalition
>
> _______________________________________________
> Commotion-dev mailing list
> Commotion-dev at lists.chambana.net
> https://lists.chambana.net/mailman/listinfo/commotion-dev

"
1791,Commotion-dev, Picostation Flash Problems,"Wed, 16 Apr 2014 18:07:44 -0400",-0400,Anderson Walworth,"Thanks for the input...
I waited,  tried rebooting when it was plugged in then with it unplugged
with no dice.

I ended up powering it on with the reset button on for like 30 seconds,
power it back off then back on and held for another 30 seconds then it gave
me an IP yay!


On Wed, Apr 16, 2014 at 4:41 PM, Ryan Gerety
<gerety at opentechinstitute.org>wrote:

> I had that problem at the Eyebeam event, but I restarted the router and
> then after a good bit of time (a minute or two, or maybe more) it gave me a
> lease.
>
>
> On Apr 16, 2014, at 4:28 PM, Anderson Walworth wrote:
>
>  I'm trying to flash a couple of  picostations with 1.1rc1 following
"
1792,Commotion-dev, Picostation Flash Problems,"Thu, 17 Apr 2014 09:48:16 -0400",-0400,Andy Gunn,"Thanks for keeping us posted on this Anderson - I haven't seen this
issue before. Anyone else on the list(s) had this issue? Devs - ever
seen this?

I am running through some upgrade testing today and tomorrow, so if this
occurs I will let you know.


On 04/16/2014 06:07 PM, Anderson Walworth wrote:
> 
> Thanks for the input...
> I waited,  tried rebooting when it was plugged in then with it unplugged
> with no dice.
> 
> I ended up powering it on with the reset button on for like 30 seconds,
> power it back off then back on and held for another 30 seconds then it
> gave me an IP yay!
> 
> 
> On Wed, Apr 16, 2014 at 4:41 PM, Ryan Gerety
> <gerety at opentechinstitute.org <mailto:gerety at opentechinstitute.org"
1793,Commotion-dev, Automating Browser Testing,"Thu, 17 Apr 2014 10:50:43 -0400",-0400,Andrew Reynolds,"I spent some time with the IDE this week and am just starting to work
with the perl and python bindings. So far it seems like exactly what I'm
looking for.

The biggest hurdle I see right now is that we can't run the
commotion-router web interface on the build server (at least not live),
so we may not be able to integrate fully with jenkins. If there's a
solution I'm overlooking I would love to hear it.

-andrew

On 04/10/2014 11:55 AM, Bill Comisky wrote:
> My 2 cents: I've been using Selenium for a few years through the perl
> bindings, and have been pretty happy with it.   The Selenium IDE plugin for
> firefox makes it pretty easy to construct the selectors for your browser
> actions.  I've used it primarily with firefox, so can't speak to
> cross-browser testing.
> 
> Bill
> 
> 
> On Thu, Apr 10, 2014 at 11:27 AM, Andrew Reynolds <
> andrew at opentechinstitute.org> wrote:
> 
"
1794,Commotion-dev, Automating Browser Testing,"Thu, 17 Apr 2014 10:36:28 -0500",-0500,Ben West,"If you are willing to isolate some portions of the commotion-router web UI
for browser compatibility testing, i.e. not do such tests exclusively on
target hardware, you could try running an instance of uhttpd/luci/etc
compiled for x86 (or likewise running the same under an virtualized
environment via VMWare Player / VirtualBox).

Jenkins is quite flexible in letting you specify post-build scripts to do
pretty much anything that can be scripted.  For example, deploy a freshly
compiled VMDK file to a VMWare Player instance, or simply copy over the
updated contents of /www/luci-static and /usr/lib/lua over to the instance
of uhttpd/luci you have running on whatever port on the build server, and
then point automated browser testing at that.

This would require modifying / extracting pieces from commotion-router to
run meaningfully enough for testing purposes in an environment w/o a radio.


On Thu, Apr 17, 2014 at 9:50 AM, Andrew Reynolds <
andrew at opentechinstitute.org> wrote:

> I spent some time with the IDE this week and am just starting to work
> with the perl and python bindings. So far it seems like exactly what I'm
> looking for.
>
> The biggest hurdle I see right now is that we can't run the
> commotion-router web interface on the build server (at least not live),
> so we may not be able to integrate fully with jenkins. If there's a
> solution I'm overlooking I would love to hear it.
>
> -andrew
>
> On 04/10/2014 11:55 AM, Bill Comisky wrote:
> > My 2 cents: I've been using Selenium for a few years through the perl
> > bindings, and have been pretty happy with it.   The Selenium IDE plugin
> for
> > firefox makes it pretty easy to construct the selectors for your browser
> > actions.  I've used it primarily with firefox, so can't speak to
> > cross-browser testing.
> >
> > Bill
> >
> >
> > On Thu, Apr 10, 2014 at 11:27 AM, Andrew Reynolds <
> > andrew at opentechinstitute.org> wrote:
> >
> "
1795,Commotion-dev, Automating Browser Testing,"Thu, 17 Apr 2014 13:21:59 -0400",-0400,Dan Staples,"Good idea, Ben. If you want to go this route, Andrew, you could build
off of the luci-commotion-linux repo, which is designed to provide just
that, a LuCI/uhttpd instance on x86:
https://github.com/opentechinstitute/luci-commotion-linux

Dan

On 04/17/2014 11:36 AM, Ben West wrote:
> If you are willing to isolate some portions of the commotion-router web
> UI for browser compatibility testing, i.e. not do such tests exclusively
> on target hardware, you could try running an instance of uhttpd/luci/etc
> compiled for x86 (or likewise running the same under an virtualized
> environment via VMWare Player / VirtualBox).
> 
> Jenkins is quite flexible in letting you specify post-build scripts to
> do pretty much anything that can be scripted.  For example, deploy a
> freshly compiled VMDK file to a VMWare Player instance, or simply copy
> over the updated contents of /www/luci-static and /usr/lib/lua over to
> the instance of uhttpd/luci you have running on whatever port on the
> build server, and then point automated browser testing at that.
> 
> This would require modifying / extracting pieces from commotion-router
> to run meaningfully enough for testing purposes in an environment w/o a
> radio.
> 
> 
> On Thu, Apr 17, 2014 at 9:50 AM, Andrew Reynolds
> <andrew at opentechinstitute.org <mailto:andrew at opentechinstitute.org"
1796,Commotion-dev, Picostation Flash Problems,"Thu, 17 Apr 2014 20:17:16 -0400",-0400,Will Hawkins,"I have seen something similar, but I never had to go to such great
lengths to resolve the problem. I will attempt to track down this issue.

Anderson, if you have this problem again, please send us another note
with whatever information you can provide!

Thanks!
Will

On 04/17/2014 09:48 AM, Andy Gunn wrote:
> Thanks for keeping us posted on this Anderson - I haven't seen this
> issue before. Anyone else on the list(s) had this issue? Devs - ever
> seen this?
> 
> I am running through some upgrade testing today and tomorrow, so if this
> occurs I will let you know.
> 
> 
> On 04/16/2014 06:07 PM, Anderson Walworth wrote:
"
1797,Commotion-dev, Mylar: client-encrypted web applications,"Fri, 18 Apr 2014 10:41:52 -0400",-0400,Dan Staples,"Browser crypto is nothing new, but this project has some interesting
aspects: homomorphic encryption, safely sharing keys in presence of
adversary (not sure if this refers to forward secrecy?), authenticating
client code even when served from malicious server.

http://css.csail.mit.edu/mylar/

""""""
Mylar is a platform for building secure web applications.

Web applications rely on servers to store and process confidential
information. However, anyone who gains access to the server (e.g., an
attacker, a curious administrator, or a government) can obtain all of
the data stored there. Mylar protects data confidentiality even when an
attacker gets full access to servers. Mylar stores only encrypted data
on the server, and decrypts data only in users' browsers. Simply
encrypting each user's data with a user key does not suffice, and Mylar
addresses three challenges in making this approach work. First, Mylar
allows the server to perform keyword search over encrypted documents,
even if the documents are encrypted with different keys. Second, Mylar
allows users to share keys and data securely in the presence of an
active adversary. Finally, Mylar ensures that client-side application
code is authentic, even if the server is malicious. Results with a
prototype of Mylar built on top of the Meteor framework are promising:
porting 6 applications required changing just 35 lines of code on
average, and the performance overheads are modest, amounting to a 17%
throughput loss and a 50 msec latency increase for sending a message in
a chat application.
""""""

-- 
Dan Staples

Open Technology Institute
https://commotionwireless.net
OpenPGP key: http://disman.tl/pgp.asc
Fingerprint: 2480 095D 4B16 436F 35AB 7305 F670 74ED BD86 43A9
"
1798,Commotion-dev, Proposed repository consolidation,"Fri, 18 Apr 2014 14:00:58 -0400",-0400,Josh King,"Hi all,

So, I just wanted to float this idea. We have quite a large number of
repositories, and this makes it rather difficult to manage all of the
issues in the project across them in an organized way. We basically
spend a pretty significant amount of time trying to keep everything in
sync. As a result, I'm considering some pretty aggressive refactoring in
order to collapse a bunch of repositories into each other and archive
deprecated ones. I'd appreciate some feedback on how this would work:

* With our new cross-platform client work, we were already planning on
consolidating our several Linux and eventually our Windows and Mac
repositories into the Commotion Client repo. This would combine
luci-commotion-linux, nm-dispatcher-olsrd, commotion-linux-py,
commotion-mesh-applet, and eventually commotion-windows and
commotion-winmesh.

* Commotion-router and commotion-feed would be consolidated.

* All of the LuCI components would be consolidated, although they would
still build separate packages as they do now. This would combine
luci-commotion, commotion-lua-helpers, luci-commotion-apps,
luci-commotion-splash, commotion-debug-helper,
commotion-dashboard-helper, luci-theme-commotion, and
luci-i18n-commotion. To the extent that makes sense, we would try and
keep the code separate and clear within the repository, and use github
issue labels to designate issues that pertain to specific components.
However, most likely the versioning for those packages will have to be
in lockstep.

* OTI would grab a copy of these repositories that are no longer used,
and then delete them: serval-crypto, avahi-client, co_httpinfo,
shell-fork, olsrd-mdp.

The intent of this would be to reduce the number of repositories we have
from 40 or so to a much more manageable number, as well as reduce
confusion by removing unused repositories. However, I wanted to make
sure that this wasn't going to interfere too much with people who wanted
to use components of Commotion separately; for the LuCI packages
especially, although despite the fact that they'll live in the same git
repository, they'll still be built as separate components.

-- 
Josh King
Lead Technologist
The Open Technology Institute
http://opentechinstitute.org
PGP Fingerprint: 8269 ED6F EA3B 7D78 F074 1E99 2FDA 4DA1 69AE 4999

"
1799,Commotion-dev, Merged olsrd branch commotion + release-0.6.6,"Tue, 22 Apr 2014 10:56:25 -0500",-0500,Ben West,"Howdy,

I'd been having problems with the v0.6.5-4 version of olsrd in OTI's git
repo having sporadic gateway problems using the SmartGateway feature,
specifically with repeater nodes seeing their route to the Internet
occasionally broken in the presence of multiple gateway nodes.

Some responses on the olsr-users listserv indicated quite a few
improvements to SmartGateway in the v0.6.6 release, especially for
situations with multiple gateway nodes, so I made a merged branch:

https://github.com/opentechinstitute/olsrd/tree/commotion
+
http://olsr.org/git/?p=olsrd.git;a=shortlog;h=refs/heads/release-0.6.6
=
https://github.com/westbywest/olsrd/tree/commotion-0.6.6

(New branch name ""commotion-0.6.6"")

Posting here in case there is interest to push this branch upstream to
OTI's repo too.

-- 
Ben West
http://gowasabi.net
ben at gowasabi.net
314-246-9434
"
1800,Commotion-dev, Merged olsrd branch commotion + release-0.6.6,"Tue, 22 Apr 2014 12:13:48 -0400",-0400,Josh King,"Hey Ben,

That sounds great. Have you tried it out on any images yet? I was going
to start rolling 1.1rc2 images maybe later today, and if that release
fixes some SmartGateway bugs then it might be worth including.

On 04/22/2014 11:56 AM, Ben West wrote:
> Howdy,
> 
> I'd been having problems with the v0.6.5-4 version of olsrd in OTI's git
> repo having sporadic gateway problems using the SmartGateway feature,
> specifically with repeater nodes seeing their route to the Internet
> occasionally broken in the presence of multiple gateway nodes.
> 
> Some responses on the olsr-users listserv indicated quite a few
> improvements to SmartGateway in the v0.6.6 release, especially for
> situations with multiple gateway nodes, so I made a merged branch:
> 
> https://github.com/opentechinstitute/olsrd/tree/commotion
> +
> http://olsr.org/git/?p=olsrd.git;a=shortlog;h=refs/heads/release-0.6.6
> =
> https://github.com/westbywest/olsrd/tree/commotion-0.6.6
> 
> (New branch name ""commotion-0.6.6"")
> 
> Posting here in case there is interest to push this branch upstream to
> OTI's repo too.
> 
> -- 
> Ben West
> http://gowasabi.net
> ben at gowasabi.net <mailto:ben at gowasabi.net>
> 314-246-9434 <tel:314-246-9434>
> 
> 
> _______________________________________________
> Commotion-dev mailing list
> Commotion-dev at lists.chambana.net
> https://lists.chambana.net/mailman/listinfo/commotion-dev
> 

-- 
Josh King
Lead Technologist
The Open Technology Institute
http://opentechinstitute.org
PGP Fingerprint: 8269 ED6F EA3B 7D78 F074 1E99 2FDA 4DA1 69AE 4999

"
1801,Commotion-dev, Merged olsrd branch commotion + release-0.6.6,"Tue, 22 Apr 2014 11:25:25 -0500",-0500,Ben West,"Thus far only deployed to a handful of atheros 802.11g nodes running r40431
OpenWRT AA (i.e. not commotion-router proper, nor yet on ar71xx target, nor
with olsrd-mdp plugin).  The specific failure I was seeing on an atheros
repeater node has not recurred yet, although I only reflashed it a couple
hours ago.  I can at least say that v0.6.6.1 is working just fine on those
nodes previously running olsrd v0.6.5-4.  No obvious regression.

Here is the /etc/config/olsrd I'm using, for your reference, based on
advice from Ferry Huberts:

config olsrd
    # uncomment the following line to use a custom config file instead:
    #option config_file '/etc/olsrd.conf'

    option 'IpVersion' '4'
    option 'LinkQualityLevel' '2'
    option 'LinkQualityAlgorithm' 'etx_ffeth'
    option 'SmartGateway' 'yes'
    option 'SmartGatewayUseCount' '1'
    option 'Pollrate' '0.1'
    option 'TcRedundancy'    '2'
    option 'MprCoverage'    '5'
    option 'LinkQualityFishEye' '0'

config 'LoadPlugin'
    option 'library' 'olsrd_arprefresh.so.0.1'

config 'LoadPlugin'
    option 'library' 'olsrd_dyn_gw.so.0.5'
    option 'HNA' '0.0.0.0 0.0.0.0'

config 'LoadPlugin'
  option 'library' 'olsrd_nameservice.so.0.3'
  #option 'resolv_file' '/tmp/resolv.conf.auto'
  option 'sighup_pid_file' '/var/run/dnsmasq.pid'
  option 'suffix' '.mesh'

config 'LoadPlugin'
    option 'library' 'olsrd_txtinfo.so.0.1'
    option 'port'    '2006'
    option 'Accept' '127.0.0.1'

config 'Interface'
    list 'interface' 'wan'
    option 'Mode' 'ether'

config 'Interface'
    list 'interface' 'mesh'
    option 'Ip4Broadcast' '255.255.255.255'
        option 'Mode' 'mesh'
    #peformance-tuned params from Ferry Huberts <mailings at hupie.com>
    option HelloInterval '2.0'
        option HelloValidityTime '20.0'
        option TcInterval '5.0'
        option TcValidityTime '30.0'
        option MidInterval '5.0'
        option MidValidityTime '50.0'
        option HnaInterval '5.0'
        option HnaValidityTime '15.0'




On Tue, Apr 22, 2014 at 11:13 AM, Josh King <jking at opentechinstitute.org>wrote:

> Hey Ben,
>
> That sounds great. Have you tried it out on any images yet? I was going
> to start rolling 1.1rc2 images maybe later today, and if that release
> fixes some SmartGateway bugs then it might be worth including.
>
> On 04/22/2014 11:56 AM, Ben West wrote:
> > Howdy,
> >
> > I'd been having problems with the v0.6.5-4 version of olsrd in OTI's git
> > repo having sporadic gateway problems using the SmartGateway feature,
> > specifically with repeater nodes seeing their route to the Internet
> > occasionally broken in the presence of multiple gateway nodes.
> >
> > Some responses on the olsr-users listserv indicated quite a few
> > improvements to SmartGateway in the v0.6.6 release, especially for
> > situations with multiple gateway nodes, so I made a merged branch:
> >
> > https://github.com/opentechinstitute/olsrd/tree/commotion
> > +
> > http://olsr.org/git/?p=olsrd.git;a=shortlog;h=refs/heads/release-0.6.6
> > =
> > https://github.com/westbywest/olsrd/tree/commotion-0.6.6
> >
> > (New branch name ""commotion-0.6.6"")
> >
> > Posting here in case there is interest to push this branch upstream to
> > OTI's repo too.
> >
> > --
> > Ben West
> > http://gowasabi.net
> > ben at gowasabi.net <mailto:ben at gowasabi.net>
> > 314-246-9434 <tel:314-246-9434>
> >
> >
> > _______________________________________________
> > Commotion-dev mailing list
> > Commotion-dev at lists.chambana.net
> > https://lists.chambana.net/mailman/listinfo/commotion-dev
> >
>
> --
> Josh King
> Lead Technologist
> The Open Technology Institute
> http://opentechinstitute.org
> PGP Fingerprint: 8269 ED6F EA3B 7D78 F074 1E99 2FDA 4DA1 69AE 4999
>
"
1802,Commotion-dev, Merged olsrd branch commotion + release-0.6.6,"Wed, 23 Apr 2014 16:06:54 -0400",-0400,Josh King,"Hey Ben,

How about you open a pull request against the 'commotion' branch in
upstream? I'll go ahead and test and then merge that into the rc2
testing images I'm working on.

Also, I'm interested in the defaults you got from Ferry in the config
file below. Is there a rationale behind those that exists somewhere?

On 04/22/2014 12:25 PM, Ben West wrote:
> Thus far only deployed to a handful of atheros 802.11g nodes running
> r40431 OpenWRT AA (i.e. not commotion-router proper, nor yet on ar71xx
> target, nor with olsrd-mdp plugin).  The specific failure I was seeing
> on an atheros repeater node has not recurred yet, although I only
> reflashed it a couple hours ago.  I can at least say that v0.6.6.1 is
> working just fine on those nodes previously running olsrd v0.6.5-4.  No
> obvious regression.
> 
> Here is the /etc/config/olsrd I'm using, for your reference, based on
> advice from Ferry Huberts:
> 
> config olsrd
>     # uncomment the following line to use a custom config file instead:
>     #option config_file '/etc/olsrd.conf'
> 
>     option 'IpVersion' '4'
>     option 'LinkQualityLevel' '2'
>     option 'LinkQualityAlgorithm' 'etx_ffeth'
>     option 'SmartGateway' 'yes'
>     option 'SmartGatewayUseCount' '1'
>     option 'Pollrate' '0.1'
>     option 'TcRedundancy'    '2'
>     option 'MprCoverage'    '5'
>     option 'LinkQualityFishEye' '0'
> 
> config 'LoadPlugin'
>     option 'library' 'olsrd_arprefresh.so.0.1'
> 
> config 'LoadPlugin'
>     option 'library' 'olsrd_dyn_gw.so.0.5'
>     option 'HNA' '0.0.0.0 0.0.0.0'
> 
> config 'LoadPlugin'
>   option 'library' 'olsrd_nameservice.so.0.3'
>   #option 'resolv_file' '/tmp/resolv.conf.auto'
>   option 'sighup_pid_file' '/var/run/dnsmasq.pid'
>   option 'suffix' '.mesh'
> 
> config 'LoadPlugin'
>     option 'library' 'olsrd_txtinfo.so.0.1'
>     option 'port'    '2006'
>     option 'Accept' '127.0.0.1'
> 
> config 'Interface'
>     list 'interface' 'wan'
>     option 'Mode' 'ether'
> 
> config 'Interface'
>     list 'interface' 'mesh'
>     option 'Ip4Broadcast' '255.255.255.255'
>         option 'Mode' 'mesh'
>     #peformance-tuned params from Ferry Huberts <mailings at hupie.com
> <mailto:mailings at hupie.com"
1803,Commotion-dev, Merged olsrd branch commotion + release-0.6.6,"Wed, 23 Apr 2014 16:54:42 -0500",-0500,Ben West,"So far, the specific atheros repeater node where I'd been having apparent
SmartGateway issues seems to be OK now after upgrading its local olsrd to
v0.6.6.1 yesterday (along with the same on the affected gateway nodes).  It
does indeed look like the SmartGateway updates have yielded improvement for
my situation.

I should point out that *option 'SmartGatewayUseCount' '1'* is needed to
tell the newer SmartGateway code to only use one gateway at a time.  The
OLSR folks are now testing out multiple gateway nodes simultaneously in
HEAD, but I believe it doesn't play wall with typical NAT configurations,
so just use one gateway at a time for now.

The rationale for the timing tweaks from Ferry are somewhat opaque to me.
The old ROBIN mesh firmware using olsrd v0.5 did deploy similar tweaks:
https://trac.assembla.com/RobinMesh/browser/trunk/robin/robin-mesh/files/etc/config/olsr

16<https://trac.assembla.com/RobinMesh/browser/trunk/robin/robin-mesh/files/etc/config/olsr#L16>config
""olsr"" ""interface""
17<https://trac.assembla.com/RobinMesh/browser/trunk/robin/robin-mesh/files/etc/config/olsr#L17>
      option HelloInterval
'2.0'18<https://trac.assembla.com/RobinMesh/browser/trunk/robin/robin-mesh/files/etc/config/olsr#L18>
      option HelloValidityTime
'40.0'19<https://trac.assembla.com/RobinMesh/browser/trunk/robin/robin-mesh/files/etc/config/olsr#L19>
      option TcInterval '5.0'
20<https://trac.assembla.com/RobinMesh/browser/trunk/robin/robin-mesh/files/etc/config/olsr#L20>
      option TcValidityTime
'100.0'21<https://trac.assembla.com/RobinMesh/browser/trunk/robin/robin-mesh/files/etc/config/olsr#L21>
      option MidInterval
'18.0'22<https://trac.assembla.com/RobinMesh/browser/trunk/robin/robin-mesh/files/etc/config/olsr#L22>
      option MidValidityTime '324.0'
23<https://trac.assembla.com/RobinMesh/browser/trunk/robin/robin-mesh/files/etc/config/olsr#L23>
      option HnaInterval
'18.0'24<https://trac.assembla.com/RobinMesh/browser/trunk/robin/robin-mesh/files/etc/config/olsr#L24>
      option HnaValidityTime '108.0'
Antonio from ROBIN published a the calculations behind these timings on his
wiki http://wiki-robin.meshroot.com/ , but unfortunately that site now
seems lost to the sands of time (and likewise to archive.org).

It is likely these params are unnecessary.  I was initially wanting to
mimic Ferry's suggested config to rule out problems.

I can see about making the PR to the commotion branch later today.



On Wed, Apr 23, 2014 at 3:06 PM, Josh King <jking at opentechinstitute.org>wrote:

> Hey Ben,
>
> How about you open a pull request against the 'commotion' branch in
> upstream? I'll go ahead and test and then merge that into the rc2
> testing images I'm working on.
>
> Also, I'm interested in the defaults you got from Ferry in the config
> file below. Is there a rationale behind those that exists somewhere?
>
> On 04/22/2014 12:25 PM, Ben West wrote:
> > Thus far only deployed to a handful of atheros 802.11g nodes running
> > r40431 OpenWRT AA (i.e. not commotion-router proper, nor yet on ar71xx
> > target, nor with olsrd-mdp plugin).  The specific failure I was seeing
> > on an atheros repeater node has not recurred yet, although I only
> > reflashed it a couple hours ago.  I can at least say that v0.6.6.1 is
> > working just fine on those nodes previously running olsrd v0.6.5-4.  No
> > obvious regression.
> >
> > Here is the /etc/config/olsrd I'm using, for your reference, based on
> > advice from Ferry Huberts:
> >
> > config olsrd
> >     # uncomment the following line to use a custom config file instead:
> >     #option config_file '/etc/olsrd.conf'
> >
> >     option 'IpVersion' '4'
> >     option 'LinkQualityLevel' '2'
> >     option 'LinkQualityAlgorithm' 'etx_ffeth'
> >     option 'SmartGateway' 'yes'
> >     option 'SmartGatewayUseCount' '1'
> >     option 'Pollrate' '0.1'
> >     option 'TcRedundancy'    '2'
> >     option 'MprCoverage'    '5'
> >     option 'LinkQualityFishEye' '0'
> >
> > config 'LoadPlugin'
> >     option 'library' 'olsrd_arprefresh.so.0.1'
> >
> > config 'LoadPlugin'
> >     option 'library' 'olsrd_dyn_gw.so.0.5'
> >     option 'HNA' '0.0.0.0 0.0.0.0'
> >
> > config 'LoadPlugin'
> >   option 'library' 'olsrd_nameservice.so.0.3'
> >   #option 'resolv_file' '/tmp/resolv.conf.auto'
> >   option 'sighup_pid_file' '/var/run/dnsmasq.pid'
> >   option 'suffix' '.mesh'
> >
> > config 'LoadPlugin'
> >     option 'library' 'olsrd_txtinfo.so.0.1'
> >     option 'port'    '2006'
> >     option 'Accept' '127.0.0.1'
> >
> > config 'Interface'
> >     list 'interface' 'wan'
> >     option 'Mode' 'ether'
> >
> > config 'Interface'
> >     list 'interface' 'mesh'
> >     option 'Ip4Broadcast' '255.255.255.255'
> >         option 'Mode' 'mesh'
> >     #peformance-tuned params from Ferry Huberts <mailings at hupie.com
> > <mailto:mailings at hupie.com"
1804,Commotion-dev, QOS,"Wed, 23 Apr 2014 18:09:09 -0400",-0400,Anderson Walworth,"Is QOS or quality of service in the 1.1rc1 build. If it is where is it? ; )

Thanks!

Anderson

-- 
Allied Media Projects
Detroit Digital Justice Coalition
"
1805,Commotion-dev, [Commotion-discuss] QOS,"Wed, 23 Apr 2014 20:39:26 -0400",-0400,Andy Gunn,"Hey Anderson - the settings for QOS are under Advanced -> Networking ->
QOS. You can also find instructions on where to find that, and a bunch
of other settings in the CCK Configuration guide:
http://commotionwireless.net/docs/cck/installing-configuring/configure-commotion/#bandwidth-qos



On 4/23/2014 6:09 PM, Anderson Walworth wrote:
> Is QOS or quality of service in the 1.1rc1 build. If it is where is it? ; )
> 
> Thanks!
> 
> Anderson
> 
> 
> 
> _______________________________________________
> Commotion-discuss mailing list
> Commotion-discuss at lists.chambana.net
> https://lists.chambana.net/mailman/listinfo/commotion-discuss
> 

-- 

Andy Gunn, Field Engineer
Open Technology Institute, New America Foundation
andygunn at opentechinstitute.org | 202-596-3484
"
1806,Commotion-dev, Merged olsrd branch commotion + release-0.6.6,"Thu, 24 Apr 2014 12:11:20 -0500",-0500,Ben West,"Apologies for previous pollution on olsrd commit logs.  Github to push my
local merged branch directly to your repo.

Here is the PR for olsrd v0.6.6.1:
https://github.com/opentechinstitute/olsrd/pull/22


On Wed, Apr 23, 2014 at 4:54 PM, Ben West <ben at gowasabi.net> wrote:

> So far, the specific atheros repeater node where I'd been having apparent
> SmartGateway issues seems to be OK now after upgrading its local olsrd to
> v0.6.6.1 yesterday (along with the same on the affected gateway nodes).  It
> does indeed look like the SmartGateway updates have yielded improvement for
> my situation.
>
> I should point out that *option 'SmartGatewayUseCount' '1'* is needed to
> tell the newer SmartGateway code to only use one gateway at a time.  The
> OLSR folks are now testing out multiple gateway nodes simultaneously in
> HEAD, but I believe it doesn't play wall with typical NAT configurations,
> so just use one gateway at a time for now.
>
> The rationale for the timing tweaks from Ferry are somewhat opaque to me.
> The old ROBIN mesh firmware using olsrd v0.5 did deploy similar tweaks:
>
> https://trac.assembla.com/RobinMesh/browser/trunk/robin/robin-mesh/files/etc/config/olsr
>
> 16<https://trac.assembla.com/RobinMesh/browser/trunk/robin/robin-mesh/files/etc/config/olsr#L16>config
> ""olsr"" ""interface"" 17<https://trac.assembla.com/RobinMesh/browser/trunk/robin/robin-mesh/files/etc/config/olsr#L17>
>       option HelloInterval '2.0'18<https://trac.assembla.com/RobinMesh/browser/trunk/robin/robin-mesh/files/etc/config/olsr#L18>
>       option HelloValidityTime '40.0'19<https://trac.assembla.com/RobinMesh/browser/trunk/robin/robin-mesh/files/etc/config/olsr#L19>
>       option TcInterval '5.0' 20<https://trac.assembla.com/RobinMesh/browser/trunk/robin/robin-mesh/files/etc/config/olsr#L20>
>       option TcValidityTime '100.0'21<https://trac.assembla.com/RobinMesh/browser/trunk/robin/robin-mesh/files/etc/config/olsr#L21>
>       option MidInterval '18.0'22<https://trac.assembla.com/RobinMesh/browser/trunk/robin/robin-mesh/files/etc/config/olsr#L22>
>       option MidValidityTime '324.0' 23<https://trac.assembla.com/RobinMesh/browser/trunk/robin/robin-mesh/files/etc/config/olsr#L23>
>       option HnaInterval '18.0'24<https://trac.assembla.com/RobinMesh/browser/trunk/robin/robin-mesh/files/etc/config/olsr#L24>
>       option HnaValidityTime '108.0'
> Antonio from ROBIN published a the calculations behind these timings on
> his wiki http://wiki-robin.meshroot.com/ , but unfortunately that site
> now seems lost to the sands of time (and likewise to archive.org).
>
> It is likely these params are unnecessary.  I was initially wanting to
> mimic Ferry's suggested config to rule out problems.
>
> I can see about making the PR to the commotion branch later today.
>
>
>
> On Wed, Apr 23, 2014 at 3:06 PM, Josh King <jking at opentechinstitute.org>wrote:
>
"
1807,Commotion-dev, Possibilities to include Commotion Android in OEM,"Fri, 25 Apr 2014 11:03:11 -0430",-0430,=?utf-8?B?U2ViYXN0acOhbiBSYW3DrXJleiBNYWdyw60=?=,"Hi!

First of all thanks for your awesome work.

I'd like to go straight to a quick question:

If there were a possibility to include Commotion Android in stock ROMs by an
OEM, would commotion still need root on runtime? or is root needed only for
installation?

There is actually a chance of this happenning according to conversations with
an OEM here in Venezuela called S?ragon[0]. I've been talking to the mobiles
branch coordinator about a new project here called WifiAbierto[1] and he is
interested on adding mesh capabilities to their products by default.

I'd be glad to give him good news and to start a project with them on this
matter, of course with your kind support.

Best Regards,

[0] http://www.siragon.com/ve/
[1] http://wifiabierto.org

-- 
Sebasti?n Ram?rez Magr? [sebasmagri]
"
1808,Commotion-dev, Possibilities to include Commotion Android in,"Fri, 25 Apr 2014 11:39:40 -0400",-0400,Will Hawkins,
1809,Commotion-dev, Possibilities to include Commotion Android in,"Fri, 25 Apr 2014 11:14:23 -0430",-0430,=?utf-8?B?U2ViYXN0acOhbiBSYW3DrXJleiBNYWdyw60=?=,"Great!

I'll inform of this possitive feedback to keep things warm with them.

Best Regards,

On 25/04 11:39, Will Hawkins wrote:
> "
1810,Commotion-dev, Possibilities to include Commotion Android in,"Mon, 28 Apr 2014 10:01:20 +0930",+0930,Paul Gardner-Stephen,"Hello Sebasti?n,

This sounds great. We at Serval have been talking with some folks with
links in Venezuela also, and have begun work on a mesh twitter-like
application that may also be of interest in this space.  Commotion and
Serval are already fairly integrated.

Paul.


On Sat, Apr 26, 2014 at 1:03 AM, Sebasti?n Ram?rez Magr? <
sebasmagri at gmail.com> wrote:

> Hi!
>
> First of all thanks for your awesome work.
>
> I'd like to go straight to a quick question:
>
> If there were a possibility to include Commotion Android in stock ROMs by
> an
> OEM, would commotion still need root on runtime? or is root needed only for
> installation?
>
> There is actually a chance of this happenning according to conversations
> with
> an OEM here in Venezuela called S?ragon[0]. I've been talking to the
> mobiles
> branch coordinator about a new project here called WifiAbierto[1] and he is
> interested on adding mesh capabilities to their products by default.
>
> I'd be glad to give him good news and to start a project with them on this
> matter, of course with your kind support.
>
> Best Regards,
>
> [0] http://www.siragon.com/ve/
> [1] http://wifiabierto.org
>
> --
> Sebasti?n Ram?rez Magr? [sebasmagri]
>
> _______________________________________________
> Commotion-dev mailing list
> Commotion-dev at lists.chambana.net
> https://lists.chambana.net/mailman/listinfo/commotion-dev
>
>
"
1811,Commotion-dev, Possibilities to include Commotion Android in,"Mon, 28 Apr 2014 07:53:42 -0430",-0430,=?utf-8?B?U2ViYXN0acOhbiBSYW3DrXJleiBNYWdyw60=?=,"On 28/04 10:01, Paul Gardner-Stephen wrote:
> Hello Sebasti?n,
> 
> This sounds great. We at Serval have been talking with some folks with links in
> Venezuela also, and have begun work on a mesh twitter-like application that may
> also be of interest in this space. ?Commotion and Serval are already fairly
> integrated.
> 
> Paul.
> 
> 
> On Sat, Apr 26, 2014 at 1:03 AM, Sebasti?n Ram?rez Magr? <sebasmagri at gmail.com>
> wrote:
> 
>     Hi!
> 
>     First of all thanks for your awesome work.
> 
>     I'd like to go straight to a quick question:
> 
>     If there were a possibility to include Commotion Android in stock ROMs by
>     an
>     OEM, would commotion still need root on runtime? or is root needed only for
>     installation?
> 
>     There is actually a chance of this happenning according to conversations
>     with
>     an OEM here in Venezuela called S?ragon[0]. I've been talking to the
>     mobiles
>     branch coordinator about a new project here called WifiAbierto[1] and he is
>     interested on adding mesh capabilities to their products by default.
> 
>     I'd be glad to give him good news and to start a project with them on this
>     matter, of course with your kind support.
> 
>     Best Regards,
> 
>     [0] http://www.siragon.com/ve/
>     [1] http://wifiabierto.org
>    
>     --
>     Sebasti?n Ram?rez Magr? [sebasmagri]
>    
>     _______________________________________________
>     Commotion-dev mailing list
>     Commotion-dev at lists.chambana.net
>     https://lists.chambana.net/mailman/listinfo/commotion-dev
> 
> 
> 

Hi Paul!

That sounds great.

I will meet today with the focal point for this in S?ragon to explain him the
details and try to plan a meeting in which you guys can participate and show
him all this exciting stuff.

Best Regards,

-- 
Sebasti?n Ram?rez Magr? [sebasmagri]
"
1812,Commotion-dev, Possibilities to include Commotion Android in,"Mon, 28 Apr 2014 11:25:48 -0430",-0430,=?utf-8?B?U2ViYXN0acOhbiBSYW3DrXJleiBNYWdyw60=?=,"On 28/04 10:01, Paul Gardner-Stephen wrote:
> Hello Sebasti?n,
> 
> This sounds great. We at Serval have been talking with some folks with links in
> Venezuela also, and have begun work on a mesh twitter-like application that may
> also be of interest in this space. ?Commotion and Serval are already fairly
> integrated.
> 
> Paul.
> 
> 
> On Sat, Apr 26, 2014 at 1:03 AM, Sebasti?n Ram?rez Magr? <sebasmagri at gmail.com>
> wrote:
> 
>     Hi!
> 
>     First of all thanks for your awesome work.
> 
>     I'd like to go straight to a quick question:
> 
>     If there were a possibility to include Commotion Android in stock ROMs by
>     an
>     OEM, would commotion still need root on runtime? or is root needed only for
>     installation?
> 
>     There is actually a chance of this happenning according to conversations
>     with
>     an OEM here in Venezuela called S?ragon[0]. I've been talking to the
>     mobiles
>     branch coordinator about a new project here called WifiAbierto[1] and he is
>     interested on adding mesh capabilities to their products by default.
> 
>     I'd be glad to give him good news and to start a project with them on this
>     matter, of course with your kind support.
> 
>     Best Regards,
> 
>     [0] http://www.siragon.com/ve/
>     [1] http://wifiabierto.org
>    
>     --
>     Sebasti?n Ram?rez Magr? [sebasmagri]
>    
>     _______________________________________________
>     Commotion-dev mailing list
>     Commotion-dev at lists.chambana.net
>     https://lists.chambana.net/mailman/listinfo/commotion-dev
> 
> 
> 

Hi folks!

After meeting with the contact person at S?ragon this are the key points to
work on the integration for their mobile products:

- They need to certify all software with Google's. All apps must pass CTS and
GMS tests [0].
- They need all apps to be able to run without root
- i18n will be a key issue as their market is mainly in Latin America.

They actually have a documentation platform for their build process[1] and
public repos at GitHub[2]. I handed links to commotion's project homepage,
wiki and GitHub repos.

They are pretty much willing to work on this. So, we could check this
requirements and meet again with them to define a roadmap.

Best Regards,

[0] http://source.android.com/compatibility/
[1] http://code.siragonplay.com/android-doc-odm/index.html
[2] https://github.com/siragon/

-- 
Sebasti?n Ram?rez Magr? [sebasmagri]
"
1813,Commotion-dev, Binary Commotion Installer,"Wed, 30 Apr 2014 07:41:54 -0500",-0500,Samuel Hedrick,"When are you going to release the self-contained commotion binary? And will it install without an internet connection? I want that installer, please...????

By, Samuel
"
1814,Commotion-dev, Binary Commotion Installer,"Wed, 30 Apr 2014 09:06:04 -0400",-0400,Dan Staples,"Hi Samuel,

What type of device do you have (router, desktop, phone)? You can try
any of the binaries on our download page here, which all install without
an internet connection: http://commotionwireless.net/download/

Dan

On 04/30/2014 08:41 AM, Samuel Hedrick wrote:
> When are you going to release the self-contained commotion binary? And will it install without an internet connection? I want that installer, please...????
> 
> By, Samuel
> "
1815,Commotion-dev, Binary Commotion Installer,"Wed, 30 Apr 2014 09:08:43 -0400",-0400,Seamus Tuohy,"Well,

You have to have the internet to go to the website. ;)

But, once you have downloaded them you are good to go.

s2e

On 04/30/2014 09:06 AM, Dan Staples wrote:
> Hi Samuel,
> 
> What type of device do you have (router, desktop, phone)? You can
> try any of the binaries on our download page here, which all install
> without an internet connection:
> http://commotionwireless.net/download/
> 
> Dan
> 
> On 04/30/2014 08:41 AM, Samuel Hedrick wrote:
"
1816,Commotion-dev, [Commotion-discuss] QOS,"Sun, 04 May 2014 18:47:46 -0400",-0400,Andy Gunn,"Hey Anderson - my colleague Ryan reminded me about QoS on the Ubiquiti
devices, and how we have discussed that it isn't necessarily the best idea.

The problem with Ubiquiti devices is that they don't have a large amount
of memory to store the data for QoS, so as traffic gets heavier,
performance can take a big hit. This is just a guess, but I wouldn't
enable QoS in OpenWRT or Commotion on any device that has less than 64MB
of RAM (not flash). Just for reference, the Ubiquiti PicoStation M and
NanoStation M routers we have used for building our test networks have
only 32MB of RAM. Ubiquiti Rocket M series devices have 64MB of RAM though.

As we work towards supporting more router models, QoS performance
impacts will be something worth testing.

I wanted to mention this on the list (and I believe others have
mentioned it in the past - Ben I'm looking in your direction), and ask
what QoS or rate limiting folks are doing on their networks, and how
well does your solution work?


On 04/23/2014 08:39 PM, Andy Gunn wrote:
> Hey Anderson - the settings for QOS are under Advanced -> Networking ->
> QOS. You can also find instructions on where to find that, and a bunch
> of other settings in the CCK Configuration guide:
> http://commotionwireless.net/docs/cck/installing-configuring/configure-commotion/#bandwidth-qos
> 
> 
> 
> On 4/23/2014 6:09 PM, Anderson Walworth wrote:
"
1817,Commotion-dev, seeking input - what additional routers should,"Wed, 14 May 2014 08:42:01 -0400",-0400,Chris Ritzo,"Hello! The Commotion team is working on expanding support for additional
router models and would love to hear from the community on this list
about what routers you're using or would like to use with Commotion.

I've put together a summary blog post with more info:
http://commotionwireless.net/blog/2014/05/13/little-box-of-routers/

With our upcoming point release (Commotion Router 1.1), we'll be adding
supported images for several routers:

- TP Link WDR4300
- Mikrotik RB411AH
- Buffalo G300NH
- Buffalo AG300N

In general, Commotion Router has these system requirements:

- Wireless chipset (target) is ar71xx or atheros
- The router has greater than 4MB of flash
(4MB is recommended for optimal support - we're working on images for
the many routers with 4MB of flash memory)
- The router supports OpenWRT 10.x Attitude Adjustment or greater

Weve compiled a list of potentially compatible routers on our wiki as a
guide
(https://wiki.commotionwireless.net/doku.php?id=development_resources:router:hardware_compatibility_list)


But we'd also like to hear from you to help focus our list to support
hardware that's available in your area. We'd particularly like to hear
from folks who are not in the US.

If you are interested in helping out and have one or more of the routers
on our list, contact us! Well even build a testing image for you if
your device is compatible!

-- 
"
1818,Commotion-dev, seeking input - what additional routers should,"Wed, 14 May 2014 17:30:22 -0500",-0500,Ben West,"There are a handful of products now sold, similar in form factor to the
small TP-Link routers, with affinity to mesh networks.  They're all quite
OpenWRT friendly, so adding Commotion support could be as simple as adding
another target to the buildbot's runlist.

Mesh Potato v2
http://store.villagetelco.com/mesh-potatoes/mesh-potato-2-basic.html

GL-iNet v1 (this just recently appeared)
http://www.gl-inet.com/w/?page_id=308&lang=en
http://www.amazon.com/gp/product/B00JL2AOXQ?ie=UTF8&seller=A364119SDJA4QG&sn=alzhao(8MB
flash)
http://www.amazon.com/gp/product/B00JKFE0FW?ie=UTF8&seller=A364119SDJA4QG&sn=alzhao(16MB
flash)

There is also an upcoming product from Nubelium in Spain that looks near
identical to the Mesh Potato v2:
https://twitter.com/nubelium/media

Likewise Serval's Mesh Extender device:
https://www.indiegogo.com/projects/speak-freely

P.S. I have Attitude Adjustment running with USB on a TP-Link TL3420 v2,
too.  Still not doing anything useful with pivot root, tho.



On Wed, May 14, 2014 at 7:42 AM, Chris Ritzo
<critzo at opentechinstitute.org>wrote:

> Hello! The Commotion team is working on expanding support for additional
> router models and would love to hear from the community on this list
> about what routers you're using or would like to use with Commotion.
>
> I've put together a summary blog post with more info:
> http://commotionwireless.net/blog/2014/05/13/little-box-of-routers/
>
> With our upcoming point release (Commotion Router 1.1), we'll be adding
> supported images for several routers:
>
> - TP Link WDR4300
> - Mikrotik RB411AH
> - Buffalo G300NH
> - Buffalo AG300N
>
> In general, Commotion Router has these system requirements:
>
> - Wireless chipset (target) is ar71xx or atheros
> - The router has greater than 4MB of flash
> (4MB is recommended for optimal support - we're working on images for
> the many routers with 4MB of flash memory)
> - The router supports OpenWRT 10.x Attitude Adjustment or greater
>
> Weve compiled a list of potentially compatible routers on our wiki as a
> guide
> (
> https://wiki.commotionwireless.net/doku.php?id=development_resources:router:hardware_compatibility_list
> )
>
>
> But we'd also like to hear from you to help focus our list to support
> hardware that's available in your area. We'd particularly like to hear
> from folks who are not in the US.
>
> If you are interested in helping out and have one or more of the routers
> on our list, contact us! Well even build a testing image for you if
> your device is compatible!
>
> --
> "
1819,Commotion-dev, seeking input - what additional routers should,"Thu, 15 May 2014 09:09:20 -0400",-0400,Chris Ritzo,"Thanks for these suggestions, Ben.

Another list member also replied privately, suggesting the TP-LINK
WDR3600, which is the same build target as the WDR4300 and WDR4310.

So far, my hardware order list is below. It would be great to hear from
other folks, either on-list or private messaging.

-Chris

TP-Link	TL-WDR3500
TP-Link	TL-WDR3600
TP-Link	TL-WR1043ND
TP-Link	TL-WDR4310
TP-Link	TL-WR842ND
D-Link	DIR-505
D-Link	DIR-655
D-Link	DIR-825
D-Link	DIR-825
D-Link	DIR-835
Mesh Potato v2
GL-iNet v1
Netgear	WNDAP360
Netgear	WNR-3500L
Netgear	WNDR3700
Netgear	WNDR3700
Netgear	WNDR3700
Netgear	WNDR37AV
Netgear	WNDR3800


On 05/14/2014 06:30 PM, Ben West wrote:
> There are a handful of products now sold, similar in form factor to the
> small TP-Link routers, with affinity to mesh networks.  They're all
> quite OpenWRT friendly, so adding Commotion support could be as simple
> as adding another target to the buildbot's runlist.
> 
> Mesh Potato v2
> http://store.villagetelco.com/mesh-potatoes/mesh-potato-2-basic.html
> 
> GL-iNet v1 (this just recently appeared)
> http://www.gl-inet.com/w/?page_id=308&lang=en
> http://www.amazon.com/gp/product/B00JL2AOXQ?ie=UTF8&seller=A364119SDJA4QG&sn=alzhao
> (8MB flash)
> http://www.amazon.com/gp/product/B00JKFE0FW?ie=UTF8&seller=A364119SDJA4QG&sn=alzhao
> (16MB flash)
> 
> There is also an upcoming product from Nubelium in Spain that looks near
> identical to the Mesh Potato v2:
> https://twitter.com/nubelium/media
> 
> Likewise Serval's Mesh Extender device:
> https://www.indiegogo.com/projects/speak-freely
> 
> P.S. I have Attitude Adjustment running with USB on a TP-Link TL3420 v2,
> too.  Still not doing anything useful with pivot root, tho.
> 
> 
> 
> On Wed, May 14, 2014 at 7:42 AM, Chris Ritzo
> <critzo at opentechinstitute.org <mailto:critzo at opentechinstitute.org"
1820,Commotion-dev, Anyone work with ZTE routers?,"Tue, 20 May 2014 08:46:05 -0400",-0400,Chris Ritzo,"Has anyone worked with ZTE routers and OpenWRT? Specifically, we had a
support email asking about Commotion compatibility. From what I have
found, these look like x86 devices with atheros wifi cards:
http://enterprise.zte.com.cn/us/products/network_lnfrastructure/wireless_broadband/201403/t20140323_419623.html

Has anyone worked with devices from ZTE?

Thanks in advance. Chris

"
1821,Commotion-dev, 802.11ac multi-user beamforming,"Tue, 20 May 2014 09:34:30 -0400",-0400,Dan Staples,"http://arstechnica.com/information-technology/2014/05/wi-fi-networks-are-wasting-a-gigabit-but-multi-user-beamforming-will-save-the-day/

Does anyone know more about this? Sounds like an interesting feature of
802.11ac, and I wonder how/if this could benefit ad-hoc and mesh
networks (assuming of course that it ever makes its way into open source
drivers).

Dan

-- 
Dan Staples

Open Technology Institute
https://commotionwireless.net
OpenPGP key: http://disman.tl/pgp.asc
Fingerprint: 2480 095D 4B16 436F 35AB 7305 F670 74ED BD86 43A9
"
1822,Commotion-dev, Commotion Wireless on Raspberry PI,"Thu, 22 May 2014 13:47:41 -0700",-0700,Joshua Besneatte,"Hello Devs!

I have just gotten commotion wireless working on a Raspberry Pi, and was
told on IRC that perhaps some of you would be interested.

I have created deb files and put together a howto:

http://besneatte.blogspot.com/2014/05/commotion-pi-build-rpi-mesh-node.html

https://code.google.com/p/commotion-wireless-raspberry-pi/source/browse/

I hope this can be of some use. I saw RPi being mentioned in the dev
roadmap... hopefully this can help save someone some time.

Thanks!
Joshua Beneatte

"
1823,Commotion-dev, ping,"Thu, 22 May 2014 15:18:38 -0700",-0700,Joshua Besneatte,"hi, new to list... seems my last post didn't work, this is a test.

thanks

"
1824,Commotion-dev, ping,"Thu, 22 May 2014 18:20:42 -0400",-0400,Georgia Bullen,"Welcome Joshua!

I think your previous message worked - about the RaspberryPi? Very exciting!

And welcome!

-Georgia


On Thu, May 22, 2014 at 6:18 PM, Joshua Besneatte <besneatte at gmail.com>wrote:

> hi, new to list... seems my last post didn't work, this is a test.
>
> thanks
>
> _______________________________________________
> Commotion-dev mailing list
> Commotion-dev at lists.chambana.net
> https://lists.chambana.net/mailman/listinfo/commotion-dev
"
1825,Commotion-dev, ping,"Thu, 22 May 2014 18:28:44 -0700",-0700,joshua besneatte,"Yes that was me, thank you. For some reason I am not receiving a copy of
messages I send, although I have the preference set in chambana. Hrm :/

Anyway, I have a question:

The final thing I have to get working to make the commotion pi node really
nifty is for it to be used as an internet gateway. I have a debian linux
machine
connected to the LAN via ethernet and the wifi is connected to the
commotion mesh node. On machine 2, it is showing the mesh connection to
machine 1, and that machine 1 has internet. I can ping and ssh from machine
2 to machine 1, However, I cannot access the internet from machine 2 via
the mesh network.

What do I need to configure to make this work?

Thanks!


On Thu, May 22, 2014 at 3:20 PM, Georgia Bullen <
georgia at opentechinstitute.org> wrote:

> Welcome Joshua!
>
> I think your previous message worked - about the RaspberryPi? Very
> exciting!
>
> And welcome!
>
> -Georgia
>
>
> On Thu, May 22, 2014 at 6:18 PM, Joshua Besneatte <besneatte at gmail.com>wrote:
>
"
1826,Commotion-dev, Commotion IP ranges for multiple mesh interfaces?,"Sun, 25 May 2014 16:55:10 -0700",-0700,miles,"
 I want to create  different meshes for each radio frequency (900,2.4, 5Gzh) This means I need different IP spaces for the ad-hoc networks. 


As part of the IP renumbering, is there a commotion band plan for IPing multiple meshes? The same thing will pop up when creating point to point links on different channels. 


"
1827,Commotion-dev, Commotion Wireless on Raspberry PI,"Tue, 27 May 2014 14:01:59 -0400",-0400,Dan Staples,"This is really fantastic! It's great to see the accompanying writeup as
well, so others can build off your work. (Also encouraging to see you
used the writeups from Jumoke--one of our GNOME Outreach Project for
Women applicants--as a starting point). I had previously been able to
mesh RPis with Commotion routers just by running olsrd on the Pi (and a
bunch of manual config), but haven't been able to run the full Commotion
client before.

Were you able to mesh the Pi with a Commotion router, or just other Pis?

Some interesting areas for further experimentation might be to see what
changes are necessary to mesh with a post-v1.1 Commotion routers. The
more significant changes since v1 have been deterministic BSSID
generation, IP addressing changes, and ad-hoc encryption[1].

Another thing that would be interesting would be to compare the
feasibility (and maybe performance) of RPis running the Commotion Linux
Client versus running Commotion-router on an x86 build of OpenWRT. There
is a writeup of the latter from another one of our OPW applications[2].

Finally, would you be okay if we re-posted your tutorial on the
Commotion blog?

cheers,
Dan


[1]
https://commotionwireless.net/blog/2014/01/10/commotion-r1-breaking-changes/

[2]
http://raniarho.wordpress.com/2014/03/07/installing-openwrt-on-a-raspberry-pi/

On 05/22/2014 04:47 PM, Joshua Besneatte wrote:
> Hello Devs!
> 
> I have just gotten commotion wireless working on a Raspberry Pi, and was
> told on IRC that perhaps some of you would be interested.
> 
> I have created deb files and put together a howto:
> 
> http://besneatte.blogspot.com/2014/05/commotion-pi-build-rpi-mesh-node.html
> 
> https://code.google.com/p/commotion-wireless-raspberry-pi/source/browse/
> 
> I hope this can be of some use. I saw RPi being mentioned in the dev
> roadmap... hopefully this can help save someone some time.
> 
> Thanks!
> Joshua Beneatte
> 
> _______________________________________________
> Commotion-dev mailing list
> Commotion-dev at lists.chambana.net
> https://lists.chambana.net/mailman/listinfo/commotion-dev
> 

-- 
Dan Staples

Open Technology Institute
https://commotionwireless.net
OpenPGP key: http://disman.tl/pgp.asc
Fingerprint: 2480 095D 4B16 436F 35AB 7305 F670 74ED BD86 43A9
"
1828,Commotion-dev, ping,"Tue, 27 May 2014 14:06:00 -0400",-0400,Dan Staples,"Some useful troubleshooting information would be to do a traceroute to a
host on the internet from machine 2. You can also check your routing
table (route -n) to see if there is a default route, as well as checking
olsrd's txtinfo (echo ""/all"" |nc localhost 2006).

If you have the smartgateway plugin on olsrd installed and running, it
should pick up internet gateways automatically and start using them.
Checking the output from those commands should help you figure out
what's not working.

Dan

On 05/22/2014 09:28 PM, joshua besneatte wrote:
> Yes that was me, thank you. For some reason I am not receiving a copy of
> messages I send, although I have the preference set in chambana. Hrm :/
> 
> Anyway, I have a question:
> 
> The final thing I have to get working to make the commotion pi node
> really nifty is for it to be used as an internet gateway. I have a
> debian linux machine
> connected to the LAN via ethernet and the wifi is connected to the
> commotion mesh node. On machine 2, it is showing the mesh connection to
> machine 1, and that machine 1 has internet. I can ping and ssh from
> machine 2 to machine 1, However, I cannot access the internet from
> machine 2 via the mesh network.
> 
> What do I need to configure to make this work?
> 
> Thanks!
> 
> 
> On Thu, May 22, 2014 at 3:20 PM, Georgia Bullen
> <georgia at opentechinstitute.org <mailto:georgia at opentechinstitute.org"
1829,Commotion-dev, Commotion IP ranges for multiple mesh,"Tue, 27 May 2014 14:15:21 -0400",-0400,Dan Staples,"Hi Miles,

The way we do IP addressing now is that each node will auto-generate IP
addresses for its interfaces based on the most significant bytes of the
device's MAC address. The mesh IP is in the 100.64.0.0/10 range, while
access point and ethernet interfaces are bridged and give out addresses
on the 10.0.0.0/8 range. We've often had the scenario where we'll want
to mesh over the upstream subnet (e.g. meshing over ethernet on a
switch), but creating multiple, non-overlapping mesh networks with the
same devices is a new use case for us.

So in other words, suggestions are welcome! Unless you want to
pre-provision all the IP addresses on the network, it seems like you'll
need a new scheme for auto-generating addresses that won't result in
collisions. Perhaps partitioning the 100.64.0.0/10 space into 3 separate
subnets might be one solution?

Dan

On 05/25/2014 07:55 PM, miles wrote:
> 
>  I want to create  different meshes for each radio frequency (900,2.4, 5Gzh) This means I need different IP spaces for the ad-hoc networks. 
> 
> 
> As part of the IP renumbering, is there a commotion band plan for IPing multiple meshes? The same thing will pop up when creating point to point links on different channels. 
> 
> 
> _______________________________________________
> Commotion-dev mailing list
> Commotion-dev at lists.chambana.net
> https://lists.chambana.net/mailman/listinfo/commotion-dev
> 

-- 
Dan Staples

Open Technology Institute
https://commotionwireless.net
OpenPGP key: http://disman.tl/pgp.asc
Fingerprint: 2480 095D 4B16 436F 35AB 7305 F670 74ED BD86 43A9
"
1830,Commotion-dev, ping,"Tue, 27 May 2014 15:07:07 -0400",-0400,Dan Staples,"On Tue 27 May 2014 03:04:11 PM EDT, Joshua Besneatte wrote:
> I am pretty sure it's installed, I will need to confirm. If I up the
> debug level in the configuration file, will I find everything in
> /var/log/syslog or do I need to look elsewhere?

Hmm, not sure if olsrd logs to syslog or not. I usually just run olsrd
in the foreground to view the debug output. You might also have to
recompile olsrd with debugging on, since I'm not sure if the debs on the
Commotion website were compiled with it on or off.

-- 
Dan Staples

Open Technology Institute
https://commotionwireless.net
OpenPGP key: http://disman.tl/pgp.asc
Fingerprint: 2480 095D 4B16 436F 35AB 7305 F670 74ED BD86 43A9
"
1831,Commotion-dev, Commotion Wireless on Raspberry PI,"Tue, 27 May 2014 12:12:33 -0700",-0700,Joshua Besneatte,"Thanks! See my replies below :

On 05/27/2014 11:01 AM, Dan Staples wrote:
> This is really fantastic! It's great to see the accompanying writeup as
> well, so others can build off your work. (Also encouraging to see you
> used the writeups from Jumoke--one of our GNOME Outreach Project for
> Women applicants--as a starting point). I had previously been able to
> mesh RPis with Commotion routers just by running olsrd on the Pi (and a
> bunch of manual config), but haven't been able to run the full Commotion
> client before.
>
> Were you able to mesh the Pi with a Commotion router, or just other Pis?

I do not have a commotion router set up yet. Just 2 laptops and 2 Pis.

I had to patch the commotion mesh applet so that I could invoke the mesh 
status window ( without the patch the ""show mesh status"" option is 
always disabled, unless you can connect with encryption, which is 
impossible unless you are using an atheros chipset ). I haven't posted 
the patch or the patched debs yet, but it's on my list. Is this 
something I could post on the GitHub page? How can I get involved with 
development on the linux side of things?

All of these connect nicely and show internet access on the nodes 
connected to my LAN. However, when the nodes mesh together, the only 
node that shows a default route of any kind is the one actually 
connected to the LAN.

>
> Some interesting areas for further experimentation might be to see what
> changes are necessary to mesh with a post-v1.1 Commotion routers. The
> more significant changes since v1 have been deterministic BSSID
> generation, IP addressing changes, and ad-hoc encryption[1].

I ordered a Ubiquity router and some wifi dongles with Atheros chipsets. 
I will see where I can get with these when they arrive.

>
> Another thing that would be interesting would be to compare the
> feasibility (and maybe performance) of RPis running the Commotion Linux
> Client versus running Commotion-router on an x86 build of OpenWRT. There
> is a writeup of the latter from another one of our OPW applications[2].
"
1832,Commotion-dev, ping,"Tue, 27 May 2014 12:12:51 -0700",-0700,Joshua Besneatte,"On 05/27/2014 11:06 AM, Dan Staples wrote:
> Some useful troubleshooting information would be to do a traceroute to a
> host on the internet from machine 2.

Der, I should have thought of that! OK, I will give that a shot and see 
what I find out.

You can also check your routing
> table (route -n) to see if there is a default route, as well as checking
> olsrd's txtinfo (echo ""/all"" |nc localhost 2006).

only the node actually connected to the LAN shows a default route.

>
> If you have the smartgateway plugin on olsrd installed and running, it
> should pick up internet gateways automatically and start using them.
> Checking the output from those commands should help you figure out
> what's not working.

I am pretty sure it's installed, I will need to confirm. If I up the 
debug level in the configuration file, will I find everything in 
/var/log/syslog or do I need to look elsewhere?

Thanks,
Joshua (shamanon)

>
> Dan
>
> On 05/22/2014 09:28 PM, joshua besneatte wrote:
"
1833,Commotion-dev, ping,"Tue, 27 May 2014 12:14:47 -0700",-0700,Joshua Besneatte,"On 05/27/2014 12:07 PM, Dan Staples wrote:
> On Tue 27 May 2014 03:04:11 PM EDT, Joshua Besneatte wrote:
"
1834,Commotion-dev, Commotion IP ranges for multiple mesh,"Thu, 29 May 2014 01:01:31 -0700",-0700,miles,"I may just be confusing myself about how to best use OLSR. 

I ran into the problem while setting up a dual band router.  If I use the standard commotion setup, each radio thinks they are attached to the same 100.64 subnet, but they can't view the same hosts.  Olsr will eventually make this work. If I want to force traffic over the backbone, I need set the per interface weight accordingly. 
Right?  
I think this makes serval dependent on the olsrd routing table, which is unfortunate/redundant. 

How do you handle mixed 5ghz and 2 ghz devices today when bridged over Ethernet?  

I was also thinking about segmenting the backbone for security reasons - an open 2.4 ghz mesh, and a  signed & encrypted OLSR mesh for the backbone. That would allow for trusted services like NTP and ""secure"" routing among backbone nodes. 
So far, I haven't figured out how to partition olsr without quagga and a lot of pain in the middle.   

If splitting the IP space does make sense, how about. 
100.64.0/11 for stock commotion (32 Class Bs = thousands of nodes before collisions are likely. ) 
100.96.0/11 for ""backbone"" with either a different frequency or different security zone. 
100.127.127.0/17  broken into 8 /23s for point to point  links or very sparse networks (like long haul WAN repeaters). That's only  ~ 7 nodes before there is  a 1% chance of collisions, but 1/2048 is fair odds for an auto discovered private link. It may be  more efficient to require manual IP addressing .  Or even set aside one 10.x space ?


On May 27, 2014, at 11:15 AM, Dan Staples <danstaples at opentechinstitute.org> wrote:

> Hi Miles,
> 
> The way we do IP addressing now is that each node will auto-generate IP
> addresses for its interfaces based on the most significant bytes of the
> device's MAC address. The mesh IP is in the 100.64.0.0/10 range, while
> access point and ethernet interfaces are bridged and give out addresses
> on the 10.0.0.0/8 range. We've often had the scenario where we'll want
> to mesh over the upstream subnet (e.g. meshing over ethernet on a
> switch), but creating multiple, non-overlapping mesh networks with the
> same devices is a new use case for us.
> 
> So in other words, suggestions are welcome! Unless you want to
> pre-provision all the IP addresses on the network, it seems like you'll
> need a new scheme for auto-generating addresses that won't result in
> collisions. Perhaps partitioning the 100.64.0.0/10 space into 3 separate
> subnets might be one solution?
> 
> Dan
> 
> On 05/25/2014 07:55 PM, miles wrote:
"
1835,Commotion-dev, Fwd: [serval-project-dev] tunnelling IP traffic is,"Thu, 29 May 2014 10:36:54 -0400",-0400,Dan Staples,"
"
1836,Commotion-dev, Commotion Wireless on Raspberry PI,"Thu, 29 May 2014 11:01:41 -0400",-0400,Dan Staples,"On 05/27/2014 03:12 PM, Joshua Besneatte wrote:
> Thanks! See my replies below :
> 
> On 05/27/2014 11:01 AM, Dan Staples wrote:
"
1837,Commotion-dev, Commotion IP ranges for multiple mesh,"Fri, 30 May 2014 09:04:32 -0400",-0400,Dan Staples,"On 05/29/2014 04:01 AM, miles wrote:
> I may just be confusing myself about how to best use OLSR. 
> 
> I ran into the problem while setting up a dual band router.  If I use the standard commotion setup, each radio thinks they are attached to the same 100.64 subnet, but they can't view the same hosts.  Olsr will eventually make this work. If I want to force traffic over the backbone, I need set the per interface weight accordingly. 
> Right?  
> I think this makes serval dependent on the olsrd routing table, which is unfortunate/redundant. 

For running multiple instances of olsrd, one for each separate network
you're setting up, that will have to be done manually as the Commotion
web interface doesn't support that. I haven't run multiple olsrd
instances on a node before so I'm not sure how they will handle both
updating the routing table. I imagine if each instance doesn't have
overlapping HNA networks, and perhaps doesn't receive routes to the same
subnets elsewhere, they won't clobber each other when updating the
routing table. But again, I don't know as I haven't tried.

As far as Serval relying on the olsrd routes, that's just a thing we
have to live with for now. We've been talking with the Serval folks
about a way to decouple serval-dna's built-in routing from the MDP
overlay network, but as of now there is no solution. They might be able
to shed more light on that matter.

> How do you handle mixed 5ghz and 2 ghz devices today when bridged over Ethernet?  

How do you mean? Right now, using the OpenWRT built-in menus (under the
Advanced tab in the new Commotion interface), you can use both radios
and set up virtual interfaces on each as you need. And you could add an
interface on the 2.4ghz radio and an interface on the 5ghz radio into a
bridge with the ethernet interface if you like.

> I was also thinking about segmenting the backbone for security reasons - an open 2.4 ghz mesh, and a  signed & encrypted OLSR mesh for the backbone. That would allow for trusted services like NTP and ""secure"" routing among backbone nodes. 
> So far, I haven't figured out how to partition olsr without quagga and a lot of pain in the middle.   
> 
> If splitting the IP space does make sense, how about. 
> 100.64.0/11 for stock commotion (32 Class Bs = thousands of nodes before collisions are likely. ) 
> 100.96.0/11 for ""backbone"" with either a different frequency or different security zone. 
> 100.127.127.0/17  broken into 8 /23s for point to point  links or very sparse networks (like long haul WAN repeaters). That's only  ~ 7 nodes before there is  a 1% chance of collisions, but 1/2048 is fair odds for an auto discovered private link. It may be  more efficient to require manual IP addressing .  Or even set aside one 10.x space ?

I suppose that could work, but again you'd need a new algorithm for
auto-generating IPs in each of those ranges if you didn't want to set
the IPs manually.

-- 
Dan Staples

Open Technology Institute
https://commotionwireless.net
OpenPGP key: http://disman.tl/pgp.asc
Fingerprint: 2480 095D 4B16 436F 35AB 7305 F670 74ED BD86 43A9
"
1838,Commotion-dev, Fwd: [Builders] AutoNOC - here we go,"Sat, 31 May 2014 12:01:11 -0400",-0400,Dan Staples,"FYI, looks like an interesting project.


"
1839,Commotion-dev, Fwd: [Builders] AutoNOC - here we go,"Sun, 1 Jun 2014 10:13:00 -0500",-0500,Ben West,"Here is more info that I could find about AutoNOC / FreedomNOC:
https://commons.thefnf.org/index.php/AutoNOC
https://thefnf.org/look-inside-freenetworkfoundation-network-operations-center/
https://chili.thefnf.org/projects/freedomnoc

Note that links under freenetworkfoundation.org I think are now located
under thefnf.org .

P.S. Is OTI still building or planning to build their own mesh dashboard?


On Sat, May 31, 2014 at 11:01 AM, Dan Staples <
danstaples at opentechinstitute.org> wrote:

> FYI, looks like an interesting project.
>
>
> "
1840,Commotion-dev, Fwd: [Builders] AutoNOC - here we go,"Mon, 2 Jun 2014 08:29:45 +1000",+1000,Outback Dingo,"Im actually quite skeptical around all this, so far it all sounds good, but
its just context, no viable
deployment, or code shown anywhere, no github.... to me ....... its a
watcher, but there have been
many that came before and had ideas that never panned out to anything
viable... im getting a sense
this might just be one of them.


On Mon, Jun 2, 2014 at 1:13 AM, Ben West <ben at gowasabi.net> wrote:

> Here is more info that I could find about AutoNOC / FreedomNOC:
> https://commons.thefnf.org/index.php/AutoNOC
>
> https://thefnf.org/look-inside-freenetworkfoundation-network-operations-center/
> https://chili.thefnf.org/projects/freedomnoc
>
> Note that links under freenetworkfoundation.org I think are now located
> under thefnf.org .
>
> P.S. Is OTI still building or planning to build their own mesh dashboard?
>
>
> On Sat, May 31, 2014 at 11:01 AM, Dan Staples <
> danstaples at opentechinstitute.org> wrote:
>
"
1841,Commotion-dev, Commotion IP ranges for multiple mesh,"Sun, 01 Jun 2014 20:51:24 -0400",-0400,Josh King,"Though we don't currently provide an interface for it, Commotion
supports generating random IPs in arbitrary ranges, not just the default
100.64.0.0/10. If you create profiles in /etc/commotion/profiles.d on
the router, just set the 'ip' parameter to an IP in the range you wish
(for instance, it's 100.64.0.0 by default) and 'ipgenmask' to the
netmask for the corresponding range in which you want to generate an IP
(255.192.0.0 by default). Then you would set assign that profile to the
corresponding mesh interface in /etc/config/network. As an example, you
could have a profile in /etc/commotion/profiles.d/commotion2ghz with the
parameters 'ip: 100.64.0.0' and 'ipgenmask: 255.192.0.0', and
/etc/commotion/profiles5ghz with parameters 'ip: 192.168.0.0' and
'ipgenmask: 255.255.0.0', and then in /etc/config/network set the
profile option for each interface to be 'commotion2ghz' or
'commotion5ghz'. On the next network reload, it will assign new IP
addresses in those ranges.

As for OLSRd, you can add more than one mesh interface. OLSRd, however,
by default adds everything to the kernel's main routing table, which
means that the node will try and forward traffic between your different
subnets. It might make sense in any event to try and achieve the
separation you're talking about (if I understand correctly) with
firewall rules rather than different OLSR instances. Because otherwise,
unless you set up OLSR to set things in different routing tables in the
kernel (and I'm not entirely sure what effect that will have on normally
routed traffic), it will try and all the routes to the default kernel
routing table whether or not you're running two instances.

On 05/30/2014 09:04 AM, Dan Staples wrote:
> On 05/29/2014 04:01 AM, miles wrote:
"
1842,Commotion-dev, SoC change on Nanostation Locos M2's (and other,"Tue, 3 Jun 2014 16:13:55 -0500",-0500,Ben West,"Saw this on a thread on OpenWRT-devel.

Nanostation Loco M2's (possibly other Ubiquiti AirMax products) have
started shipping with ar934x chipset instead of ar724x, due to the latter
being EOL.  Possibly a new board, too.

https://lists.openwrt.org/pipermail/openwrt-devel/2014-June/025805.html
https://lists.openwrt.org/pipermail/openwrt-devel/2014-June/025811.html
https://community.ubnt.com/t5/airMAX-General-Discussion/Differencens-between-XM-XW-and-TI-firmwares/m-p/776166#M40308

So far, no confirmation whether anyone on OpenWRT dev team has had a chance
to verify compatibility with the new SoCs/boards.

-- 
Ben West
http://gowasabi.net
ben at gowasabi.net
314-246-9434
"
1843,Commotion-dev, SoC change on Nanostation Locos M2's (and other,"Wed, 04 Jun 2014 10:31:12 -0400",-0400,Andy Gunn,"Thanks for the heads up on this one Ben - it sounds like they will
eventually be replacing all of the ar7x systems with the ar9x. Do you
have any of the newer units yet?

Is compatability very likely? Surely there are other ar9x routers out
there that OpenWRT supports?


On 06/03/2014 05:13 PM, Ben West wrote:
> Saw this on a thread on OpenWRT-devel.
> 
> Nanostation Loco M2's (possibly other Ubiquiti AirMax products) have
> started shipping with ar934x chipset instead of ar724x, due to the
> latter being EOL.  Possibly a new board, too.
> 
> https://lists.openwrt.org/pipermail/openwrt-devel/2014-June/025805.html
> https://lists.openwrt.org/pipermail/openwrt-devel/2014-June/025811.html
> https://community.ubnt.com/t5/airMAX-General-Discussion/Differencens-between-XM-XW-and-TI-firmwares/m-p/776166#M40308
> 
> So far, no confirmation whether anyone on OpenWRT dev team has had a
> chance to verify compatibility with the new SoCs/boards.
> 
> -- 
> Ben West
> http://gowasabi.net
> ben at gowasabi.net <mailto:ben at gowasabi.net>
> 314-246-9434

-- 
Andy Gunn, Field Engineer
Open Technology Institute, New America Foundation
andygunn at opentechinstitute.org | 202-596-3484
"
1844,Commotion-dev, Commotion Wireless on Raspberry PI,"Thu, 5 Jun 2014 14:48:04 -0700",-0700,joshua besneatte,"I am going to start playing with the new client today. I have a router and
compatible cellphone on the way here for testing.

I got so excited with getting the old code ported to the pi I totally
missed the ""no longer under development"" part oops :/
While still fun to play with I won't focus any more time on the deprecated
code.

I have only used svn before, so I will need to familiarize myself with git,
but I will keep the list abreast of any progress I make.


On Thu, May 29, 2014 at 8:01 AM, Dan Staples <
danstaples at opentechinstitute.org> wrote:

> On 05/27/2014 03:12 PM, Joshua Besneatte wrote:
> > Thanks! See my replies below :
> >
> > On 05/27/2014 11:01 AM, Dan Staples wrote:
> "
1845,Commotion-dev, Fwd: [Builders] AutoNOC - here we go,"Fri, 06 Jun 2014 11:51:34 -0700",-0700,Joshua Besneatte,"I read everything I could find on them and their goals, it seems like it 
is quite similar to Commotion. Seems like a pooling of resources would 
make more sense than a whole new project.

On 06/01/2014 03:29 PM, Outback Dingo wrote:
> Im actually quite skeptical around all this, so far it all sounds good,
> but its just context, no viable
> deployment, or code shown anywhere, no github.... to me ....... its a
> watcher, but there have been
> many that came before and had ideas that never panned out to anything
> viable... im getting a sense
> this might just be one of them.
>
>
"
1846,Commotion-dev, Commotion Wireless on Raspberry PI,"Fri, 06 Jun 2014 15:13:31 -0400",-0400,Chris Ritzo,"That's awesome Joshua!  Let us know if you have questions about git or 
if you're interested in getting involved in development on the 
Commotion Computer client!!

-Chris

On Thu 05 Jun 2014 05:48:04 PM EDT, joshua besneatte wrote:
> I am going to start playing with the new client today. I have a router
> and compatible cellphone on the way here for testing.
>
> I got so excited with getting the old code ported to the pi I totally
> missed the ""no longer under development"" part oops :/
> While still fun to play with I won't focus any more time on the
> deprecated code.
>
> I have only used svn before, so I will need to familiarize myself with
> git, but I will keep the list abreast of any progress I make.
>
>
> On Thu, May 29, 2014 at 8:01 AM, Dan Staples
> <danstaples at opentechinstitute.org
> <mailto:danstaples at opentechinstitute.org"
1847,Commotion-dev, Doxygen generated documentation,"Fri, 06 Jun 2014 15:18:09 -0400",-0400,Nat Meysenburg,"
Hi folks,

I'm happy to announce that we have just added some Doxygen generated API
references to the Commotion Wireless site. Right now we have
documentation for commotiond and the upcoming version of
commotion-client (the future of what is now the Linux client). 

You can find them at: https://commotionwireless.net/developer/api 

Please take a look around. If you see anything amiss (broken links,
weird formatting, etc.), please either email me or, even better, open an
issue against the commotion-docs repo on GitHub:
https://github.com/opentechinstitute/commotion-docs 

Also, if there are any repos in our codebase that you want to see us add
Doxygen documentation for, please open an issue. Posting those may be
limited to the extent to which we've actually written comments for that
code. 

If you are interested in generating your own documents for Commotion
sources, I wrote a helper script that is distributed with the code for
this site itself. You can find that here:
https://github.com/opentechinstitute/commotion-docs/tree/staging/scripts/doxygen 

Hopefully the next iteration will also contain links to the LaTex
version of the Doxygen documents. If anyone has good ideas or pointers
on how to present those, I'm all ears. 

Cheers,
~~Nat
"
1848,Commotion-dev, Doxygen generated documentation,"Fri, 06 Jun 2014 16:58:54 -0400",-0400,Grady Johnson,
1849,Commotion-dev, Doxygen generated documentation,"Fri, 06 Jun 2014 18:15:44 -0400",-0400,Will Hawkins,
1850,Commotion-dev, Commotion Client Development,"Fri, 06 Jun 2014 15:18:29 -0700",-0700,Joshua Besneatte,"Hello All!

I have begun playing with the Commotion Client code and have become 
totally obsessed :)

I have dropped all work on the old client and the work I was doing on 
the RPi to focus on the new version of Commotion Client. I just got an 
ubiquity picostation m2hp router and will put the CW firmware onto that 
for testing.

I see there have been a lot of updates since the previous client became 
deprecated. In order to begin playing with the code I have needed to 
make a number of updates to the utilities present. Here is what I have 
figured out so far (please correct me if I am wrong on anything!!!!):

Commotion client requires commotiond, serval-dna and 
commotion-service-manager. I want to do all the installs I can via 
package management so I started out by forking Natmey's 
commotion-deb-builder and modifying it to pull the best packages to use 
with commotion-client. I also fixed some bugs in the scripts. Once I get 
the perfect repo file sorted out I will commit that. Fork is here:

https://github.com/Shamanon/commotion-deb-builder

The serval-dna by OTI seems to be deprecated along with serval-crypo so 
I forked Serval Project's serval-dna and am almost done debianifying the 
package using dh_make and the OTI serval-dna/debian as a starting point. 
I also added an empty directory ""objs"" to prevent errors in compilation 
(that part was a hack as the problem needs to be fixed in their makefile 
or something). My fork isn't quite working with git-builddebpkg yet, but 
I am close. Today for sure.

https://github.com/Shamanon/serval-dna

Debian files for commotion-service-manager seem to be outdated as well. 
They are requiring serval-crypto and luci-commotion. serval-crypto is 
marked as deprecated nor is it listed on the project outline as 
required. I have started by removing that requirement in my fork. I am 
wondering if luci-commotion should still be a requirement?

I figure while I am on a roll, I will debianify commotiond as well. I 
assume that will need to be done at some point anyway.

Once I get the debianification sorted out for everything I will get 
started on the client.

~Shamanon
"
1851,Commotion-dev, Fwd: [Builders] AutoNOC - here we go,"Sat, 7 Jun 2014 09:11:41 +1000",+1000,Outback Dingo,"Id suggested the same thing, merging of certain other projects and talents
when commotion first erupted onto the scene, though
that didnt go far at all..... one being buffelbloat/cerowrt and
optimwifi........


On Sat, Jun 7, 2014 at 4:51 AM, Joshua Besneatte <besneatte at gmail.com>
wrote:

> I read everything I could find on them and their goals, it seems like it
> is quite similar to Commotion. Seems like a pooling of resources would make
> more sense than a whole new project.
>
>
> On 06/01/2014 03:29 PM, Outback Dingo wrote:
>
"
1852,Commotion-dev, Commotion Client Development,"Fri, 06 Jun 2014 20:03:15 -0400",-0400,Chris Ritzo,"Shamanon-

Sounds like you're making some great progress on learning the core
components of Commotion.

If you haven't found it already, there is some great documentation on
our planned Architecture and Development notes on Commotion Client on
it's repository's Github wiki:
https://github.com/opentechinstitute/commotion-client/wiki

All pages are organized into a comprehensive technical architecture and
development guide:
https://github.com/opentechinstitute/commotion-client/wiki/commotion-client-architecture
https://github.com/opentechinstitute/commotion-client/wiki/development-guide

Any progress you are able to make here would be amazing!
Thanks for being so enthusiastic.

Please continue to email us or find on the #commotion IRC channel

-Chris

On 06/06/2014 06:18 PM, Joshua Besneatte wrote:
> Hello All!
> 
> I have begun playing with the Commotion Client code and have become
> totally obsessed :)
> 
> I have dropped all work on the old client and the work I was doing on
> the RPi to focus on the new version of Commotion Client. I just got an
> ubiquity picostation m2hp router and will put the CW firmware onto that
> for testing.
> 
> I see there have been a lot of updates since the previous client became
> deprecated. In order to begin playing with the code I have needed to
> make a number of updates to the utilities present. Here is what I have
> figured out so far (please correct me if I am wrong on anything!!!!):
> 
> Commotion client requires commotiond, serval-dna and
> commotion-service-manager. I want to do all the installs I can via
> package management so I started out by forking Natmey's
> commotion-deb-builder and modifying it to pull the best packages to use
> with commotion-client. I also fixed some bugs in the scripts. Once I get
> the perfect repo file sorted out I will commit that. Fork is here:
> 
> https://github.com/Shamanon/commotion-deb-builder
> 
> The serval-dna by OTI seems to be deprecated along with serval-crypo so
> I forked Serval Project's serval-dna and am almost done debianifying the
> package using dh_make and the OTI serval-dna/debian as a starting point.
> I also added an empty directory ""objs"" to prevent errors in compilation
> (that part was a hack as the problem needs to be fixed in their makefile
> or something). My fork isn't quite working with git-builddebpkg yet, but
> I am close. Today for sure.
> 
> https://github.com/Shamanon/serval-dna
> 
> Debian files for commotion-service-manager seem to be outdated as well.
> They are requiring serval-crypto and luci-commotion. serval-crypto is
> marked as deprecated nor is it listed on the project outline as
> required. I have started by removing that requirement in my fork. I am
> wondering if luci-commotion should still be a requirement?
> 
> I figure while I am on a roll, I will debianify commotiond as well. I
> assume that will need to be done at some point anyway.
> 
> Once I get the debianification sorted out for everything I will get
> started on the client.
> 
> ~Shamanon
> _______________________________________________
> Commotion-dev mailing list
> Commotion-dev at lists.chambana.net
> https://lists.chambana.net/mailman/listinfo/commotion-dev


-- 
"
1853,Commotion-dev, Commotion Client Development,"Sat, 7 Jun 2014 18:35:20 +0930",+0930,Paul Gardner-Stephen,"Hi Joshua,

Great work.  I recall that there may already be a debian package for
serval-dna.  Andrew can probably comment on this.

Paul.


On Sat, Jun 7, 2014 at 7:48 AM, Joshua Besneatte <besneatte at gmail.com>
wrote:

> Hello All!
>
> I have begun playing with the Commotion Client code and have become
> totally obsessed :)
>
> I have dropped all work on the old client and the work I was doing on the
> RPi to focus on the new version of Commotion Client. I just got an ubiquity
> picostation m2hp router and will put the CW firmware onto that for testing.
>
> I see there have been a lot of updates since the previous client became
> deprecated. In order to begin playing with the code I have needed to make a
> number of updates to the utilities present. Here is what I have figured out
> so far (please correct me if I am wrong on anything!!!!):
>
> Commotion client requires commotiond, serval-dna and
> commotion-service-manager. I want to do all the installs I can via package
> management so I started out by forking Natmey's commotion-deb-builder and
> modifying it to pull the best packages to use with commotion-client. I also
> fixed some bugs in the scripts. Once I get the perfect repo file sorted out
> I will commit that. Fork is here:
>
> https://github.com/Shamanon/commotion-deb-builder
>
> The serval-dna by OTI seems to be deprecated along with serval-crypo so I
> forked Serval Project's serval-dna and am almost done debianifying the
> package using dh_make and the OTI serval-dna/debian as a starting point. I
> also added an empty directory ""objs"" to prevent errors in compilation (that
> part was a hack as the problem needs to be fixed in their makefile or
> something). My fork isn't quite working with git-builddebpkg yet, but I am
> close. Today for sure.
>
> https://github.com/Shamanon/serval-dna
>
> Debian files for commotion-service-manager seem to be outdated as well.
> They are requiring serval-crypto and luci-commotion. serval-crypto is
> marked as deprecated nor is it listed on the project outline as required. I
> have started by removing that requirement in my fork. I am wondering if
> luci-commotion should still be a requirement?
>
> I figure while I am on a roll, I will debianify commotiond as well. I
> assume that will need to be done at some point anyway.
>
> Once I get the debianification sorted out for everything I will get
> started on the client.
>
> ~Shamanon
> _______________________________________________
> Commotion-dev mailing list
> Commotion-dev at lists.chambana.net
> https://lists.chambana.net/mailman/listinfo/commotion-dev
>
"
1854,Commotion-dev, Commotion Client Development,"Sat, 07 Jun 2014 11:25:35 -0700",-0700,Joshua Besneatte,"Hi Paul,

Thanks. This is exactly the project I was planning on starting myself, 
luckily I found you guys and it's already going. The enthusiasm is easy 
on my end, glad to see there are many others with my vision.

I got a decent deb build working for Serval Project's serval-dna 
incorporating a bunch of the scripts from OTI's serval-dna debian 
folder. I can install/uninstall the serval-dna development fork, 
including libs/includes/etc,  however, commotiond doesn't want to 
compile against this version of serval-dna. Compilation of commotiond 
errors out stating that the llseek64 system call is not available. So 
far my only guesses are:

1. I am missing a dependency. (manpages-dev is supposed to provide 
llseek64 but installing said package did not help)

2. commotiond needs to use OTI's version of serval-dna

3. I need to rebuild SP's serval-dna as package class ""single"" vs ""indep""

If anyone could shed some light on this, that would be great.

If I build and install OTI's serval-dna I am able to compile commotiond 
without problem.

As for the commotion-service-manager, does this still require 
luci-commotion? Luci-commotion fails to install on requirement for the 
deprecated serval-crypto.

I have read most of the development docs and road-maps, but of course I 
may have missed something. It seems the goal is to move to using SP's 
serval-dna (for full serval compatibility) vs the OTI fork, is this 
correct? Is OTI's serval-crypto deprecated because crypto is now handled 
by SP's serval-dna?

My nick is shamanon on IRC and I am in the #commotion channel if anyone 
wants to strike up a conversation there.

Thanks!

On 06/07/2014 02:05 AM, Paul Gardner-Stephen wrote:
> Hi Joshua,
>
> Great work.  I recall that there may already be a debian package for
> serval-dna.  Andrew can probably comment on this.
>
> Paul.
>
>
"
1855,Commotion-dev, Commotion Client Development,"Mon, 09 Jun 2014 16:11:18 -0400",-0400,Dan Staples,"Responses inline:

On 06/07/2014 02:25 PM, Joshua Besneatte wrote:
> Hi Paul,
> 
> Thanks. This is exactly the project I was planning on starting myself,
> luckily I found you guys and it's already going. The enthusiasm is easy
> on my end, glad to see there are many others with my vision.
> 
> I got a decent deb build working for Serval Project's serval-dna
> incorporating a bunch of the scripts from OTI's serval-dna debian
> folder. I can install/uninstall the serval-dna development fork,
> including libs/includes/etc,  however, commotiond doesn't want to
> compile against this version of serval-dna. Compilation of commotiond
> errors out stating that the llseek64 system call is not available. So
> far my only guesses are:
> 
> 1. I am missing a dependency. (manpages-dev is supposed to provide
> llseek64 but installing said package did not help)
> 
> 2. commotiond needs to use OTI's version of serval-dna
> 
> 3. I need to rebuild SP's serval-dna as package class ""single"" vs ""indep""
> 
> If anyone could shed some light on this, that would be great.
> 
> If I build and install OTI's serval-dna I am able to compile commotiond
> without problem.

The serval-dna plugin for commotiond is currently made to build against
a specific version of libservald, which you can checkout in the
'commotion-wireless' branch of OTI's fork of serval-dna.

There is a _new_ version of the commotiond plugin that I'm working on
that builds against a later version of libserval, which is in the
'refactoring' branch of commotiond. This branch should build against the
'serval-multi-key' branch of OTI's fork of serval-dna, though testing is
still in progress.

> 
> As for the commotion-service-manager, does this still require
> luci-commotion? Luci-commotion fails to install on requirement for the
> deprecated serval-crypto.

Commotion-service-manager is also something I'm working on refactoring
and upgrading, but I believe the master branch of CSM should still be
compatible with the new versions of commotiond/serval-dna. The Debian
packaging for CSM hasn't been updated to reflect the new dependencies
however. If you're interested in doing that, that would be rad.
Luci-commotion, like serval-crypto, is no longer a dependency. We should
also add avahi-daemon to the Package dependencies, and
libavahi-client-dev to the Source dependencies.

> 
> I have read most of the development docs and road-maps, but of course I
> may have missed something. It seems the goal is to move to using SP's
> serval-dna (for full serval compatibility) vs the OTI fork, is this
> correct? Is OTI's serval-crypto deprecated because crypto is now handled
> by SP's serval-dna?

We'd eventually like to use the Serval Project's debian package of
serval-dna, but for now we have some incompatibilities we still depend
on. Long term we'll probably drop the serval-dna plugin for commotiond
and just use serval-dna itself. The only reason we don't do that now is
because of size constraints on the router platform.

> 
> My nick is shamanon on IRC and I am in the #commotion channel if anyone
> wants to strike up a conversation there.

Awesome. My nick is dismantl.

> 
> Thanks!
> 
> On 06/07/2014 02:05 AM, Paul Gardner-Stephen wrote:
"
1856,Commotion-dev, Commotion Client Development,"Tue, 10 Jun 2014 11:42:56 +0930",+0930,Paul Gardner-Stephen,"CCing to Serval dev list to see if Andrew of Jeremy have thoughts on this.

Paul.


On Sun, Jun 8, 2014 at 3:55 AM, Joshua Besneatte <besneatte at gmail.com>
wrote:

> Hi Paul,
>
> Thanks. This is exactly the project I was planning on starting myself,
> luckily I found you guys and it's already going. The enthusiasm is easy on
> my end, glad to see there are many others with my vision.
>
> I got a decent deb build working for Serval Project's serval-dna
> incorporating a bunch of the scripts from OTI's serval-dna debian folder. I
> can install/uninstall the serval-dna development fork, including
> libs/includes/etc,  however, commotiond doesn't want to compile against
> this version of serval-dna. Compilation of commotiond errors out stating
> that the llseek64 system call is not available. So far my only guesses are:
>
> 1. I am missing a dependency. (manpages-dev is supposed to provide
> llseek64 but installing said package did not help)
>
> 2. commotiond needs to use OTI's version of serval-dna
>
> 3. I need to rebuild SP's serval-dna as package class ""single"" vs ""indep""
>
> If anyone could shed some light on this, that would be great.
>
> If I build and install OTI's serval-dna I am able to compile commotiond
> without problem.
>
> As for the commotion-service-manager, does this still require
> luci-commotion? Luci-commotion fails to install on requirement for the
> deprecated serval-crypto.
>
> I have read most of the development docs and road-maps, but of course I
> may have missed something. It seems the goal is to move to using SP's
> serval-dna (for full serval compatibility) vs the OTI fork, is this
> correct? Is OTI's serval-crypto deprecated because crypto is now handled by
> SP's serval-dna?
>
> My nick is shamanon on IRC and I am in the #commotion channel if anyone
> wants to strike up a conversation there.
>
> Thanks!
>
>
> On 06/07/2014 02:05 AM, Paul Gardner-Stephen wrote:
>
"
1857,Commotion-dev, Fwd: [serval-project-dev] Community Mesh project,"Wed, 11 Jun 2014 13:32:18 -0400",-0400,Dan Staples,"
"
1858,Commotion-dev, Fwd: [serval-project-dev] Community Mesh,"Thu, 12 Jun 2014 10:07:47 +1000",+1000,Outback Dingo,"Id say for a community based deployment youll get alot more bang for your
buck deploying ubiquiti radios
great power, great price and designed for outdoors.... Weve got a network
in Florida and in Thailand and it
is literally the only brand we buy.


On Thu, Jun 12, 2014 at 3:32 AM, Dan Staples <
danstaples at opentechinstitute.org> wrote:

>
> "
1859,Commotion-dev, SoC change on Nanostation Locos M2's (and other,"Thu, 12 Jun 2014 09:37:13 -0500",-0500,Ben West,"Following up that the person who discovered the chipset change has
determined that Nanostation M2's *are not* affected by the change, while
Nanostation M5's are.  No word yet on OpenWRT support for the new chipset,
apparently.

http://wiki.openwrt.org/toh/ubiquiti/nanostationm2#old.boards.vs.new.boards.rumor


On Wed, Jun 4, 2014 at 9:31 AM, Andy Gunn <andygunn at opentechinstitute.org>
wrote:

> Thanks for the heads up on this one Ben - it sounds like they will
> eventually be replacing all of the ar7x systems with the ar9x. Do you
> have any of the newer units yet?
>
> Is compatability very likely? Surely there are other ar9x routers out
> there that OpenWRT supports?
>
>
> On 06/03/2014 05:13 PM, Ben West wrote:
> > Saw this on a thread on OpenWRT-devel.
> >
> > Nanostation Loco M2's (possibly other Ubiquiti AirMax products) have
> > started shipping with ar934x chipset instead of ar724x, due to the
> > latter being EOL.  Possibly a new board, too.
> >
> > https://lists.openwrt.org/pipermail/openwrt-devel/2014-June/025805.html
> > https://lists.openwrt.org/pipermail/openwrt-devel/2014-June/025811.html
> >
> https://community.ubnt.com/t5/airMAX-General-Discussion/Differencens-between-XM-XW-and-TI-firmwares/m-p/776166#M40308
> >
> > So far, no confirmation whether anyone on OpenWRT dev team has had a
> > chance to verify compatibility with the new SoCs/boards.
> >
> > --
> > Ben West
> > http://gowasabi.net
> > ben at gowasabi.net <mailto:ben at gowasabi.net>
> > 314-246-9434
>
> --
> Andy Gunn, Field Engineer
> Open Technology Institute, New America Foundation
> andygunn at opentechinstitute.org | 202-596-3484
> _______________________________________________
> Commotion-dev mailing list
> Commotion-dev at lists.chambana.net
> https://lists.chambana.net/mailman/listinfo/commotion-dev
"
1860,Commotion-dev, Commotion Router v1.1.rc2 released!,"Mon, 16 Jun 2014 10:58:39 -0400",-0400,Josh King,"Hi all,

I'm pleased to announce that we've just posted the second release
candidate for the stable 1.1 version of the Commotion Router firmware.
This version patches a memory leak in our Serval plugin, and also
includes a number of small bugfixes and interface tweaks. You can find
the release notes here:

https://commotionwireless.net/blog/2014/06/13/commotion-router-1.1rc2-release-notes/

and downloads here:

https://commotionwireless.net/download/routers/

We currently have images for a selection of Ubiquiti routers posted, and
will be posting images for select TP-Link and Buffalo routers shortly.
Pending completion of testing on one of our larger community testbed
networks, this release will hopefully become v1.1 final within the next
week or two.
-- 
Josh King
Lead Technologist
The Open Technology Institute
http://opentechinstitute.org
PGP Fingerprint: 8269 ED6F EA3B 7D78 F074 1E99 2FDA 4DA1 69AE 4999

"
1861,Commotion-dev, Repository Consolidation,"Wed, 18 Jun 2014 12:37:08 -0400",-0400,Josh King,"Hi all,

Back in April, I proposed on the list a strategy for consolidating and
cleaning up several of our many repositories. Today, I'm pushing forward
on that. This should not have a major effect on most developers; the
main change right now is that we are consolidating all of our
LuCI-related repositories into luci-commotion (except for
luci-i18n-commotion). Additionally, all version numbers for those
packages will be synced up, although they will still be built as
separate packages by our build system. We will also be moving all open
issues from those separate github projects into luci-commotion. Finally,
we will also be backing up and then deleting several unused
repositories, including the LuCI projects that have just been vacated.

Hopefully this should all be complete by the end of today, although
there may be some build breakage for Commotion Router as this is
happening. With any luck, this will result in a more straightforward and
easier to manage structure for our many github projects.
-- 
Josh King
Lead Technologist
The Open Technology Institute
http://opentechinstitute.org
PGP Fingerprint: 8269 ED6F EA3B 7D78 F074 1E99 2FDA 4DA1 69AE 4999

"
1862,Commotion-dev, meshing over ethernet,"Mon, 30 Jun 2014 01:23:56 -0700",-0700,miles,"

I'm having problems with the following mesh
Subnet -> wifi -> Device F ->ethernet link -> Device C -> wifi link -> Device A or Device E

C gets updates from F, A and E.   Route table looks good & it can connect to Subnet and the other routers. 

F  only gets routes for C. 
A gets routes only for  E. 
E gets routes only for A

all hosts are using the same serval keyring & signing key.  All are rc1.1r2. 
Each node has a wired ether interface and a mesh interface.  The wired interface is unplugged except for nodes F & C. 

I suspect that part of my problem may be with HNA. 
https://commotionwireless.net/docs/cck/installing-configuring/common-configuration/ suggests disabling HNA for both devices in ""Two wireless devices meshed over an ethernet connection"".  This seems counter intuitive. Don't I still want to announce both AP subnets? 

Any suggestions where I should look for problems? 


"
1863,Commotion-dev, meshing over ethernet,"Mon, 30 Jun 2014 06:22:46 -0400",-0400,Chris Ritzo,"This sounds like the same issue we encountered in a recent mesh
deployment at AMC. It may be a firewall zone bug specific to meshing
over ethernet. This may help diagnose/fix:

https://github.com/opentechinstitute/commotion-router/issues/128



On Mon 30 Jun 2014 04:23:56 AM EDT, miles wrote:
>
>
> I'm having problems with the following mesh
> Subnet -> wifi -> Device F ->ethernet link -> Device C -> wifi link -> Device A or Device E
>
> C gets updates from F, A and E.   Route table looks good & it can connect to Subnet and the other routers. 
>
> F  only gets routes for C. 
> A gets routes only for  E. 
> E gets routes only for A
>
> all hosts are using the same serval keyring & signing key.  All are rc1.1r2. 
> Each node has a wired ether interface and a mesh interface.  The wired interface is unplugged except for nodes F & C. 
>
> I suspect that part of my problem may be with HNA. 
> https://commotionwireless.net/docs/cck/installing-configuring/common-configuration/ suggests disabling HNA for both devices in ""Two wireless devices meshed over an ethernet connection"".  This seems counter intuitive. Don't I still want to announce both AP subnets? 
>
> Any suggestions where I should look for problems? 
>
>
> _______________________________________________
> Commotion-dev mailing list
> Commotion-dev at lists.chambana.net
> https://lists.chambana.net/mailman/listinfo/commotion-dev


-- 
"
1864,Commotion-dev," WRTnode,","Mon, 30 Jun 2014 07:32:41 -0400",-0400,Dan Staples,"http://wrtnode.com/

Apparently it uses the MT7620N SoC. I put open source in quotes because
it seems the firmware of the MT7620N is proprietary:
https://dev.openwrt.org/ticket/14625

But still interesting, nonetheless.

Dan

-- 
Dan Staples

Open Technology Institute
https://commotionwireless.net
OpenPGP key: http://disman.tl/pgp.asc
Fingerprint: 2480 095D 4B16 436F 35AB 7305 F670 74ED BD86 43A9
"
1865,Commotion-dev, meshing over ethernet,"Mon, 30 Jun 2014 10:09:02 -0400",-0400,Dan Staples,"+1 to what Chris said. That seems to be exactly the problem we saw
recently, with the firewall fix detailed in that Github issue.

Dan

On 06/30/2014 06:22 AM, Chris Ritzo wrote:
> This sounds like the same issue we encountered in a recent mesh
> deployment at AMC. It may be a firewall zone bug specific to meshing
> over ethernet. This may help diagnose/fix:
> 
> https://github.com/opentechinstitute/commotion-router/issues/128
> 
> 
> 
> On Mon 30 Jun 2014 04:23:56 AM EDT, miles wrote:
"
1866,Commotion-dev, meshing over ethernet,"Mon, 30 Jun 2014 22:03:59 -0700",-0700,miles,"My problem turns out to be with  olsrd+ serval problem. I tested by turning off all firewalls, then eventually by turning off serval signing. 

OLSR in debug shows up  the following on the central node C.  

[MDP] Match for 192.168.168.34
[MDP] Timestamp slack: 743296215
[MDP] Timestamp scew detected!!
[MDP] Timestamp mismatch in packet from 192.168.1.34!
[MDP] Rejecting packet from 192.168.1.34
[MDP] Checking packet for challenge response message...


Then I installed NTP server on Node F (1.34) and ntp client on node C. When clocks on the two hosts are within seconds, I get
[MDP] Checking packet for challenge response message...
[MDP] Rejecting packet from 192.168.1.34
[MDP] Checking packet for challenge response message...

or 
[MDP] Match for 192.168.1.34
[MDP] Message from non-validated host!
[MDP] Timestamp mismatch in packet from 192.168.1.34!
[MDP] Rejecting packet from 192.168.1.34
[MDP] Adding signature for packet size 20
[MDP] timestamp: 1404190197

MD5 for the serval keychain libraries confirms that they are identical. I've been able to get asymmetrical routes (as mailed yesterday) using this shared key. 



Host F, 1.34 is a buffalo I built from master. 
 *** olsr.org -  pre-0.6.6.2-git_779bc7a-hash_4a8e5a728989421b6ecb7308a6e41f6c *** 

Host C, 1.33 * node E are ubiquiti M, using the shipping 1.1rc2 image. 
 *** olsr.org -  0.6.5.4-git_8b2236e-hash_3667acb4ad7e32204039db1f6b9bc660 

Host E  is the same as F, but without NTP - clock skew causes F to drop all packets  from E, but sometimes they work?


And as final proof, disabling serval signing makes everything work. 

Sigh. 


Is there a good way to bootstrap a serval signed mesh without an Internet gateway? 


On Jun 30, 2014, at 7:09 AM, Dan Staples <danstaples at opentechinstitute.org> wrote:

> +1 to what Chris said. That seems to be exactly the problem we saw
> recently, with the firewall fix detailed in that Github issue.
> 
> Dan
> 
> On 06/30/2014 06:22 AM, Chris Ritzo wrote:
"
1867,Commotion-dev, meshing over ethernet,"Tue, 01 Jul 2014 10:48:05 -0400",-0400,Dan Staples,"Serval signed routes will work without a gateway/NTP. However, it will
definitely take up to 5 minutes for the timestamps to converge. They
*will* converge though, even if the starting clocks on the nodes are
days or months apart. Give it a few minutes and see if it starts working
again.

Also, did things work with serval signing off and the original firewall
rules on? I'm still curious if the firewall rules are adding an
additional barrier.

dan

On 07/01/2014 01:03 AM, miles wrote:
> My problem turns out to be with  olsrd+ serval problem. I tested by
> turning off all firewalls, then eventually by turning off serval signing. 
> 
> OLSR in debug shows up  the following on the central node C.  
> 
> [MDP] Match for 192.168.168.34
> [MDP] Timestamp slack: 743296215
> [MDP] Timestamp scew detected!!
> [MDP] Timestamp mismatch in packet from 192.168.1.34!
> [MDP] Rejecting packet from 192.168.1.34
> [MDP] Checking packet for challenge response message...
> 
> 
> Then I installed NTP server on Node F (1.34) and ntp client on node C.
> When clocks on the two hosts are within seconds, I get
> [MDP] Checking packet for challenge response message...
> [MDP] Rejecting packet from 192.168.1.34
> [MDP] Checking packet for challenge response message...
> 
> or 
> [MDP] Match for 192.168.1.34
> [MDP] Message from non-validated host!
> [MDP] Timestamp mismatch in packet from 192.168.1.34!
> [MDP] Rejecting packet from 192.168.1.34
> [MDP] Adding signature for packet size 20
> [MDP] timestamp: 1404190197
> 
> MD5 for the serval keychain libraries confirms that they are identical.
> I've been able to get asymmetrical routes (as mailed yesterday) using
> this shared key. 
> 
> 
> 
> Host F, 1.34 is a buffalo I built from master. 
>  *** olsr.org <http://olsr.org> - 
> pre-0.6.6.2-git_779bc7a-hash_4a8e5a728989421b6ecb7308a6e41f6c *** 
> 
> Host C, 1.33 * node E are ubiquiti M, using the shipping 1.1rc2 image. 
>  *** olsr.org <http://olsr.org> - 
> 0.6.5.4-git_8b2236e-hash_3667acb4ad7e32204039db1f6b9bc660 
> 
> Host E  is the same as F, but without NTP - clock skew causes F to drop
> all packets  from E, but sometimes they work?
> 
> 
> And as final proof, disabling serval signing makes everything work. 
> 
> Sigh. 
> 
> 
> Is there a good way to bootstrap a serval signed mesh without an
> Internet gateway? 
> 
> 
> On Jun 30, 2014, at 7:09 AM, Dan Staples
> <danstaples at opentechinstitute.org
> <mailto:danstaples at opentechinstitute.org"
1868,Commotion-dev, meshing over ethernet,"Wed, 2 Jul 2014 00:24:52 -0700",-0700,miles,"This is giving me no end of trouble. I've now tested, and with all firewalls turned off

3 ubiquiti nodes will mesh using serval over wifi. As you said, it takes a few minutes,(but not more than 5) to settle. 
2 Buffalo nodes will mesh over wifi. 
1 buffalo node ""Center"" is connected to one ubiquiti over ethernet.  Turning off serval signing makes everything work as expected through node Center.

Turn on serval, and center sees buffalos, but will not communicate with the ubiquiti device.  

Thoughts for what to test/debug next? 

The buffalos were build using master last week. Ubiquitis are 1.1rc2.  Does master play nicely with 1.1 right now?  The next thing I can think of to try is to rebuild with commotion feed as 1.1 and see if getting the same olsrd version will magically fix things. 


On Jul 1, 2014, at 7:48 AM, Dan Staples <danstaples at opentechinstitute.org> wrote:

> Serval signed routes will work without a gateway/NTP. However, it will
> definitely take up to 5 minutes for the timestamps to converge. They
> *will* converge though, even if the starting clocks on the nodes are
> days or months apart. Give it a few minutes and see if it starts working
> again.
"
1869,Commotion-dev, meshing over ethernet,"Wed, 02 Jul 2014 07:06:52 -0400",-0400,Dan Staples,"The current master branch is now using an upgraded version of olsrd,
version 0.6.6, but doing a diff b/w the versions doesn't show anything
that would affect the route signing. So it should be fully compatible.

Is your setup something like this?

[ubiquiti]"
1870,Commotion-dev, meshing over ethernet,"Wed, 02 Jul 2014 10:25:36 -0400",-0400,Chris Ritzo,"Miles,
I was discussing this thread with some other team members this morning,
and we think you've confirmed a bug that we found in our 1.1rc2
connectivity tests.

Those tests confirm that two nodes meshed via ethernet will work when
not signed and fail when signed. Your report that turning off Serval
signing makes the center Buffalo node work properly.

Our team is still debugging this and will be pushing feedback to Serval
about it, however in the interim, turning off route signing via Serval
should solve this for you.

I'm sure Josh and Will can weigh in on more specifics related to the bug.

-Chris

On Wed 02 Jul 2014 07:06:52 AM EDT, Dan Staples wrote:
> The current master branch is now using an upgraded version of olsrd,
> version 0.6.6, but doing a diff b/w the versions doesn't show anything
> that would affect the route signing. So it should be fully compatible.
>
> Is your setup something like this?
>
> [ubiquiti]"
1871,Commotion-dev, meshing over ethernet,"Wed, 2 Jul 2014 08:44:54 -0700",-0700,Myles,"So plan b for meshing in production is to use WPA on the mesh interface and firewall OLSR to be unreachable from non mesh interfaces. Right?

Sent from my mobile

> On Jul 2, 2014, at 7:25 AM, Chris Ritzo <critzo at opentechinstitute.org> wrote:
> 
> Miles,
> I was discussing this thread with some other team members this morning,
> and we think you've confirmed a bug that we found in our 1.1rc2
> connectivity tests.
> 
> Those tests confirm that two nodes meshed via ethernet will work when
> not signed and fail when signed. Your report that turning off Serval
> signing makes the center Buffalo node work properly.
> 
> Our team is still debugging this and will be pushing feedback to Serval
> about it, however in the interim, turning off route signing via Serval
> should solve this for you.
> 
> I'm sure Josh and Will can weigh in on more specifics related to the bug.
> 
> -Chris
> 
"
1872,Commotion-dev, meshing over ethernet,"Wed, 02 Jul 2014 17:29:41 -0400",-0400,Dan Staples,"Hey Miles,

That sounds like a good plan B to me, if we can't fix this issue. But we
(and by that I mean folks at the office other than me) did some testing
today to see if we could figure out the problem you're seeing. Here's
what they found:

Serval route signing between Buffalo and Ubiquiti routers causes
commotiond and olsrd to seg fault (but works fine in Ubiq-only meshes).
Debugging it indicates that it's a memory-related architecture-specific
problem in commotiond. The hardware we used to replicate the issue were
Ubiquiti Picostation and Buffalo WZR-HP-G300NH.

We already have one open memory-related fix for commotiond that may or
may not solve the problem:
https://github.com/opentechinstitute/commotiond/pull/103. We'll do some
more testing today and tomorrow and let you know anything else we find.

Thanks for your patience with this and hopefully we'll be able to
resolve the problem.

Dan

On 07/02/2014 11:44 AM, Myles wrote:
> So plan b for meshing in production is to use WPA on the mesh interface and firewall OLSR to be unreachable from non mesh interfaces. Right?
> 
> Sent from my mobile
> 
"
1873,Commotion-dev, meshing over ethernet,"Wed, 02 Jul 2014 20:49:45 -0400",-0400,Will Hawkins,"Miles,

We have uncovered the root of the problem and wanted to share the findings.

First of all, thank you for your patience with us as we debugged this
issue. Without your input, we would never have realized that this was a
problem.

In cases like yours, olsrd is meshing over two different interfaces.
There is a primary interface address that labels the node throughout the
network and there are other, secondary, addresses that label the
individual interfaces.

In the Serval route signing plugin, we use those labels to index a table
of timeouts/timestamps. The values from this table are used to locate
the proper key, the proper timestamp skew, etc.

When a node has multiple interfaces, the plugin gets confused about
which label to use to index that table. As a result, the skews never
converge and the routes cannot be signed.

We are going to start looking at possible solutions for this problem as
soon as possible. We cannot promise a fix before the start of Toorcamp
next week, but we are going to do our best. We will keep you posted on
our progress and send you any fixes.

In the meantime, the only way to work around the problem is to mesh on a
single interface per node.

I hope this information helps. As I said, we will keep you posted!

Thanks again for all the input you've given us!
Will

On 07/02/2014 05:29 PM, Dan Staples wrote:
> Hey Miles,
> 
> That sounds like a good plan B to me, if we can't fix this issue. But we
> (and by that I mean folks at the office other than me) did some testing
> today to see if we could figure out the problem you're seeing. Here's
> what they found:
> 
> Serval route signing between Buffalo and Ubiquiti routers causes
> commotiond and olsrd to seg fault (but works fine in Ubiq-only meshes).
> Debugging it indicates that it's a memory-related architecture-specific
> problem in commotiond. The hardware we used to replicate the issue were
> Ubiquiti Picostation and Buffalo WZR-HP-G300NH.
> 
> We already have one open memory-related fix for commotiond that may or
> may not solve the problem:
> https://github.com/opentechinstitute/commotiond/pull/103. We'll do some
> more testing today and tomorrow and let you know anything else we find.
> 
> Thanks for your patience with this and hopefully we'll be able to
> resolve the problem.
> 
> Dan
> 
> On 07/02/2014 11:44 AM, Myles wrote:
"
1874,Commotion-dev, meshing over ethernet,"Thu, 03 Jul 2014 18:18:43 -0400",-0400,Will Hawkins,"Further debugging seems to indicate that if one of the two nodes is
meshing over a single interface, the other node may be set to mesh over
two interfaces. In other words, the problem seems to exist only when
both nodes are meshing over multiple interfaces.

Go figure?

I'm getting more and more flummoxed by what is going on, but we are
working hard at fixing the problem.

Will

On 07/02/2014 08:49 PM, Will Hawkins wrote:
> Miles,
> 
> We have uncovered the root of the problem and wanted to share the findings.
> 
> First of all, thank you for your patience with us as we debugged this
> issue. Without your input, we would never have realized that this was a
> problem.
> 
> In cases like yours, olsrd is meshing over two different interfaces.
> There is a primary interface address that labels the node throughout the
> network and there are other, secondary, addresses that label the
> individual interfaces.
> 
> In the Serval route signing plugin, we use those labels to index a table
> of timeouts/timestamps. The values from this table are used to locate
> the proper key, the proper timestamp skew, etc.
> 
> When a node has multiple interfaces, the plugin gets confused about
> which label to use to index that table. As a result, the skews never
> converge and the routes cannot be signed.
> 
> We are going to start looking at possible solutions for this problem as
> soon as possible. We cannot promise a fix before the start of Toorcamp
> next week, but we are going to do our best. We will keep you posted on
> our progress and send you any fixes.
> 
> In the meantime, the only way to work around the problem is to mesh on a
> single interface per node.
> 
> I hope this information helps. As I said, we will keep you posted!
> 
> Thanks again for all the input you've given us!
> Will
> 
> On 07/02/2014 05:29 PM, Dan Staples wrote:
"
1875,Commotion-dev, meshing over ethernet,"Mon, 07 Jul 2014 18:25:12 -0400",-0400,Will Hawkins,"Okay!

So, please (apparently) disregard my previous messages. The root of the
problem is conceptually more simple (although I haven't yet started
thinking about the fix):

It appears that MDP expects
challenge/challenge-response/response-response messages (i.e. MDP
control packets) to be the very first message in any OLSR packet. That
means that if any of those messages is not first, then they will get
missed. This is obviously a problem.

The pico stations never seem to append any packets before an MDP control
packet. The Buffalo router does. I think it's more of a timing/packet
size issue, but the Buffalo router is a good test case because it
exercises this little ""gem"".

Now, on to the fix. I am hoping to get something going tonight. I will
keep everyone posted!

Will

On 07/03/2014 06:18 PM, Will Hawkins wrote:
> Further debugging seems to indicate that if one of the two nodes is
> meshing over a single interface, the other node may be set to mesh over
> two interfaces. In other words, the problem seems to exist only when
> both nodes are meshing over multiple interfaces.
> 
> Go figure?
> 
> I'm getting more and more flummoxed by what is going on, but we are
> working hard at fixing the problem.
> 
> Will
> 
> On 07/02/2014 08:49 PM, Will Hawkins wrote:
"
1876,Commotion-dev, Fwd: [Battlemesh] our first serial + power remote,"Tue, 08 Jul 2014 14:58:58 -0400",-0400,Josh King,"This looks similar to something we'd discussed before as far as
automating a testbed network as part of our build process.


"
1877,Commotion-dev, Fwd: [Battlemesh] our first serial + power,"Tue, 08 Jul 2014 19:53:14 -0400",-0400,Chris Ritzo,
1878,Commotion-dev, meshing over ethernet,"Tue, 08 Jul 2014 22:36:40 -0400",-0400,Will Hawkins,"A fix for the control-message-as-the-first-message-in-an-olsr-packet has
been conceived and tested. There is now only one thing left to fix:

When a node sends out a challenge control message (a), if it receives a
challenge message from (a) before it receives a challenge response
control message, the whole things goes to pot. This is incredibly common
in the scenario when nodes are meshing over multiple interfaces. Once
this problem is resolved, I think we will have a complete solution.

Will

On 07/07/2014 06:25 PM, Will Hawkins wrote:
> Okay!
> 
> So, please (apparently) disregard my previous messages. The root of the
> problem is conceptually more simple (although I haven't yet started
> thinking about the fix):
> 
> It appears that MDP expects
> challenge/challenge-response/response-response messages (i.e. MDP
> control packets) to be the very first message in any OLSR packet. That
> means that if any of those messages is not first, then they will get
> missed. This is obviously a problem.
> 
> The pico stations never seem to append any packets before an MDP control
> packet. The Buffalo router does. I think it's more of a timing/packet
> size issue, but the Buffalo router is a good test case because it
> exercises this little ""gem"".
> 
> Now, on to the fix. I am hoping to get something going tonight. I will
> keep everyone posted!
> 
> Will
> 
> On 07/03/2014 06:18 PM, Will Hawkins wrote:
"
1879,Commotion-dev, Fwd: [Battlemesh] our first serial + power,"Wed, 09 Jul 2014 13:39:49 +0200",+0200,Ufo,"yes, of course. there are many ways, but we tried to use normal mesh 
routers instead of a normal computer for that.
so the test-szenario can be used within (and as) a working mesh network 
instead of being in a laboratory. next installation we are planning will 
be water proof so we can install it on a rooftop. :-)

you need:
* a proper mesh router with space left for additional packages and 
power-switchable usb-ports (f.i. tplink 4300)
* usb to serial interface
* a router for being tested
* last but not least: a master/slave power strip, which is controlled by 
usb.

i cant find such a power strip in US stores but hope that you will find 
a similiar device. it also can be used for switching lamps or further 
stuff (home automatisation) without a need for soldering by yourself 
(f.i. because of insurance coverage)

http://www.conrad.de/ce/de/product/611769/MasterSlave-Steckdosenleiste-5fach-Weiss-Schutzkontakt-Gembird-201010013?ref=searchDetail

greetings, ufo

p.s. aditional hints are on 
http://leipzig.freifunk.net/openwrt-remote-management-konsole/
   there are the commands to use and some hints for the VLANs. f.i. you 
have to change LAN from 192.168.1.1 to 192.168.2.1 in order to let it 
work with ""normal"" openwrt settings on the testrouter. and you need a 
further VLAN, which has 192.168.1.254 to access the test-router via 
192.168.1.1

Am 09.07.2014 01:53, schrieb Chris Ritzo:
> "
1880,Commotion-dev, Fwd: [Battlemesh] our first serial + power,"Wed, 09 Jul 2014 08:43:07 -0400",-0400,Chris Ritzo,"Christian & Ufo-
Thanks a lot! I'll read the page a bit more closely. We have been hoping
to build something like this as time allows to provide more automated
testing of new builds.

Cheers,
Chris

On Wed 09 Jul 2014 07:39:49 AM EDT, Ufo wrote:
> yes, of course. there are many ways, but we tried to use normal mesh
> routers instead of a normal computer for that.
> so the test-szenario can be used within (and as) a working mesh
> network instead of being in a laboratory. next installation we are
> planning will be water proof so we can install it on a rooftop. :-)
>
> you need:
> * a proper mesh router with space left for additional packages and
> power-switchable usb-ports (f.i. tplink 4300)
> * usb to serial interface
> * a router for being tested
> * last but not least: a master/slave power strip, which is controlled
> by usb.
>
> i cant find such a power strip in US stores but hope that you will
> find a similiar device. it also can be used for switching lamps or
> further stuff (home automatisation) without a need for soldering by
> yourself (f.i. because of insurance coverage)
>
> http://www.conrad.de/ce/de/product/611769/MasterSlave-Steckdosenleiste-5fach-Weiss-Schutzkontakt-Gembird-201010013?ref=searchDetail
>
>
> greetings, ufo
>
> p.s. aditional hints are on
> http://leipzig.freifunk.net/openwrt-remote-management-konsole/
>   there are the commands to use and some hints for the VLANs. f.i. you
> have to change LAN from 192.168.1.1 to 192.168.2.1 in order to let it
> work with ""normal"" openwrt settings on the testrouter. and you need a
> further VLAN, which has 192.168.1.254 to access the test-router via
> 192.168.1.1
>
> Am 09.07.2014 01:53, schrieb Chris Ritzo:
> Very cool! I met ufo from Freifunk Leipzig at the summit in Berlin.
> 
> I wonder if he/they would be willing to share the design and we could
> attempt replicating it?
> 
> 
> On 07/08/2014 02:58 PM, Josh King wrote:
"
1881,Commotion-dev, Fwd: [Battlemesh] our first serial + power,"Wed, 09 Jul 2014 08:47:22 -0400",-0400,Chris Ritzo,"Maybe one of these for US power:
http://www.pwrusb.com/products.html

On 07/09/2014 08:43 AM, Chris Ritzo wrote:
> Christian & Ufo-
> Thanks a lot! I'll read the page a bit more closely. We have been hoping
> to build something like this as time allows to provide more automated
> testing of new builds.
> 
> Cheers,
> Chris
> 
> On Wed 09 Jul 2014 07:39:49 AM EDT, Ufo wrote:
"
1882,Commotion-dev, Fwd: [Battlemesh] our first serial + power,"Wed, 9 Jul 2014 14:59:17 -0700",-0700,Danny Iland,"Chris,

That would be good for a lab with multiple devices. For a single device, if
you want to save a little money and you don't mind using GPIO instead of
USB, adafruit has a nice little powerswitch tail:
http://www.adafruit.com/products/268


On Wed, Jul 9, 2014 at 5:47 AM, Chris Ritzo <critzo at opentechinstitute.org>
wrote:

> Maybe one of these for US power:
> http://www.pwrusb.com/products.html
>
> On 07/09/2014 08:43 AM, Chris Ritzo wrote:
> > Christian & Ufo-
> > Thanks a lot! I'll read the page a bit more closely. We have been hoping
> > to build something like this as time allows to provide more automated
> > testing of new builds.
> >
> > Cheers,
> > Chris
> >
> > On Wed 09 Jul 2014 07:39:49 AM EDT, Ufo wrote:
> "
1883,Commotion-dev, meshing over ethernet,"Wed, 09 Jul 2014 19:35:53 -0400",-0400,Dan Staples,"Is this something that would affect the olsrd-secure plugin as well?

Dan

On 07/08/2014 10:36 PM, Will Hawkins wrote:
> A fix for the control-message-as-the-first-message-in-an-olsr-packet has
> been conceived and tested. There is now only one thing left to fix:
> 
> When a node sends out a challenge control message (a), if it receives a
> challenge message from (a) before it receives a challenge response
> control message, the whole things goes to pot. This is incredibly common
> in the scenario when nodes are meshing over multiple interfaces. Once
> this problem is resolved, I think we will have a complete solution.
> 
> Will
> 
> On 07/07/2014 06:25 PM, Will Hawkins wrote:
"
1884,Commotion-dev, meshing over ethernet,"Wed, 09 Jul 2014 19:39:51 -0400",-0400,Will Hawkins,"

On 07/09/2014 07:35 PM, Dan Staples wrote:
> Is this something that would affect the olsrd-secure plugin as well?

Yes. All of the ""fixes"" that I put in my pull request affect the
olsrd-secure plugin too. That's a big ol' :-(

Will

> 
> Dan
> 
> On 07/08/2014 10:36 PM, Will Hawkins wrote:
"
1885,Commotion-dev, meshing over ethernet,"Wed, 09 Jul 2014 19:42:10 -0400",-0400,Will Hawkins,"On that note, please see
https://github.com/opentechinstitute/olsrd/pull/25 as a potential fix
for this issue.

I've got this code running in (basically) Miles' setup and see good
routes. We are going to test this extensively over the next few days and
will see what happens. We'll keep everyone posted.

Will

On 07/09/2014 07:39 PM, Will Hawkins wrote:
> 
> 
> On 07/09/2014 07:35 PM, Dan Staples wrote:
"
1886,Commotion-dev, OpenWRT Barrier Breaker RC1 released,"Tue, 15 Jul 2014 11:17:54 -0400",-0400,Josh King,"https://lists.openwrt.org/pipermail/openwrt-devel/2014-July/026707.html
-- 
Josh King
Lead Technologist
The Open Technology Institute
http://opentechinstitute.org
PGP Fingerprint: 8269 ED6F EA3B 7D78 F074 1E99 2FDA 4DA1 69AE 4999

"
1887,Commotion-dev, OpenWRT Barrier Breaker RC1 released,"Tue, 15 Jul 2014 19:53:16 -0400",-0400,Dan Staples,"""* UCI configuration improvements
	- Support for testing configuration and rollback to working 	
	  last working state""

hmmm...this could be very useful in the new upgrade wrapper we were
talking about the other day.

On 07/15/2014 11:17 AM, Josh King wrote:
> https://lists.openwrt.org/pipermail/openwrt-devel/2014-July/026707.html
>
> 
> 
> 
> _______________________________________________ Commotion-dev
> mailing list Commotion-dev at lists.chambana.net 
> https://lists.chambana.net/mailman/listinfo/commotion-dev
> 

-- 
Dan Staples

Open Technology Institute
https://commotionwireless.net
OpenPGP key: http://disman.tl/pgp.asc
Fingerprint: 2480 095D 4B16 436F 35AB 7305 F670 74ED BD86 43A9
Nat and I have to spend the day in the DC office so wouldn't make it
there til the evening. Is there still setup that we can help with then?

On 07/15/2014 08:34 AM, Sandra wrote:


-- 
Dan Staples

Open Technology Institute
https://commotionwireless.net
OpenPGP key: http://disman.tl/pgp.asc
Fingerprint: 2480 095D 4B16 436F 35AB 7305 F670 74ED BD86 43A9
Enigmail
"
1888,Commotion-dev, OpenWRT Barrier Breaker RC1 released,"Tue, 15 Jul 2014 20:19:24 -0400",-0400,Josh King,"True. Plus as per these release notes and a previous mailinglist post, it sounds like they've implemented filesystem-level checkpoint and rollback for sysupgrade.

On July 15, 2014 7:53:16 PM EDT, Dan Staples <danstaples at opentechinstitute.org> wrote:
>""* UCI configuration improvements
>	- Support for testing configuration and rollback to working 	
>	  last working state""
>
>hmmm...this could be very useful in the new upgrade wrapper we were
>talking about the other day.
>
>On 07/15/2014 11:17 AM, Josh King wrote:
"
1889,Commotion-dev, Commotion Client Development,"Wed, 16 Jul 2014 08:35:51 -0400",-0400,Dan Staples,"Hey Joshua, just wanted to see if you've done any more experimenting
with the Commotion client? Unfortunately we haven't been able to do much
development on the client from our end, but if there are any small
things that would help you out with what you're doing, I'd love to help!

Dan

On 06/09/2014 04:11 PM, Dan Staples wrote:
> Responses inline:
> 
> On 06/07/2014 02:25 PM, Joshua Besneatte wrote:
"
1890,Commotion-dev, Raspberry Pi image,"Wed, 16 Jul 2014 11:51:11 -0700 (PDT)",(PDT),Samuel Hedrick,"Does anyone have a raspberry pi SD card image with commotion client preinstalled? I do not understand how to compile/install it.
Samuel
"
1891,Commotion-dev, [commotiond] need help on cmake,"Wed, 16 Jul 2014 20:06:10 -0500",-0500,Luis EG Ontanon,"Need cmake help to add the generated lua api to the build system...

I should be able to generate colua.c but my mods to the CMakeLists.txt
so far have failed...

This is what I added: I've tried with various versions of the MACROS
with no succesfull outcome. Can someone tell me what I'm doing wrong.

SET( LUA_EXECUTABLE /own_libs/lua-5.2.3/src/lua )

ADD_CUSTOM_COMMAND(
    OUTPUT
      colua.c
    COMMAND ${LUA_EXECUTABLE}
      ${CMAKE_CURRENT_SOURCE_DIR}/extern/luaqwrap.lua
      ${CMAKE_CURRENT_SOURCE_DIR}/colua.lwq
      ${CMAKE_CURRENT_BINARY_DIR}/colua.c
    DEPENDS
      ${CMAKE_CURRENT_SOURCE_DIR}/colua.lwq
      ${CMAKE_CURRENT_SOURCE_DIR}/extern/luaqwrap/luaqwrap.lua
      ${CMAKE_CURRENT_SOURCE_DIR}/extern/luaqwrap/luaqwrap.h
      ${CMAKE_CURRENT_SOURCE_DIR}/extern/luaqwrap/luaqwrap.c
)


-- 
This information is top security. When you have read it, destroy yourself.
-- Marshall McLuhan
"
1892,Commotion-dev, [commotiond] need help on cmake,"Thu, 17 Jul 2014 11:27:40 -0400",-0400,Josh King,"Hey Luis,

Are you receiving an error from this, or is it just not building the
file? Is colua.c listed as a source file in one of the other targets?
Just checking because otherwise this custom command won't get called by
the build process.

On 07/16/2014 09:06 PM, Luis EG Ontanon wrote:
> Need cmake help to add the generated lua api to the build system...
> 
> I should be able to generate colua.c but my mods to the CMakeLists.txt
> so far have failed...
> 
> This is what I added: I've tried with various versions of the MACROS
> with no succesfull outcome. Can someone tell me what I'm doing wrong.
> 
> SET( LUA_EXECUTABLE /own_libs/lua-5.2.3/src/lua )
> 
> ADD_CUSTOM_COMMAND(
>     OUTPUT
>       colua.c
>     COMMAND ${LUA_EXECUTABLE}
>       ${CMAKE_CURRENT_SOURCE_DIR}/extern/luaqwrap.lua
>       ${CMAKE_CURRENT_SOURCE_DIR}/colua.lwq
>       ${CMAKE_CURRENT_BINARY_DIR}/colua.c
>     DEPENDS
>       ${CMAKE_CURRENT_SOURCE_DIR}/colua.lwq
>       ${CMAKE_CURRENT_SOURCE_DIR}/extern/luaqwrap/luaqwrap.lua
>       ${CMAKE_CURRENT_SOURCE_DIR}/extern/luaqwrap/luaqwrap.h
>       ${CMAKE_CURRENT_SOURCE_DIR}/extern/luaqwrap/luaqwrap.c
> )
> 
> 

-- 
Josh King
Lead Technologist
The Open Technology Institute
http://opentechinstitute.org
PGP Fingerprint: 8269 ED6F EA3B 7D78 F074 1E99 2FDA 4DA1 69AE 4999

"
1893,Commotion-dev, Raspberry Pi image,"Thu, 17 Jul 2014 18:15:08 -0400",-0400,Dan Staples,"Hi Samuel,

Joshua recently put together a how-to on running Commotion on the
Raspberry Pi. You can check out that discussion here:
https://lists.chambana.net/pipermail/commotion-dev/2014-May/001822.html.
Maybe he has an SD card image he could clone from one of the Pi's he is
running, and share that?

Dan

On 07/16/2014 02:51 PM, Samuel Hedrick wrote:
> Does anyone have a raspberry pi SD card image with commotion client
> preinstalled? I do not understand how to compile/install it. 
> 
> Samuel
> 
> 
> _______________________________________________
> Commotion-dev mailing list
> Commotion-dev at lists.chambana.net
> https://lists.chambana.net/mailman/listinfo/commotion-dev
> 

-- 
Dan Staples

Open Technology Institute
https://commotionwireless.net
OpenPGP key: http://disman.tl/pgp.asc
Fingerprint: 2480 095D 4B16 436F 35AB 7305 F670 74ED BD86 43A9
"
1894,Commotion-dev, [commotiond:obj] Garbage collection and object,"Thu, 17 Jul 2014 17:16:50 -0500",-0500,Luis EG Ontanon,"the Lua interface is on its way...

First I'm coming out with a full wrapper for commotionlib, that should
allow to write a full blown client or daemon in Lua. Later, as I get
more acquainted with the API I will think in how to get it to work in
a ""modular"" way ""within commotionlib"".

In the next few days I'll be done with the code generator and within
the next few weeks the LuaAPI should be compiled and ready for the
next step:

To run leaking almost everything... to allow me to understand what's
needed for correct garbage collection: The issue is that Lifespan of
different objects, differs from their presence in Lua, some exist only
while ""in Lua"" (and get destroyed by it) some others are to be
delegated to someone else, while some are just to be left alone).

It is evident to me that the solution to the problem goes through how
to use the flags field of co_obj_t .

The key to successful memory management is having a clear idea of who
is to take care, when and how,  of the destruction of objects ( ""the
trinity"" of garbage collection).

So evidently what we need to convey in the flags field is enough
information to be able to easily come out with this ""trinity"".

I was thinking in using few of the LSBs to convey ""who"" is delegated,
an leave the MSBs to ""the delegate"" as each one has its own demands.

some of the values I'm thinking for the ""who subfield"" are:
 - ""somewhere in the stack""... a return will destroy it... (useful to
know as I may want to make my own copy if it has to predictably
persist)
 - ""no one"" static object.. will persist forever..
 - one of some ""actors"": e.g. the Lua machine, This or that module.

In this scenario and we need to define some methods to delegate between actors.

Cheers,
\Lego
-- 
This information is top security. When you have read it, destroy yourself.
-- Marshall McLuhan
"
1895,Commotion-dev, Fwd: [PATCH] ath10k: don't advertise IBSS iftype,"Fri, 25 Jul 2014 19:53:12 -0400",-0400,Will Hawkins,"It looks like the ath10k does not support IBSS.

Will


"
1896,Commotion-dev, Fwd: [PATCH] ath10k: don't advertise IBSS,"Fri, 25 Jul 2014 22:21:24 -0400",-0400,Josh King,"*Flips table*

On July 25, 2014 7:53:12 PM EDT, Will Hawkins <hawkinsw at opentechinstitute.org> wrote:
>It looks like the ath10k does not support IBSS.
>
>Will
>
>
>"
1897,Commotion-dev, Fwd: [PATCH] ath10k: don't advertise,"Sat, 26 Jul 2014 11:30:52 -0400",-0400,Griffin Boyce,"*snicker*

Now, now, let's not let our emotions get the better of us. I'm sure that the other Aetheros chipsets are plenty good ;)


On July 25, 2014 10:21:24 PM EDT, Josh King <jking at opentechinstitute.org> wrote:
>*Flips table*
>
>On July 25, 2014 7:53:12 PM EDT, Will Hawkins
><hawkinsw at opentechinstitute.org> wrote:
"
1898,Commotion-dev, Fwd: [PATCH] ath10k: don't advertise,"Sat, 26 Jul 2014 16:00:30 -0400",-0400,Dan Staples,"Was there a particular device using the ath10k you were hoping to use?

On 07/26/2014 11:30 AM, Griffin Boyce wrote:
> *snicker*
> 
> Now, now, let's not let our emotions get the better of us. I'm sure that
> the other Aetheros chipsets are plenty good ;)
> 
> 
> On July 25, 2014 10:21:24 PM EDT, Josh King
> <jking at opentechinstitute.org> wrote:
> 
>     *Flips table*
> 
> 
> 
>     On July 25, 2014 7:53:12 PM EDT, Will Hawkins
>     <hawkinsw at opentechinstitute.org> wrote:
> 
>         It looks like the ath10k does not support IBSS.
> 
>         Will
> 
> 
>         "
1899,Commotion-dev, Fwd: [PATCH] ath10k: don't advertise,"Sat, 26 Jul 2014 16:54:40 -0400",-0400,Josh King,"No, not yet. Mostly just being facetious. However, I am hoping that this
isn't a trend for the next generation of wifi chipsets going forward.

On 07/26/2014 11:30 AM, Griffin Boyce wrote:
> *snicker*
> 
> Now, now, let's not let our emotions get the better of us. I'm sure that
> the other Aetheros chipsets are plenty good ;)
> 
> 
> On July 25, 2014 10:21:24 PM EDT, Josh King
> <jking at opentechinstitute.org> wrote:
> 
>     *Flips table*
> 
> 
> 
>     On July 25, 2014 7:53:12 PM EDT, Will Hawkins
>     <hawkinsw at opentechinstitute.org> wrote:
> 
>         It looks like the ath10k does not support IBSS.
> 
>         Will
> 
> 
>         "
1900,Commotion-dev, Fwd: [PATCH] ath10k: don't advertise IBSS,"Sat, 26 Jul 2014 16:54:45 -0500",-0500,Ben West,"It's odd then that IBSS-related patches have submitted to ath10k this year:
http://lists.infradead.org/pipermail/ath10k/2014-February/001159.html

Likewise, the ath10k driver page doesn't mention the absence of IBSS/adhoc
support (which one would expect to be a rather large omission worth
pointing out):
http://wireless.kernel.org/en/users/Drivers/ath10k

Looks like the difference arose b/w versions 999.999.0.x and 10.1.x of the
(closed-source?) firmware:
http://wireless.kernel.org/en/users/Drivers/ath10k/firmware



On Sat, Jul 26, 2014 at 3:54 PM, Josh King <jking at opentechinstitute.org>
wrote:

> No, not yet. Mostly just being facetious. However, I am hoping that this
> isn't a trend for the next generation of wifi chipsets going forward.
>
> On 07/26/2014 11:30 AM, Griffin Boyce wrote:
> > *snicker*
> >
> > Now, now, let's not let our emotions get the better of us. I'm sure that
> > the other Aetheros chipsets are plenty good ;)
> >
> >
> > On July 25, 2014 10:21:24 PM EDT, Josh King
> > <jking at opentechinstitute.org> wrote:
> >
> >     *Flips table*
> >
> >
> >
> >     On July 25, 2014 7:53:12 PM EDT, Will Hawkins
> >     <hawkinsw at opentechinstitute.org> wrote:
> >
> >         It looks like the ath10k does not support IBSS.
> >
> >         Will
> >
> >
> >         "
1901,Commotion-dev, Fwd: [PATCH] ath10k: don't advertise IBSS,"Mon, 28 Jul 2014 11:45:14 -0700",-0700,The Doctor,
1902,Commotion-dev, Fwd: [PATCH] ath10k: don't advertise IBSS,"Mon, 28 Jul 2014 16:02:48 -0500",-0500,Ben West,"The unfortunate detail is that adhoc mode is not especially favored by many
commercial vendors (Qualcomm included), and a prevailing opinion among them
is that the IEEE 802.11 spec for adhoc in particular is inadequate for
modern implementation.  Indeed, in lieu of the electromagnetic calisthenics
involved in doing MIMO under 802.11ac (use which channels? why, ALL of
them!), they readily can jump to the conclusion including adhoc support
would result in sufficient performance, so they won't do it.


On Mon, Jul 28, 2014 at 3:09 PM, Griffin Boyce <griffin at cryptolab.net>
wrote:

> Yes, it seems quite strange that they would shoot themselves in the foot
> like that. I'm withholding judgment in the absence of more information.
>
> ~ Griffin
>
>
> On July 26, 2014 5:54:45 PM EDT, Ben West <ben at gowasabi.net> wrote:
"
1903,Commotion-dev, Fwd: [PATCH] ath10k: don't advertise IBSS,"Mon, 28 Jul 2014 16:09:35 -0400",-0400,Griffin Boyce,"Yes, it seems quite strange that they would shoot themselves in the foot like that. I'm withholding judgment in the absence of more information.

~ Griffin

On July 26, 2014 5:54:45 PM EDT, Ben West <ben at gowasabi.net> wrote:
>It's odd then that IBSS-related patches have submitted to ath10k this
>year:
>http://lists.infradead.org/pipermail/ath10k/2014-February/001159.html
>
>Likewise, the ath10k driver page doesn't mention the absence of
>IBSS/adhoc
>support (which one would expect to be a rather large omission worth
>pointing out):
>http://wireless.kernel.org/en/users/Drivers/ath10k
>
>Looks like the difference arose b/w versions 999.999.0.x and 10.1.x of
>the
>(closed-source?) firmware:
>http://wireless.kernel.org/en/users/Drivers/ath10k/firmware
>
>
>
>On Sat, Jul 26, 2014 at 3:54 PM, Josh King
><jking at opentechinstitute.org>
>wrote:
>
"
1904,Commotion-dev, Fwd: [PATCH] ath10k: don't advertise IBSS,"Mon, 28 Jul 2014 16:09:36 -0500",-0500,Ben West,"Typos ahoy!  ""Result in *insufficient* performance...""


On Mon, Jul 28, 2014 at 4:02 PM, Ben West <ben at gowasabi.net> wrote:

> The unfortunate detail is that adhoc mode is not especially favored by
> many commercial vendors (Qualcomm included), and a prevailing opinion among
> them is that the IEEE 802.11 spec for adhoc in particular is inadequate for
> modern implementation.  Indeed, in lieu of the electromagnetic calisthenics
> involved in doing MIMO under 802.11ac (use which channels? why, ALL of
> them!), they readily can jump to the conclusion including adhoc support
> would result in sufficient performance, so they won't do it.
>
>
> On Mon, Jul 28, 2014 at 3:09 PM, Griffin Boyce <griffin at cryptolab.net>
> wrote:
>
"
1905,Commotion-dev, Fwd: [PATCH] ath10k: don't advertise IBSS,"Tue, 29 Jul 2014 12:25:38 -0400 (EDT)",(EDT),Kirk Reiser,"However, isn't it adhoc mode that all the auto manufacturers are using
for intervehicle communication? That would certainly increase the
demand for it. I aggree not supporting it would be shooting oneself in
the foot commercially.

On Mon, 28 Jul 2014, Ben West wrote:

> Typos ahoy!  ""Result in *insufficient* performance...""
>
>
> On Mon, Jul 28, 2014 at 4:02 PM, Ben West <ben at gowasabi.net> wrote:
>
"
1906,Commotion-dev, [commotiond:obj] Garbage collection and object,"Tue, 29 Jul 2014 14:42:45 -0400",-0400,Josh King,"Hi Luis,

I'm trying to fully understand how this will work; forgive me, I haven't
ever written lua bindings for a C library before. If it helps, I can try
and describe how memory management happens right now in libcommotion.

All objects are explicitly allocated and explicitly destroyed by the
caller; the library does not attempt to do garbage collection on its
own. The only instance where there is anything resembling garbage
collection is in the use of the halloc allocator, which is used
throughout the library. Halloc allows you to assign a particular block
of dynamic memory as the parent of another block of dynamic memory. This
allows one to build data structures (as we have done with co_list and
co_tree) where each object inserted into it is associated with the
structure, so that when the structure is freed, every one of its member
objects is freed as well. Again, the caller controls the use of this
functionality, as there are _unsafe insert functions that allow you to
insert an object without it being linked to the object as a whole. We
use this to queue up objects for the network socket without having to
worry about accidentally freeing the originals.

So basically I'm trying to figure out if there are any instances where
something that gets passed through the stack to lua will be the
responsibility of anything other than one of the 'actors' i.e. the
caller. And if so, something is getting passed through that has
ephemeral state or is static, whether we need to signal that or whether
that is an indication of a bug in how the library is handling that piece
of memory.

On 07/17/2014 06:16 PM, Luis EG Ontanon wrote:
> the Lua interface is on its way...
> 
> First I'm coming out with a full wrapper for commotionlib, that should
> allow to write a full blown client or daemon in Lua. Later, as I get
> more acquainted with the API I will think in how to get it to work in
> a ""modular"" way ""within commotionlib"".
> 
> In the next few days I'll be done with the code generator and within
> the next few weeks the LuaAPI should be compiled and ready for the
> next step:
> 
> To run leaking almost everything... to allow me to understand what's
> needed for correct garbage collection: The issue is that Lifespan of
> different objects, differs from their presence in Lua, some exist only
> while ""in Lua"" (and get destroyed by it) some others are to be
> delegated to someone else, while some are just to be left alone).
> 
> It is evident to me that the solution to the problem goes through how
> to use the flags field of co_obj_t .
> 
> The key to successful memory management is having a clear idea of who
> is to take care, when and how,  of the destruction of objects ( ""the
> trinity"" of garbage collection).
> 
> So evidently what we need to convey in the flags field is enough
> information to be able to easily come out with this ""trinity"".
> 
> I was thinking in using few of the LSBs to convey ""who"" is delegated,
> an leave the MSBs to ""the delegate"" as each one has its own demands.
> 
> some of the values I'm thinking for the ""who subfield"" are:
>  - ""somewhere in the stack""... a return will destroy it... (useful to
> know as I may want to make my own copy if it has to predictably
> persist)
>  - ""no one"" static object.. will persist forever..
>  - one of some ""actors"": e.g. the Lua machine, This or that module.
> 
> In this scenario and we need to define some methods to delegate between actors.
> 
> Cheers,
> \Lego
> 

-- 
Josh King
Lead Technologist
The Open Technology Institute
http://opentechinstitute.org
PGP Fingerprint: 8269 ED6F EA3B 7D78 F074 1E99 2FDA 4DA1 69AE 4999

"
1907,Commotion-dev, Fwd: [PATCH] ath10k: don't advertise IBSS,"Tue, 29 Jul 2014 14:46:48 -0400",-0400,Josh King,"Sort of. 802.11p doesn't even attempt to establish a BSS, it just
broadcasts and receives on the wildcard BSSID. So it doesn't use ad-hoc
mode as we would normally use it, but it seems like you could implement
it by setting up an ad-hoc network on the wildcard BSSID without many if
any driver changes.

On 07/29/2014 12:25 PM, Kirk Reiser wrote:
> However, isn't it adhoc mode that all the auto manufacturers are using
> for intervehicle communication? That would certainly increase the
> demand for it. I aggree not supporting it would be shooting oneself in
> the foot commercially.
> 
> On Mon, 28 Jul 2014, Ben West wrote:
> 
"
1908,Commotion-dev, Fwd: [PATCH] ath10k: don't advertise IBSS,"Wed, 30 Jul 2014 13:34:11 +0930",+0930,Paul Gardner-Stephen,"Hello,

Vehicular communications is an interesting push-point to get ad-hoc support
in Wi-Fi, as car vendors may see sufficient value in it to push things
along.

How much 802.11p stuff is out there?

Paul.


On Wed, Jul 30, 2014 at 4:16 AM, Josh King <jking at opentechinstitute.org>
wrote:

> Sort of. 802.11p doesn't even attempt to establish a BSS, it just
> broadcasts and receives on the wildcard BSSID. So it doesn't use ad-hoc
> mode as we would normally use it, but it seems like you could implement
> it by setting up an ad-hoc network on the wildcard BSSID without many if
> any driver changes.
>
> On 07/29/2014 12:25 PM, Kirk Reiser wrote:
> > However, isn't it adhoc mode that all the auto manufacturers are using
> > for intervehicle communication? That would certainly increase the
> > demand for it. I aggree not supporting it would be shooting oneself in
> > the foot commercially.
> >
> > On Mon, 28 Jul 2014, Ben West wrote:
> >
> "
